(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();function jP(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var zw={exports:{}},Kx={},Bw={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gc=Symbol.for("react.element"),NP=Symbol.for("react.portal"),wP=Symbol.for("react.fragment"),kP=Symbol.for("react.strict_mode"),IP=Symbol.for("react.profiler"),PP=Symbol.for("react.provider"),SP=Symbol.for("react.context"),EP=Symbol.for("react.forward_ref"),CP=Symbol.for("react.suspense"),TP=Symbol.for("react.memo"),_P=Symbol.for("react.lazy"),fb=Symbol.iterator;function DP(s){return s===null||typeof s!="object"?null:(s=fb&&s[fb]||s["@@iterator"],typeof s=="function"?s:null)}var Fw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uw=Object.assign,$w={};function Ko(s,t,r){this.props=s,this.context=t,this.refs=$w,this.updater=r||Fw}Ko.prototype.isReactComponent={};Ko.prototype.setState=function(s,t){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,t,"setState")};Ko.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function Ww(){}Ww.prototype=Ko.prototype;function Q0(s,t,r){this.props=s,this.context=t,this.refs=$w,this.updater=r||Fw}var Y0=Q0.prototype=new Ww;Y0.constructor=Q0;Uw(Y0,Ko.prototype);Y0.isPureReactComponent=!0;var gb=Array.isArray,qw=Object.prototype.hasOwnProperty,X0={current:null},Hw={key:!0,ref:!0,__self:!0,__source:!0};function Gw(s,t,r){var a,i={},l=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)qw.call(t,a)&&!Hw.hasOwnProperty(a)&&(i[a]=t[a]);var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){for(var d=Array(c),x=0;x<c;x++)d[x]=arguments[x+2];i.children=d}if(s&&s.defaultProps)for(a in c=s.defaultProps,c)i[a]===void 0&&(i[a]=c[a]);return{$$typeof:Gc,type:s,key:l,ref:o,props:i,_owner:X0.current}}function AP(s,t){return{$$typeof:Gc,type:s.type,key:t,ref:s.ref,props:s.props,_owner:s._owner}}function J0(s){return typeof s=="object"&&s!==null&&s.$$typeof===Gc}function RP(s){var t={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(r){return t[r]})}var yb=/\/+/g;function eh(s,t){return typeof s=="object"&&s!==null&&s.key!=null?RP(""+s.key):t.toString(36)}function xu(s,t,r,a,i){var l=typeof s;(l==="undefined"||l==="boolean")&&(s=null);var o=!1;if(s===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(s.$$typeof){case Gc:case NP:o=!0}}if(o)return o=s,i=i(o),s=a===""?"."+eh(o,0):a,gb(i)?(r="",s!=null&&(r=s.replace(yb,"$&/")+"/"),xu(i,t,r,"",function(x){return x})):i!=null&&(J0(i)&&(i=AP(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(yb,"$&/")+"/")+s)),t.push(i)),1;if(o=0,a=a===""?".":a+":",gb(s))for(var c=0;c<s.length;c++){l=s[c];var d=a+eh(l,c);o+=xu(l,t,r,d,i)}else if(d=DP(s),typeof d=="function")for(s=d.call(s),c=0;!(l=s.next()).done;)l=l.value,d=a+eh(l,c++),o+=xu(l,t,r,d,i);else if(l==="object")throw t=String(s),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ld(s,t,r){if(s==null)return s;var a=[],i=0;return xu(s,a,"","",function(l){return t.call(r,l,i++)}),a}function MP(s){if(s._status===-1){var t=s._result;t=t(),t.then(function(r){(s._status===0||s._status===-1)&&(s._status=1,s._result=r)},function(r){(s._status===0||s._status===-1)&&(s._status=2,s._result=r)}),s._status===-1&&(s._status=0,s._result=t)}if(s._status===1)return s._result.default;throw s._result}var cr={current:null},mu={transition:null},LP={ReactCurrentDispatcher:cr,ReactCurrentBatchConfig:mu,ReactCurrentOwner:X0};function Kw(){throw Error("act(...) is not supported in production builds of React.")}Pt.Children={map:Ld,forEach:function(s,t,r){Ld(s,function(){t.apply(this,arguments)},r)},count:function(s){var t=0;return Ld(s,function(){t++}),t},toArray:function(s){return Ld(s,function(t){return t})||[]},only:function(s){if(!J0(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};Pt.Component=Ko;Pt.Fragment=wP;Pt.Profiler=IP;Pt.PureComponent=Q0;Pt.StrictMode=kP;Pt.Suspense=CP;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LP;Pt.act=Kw;Pt.cloneElement=function(s,t,r){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var a=Uw({},s.props),i=s.key,l=s.ref,o=s._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=X0.current),t.key!==void 0&&(i=""+t.key),s.type&&s.type.defaultProps)var c=s.type.defaultProps;for(d in t)qw.call(t,d)&&!Hw.hasOwnProperty(d)&&(a[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)a.children=r;else if(1<d){c=Array(d);for(var x=0;x<d;x++)c[x]=arguments[x+2];a.children=c}return{$$typeof:Gc,type:s.type,key:i,ref:l,props:a,_owner:o}};Pt.createContext=function(s){return s={$$typeof:SP,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:PP,_context:s},s.Consumer=s};Pt.createElement=Gw;Pt.createFactory=function(s){var t=Gw.bind(null,s);return t.type=s,t};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(s){return{$$typeof:EP,render:s}};Pt.isValidElement=J0;Pt.lazy=function(s){return{$$typeof:_P,_payload:{_status:-1,_result:s},_init:MP}};Pt.memo=function(s,t){return{$$typeof:TP,type:s,compare:t===void 0?null:t}};Pt.startTransition=function(s){var t=mu.transition;mu.transition={};try{s()}finally{mu.transition=t}};Pt.unstable_act=Kw;Pt.useCallback=function(s,t){return cr.current.useCallback(s,t)};Pt.useContext=function(s){return cr.current.useContext(s)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(s){return cr.current.useDeferredValue(s)};Pt.useEffect=function(s,t){return cr.current.useEffect(s,t)};Pt.useId=function(){return cr.current.useId()};Pt.useImperativeHandle=function(s,t,r){return cr.current.useImperativeHandle(s,t,r)};Pt.useInsertionEffect=function(s,t){return cr.current.useInsertionEffect(s,t)};Pt.useLayoutEffect=function(s,t){return cr.current.useLayoutEffect(s,t)};Pt.useMemo=function(s,t){return cr.current.useMemo(s,t)};Pt.useReducer=function(s,t,r){return cr.current.useReducer(s,t,r)};Pt.useRef=function(s){return cr.current.useRef(s)};Pt.useState=function(s){return cr.current.useState(s)};Pt.useSyncExternalStore=function(s,t,r){return cr.current.useSyncExternalStore(s,t,r)};Pt.useTransition=function(){return cr.current.useTransition()};Pt.version="18.3.1";Bw.exports=Pt;var b=Bw.exports;const Pn=jP(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OP=b,VP=Symbol.for("react.element"),zP=Symbol.for("react.fragment"),BP=Object.prototype.hasOwnProperty,FP=OP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UP={key:!0,ref:!0,__self:!0,__source:!0};function Qw(s,t,r){var a,i={},l=null,o=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)BP.call(t,a)&&!UP.hasOwnProperty(a)&&(i[a]=t[a]);if(s&&s.defaultProps)for(a in t=s.defaultProps,t)i[a]===void 0&&(i[a]=t[a]);return{$$typeof:VP,type:s,key:l,ref:o,props:i,_owner:FP.current}}Kx.Fragment=zP;Kx.jsx=Qw;Kx.jsxs=Qw;zw.exports=Kx;var e=zw.exports,ap={},Yw={exports:{}},_r={},Xw={exports:{}},Jw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function t(ue,xe){var pe=ue.length;ue.push(xe);e:for(;0<pe;){var Le=pe-1>>>1,De=ue[Le];if(0<i(De,xe))ue[Le]=xe,ue[pe]=De,pe=Le;else break e}}function r(ue){return ue.length===0?null:ue[0]}function a(ue){if(ue.length===0)return null;var xe=ue[0],pe=ue.pop();if(pe!==xe){ue[0]=pe;e:for(var Le=0,De=ue.length,n=De>>>1;Le<n;){var N=2*(Le+1)-1,h=ue[N],_=N+1,G=ue[_];if(0>i(h,pe))_<De&&0>i(G,h)?(ue[Le]=G,ue[_]=pe,Le=_):(ue[Le]=h,ue[N]=pe,Le=N);else if(_<De&&0>i(G,pe))ue[Le]=G,ue[_]=pe,Le=_;else break e}}return xe}function i(ue,xe){var pe=ue.sortIndex-xe.sortIndex;return pe!==0?pe:ue.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var o=Date,c=o.now();s.unstable_now=function(){return o.now()-c}}var d=[],x=[],f=1,j=null,w=3,S=!1,g=!1,V=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(ue){for(var xe=r(x);xe!==null;){if(xe.callback===null)a(x);else if(xe.startTime<=ue)a(x),xe.sortIndex=xe.expirationTime,t(d,xe);else break;xe=r(x)}}function H(ue){if(V=!1,L(ue),!g)if(r(d)!==null)g=!0,Re(q);else{var xe=r(x);xe!==null&&ge(H,xe.startTime-ue)}}function q(ue,xe){g=!1,V&&(V=!1,T(u),u=-1),S=!0;var pe=w;try{for(L(xe),j=r(d);j!==null&&(!(j.expirationTime>xe)||ue&&!J());){var Le=j.callback;if(typeof Le=="function"){j.callback=null,w=j.priorityLevel;var De=Le(j.expirationTime<=xe);xe=s.unstable_now(),typeof De=="function"?j.callback=De:j===r(d)&&a(d),L(xe)}else a(d);j=r(d)}if(j!==null)var n=!0;else{var N=r(x);N!==null&&ge(H,N.startTime-xe),n=!1}return n}finally{j=null,w=pe,S=!1}}var Q=!1,O=null,u=-1,U=5,F=-1;function J(){return!(s.unstable_now()-F<U)}function D(){if(O!==null){var ue=s.unstable_now();F=ue;var xe=!0;try{xe=O(!0,ue)}finally{xe?$():(Q=!1,O=null)}}else Q=!1}var $;if(typeof M=="function")$=function(){M(D)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,Ae=je.port2;je.port1.onmessage=D,$=function(){Ae.postMessage(null)}}else $=function(){E(D,0)};function Re(ue){O=ue,Q||(Q=!0,$())}function ge(ue,xe){u=E(function(){ue(s.unstable_now())},xe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ue){ue.callback=null},s.unstable_continueExecution=function(){g||S||(g=!0,Re(q))},s.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<ue?Math.floor(1e3/ue):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_getFirstCallbackNode=function(){return r(d)},s.unstable_next=function(ue){switch(w){case 1:case 2:case 3:var xe=3;break;default:xe=w}var pe=w;w=xe;try{return ue()}finally{w=pe}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ue,xe){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var pe=w;w=ue;try{return xe()}finally{w=pe}},s.unstable_scheduleCallback=function(ue,xe,pe){var Le=s.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Le+pe:Le):pe=Le,ue){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=pe+De,ue={id:f++,callback:xe,priorityLevel:ue,startTime:pe,expirationTime:De,sortIndex:-1},pe>Le?(ue.sortIndex=pe,t(x,ue),r(d)===null&&ue===r(x)&&(V?(T(u),u=-1):V=!0,ge(H,pe-Le))):(ue.sortIndex=De,t(d,ue),g||S||(g=!0,Re(q))),ue},s.unstable_shouldYield=J,s.unstable_wrapCallback=function(ue){var xe=w;return function(){var pe=w;w=xe;try{return ue.apply(this,arguments)}finally{w=pe}}}})(Jw);Xw.exports=Jw;var $P=Xw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WP=b,Tr=$P;function Me(s){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+s,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zw=new Set,dc={};function Mi(s,t){_o(s,t),_o(s+"Capture",t)}function _o(s,t){for(dc[s]=t,s=0;s<t.length;s++)Zw.add(t[s])}var qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),np=Object.prototype.hasOwnProperty,qP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bb={},vb={};function HP(s){return np.call(vb,s)?!0:np.call(bb,s)?!1:qP.test(s)?vb[s]=!0:(bb[s]=!0,!1)}function GP(s,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function KP(s,t,r,a){if(t===null||typeof t>"u"||GP(s,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function dr(s,t,r,a,i,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=s,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var Fs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Fs[s]=new dr(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var t=s[0];Fs[t]=new dr(t,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Fs[s]=new dr(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Fs[s]=new dr(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Fs[s]=new dr(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Fs[s]=new dr(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Fs[s]=new dr(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Fs[s]=new dr(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Fs[s]=new dr(s,5,!1,s.toLowerCase(),null,!1,!1)});var Z0=/[\-:]([a-z])/g;function ef(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var t=s.replace(Z0,ef);Fs[t]=new dr(t,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var t=s.replace(Z0,ef);Fs[t]=new dr(t,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var t=s.replace(Z0,ef);Fs[t]=new dr(t,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Fs[s]=new dr(s,1,!1,s.toLowerCase(),null,!1,!1)});Fs.xlinkHref=new dr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Fs[s]=new dr(s,1,!1,s.toLowerCase(),null,!0,!0)});function tf(s,t,r,a){var i=Fs.hasOwnProperty(t)?Fs[t]:null;(i!==null?i.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(KP(t,r,i,a)&&(r=null),a||i===null?HP(t)&&(r===null?s.removeAttribute(t):s.setAttribute(t,""+r)):i.mustUseProperty?s[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,a=i.attributeNamespace,r===null?s.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,a?s.setAttributeNS(a,t,r):s.setAttribute(t,r))))}var sn=WP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Od=Symbol.for("react.element"),to=Symbol.for("react.portal"),so=Symbol.for("react.fragment"),sf=Symbol.for("react.strict_mode"),ip=Symbol.for("react.profiler"),e5=Symbol.for("react.provider"),t5=Symbol.for("react.context"),rf=Symbol.for("react.forward_ref"),op=Symbol.for("react.suspense"),lp=Symbol.for("react.suspense_list"),af=Symbol.for("react.memo"),pn=Symbol.for("react.lazy"),s5=Symbol.for("react.offscreen"),jb=Symbol.iterator;function vl(s){return s===null||typeof s!="object"?null:(s=jb&&s[jb]||s["@@iterator"],typeof s=="function"?s:null)}var cs=Object.assign,th;function _l(s){if(th===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);th=t&&t[1]||""}return`
`+th+s}var sh=!1;function rh(s,t){if(!s||sh)return"";sh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(x){var a=x}Reflect.construct(s,[],t)}else{try{t.call()}catch(x){a=x}s.call(t.prototype)}else{try{throw Error()}catch(x){a=x}s()}}catch(x){if(x&&a&&typeof x.stack=="string"){for(var i=x.stack.split(`
`),l=a.stack.split(`
`),o=i.length-1,c=l.length-1;1<=o&&0<=c&&i[o]!==l[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==l[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==l[c]){var d=`
`+i[o].replace(" at new "," at ");return s.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",s.displayName)),d}while(1<=o&&0<=c);break}}}finally{sh=!1,Error.prepareStackTrace=r}return(s=s?s.displayName||s.name:"")?_l(s):""}function QP(s){switch(s.tag){case 5:return _l(s.type);case 16:return _l("Lazy");case 13:return _l("Suspense");case 19:return _l("SuspenseList");case 0:case 2:case 15:return s=rh(s.type,!1),s;case 11:return s=rh(s.type.render,!1),s;case 1:return s=rh(s.type,!0),s;default:return""}}function cp(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case so:return"Fragment";case to:return"Portal";case ip:return"Profiler";case sf:return"StrictMode";case op:return"Suspense";case lp:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case t5:return(s.displayName||"Context")+".Consumer";case e5:return(s._context.displayName||"Context")+".Provider";case rf:var t=s.render;return s=s.displayName,s||(s=t.displayName||t.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case af:return t=s.displayName||null,t!==null?t:cp(s.type)||"Memo";case pn:t=s._payload,s=s._init;try{return cp(s(t))}catch{}}return null}function YP(s){var t=s.type;switch(s.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=t.render,s=s.displayName||s.name||"",t.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cp(t);case 8:return t===sf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zn(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function r5(s){var t=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function XP(s){var t=r5(s)?"checked":"value",r=Object.getOwnPropertyDescriptor(s.constructor.prototype,t),a=""+s[t];if(!s.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,l=r.set;return Object.defineProperty(s,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){a=""+o,l.call(this,o)}}),Object.defineProperty(s,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){s._valueTracker=null,delete s[t]}}}}function Vd(s){s._valueTracker||(s._valueTracker=XP(s))}function a5(s){if(!s)return!1;var t=s._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return s&&(a=r5(s)?s.checked?"true":"false":s.value),s=a,s!==r?(t.setValue(s),!0):!1}function Fu(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function dp(s,t){var r=t.checked;return cs({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??s._wrapperState.initialChecked})}function Nb(s,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=zn(t.value!=null?t.value:r),s._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function n5(s,t){t=t.checked,t!=null&&tf(s,"checked",t,!1)}function up(s,t){n5(s,t);var r=zn(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+r):s.value!==""+r&&(s.value=""+r);else if(a==="submit"||a==="reset"){s.removeAttribute("value");return}t.hasOwnProperty("value")?xp(s,t.type,r):t.hasOwnProperty("defaultValue")&&xp(s,t.type,zn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(s.defaultChecked=!!t.defaultChecked)}function wb(s,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+s._wrapperState.initialValue,r||t===s.value||(s.value=t),s.defaultValue=t}r=s.name,r!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,r!==""&&(s.name=r)}function xp(s,t,r){(t!=="number"||Fu(s.ownerDocument)!==s)&&(r==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+r&&(s.defaultValue=""+r))}var Dl=Array.isArray;function jo(s,t,r,a){if(s=s.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<s.length;r++)i=t.hasOwnProperty("$"+s[r].value),s[r].selected!==i&&(s[r].selected=i),i&&a&&(s[r].defaultSelected=!0)}else{for(r=""+zn(r),t=null,i=0;i<s.length;i++){if(s[i].value===r){s[i].selected=!0,a&&(s[i].defaultSelected=!0);return}t!==null||s[i].disabled||(t=s[i])}t!==null&&(t.selected=!0)}}function mp(s,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Me(91));return cs({},t,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function kb(s,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Me(92));if(Dl(r)){if(1<r.length)throw Error(Me(93));r=r[0]}t=r}t==null&&(t=""),r=t}s._wrapperState={initialValue:zn(r)}}function i5(s,t){var r=zn(t.value),a=zn(t.defaultValue);r!=null&&(r=""+r,r!==s.value&&(s.value=r),t.defaultValue==null&&s.defaultValue!==r&&(s.defaultValue=r)),a!=null&&(s.defaultValue=""+a)}function Ib(s){var t=s.textContent;t===s._wrapperState.initialValue&&t!==""&&t!==null&&(s.value=t)}function o5(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hp(s,t){return s==null||s==="http://www.w3.org/1999/xhtml"?o5(t):s==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var zd,l5=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,i){MSApp.execUnsafeLocalFunction(function(){return s(t,r,a,i)})}:s}(function(s,t){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=t;else{for(zd=zd||document.createElement("div"),zd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zd.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;t.firstChild;)s.appendChild(t.firstChild)}});function uc(s,t){if(t){var r=s.firstChild;if(r&&r===s.lastChild&&r.nodeType===3){r.nodeValue=t;return}}s.textContent=t}var Ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JP=["Webkit","ms","Moz","O"];Object.keys(Ul).forEach(function(s){JP.forEach(function(t){t=t+s.charAt(0).toUpperCase()+s.substring(1),Ul[t]=Ul[s]})});function c5(s,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ul.hasOwnProperty(s)&&Ul[s]?(""+t).trim():t+"px"}function d5(s,t){s=s.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,i=c5(r,t[r],a);r==="float"&&(r="cssFloat"),a?s.setProperty(r,i):s[r]=i}}var ZP=cs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pp(s,t){if(t){if(ZP[s]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Me(137,s));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Me(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Me(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Me(62))}}function fp(s,t){if(s.indexOf("-")===-1)return typeof t.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gp=null;function nf(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yp=null,No=null,wo=null;function Pb(s){if(s=Yc(s)){if(typeof yp!="function")throw Error(Me(280));var t=s.stateNode;t&&(t=Zx(t),yp(s.stateNode,s.type,t))}}function u5(s){No?wo?wo.push(s):wo=[s]:No=s}function x5(){if(No){var s=No,t=wo;if(wo=No=null,Pb(s),t)for(s=0;s<t.length;s++)Pb(t[s])}}function m5(s,t){return s(t)}function h5(){}var ah=!1;function p5(s,t,r){if(ah)return s(t,r);ah=!0;try{return m5(s,t,r)}finally{ah=!1,(No!==null||wo!==null)&&(h5(),x5())}}function xc(s,t){var r=s.stateNode;if(r===null)return null;var a=Zx(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(s=s.type,a=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!a;break e;default:s=!1}if(s)return null;if(r&&typeof r!="function")throw Error(Me(231,t,typeof r));return r}var bp=!1;if(qa)try{var jl={};Object.defineProperty(jl,"passive",{get:function(){bp=!0}}),window.addEventListener("test",jl,jl),window.removeEventListener("test",jl,jl)}catch{bp=!1}function eS(s,t,r,a,i,l,o,c,d){var x=Array.prototype.slice.call(arguments,3);try{t.apply(r,x)}catch(f){this.onError(f)}}var $l=!1,Uu=null,$u=!1,vp=null,tS={onError:function(s){$l=!0,Uu=s}};function sS(s,t,r,a,i,l,o,c,d){$l=!1,Uu=null,eS.apply(tS,arguments)}function rS(s,t,r,a,i,l,o,c,d){if(sS.apply(this,arguments),$l){if($l){var x=Uu;$l=!1,Uu=null}else throw Error(Me(198));$u||($u=!0,vp=x)}}function Li(s){var t=s,r=s;if(s.alternate)for(;t.return;)t=t.return;else{s=t;do t=s,t.flags&4098&&(r=t.return),s=t.return;while(s)}return t.tag===3?r:null}function f5(s){if(s.tag===13){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function Sb(s){if(Li(s)!==s)throw Error(Me(188))}function aS(s){var t=s.alternate;if(!t){if(t=Li(s),t===null)throw Error(Me(188));return t!==s?null:s}for(var r=s,a=t;;){var i=r.return;if(i===null)break;var l=i.alternate;if(l===null){if(a=i.return,a!==null){r=a;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===r)return Sb(i),s;if(l===a)return Sb(i),t;l=l.sibling}throw Error(Me(188))}if(r.return!==a.return)r=i,a=l;else{for(var o=!1,c=i.child;c;){if(c===r){o=!0,r=i,a=l;break}if(c===a){o=!0,a=i,r=l;break}c=c.sibling}if(!o){for(c=l.child;c;){if(c===r){o=!0,r=l,a=i;break}if(c===a){o=!0,a=l,r=i;break}c=c.sibling}if(!o)throw Error(Me(189))}}if(r.alternate!==a)throw Error(Me(190))}if(r.tag!==3)throw Error(Me(188));return r.stateNode.current===r?s:t}function g5(s){return s=aS(s),s!==null?y5(s):null}function y5(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var t=y5(s);if(t!==null)return t;s=s.sibling}return null}var b5=Tr.unstable_scheduleCallback,Eb=Tr.unstable_cancelCallback,nS=Tr.unstable_shouldYield,iS=Tr.unstable_requestPaint,gs=Tr.unstable_now,oS=Tr.unstable_getCurrentPriorityLevel,of=Tr.unstable_ImmediatePriority,v5=Tr.unstable_UserBlockingPriority,Wu=Tr.unstable_NormalPriority,lS=Tr.unstable_LowPriority,j5=Tr.unstable_IdlePriority,Qx=null,fa=null;function cS(s){if(fa&&typeof fa.onCommitFiberRoot=="function")try{fa.onCommitFiberRoot(Qx,s,void 0,(s.current.flags&128)===128)}catch{}}var sa=Math.clz32?Math.clz32:xS,dS=Math.log,uS=Math.LN2;function xS(s){return s>>>=0,s===0?32:31-(dS(s)/uS|0)|0}var Bd=64,Fd=4194304;function Al(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function qu(s,t){var r=s.pendingLanes;if(r===0)return 0;var a=0,i=s.suspendedLanes,l=s.pingedLanes,o=r&268435455;if(o!==0){var c=o&~i;c!==0?a=Al(c):(l&=o,l!==0&&(a=Al(l)))}else o=r&~i,o!==0?a=Al(o):l!==0&&(a=Al(l));if(a===0)return 0;if(t!==0&&t!==a&&!(t&i)&&(i=a&-a,l=t&-t,i>=l||i===16&&(l&4194240)!==0))return t;if(a&4&&(a|=r&16),t=s.entangledLanes,t!==0)for(s=s.entanglements,t&=a;0<t;)r=31-sa(t),i=1<<r,a|=s[r],t&=~i;return a}function mS(s,t){switch(s){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hS(s,t){for(var r=s.suspendedLanes,a=s.pingedLanes,i=s.expirationTimes,l=s.pendingLanes;0<l;){var o=31-sa(l),c=1<<o,d=i[o];d===-1?(!(c&r)||c&a)&&(i[o]=mS(c,t)):d<=t&&(s.expiredLanes|=c),l&=~c}}function jp(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function N5(){var s=Bd;return Bd<<=1,!(Bd&4194240)&&(Bd=64),s}function nh(s){for(var t=[],r=0;31>r;r++)t.push(s);return t}function Kc(s,t,r){s.pendingLanes|=t,t!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,t=31-sa(t),s[t]=r}function pS(s,t){var r=s.pendingLanes&~t;s.pendingLanes=t,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=t,s.mutableReadLanes&=t,s.entangledLanes&=t,t=s.entanglements;var a=s.eventTimes;for(s=s.expirationTimes;0<r;){var i=31-sa(r),l=1<<i;t[i]=0,a[i]=-1,s[i]=-1,r&=~l}}function lf(s,t){var r=s.entangledLanes|=t;for(s=s.entanglements;r;){var a=31-sa(r),i=1<<a;i&t|s[a]&t&&(s[a]|=t),r&=~i}}var Ft=0;function w5(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var k5,cf,I5,P5,S5,Np=!1,Ud=[],Sn=null,En=null,Cn=null,mc=new Map,hc=new Map,gn=[],fS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cb(s,t){switch(s){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":mc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(t.pointerId)}}function Nl(s,t,r,a,i,l){return s===null||s.nativeEvent!==l?(s={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:l,targetContainers:[i]},t!==null&&(t=Yc(t),t!==null&&cf(t)),s):(s.eventSystemFlags|=a,t=s.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),s)}function gS(s,t,r,a,i){switch(t){case"focusin":return Sn=Nl(Sn,s,t,r,a,i),!0;case"dragenter":return En=Nl(En,s,t,r,a,i),!0;case"mouseover":return Cn=Nl(Cn,s,t,r,a,i),!0;case"pointerover":var l=i.pointerId;return mc.set(l,Nl(mc.get(l)||null,s,t,r,a,i)),!0;case"gotpointercapture":return l=i.pointerId,hc.set(l,Nl(hc.get(l)||null,s,t,r,a,i)),!0}return!1}function E5(s){var t=ui(s.target);if(t!==null){var r=Li(t);if(r!==null){if(t=r.tag,t===13){if(t=f5(r),t!==null){s.blockedOn=t,S5(s.priority,function(){I5(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){s.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}s.blockedOn=null}function hu(s){if(s.blockedOn!==null)return!1;for(var t=s.targetContainers;0<t.length;){var r=wp(s.domEventName,s.eventSystemFlags,t[0],s.nativeEvent);if(r===null){r=s.nativeEvent;var a=new r.constructor(r.type,r);gp=a,r.target.dispatchEvent(a),gp=null}else return t=Yc(r),t!==null&&cf(t),s.blockedOn=r,!1;t.shift()}return!0}function Tb(s,t,r){hu(s)&&r.delete(t)}function yS(){Np=!1,Sn!==null&&hu(Sn)&&(Sn=null),En!==null&&hu(En)&&(En=null),Cn!==null&&hu(Cn)&&(Cn=null),mc.forEach(Tb),hc.forEach(Tb)}function wl(s,t){s.blockedOn===t&&(s.blockedOn=null,Np||(Np=!0,Tr.unstable_scheduleCallback(Tr.unstable_NormalPriority,yS)))}function pc(s){function t(i){return wl(i,s)}if(0<Ud.length){wl(Ud[0],s);for(var r=1;r<Ud.length;r++){var a=Ud[r];a.blockedOn===s&&(a.blockedOn=null)}}for(Sn!==null&&wl(Sn,s),En!==null&&wl(En,s),Cn!==null&&wl(Cn,s),mc.forEach(t),hc.forEach(t),r=0;r<gn.length;r++)a=gn[r],a.blockedOn===s&&(a.blockedOn=null);for(;0<gn.length&&(r=gn[0],r.blockedOn===null);)E5(r),r.blockedOn===null&&gn.shift()}var ko=sn.ReactCurrentBatchConfig,Hu=!0;function bS(s,t,r,a){var i=Ft,l=ko.transition;ko.transition=null;try{Ft=1,df(s,t,r,a)}finally{Ft=i,ko.transition=l}}function vS(s,t,r,a){var i=Ft,l=ko.transition;ko.transition=null;try{Ft=4,df(s,t,r,a)}finally{Ft=i,ko.transition=l}}function df(s,t,r,a){if(Hu){var i=wp(s,t,r,a);if(i===null)ph(s,t,a,Gu,r),Cb(s,a);else if(gS(i,s,t,r,a))a.stopPropagation();else if(Cb(s,a),t&4&&-1<fS.indexOf(s)){for(;i!==null;){var l=Yc(i);if(l!==null&&k5(l),l=wp(s,t,r,a),l===null&&ph(s,t,a,Gu,r),l===i)break;i=l}i!==null&&a.stopPropagation()}else ph(s,t,a,null,r)}}var Gu=null;function wp(s,t,r,a){if(Gu=null,s=nf(a),s=ui(s),s!==null)if(t=Li(s),t===null)s=null;else if(r=t.tag,r===13){if(s=f5(t),s!==null)return s;s=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;s=null}else t!==s&&(s=null);return Gu=s,null}function C5(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oS()){case of:return 1;case v5:return 4;case Wu:case lS:return 16;case j5:return 536870912;default:return 16}default:return 16}}var wn=null,uf=null,pu=null;function T5(){if(pu)return pu;var s,t=uf,r=t.length,a,i="value"in wn?wn.value:wn.textContent,l=i.length;for(s=0;s<r&&t[s]===i[s];s++);var o=r-s;for(a=1;a<=o&&t[r-a]===i[l-a];a++);return pu=i.slice(s,1<a?1-a:void 0)}function fu(s){var t=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&t===13&&(s=13)):s=t,s===10&&(s=13),32<=s||s===13?s:0}function $d(){return!0}function _b(){return!1}function Dr(s){function t(r,a,i,l,o){this._reactName=r,this._targetInst=i,this.type=a,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var c in s)s.hasOwnProperty(c)&&(r=s[c],this[c]=r?r(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?$d:_b,this.isPropagationStopped=_b,this}return cs(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=$d)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=$d)},persist:function(){},isPersistent:$d}),t}var Qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xf=Dr(Qo),Qc=cs({},Qo,{view:0,detail:0}),jS=Dr(Qc),ih,oh,kl,Yx=cs({},Qc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mf,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==kl&&(kl&&s.type==="mousemove"?(ih=s.screenX-kl.screenX,oh=s.screenY-kl.screenY):oh=ih=0,kl=s),ih)},movementY:function(s){return"movementY"in s?s.movementY:oh}}),Db=Dr(Yx),NS=cs({},Yx,{dataTransfer:0}),wS=Dr(NS),kS=cs({},Qc,{relatedTarget:0}),lh=Dr(kS),IS=cs({},Qo,{animationName:0,elapsedTime:0,pseudoElement:0}),PS=Dr(IS),SS=cs({},Qo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ES=Dr(SS),CS=cs({},Qo,{data:0}),Ab=Dr(CS),TS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_S={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AS(s){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(s):(s=DS[s])?!!t[s]:!1}function mf(){return AS}var RS=cs({},Qc,{key:function(s){if(s.key){var t=TS[s.key]||s.key;if(t!=="Unidentified")return t}return s.type==="keypress"?(s=fu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?_S[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mf,charCode:function(s){return s.type==="keypress"?fu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?fu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),MS=Dr(RS),LS=cs({},Yx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rb=Dr(LS),OS=cs({},Qc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mf}),VS=Dr(OS),zS=cs({},Qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),BS=Dr(zS),FS=cs({},Yx,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),US=Dr(FS),$S=[9,13,27,32],hf=qa&&"CompositionEvent"in window,Wl=null;qa&&"documentMode"in document&&(Wl=document.documentMode);var WS=qa&&"TextEvent"in window&&!Wl,_5=qa&&(!hf||Wl&&8<Wl&&11>=Wl),Mb=String.fromCharCode(32),Lb=!1;function D5(s,t){switch(s){case"keyup":return $S.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A5(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ro=!1;function qS(s,t){switch(s){case"compositionend":return A5(t);case"keypress":return t.which!==32?null:(Lb=!0,Mb);case"textInput":return s=t.data,s===Mb&&Lb?null:s;default:return null}}function HS(s,t){if(ro)return s==="compositionend"||!hf&&D5(s,t)?(s=T5(),pu=uf=wn=null,ro=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _5&&t.locale!=="ko"?null:t.data;default:return null}}var GS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ob(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t==="input"?!!GS[s.type]:t==="textarea"}function R5(s,t,r,a){u5(a),t=Ku(t,"onChange"),0<t.length&&(r=new xf("onChange","change",null,r,a),s.push({event:r,listeners:t}))}var ql=null,fc=null;function KS(s){q5(s,0)}function Xx(s){var t=io(s);if(a5(t))return s}function QS(s,t){if(s==="change")return t}var M5=!1;if(qa){var ch;if(qa){var dh="oninput"in document;if(!dh){var Vb=document.createElement("div");Vb.setAttribute("oninput","return;"),dh=typeof Vb.oninput=="function"}ch=dh}else ch=!1;M5=ch&&(!document.documentMode||9<document.documentMode)}function zb(){ql&&(ql.detachEvent("onpropertychange",L5),fc=ql=null)}function L5(s){if(s.propertyName==="value"&&Xx(fc)){var t=[];R5(t,fc,s,nf(s)),p5(KS,t)}}function YS(s,t,r){s==="focusin"?(zb(),ql=t,fc=r,ql.attachEvent("onpropertychange",L5)):s==="focusout"&&zb()}function XS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Xx(fc)}function JS(s,t){if(s==="click")return Xx(t)}function ZS(s,t){if(s==="input"||s==="change")return Xx(t)}function eE(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var aa=typeof Object.is=="function"?Object.is:eE;function gc(s,t){if(aa(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;var r=Object.keys(s),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var i=r[a];if(!np.call(t,i)||!aa(s[i],t[i]))return!1}return!0}function Bb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Fb(s,t){var r=Bb(s);s=0;for(var a;r;){if(r.nodeType===3){if(a=s+r.textContent.length,s<=t&&a>=t)return{node:r,offset:t-s};s=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Bb(r)}}function O5(s,t){return s&&t?s===t?!0:s&&s.nodeType===3?!1:t&&t.nodeType===3?O5(s,t.parentNode):"contains"in s?s.contains(t):s.compareDocumentPosition?!!(s.compareDocumentPosition(t)&16):!1:!1}function V5(){for(var s=window,t=Fu();t instanceof s.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)s=t.contentWindow;else break;t=Fu(s.document)}return t}function pf(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t&&(t==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||t==="textarea"||s.contentEditable==="true")}function tE(s){var t=V5(),r=s.focusedElem,a=s.selectionRange;if(t!==r&&r&&r.ownerDocument&&O5(r.ownerDocument.documentElement,r)){if(a!==null&&pf(r)){if(t=a.start,s=a.end,s===void 0&&(s=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(s,r.value.length);else if(s=(t=r.ownerDocument||document)&&t.defaultView||window,s.getSelection){s=s.getSelection();var i=r.textContent.length,l=Math.min(a.start,i);a=a.end===void 0?l:Math.min(a.end,i),!s.extend&&l>a&&(i=a,a=l,l=i),i=Fb(r,l);var o=Fb(r,a);i&&o&&(s.rangeCount!==1||s.anchorNode!==i.node||s.anchorOffset!==i.offset||s.focusNode!==o.node||s.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),s.removeAllRanges(),l>a?(s.addRange(t),s.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),s.addRange(t)))}}for(t=[],s=r;s=s.parentNode;)s.nodeType===1&&t.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)s=t[r],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var sE=qa&&"documentMode"in document&&11>=document.documentMode,ao=null,kp=null,Hl=null,Ip=!1;function Ub(s,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ip||ao==null||ao!==Fu(a)||(a=ao,"selectionStart"in a&&pf(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Hl&&gc(Hl,a)||(Hl=a,a=Ku(kp,"onSelect"),0<a.length&&(t=new xf("onSelect","select",null,t,r),s.push({event:t,listeners:a}),t.target=ao)))}function Wd(s,t){var r={};return r[s.toLowerCase()]=t.toLowerCase(),r["Webkit"+s]="webkit"+t,r["Moz"+s]="moz"+t,r}var no={animationend:Wd("Animation","AnimationEnd"),animationiteration:Wd("Animation","AnimationIteration"),animationstart:Wd("Animation","AnimationStart"),transitionend:Wd("Transition","TransitionEnd")},uh={},z5={};qa&&(z5=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function Jx(s){if(uh[s])return uh[s];if(!no[s])return s;var t=no[s],r;for(r in t)if(t.hasOwnProperty(r)&&r in z5)return uh[s]=t[r];return s}var B5=Jx("animationend"),F5=Jx("animationiteration"),U5=Jx("animationstart"),$5=Jx("transitionend"),W5=new Map,$b="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yn(s,t){W5.set(s,t),Mi(t,[s])}for(var xh=0;xh<$b.length;xh++){var mh=$b[xh],rE=mh.toLowerCase(),aE=mh[0].toUpperCase()+mh.slice(1);Yn(rE,"on"+aE)}Yn(B5,"onAnimationEnd");Yn(F5,"onAnimationIteration");Yn(U5,"onAnimationStart");Yn("dblclick","onDoubleClick");Yn("focusin","onFocus");Yn("focusout","onBlur");Yn($5,"onTransitionEnd");_o("onMouseEnter",["mouseout","mouseover"]);_o("onMouseLeave",["mouseout","mouseover"]);_o("onPointerEnter",["pointerout","pointerover"]);_o("onPointerLeave",["pointerout","pointerover"]);Mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rl));function Wb(s,t,r){var a=s.type||"unknown-event";s.currentTarget=r,rS(a,t,void 0,s),s.currentTarget=null}function q5(s,t){t=(t&4)!==0;for(var r=0;r<s.length;r++){var a=s[r],i=a.event;a=a.listeners;e:{var l=void 0;if(t)for(var o=a.length-1;0<=o;o--){var c=a[o],d=c.instance,x=c.currentTarget;if(c=c.listener,d!==l&&i.isPropagationStopped())break e;Wb(i,c,x),l=d}else for(o=0;o<a.length;o++){if(c=a[o],d=c.instance,x=c.currentTarget,c=c.listener,d!==l&&i.isPropagationStopped())break e;Wb(i,c,x),l=d}}}if($u)throw s=vp,$u=!1,vp=null,s}function Jt(s,t){var r=t[Tp];r===void 0&&(r=t[Tp]=new Set);var a=s+"__bubble";r.has(a)||(H5(t,s,2,!1),r.add(a))}function hh(s,t,r){var a=0;t&&(a|=4),H5(r,s,a,t)}var qd="_reactListening"+Math.random().toString(36).slice(2);function yc(s){if(!s[qd]){s[qd]=!0,Zw.forEach(function(r){r!=="selectionchange"&&(nE.has(r)||hh(r,!1,s),hh(r,!0,s))});var t=s.nodeType===9?s:s.ownerDocument;t===null||t[qd]||(t[qd]=!0,hh("selectionchange",!1,t))}}function H5(s,t,r,a){switch(C5(t)){case 1:var i=bS;break;case 4:i=vS;break;default:i=df}r=i.bind(null,t,r,s),i=void 0,!bp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?s.addEventListener(t,r,{capture:!0,passive:i}):s.addEventListener(t,r,!0):i!==void 0?s.addEventListener(t,r,{passive:i}):s.addEventListener(t,r,!1)}function ph(s,t,r,a,i){var l=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var c=a.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=a.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;o=o.return}for(;c!==null;){if(o=ui(c),o===null)return;if(d=o.tag,d===5||d===6){a=l=o;continue e}c=c.parentNode}}a=a.return}p5(function(){var x=l,f=nf(r),j=[];e:{var w=W5.get(s);if(w!==void 0){var S=xf,g=s;switch(s){case"keypress":if(fu(r)===0)break e;case"keydown":case"keyup":S=MS;break;case"focusin":g="focus",S=lh;break;case"focusout":g="blur",S=lh;break;case"beforeblur":case"afterblur":S=lh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Db;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=wS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=VS;break;case B5:case F5:case U5:S=PS;break;case $5:S=BS;break;case"scroll":S=jS;break;case"wheel":S=US;break;case"copy":case"cut":case"paste":S=ES;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Rb}var V=(t&4)!==0,E=!V&&s==="scroll",T=V?w!==null?w+"Capture":null:w;V=[];for(var M=x,L;M!==null;){L=M;var H=L.stateNode;if(L.tag===5&&H!==null&&(L=H,T!==null&&(H=xc(M,T),H!=null&&V.push(bc(M,H,L)))),E)break;M=M.return}0<V.length&&(w=new S(w,g,null,r,f),j.push({event:w,listeners:V}))}}if(!(t&7)){e:{if(w=s==="mouseover"||s==="pointerover",S=s==="mouseout"||s==="pointerout",w&&r!==gp&&(g=r.relatedTarget||r.fromElement)&&(ui(g)||g[Ha]))break e;if((S||w)&&(w=f.window===f?f:(w=f.ownerDocument)?w.defaultView||w.parentWindow:window,S?(g=r.relatedTarget||r.toElement,S=x,g=g?ui(g):null,g!==null&&(E=Li(g),g!==E||g.tag!==5&&g.tag!==6)&&(g=null)):(S=null,g=x),S!==g)){if(V=Db,H="onMouseLeave",T="onMouseEnter",M="mouse",(s==="pointerout"||s==="pointerover")&&(V=Rb,H="onPointerLeave",T="onPointerEnter",M="pointer"),E=S==null?w:io(S),L=g==null?w:io(g),w=new V(H,M+"leave",S,r,f),w.target=E,w.relatedTarget=L,H=null,ui(f)===x&&(V=new V(T,M+"enter",g,r,f),V.target=L,V.relatedTarget=E,H=V),E=H,S&&g)t:{for(V=S,T=g,M=0,L=V;L;L=Yi(L))M++;for(L=0,H=T;H;H=Yi(H))L++;for(;0<M-L;)V=Yi(V),M--;for(;0<L-M;)T=Yi(T),L--;for(;M--;){if(V===T||T!==null&&V===T.alternate)break t;V=Yi(V),T=Yi(T)}V=null}else V=null;S!==null&&qb(j,w,S,V,!1),g!==null&&E!==null&&qb(j,E,g,V,!0)}}e:{if(w=x?io(x):window,S=w.nodeName&&w.nodeName.toLowerCase(),S==="select"||S==="input"&&w.type==="file")var q=QS;else if(Ob(w))if(M5)q=ZS;else{q=XS;var Q=YS}else(S=w.nodeName)&&S.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(q=JS);if(q&&(q=q(s,x))){R5(j,q,r,f);break e}Q&&Q(s,w,x),s==="focusout"&&(Q=w._wrapperState)&&Q.controlled&&w.type==="number"&&xp(w,"number",w.value)}switch(Q=x?io(x):window,s){case"focusin":(Ob(Q)||Q.contentEditable==="true")&&(ao=Q,kp=x,Hl=null);break;case"focusout":Hl=kp=ao=null;break;case"mousedown":Ip=!0;break;case"contextmenu":case"mouseup":case"dragend":Ip=!1,Ub(j,r,f);break;case"selectionchange":if(sE)break;case"keydown":case"keyup":Ub(j,r,f)}var O;if(hf)e:{switch(s){case"compositionstart":var u="onCompositionStart";break e;case"compositionend":u="onCompositionEnd";break e;case"compositionupdate":u="onCompositionUpdate";break e}u=void 0}else ro?D5(s,r)&&(u="onCompositionEnd"):s==="keydown"&&r.keyCode===229&&(u="onCompositionStart");u&&(_5&&r.locale!=="ko"&&(ro||u!=="onCompositionStart"?u==="onCompositionEnd"&&ro&&(O=T5()):(wn=f,uf="value"in wn?wn.value:wn.textContent,ro=!0)),Q=Ku(x,u),0<Q.length&&(u=new Ab(u,s,null,r,f),j.push({event:u,listeners:Q}),O?u.data=O:(O=A5(r),O!==null&&(u.data=O)))),(O=WS?qS(s,r):HS(s,r))&&(x=Ku(x,"onBeforeInput"),0<x.length&&(f=new Ab("onBeforeInput","beforeinput",null,r,f),j.push({event:f,listeners:x}),f.data=O))}q5(j,t)})}function bc(s,t,r){return{instance:s,listener:t,currentTarget:r}}function Ku(s,t){for(var r=t+"Capture",a=[];s!==null;){var i=s,l=i.stateNode;i.tag===5&&l!==null&&(i=l,l=xc(s,r),l!=null&&a.unshift(bc(s,l,i)),l=xc(s,t),l!=null&&a.push(bc(s,l,i))),s=s.return}return a}function Yi(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function qb(s,t,r,a,i){for(var l=t._reactName,o=[];r!==null&&r!==a;){var c=r,d=c.alternate,x=c.stateNode;if(d!==null&&d===a)break;c.tag===5&&x!==null&&(c=x,i?(d=xc(r,l),d!=null&&o.unshift(bc(r,d,c))):i||(d=xc(r,l),d!=null&&o.push(bc(r,d,c)))),r=r.return}o.length!==0&&s.push({event:t,listeners:o})}var iE=/\r\n?/g,oE=/\u0000|\uFFFD/g;function Hb(s){return(typeof s=="string"?s:""+s).replace(iE,`
`).replace(oE,"")}function Hd(s,t,r){if(t=Hb(t),Hb(s)!==t&&r)throw Error(Me(425))}function Qu(){}var Pp=null,Sp=null;function Ep(s,t){return s==="textarea"||s==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Cp=typeof setTimeout=="function"?setTimeout:void 0,lE=typeof clearTimeout=="function"?clearTimeout:void 0,Gb=typeof Promise=="function"?Promise:void 0,cE=typeof queueMicrotask=="function"?queueMicrotask:typeof Gb<"u"?function(s){return Gb.resolve(null).then(s).catch(dE)}:Cp;function dE(s){setTimeout(function(){throw s})}function fh(s,t){var r=t,a=0;do{var i=r.nextSibling;if(s.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(a===0){s.removeChild(i),pc(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=i}while(r);pc(t)}function Tn(s){for(;s!=null;s=s.nextSibling){var t=s.nodeType;if(t===1||t===3)break;if(t===8){if(t=s.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return s}function Kb(s){s=s.previousSibling;for(var t=0;s;){if(s.nodeType===8){var r=s.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return s;t--}else r==="/$"&&t++}s=s.previousSibling}return null}var Yo=Math.random().toString(36).slice(2),pa="__reactFiber$"+Yo,vc="__reactProps$"+Yo,Ha="__reactContainer$"+Yo,Tp="__reactEvents$"+Yo,uE="__reactListeners$"+Yo,xE="__reactHandles$"+Yo;function ui(s){var t=s[pa];if(t)return t;for(var r=s.parentNode;r;){if(t=r[Ha]||r[pa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(s=Kb(s);s!==null;){if(r=s[pa])return r;s=Kb(s)}return t}s=r,r=s.parentNode}return null}function Yc(s){return s=s[pa]||s[Ha],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function io(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(Me(33))}function Zx(s){return s[vc]||null}var _p=[],oo=-1;function Xn(s){return{current:s}}function Zt(s){0>oo||(s.current=_p[oo],_p[oo]=null,oo--)}function Kt(s,t){oo++,_p[oo]=s.current,s.current=t}var Bn={},Zs=Xn(Bn),pr=Xn(!1),wi=Bn;function Do(s,t){var r=s.type.contextTypes;if(!r)return Bn;var a=s.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var i={},l;for(l in r)i[l]=t[l];return a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=t,s.__reactInternalMemoizedMaskedChildContext=i),i}function fr(s){return s=s.childContextTypes,s!=null}function Yu(){Zt(pr),Zt(Zs)}function Qb(s,t,r){if(Zs.current!==Bn)throw Error(Me(168));Kt(Zs,t),Kt(pr,r)}function G5(s,t,r){var a=s.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var i in a)if(!(i in t))throw Error(Me(108,YP(s)||"Unknown",i));return cs({},r,a)}function Xu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Bn,wi=Zs.current,Kt(Zs,s),Kt(pr,pr.current),!0}function Yb(s,t,r){var a=s.stateNode;if(!a)throw Error(Me(169));r?(s=G5(s,t,wi),a.__reactInternalMemoizedMergedChildContext=s,Zt(pr),Zt(Zs),Kt(Zs,s)):Zt(pr),Kt(pr,r)}var Oa=null,em=!1,gh=!1;function K5(s){Oa===null?Oa=[s]:Oa.push(s)}function mE(s){em=!0,K5(s)}function Jn(){if(!gh&&Oa!==null){gh=!0;var s=0,t=Ft;try{var r=Oa;for(Ft=1;s<r.length;s++){var a=r[s];do a=a(!0);while(a!==null)}Oa=null,em=!1}catch(i){throw Oa!==null&&(Oa=Oa.slice(s+1)),b5(of,Jn),i}finally{Ft=t,gh=!1}}return null}var lo=[],co=0,Ju=null,Zu=0,Lr=[],Or=0,ki=null,Va=1,za="";function oi(s,t){lo[co++]=Zu,lo[co++]=Ju,Ju=s,Zu=t}function Q5(s,t,r){Lr[Or++]=Va,Lr[Or++]=za,Lr[Or++]=ki,ki=s;var a=Va;s=za;var i=32-sa(a)-1;a&=~(1<<i),r+=1;var l=32-sa(t)+i;if(30<l){var o=i-i%5;l=(a&(1<<o)-1).toString(32),a>>=o,i-=o,Va=1<<32-sa(t)+i|r<<i|a,za=l+s}else Va=1<<l|r<<i|a,za=s}function ff(s){s.return!==null&&(oi(s,1),Q5(s,1,0))}function gf(s){for(;s===Ju;)Ju=lo[--co],lo[co]=null,Zu=lo[--co],lo[co]=null;for(;s===ki;)ki=Lr[--Or],Lr[Or]=null,za=Lr[--Or],Lr[Or]=null,Va=Lr[--Or],Lr[Or]=null}var Sr=null,Ir=null,es=!1,Jr=null;function Y5(s,t){var r=zr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=s,t=s.deletions,t===null?(s.deletions=[r],s.flags|=16):t.push(r)}function Xb(s,t){switch(s.tag){case 5:var r=s.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(s.stateNode=t,Sr=s,Ir=Tn(t.firstChild),!0):!1;case 6:return t=s.pendingProps===""||t.nodeType!==3?null:t,t!==null?(s.stateNode=t,Sr=s,Ir=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ki!==null?{id:Va,overflow:za}:null,s.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=zr(18,null,null,0),r.stateNode=t,r.return=s,s.child=r,Sr=s,Ir=null,!0):!1;default:return!1}}function Dp(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Ap(s){if(es){var t=Ir;if(t){var r=t;if(!Xb(s,t)){if(Dp(s))throw Error(Me(418));t=Tn(r.nextSibling);var a=Sr;t&&Xb(s,t)?Y5(a,r):(s.flags=s.flags&-4097|2,es=!1,Sr=s)}}else{if(Dp(s))throw Error(Me(418));s.flags=s.flags&-4097|2,es=!1,Sr=s}}}function Jb(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Sr=s}function Gd(s){if(s!==Sr)return!1;if(!es)return Jb(s),es=!0,!1;var t;if((t=s.tag!==3)&&!(t=s.tag!==5)&&(t=s.type,t=t!=="head"&&t!=="body"&&!Ep(s.type,s.memoizedProps)),t&&(t=Ir)){if(Dp(s))throw X5(),Error(Me(418));for(;t;)Y5(s,t),t=Tn(t.nextSibling)}if(Jb(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Me(317));e:{for(s=s.nextSibling,t=0;s;){if(s.nodeType===8){var r=s.data;if(r==="/$"){if(t===0){Ir=Tn(s.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}s=s.nextSibling}Ir=null}}else Ir=Sr?Tn(s.stateNode.nextSibling):null;return!0}function X5(){for(var s=Ir;s;)s=Tn(s.nextSibling)}function Ao(){Ir=Sr=null,es=!1}function yf(s){Jr===null?Jr=[s]:Jr.push(s)}var hE=sn.ReactCurrentBatchConfig;function Il(s,t,r){if(s=r.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Me(309));var a=r.stateNode}if(!a)throw Error(Me(147,s));var i=a,l=""+s;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var c=i.refs;o===null?delete c[l]:c[l]=o},t._stringRef=l,t)}if(typeof s!="string")throw Error(Me(284));if(!r._owner)throw Error(Me(290,s))}return s}function Kd(s,t){throw s=Object.prototype.toString.call(t),Error(Me(31,s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s))}function Zb(s){var t=s._init;return t(s._payload)}function J5(s){function t(T,M){if(s){var L=T.deletions;L===null?(T.deletions=[M],T.flags|=16):L.push(M)}}function r(T,M){if(!s)return null;for(;M!==null;)t(T,M),M=M.sibling;return null}function a(T,M){for(T=new Map;M!==null;)M.key!==null?T.set(M.key,M):T.set(M.index,M),M=M.sibling;return T}function i(T,M){return T=Rn(T,M),T.index=0,T.sibling=null,T}function l(T,M,L){return T.index=L,s?(L=T.alternate,L!==null?(L=L.index,L<M?(T.flags|=2,M):L):(T.flags|=2,M)):(T.flags|=1048576,M)}function o(T){return s&&T.alternate===null&&(T.flags|=2),T}function c(T,M,L,H){return M===null||M.tag!==6?(M=kh(L,T.mode,H),M.return=T,M):(M=i(M,L),M.return=T,M)}function d(T,M,L,H){var q=L.type;return q===so?f(T,M,L.props.children,H,L.key):M!==null&&(M.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===pn&&Zb(q)===M.type)?(H=i(M,L.props),H.ref=Il(T,M,L),H.return=T,H):(H=wu(L.type,L.key,L.props,null,T.mode,H),H.ref=Il(T,M,L),H.return=T,H)}function x(T,M,L,H){return M===null||M.tag!==4||M.stateNode.containerInfo!==L.containerInfo||M.stateNode.implementation!==L.implementation?(M=Ih(L,T.mode,H),M.return=T,M):(M=i(M,L.children||[]),M.return=T,M)}function f(T,M,L,H,q){return M===null||M.tag!==7?(M=bi(L,T.mode,H,q),M.return=T,M):(M=i(M,L),M.return=T,M)}function j(T,M,L){if(typeof M=="string"&&M!==""||typeof M=="number")return M=kh(""+M,T.mode,L),M.return=T,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Od:return L=wu(M.type,M.key,M.props,null,T.mode,L),L.ref=Il(T,null,M),L.return=T,L;case to:return M=Ih(M,T.mode,L),M.return=T,M;case pn:var H=M._init;return j(T,H(M._payload),L)}if(Dl(M)||vl(M))return M=bi(M,T.mode,L,null),M.return=T,M;Kd(T,M)}return null}function w(T,M,L,H){var q=M!==null?M.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return q!==null?null:c(T,M,""+L,H);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Od:return L.key===q?d(T,M,L,H):null;case to:return L.key===q?x(T,M,L,H):null;case pn:return q=L._init,w(T,M,q(L._payload),H)}if(Dl(L)||vl(L))return q!==null?null:f(T,M,L,H,null);Kd(T,L)}return null}function S(T,M,L,H,q){if(typeof H=="string"&&H!==""||typeof H=="number")return T=T.get(L)||null,c(M,T,""+H,q);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Od:return T=T.get(H.key===null?L:H.key)||null,d(M,T,H,q);case to:return T=T.get(H.key===null?L:H.key)||null,x(M,T,H,q);case pn:var Q=H._init;return S(T,M,L,Q(H._payload),q)}if(Dl(H)||vl(H))return T=T.get(L)||null,f(M,T,H,q,null);Kd(M,H)}return null}function g(T,M,L,H){for(var q=null,Q=null,O=M,u=M=0,U=null;O!==null&&u<L.length;u++){O.index>u?(U=O,O=null):U=O.sibling;var F=w(T,O,L[u],H);if(F===null){O===null&&(O=U);break}s&&O&&F.alternate===null&&t(T,O),M=l(F,M,u),Q===null?q=F:Q.sibling=F,Q=F,O=U}if(u===L.length)return r(T,O),es&&oi(T,u),q;if(O===null){for(;u<L.length;u++)O=j(T,L[u],H),O!==null&&(M=l(O,M,u),Q===null?q=O:Q.sibling=O,Q=O);return es&&oi(T,u),q}for(O=a(T,O);u<L.length;u++)U=S(O,T,u,L[u],H),U!==null&&(s&&U.alternate!==null&&O.delete(U.key===null?u:U.key),M=l(U,M,u),Q===null?q=U:Q.sibling=U,Q=U);return s&&O.forEach(function(J){return t(T,J)}),es&&oi(T,u),q}function V(T,M,L,H){var q=vl(L);if(typeof q!="function")throw Error(Me(150));if(L=q.call(L),L==null)throw Error(Me(151));for(var Q=q=null,O=M,u=M=0,U=null,F=L.next();O!==null&&!F.done;u++,F=L.next()){O.index>u?(U=O,O=null):U=O.sibling;var J=w(T,O,F.value,H);if(J===null){O===null&&(O=U);break}s&&O&&J.alternate===null&&t(T,O),M=l(J,M,u),Q===null?q=J:Q.sibling=J,Q=J,O=U}if(F.done)return r(T,O),es&&oi(T,u),q;if(O===null){for(;!F.done;u++,F=L.next())F=j(T,F.value,H),F!==null&&(M=l(F,M,u),Q===null?q=F:Q.sibling=F,Q=F);return es&&oi(T,u),q}for(O=a(T,O);!F.done;u++,F=L.next())F=S(O,T,u,F.value,H),F!==null&&(s&&F.alternate!==null&&O.delete(F.key===null?u:F.key),M=l(F,M,u),Q===null?q=F:Q.sibling=F,Q=F);return s&&O.forEach(function(D){return t(T,D)}),es&&oi(T,u),q}function E(T,M,L,H){if(typeof L=="object"&&L!==null&&L.type===so&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case Od:e:{for(var q=L.key,Q=M;Q!==null;){if(Q.key===q){if(q=L.type,q===so){if(Q.tag===7){r(T,Q.sibling),M=i(Q,L.props.children),M.return=T,T=M;break e}}else if(Q.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===pn&&Zb(q)===Q.type){r(T,Q.sibling),M=i(Q,L.props),M.ref=Il(T,Q,L),M.return=T,T=M;break e}r(T,Q);break}else t(T,Q);Q=Q.sibling}L.type===so?(M=bi(L.props.children,T.mode,H,L.key),M.return=T,T=M):(H=wu(L.type,L.key,L.props,null,T.mode,H),H.ref=Il(T,M,L),H.return=T,T=H)}return o(T);case to:e:{for(Q=L.key;M!==null;){if(M.key===Q)if(M.tag===4&&M.stateNode.containerInfo===L.containerInfo&&M.stateNode.implementation===L.implementation){r(T,M.sibling),M=i(M,L.children||[]),M.return=T,T=M;break e}else{r(T,M);break}else t(T,M);M=M.sibling}M=Ih(L,T.mode,H),M.return=T,T=M}return o(T);case pn:return Q=L._init,E(T,M,Q(L._payload),H)}if(Dl(L))return g(T,M,L,H);if(vl(L))return V(T,M,L,H);Kd(T,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,M!==null&&M.tag===6?(r(T,M.sibling),M=i(M,L),M.return=T,T=M):(r(T,M),M=kh(L,T.mode,H),M.return=T,T=M),o(T)):r(T,M)}return E}var Ro=J5(!0),Z5=J5(!1),ex=Xn(null),tx=null,uo=null,bf=null;function vf(){bf=uo=tx=null}function jf(s){var t=ex.current;Zt(ex),s._currentValue=t}function Rp(s,t,r){for(;s!==null;){var a=s.alternate;if((s.childLanes&t)!==t?(s.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),s===r)break;s=s.return}}function Io(s,t){tx=s,bf=uo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&t&&(mr=!0),s.firstContext=null)}function Ur(s){var t=s._currentValue;if(bf!==s)if(s={context:s,memoizedValue:t,next:null},uo===null){if(tx===null)throw Error(Me(308));uo=s,tx.dependencies={lanes:0,firstContext:s}}else uo=uo.next=s;return t}var xi=null;function Nf(s){xi===null?xi=[s]:xi.push(s)}function e2(s,t,r,a){var i=t.interleaved;return i===null?(r.next=r,Nf(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ga(s,a)}function Ga(s,t){s.lanes|=t;var r=s.alternate;for(r!==null&&(r.lanes|=t),r=s,s=s.return;s!==null;)s.childLanes|=t,r=s.alternate,r!==null&&(r.childLanes|=t),r=s,s=s.return;return r.tag===3?r.stateNode:null}var fn=!1;function wf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t2(s,t){s=s.updateQueue,t.updateQueue===s&&(t.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ua(s,t){return{eventTime:s,lane:t,tag:0,payload:null,callback:null,next:null}}function _n(s,t,r){var a=s.updateQueue;if(a===null)return null;if(a=a.shared,Lt&2){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,Ga(s,r)}return i=a.interleaved,i===null?(t.next=t,Nf(a)):(t.next=i.next,i.next=t),a.interleaved=t,Ga(s,r)}function gu(s,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=s.pendingLanes,r|=a,t.lanes=r,lf(s,r)}}function ev(s,t){var r=s.updateQueue,a=s.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var i=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?i=l=o:l=l.next=o,r=r.next}while(r!==null);l===null?i=l=t:l=l.next=t}else i=l=t;r={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:a.shared,effects:a.effects},s.updateQueue=r;return}s=r.lastBaseUpdate,s===null?r.firstBaseUpdate=t:s.next=t,r.lastBaseUpdate=t}function sx(s,t,r,a){var i=s.updateQueue;fn=!1;var l=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,x=d.next;d.next=null,o===null?l=x:o.next=x,o=d;var f=s.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=x:c.next=x,f.lastBaseUpdate=d))}if(l!==null){var j=i.baseState;o=0,f=x=d=null,c=l;do{var w=c.lane,S=c.eventTime;if((a&w)===w){f!==null&&(f=f.next={eventTime:S,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var g=s,V=c;switch(w=t,S=r,V.tag){case 1:if(g=V.payload,typeof g=="function"){j=g.call(S,j,w);break e}j=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=V.payload,w=typeof g=="function"?g.call(S,j,w):g,w==null)break e;j=cs({},j,w);break e;case 2:fn=!0}}c.callback!==null&&c.lane!==0&&(s.flags|=64,w=i.effects,w===null?i.effects=[c]:w.push(c))}else S={eventTime:S,lane:w,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(x=f=S,d=j):f=f.next=S,o|=w;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;w=c,c=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(1);if(f===null&&(d=j),i.baseState=d,i.firstBaseUpdate=x,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else l===null&&(i.shared.lanes=0);Pi|=o,s.lanes=o,s.memoizedState=j}}function tv(s,t,r){if(s=t.effects,t.effects=null,s!==null)for(t=0;t<s.length;t++){var a=s[t],i=a.callback;if(i!==null){if(a.callback=null,a=r,typeof i!="function")throw Error(Me(191,i));i.call(a)}}}var Xc={},ga=Xn(Xc),jc=Xn(Xc),Nc=Xn(Xc);function mi(s){if(s===Xc)throw Error(Me(174));return s}function kf(s,t){switch(Kt(Nc,t),Kt(jc,s),Kt(ga,Xc),s=t.nodeType,s){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hp(null,"");break;default:s=s===8?t.parentNode:t,t=s.namespaceURI||null,s=s.tagName,t=hp(t,s)}Zt(ga),Kt(ga,t)}function Mo(){Zt(ga),Zt(jc),Zt(Nc)}function s2(s){mi(Nc.current);var t=mi(ga.current),r=hp(t,s.type);t!==r&&(Kt(jc,s),Kt(ga,r))}function If(s){jc.current===s&&(Zt(ga),Zt(jc))}var as=Xn(0);function rx(s){for(var t=s;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yh=[];function Pf(){for(var s=0;s<yh.length;s++)yh[s]._workInProgressVersionPrimary=null;yh.length=0}var yu=sn.ReactCurrentDispatcher,bh=sn.ReactCurrentBatchConfig,Ii=0,is=null,Ns=null,Ss=null,ax=!1,Gl=!1,wc=0,pE=0;function Hs(){throw Error(Me(321))}function Sf(s,t){if(t===null)return!1;for(var r=0;r<t.length&&r<s.length;r++)if(!aa(s[r],t[r]))return!1;return!0}function Ef(s,t,r,a,i,l){if(Ii=l,is=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yu.current=s===null||s.memoizedState===null?bE:vE,s=r(a,i),Gl){l=0;do{if(Gl=!1,wc=0,25<=l)throw Error(Me(301));l+=1,Ss=Ns=null,t.updateQueue=null,yu.current=jE,s=r(a,i)}while(Gl)}if(yu.current=nx,t=Ns!==null&&Ns.next!==null,Ii=0,Ss=Ns=is=null,ax=!1,t)throw Error(Me(300));return s}function Cf(){var s=wc!==0;return wc=0,s}function ma(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ss===null?is.memoizedState=Ss=s:Ss=Ss.next=s,Ss}function $r(){if(Ns===null){var s=is.alternate;s=s!==null?s.memoizedState:null}else s=Ns.next;var t=Ss===null?is.memoizedState:Ss.next;if(t!==null)Ss=t,Ns=s;else{if(s===null)throw Error(Me(310));Ns=s,s={memoizedState:Ns.memoizedState,baseState:Ns.baseState,baseQueue:Ns.baseQueue,queue:Ns.queue,next:null},Ss===null?is.memoizedState=Ss=s:Ss=Ss.next=s}return Ss}function kc(s,t){return typeof t=="function"?t(s):t}function vh(s){var t=$r(),r=t.queue;if(r===null)throw Error(Me(311));r.lastRenderedReducer=s;var a=Ns,i=a.baseQueue,l=r.pending;if(l!==null){if(i!==null){var o=i.next;i.next=l.next,l.next=o}a.baseQueue=i=l,r.pending=null}if(i!==null){l=i.next,a=a.baseState;var c=o=null,d=null,x=l;do{var f=x.lane;if((Ii&f)===f)d!==null&&(d=d.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),a=x.hasEagerState?x.eagerState:s(a,x.action);else{var j={lane:f,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};d===null?(c=d=j,o=a):d=d.next=j,is.lanes|=f,Pi|=f}x=x.next}while(x!==null&&x!==l);d===null?o=a:d.next=c,aa(a,t.memoizedState)||(mr=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=d,r.lastRenderedState=a}if(s=r.interleaved,s!==null){i=s;do l=i.lane,is.lanes|=l,Pi|=l,i=i.next;while(i!==s)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function jh(s){var t=$r(),r=t.queue;if(r===null)throw Error(Me(311));r.lastRenderedReducer=s;var a=r.dispatch,i=r.pending,l=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do l=s(l,o.action),o=o.next;while(o!==i);aa(l,t.memoizedState)||(mr=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,a]}function r2(){}function a2(s,t){var r=is,a=$r(),i=t(),l=!aa(a.memoizedState,i);if(l&&(a.memoizedState=i,mr=!0),a=a.queue,Tf(o2.bind(null,r,a,s),[s]),a.getSnapshot!==t||l||Ss!==null&&Ss.memoizedState.tag&1){if(r.flags|=2048,Ic(9,i2.bind(null,r,a,i,t),void 0,null),Ts===null)throw Error(Me(349));Ii&30||n2(r,t,i)}return i}function n2(s,t,r){s.flags|=16384,s={getSnapshot:t,value:r},t=is.updateQueue,t===null?(t={lastEffect:null,stores:null},is.updateQueue=t,t.stores=[s]):(r=t.stores,r===null?t.stores=[s]:r.push(s))}function i2(s,t,r,a){t.value=r,t.getSnapshot=a,l2(t)&&c2(s)}function o2(s,t,r){return r(function(){l2(t)&&c2(s)})}function l2(s){var t=s.getSnapshot;s=s.value;try{var r=t();return!aa(s,r)}catch{return!0}}function c2(s){var t=Ga(s,1);t!==null&&ra(t,s,1,-1)}function sv(s){var t=ma();return typeof s=="function"&&(s=s()),t.memoizedState=t.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kc,lastRenderedState:s},t.queue=s,s=s.dispatch=yE.bind(null,is,s),[t.memoizedState,s]}function Ic(s,t,r,a){return s={tag:s,create:t,destroy:r,deps:a,next:null},t=is.updateQueue,t===null?(t={lastEffect:null,stores:null},is.updateQueue=t,t.lastEffect=s.next=s):(r=t.lastEffect,r===null?t.lastEffect=s.next=s:(a=r.next,r.next=s,s.next=a,t.lastEffect=s)),s}function d2(){return $r().memoizedState}function bu(s,t,r,a){var i=ma();is.flags|=s,i.memoizedState=Ic(1|t,r,void 0,a===void 0?null:a)}function tm(s,t,r,a){var i=$r();a=a===void 0?null:a;var l=void 0;if(Ns!==null){var o=Ns.memoizedState;if(l=o.destroy,a!==null&&Sf(a,o.deps)){i.memoizedState=Ic(t,r,l,a);return}}is.flags|=s,i.memoizedState=Ic(1|t,r,l,a)}function rv(s,t){return bu(8390656,8,s,t)}function Tf(s,t){return tm(2048,8,s,t)}function u2(s,t){return tm(4,2,s,t)}function x2(s,t){return tm(4,4,s,t)}function m2(s,t){if(typeof t=="function")return s=s(),t(s),function(){t(null)};if(t!=null)return s=s(),t.current=s,function(){t.current=null}}function h2(s,t,r){return r=r!=null?r.concat([s]):null,tm(4,4,m2.bind(null,t,s),r)}function _f(){}function p2(s,t){var r=$r();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Sf(t,a[1])?a[0]:(r.memoizedState=[s,t],s)}function f2(s,t){var r=$r();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Sf(t,a[1])?a[0]:(s=s(),r.memoizedState=[s,t],s)}function g2(s,t,r){return Ii&21?(aa(r,t)||(r=N5(),is.lanes|=r,Pi|=r,s.baseState=!0),t):(s.baseState&&(s.baseState=!1,mr=!0),s.memoizedState=r)}function fE(s,t){var r=Ft;Ft=r!==0&&4>r?r:4,s(!0);var a=bh.transition;bh.transition={};try{s(!1),t()}finally{Ft=r,bh.transition=a}}function y2(){return $r().memoizedState}function gE(s,t,r){var a=An(s);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},b2(s))v2(t,r);else if(r=e2(s,t,r,a),r!==null){var i=or();ra(r,s,a,i),j2(r,t,a)}}function yE(s,t,r){var a=An(s),i={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(b2(s))v2(t,i);else{var l=s.alternate;if(s.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,c=l(o,r);if(i.hasEagerState=!0,i.eagerState=c,aa(c,o)){var d=t.interleaved;d===null?(i.next=i,Nf(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}r=e2(s,t,i,a),r!==null&&(i=or(),ra(r,s,a,i),j2(r,t,a))}}function b2(s){var t=s.alternate;return s===is||t!==null&&t===is}function v2(s,t){Gl=ax=!0;var r=s.pending;r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t}function j2(s,t,r){if(r&4194240){var a=t.lanes;a&=s.pendingLanes,r|=a,t.lanes=r,lf(s,r)}}var nx={readContext:Ur,useCallback:Hs,useContext:Hs,useEffect:Hs,useImperativeHandle:Hs,useInsertionEffect:Hs,useLayoutEffect:Hs,useMemo:Hs,useReducer:Hs,useRef:Hs,useState:Hs,useDebugValue:Hs,useDeferredValue:Hs,useTransition:Hs,useMutableSource:Hs,useSyncExternalStore:Hs,useId:Hs,unstable_isNewReconciler:!1},bE={readContext:Ur,useCallback:function(s,t){return ma().memoizedState=[s,t===void 0?null:t],s},useContext:Ur,useEffect:rv,useImperativeHandle:function(s,t,r){return r=r!=null?r.concat([s]):null,bu(4194308,4,m2.bind(null,t,s),r)},useLayoutEffect:function(s,t){return bu(4194308,4,s,t)},useInsertionEffect:function(s,t){return bu(4,2,s,t)},useMemo:function(s,t){var r=ma();return t=t===void 0?null:t,s=s(),r.memoizedState=[s,t],s},useReducer:function(s,t,r){var a=ma();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:t},a.queue=s,s=s.dispatch=gE.bind(null,is,s),[a.memoizedState,s]},useRef:function(s){var t=ma();return s={current:s},t.memoizedState=s},useState:sv,useDebugValue:_f,useDeferredValue:function(s){return ma().memoizedState=s},useTransition:function(){var s=sv(!1),t=s[0];return s=fE.bind(null,s[1]),ma().memoizedState=s,[t,s]},useMutableSource:function(){},useSyncExternalStore:function(s,t,r){var a=is,i=ma();if(es){if(r===void 0)throw Error(Me(407));r=r()}else{if(r=t(),Ts===null)throw Error(Me(349));Ii&30||n2(a,t,r)}i.memoizedState=r;var l={value:r,getSnapshot:t};return i.queue=l,rv(o2.bind(null,a,l,s),[s]),a.flags|=2048,Ic(9,i2.bind(null,a,l,r,t),void 0,null),r},useId:function(){var s=ma(),t=Ts.identifierPrefix;if(es){var r=za,a=Va;r=(a&~(1<<32-sa(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=wc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=pE++,t=":"+t+"r"+r.toString(32)+":";return s.memoizedState=t},unstable_isNewReconciler:!1},vE={readContext:Ur,useCallback:p2,useContext:Ur,useEffect:Tf,useImperativeHandle:h2,useInsertionEffect:u2,useLayoutEffect:x2,useMemo:f2,useReducer:vh,useRef:d2,useState:function(){return vh(kc)},useDebugValue:_f,useDeferredValue:function(s){var t=$r();return g2(t,Ns.memoizedState,s)},useTransition:function(){var s=vh(kc)[0],t=$r().memoizedState;return[s,t]},useMutableSource:r2,useSyncExternalStore:a2,useId:y2,unstable_isNewReconciler:!1},jE={readContext:Ur,useCallback:p2,useContext:Ur,useEffect:Tf,useImperativeHandle:h2,useInsertionEffect:u2,useLayoutEffect:x2,useMemo:f2,useReducer:jh,useRef:d2,useState:function(){return jh(kc)},useDebugValue:_f,useDeferredValue:function(s){var t=$r();return Ns===null?t.memoizedState=s:g2(t,Ns.memoizedState,s)},useTransition:function(){var s=jh(kc)[0],t=$r().memoizedState;return[s,t]},useMutableSource:r2,useSyncExternalStore:a2,useId:y2,unstable_isNewReconciler:!1};function Yr(s,t){if(s&&s.defaultProps){t=cs({},t),s=s.defaultProps;for(var r in s)t[r]===void 0&&(t[r]=s[r]);return t}return t}function Mp(s,t,r,a){t=s.memoizedState,r=r(a,t),r=r==null?t:cs({},t,r),s.memoizedState=r,s.lanes===0&&(s.updateQueue.baseState=r)}var sm={isMounted:function(s){return(s=s._reactInternals)?Li(s)===s:!1},enqueueSetState:function(s,t,r){s=s._reactInternals;var a=or(),i=An(s),l=Ua(a,i);l.payload=t,r!=null&&(l.callback=r),t=_n(s,l,i),t!==null&&(ra(t,s,i,a),gu(t,s,i))},enqueueReplaceState:function(s,t,r){s=s._reactInternals;var a=or(),i=An(s),l=Ua(a,i);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=_n(s,l,i),t!==null&&(ra(t,s,i,a),gu(t,s,i))},enqueueForceUpdate:function(s,t){s=s._reactInternals;var r=or(),a=An(s),i=Ua(r,a);i.tag=2,t!=null&&(i.callback=t),t=_n(s,i,a),t!==null&&(ra(t,s,a,r),gu(t,s,a))}};function av(s,t,r,a,i,l,o){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(a,l,o):t.prototype&&t.prototype.isPureReactComponent?!gc(r,a)||!gc(i,l):!0}function N2(s,t,r){var a=!1,i=Bn,l=t.contextType;return typeof l=="object"&&l!==null?l=Ur(l):(i=fr(t)?wi:Zs.current,a=t.contextTypes,l=(a=a!=null)?Do(s,i):Bn),t=new t(r,l),s.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sm,s.stateNode=t,t._reactInternals=s,a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=l),t}function nv(s,t,r,a){s=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==s&&sm.enqueueReplaceState(t,t.state,null)}function Lp(s,t,r,a){var i=s.stateNode;i.props=r,i.state=s.memoizedState,i.refs={},wf(s);var l=t.contextType;typeof l=="object"&&l!==null?i.context=Ur(l):(l=fr(t)?wi:Zs.current,i.context=Do(s,l)),i.state=s.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Mp(s,t,l,r),i.state=s.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&sm.enqueueReplaceState(i,i.state,null),sx(s,r,i,a),i.state=s.memoizedState),typeof i.componentDidMount=="function"&&(s.flags|=4194308)}function Lo(s,t){try{var r="",a=t;do r+=QP(a),a=a.return;while(a);var i=r}catch(l){i=`
Error generating stack: `+l.message+`
`+l.stack}return{value:s,source:t,stack:i,digest:null}}function Nh(s,t,r){return{value:s,source:null,stack:r??null,digest:t??null}}function Op(s,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var NE=typeof WeakMap=="function"?WeakMap:Map;function w2(s,t,r){r=Ua(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){ox||(ox=!0,Gp=a),Op(s,t)},r}function k2(s,t,r){r=Ua(-1,r),r.tag=3;var a=s.type.getDerivedStateFromError;if(typeof a=="function"){var i=t.value;r.payload=function(){return a(i)},r.callback=function(){Op(s,t)}}var l=s.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Op(s,t),typeof a!="function"&&(Dn===null?Dn=new Set([this]):Dn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function iv(s,t,r){var a=s.pingCache;if(a===null){a=s.pingCache=new NE;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(r)||(i.add(r),s=LE.bind(null,s,t,r),t.then(s,s))}function ov(s){do{var t;if((t=s.tag===13)&&(t=s.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return s;s=s.return}while(s!==null);return null}function lv(s,t,r,a,i){return s.mode&1?(s.flags|=65536,s.lanes=i,s):(s===t?s.flags|=65536:(s.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ua(-1,1),t.tag=2,_n(r,t,1))),r.lanes|=1),s)}var wE=sn.ReactCurrentOwner,mr=!1;function ar(s,t,r,a){t.child=s===null?Z5(t,null,r,a):Ro(t,s.child,r,a)}function cv(s,t,r,a,i){r=r.render;var l=t.ref;return Io(t,i),a=Ef(s,t,r,a,l,i),r=Cf(),s!==null&&!mr?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~i,Ka(s,t,i)):(es&&r&&ff(t),t.flags|=1,ar(s,t,a,i),t.child)}function dv(s,t,r,a,i){if(s===null){var l=r.type;return typeof l=="function"&&!zf(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,I2(s,t,l,a,i)):(s=wu(r.type,null,a,t,t.mode,i),s.ref=t.ref,s.return=t,t.child=s)}if(l=s.child,!(s.lanes&i)){var o=l.memoizedProps;if(r=r.compare,r=r!==null?r:gc,r(o,a)&&s.ref===t.ref)return Ka(s,t,i)}return t.flags|=1,s=Rn(l,a),s.ref=t.ref,s.return=t,t.child=s}function I2(s,t,r,a,i){if(s!==null){var l=s.memoizedProps;if(gc(l,a)&&s.ref===t.ref)if(mr=!1,t.pendingProps=a=l,(s.lanes&i)!==0)s.flags&131072&&(mr=!0);else return t.lanes=s.lanes,Ka(s,t,i)}return Vp(s,t,r,a,i)}function P2(s,t,r){var a=t.pendingProps,i=a.children,l=s!==null?s.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(mo,wr),wr|=r;else{if(!(r&1073741824))return s=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:s,cachePool:null,transitions:null},t.updateQueue=null,Kt(mo,wr),wr|=s,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=l!==null?l.baseLanes:r,Kt(mo,wr),wr|=a}else l!==null?(a=l.baseLanes|r,t.memoizedState=null):a=r,Kt(mo,wr),wr|=a;return ar(s,t,i,r),t.child}function S2(s,t){var r=t.ref;(s===null&&r!==null||s!==null&&s.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Vp(s,t,r,a,i){var l=fr(r)?wi:Zs.current;return l=Do(t,l),Io(t,i),r=Ef(s,t,r,a,l,i),a=Cf(),s!==null&&!mr?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~i,Ka(s,t,i)):(es&&a&&ff(t),t.flags|=1,ar(s,t,r,i),t.child)}function uv(s,t,r,a,i){if(fr(r)){var l=!0;Xu(t)}else l=!1;if(Io(t,i),t.stateNode===null)vu(s,t),N2(t,r,a),Lp(t,r,a,i),a=!0;else if(s===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var d=o.context,x=r.contextType;typeof x=="object"&&x!==null?x=Ur(x):(x=fr(r)?wi:Zs.current,x=Do(t,x));var f=r.getDerivedStateFromProps,j=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";j||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==a||d!==x)&&nv(t,o,a,x),fn=!1;var w=t.memoizedState;o.state=w,sx(t,a,o,i),d=t.memoizedState,c!==a||w!==d||pr.current||fn?(typeof f=="function"&&(Mp(t,r,f,a),d=t.memoizedState),(c=fn||av(t,r,c,a,w,d,x))?(j||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=d),o.props=a,o.state=d,o.context=x,a=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,t2(s,t),c=t.memoizedProps,x=t.type===t.elementType?c:Yr(t.type,c),o.props=x,j=t.pendingProps,w=o.context,d=r.contextType,typeof d=="object"&&d!==null?d=Ur(d):(d=fr(r)?wi:Zs.current,d=Do(t,d));var S=r.getDerivedStateFromProps;(f=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==j||w!==d)&&nv(t,o,a,d),fn=!1,w=t.memoizedState,o.state=w,sx(t,a,o,i);var g=t.memoizedState;c!==j||w!==g||pr.current||fn?(typeof S=="function"&&(Mp(t,r,S,a),g=t.memoizedState),(x=fn||av(t,r,x,a,w,g,d)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,g,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,g,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===s.memoizedProps&&w===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===s.memoizedProps&&w===s.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=g),o.props=a,o.state=g,o.context=d,a=x):(typeof o.componentDidUpdate!="function"||c===s.memoizedProps&&w===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===s.memoizedProps&&w===s.memoizedState||(t.flags|=1024),a=!1)}return zp(s,t,r,a,l,i)}function zp(s,t,r,a,i,l){S2(s,t);var o=(t.flags&128)!==0;if(!a&&!o)return i&&Yb(t,r,!1),Ka(s,t,l);a=t.stateNode,wE.current=t;var c=o&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,s!==null&&o?(t.child=Ro(t,s.child,null,l),t.child=Ro(t,null,c,l)):ar(s,t,c,l),t.memoizedState=a.state,i&&Yb(t,r,!0),t.child}function E2(s){var t=s.stateNode;t.pendingContext?Qb(s,t.pendingContext,t.pendingContext!==t.context):t.context&&Qb(s,t.context,!1),kf(s,t.containerInfo)}function xv(s,t,r,a,i){return Ao(),yf(i),t.flags|=256,ar(s,t,r,a),t.child}var Bp={dehydrated:null,treeContext:null,retryLane:0};function Fp(s){return{baseLanes:s,cachePool:null,transitions:null}}function C2(s,t,r){var a=t.pendingProps,i=as.current,l=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=s!==null&&s.memoizedState===null?!1:(i&2)!==0),c?(l=!0,t.flags&=-129):(s===null||s.memoizedState!==null)&&(i|=1),Kt(as,i&1),s===null)return Ap(t),s=t.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(t.mode&1?s.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,s=a.fallback,l?(a=t.mode,l=t.child,o={mode:"hidden",children:o},!(a&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=nm(o,a,0,null),s=bi(s,a,r,null),l.return=t,s.return=t,l.sibling=s,t.child=l,t.child.memoizedState=Fp(r),t.memoizedState=Bp,s):Df(t,o));if(i=s.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return kE(s,t,o,a,c,i,r);if(l){l=a.fallback,o=t.mode,i=s.child,c=i.sibling;var d={mode:"hidden",children:a.children};return!(o&1)&&t.child!==i?(a=t.child,a.childLanes=0,a.pendingProps=d,t.deletions=null):(a=Rn(i,d),a.subtreeFlags=i.subtreeFlags&14680064),c!==null?l=Rn(c,l):(l=bi(l,o,r,null),l.flags|=2),l.return=t,a.return=t,a.sibling=l,t.child=a,a=l,l=t.child,o=s.child.memoizedState,o=o===null?Fp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=s.childLanes&~r,t.memoizedState=Bp,a}return l=s.child,s=l.sibling,a=Rn(l,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,s!==null&&(r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)),t.child=a,t.memoizedState=null,a}function Df(s,t){return t=nm({mode:"visible",children:t},s.mode,0,null),t.return=s,s.child=t}function Qd(s,t,r,a){return a!==null&&yf(a),Ro(t,s.child,null,r),s=Df(t,t.pendingProps.children),s.flags|=2,t.memoizedState=null,s}function kE(s,t,r,a,i,l,o){if(r)return t.flags&256?(t.flags&=-257,a=Nh(Error(Me(422))),Qd(s,t,o,a)):t.memoizedState!==null?(t.child=s.child,t.flags|=128,null):(l=a.fallback,i=t.mode,a=nm({mode:"visible",children:a.children},i,0,null),l=bi(l,i,o,null),l.flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,t.mode&1&&Ro(t,s.child,null,o),t.child.memoizedState=Fp(o),t.memoizedState=Bp,l);if(!(t.mode&1))return Qd(s,t,o,null);if(i.data==="$!"){if(a=i.nextSibling&&i.nextSibling.dataset,a)var c=a.dgst;return a=c,l=Error(Me(419)),a=Nh(l,a,void 0),Qd(s,t,o,a)}if(c=(o&s.childLanes)!==0,mr||c){if(a=Ts,a!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(a.suspendedLanes|o)?0:i,i!==0&&i!==l.retryLane&&(l.retryLane=i,Ga(s,i),ra(a,s,i,-1))}return Vf(),a=Nh(Error(Me(421))),Qd(s,t,o,a)}return i.data==="$?"?(t.flags|=128,t.child=s.child,t=OE.bind(null,s),i._reactRetry=t,null):(s=l.treeContext,Ir=Tn(i.nextSibling),Sr=t,es=!0,Jr=null,s!==null&&(Lr[Or++]=Va,Lr[Or++]=za,Lr[Or++]=ki,Va=s.id,za=s.overflow,ki=t),t=Df(t,a.children),t.flags|=4096,t)}function mv(s,t,r){s.lanes|=t;var a=s.alternate;a!==null&&(a.lanes|=t),Rp(s.return,t,r)}function wh(s,t,r,a,i){var l=s.memoizedState;l===null?s.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:i}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=r,l.tailMode=i)}function T2(s,t,r){var a=t.pendingProps,i=a.revealOrder,l=a.tail;if(ar(s,t,a.children,r),a=as.current,a&2)a=a&1|2,t.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=t.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&mv(s,r,t);else if(s.tag===19)mv(s,r,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}a&=1}if(Kt(as,a),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)s=r.alternate,s!==null&&rx(s)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),wh(t,!1,i,r,l);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(s=i.alternate,s!==null&&rx(s)===null){t.child=i;break}s=i.sibling,i.sibling=r,r=i,i=s}wh(t,!0,r,null,l);break;case"together":wh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vu(s,t){!(t.mode&1)&&s!==null&&(s.alternate=null,t.alternate=null,t.flags|=2)}function Ka(s,t,r){if(s!==null&&(t.dependencies=s.dependencies),Pi|=t.lanes,!(r&t.childLanes))return null;if(s!==null&&t.child!==s.child)throw Error(Me(153));if(t.child!==null){for(s=t.child,r=Rn(s,s.pendingProps),t.child=r,r.return=t;s.sibling!==null;)s=s.sibling,r=r.sibling=Rn(s,s.pendingProps),r.return=t;r.sibling=null}return t.child}function IE(s,t,r){switch(t.tag){case 3:E2(t),Ao();break;case 5:s2(t);break;case 1:fr(t.type)&&Xu(t);break;case 4:kf(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,i=t.memoizedProps.value;Kt(ex,a._currentValue),a._currentValue=i;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Kt(as,as.current&1),t.flags|=128,null):r&t.child.childLanes?C2(s,t,r):(Kt(as,as.current&1),s=Ka(s,t,r),s!==null?s.sibling:null);Kt(as,as.current&1);break;case 19:if(a=(r&t.childLanes)!==0,s.flags&128){if(a)return T2(s,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Kt(as,as.current),a)break;return null;case 22:case 23:return t.lanes=0,P2(s,t,r)}return Ka(s,t,r)}var _2,Up,D2,A2;_2=function(s,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Up=function(){};D2=function(s,t,r,a){var i=s.memoizedProps;if(i!==a){s=t.stateNode,mi(ga.current);var l=null;switch(r){case"input":i=dp(s,i),a=dp(s,a),l=[];break;case"select":i=cs({},i,{value:void 0}),a=cs({},a,{value:void 0}),l=[];break;case"textarea":i=mp(s,i),a=mp(s,a),l=[];break;default:typeof i.onClick!="function"&&typeof a.onClick=="function"&&(s.onclick=Qu)}pp(r,a);var o;r=null;for(x in i)if(!a.hasOwnProperty(x)&&i.hasOwnProperty(x)&&i[x]!=null)if(x==="style"){var c=i[x];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(dc.hasOwnProperty(x)?l||(l=[]):(l=l||[]).push(x,null));for(x in a){var d=a[x];if(c=i!=null?i[x]:void 0,a.hasOwnProperty(x)&&d!==c&&(d!=null||c!=null))if(x==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(r||(r={}),r[o]=d[o])}else r||(l||(l=[]),l.push(x,r)),r=d;else x==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(l=l||[]).push(x,d)):x==="children"?typeof d!="string"&&typeof d!="number"||(l=l||[]).push(x,""+d):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(dc.hasOwnProperty(x)?(d!=null&&x==="onScroll"&&Jt("scroll",s),l||c===d||(l=[])):(l=l||[]).push(x,d))}r&&(l=l||[]).push("style",r);var x=l;(t.updateQueue=x)&&(t.flags|=4)}};A2=function(s,t,r,a){r!==a&&(t.flags|=4)};function Pl(s,t){if(!es)switch(s.tailMode){case"hidden":t=s.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?s.tail=null:r.sibling=null;break;case"collapsed":r=s.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||s.tail===null?s.tail=null:s.tail.sibling=null:a.sibling=null}}function Gs(s){var t=s.alternate!==null&&s.alternate.child===s.child,r=0,a=0;if(t)for(var i=s.child;i!==null;)r|=i.lanes|i.childLanes,a|=i.subtreeFlags&14680064,a|=i.flags&14680064,i.return=s,i=i.sibling;else for(i=s.child;i!==null;)r|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=s,i=i.sibling;return s.subtreeFlags|=a,s.childLanes=r,t}function PE(s,t,r){var a=t.pendingProps;switch(gf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:return fr(t.type)&&Yu(),Gs(t),null;case 3:return a=t.stateNode,Mo(),Zt(pr),Zt(Zs),Pf(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(Gd(t)?t.flags|=4:s===null||s.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jr!==null&&(Yp(Jr),Jr=null))),Up(s,t),Gs(t),null;case 5:If(t);var i=mi(Nc.current);if(r=t.type,s!==null&&t.stateNode!=null)D2(s,t,r,a,i),s.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Me(166));return Gs(t),null}if(s=mi(ga.current),Gd(t)){a=t.stateNode,r=t.type;var l=t.memoizedProps;switch(a[pa]=t,a[vc]=l,s=(t.mode&1)!==0,r){case"dialog":Jt("cancel",a),Jt("close",a);break;case"iframe":case"object":case"embed":Jt("load",a);break;case"video":case"audio":for(i=0;i<Rl.length;i++)Jt(Rl[i],a);break;case"source":Jt("error",a);break;case"img":case"image":case"link":Jt("error",a),Jt("load",a);break;case"details":Jt("toggle",a);break;case"input":Nb(a,l),Jt("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},Jt("invalid",a);break;case"textarea":kb(a,l),Jt("invalid",a)}pp(r,l),i=null;for(var o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="children"?typeof c=="string"?a.textContent!==c&&(l.suppressHydrationWarning!==!0&&Hd(a.textContent,c,s),i=["children",c]):typeof c=="number"&&a.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&Hd(a.textContent,c,s),i=["children",""+c]):dc.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Jt("scroll",a)}switch(r){case"input":Vd(a),wb(a,l,!0);break;case"textarea":Vd(a),Ib(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(a.onclick=Qu)}a=i,t.updateQueue=a,a!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=o5(r)),s==="http://www.w3.org/1999/xhtml"?r==="script"?(s=o.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof a.is=="string"?s=o.createElement(r,{is:a.is}):(s=o.createElement(r),r==="select"&&(o=s,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):s=o.createElementNS(s,r),s[pa]=t,s[vc]=a,_2(s,t,!1,!1),t.stateNode=s;e:{switch(o=fp(r,a),r){case"dialog":Jt("cancel",s),Jt("close",s),i=a;break;case"iframe":case"object":case"embed":Jt("load",s),i=a;break;case"video":case"audio":for(i=0;i<Rl.length;i++)Jt(Rl[i],s);i=a;break;case"source":Jt("error",s),i=a;break;case"img":case"image":case"link":Jt("error",s),Jt("load",s),i=a;break;case"details":Jt("toggle",s),i=a;break;case"input":Nb(s,a),i=dp(s,a),Jt("invalid",s);break;case"option":i=a;break;case"select":s._wrapperState={wasMultiple:!!a.multiple},i=cs({},a,{value:void 0}),Jt("invalid",s);break;case"textarea":kb(s,a),i=mp(s,a),Jt("invalid",s);break;default:i=a}pp(r,i),c=i;for(l in c)if(c.hasOwnProperty(l)){var d=c[l];l==="style"?d5(s,d):l==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&l5(s,d)):l==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&uc(s,d):typeof d=="number"&&uc(s,""+d):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(dc.hasOwnProperty(l)?d!=null&&l==="onScroll"&&Jt("scroll",s):d!=null&&tf(s,l,d,o))}switch(r){case"input":Vd(s),wb(s,a,!1);break;case"textarea":Vd(s),Ib(s);break;case"option":a.value!=null&&s.setAttribute("value",""+zn(a.value));break;case"select":s.multiple=!!a.multiple,l=a.value,l!=null?jo(s,!!a.multiple,l,!1):a.defaultValue!=null&&jo(s,!!a.multiple,a.defaultValue,!0);break;default:typeof i.onClick=="function"&&(s.onclick=Qu)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(s&&t.stateNode!=null)A2(s,t,s.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Me(166));if(r=mi(Nc.current),mi(ga.current),Gd(t)){if(a=t.stateNode,r=t.memoizedProps,a[pa]=t,(l=a.nodeValue!==r)&&(s=Sr,s!==null))switch(s.tag){case 3:Hd(a.nodeValue,r,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Hd(a.nodeValue,r,(s.mode&1)!==0)}l&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[pa]=t,t.stateNode=a}return Gs(t),null;case 13:if(Zt(as),a=t.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(es&&Ir!==null&&t.mode&1&&!(t.flags&128))X5(),Ao(),t.flags|=98560,l=!1;else if(l=Gd(t),a!==null&&a.dehydrated!==null){if(s===null){if(!l)throw Error(Me(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Me(317));l[pa]=t}else Ao(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Gs(t),l=!1}else Jr!==null&&(Yp(Jr),Jr=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(s!==null&&s.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(s===null||as.current&1?ws===0&&(ws=3):Vf())),t.updateQueue!==null&&(t.flags|=4),Gs(t),null);case 4:return Mo(),Up(s,t),s===null&&yc(t.stateNode.containerInfo),Gs(t),null;case 10:return jf(t.type._context),Gs(t),null;case 17:return fr(t.type)&&Yu(),Gs(t),null;case 19:if(Zt(as),l=t.memoizedState,l===null)return Gs(t),null;if(a=(t.flags&128)!==0,o=l.rendering,o===null)if(a)Pl(l,!1);else{if(ws!==0||s!==null&&s.flags&128)for(s=t.child;s!==null;){if(o=rx(s),o!==null){for(t.flags|=128,Pl(l,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)l=r,s=a,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=s,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r=r.sibling;return Kt(as,as.current&1|2),t.child}s=s.sibling}l.tail!==null&&gs()>Oo&&(t.flags|=128,a=!0,Pl(l,!1),t.lanes=4194304)}else{if(!a)if(s=rx(o),s!==null){if(t.flags|=128,a=!0,r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Pl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!es)return Gs(t),null}else 2*gs()-l.renderingStartTime>Oo&&r!==1073741824&&(t.flags|=128,a=!0,Pl(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(r=l.last,r!==null?r.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=gs(),t.sibling=null,r=as.current,Kt(as,a?r&1|2:r&1),t):(Gs(t),null);case 22:case 23:return Of(),a=t.memoizedState!==null,s!==null&&s.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?wr&1073741824&&(Gs(t),t.subtreeFlags&6&&(t.flags|=8192)):Gs(t),null;case 24:return null;case 25:return null}throw Error(Me(156,t.tag))}function SE(s,t){switch(gf(t),t.tag){case 1:return fr(t.type)&&Yu(),s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 3:return Mo(),Zt(pr),Zt(Zs),Pf(),s=t.flags,s&65536&&!(s&128)?(t.flags=s&-65537|128,t):null;case 5:return If(t),null;case 13:if(Zt(as),s=t.memoizedState,s!==null&&s.dehydrated!==null){if(t.alternate===null)throw Error(Me(340));Ao()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 19:return Zt(as),null;case 4:return Mo(),null;case 10:return jf(t.type._context),null;case 22:case 23:return Of(),null;case 24:return null;default:return null}}var Yd=!1,Xs=!1,EE=typeof WeakSet=="function"?WeakSet:Set,Je=null;function xo(s,t){var r=s.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){hs(s,t,a)}else r.current=null}function $p(s,t,r){try{r()}catch(a){hs(s,t,a)}}var hv=!1;function CE(s,t){if(Pp=Hu,s=V5(),pf(s)){if("selectionStart"in s)var r={start:s.selectionStart,end:s.selectionEnd};else e:{r=(r=s.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var i=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var o=0,c=-1,d=-1,x=0,f=0,j=s,w=null;t:for(;;){for(var S;j!==r||i!==0&&j.nodeType!==3||(c=o+i),j!==l||a!==0&&j.nodeType!==3||(d=o+a),j.nodeType===3&&(o+=j.nodeValue.length),(S=j.firstChild)!==null;)w=j,j=S;for(;;){if(j===s)break t;if(w===r&&++x===i&&(c=o),w===l&&++f===a&&(d=o),(S=j.nextSibling)!==null)break;j=w,w=j.parentNode}j=S}r=c===-1||d===-1?null:{start:c,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Sp={focusedElem:s,selectionRange:r},Hu=!1,Je=t;Je!==null;)if(t=Je,s=t.child,(t.subtreeFlags&1028)!==0&&s!==null)s.return=t,Je=s;else for(;Je!==null;){t=Je;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var V=g.memoizedProps,E=g.memoizedState,T=t.stateNode,M=T.getSnapshotBeforeUpdate(t.elementType===t.type?V:Yr(t.type,V),E);T.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var L=t.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Me(163))}}catch(H){hs(t,t.return,H)}if(s=t.sibling,s!==null){s.return=t.return,Je=s;break}Je=t.return}return g=hv,hv=!1,g}function Kl(s,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var i=a=a.next;do{if((i.tag&s)===s){var l=i.destroy;i.destroy=void 0,l!==void 0&&$p(t,r,l)}i=i.next}while(i!==a)}}function rm(s,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&s)===s){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Wp(s){var t=s.ref;if(t!==null){var r=s.stateNode;switch(s.tag){case 5:s=r;break;default:s=r}typeof t=="function"?t(s):t.current=s}}function R2(s){var t=s.alternate;t!==null&&(s.alternate=null,R2(t)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(t=s.stateNode,t!==null&&(delete t[pa],delete t[vc],delete t[Tp],delete t[uE],delete t[xE])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function M2(s){return s.tag===5||s.tag===3||s.tag===4}function pv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||M2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function qp(s,t,r){var a=s.tag;if(a===5||a===6)s=s.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(s,t):r.insertBefore(s,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(s,r)):(t=r,t.appendChild(s)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Qu));else if(a!==4&&(s=s.child,s!==null))for(qp(s,t,r),s=s.sibling;s!==null;)qp(s,t,r),s=s.sibling}function Hp(s,t,r){var a=s.tag;if(a===5||a===6)s=s.stateNode,t?r.insertBefore(s,t):r.appendChild(s);else if(a!==4&&(s=s.child,s!==null))for(Hp(s,t,r),s=s.sibling;s!==null;)Hp(s,t,r),s=s.sibling}var Rs=null,Xr=!1;function xn(s,t,r){for(r=r.child;r!==null;)L2(s,t,r),r=r.sibling}function L2(s,t,r){if(fa&&typeof fa.onCommitFiberUnmount=="function")try{fa.onCommitFiberUnmount(Qx,r)}catch{}switch(r.tag){case 5:Xs||xo(r,t);case 6:var a=Rs,i=Xr;Rs=null,xn(s,t,r),Rs=a,Xr=i,Rs!==null&&(Xr?(s=Rs,r=r.stateNode,s.nodeType===8?s.parentNode.removeChild(r):s.removeChild(r)):Rs.removeChild(r.stateNode));break;case 18:Rs!==null&&(Xr?(s=Rs,r=r.stateNode,s.nodeType===8?fh(s.parentNode,r):s.nodeType===1&&fh(s,r),pc(s)):fh(Rs,r.stateNode));break;case 4:a=Rs,i=Xr,Rs=r.stateNode.containerInfo,Xr=!0,xn(s,t,r),Rs=a,Xr=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){i=a=a.next;do{var l=i,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&$p(r,t,o),i=i.next}while(i!==a)}xn(s,t,r);break;case 1:if(!Xs&&(xo(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(c){hs(r,t,c)}xn(s,t,r);break;case 21:xn(s,t,r);break;case 22:r.mode&1?(Xs=(a=Xs)||r.memoizedState!==null,xn(s,t,r),Xs=a):xn(s,t,r);break;default:xn(s,t,r)}}function fv(s){var t=s.updateQueue;if(t!==null){s.updateQueue=null;var r=s.stateNode;r===null&&(r=s.stateNode=new EE),t.forEach(function(a){var i=VE.bind(null,s,a);r.has(a)||(r.add(a),a.then(i,i))})}}function Kr(s,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var i=r[a];try{var l=s,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:Rs=c.stateNode,Xr=!1;break e;case 3:Rs=c.stateNode.containerInfo,Xr=!0;break e;case 4:Rs=c.stateNode.containerInfo,Xr=!0;break e}c=c.return}if(Rs===null)throw Error(Me(160));L2(l,o,i),Rs=null,Xr=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(x){hs(i,t,x)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)O2(t,s),t=t.sibling}function O2(s,t){var r=s.alternate,a=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Kr(t,s),xa(s),a&4){try{Kl(3,s,s.return),rm(3,s)}catch(V){hs(s,s.return,V)}try{Kl(5,s,s.return)}catch(V){hs(s,s.return,V)}}break;case 1:Kr(t,s),xa(s),a&512&&r!==null&&xo(r,r.return);break;case 5:if(Kr(t,s),xa(s),a&512&&r!==null&&xo(r,r.return),s.flags&32){var i=s.stateNode;try{uc(i,"")}catch(V){hs(s,s.return,V)}}if(a&4&&(i=s.stateNode,i!=null)){var l=s.memoizedProps,o=r!==null?r.memoizedProps:l,c=s.type,d=s.updateQueue;if(s.updateQueue=null,d!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&n5(i,l),fp(c,o);var x=fp(c,l);for(o=0;o<d.length;o+=2){var f=d[o],j=d[o+1];f==="style"?d5(i,j):f==="dangerouslySetInnerHTML"?l5(i,j):f==="children"?uc(i,j):tf(i,f,j,x)}switch(c){case"input":up(i,l);break;case"textarea":i5(i,l);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!l.multiple;var S=l.value;S!=null?jo(i,!!l.multiple,S,!1):w!==!!l.multiple&&(l.defaultValue!=null?jo(i,!!l.multiple,l.defaultValue,!0):jo(i,!!l.multiple,l.multiple?[]:"",!1))}i[vc]=l}catch(V){hs(s,s.return,V)}}break;case 6:if(Kr(t,s),xa(s),a&4){if(s.stateNode===null)throw Error(Me(162));i=s.stateNode,l=s.memoizedProps;try{i.nodeValue=l}catch(V){hs(s,s.return,V)}}break;case 3:if(Kr(t,s),xa(s),a&4&&r!==null&&r.memoizedState.isDehydrated)try{pc(t.containerInfo)}catch(V){hs(s,s.return,V)}break;case 4:Kr(t,s),xa(s);break;case 13:Kr(t,s),xa(s),i=s.child,i.flags&8192&&(l=i.memoizedState!==null,i.stateNode.isHidden=l,!l||i.alternate!==null&&i.alternate.memoizedState!==null||(Mf=gs())),a&4&&fv(s);break;case 22:if(f=r!==null&&r.memoizedState!==null,s.mode&1?(Xs=(x=Xs)||f,Kr(t,s),Xs=x):Kr(t,s),xa(s),a&8192){if(x=s.memoizedState!==null,(s.stateNode.isHidden=x)&&!f&&s.mode&1)for(Je=s,f=s.child;f!==null;){for(j=Je=f;Je!==null;){switch(w=Je,S=w.child,w.tag){case 0:case 11:case 14:case 15:Kl(4,w,w.return);break;case 1:xo(w,w.return);var g=w.stateNode;if(typeof g.componentWillUnmount=="function"){a=w,r=w.return;try{t=a,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(V){hs(a,r,V)}}break;case 5:xo(w,w.return);break;case 22:if(w.memoizedState!==null){yv(j);continue}}S!==null?(S.return=w,Je=S):yv(j)}f=f.sibling}e:for(f=null,j=s;;){if(j.tag===5){if(f===null){f=j;try{i=j.stateNode,x?(l=i.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=j.stateNode,d=j.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=c5("display",o))}catch(V){hs(s,s.return,V)}}}else if(j.tag===6){if(f===null)try{j.stateNode.nodeValue=x?"":j.memoizedProps}catch(V){hs(s,s.return,V)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===s)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===s)break e;for(;j.sibling===null;){if(j.return===null||j.return===s)break e;f===j&&(f=null),j=j.return}f===j&&(f=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:Kr(t,s),xa(s),a&4&&fv(s);break;case 21:break;default:Kr(t,s),xa(s)}}function xa(s){var t=s.flags;if(t&2){try{e:{for(var r=s.return;r!==null;){if(M2(r)){var a=r;break e}r=r.return}throw Error(Me(160))}switch(a.tag){case 5:var i=a.stateNode;a.flags&32&&(uc(i,""),a.flags&=-33);var l=pv(s);Hp(s,l,i);break;case 3:case 4:var o=a.stateNode.containerInfo,c=pv(s);qp(s,c,o);break;default:throw Error(Me(161))}}catch(d){hs(s,s.return,d)}s.flags&=-3}t&4096&&(s.flags&=-4097)}function TE(s,t,r){Je=s,V2(s)}function V2(s,t,r){for(var a=(s.mode&1)!==0;Je!==null;){var i=Je,l=i.child;if(i.tag===22&&a){var o=i.memoizedState!==null||Yd;if(!o){var c=i.alternate,d=c!==null&&c.memoizedState!==null||Xs;c=Yd;var x=Xs;if(Yd=o,(Xs=d)&&!x)for(Je=i;Je!==null;)o=Je,d=o.child,o.tag===22&&o.memoizedState!==null?bv(i):d!==null?(d.return=o,Je=d):bv(i);for(;l!==null;)Je=l,V2(l),l=l.sibling;Je=i,Yd=c,Xs=x}gv(s)}else i.subtreeFlags&8772&&l!==null?(l.return=i,Je=l):gv(s)}}function gv(s){for(;Je!==null;){var t=Je;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xs||rm(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Xs)if(r===null)a.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Yr(t.type,r.memoizedProps);a.componentDidUpdate(i,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&tv(t,l,a);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}tv(t,o,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var x=t.alternate;if(x!==null){var f=x.memoizedState;if(f!==null){var j=f.dehydrated;j!==null&&pc(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Me(163))}Xs||t.flags&512&&Wp(t)}catch(w){hs(t,t.return,w)}}if(t===s){Je=null;break}if(r=t.sibling,r!==null){r.return=t.return,Je=r;break}Je=t.return}}function yv(s){for(;Je!==null;){var t=Je;if(t===s){Je=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Je=r;break}Je=t.return}}function bv(s){for(;Je!==null;){var t=Je;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{rm(4,t)}catch(d){hs(t,r,d)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var i=t.return;try{a.componentDidMount()}catch(d){hs(t,i,d)}}var l=t.return;try{Wp(t)}catch(d){hs(t,l,d)}break;case 5:var o=t.return;try{Wp(t)}catch(d){hs(t,o,d)}}}catch(d){hs(t,t.return,d)}if(t===s){Je=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Je=c;break}Je=t.return}}var _E=Math.ceil,ix=sn.ReactCurrentDispatcher,Af=sn.ReactCurrentOwner,Br=sn.ReactCurrentBatchConfig,Lt=0,Ts=null,bs=null,zs=0,wr=0,mo=Xn(0),ws=0,Pc=null,Pi=0,am=0,Rf=0,Ql=null,xr=null,Mf=0,Oo=1/0,La=null,ox=!1,Gp=null,Dn=null,Xd=!1,kn=null,lx=0,Yl=0,Kp=null,ju=-1,Nu=0;function or(){return Lt&6?gs():ju!==-1?ju:ju=gs()}function An(s){return s.mode&1?Lt&2&&zs!==0?zs&-zs:hE.transition!==null?(Nu===0&&(Nu=N5()),Nu):(s=Ft,s!==0||(s=window.event,s=s===void 0?16:C5(s.type)),s):1}function ra(s,t,r,a){if(50<Yl)throw Yl=0,Kp=null,Error(Me(185));Kc(s,r,a),(!(Lt&2)||s!==Ts)&&(s===Ts&&(!(Lt&2)&&(am|=r),ws===4&&yn(s,zs)),gr(s,a),r===1&&Lt===0&&!(t.mode&1)&&(Oo=gs()+500,em&&Jn()))}function gr(s,t){var r=s.callbackNode;hS(s,t);var a=qu(s,s===Ts?zs:0);if(a===0)r!==null&&Eb(r),s.callbackNode=null,s.callbackPriority=0;else if(t=a&-a,s.callbackPriority!==t){if(r!=null&&Eb(r),t===1)s.tag===0?mE(vv.bind(null,s)):K5(vv.bind(null,s)),cE(function(){!(Lt&6)&&Jn()}),r=null;else{switch(w5(a)){case 1:r=of;break;case 4:r=v5;break;case 16:r=Wu;break;case 536870912:r=j5;break;default:r=Wu}r=H2(r,z2.bind(null,s))}s.callbackPriority=t,s.callbackNode=r}}function z2(s,t){if(ju=-1,Nu=0,Lt&6)throw Error(Me(327));var r=s.callbackNode;if(Po()&&s.callbackNode!==r)return null;var a=qu(s,s===Ts?zs:0);if(a===0)return null;if(a&30||a&s.expiredLanes||t)t=cx(s,a);else{t=a;var i=Lt;Lt|=2;var l=F2();(Ts!==s||zs!==t)&&(La=null,Oo=gs()+500,yi(s,t));do try{RE();break}catch(c){B2(s,c)}while(1);vf(),ix.current=l,Lt=i,bs!==null?t=0:(Ts=null,zs=0,t=ws)}if(t!==0){if(t===2&&(i=jp(s),i!==0&&(a=i,t=Qp(s,i))),t===1)throw r=Pc,yi(s,0),yn(s,a),gr(s,gs()),r;if(t===6)yn(s,a);else{if(i=s.current.alternate,!(a&30)&&!DE(i)&&(t=cx(s,a),t===2&&(l=jp(s),l!==0&&(a=l,t=Qp(s,l))),t===1))throw r=Pc,yi(s,0),yn(s,a),gr(s,gs()),r;switch(s.finishedWork=i,s.finishedLanes=a,t){case 0:case 1:throw Error(Me(345));case 2:li(s,xr,La);break;case 3:if(yn(s,a),(a&130023424)===a&&(t=Mf+500-gs(),10<t)){if(qu(s,0)!==0)break;if(i=s.suspendedLanes,(i&a)!==a){or(),s.pingedLanes|=s.suspendedLanes&i;break}s.timeoutHandle=Cp(li.bind(null,s,xr,La),t);break}li(s,xr,La);break;case 4:if(yn(s,a),(a&4194240)===a)break;for(t=s.eventTimes,i=-1;0<a;){var o=31-sa(a);l=1<<o,o=t[o],o>i&&(i=o),a&=~l}if(a=i,a=gs()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*_E(a/1960))-a,10<a){s.timeoutHandle=Cp(li.bind(null,s,xr,La),a);break}li(s,xr,La);break;case 5:li(s,xr,La);break;default:throw Error(Me(329))}}}return gr(s,gs()),s.callbackNode===r?z2.bind(null,s):null}function Qp(s,t){var r=Ql;return s.current.memoizedState.isDehydrated&&(yi(s,t).flags|=256),s=cx(s,t),s!==2&&(t=xr,xr=r,t!==null&&Yp(t)),s}function Yp(s){xr===null?xr=s:xr.push.apply(xr,s)}function DE(s){for(var t=s;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var i=r[a],l=i.getSnapshot;i=i.value;try{if(!aa(l(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yn(s,t){for(t&=~Rf,t&=~am,s.suspendedLanes|=t,s.pingedLanes&=~t,s=s.expirationTimes;0<t;){var r=31-sa(t),a=1<<r;s[r]=-1,t&=~a}}function vv(s){if(Lt&6)throw Error(Me(327));Po();var t=qu(s,0);if(!(t&1))return gr(s,gs()),null;var r=cx(s,t);if(s.tag!==0&&r===2){var a=jp(s);a!==0&&(t=a,r=Qp(s,a))}if(r===1)throw r=Pc,yi(s,0),yn(s,t),gr(s,gs()),r;if(r===6)throw Error(Me(345));return s.finishedWork=s.current.alternate,s.finishedLanes=t,li(s,xr,La),gr(s,gs()),null}function Lf(s,t){var r=Lt;Lt|=1;try{return s(t)}finally{Lt=r,Lt===0&&(Oo=gs()+500,em&&Jn())}}function Si(s){kn!==null&&kn.tag===0&&!(Lt&6)&&Po();var t=Lt;Lt|=1;var r=Br.transition,a=Ft;try{if(Br.transition=null,Ft=1,s)return s()}finally{Ft=a,Br.transition=r,Lt=t,!(Lt&6)&&Jn()}}function Of(){wr=mo.current,Zt(mo)}function yi(s,t){s.finishedWork=null,s.finishedLanes=0;var r=s.timeoutHandle;if(r!==-1&&(s.timeoutHandle=-1,lE(r)),bs!==null)for(r=bs.return;r!==null;){var a=r;switch(gf(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Yu();break;case 3:Mo(),Zt(pr),Zt(Zs),Pf();break;case 5:If(a);break;case 4:Mo();break;case 13:Zt(as);break;case 19:Zt(as);break;case 10:jf(a.type._context);break;case 22:case 23:Of()}r=r.return}if(Ts=s,bs=s=Rn(s.current,null),zs=wr=t,ws=0,Pc=null,Rf=am=Pi=0,xr=Ql=null,xi!==null){for(t=0;t<xi.length;t++)if(r=xi[t],a=r.interleaved,a!==null){r.interleaved=null;var i=a.next,l=r.pending;if(l!==null){var o=l.next;l.next=i,a.next=o}r.pending=a}xi=null}return s}function B2(s,t){do{var r=bs;try{if(vf(),yu.current=nx,ax){for(var a=is.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}ax=!1}if(Ii=0,Ss=Ns=is=null,Gl=!1,wc=0,Af.current=null,r===null||r.return===null){ws=1,Pc=t,bs=null;break}e:{var l=s,o=r.return,c=r,d=t;if(t=zs,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var x=d,f=c,j=f.tag;if(!(f.mode&1)&&(j===0||j===11||j===15)){var w=f.alternate;w?(f.updateQueue=w.updateQueue,f.memoizedState=w.memoizedState,f.lanes=w.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=ov(o);if(S!==null){S.flags&=-257,lv(S,o,c,l,t),S.mode&1&&iv(l,x,t),t=S,d=x;var g=t.updateQueue;if(g===null){var V=new Set;V.add(d),t.updateQueue=V}else g.add(d);break e}else{if(!(t&1)){iv(l,x,t),Vf();break e}d=Error(Me(426))}}else if(es&&c.mode&1){var E=ov(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),lv(E,o,c,l,t),yf(Lo(d,c));break e}}l=d=Lo(d,c),ws!==4&&(ws=2),Ql===null?Ql=[l]:Ql.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var T=w2(l,d,t);ev(l,T);break e;case 1:c=d;var M=l.type,L=l.stateNode;if(!(l.flags&128)&&(typeof M.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Dn===null||!Dn.has(L)))){l.flags|=65536,t&=-t,l.lanes|=t;var H=k2(l,c,t);ev(l,H);break e}}l=l.return}while(l!==null)}$2(r)}catch(q){t=q,bs===r&&r!==null&&(bs=r=r.return);continue}break}while(1)}function F2(){var s=ix.current;return ix.current=nx,s===null?nx:s}function Vf(){(ws===0||ws===3||ws===2)&&(ws=4),Ts===null||!(Pi&268435455)&&!(am&268435455)||yn(Ts,zs)}function cx(s,t){var r=Lt;Lt|=2;var a=F2();(Ts!==s||zs!==t)&&(La=null,yi(s,t));do try{AE();break}catch(i){B2(s,i)}while(1);if(vf(),Lt=r,ix.current=a,bs!==null)throw Error(Me(261));return Ts=null,zs=0,ws}function AE(){for(;bs!==null;)U2(bs)}function RE(){for(;bs!==null&&!nS();)U2(bs)}function U2(s){var t=q2(s.alternate,s,wr);s.memoizedProps=s.pendingProps,t===null?$2(s):bs=t,Af.current=null}function $2(s){var t=s;do{var r=t.alternate;if(s=t.return,t.flags&32768){if(r=SE(r,t),r!==null){r.flags&=32767,bs=r;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{ws=6,bs=null;return}}else if(r=PE(r,t,wr),r!==null){bs=r;return}if(t=t.sibling,t!==null){bs=t;return}bs=t=s}while(t!==null);ws===0&&(ws=5)}function li(s,t,r){var a=Ft,i=Br.transition;try{Br.transition=null,Ft=1,ME(s,t,r,a)}finally{Br.transition=i,Ft=a}return null}function ME(s,t,r,a){do Po();while(kn!==null);if(Lt&6)throw Error(Me(327));r=s.finishedWork;var i=s.finishedLanes;if(r===null)return null;if(s.finishedWork=null,s.finishedLanes=0,r===s.current)throw Error(Me(177));s.callbackNode=null,s.callbackPriority=0;var l=r.lanes|r.childLanes;if(pS(s,l),s===Ts&&(bs=Ts=null,zs=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Xd||(Xd=!0,H2(Wu,function(){return Po(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=Br.transition,Br.transition=null;var o=Ft;Ft=1;var c=Lt;Lt|=4,Af.current=null,CE(s,r),O2(r,s),tE(Sp),Hu=!!Pp,Sp=Pp=null,s.current=r,TE(r),iS(),Lt=c,Ft=o,Br.transition=l}else s.current=r;if(Xd&&(Xd=!1,kn=s,lx=i),l=s.pendingLanes,l===0&&(Dn=null),cS(r.stateNode),gr(s,gs()),t!==null)for(a=s.onRecoverableError,r=0;r<t.length;r++)i=t[r],a(i.value,{componentStack:i.stack,digest:i.digest});if(ox)throw ox=!1,s=Gp,Gp=null,s;return lx&1&&s.tag!==0&&Po(),l=s.pendingLanes,l&1?s===Kp?Yl++:(Yl=0,Kp=s):Yl=0,Jn(),null}function Po(){if(kn!==null){var s=w5(lx),t=Br.transition,r=Ft;try{if(Br.transition=null,Ft=16>s?16:s,kn===null)var a=!1;else{if(s=kn,kn=null,lx=0,Lt&6)throw Error(Me(331));var i=Lt;for(Lt|=4,Je=s.current;Je!==null;){var l=Je,o=l.child;if(Je.flags&16){var c=l.deletions;if(c!==null){for(var d=0;d<c.length;d++){var x=c[d];for(Je=x;Je!==null;){var f=Je;switch(f.tag){case 0:case 11:case 15:Kl(8,f,l)}var j=f.child;if(j!==null)j.return=f,Je=j;else for(;Je!==null;){f=Je;var w=f.sibling,S=f.return;if(R2(f),f===x){Je=null;break}if(w!==null){w.return=S,Je=w;break}Je=S}}}var g=l.alternate;if(g!==null){var V=g.child;if(V!==null){g.child=null;do{var E=V.sibling;V.sibling=null,V=E}while(V!==null)}}Je=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,Je=o;else e:for(;Je!==null;){if(l=Je,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Kl(9,l,l.return)}var T=l.sibling;if(T!==null){T.return=l.return,Je=T;break e}Je=l.return}}var M=s.current;for(Je=M;Je!==null;){o=Je;var L=o.child;if(o.subtreeFlags&2064&&L!==null)L.return=o,Je=L;else e:for(o=M;Je!==null;){if(c=Je,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:rm(9,c)}}catch(q){hs(c,c.return,q)}if(c===o){Je=null;break e}var H=c.sibling;if(H!==null){H.return=c.return,Je=H;break e}Je=c.return}}if(Lt=i,Jn(),fa&&typeof fa.onPostCommitFiberRoot=="function")try{fa.onPostCommitFiberRoot(Qx,s)}catch{}a=!0}return a}finally{Ft=r,Br.transition=t}}return!1}function jv(s,t,r){t=Lo(r,t),t=w2(s,t,1),s=_n(s,t,1),t=or(),s!==null&&(Kc(s,1,t),gr(s,t))}function hs(s,t,r){if(s.tag===3)jv(s,s,r);else for(;t!==null;){if(t.tag===3){jv(t,s,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Dn===null||!Dn.has(a))){s=Lo(r,s),s=k2(t,s,1),t=_n(t,s,1),s=or(),t!==null&&(Kc(t,1,s),gr(t,s));break}}t=t.return}}function LE(s,t,r){var a=s.pingCache;a!==null&&a.delete(t),t=or(),s.pingedLanes|=s.suspendedLanes&r,Ts===s&&(zs&r)===r&&(ws===4||ws===3&&(zs&130023424)===zs&&500>gs()-Mf?yi(s,0):Rf|=r),gr(s,t)}function W2(s,t){t===0&&(s.mode&1?(t=Fd,Fd<<=1,!(Fd&130023424)&&(Fd=4194304)):t=1);var r=or();s=Ga(s,t),s!==null&&(Kc(s,t,r),gr(s,r))}function OE(s){var t=s.memoizedState,r=0;t!==null&&(r=t.retryLane),W2(s,r)}function VE(s,t){var r=0;switch(s.tag){case 13:var a=s.stateNode,i=s.memoizedState;i!==null&&(r=i.retryLane);break;case 19:a=s.stateNode;break;default:throw Error(Me(314))}a!==null&&a.delete(t),W2(s,r)}var q2;q2=function(s,t,r){if(s!==null)if(s.memoizedProps!==t.pendingProps||pr.current)mr=!0;else{if(!(s.lanes&r)&&!(t.flags&128))return mr=!1,IE(s,t,r);mr=!!(s.flags&131072)}else mr=!1,es&&t.flags&1048576&&Q5(t,Zu,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;vu(s,t),s=t.pendingProps;var i=Do(t,Zs.current);Io(t,r),i=Ef(null,t,a,s,i,r);var l=Cf();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,fr(a)?(l=!0,Xu(t)):l=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wf(t),i.updater=sm,t.stateNode=i,i._reactInternals=t,Lp(t,a,s,r),t=zp(null,t,a,!0,l,r)):(t.tag=0,es&&l&&ff(t),ar(null,t,i,r),t=t.child),t;case 16:a=t.elementType;e:{switch(vu(s,t),s=t.pendingProps,i=a._init,a=i(a._payload),t.type=a,i=t.tag=BE(a),s=Yr(a,s),i){case 0:t=Vp(null,t,a,s,r);break e;case 1:t=uv(null,t,a,s,r);break e;case 11:t=cv(null,t,a,s,r);break e;case 14:t=dv(null,t,a,Yr(a.type,s),r);break e}throw Error(Me(306,a,""))}return t;case 0:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Yr(a,i),Vp(s,t,a,i,r);case 1:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Yr(a,i),uv(s,t,a,i,r);case 3:e:{if(E2(t),s===null)throw Error(Me(387));a=t.pendingProps,l=t.memoizedState,i=l.element,t2(s,t),sx(t,a,null,r);var o=t.memoizedState;if(a=o.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){i=Lo(Error(Me(423)),t),t=xv(s,t,a,r,i);break e}else if(a!==i){i=Lo(Error(Me(424)),t),t=xv(s,t,a,r,i);break e}else for(Ir=Tn(t.stateNode.containerInfo.firstChild),Sr=t,es=!0,Jr=null,r=Z5(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ao(),a===i){t=Ka(s,t,r);break e}ar(s,t,a,r)}t=t.child}return t;case 5:return s2(t),s===null&&Ap(t),a=t.type,i=t.pendingProps,l=s!==null?s.memoizedProps:null,o=i.children,Ep(a,i)?o=null:l!==null&&Ep(a,l)&&(t.flags|=32),S2(s,t),ar(s,t,o,r),t.child;case 6:return s===null&&Ap(t),null;case 13:return C2(s,t,r);case 4:return kf(t,t.stateNode.containerInfo),a=t.pendingProps,s===null?t.child=Ro(t,null,a,r):ar(s,t,a,r),t.child;case 11:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Yr(a,i),cv(s,t,a,i,r);case 7:return ar(s,t,t.pendingProps,r),t.child;case 8:return ar(s,t,t.pendingProps.children,r),t.child;case 12:return ar(s,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,i=t.pendingProps,l=t.memoizedProps,o=i.value,Kt(ex,a._currentValue),a._currentValue=o,l!==null)if(aa(l.value,o)){if(l.children===i.children&&!pr.current){t=Ka(s,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var d=c.firstContext;d!==null;){if(d.context===a){if(l.tag===1){d=Ua(-1,r&-r),d.tag=2;var x=l.updateQueue;if(x!==null){x=x.shared;var f=x.pending;f===null?d.next=d:(d.next=f.next,f.next=d),x.pending=d}}l.lanes|=r,d=l.alternate,d!==null&&(d.lanes|=r),Rp(l.return,r,t),c.lanes|=r;break}d=d.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(Me(341));o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Rp(o,r,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}ar(s,t,i.children,r),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps.children,Io(t,r),i=Ur(i),a=a(i),t.flags|=1,ar(s,t,a,r),t.child;case 14:return a=t.type,i=Yr(a,t.pendingProps),i=Yr(a.type,i),dv(s,t,a,i,r);case 15:return I2(s,t,t.type,t.pendingProps,r);case 17:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Yr(a,i),vu(s,t),t.tag=1,fr(a)?(s=!0,Xu(t)):s=!1,Io(t,r),N2(t,a,i),Lp(t,a,i,r),zp(null,t,a,!0,s,r);case 19:return T2(s,t,r);case 22:return P2(s,t,r)}throw Error(Me(156,t.tag))};function H2(s,t){return b5(s,t)}function zE(s,t,r,a){this.tag=s,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(s,t,r,a){return new zE(s,t,r,a)}function zf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function BE(s){if(typeof s=="function")return zf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===rf)return 11;if(s===af)return 14}return 2}function Rn(s,t){var r=s.alternate;return r===null?(r=zr(s.tag,t,s.key,s.mode),r.elementType=s.elementType,r.type=s.type,r.stateNode=s.stateNode,r.alternate=s,s.alternate=r):(r.pendingProps=t,r.type=s.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=s.flags&14680064,r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,t=s.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=s.sibling,r.index=s.index,r.ref=s.ref,r}function wu(s,t,r,a,i,l){var o=2;if(a=s,typeof s=="function")zf(s)&&(o=1);else if(typeof s=="string")o=5;else e:switch(s){case so:return bi(r.children,i,l,t);case sf:o=8,i|=8;break;case ip:return s=zr(12,r,t,i|2),s.elementType=ip,s.lanes=l,s;case op:return s=zr(13,r,t,i),s.elementType=op,s.lanes=l,s;case lp:return s=zr(19,r,t,i),s.elementType=lp,s.lanes=l,s;case s5:return nm(r,i,l,t);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case e5:o=10;break e;case t5:o=9;break e;case rf:o=11;break e;case af:o=14;break e;case pn:o=16,a=null;break e}throw Error(Me(130,s==null?s:typeof s,""))}return t=zr(o,r,t,i),t.elementType=s,t.type=a,t.lanes=l,t}function bi(s,t,r,a){return s=zr(7,s,a,t),s.lanes=r,s}function nm(s,t,r,a){return s=zr(22,s,a,t),s.elementType=s5,s.lanes=r,s.stateNode={isHidden:!1},s}function kh(s,t,r){return s=zr(6,s,null,t),s.lanes=r,s}function Ih(s,t,r){return t=zr(4,s.children!==null?s.children:[],s.key,t),t.lanes=r,t.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},t}function FE(s,t,r,a,i){this.tag=t,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nh(0),this.expirationTimes=nh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nh(0),this.identifierPrefix=a,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bf(s,t,r,a,i,l,o,c,d){return s=new FE(s,t,r,c,d),t===1?(t=1,l===!0&&(t|=8)):t=0,l=zr(3,null,null,t),s.current=l,l.stateNode=s,l.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},wf(l),s}function UE(s,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:to,key:a==null?null:""+a,children:s,containerInfo:t,implementation:r}}function G2(s){if(!s)return Bn;s=s._reactInternals;e:{if(Li(s)!==s||s.tag!==1)throw Error(Me(170));var t=s;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(fr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Me(171))}if(s.tag===1){var r=s.type;if(fr(r))return G5(s,r,t)}return t}function K2(s,t,r,a,i,l,o,c,d){return s=Bf(r,a,!0,s,i,l,o,c,d),s.context=G2(null),r=s.current,a=or(),i=An(r),l=Ua(a,i),l.callback=t??null,_n(r,l,i),s.current.lanes=i,Kc(s,i,a),gr(s,a),s}function im(s,t,r,a){var i=t.current,l=or(),o=An(i);return r=G2(r),t.context===null?t.context=r:t.pendingContext=r,t=Ua(l,o),t.payload={element:s},a=a===void 0?null:a,a!==null&&(t.callback=a),s=_n(i,t,o),s!==null&&(ra(s,i,o,l),gu(s,i,o)),o}function dx(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Nv(s,t){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var r=s.retryLane;s.retryLane=r!==0&&r<t?r:t}}function Ff(s,t){Nv(s,t),(s=s.alternate)&&Nv(s,t)}function $E(){return null}var Q2=typeof reportError=="function"?reportError:function(s){console.error(s)};function Uf(s){this._internalRoot=s}om.prototype.render=Uf.prototype.render=function(s){var t=this._internalRoot;if(t===null)throw Error(Me(409));im(s,t,null,null)};om.prototype.unmount=Uf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var t=s.containerInfo;Si(function(){im(null,s,null,null)}),t[Ha]=null}};function om(s){this._internalRoot=s}om.prototype.unstable_scheduleHydration=function(s){if(s){var t=P5();s={blockedOn:null,target:s,priority:t};for(var r=0;r<gn.length&&t!==0&&t<gn[r].priority;r++);gn.splice(r,0,s),r===0&&E5(s)}};function $f(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function lm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function wv(){}function WE(s,t,r,a,i){if(i){if(typeof a=="function"){var l=a;a=function(){var x=dx(o);l.call(x)}}var o=K2(t,a,s,0,null,!1,!1,"",wv);return s._reactRootContainer=o,s[Ha]=o.current,yc(s.nodeType===8?s.parentNode:s),Si(),o}for(;i=s.lastChild;)s.removeChild(i);if(typeof a=="function"){var c=a;a=function(){var x=dx(d);c.call(x)}}var d=Bf(s,0,!1,null,null,!1,!1,"",wv);return s._reactRootContainer=d,s[Ha]=d.current,yc(s.nodeType===8?s.parentNode:s),Si(function(){im(t,d,r,a)}),d}function cm(s,t,r,a,i){var l=r._reactRootContainer;if(l){var o=l;if(typeof i=="function"){var c=i;i=function(){var d=dx(o);c.call(d)}}im(t,o,s,i)}else o=WE(r,t,s,i,a);return dx(o)}k5=function(s){switch(s.tag){case 3:var t=s.stateNode;if(t.current.memoizedState.isDehydrated){var r=Al(t.pendingLanes);r!==0&&(lf(t,r|1),gr(t,gs()),!(Lt&6)&&(Oo=gs()+500,Jn()))}break;case 13:Si(function(){var a=Ga(s,1);if(a!==null){var i=or();ra(a,s,1,i)}}),Ff(s,1)}};cf=function(s){if(s.tag===13){var t=Ga(s,134217728);if(t!==null){var r=or();ra(t,s,134217728,r)}Ff(s,134217728)}};I5=function(s){if(s.tag===13){var t=An(s),r=Ga(s,t);if(r!==null){var a=or();ra(r,s,t,a)}Ff(s,t)}};P5=function(){return Ft};S5=function(s,t){var r=Ft;try{return Ft=s,t()}finally{Ft=r}};yp=function(s,t,r){switch(t){case"input":if(up(s,r),t=r.name,r.type==="radio"&&t!=null){for(r=s;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==s&&a.form===s.form){var i=Zx(a);if(!i)throw Error(Me(90));a5(a),up(a,i)}}}break;case"textarea":i5(s,r);break;case"select":t=r.value,t!=null&&jo(s,!!r.multiple,t,!1)}};m5=Lf;h5=Si;var qE={usingClientEntryPoint:!1,Events:[Yc,io,Zx,u5,x5,Lf]},Sl={findFiberByHostInstance:ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HE={bundleType:Sl.bundleType,version:Sl.version,rendererPackageName:Sl.rendererPackageName,rendererConfig:Sl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=g5(s),s===null?null:s.stateNode},findFiberByHostInstance:Sl.findFiberByHostInstance||$E,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jd.isDisabled&&Jd.supportsFiber)try{Qx=Jd.inject(HE),fa=Jd}catch{}}_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qE;_r.createPortal=function(s,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$f(t))throw Error(Me(200));return UE(s,t,null,r)};_r.createRoot=function(s,t){if(!$f(s))throw Error(Me(299));var r=!1,a="",i=Q2;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Bf(s,1,!1,null,null,r,!1,a,i),s[Ha]=t.current,yc(s.nodeType===8?s.parentNode:s),new Uf(t)};_r.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var t=s._reactInternals;if(t===void 0)throw typeof s.render=="function"?Error(Me(188)):(s=Object.keys(s).join(","),Error(Me(268,s)));return s=g5(t),s=s===null?null:s.stateNode,s};_r.flushSync=function(s){return Si(s)};_r.hydrate=function(s,t,r){if(!lm(t))throw Error(Me(200));return cm(null,s,t,!0,r)};_r.hydrateRoot=function(s,t,r){if(!$f(s))throw Error(Me(405));var a=r!=null&&r.hydratedSources||null,i=!1,l="",o=Q2;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=K2(t,null,s,1,r??null,i,!1,l,o),s[Ha]=t.current,yc(s),a)for(s=0;s<a.length;s++)r=a[s],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new om(t)};_r.render=function(s,t,r){if(!lm(t))throw Error(Me(200));return cm(null,s,t,!1,r)};_r.unmountComponentAtNode=function(s){if(!lm(s))throw Error(Me(40));return s._reactRootContainer?(Si(function(){cm(null,null,s,!1,function(){s._reactRootContainer=null,s[Ha]=null})}),!0):!1};_r.unstable_batchedUpdates=Lf;_r.unstable_renderSubtreeIntoContainer=function(s,t,r,a){if(!lm(r))throw Error(Me(200));if(s==null||s._reactInternals===void 0)throw Error(Me(38));return cm(s,t,r,!1,a)};_r.version="18.3.1-next-f1338f8080-20240426";function Y2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y2)}catch(s){console.error(s)}}Y2(),Yw.exports=_r;var GE=Yw.exports,kv=GE;ap.createRoot=kv.createRoot,ap.hydrateRoot=kv.hydrateRoot;const KE="modulepreload",QE=function(s){return"/"+s},Iv={},YE=function(t,r,a){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(l=>{if(l=QE(l),l in Iv)return;Iv[l]=!0;const o=l.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(!!a)for(let f=i.length-1;f>=0;f--){const j=i[f];if(j.href===l&&(!o||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${c}`))return;const x=document.createElement("link");if(x.rel=o?"stylesheet":KE,o||(x.as="script",x.crossOrigin=""),x.href=l,document.head.appendChild(x),o)return new Promise((f,j)=>{x.addEventListener("load",f),x.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t()).catch(l=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l})};var Wf={};Object.defineProperty(Wf,"__esModule",{value:!0});Wf.parse=rC;Wf.serialize=aC;const XE=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,JE=/^[\u0021-\u003A\u003C-\u007E]*$/,ZE=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,eC=/^[\u0020-\u003A\u003D-\u007E]*$/,tC=Object.prototype.toString,sC=(()=>{const s=function(){};return s.prototype=Object.create(null),s})();function rC(s,t){const r=new sC,a=s.length;if(a<2)return r;const i=(t==null?void 0:t.decode)||nC;let l=0;do{const o=s.indexOf("=",l);if(o===-1)break;const c=s.indexOf(";",l),d=c===-1?a:c;if(o>d){l=s.lastIndexOf(";",o-1)+1;continue}const x=Pv(s,l,o),f=Sv(s,o,x),j=s.slice(x,f);if(r[j]===void 0){let w=Pv(s,o+1,d),S=Sv(s,d,w);const g=i(s.slice(w,S));r[j]=g}l=d+1}while(l<a);return r}function Pv(s,t,r){do{const a=s.charCodeAt(t);if(a!==32&&a!==9)return t}while(++t<r);return r}function Sv(s,t,r){for(;t>r;){const a=s.charCodeAt(--t);if(a!==32&&a!==9)return t+1}return r}function aC(s,t,r){const a=(r==null?void 0:r.encode)||encodeURIComponent;if(!XE.test(s))throw new TypeError(`argument name is invalid: ${s}`);const i=a(t);if(!JE.test(i))throw new TypeError(`argument val is invalid: ${t}`);let l=s+"="+i;if(!r)return l;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);l+="; Max-Age="+r.maxAge}if(r.domain){if(!ZE.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);l+="; Domain="+r.domain}if(r.path){if(!eC.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);l+="; Path="+r.path}if(r.expires){if(!iC(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);l+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(l+="; HttpOnly"),r.secure&&(l+="; Secure"),r.partitioned&&(l+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return l}function nC(s){if(s.indexOf("%")===-1)return s;try{return decodeURIComponent(s)}catch{return s}}function iC(s){return tC.call(s)==="[object Date]"}var Ev="popstate";function oC(s={}){function t(a,i){let{pathname:l,search:o,hash:c}=a.location;return Xp("",{pathname:l,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){return typeof i=="string"?i:Sc(i)}return cC(t,r,null,s)}function os(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function Ia(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function lC(){return Math.random().toString(36).substring(2,10)}function Cv(s,t){return{usr:s.state,key:s.key,idx:t}}function Xp(s,t,r=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?Xo(t):t,state:r,key:t&&t.key||a||lC()}}function Sc({pathname:s="/",search:t="",hash:r=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function Xo(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substring(r),s=s.substring(0,r));let a=s.indexOf("?");a>=0&&(t.search=s.substring(a),s=s.substring(0,a)),s&&(t.pathname=s)}return t}function cC(s,t,r,a={}){let{window:i=document.defaultView,v5Compat:l=!1}=a,o=i.history,c="POP",d=null,x=f();x==null&&(x=0,o.replaceState({...o.state,idx:x},""));function f(){return(o.state||{idx:null}).idx}function j(){c="POP";let E=f(),T=E==null?null:E-x;x=E,d&&d({action:c,location:V.location,delta:T})}function w(E,T){c="PUSH";let M=Xp(V.location,E,T);r&&r(M,E),x=f()+1;let L=Cv(M,x),H=V.createHref(M);try{o.pushState(L,"",H)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(H)}l&&d&&d({action:c,location:V.location,delta:1})}function S(E,T){c="REPLACE";let M=Xp(V.location,E,T);r&&r(M,E),x=f();let L=Cv(M,x),H=V.createHref(M);o.replaceState(L,"",H),l&&d&&d({action:c,location:V.location,delta:0})}function g(E){let T=i.location.origin!=="null"?i.location.origin:i.location.href,M=typeof E=="string"?E:Sc(E);return M=M.replace(/ $/,"%20"),os(T,`No window.location.(origin|href) available to create URL for href: ${M}`),new URL(M,T)}let V={get action(){return c},get location(){return s(i,o)},listen(E){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Ev,j),d=E,()=>{i.removeEventListener(Ev,j),d=null}},createHref(E){return t(i,E)},createURL:g,encodeLocation(E){let T=g(E);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:w,replace:S,go(E){return o.go(E)}};return V}function X2(s,t,r="/"){return dC(s,t,r,!1)}function dC(s,t,r,a){let i=typeof t=="string"?Xo(t):t,l=Qa(i.pathname||"/",r);if(l==null)return null;let o=J2(s);uC(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let x=NC(l);c=vC(o[d],x,a)}return c}function J2(s,t=[],r=[],a=""){let i=(l,o,c)=>{let d={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};d.relativePath.startsWith("/")&&(os(d.relativePath.startsWith(a),`Absolute route path "${d.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(a.length));let x=$a([a,d.relativePath]),f=r.concat(d);l.children&&l.children.length>0&&(os(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),J2(l.children,t,f,x)),!(l.path==null&&!l.index)&&t.push({path:x,score:yC(x,l.index),routesMeta:f})};return s.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))i(l,o);else for(let d of Z2(l.path))i(l,o,d)}),t}function Z2(s){let t=s.split("/");if(t.length===0)return[];let[r,...a]=t,i=r.endsWith("?"),l=r.replace(/\?$/,"");if(a.length===0)return i?[l,""]:[l];let o=Z2(a.join("/")),c=[];return c.push(...o.map(d=>d===""?l:[l,d].join("/"))),i&&c.push(...o),c.map(d=>s.startsWith("/")&&d===""?"/":d)}function uC(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:bC(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var xC=/^:[\w-]+$/,mC=3,hC=2,pC=1,fC=10,gC=-2,Tv=s=>s==="*";function yC(s,t){let r=s.split("/"),a=r.length;return r.some(Tv)&&(a+=gC),t&&(a+=hC),r.filter(i=>!Tv(i)).reduce((i,l)=>i+(xC.test(l)?mC:l===""?pC:fC),a)}function bC(s,t){return s.length===t.length&&s.slice(0,-1).every((a,i)=>a===t[i])?s[s.length-1]-t[t.length-1]:0}function vC(s,t,r=!1){let{routesMeta:a}=s,i={},l="/",o=[];for(let c=0;c<a.length;++c){let d=a[c],x=c===a.length-1,f=l==="/"?t:t.slice(l.length)||"/",j=ux({path:d.relativePath,caseSensitive:d.caseSensitive,end:x},f),w=d.route;if(!j&&x&&r&&!a[a.length-1].route.index&&(j=ux({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!j)return null;Object.assign(i,j.params),o.push({params:i,pathname:$a([l,j.pathname]),pathnameBase:PC($a([l,j.pathnameBase])),route:w}),j.pathnameBase!=="/"&&(l=$a([l,j.pathnameBase]))}return o}function ux(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,a]=jC(s.path,s.caseSensitive,s.end),i=t.match(r);if(!i)return null;let l=i[0],o=l.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:a.reduce((x,{paramName:f,isOptional:j},w)=>{if(f==="*"){let g=c[w]||"";o=l.slice(0,l.length-g.length).replace(/(.)\/+$/,"$1")}const S=c[w];return j&&!S?x[f]=void 0:x[f]=(S||"").replace(/%2F/g,"/"),x},{}),pathname:l,pathnameBase:o,pattern:s}}function jC(s,t=!1,r=!0){Ia(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],i="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(a.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),i+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":s!==""&&s!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),a]}function NC(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ia(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function Qa(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=s.charAt(r);return a&&a!=="/"?null:s.slice(r)||"/"}function wC(s,t="/"){let{pathname:r,search:a="",hash:i=""}=typeof s=="string"?Xo(s):s;return{pathname:r?r.startsWith("/")?r:kC(r,t):t,search:SC(a),hash:EC(i)}}function kC(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Ph(s,t,r,a){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IC(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function e4(s){let t=IC(s);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function t4(s,t,r,a=!1){let i;typeof s=="string"?i=Xo(s):(i={...s},os(!i.pathname||!i.pathname.includes("?"),Ph("?","pathname","search",i)),os(!i.pathname||!i.pathname.includes("#"),Ph("#","pathname","hash",i)),os(!i.search||!i.search.includes("#"),Ph("#","search","hash",i)));let l=s===""||i.pathname==="",o=l?"/":i.pathname,c;if(o==null)c=r;else{let j=t.length-1;if(!a&&o.startsWith("..")){let w=o.split("/");for(;w[0]==="..";)w.shift(),j-=1;i.pathname=w.join("/")}c=j>=0?t[j]:"/"}let d=wC(i,c),x=o&&o!=="/"&&o.endsWith("/"),f=(l||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(x||f)&&(d.pathname+="/"),d}var $a=s=>s.join("/").replace(/\/\/+/g,"/"),PC=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),SC=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,EC=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function CC(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var s4=["POST","PUT","PATCH","DELETE"];new Set(s4);var TC=["GET",...s4];new Set(TC);var Jo=b.createContext(null);Jo.displayName="DataRouter";var dm=b.createContext(null);dm.displayName="DataRouterState";var r4=b.createContext({isTransitioning:!1});r4.displayName="ViewTransition";var _C=b.createContext(new Map);_C.displayName="Fetchers";var DC=b.createContext(null);DC.displayName="Await";var Ca=b.createContext(null);Ca.displayName="Navigation";var Jc=b.createContext(null);Jc.displayName="Location";var rn=b.createContext({outlet:null,matches:[],isDataRoute:!1});rn.displayName="Route";var qf=b.createContext(null);qf.displayName="RouteError";function AC(s,{relative:t}={}){os(Zc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=b.useContext(Ca),{hash:i,pathname:l,search:o}=ed(s,{relative:t}),c=l;return r!=="/"&&(c=l==="/"?r:$a([r,l])),a.createHref({pathname:c,search:o,hash:i})}function Zc(){return b.useContext(Jc)!=null}function Oi(){return os(Zc(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(Jc).location}var a4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function n4(s){b.useContext(Ca).static||b.useLayoutEffect(s)}function Nt(){let{isDataRoute:s}=b.useContext(rn);return s?HC():RC()}function RC(){os(Zc(),"useNavigate() may be used only in the context of a <Router> component.");let s=b.useContext(Jo),{basename:t,navigator:r}=b.useContext(Ca),{matches:a}=b.useContext(rn),{pathname:i}=Oi(),l=JSON.stringify(e4(a)),o=b.useRef(!1);return n4(()=>{o.current=!0}),b.useCallback((d,x={})=>{if(Ia(o.current,a4),!o.current)return;if(typeof d=="number"){r.go(d);return}let f=t4(d,JSON.parse(l),i,x.relative==="path");s==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:$a([t,f.pathname])),(x.replace?r.replace:r.push)(f,x.state,x)},[t,r,l,i,s])}b.createContext(null);function ed(s,{relative:t}={}){let{matches:r}=b.useContext(rn),{pathname:a}=Oi(),i=JSON.stringify(e4(r));return b.useMemo(()=>t4(s,JSON.parse(i),a,t==="path"),[s,i,a,t])}function MC(s,t){return i4(s,t)}function i4(s,t,r,a){var M;os(Zc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:l}=b.useContext(Ca),{matches:o}=b.useContext(rn),c=o[o.length-1],d=c?c.params:{},x=c?c.pathname:"/",f=c?c.pathnameBase:"/",j=c&&c.route;{let L=j&&j.path||"";o4(x,!j||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let w=Oi(),S;if(t){let L=typeof t=="string"?Xo(t):t;os(f==="/"||((M=L.pathname)==null?void 0:M.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${L.pathname}" was given in the \`location\` prop.`),S=L}else S=w;let g=S.pathname||"/",V=g;if(f!=="/"){let L=f.replace(/^\//,"").split("/");V="/"+g.replace(/^\//,"").split("/").slice(L.length).join("/")}let E=!l&&r&&r.matches&&r.matches.length>0?r.matches:X2(s,{pathname:V});Ia(j||E!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Ia(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=BC(E&&E.map(L=>Object.assign({},L,{params:Object.assign({},d,L.params),pathname:$a([f,i.encodeLocation?i.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?f:$a([f,i.encodeLocation?i.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),o,r,a);return t&&T?b.createElement(Jc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},T):T}function LC(){let s=qC(),t=CC(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",s),o=b.createElement(b.Fragment,null,b.createElement("p",null,"💿 Hey developer 👋"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:l},"ErrorBoundary")," or"," ",b.createElement("code",{style:l},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),r?b.createElement("pre",{style:i},r):null,o)}var OC=b.createElement(LC,null),VC=class extends b.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){console.error("React Router caught the following error during render",s,t)}render(){return this.state.error!==void 0?b.createElement(rn.Provider,{value:this.props.routeContext},b.createElement(qf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zC({routeContext:s,match:t,children:r}){let a=b.useContext(Jo);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(rn.Provider,{value:s},r)}function BC(s,t=[],r=null,a=null){if(s==null){if(!r)return null;if(r.errors)s=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let i=s,l=r==null?void 0:r.errors;if(l!=null){let d=i.findIndex(x=>x.route.id&&(l==null?void 0:l[x.route.id])!==void 0);os(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(r)for(let d=0;d<i.length;d++){let x=i[d];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(c=d),x.route.id){let{loaderData:f,errors:j}=r,w=x.route.loader&&!f.hasOwnProperty(x.route.id)&&(!j||j[x.route.id]===void 0);if(x.route.lazy||w){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,x,f)=>{let j,w=!1,S=null,g=null;r&&(j=l&&x.route.id?l[x.route.id]:void 0,S=x.route.errorElement||OC,o&&(c<0&&f===0?(o4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,g=null):c===f&&(w=!0,g=x.route.hydrateFallbackElement||null)));let V=t.concat(i.slice(0,f+1)),E=()=>{let T;return j?T=S:w?T=g:x.route.Component?T=b.createElement(x.route.Component,null):x.route.element?T=x.route.element:T=d,b.createElement(zC,{match:x,routeContext:{outlet:d,matches:V,isDataRoute:r!=null},children:T})};return r&&(x.route.ErrorBoundary||x.route.errorElement||f===0)?b.createElement(VC,{location:r.location,revalidation:r.revalidation,component:S,error:j,children:E(),routeContext:{outlet:null,matches:V,isDataRoute:!0}}):E()},null)}function Hf(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FC(s){let t=b.useContext(Jo);return os(t,Hf(s)),t}function UC(s){let t=b.useContext(dm);return os(t,Hf(s)),t}function $C(s){let t=b.useContext(rn);return os(t,Hf(s)),t}function Gf(s){let t=$C(s),r=t.matches[t.matches.length-1];return os(r.route.id,`${s} can only be used on routes that contain a unique "id"`),r.route.id}function WC(){return Gf("useRouteId")}function qC(){var a;let s=b.useContext(qf),t=UC("useRouteError"),r=Gf("useRouteError");return s!==void 0?s:(a=t.errors)==null?void 0:a[r]}function HC(){let{router:s}=FC("useNavigate"),t=Gf("useNavigate"),r=b.useRef(!1);return n4(()=>{r.current=!0}),b.useCallback(async(i,l={})=>{Ia(r.current,a4),r.current&&(typeof i=="number"?s.navigate(i):await s.navigate(i,{fromRouteId:t,...l}))},[s,t])}var _v={};function o4(s,t,r){!t&&!_v[s]&&(_v[s]=!0,Ia(!1,r))}b.memo(GC);function GC({routes:s,future:t,state:r}){return i4(s,void 0,r,t)}function kt(s){os(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KC({basename:s="/",children:t=null,location:r,navigationType:a="POP",navigator:i,static:l=!1}){os(!Zc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=s.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:o,navigator:i,static:l,future:{}}),[o,i,l]);typeof r=="string"&&(r=Xo(r));let{pathname:d="/",search:x="",hash:f="",state:j=null,key:w="default"}=r,S=b.useMemo(()=>{let g=Qa(d,o);return g==null?null:{location:{pathname:g,search:x,hash:f,state:j,key:w},navigationType:a}},[o,d,x,f,j,w,a]);return Ia(S!=null,`<Router basename="${o}"> is not able to match the URL "${d}${x}${f}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:b.createElement(Ca.Provider,{value:c},b.createElement(Jc.Provider,{children:t,value:S}))}function QC({children:s,location:t}){return MC(Jp(s),t)}function Jp(s,t=[]){let r=[];return b.Children.forEach(s,(a,i)=>{if(!b.isValidElement(a))return;let l=[...t,i];if(a.type===b.Fragment){r.push.apply(r,Jp(a.props.children,l));return}os(a.type===kt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),os(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Jp(a.props.children,l)),r.push(o)}),r}var ku="get",Iu="application/x-www-form-urlencoded";function um(s){return s!=null&&typeof s.tagName=="string"}function YC(s){return um(s)&&s.tagName.toLowerCase()==="button"}function XC(s){return um(s)&&s.tagName.toLowerCase()==="form"}function JC(s){return um(s)&&s.tagName.toLowerCase()==="input"}function ZC(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function eT(s,t){return s.button===0&&(!t||t==="_self")&&!ZC(s)}var Zd=null;function tT(){if(Zd===null)try{new FormData(document.createElement("form"),0),Zd=!1}catch{Zd=!0}return Zd}var sT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sh(s){return s!=null&&!sT.has(s)?(Ia(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Iu}"`),null):s}function rT(s,t){let r,a,i,l,o;if(XC(s)){let c=s.getAttribute("action");a=c?Qa(c,t):null,r=s.getAttribute("method")||ku,i=Sh(s.getAttribute("enctype"))||Iu,l=new FormData(s)}else if(YC(s)||JC(s)&&(s.type==="submit"||s.type==="image")){let c=s.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=s.getAttribute("formaction")||c.getAttribute("action");if(a=d?Qa(d,t):null,r=s.getAttribute("formmethod")||c.getAttribute("method")||ku,i=Sh(s.getAttribute("formenctype"))||Sh(c.getAttribute("enctype"))||Iu,l=new FormData(c,s),!tT()){let{name:x,type:f,value:j}=s;if(f==="image"){let w=x?`${x}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else x&&l.append(x,j)}}else{if(um(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ku,a=null,i=Iu,o=s}return l&&i==="text/plain"&&(o=l,l=void 0),{action:a,method:r.toLowerCase(),encType:i,formData:l,body:o}}function Kf(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}async function aT(s,t){if(s.id in t)return t[s.id];try{let r=await YE(()=>import(s.module),[]);return t[s.id]=r,r}catch(r){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nT(s){return s!=null&&typeof s.page=="string"}function iT(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function oT(s,t,r){let a=await Promise.all(s.map(async i=>{let l=t.routes[i.route.id];if(l){let o=await aT(l,r);return o.links?o.links():[]}return[]}));return uT(a.flat(1).filter(iT).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Dv(s,t,r,a,i,l){let o=(d,x)=>r[x]?d.route.id!==r[x].route.id:!0,c=(d,x)=>{var f;return r[x].pathname!==d.pathname||((f=r[x].route.path)==null?void 0:f.endsWith("*"))&&r[x].params["*"]!==d.params["*"]};return l==="assets"?t.filter((d,x)=>o(d,x)||c(d,x)):l==="data"?t.filter((d,x)=>{var j;let f=a.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(o(d,x)||c(d,x))return!0;if(d.route.shouldRevalidate){let w=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((j=r[0])==null?void 0:j.params)||{},nextUrl:new URL(s,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function lT(s,t,{includeHydrateFallback:r}={}){return cT(s.map(a=>{let i=t.routes[a.route.id];if(!i)return[];let l=[i.module];return i.clientActionModule&&(l=l.concat(i.clientActionModule)),i.clientLoaderModule&&(l=l.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(l=l.concat(i.hydrateFallbackModule)),i.imports&&(l=l.concat(i.imports)),l}).flat(1))}function cT(s){return[...new Set(s)]}function dT(s){let t={},r=Object.keys(s).sort();for(let a of r)t[a]=s[a];return t}function uT(s,t){let r=new Set,a=new Set(t);return s.reduce((i,l)=>{if(t&&!nT(l)&&l.as==="script"&&l.href&&a.has(l.href))return i;let c=JSON.stringify(dT(l));return r.has(c)||(r.add(c),i.push({key:c,link:l})),i},[])}function xT(s,t){let r=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return r.pathname==="/"?r.pathname="_root.data":t&&Qa(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function l4(){let s=b.useContext(Jo);return Kf(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function mT(){let s=b.useContext(dm);return Kf(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Qf=b.createContext(void 0);Qf.displayName="FrameworkContext";function c4(){let s=b.useContext(Qf);return Kf(s,"You must render this element inside a <HydratedRouter> element"),s}function hT(s,t){let r=b.useContext(Qf),[a,i]=b.useState(!1),[l,o]=b.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:x,onMouseLeave:f,onTouchStart:j}=t,w=b.useRef(null);b.useEffect(()=>{if(s==="render"&&o(!0),s==="viewport"){let V=T=>{T.forEach(M=>{o(M.isIntersecting)})},E=new IntersectionObserver(V,{threshold:.5});return w.current&&E.observe(w.current),()=>{E.disconnect()}}},[s]),b.useEffect(()=>{if(a){let V=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(V)}}},[a]);let S=()=>{i(!0)},g=()=>{i(!1),o(!1)};return r?s!=="intent"?[l,w,{}]:[l,w,{onFocus:El(c,S),onBlur:El(d,g),onMouseEnter:El(x,S),onMouseLeave:El(f,g),onTouchStart:El(j,S)}]:[!1,w,{}]}function El(s,t){return r=>{s&&s(r),r.defaultPrevented||t(r)}}function pT({page:s,...t}){let{router:r}=l4(),a=b.useMemo(()=>X2(r.routes,s,r.basename),[r.routes,s,r.basename]);return a?b.createElement(gT,{page:s,matches:a,...t}):null}function fT(s){let{manifest:t,routeModules:r}=c4(),[a,i]=b.useState([]);return b.useEffect(()=>{let l=!1;return oT(s,t,r).then(o=>{l||i(o)}),()=>{l=!0}},[s,t,r]),a}function gT({page:s,matches:t,...r}){let a=Oi(),{manifest:i,routeModules:l}=c4(),{basename:o}=l4(),{loaderData:c,matches:d}=mT(),x=b.useMemo(()=>Dv(s,t,d,i,a,"data"),[s,t,d,i,a]),f=b.useMemo(()=>Dv(s,t,d,i,a,"assets"),[s,t,d,i,a]),j=b.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let g=new Set,V=!1;if(t.forEach(T=>{var L;let M=i.routes[T.route.id];!M||!M.hasLoader||(!x.some(H=>H.route.id===T.route.id)&&T.route.id in c&&((L=l[T.route.id])!=null&&L.shouldRevalidate)||M.hasClientLoader?V=!0:g.add(T.route.id))}),g.size===0)return[];let E=xT(s,o);return V&&g.size>0&&E.searchParams.set("_routes",t.filter(T=>g.has(T.route.id)).map(T=>T.route.id).join(",")),[E.pathname+E.search]},[o,c,a,i,x,t,s,l]),w=b.useMemo(()=>lT(f,i),[f,i]),S=fT(f);return b.createElement(b.Fragment,null,j.map(g=>b.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),w.map(g=>b.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),S.map(({key:g,link:V})=>b.createElement("link",{key:g,...V})))}function yT(...s){return t=>{s.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var d4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{d4&&(window.__reactRouterVersion="7.5.0")}catch{}function bT({basename:s,children:t,window:r}){let a=b.useRef();a.current==null&&(a.current=oC({window:r,v5Compat:!0}));let i=a.current,[l,o]=b.useState({action:i.action,location:i.location}),c=b.useCallback(d=>{b.startTransition(()=>o(d))},[o]);return b.useLayoutEffect(()=>i.listen(c),[i,c]),b.createElement(KC,{basename:s,children:t,location:l.location,navigationType:l.action,navigator:i})}var u4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,y=b.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:i,reloadDocument:l,replace:o,state:c,target:d,to:x,preventScrollReset:f,viewTransition:j,...w},S){let{basename:g}=b.useContext(Ca),V=typeof x=="string"&&u4.test(x),E,T=!1;if(typeof x=="string"&&V&&(E=x,d4))try{let U=new URL(window.location.href),F=x.startsWith("//")?new URL(U.protocol+x):new URL(x),J=Qa(F.pathname,g);F.origin===U.origin&&J!=null?x=J+F.search+F.hash:T=!0}catch{Ia(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=AC(x,{relative:i}),[L,H,q]=hT(a,w),Q=wT(x,{replace:o,state:c,target:d,preventScrollReset:f,relative:i,viewTransition:j});function O(U){t&&t(U),U.defaultPrevented||Q(U)}let u=b.createElement("a",{...w,...q,href:E||M,onClick:T||l?t:O,ref:yT(S,H),target:d,"data-discover":!V&&r==="render"?"true":void 0});return L&&!V?b.createElement(b.Fragment,null,u,b.createElement(pT,{page:M})):u});y.displayName="Link";var vT=b.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:i=!1,style:l,to:o,viewTransition:c,children:d,...x},f){let j=ed(o,{relative:x.relative}),w=Oi(),S=b.useContext(dm),{navigator:g,basename:V}=b.useContext(Ca),E=S!=null&&ET(j)&&c===!0,T=g.encodeLocation?g.encodeLocation(j).pathname:j.pathname,M=w.pathname,L=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;r||(M=M.toLowerCase(),L=L?L.toLowerCase():null,T=T.toLowerCase()),L&&V&&(L=Qa(L,V)||L);const H=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let q=M===T||!i&&M.startsWith(T)&&M.charAt(H)==="/",Q=L!=null&&(L===T||!i&&L.startsWith(T)&&L.charAt(T.length)==="/"),O={isActive:q,isPending:Q,isTransitioning:E},u=q?t:void 0,U;typeof a=="function"?U=a(O):U=[a,q?"active":null,Q?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let F=typeof l=="function"?l(O):l;return b.createElement(y,{...x,"aria-current":u,className:U,ref:f,style:F,to:o,viewTransition:c},typeof d=="function"?d(O):d)});vT.displayName="NavLink";var jT=b.forwardRef(({discover:s="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:i,state:l,method:o=ku,action:c,onSubmit:d,relative:x,preventScrollReset:f,viewTransition:j,...w},S)=>{let g=PT(),V=ST(c,{relative:x}),E=o.toLowerCase()==="get"?"get":"post",T=typeof c=="string"&&u4.test(c),M=L=>{if(d&&d(L),L.defaultPrevented)return;L.preventDefault();let H=L.nativeEvent.submitter,q=(H==null?void 0:H.getAttribute("formmethod"))||o;g(H||L.currentTarget,{fetcherKey:t,method:q,navigate:r,replace:i,state:l,relative:x,preventScrollReset:f,viewTransition:j})};return b.createElement("form",{ref:S,method:E,action:V,onSubmit:a?d:M,...w,"data-discover":!T&&s==="render"?"true":void 0})});jT.displayName="Form";function NT(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function x4(s){let t=b.useContext(Jo);return os(t,NT(s)),t}function wT(s,{target:t,replace:r,state:a,preventScrollReset:i,relative:l,viewTransition:o}={}){let c=Nt(),d=Oi(),x=ed(s,{relative:l});return b.useCallback(f=>{if(eT(f,t)){f.preventDefault();let j=r!==void 0?r:Sc(d)===Sc(x);c(s,{replace:j,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,x,r,a,t,s,i,l,o])}var kT=0,IT=()=>`__${String(++kT)}__`;function PT(){let{router:s}=x4("useSubmit"),{basename:t}=b.useContext(Ca),r=WC();return b.useCallback(async(a,i={})=>{let{action:l,method:o,encType:c,formData:d,body:x}=rT(a,t);if(i.navigate===!1){let f=i.fetcherKey||IT();await s.fetch(f,r,i.action||l,{preventScrollReset:i.preventScrollReset,formData:d,body:x,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await s.navigate(i.action||l,{preventScrollReset:i.preventScrollReset,formData:d,body:x,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[s,t,r])}function ST(s,{relative:t}={}){let{basename:r}=b.useContext(Ca),a=b.useContext(rn);os(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),l={...ed(s||".",{relative:t})},o=Oi();if(s==null){l.search=o.search;let c=new URLSearchParams(l.search),d=c.getAll("index");if(d.some(f=>f==="")){c.delete("index"),d.filter(j=>j).forEach(j=>c.append("index",j));let f=c.toString();l.search=f?`?${f}`:""}}return(!s||s===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:$a([r,l.pathname])),Sc(l)}function ET(s,t={}){let r=b.useContext(r4);os(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=x4("useViewTransitionState"),i=ed(s,{relative:t.relative});if(!r.isTransitioning)return!1;let l=Qa(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=Qa(r.nextLocation.pathname,a)||r.nextLocation.pathname;return ux(i.pathname,o)!=null||ux(i.pathname,l)!=null}new TextEncoder;var m4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Av=Pn.createContext&&Pn.createContext(m4),CT=["attr","size","title"];function TT(s,t){if(s==null)return{};var r=_T(s,t),a,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(i=0;i<l.length;i++)a=l[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function _T(s,t){if(s==null)return{};var r={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;r[a]=s[a]}return r}function xx(){return xx=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},xx.apply(this,arguments)}function Rv(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),r.push.apply(r,a)}return r}function mx(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rv(Object(r),!0).forEach(function(a){DT(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Rv(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function DT(s,t,r){return t=AT(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function AT(s){var t=RT(s,"string");return typeof t=="symbol"?t:t+""}function RT(s,t){if(typeof s!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function h4(s){return s&&s.map((t,r)=>Pn.createElement(t.tag,mx({key:r},t.attr),h4(t.child)))}function tt(s){return t=>Pn.createElement(MT,xx({attr:mx({},s.attr)},t),h4(s.child))}function MT(s){var t=r=>{var{attr:a,size:i,title:l}=s,o=TT(s,CT),c=i||r.size||"1em",d;return r.className&&(d=r.className),s.className&&(d=(d?d+" ":"")+s.className),Pn.createElement("svg",xx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,o,{className:d,style:mx(mx({color:s.color||r.color},r.style),s.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),l&&Pn.createElement("title",null,l),s.children)};return Av!==void 0?Pn.createElement(Av.Consumer,null,r=>t(r)):t(m4)}function LT(s){return tt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(s)}function Zp(s){return tt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(s)}function Mv(s){return tt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M150.94 192h33.73c11.01 0 18.61-10.83 14.86-21.18-4.93-13.58-7.55-27.98-7.55-42.82s2.62-29.24 7.55-42.82C203.29 74.83 195.68 64 184.67 64h-33.73c-7.01 0-13.46 4.49-15.41 11.23C130.64 92.21 128 109.88 128 128c0 18.12 2.64 35.79 7.54 52.76 1.94 6.74 8.39 11.24 15.4 11.24zM89.92 23.34C95.56 12.72 87.97 0 75.96 0H40.63c-6.27 0-12.14 3.59-14.74 9.31C9.4 45.54 0 85.65 0 128c0 24.75 3.12 68.33 26.69 118.86 2.62 5.63 8.42 9.14 14.61 9.14h34.84c12.02 0 19.61-12.74 13.95-23.37-49.78-93.32-16.71-178.15-.17-209.29zM614.06 9.29C611.46 3.58 605.6 0 599.33 0h-35.42c-11.98 0-19.66 12.66-14.02 23.25 18.27 34.29 48.42 119.42.28 209.23-5.72 10.68 1.8 23.52 13.91 23.52h35.23c6.27 0 12.13-3.58 14.73-9.29C630.57 210.48 640 170.36 640 128s-9.42-82.48-25.94-118.71zM489.06 64h-33.73c-11.01 0-18.61 10.83-14.86 21.18 4.93 13.58 7.55 27.98 7.55 42.82s-2.62 29.24-7.55 42.82c-3.76 10.35 3.85 21.18 14.86 21.18h33.73c7.02 0 13.46-4.49 15.41-11.24 4.9-16.97 7.53-34.64 7.53-52.76 0-18.12-2.64-35.79-7.54-52.76-1.94-6.75-8.39-11.24-15.4-11.24zm-116.3 100.12c7.05-10.29 11.2-22.71 11.2-36.12 0-35.35-28.63-64-63.96-64-35.32 0-63.96 28.65-63.96 64 0 13.41 4.15 25.83 11.2 36.12l-130.5 313.41c-3.4 8.15.46 17.52 8.61 20.92l29.51 12.31c8.15 3.4 17.52-.46 20.91-8.61L244.96 384h150.07l49.2 118.15c3.4 8.16 12.76 12.01 20.91 8.61l29.51-12.31c8.15-3.4 12-12.77 8.61-20.92l-130.5-313.41zM271.62 320L320 203.81 368.38 320h-96.76z"},child:[]}]})(s)}function OT(s){return tt({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(s)}function VT(s){return tt({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(s)}function Lv(s){return tt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64V160h160v256zm224 0H288V160h160v256z"},child:[]}]})(s)}function hx(s){return tt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(s)}function e0(s){return tt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM160 368c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16V240c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v128zm96 0c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16V144c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v224zm96 0c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16v-64c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v64z"},child:[]}]})(s)}function t0(s){return tt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(s)}function px(s){return tt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(s)}function Ov(s){return tt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(s)}function fx(s){return tt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(s)}function Vv(s){return tt({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(s)}function p4(s){return tt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(s)}const zT=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=function(s){const t=[];let r=0;for(let a=0;a<s.length;a++){let i=s.charCodeAt(a);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=i&63|128):(i&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(i=65536+((i&1023)<<10)+(s.charCodeAt(++a)&1023),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=i&63|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=i&63|128)}return t},BT=function(s){const t=[];let r=0,a=0;for(;r<s.length;){const i=s[r++];if(i<128)t[a++]=String.fromCharCode(i);else if(i>191&&i<224){const l=s[r++];t[a++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=s[r++],o=s[r++],c=s[r++],d=((i&7)<<18|(l&63)<<12|(o&63)<<6|c&63)-65536;t[a++]=String.fromCharCode(55296+(d>>10)),t[a++]=String.fromCharCode(56320+(d&1023))}else{const l=s[r++],o=s[r++];t[a++]=String.fromCharCode((i&15)<<12|(l&63)<<6|o&63)}}return t.join("")},g4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let i=0;i<s.length;i+=3){const l=s[i],o=i+1<s.length,c=o?s[i+1]:0,d=i+2<s.length,x=d?s[i+2]:0,f=l>>2,j=(l&3)<<4|c>>4;let w=(c&15)<<2|x>>6,S=x&63;d||(S=64,o||(w=64)),a.push(r[f],r[j],r[w],r[S])}return a.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(f4(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):BT(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let i=0;i<s.length;){const l=r[s.charAt(i++)],c=i<s.length?r[s.charAt(i)]:0;++i;const x=i<s.length?r[s.charAt(i)]:64;++i;const j=i<s.length?r[s.charAt(i)]:64;if(++i,l==null||c==null||x==null||j==null)throw new FT;const w=l<<2|c>>4;if(a.push(w),x!==64){const S=c<<4&240|x>>2;if(a.push(S),j!==64){const g=x<<6&192|j;a.push(g)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class FT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UT=function(s){const t=f4(s);return g4.encodeByteArray(t,!0)},gx=function(s){return UT(s).replace(/\./g,"")},y4=function(s){try{return g4.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=()=>$T().__FIREBASE_DEFAULTS__,qT=()=>{if(typeof process>"u"||typeof process.env>"u")return;const s={}.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},HT=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&y4(s[1]);return t&&JSON.parse(t)},xm=()=>{try{return zT()||WT()||qT()||HT()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},b4=s=>{var t,r;return(r=(t=xm())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[s]},v4=s=>{const t=b4(s);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),a]:[t.substring(0,r),a]},j4=()=>{var s;return(s=xm())===null||s===void 0?void 0:s.config},N4=s=>{var t;return(t=xm())===null||t===void 0?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,a)=>{r?this.reject(r):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},a=t||"demo-project",i=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s),c="";return[gx(JSON.stringify(r)),gx(JSON.stringify(o)),c].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(er())}function QT(){var s;const t=(s=xm())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function k4(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function XT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JT(){const s=er();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function ZT(){return!QT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I4(){try{return typeof indexedDB=="object"}catch{return!1}}function P4(){return new Promise((s,t)=>{try{let r=!0;const a="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(a);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(a),s(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var l;t(((l=i.error)===null||l===void 0?void 0:l.message)||"")}}catch(r){t(r)}})}function e_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="FirebaseError";class qr extends Error{constructor(t,r,a){super(r),this.code=t,this.customData=a,this.name=t_,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vi.prototype.create)}}class Vi{constructor(t,r,a){this.service=t,this.serviceName=r,this.errors=a}create(t,...r){const a=r[0]||{},i=`${this.service}/${t}`,l=this.errors[t],o=l?s_(l,a):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new qr(i,c,a)}}function s_(s,t){return s.replace(r_,(r,a)=>{const i=t[a];return i!=null?String(i):`<${a}?>`})}const r_=/\{\$([^}]+)}/g;function a_(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Fn(s,t){if(s===t)return!0;const r=Object.keys(s),a=Object.keys(t);for(const i of r){if(!a.includes(i))return!1;const l=s[i],o=t[i];if(zv(l)&&zv(o)){if(!Fn(l,o))return!1}else if(l!==o)return!1}for(const i of a)if(!r.includes(i))return!1;return!0}function zv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(s){const t=[];for(const[r,a]of Object.entries(s))Array.isArray(a)?a.forEach(i=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function Ml(s){const t={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[i,l]=a.split("=");t[decodeURIComponent(i)]=decodeURIComponent(l)}}),t}function Ll(s){const t=s.indexOf("?");if(!t)return"";const r=s.indexOf("#",t);return s.substring(t,r>0?r:void 0)}function n_(s,t){const r=new i_(s,t);return r.subscribe.bind(r)}class i_{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,a){let i;if(t===void 0&&r===void 0&&a===void 0)throw new Error("Missing Observer.");o_(t,["next","error","complete"])?i=t:i={next:t,error:r,complete:a},i.next===void 0&&(i.next=Eh),i.error===void 0&&(i.error=Eh),i.complete===void 0&&(i.complete=Eh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function o_(s,t){if(typeof s!="object"||s===null)return!1;for(const r of t)if(r in s&&typeof s[r]=="function")return!0;return!1}function Eh(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=1e3,c_=2,d_=4*60*60*1e3,u_=.5;function Bv(s,t=l_,r=c_){const a=t*Math.pow(r,s),i=Math.round(u_*a*(Math.random()-.5)*2);return Math.min(d_,a+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(s){return s&&s._delegate?s._delegate:s}class Wr{constructor(t,r,a){this.name=t,this.instanceFactory=r,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const a=new GT;if(this.instancesDeferred.set(r,a),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&a.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const a=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(h_(t))try{this.getOrInitializeService({instanceIdentifier:ci})}catch{}for(const[r,a]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const l=this.getOrInitializeService({instanceIdentifier:i});a.resolve(l)}catch{}}}}clearInstance(t=ci){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ci){return this.instances.has(t)}getOptions(t=ci){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:a,options:r});for(const[l,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(l);a===c&&o.resolve(i)}return i}onInit(t,r){var a;const i=this.normalizeInstanceIdentifier(r),l=(a=this.onInitCallbacks.get(i))!==null&&a!==void 0?a:new Set;l.add(t),this.onInitCallbacks.set(i,l);const o=this.instances.get(i);return o&&t(o,i),()=>{l.delete(t)}}invokeOnInitCallbacks(t,r){const a=this.onInitCallbacks.get(r);if(a)for(const i of a)try{i(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:m_(t),options:r}),this.instances.set(t,a),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=ci){return this.component?this.component.multipleInstances?t:ci:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function m_(s){return s===ci?void 0:s}function h_(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new x_(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Et||(Et={}));const f_={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},g_=Et.INFO,y_={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},b_=(s,t,...r)=>{if(t<s.logLevel)return;const a=new Date().toISOString(),i=y_[t];if(i)console[i](`[${a}]  ${s.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class mm{constructor(t){this.name=t,this._logLevel=g_,this._logHandler=b_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Et))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?f_[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...t),this._logHandler(this,Et.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...t),this._logHandler(this,Et.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Et.INFO,...t),this._logHandler(this,Et.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Et.WARN,...t),this._logHandler(this,Et.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...t),this._logHandler(this,Et.ERROR,...t)}}const v_=(s,t)=>t.some(r=>s instanceof r);let Fv,Uv;function j_(){return Fv||(Fv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function N_(){return Uv||(Uv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const S4=new WeakMap,s0=new WeakMap,E4=new WeakMap,Ch=new WeakMap,Yf=new WeakMap;function w_(s){const t=new Promise((r,a)=>{const i=()=>{s.removeEventListener("success",l),s.removeEventListener("error",o)},l=()=>{r(Mn(s.result)),i()},o=()=>{a(s.error),i()};s.addEventListener("success",l),s.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&S4.set(r,s)}).catch(()=>{}),Yf.set(t,s),t}function k_(s){if(s0.has(s))return;const t=new Promise((r,a)=>{const i=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",o),s.removeEventListener("abort",o)},l=()=>{r(),i()},o=()=>{a(s.error||new DOMException("AbortError","AbortError")),i()};s.addEventListener("complete",l),s.addEventListener("error",o),s.addEventListener("abort",o)});s0.set(s,t)}let r0={get(s,t,r){if(s instanceof IDBTransaction){if(t==="done")return s0.get(s);if(t==="objectStoreNames")return s.objectStoreNames||E4.get(s);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Mn(s[t])},set(s,t,r){return s[t]=r,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function I_(s){r0=s(r0)}function P_(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const a=s.call(Th(this),t,...r);return E4.set(a,t.sort?t.sort():[t]),Mn(a)}:N_().includes(s)?function(...t){return s.apply(Th(this),t),Mn(S4.get(this))}:function(...t){return Mn(s.apply(Th(this),t))}}function S_(s){return typeof s=="function"?P_(s):(s instanceof IDBTransaction&&k_(s),v_(s,j_())?new Proxy(s,r0):s)}function Mn(s){if(s instanceof IDBRequest)return w_(s);if(Ch.has(s))return Ch.get(s);const t=S_(s);return t!==s&&(Ch.set(s,t),Yf.set(t,s)),t}const Th=s=>Yf.get(s);function C4(s,t,{blocked:r,upgrade:a,blocking:i,terminated:l}={}){const o=indexedDB.open(s,t),c=Mn(o);return a&&o.addEventListener("upgradeneeded",d=>{a(Mn(o.result),d.oldVersion,d.newVersion,Mn(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{l&&d.addEventListener("close",()=>l()),i&&d.addEventListener("versionchange",x=>i(x.oldVersion,x.newVersion,x))}).catch(()=>{}),c}const E_=["get","getKey","getAll","getAllKeys","count"],C_=["put","add","delete","clear"],_h=new Map;function $v(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(_h.get(t))return _h.get(t);const r=t.replace(/FromIndex$/,""),a=t!==r,i=C_.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!(i||E_.includes(r)))return;const l=async function(o,...c){const d=this.transaction(o,i?"readwrite":"readonly");let x=d.store;return a&&(x=x.index(c.shift())),(await Promise.all([x[r](...c),i&&d.done]))[0]};return _h.set(t,l),l}I_(s=>({...s,get:(t,r,a)=>$v(t,r)||s.get(t,r,a),has:(t,r)=>!!$v(t,r)||s.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(__(r)){const a=r.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(r=>r).join(" ")}}function __(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const a0="@firebase/app",Wv="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=new mm("@firebase/app"),D_="@firebase/app-compat",A_="@firebase/analytics-compat",R_="@firebase/analytics",M_="@firebase/app-check-compat",L_="@firebase/app-check",O_="@firebase/auth",V_="@firebase/auth-compat",z_="@firebase/database",B_="@firebase/data-connect",F_="@firebase/database-compat",U_="@firebase/functions",$_="@firebase/functions-compat",W_="@firebase/installations",q_="@firebase/installations-compat",H_="@firebase/messaging",G_="@firebase/messaging-compat",K_="@firebase/performance",Q_="@firebase/performance-compat",Y_="@firebase/remote-config",X_="@firebase/remote-config-compat",J_="@firebase/storage",Z_="@firebase/storage-compat",eD="@firebase/firestore",tD="@firebase/vertexai",sD="@firebase/firestore-compat",rD="firebase",aD="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="[DEFAULT]",nD={[a0]:"fire-core",[D_]:"fire-core-compat",[R_]:"fire-analytics",[A_]:"fire-analytics-compat",[L_]:"fire-app-check",[M_]:"fire-app-check-compat",[O_]:"fire-auth",[V_]:"fire-auth-compat",[z_]:"fire-rtdb",[B_]:"fire-data-connect",[F_]:"fire-rtdb-compat",[U_]:"fire-fn",[$_]:"fire-fn-compat",[W_]:"fire-iid",[q_]:"fire-iid-compat",[H_]:"fire-fcm",[G_]:"fire-fcm-compat",[K_]:"fire-perf",[Q_]:"fire-perf-compat",[Y_]:"fire-rc",[X_]:"fire-rc-compat",[J_]:"fire-gcs",[Z_]:"fire-gcs-compat",[eD]:"fire-fst",[sD]:"fire-fst-compat",[tD]:"fire-vertex","fire-js":"fire-js",[rD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=new Map,iD=new Map,i0=new Map;function qv(s,t){try{s.container.addComponent(t)}catch(r){Ya.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,r)}}function na(s){const t=s.name;if(i0.has(t))return Ya.debug(`There were multiple attempts to register component ${t}.`),!1;i0.set(t,s);for(const r of yx.values())qv(r,s);for(const r of iD.values())qv(r,s);return!0}function Zn(s,t){const r=s.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),s.container.getProvider(t)}function kr(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ln=new Vi("app","Firebase",oD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(t,r,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=aD;function T4(s,t={}){let r=s;typeof t!="object"&&(t={name:t});const a=Object.assign({name:n0,automaticDataCollectionEnabled:!1},t),i=a.name;if(typeof i!="string"||!i)throw Ln.create("bad-app-name",{appName:String(i)});if(r||(r=j4()),!r)throw Ln.create("no-options");const l=yx.get(i);if(l){if(Fn(r,l.options)&&Fn(a,l.config))return l;throw Ln.create("duplicate-app",{appName:i})}const o=new p_(i);for(const d of i0.values())o.addComponent(d);const c=new lD(r,a,o);return yx.set(i,c),c}function hm(s=n0){const t=yx.get(s);if(!t&&s===n0&&j4())return T4();if(!t)throw Ln.create("no-app",{appName:s});return t}function yr(s,t,r){var a;let i=(a=nD[s])!==null&&a!==void 0?a:s;r&&(i+=`-${r}`);const l=i.match(/\s|\//),o=t.match(/\s|\//);if(l||o){const c=[`Unable to register library "${i}" with version "${t}":`];l&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ya.warn(c.join(" "));return}na(new Wr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="firebase-heartbeat-database",dD=1,Ec="firebase-heartbeat-store";let Dh=null;function _4(){return Dh||(Dh=C4(cD,dD,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Ec)}catch(r){console.warn(r)}}}}).catch(s=>{throw Ln.create("idb-open",{originalErrorMessage:s.message})})),Dh}async function uD(s){try{const r=(await _4()).transaction(Ec),a=await r.objectStore(Ec).get(D4(s));return await r.done,a}catch(t){if(t instanceof qr)Ya.warn(t.message);else{const r=Ln.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ya.warn(r.message)}}}async function Hv(s,t){try{const a=(await _4()).transaction(Ec,"readwrite");await a.objectStore(Ec).put(t,D4(s)),await a.done}catch(r){if(r instanceof qr)Ya.warn(r.message);else{const a=Ln.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ya.warn(a.message)}}}function D4(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=1024,mD=30;class hD{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new fD(r),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Gv();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(o=>o.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:i}),this._heartbeatsCache.heartbeats.length>mD){const o=gD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Ya.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Gv(),{heartbeatsToSend:a,unsentEntries:i}=pD(this._heartbeatsCache.heartbeats),l=gx(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(r){return Ya.warn(r),""}}}function Gv(){return new Date().toISOString().substring(0,10)}function pD(s,t=xD){const r=[];let a=s.slice();for(const i of s){const l=r.find(o=>o.agent===i.agent);if(l){if(l.dates.push(i.date),Kv(r)>t){l.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),Kv(r)>t){r.pop();break}a=a.slice(1)}return{heartbeatsToSend:r,unsentEntries:a}}class fD{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return I4()?P4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await uD(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hv(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hv(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Kv(s){return gx(JSON.stringify({version:2,heartbeats:s})).length}function gD(s){if(s.length===0)return-1;let t=0,r=s[0].date;for(let a=1;a<s.length;a++)s[a].date<r&&(r=s[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(s){na(new Wr("platform-logger",t=>new T_(t),"PRIVATE")),na(new Wr("heartbeat",t=>new hD(t),"PRIVATE")),yr(a0,Wv,s),yr(a0,Wv,"esm2017"),yr("fire-js","")}yD("");var Qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var On,A4;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,u){function U(){}U.prototype=u.prototype,O.D=u.prototype,O.prototype=new U,O.prototype.constructor=O,O.C=function(F,J,D){for(var $=Array(arguments.length-2),je=2;je<arguments.length;je++)$[je-2]=arguments[je];return u.prototype[J].apply(F,$)}}function r(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,r),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,u,U){U||(U=0);var F=Array(16);if(typeof u=="string")for(var J=0;16>J;++J)F[J]=u.charCodeAt(U++)|u.charCodeAt(U++)<<8|u.charCodeAt(U++)<<16|u.charCodeAt(U++)<<24;else for(J=0;16>J;++J)F[J]=u[U++]|u[U++]<<8|u[U++]<<16|u[U++]<<24;u=O.g[0],U=O.g[1],J=O.g[2];var D=O.g[3],$=u+(D^U&(J^D))+F[0]+3614090360&4294967295;u=U+($<<7&4294967295|$>>>25),$=D+(J^u&(U^J))+F[1]+3905402710&4294967295,D=u+($<<12&4294967295|$>>>20),$=J+(U^D&(u^U))+F[2]+606105819&4294967295,J=D+($<<17&4294967295|$>>>15),$=U+(u^J&(D^u))+F[3]+3250441966&4294967295,U=J+($<<22&4294967295|$>>>10),$=u+(D^U&(J^D))+F[4]+4118548399&4294967295,u=U+($<<7&4294967295|$>>>25),$=D+(J^u&(U^J))+F[5]+1200080426&4294967295,D=u+($<<12&4294967295|$>>>20),$=J+(U^D&(u^U))+F[6]+2821735955&4294967295,J=D+($<<17&4294967295|$>>>15),$=U+(u^J&(D^u))+F[7]+4249261313&4294967295,U=J+($<<22&4294967295|$>>>10),$=u+(D^U&(J^D))+F[8]+1770035416&4294967295,u=U+($<<7&4294967295|$>>>25),$=D+(J^u&(U^J))+F[9]+2336552879&4294967295,D=u+($<<12&4294967295|$>>>20),$=J+(U^D&(u^U))+F[10]+4294925233&4294967295,J=D+($<<17&4294967295|$>>>15),$=U+(u^J&(D^u))+F[11]+2304563134&4294967295,U=J+($<<22&4294967295|$>>>10),$=u+(D^U&(J^D))+F[12]+1804603682&4294967295,u=U+($<<7&4294967295|$>>>25),$=D+(J^u&(U^J))+F[13]+4254626195&4294967295,D=u+($<<12&4294967295|$>>>20),$=J+(U^D&(u^U))+F[14]+2792965006&4294967295,J=D+($<<17&4294967295|$>>>15),$=U+(u^J&(D^u))+F[15]+1236535329&4294967295,U=J+($<<22&4294967295|$>>>10),$=u+(J^D&(U^J))+F[1]+4129170786&4294967295,u=U+($<<5&4294967295|$>>>27),$=D+(U^J&(u^U))+F[6]+3225465664&4294967295,D=u+($<<9&4294967295|$>>>23),$=J+(u^U&(D^u))+F[11]+643717713&4294967295,J=D+($<<14&4294967295|$>>>18),$=U+(D^u&(J^D))+F[0]+3921069994&4294967295,U=J+($<<20&4294967295|$>>>12),$=u+(J^D&(U^J))+F[5]+3593408605&4294967295,u=U+($<<5&4294967295|$>>>27),$=D+(U^J&(u^U))+F[10]+38016083&4294967295,D=u+($<<9&4294967295|$>>>23),$=J+(u^U&(D^u))+F[15]+3634488961&4294967295,J=D+($<<14&4294967295|$>>>18),$=U+(D^u&(J^D))+F[4]+3889429448&4294967295,U=J+($<<20&4294967295|$>>>12),$=u+(J^D&(U^J))+F[9]+568446438&4294967295,u=U+($<<5&4294967295|$>>>27),$=D+(U^J&(u^U))+F[14]+3275163606&4294967295,D=u+($<<9&4294967295|$>>>23),$=J+(u^U&(D^u))+F[3]+4107603335&4294967295,J=D+($<<14&4294967295|$>>>18),$=U+(D^u&(J^D))+F[8]+1163531501&4294967295,U=J+($<<20&4294967295|$>>>12),$=u+(J^D&(U^J))+F[13]+2850285829&4294967295,u=U+($<<5&4294967295|$>>>27),$=D+(U^J&(u^U))+F[2]+4243563512&4294967295,D=u+($<<9&4294967295|$>>>23),$=J+(u^U&(D^u))+F[7]+1735328473&4294967295,J=D+($<<14&4294967295|$>>>18),$=U+(D^u&(J^D))+F[12]+2368359562&4294967295,U=J+($<<20&4294967295|$>>>12),$=u+(U^J^D)+F[5]+4294588738&4294967295,u=U+($<<4&4294967295|$>>>28),$=D+(u^U^J)+F[8]+2272392833&4294967295,D=u+($<<11&4294967295|$>>>21),$=J+(D^u^U)+F[11]+1839030562&4294967295,J=D+($<<16&4294967295|$>>>16),$=U+(J^D^u)+F[14]+4259657740&4294967295,U=J+($<<23&4294967295|$>>>9),$=u+(U^J^D)+F[1]+2763975236&4294967295,u=U+($<<4&4294967295|$>>>28),$=D+(u^U^J)+F[4]+1272893353&4294967295,D=u+($<<11&4294967295|$>>>21),$=J+(D^u^U)+F[7]+4139469664&4294967295,J=D+($<<16&4294967295|$>>>16),$=U+(J^D^u)+F[10]+3200236656&4294967295,U=J+($<<23&4294967295|$>>>9),$=u+(U^J^D)+F[13]+681279174&4294967295,u=U+($<<4&4294967295|$>>>28),$=D+(u^U^J)+F[0]+3936430074&4294967295,D=u+($<<11&4294967295|$>>>21),$=J+(D^u^U)+F[3]+3572445317&4294967295,J=D+($<<16&4294967295|$>>>16),$=U+(J^D^u)+F[6]+76029189&4294967295,U=J+($<<23&4294967295|$>>>9),$=u+(U^J^D)+F[9]+3654602809&4294967295,u=U+($<<4&4294967295|$>>>28),$=D+(u^U^J)+F[12]+3873151461&4294967295,D=u+($<<11&4294967295|$>>>21),$=J+(D^u^U)+F[15]+530742520&4294967295,J=D+($<<16&4294967295|$>>>16),$=U+(J^D^u)+F[2]+3299628645&4294967295,U=J+($<<23&4294967295|$>>>9),$=u+(J^(U|~D))+F[0]+4096336452&4294967295,u=U+($<<6&4294967295|$>>>26),$=D+(U^(u|~J))+F[7]+1126891415&4294967295,D=u+($<<10&4294967295|$>>>22),$=J+(u^(D|~U))+F[14]+2878612391&4294967295,J=D+($<<15&4294967295|$>>>17),$=U+(D^(J|~u))+F[5]+4237533241&4294967295,U=J+($<<21&4294967295|$>>>11),$=u+(J^(U|~D))+F[12]+1700485571&4294967295,u=U+($<<6&4294967295|$>>>26),$=D+(U^(u|~J))+F[3]+2399980690&4294967295,D=u+($<<10&4294967295|$>>>22),$=J+(u^(D|~U))+F[10]+4293915773&4294967295,J=D+($<<15&4294967295|$>>>17),$=U+(D^(J|~u))+F[1]+2240044497&4294967295,U=J+($<<21&4294967295|$>>>11),$=u+(J^(U|~D))+F[8]+1873313359&4294967295,u=U+($<<6&4294967295|$>>>26),$=D+(U^(u|~J))+F[15]+4264355552&4294967295,D=u+($<<10&4294967295|$>>>22),$=J+(u^(D|~U))+F[6]+2734768916&4294967295,J=D+($<<15&4294967295|$>>>17),$=U+(D^(J|~u))+F[13]+1309151649&4294967295,U=J+($<<21&4294967295|$>>>11),$=u+(J^(U|~D))+F[4]+4149444226&4294967295,u=U+($<<6&4294967295|$>>>26),$=D+(U^(u|~J))+F[11]+3174756917&4294967295,D=u+($<<10&4294967295|$>>>22),$=J+(u^(D|~U))+F[2]+718787259&4294967295,J=D+($<<15&4294967295|$>>>17),$=U+(D^(J|~u))+F[9]+3951481745&4294967295,O.g[0]=O.g[0]+u&4294967295,O.g[1]=O.g[1]+(J+($<<21&4294967295|$>>>11))&4294967295,O.g[2]=O.g[2]+J&4294967295,O.g[3]=O.g[3]+D&4294967295}a.prototype.u=function(O,u){u===void 0&&(u=O.length);for(var U=u-this.blockSize,F=this.B,J=this.h,D=0;D<u;){if(J==0)for(;D<=U;)i(this,O,D),D+=this.blockSize;if(typeof O=="string"){for(;D<u;)if(F[J++]=O.charCodeAt(D++),J==this.blockSize){i(this,F),J=0;break}}else for(;D<u;)if(F[J++]=O[D++],J==this.blockSize){i(this,F),J=0;break}}this.h=J,this.o+=u},a.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var u=1;u<O.length-8;++u)O[u]=0;var U=8*this.o;for(u=O.length-8;u<O.length;++u)O[u]=U&255,U/=256;for(this.u(O),O=Array(16),u=U=0;4>u;++u)for(var F=0;32>F;F+=8)O[U++]=this.g[u]>>>F&255;return O};function l(O,u){var U=c;return Object.prototype.hasOwnProperty.call(U,O)?U[O]:U[O]=u(O)}function o(O,u){this.h=u;for(var U=[],F=!0,J=O.length-1;0<=J;J--){var D=O[J]|0;F&&D==u||(U[J]=D,F=!1)}this.g=U}var c={};function d(O){return-128<=O&&128>O?l(O,function(u){return new o([u|0],0>u?-1:0)}):new o([O|0],0>O?-1:0)}function x(O){if(isNaN(O)||!isFinite(O))return j;if(0>O)return E(x(-O));for(var u=[],U=1,F=0;O>=U;F++)u[F]=O/U|0,U*=4294967296;return new o(u,0)}function f(O,u){if(O.length==0)throw Error("number format error: empty string");if(u=u||10,2>u||36<u)throw Error("radix out of range: "+u);if(O.charAt(0)=="-")return E(f(O.substring(1),u));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var U=x(Math.pow(u,8)),F=j,J=0;J<O.length;J+=8){var D=Math.min(8,O.length-J),$=parseInt(O.substring(J,J+D),u);8>D?(D=x(Math.pow(u,D)),F=F.j(D).add(x($))):(F=F.j(U),F=F.add(x($)))}return F}var j=d(0),w=d(1),S=d(16777216);s=o.prototype,s.m=function(){if(V(this))return-E(this).m();for(var O=0,u=1,U=0;U<this.g.length;U++){var F=this.i(U);O+=(0<=F?F:4294967296+F)*u,u*=4294967296}return O},s.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(g(this))return"0";if(V(this))return"-"+E(this).toString(O);for(var u=x(Math.pow(O,6)),U=this,F="";;){var J=H(U,u).g;U=T(U,J.j(u));var D=((0<U.g.length?U.g[0]:U.h)>>>0).toString(O);if(U=J,g(U))return D+F;for(;6>D.length;)D="0"+D;F=D+F}},s.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function g(O){if(O.h!=0)return!1;for(var u=0;u<O.g.length;u++)if(O.g[u]!=0)return!1;return!0}function V(O){return O.h==-1}s.l=function(O){return O=T(this,O),V(O)?-1:g(O)?0:1};function E(O){for(var u=O.g.length,U=[],F=0;F<u;F++)U[F]=~O.g[F];return new o(U,~O.h).add(w)}s.abs=function(){return V(this)?E(this):this},s.add=function(O){for(var u=Math.max(this.g.length,O.g.length),U=[],F=0,J=0;J<=u;J++){var D=F+(this.i(J)&65535)+(O.i(J)&65535),$=(D>>>16)+(this.i(J)>>>16)+(O.i(J)>>>16);F=$>>>16,D&=65535,$&=65535,U[J]=$<<16|D}return new o(U,U[U.length-1]&-2147483648?-1:0)};function T(O,u){return O.add(E(u))}s.j=function(O){if(g(this)||g(O))return j;if(V(this))return V(O)?E(this).j(E(O)):E(E(this).j(O));if(V(O))return E(this.j(E(O)));if(0>this.l(S)&&0>O.l(S))return x(this.m()*O.m());for(var u=this.g.length+O.g.length,U=[],F=0;F<2*u;F++)U[F]=0;for(F=0;F<this.g.length;F++)for(var J=0;J<O.g.length;J++){var D=this.i(F)>>>16,$=this.i(F)&65535,je=O.i(J)>>>16,Ae=O.i(J)&65535;U[2*F+2*J]+=$*Ae,M(U,2*F+2*J),U[2*F+2*J+1]+=D*Ae,M(U,2*F+2*J+1),U[2*F+2*J+1]+=$*je,M(U,2*F+2*J+1),U[2*F+2*J+2]+=D*je,M(U,2*F+2*J+2)}for(F=0;F<u;F++)U[F]=U[2*F+1]<<16|U[2*F];for(F=u;F<2*u;F++)U[F]=0;return new o(U,0)};function M(O,u){for(;(O[u]&65535)!=O[u];)O[u+1]+=O[u]>>>16,O[u]&=65535,u++}function L(O,u){this.g=O,this.h=u}function H(O,u){if(g(u))throw Error("division by zero");if(g(O))return new L(j,j);if(V(O))return u=H(E(O),u),new L(E(u.g),E(u.h));if(V(u))return u=H(O,E(u)),new L(E(u.g),u.h);if(30<O.g.length){if(V(O)||V(u))throw Error("slowDivide_ only works with positive integers.");for(var U=w,F=u;0>=F.l(O);)U=q(U),F=q(F);var J=Q(U,1),D=Q(F,1);for(F=Q(F,2),U=Q(U,2);!g(F);){var $=D.add(F);0>=$.l(O)&&(J=J.add(U),D=$),F=Q(F,1),U=Q(U,1)}return u=T(O,J.j(u)),new L(J,u)}for(J=j;0<=O.l(u);){for(U=Math.max(1,Math.floor(O.m()/u.m())),F=Math.ceil(Math.log(U)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),D=x(U),$=D.j(u);V($)||0<$.l(O);)U-=F,D=x(U),$=D.j(u);g(D)&&(D=w),J=J.add(D),O=T(O,$)}return new L(J,O)}s.A=function(O){return H(this,O).h},s.and=function(O){for(var u=Math.max(this.g.length,O.g.length),U=[],F=0;F<u;F++)U[F]=this.i(F)&O.i(F);return new o(U,this.h&O.h)},s.or=function(O){for(var u=Math.max(this.g.length,O.g.length),U=[],F=0;F<u;F++)U[F]=this.i(F)|O.i(F);return new o(U,this.h|O.h)},s.xor=function(O){for(var u=Math.max(this.g.length,O.g.length),U=[],F=0;F<u;F++)U[F]=this.i(F)^O.i(F);return new o(U,this.h^O.h)};function q(O){for(var u=O.g.length+1,U=[],F=0;F<u;F++)U[F]=O.i(F)<<1|O.i(F-1)>>>31;return new o(U,O.h)}function Q(O,u){var U=u>>5;u%=32;for(var F=O.g.length-U,J=[],D=0;D<F;D++)J[D]=0<u?O.i(D+U)>>>u|O.i(D+U+1)<<32-u:O.i(D+U);return new o(J,O.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,A4=a,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=x,o.fromString=f,On=o}).apply(typeof Qv<"u"?Qv:typeof self<"u"?self:typeof window<"u"?window:{});var eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var R4,Ol,M4,Pu,o0,L4,O4,V4;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,P,R){return m==Array.prototype||m==Object.prototype||(m[P]=R.value),m};function r(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof eu=="object"&&eu];for(var P=0;P<m.length;++P){var R=m[P];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var a=r(this);function i(m,P){if(P)e:{var R=a;m=m.split(".");for(var K=0;K<m.length-1;K++){var de=m[K];if(!(de in R))break e;R=R[de]}m=m[m.length-1],K=R[m],P=P(K),P!=K&&P!=null&&t(R,m,{configurable:!0,writable:!0,value:P})}}function l(m,P){m instanceof String&&(m+="");var R=0,K=!1,de={next:function(){if(!K&&R<m.length){var ye=R++;return{value:P(ye,m[ye]),done:!1}}return K=!0,{done:!0,value:void 0}}};return de[Symbol.iterator]=function(){return de},de}i("Array.prototype.values",function(m){return m||function(){return l(this,function(P,R){return R})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function d(m){var P=typeof m;return P=P!="object"?P:m?Array.isArray(m)?"array":P:"null",P=="array"||P=="object"&&typeof m.length=="number"}function x(m){var P=typeof m;return P=="object"&&m!=null||P=="function"}function f(m,P,R){return m.call.apply(m.bind,arguments)}function j(m,P,R){if(!m)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var de=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(de,K),m.apply(P,de)}}return function(){return m.apply(P,arguments)}}function w(m,P,R){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:j,w.apply(null,arguments)}function S(m,P){var R=Array.prototype.slice.call(arguments,1);return function(){var K=R.slice();return K.push.apply(K,arguments),m.apply(this,K)}}function g(m,P){function R(){}R.prototype=P.prototype,m.aa=P.prototype,m.prototype=new R,m.prototype.constructor=m,m.Qb=function(K,de,ye){for(var $e=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)$e[Ht-2]=arguments[Ht];return P.prototype[de].apply(K,$e)}}function V(m){const P=m.length;if(0<P){const R=Array(P);for(let K=0;K<P;K++)R[K]=m[K];return R}return[]}function E(m,P){for(let R=1;R<arguments.length;R++){const K=arguments[R];if(d(K)){const de=m.length||0,ye=K.length||0;m.length=de+ye;for(let $e=0;$e<ye;$e++)m[de+$e]=K[$e]}else m.push(K)}}class T{constructor(P,R){this.i=P,this.j=R,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function M(m){return/^[\s\xa0]*$/.test(m)}function L(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function H(m){return H[" "](m),m}H[" "]=function(){};var q=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function Q(m,P,R){for(const K in m)P.call(R,m[K],K,m)}function O(m,P){for(const R in m)P.call(void 0,m[R],R,m)}function u(m){const P={};for(const R in m)P[R]=m[R];return P}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(m,P){let R,K;for(let de=1;de<arguments.length;de++){K=arguments[de];for(R in K)m[R]=K[R];for(let ye=0;ye<U.length;ye++)R=U[ye],Object.prototype.hasOwnProperty.call(K,R)&&(m[R]=K[R])}}function J(m){var P=1;m=m.split(":");const R=[];for(;0<P&&m.length;)R.push(m.shift()),P--;return m.length&&R.push(m.join(":")),R}function D(m){c.setTimeout(()=>{throw m},0)}function $(){var m=xe;let P=null;return m.g&&(P=m.g,m.g=m.g.next,m.g||(m.h=null),P.next=null),P}class je{constructor(){this.h=this.g=null}add(P,R){const K=Ae.get();K.set(P,R),this.h?this.h.next=K:this.g=K,this.h=K}}var Ae=new T(()=>new Re,m=>m.reset());class Re{constructor(){this.next=this.g=this.h=null}set(P,R){this.h=P,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,ue=!1,xe=new je,pe=()=>{const m=c.Promise.resolve(void 0);ge=()=>{m.then(Le)}};var Le=()=>{for(var m;m=$();){try{m.h.call(m.g)}catch(R){D(R)}var P=Ae;P.j(m),100>P.h&&(P.h++,m.next=P.g,P.g=m)}ue=!1};function De(){this.s=this.s,this.C=this.C}De.prototype.s=!1,De.prototype.ma=function(){this.s||(this.s=!0,this.N())},De.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function n(m,P){this.type=m,this.g=this.target=P,this.defaultPrevented=!1}n.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,P=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const R=()=>{};c.addEventListener("test",R,P),c.removeEventListener("test",R,P)}catch{}return m}();function h(m,P){if(n.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var R=this.type=m.type,K=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=P,P=m.relatedTarget){if(q){e:{try{H(P.nodeName);var de=!0;break e}catch{}de=!1}de||(P=null)}}else R=="mouseover"?P=m.fromElement:R=="mouseout"&&(P=m.toElement);this.relatedTarget=P,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:_[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&h.aa.h.call(this)}}g(h,n);var _={2:"touch",3:"pen",4:"mouse"};h.prototype.h=function(){h.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),ie=0;function k(m,P,R,K,de){this.listener=m,this.proxy=null,this.src=P,this.type=R,this.capture=!!K,this.ha=de,this.key=++ie,this.da=this.fa=!1}function A(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function C(m){this.src=m,this.g={},this.h=0}C.prototype.add=function(m,P,R,K,de){var ye=m.toString();m=this.g[ye],m||(m=this.g[ye]=[],this.h++);var $e=p(m,P,K,de);return-1<$e?(P=m[$e],R||(P.fa=!1)):(P=new k(P,this.src,ye,!!K,de),P.fa=R,m.push(P)),P};function v(m,P){var R=P.type;if(R in m.g){var K=m.g[R],de=Array.prototype.indexOf.call(K,P,void 0),ye;(ye=0<=de)&&Array.prototype.splice.call(K,de,1),ye&&(A(P),m.g[R].length==0&&(delete m.g[R],m.h--))}}function p(m,P,R,K){for(var de=0;de<m.length;++de){var ye=m[de];if(!ye.da&&ye.listener==P&&ye.capture==!!R&&ye.ha==K)return de}return-1}var B="closure_lm_"+(1e6*Math.random()|0),ae={};function se(m,P,R,K,de){if(K&&K.once)return re(m,P,R,K,de);if(Array.isArray(P)){for(var ye=0;ye<P.length;ye++)se(m,P[ye],R,K,de);return null}return R=fe(R),m&&m[G]?m.K(P,R,x(K)?!!K.capture:!!K,de):ne(m,P,R,!1,K,de)}function ne(m,P,R,K,de,ye){if(!P)throw Error("Invalid event type");var $e=x(de)?!!de.capture:!!de,Ht=we(m);if(Ht||(m[B]=Ht=new C(m)),R=Ht.add(P,R,K,$e,ye),R.proxy)return R;if(K=oe(),R.proxy=K,K.src=m,K.listener=R,m.addEventListener)N||(de=$e),de===void 0&&(de=!1),m.addEventListener(P.toString(),K,de);else if(m.attachEvent)m.attachEvent(Y(P.toString()),K);else if(m.addListener&&m.removeListener)m.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return R}function oe(){function m(R){return P.call(m.src,m.listener,R)}const P=me;return m}function re(m,P,R,K,de){if(Array.isArray(P)){for(var ye=0;ye<P.length;ye++)re(m,P[ye],R,K,de);return null}return R=fe(R),m&&m[G]?m.L(P,R,x(K)?!!K.capture:!!K,de):ne(m,P,R,!0,K,de)}function le(m,P,R,K,de){if(Array.isArray(P))for(var ye=0;ye<P.length;ye++)le(m,P[ye],R,K,de);else K=x(K)?!!K.capture:!!K,R=fe(R),m&&m[G]?(m=m.i,P=String(P).toString(),P in m.g&&(ye=m.g[P],R=p(ye,R,K,de),-1<R&&(A(ye[R]),Array.prototype.splice.call(ye,R,1),ye.length==0&&(delete m.g[P],m.h--)))):m&&(m=we(m))&&(P=m.g[P.toString()],m=-1,P&&(m=p(P,R,K,de)),(R=-1<m?P[m]:null)&&W(R))}function W(m){if(typeof m!="number"&&m&&!m.da){var P=m.src;if(P&&P[G])v(P.i,m);else{var R=m.type,K=m.proxy;P.removeEventListener?P.removeEventListener(R,K,m.capture):P.detachEvent?P.detachEvent(Y(R),K):P.addListener&&P.removeListener&&P.removeListener(K),(R=we(P))?(v(R,m),R.h==0&&(R.src=null,P[B]=null)):A(m)}}}function Y(m){return m in ae?ae[m]:ae[m]="on"+m}function me(m,P){if(m.da)m=!0;else{P=new h(P,this);var R=m.listener,K=m.ha||m.src;m.fa&&W(m),m=R.call(K,P)}return m}function we(m){return m=m[B],m instanceof C?m:null}var _e="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(m){return typeof m=="function"?m:(m[_e]||(m[_e]=function(P){return m.handleEvent(P)}),m[_e])}function ze(){De.call(this),this.i=new C(this),this.M=this,this.F=null}g(ze,De),ze.prototype[G]=!0,ze.prototype.removeEventListener=function(m,P,R,K){le(this,m,P,R,K)};function Ie(m,P){var R,K=m.F;if(K)for(R=[];K;K=K.F)R.push(K);if(m=m.M,K=P.type||P,typeof P=="string")P=new n(P,m);else if(P instanceof n)P.target=P.target||m;else{var de=P;P=new n(K,m),F(P,de)}if(de=!0,R)for(var ye=R.length-1;0<=ye;ye--){var $e=P.g=R[ye];de=Oe($e,K,!0,P)&&de}if($e=P.g=m,de=Oe($e,K,!0,P)&&de,de=Oe($e,K,!1,P)&&de,R)for(ye=0;ye<R.length;ye++)$e=P.g=R[ye],de=Oe($e,K,!1,P)&&de}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var m=this.i,P;for(P in m.g){for(var R=m.g[P],K=0;K<R.length;K++)A(R[K]);delete m.g[P],m.h--}}this.F=null},ze.prototype.K=function(m,P,R,K){return this.i.add(String(m),P,!1,R,K)},ze.prototype.L=function(m,P,R,K){return this.i.add(String(m),P,!0,R,K)};function Oe(m,P,R,K){if(P=m.i.g[String(P)],!P)return!0;P=P.concat();for(var de=!0,ye=0;ye<P.length;++ye){var $e=P[ye];if($e&&!$e.da&&$e.capture==R){var Ht=$e.listener,As=$e.ha||$e.src;$e.fa&&v(m.i,$e),de=Ht.call(As,K)!==!1&&de}}return de&&!K.defaultPrevented}function X(m,P,R){if(typeof m=="function")R&&(m=w(m,R));else if(m&&typeof m.handleEvent=="function")m=w(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(P)?-1:c.setTimeout(m,P||0)}function ce(m){m.g=X(()=>{m.g=null,m.i&&(m.i=!1,ce(m))},m.l);const P=m.h;m.h=null,m.m.apply(null,P)}class Ne extends De{constructor(P,R){super(),this.m=P,this.l=R,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:ce(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(m){De.call(this),this.h=m,this.g={}}g(rt,De);var Tt=[];function St(m){Q(m.g,function(P,R){this.g.hasOwnProperty(R)&&W(P)},m),m.g={}}rt.prototype.N=function(){rt.aa.N.call(this),St(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ts=c.JSON.stringify,_s=c.JSON.parse,wt=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function yt(){}yt.prototype.h=null;function ss(m){return m.h||(m.h=m.i())}function us(){}var js={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tr(){n.call(this,"d")}g(tr,n);function sr(){n.call(this,"c")}g(sr,n);var $s={},on=null;function Ds(){return on=on||new ze}$s.La="serverreachability";function Da(m){n.call(this,$s.La,m)}g(Da,n);function vr(m){const P=Ds();Ie(P,new Da(P))}$s.STAT_EVENT="statevent";function Hr(m,P){n.call(this,$s.STAT_EVENT,m),this.stat=P}g(Hr,n);function ee(m){const P=Ds();Ie(P,new Hr(P,m))}$s.Ma="timingevent";function ke(m,P){n.call(this,$s.Ma,m),this.size=P}g(ke,n);function Ve(m,P){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},P)}function Ke(){this.g=!0}Ke.prototype.xa=function(){this.g=!1};function bt(m,P,R,K,de,ye){m.info(function(){if(m.g)if(ye)for(var $e="",Ht=ye.split("&"),As=0;As<Ht.length;As++){var zt=Ht[As].split("=");if(1<zt.length){var Ws=zt[0];zt=zt[1];var qs=Ws.split("_");$e=2<=qs.length&&qs[1]=="type"?$e+(Ws+"="+zt+"&"):$e+(Ws+"=redacted&")}}else $e=null;else $e=ye;return"XMLHTTP REQ ("+K+") [attempt "+de+"]: "+P+`
`+R+`
`+$e})}function _t(m,P,R,K,de,ye,$e){m.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+de+"]: "+P+`
`+R+`
`+ye+" "+$e})}function Mt(m,P,R,K){m.info(function(){return"XMLHTTP TEXT ("+P+"): "+Ar(m,R)+(K?" "+K:"")})}function la(m,P){m.info(function(){return"TIMEOUT: "+P})}Ke.prototype.info=function(){};function Ar(m,P){if(!m.g)return P;if(!P)return null;try{var R=JSON.parse(P);if(R){for(m=0;m<R.length;m++)if(Array.isArray(R[m])){var K=R[m];if(!(2>K.length)){var de=K[1];if(Array.isArray(de)&&!(1>de.length)){var ye=de[0];if(ye!="noop"&&ye!="stop"&&ye!="close")for(var $e=1;$e<de.length;$e++)de[$e]=""}}}}return ts(R)}catch{return P}}var Is={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Aa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ln;function ca(){}g(ca,yt),ca.prototype.g=function(){return new XMLHttpRequest},ca.prototype.i=function(){return{}},ln=new ca;function rr(m,P,R,K){this.j=m,this.i=P,this.l=R,this.R=K||1,this.U=new rt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ll}function ll(){this.i=null,this.g="",this.h=!1}var jd={},cl={};function dl(m,P,R){m.L=1,m.v=Sd(Ra(P)),m.m=R,m.P=!0,Wi(m,null)}function Wi(m,P){m.F=Date.now(),qi(m),m.A=Ra(m.v);var R=m.A,K=m.R;Array.isArray(K)||(K=[String(K)]),Ky(R.i,"t",K),m.C=0,R=m.j.J,m.h=new ll,m.g=xb(m.j,R?P:null,!m.m),0<m.O&&(m.M=new Ne(w(m.Y,m,m.g),m.O)),P=m.U,R=m.g,K=m.ca;var de="readystatechange";Array.isArray(de)||(de&&(Tt[0]=de.toString()),de=Tt);for(var ye=0;ye<de.length;ye++){var $e=se(R,de[ye],K||P.handleEvent,!1,P.h||P);if(!$e)break;P.g[$e.key]=$e}P=m.H?u(m.H):{},m.m?(m.u||(m.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,P)):(m.u="GET",m.g.ea(m.A,m.u,null,P)),vr(),bt(m.i,m.u,m.A,m.l,m.R,m.m)}rr.prototype.ca=function(m){m=m.target;const P=this.M;P&&Ma(m)==3?P.j():this.Y(m)},rr.prototype.Y=function(m){try{if(m==this.g)e:{const qs=Ma(this.g);var P=this.g.Ba();const Qi=this.g.Z();if(!(3>qs)&&(qs!=3||this.g&&(this.h.h||this.g.oa()||tb(this.g)))){this.J||qs!=4||P==7||(P==8||0>=Qi?vr(3):vr(2)),Hi(this);var R=this.g.Z();this.X=R;t:if(Nd(this)){var K=tb(this.g);m="";var de=K.length,ye=Ma(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ua(this),da(this);var $e="";break t}this.h.i=new c.TextDecoder}for(P=0;P<de;P++)this.h.h=!0,m+=this.h.i.decode(K[P],{stream:!(ye&&P==de-1)});K.length=0,this.h.g+=m,this.C=0,$e=this.h.g}else $e=this.g.oa();if(this.o=R==200,_t(this.i,this.u,this.A,this.l,this.R,qs,R),this.o){if(this.T&&!this.K){t:{if(this.g){var Ht,As=this.g;if((Ht=As.g?As.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(Ht)){var zt=Ht;break t}}zt=null}if(R=zt)Mt(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cn(this,R);else{this.o=!1,this.s=3,ee(12),ua(this),da(this);break e}}if(this.P){R=!0;let Gr;for(;!this.J&&this.C<$e.length;)if(Gr=Hm(this,$e),Gr==cl){qs==4&&(this.s=4,ee(14),R=!1),Mt(this.i,this.l,null,"[Incomplete Response]");break}else if(Gr==jd){this.s=4,ee(15),Mt(this.i,this.l,$e,"[Invalid Chunk]"),R=!1;break}else Mt(this.i,this.l,Gr,null),cn(this,Gr);if(Nd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qs!=4||$e.length!=0||this.h.h||(this.s=1,ee(16),R=!1),this.o=this.o&&R,!R)Mt(this.i,this.l,$e,"[Invalid Chunked Response]"),ua(this),da(this);else if(0<$e.length&&!this.W){this.W=!0;var Ws=this.j;Ws.g==this&&Ws.ba&&!Ws.M&&(Ws.j.info("Great, no buffering proxy detected. Bytes received: "+$e.length),Jm(Ws),Ws.M=!0,ee(11))}}else Mt(this.i,this.l,$e,null),cn(this,$e);qs==4&&ua(this),this.o&&!this.J&&(qs==4?lb(this.j,this):(this.o=!1,qi(this)))}else bP(this.g),R==400&&0<$e.indexOf("Unknown SID")?(this.s=3,ee(12)):(this.s=0,ee(13)),ua(this),da(this)}}}catch{}finally{}};function Nd(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Hm(m,P){var R=m.C,K=P.indexOf(`
`,R);return K==-1?cl:(R=Number(P.substring(R,K)),isNaN(R)?jd:(K+=1,K+R>P.length?cl:(P=P.slice(K,K+R),m.C=K+R,P)))}rr.prototype.cancel=function(){this.J=!0,ua(this)};function qi(m){m.S=Date.now()+m.I,ri(m,m.I)}function ri(m,P){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Ve(w(m.ba,m),P)}function Hi(m){m.B&&(c.clearTimeout(m.B),m.B=null)}rr.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(la(this.i,this.A),this.L!=2&&(vr(),ee(17)),ua(this),this.s=2,da(this)):ri(this,this.S-m)};function da(m){m.j.G==0||m.J||lb(m.j,m)}function ua(m){Hi(m);var P=m.M;P&&typeof P.ma=="function"&&P.ma(),m.M=null,St(m.U),m.g&&(P=m.g,m.g=null,P.abort(),P.ma())}function cn(m,P){try{var R=m.j;if(R.G!=0&&(R.g==m||Gm(R.h,m))){if(!m.K&&Gm(R.h,m)&&R.G==3){try{var K=R.Da.g.parse(P)}catch{K=null}if(Array.isArray(K)&&K.length==3){var de=K;if(de[0]==0){e:if(!R.u){if(R.g)if(R.g.F+3e3<m.F)Ad(R),_d(R);else break e;Xm(R),ee(18)}}else R.za=de[1],0<R.za-R.T&&37500>de[2]&&R.F&&R.v==0&&!R.C&&(R.C=Ve(w(R.Za,R),6e3));if(1>=kd(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else ni(R,11)}else if((m.K||R.g==m)&&Ad(R),!M(P))for(de=R.Da.g.parse(P),P=0;P<de.length;P++){let zt=de[P];if(R.T=zt[0],zt=zt[1],R.G==2)if(zt[0]=="c"){R.K=zt[1],R.ia=zt[2];const Ws=zt[3];Ws!=null&&(R.la=Ws,R.j.info("VER="+R.la));const qs=zt[4];qs!=null&&(R.Aa=qs,R.j.info("SVER="+R.Aa));const Qi=zt[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&(K=1.5*Qi,R.L=K,R.j.info("backChannelRequestTimeoutMs_="+K)),K=R;const Gr=m.g;if(Gr){const Md=Gr.g?Gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Md){var ye=K.h;ye.g||Md.indexOf("spdy")==-1&&Md.indexOf("quic")==-1&&Md.indexOf("h2")==-1||(ye.j=ye.l,ye.g=new Set,ye.h&&(Km(ye,ye.h),ye.h=null))}if(K.D){const Zm=Gr.g?Gr.g.getResponseHeader("X-HTTP-Session-Id"):null;Zm&&(K.ya=Zm,Xt(K.I,K.D,Zm))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-m.F,R.j.info("Handshake RTT: "+R.R+"ms")),K=R;var $e=m;if(K.qa=ub(K,K.J?K.ia:null,K.W),$e.K){By(K.h,$e);var Ht=$e,As=K.L;As&&(Ht.I=As),Ht.B&&(Hi(Ht),qi(Ht)),K.g=$e}else ib(K);0<R.i.length&&Dd(R)}else zt[0]!="stop"&&zt[0]!="close"||ni(R,7);else R.G==3&&(zt[0]=="stop"||zt[0]=="close"?zt[0]=="stop"?ni(R,7):Ym(R):zt[0]!="noop"&&R.l&&R.l.ta(zt),R.v=0)}}vr(4)}catch{}}var wd=class{constructor(m,P){this.g=m,this.map=P}};function ul(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xl(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function kd(m){return m.h?1:m.g?m.g.size:0}function Gm(m,P){return m.h?m.h==P:m.g?m.g.has(P):!1}function Km(m,P){m.g?m.g.add(P):m.h=P}function By(m,P){m.h&&m.h==P?m.h=null:m.g&&m.g.has(P)&&m.g.delete(P)}ul.prototype.cancel=function(){if(this.i=Fy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Fy(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let P=m.i;for(const R of m.g.values())P=P.concat(R.D);return P}return V(m.i)}function aP(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var P=[],R=m.length,K=0;K<R;K++)P.push(m[K]);return P}P=[],R=0;for(K in m)P[R++]=m[K];return P}function nP(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var P=[];m=m.length;for(var R=0;R<m;R++)P.push(R);return P}P=[],R=0;for(const K in m)P[R++]=K;return P}}}function Uy(m,P){if(m.forEach&&typeof m.forEach=="function")m.forEach(P,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,P,void 0);else for(var R=nP(m),K=aP(m),de=K.length,ye=0;ye<de;ye++)P.call(void 0,K[ye],R&&R[ye],m)}var $y=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function iP(m,P){if(m){m=m.split("&");for(var R=0;R<m.length;R++){var K=m[R].indexOf("="),de=null;if(0<=K){var ye=m[R].substring(0,K);de=m[R].substring(K+1)}else ye=m[R];P(ye,de?decodeURIComponent(de.replace(/\+/g," ")):"")}}}function ai(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof ai){this.h=m.h,Id(this,m.j),this.o=m.o,this.g=m.g,Pd(this,m.s),this.l=m.l;var P=m.i,R=new pl;R.i=P.i,P.g&&(R.g=new Map(P.g),R.h=P.h),Wy(this,R),this.m=m.m}else m&&(P=String(m).match($y))?(this.h=!1,Id(this,P[1]||"",!0),this.o=ml(P[2]||""),this.g=ml(P[3]||"",!0),Pd(this,P[4]),this.l=ml(P[5]||"",!0),Wy(this,P[6]||"",!0),this.m=ml(P[7]||"")):(this.h=!1,this.i=new pl(null,this.h))}ai.prototype.toString=function(){var m=[],P=this.j;P&&m.push(hl(P,qy,!0),":");var R=this.g;return(R||P=="file")&&(m.push("//"),(P=this.o)&&m.push(hl(P,qy,!0),"@"),m.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&m.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&m.push("/"),m.push(hl(R,R.charAt(0)=="/"?cP:lP,!0))),(R=this.i.toString())&&m.push("?",R),(R=this.m)&&m.push("#",hl(R,uP)),m.join("")};function Ra(m){return new ai(m)}function Id(m,P,R){m.j=R?ml(P,!0):P,m.j&&(m.j=m.j.replace(/:$/,""))}function Pd(m,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);m.s=P}else m.s=null}function Wy(m,P,R){P instanceof pl?(m.i=P,xP(m.i,m.h)):(R||(P=hl(P,dP)),m.i=new pl(P,m.h))}function Xt(m,P,R){m.i.set(P,R)}function Sd(m){return Xt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function ml(m,P){return m?P?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function hl(m,P,R){return typeof m=="string"?(m=encodeURI(m).replace(P,oP),R&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function oP(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var qy=/[#\/\?@]/g,lP=/[#\?:]/g,cP=/[#\?]/g,dP=/[#\?@]/g,uP=/#/g;function pl(m,P){this.h=this.g=null,this.i=m||null,this.j=!!P}function dn(m){m.g||(m.g=new Map,m.h=0,m.i&&iP(m.i,function(P,R){m.add(decodeURIComponent(P.replace(/\+/g," ")),R)}))}s=pl.prototype,s.add=function(m,P){dn(this),this.i=null,m=Gi(this,m);var R=this.g.get(m);return R||this.g.set(m,R=[]),R.push(P),this.h+=1,this};function Hy(m,P){dn(m),P=Gi(m,P),m.g.has(P)&&(m.i=null,m.h-=m.g.get(P).length,m.g.delete(P))}function Gy(m,P){return dn(m),P=Gi(m,P),m.g.has(P)}s.forEach=function(m,P){dn(this),this.g.forEach(function(R,K){R.forEach(function(de){m.call(P,de,K,this)},this)},this)},s.na=function(){dn(this);const m=Array.from(this.g.values()),P=Array.from(this.g.keys()),R=[];for(let K=0;K<P.length;K++){const de=m[K];for(let ye=0;ye<de.length;ye++)R.push(P[K])}return R},s.V=function(m){dn(this);let P=[];if(typeof m=="string")Gy(this,m)&&(P=P.concat(this.g.get(Gi(this,m))));else{m=Array.from(this.g.values());for(let R=0;R<m.length;R++)P=P.concat(m[R])}return P},s.set=function(m,P){return dn(this),this.i=null,m=Gi(this,m),Gy(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[P]),this.h+=1,this},s.get=function(m,P){return m?(m=this.V(m),0<m.length?String(m[0]):P):P};function Ky(m,P,R){Hy(m,P),0<R.length&&(m.i=null,m.g.set(Gi(m,P),V(R)),m.h+=R.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],P=Array.from(this.g.keys());for(var R=0;R<P.length;R++){var K=P[R];const ye=encodeURIComponent(String(K)),$e=this.V(K);for(K=0;K<$e.length;K++){var de=ye;$e[K]!==""&&(de+="="+encodeURIComponent(String($e[K]))),m.push(de)}}return this.i=m.join("&")};function Gi(m,P){return P=String(P),m.j&&(P=P.toLowerCase()),P}function xP(m,P){P&&!m.j&&(dn(m),m.i=null,m.g.forEach(function(R,K){var de=K.toLowerCase();K!=de&&(Hy(this,K),Ky(this,de,R))},m)),m.j=P}function mP(m,P){const R=new Ke;if(c.Image){const K=new Image;K.onload=S(un,R,"TestLoadImage: loaded",!0,P,K),K.onerror=S(un,R,"TestLoadImage: error",!1,P,K),K.onabort=S(un,R,"TestLoadImage: abort",!1,P,K),K.ontimeout=S(un,R,"TestLoadImage: timeout",!1,P,K),c.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=m}else P(!1)}function hP(m,P){const R=new Ke,K=new AbortController,de=setTimeout(()=>{K.abort(),un(R,"TestPingServer: timeout",!1,P)},1e4);fetch(m,{signal:K.signal}).then(ye=>{clearTimeout(de),ye.ok?un(R,"TestPingServer: ok",!0,P):un(R,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(de),un(R,"TestPingServer: error",!1,P)})}function un(m,P,R,K,de){try{de&&(de.onload=null,de.onerror=null,de.onabort=null,de.ontimeout=null),K(R)}catch{}}function pP(){this.g=new wt}function fP(m,P,R){const K=R||"";try{Uy(m,function(de,ye){let $e=de;x(de)&&($e=ts(de)),P.push(K+ye+"="+encodeURIComponent($e))})}catch(de){throw P.push(K+"type="+encodeURIComponent("_badmap")),de}}function Ed(m){this.l=m.Ub||null,this.j=m.eb||!1}g(Ed,yt),Ed.prototype.g=function(){return new Cd(this.l,this.j)},Ed.prototype.i=function(m){return function(){return m}}({});function Cd(m,P){ze.call(this),this.D=m,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Cd,ze),s=Cd.prototype,s.open=function(m,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=P,this.readyState=1,gl(this)},s.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(P.body=m),(this.D||c).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fl(this)),this.readyState=0},s.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,gl(this)),this.g&&(this.readyState=3,gl(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qy(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qy(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}s.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var P=m.value?m.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!m.done}))&&(this.response=this.responseText+=P)}m.done?fl(this):gl(this),this.readyState==3&&Qy(this)}},s.Ra=function(m){this.g&&(this.response=this.responseText=m,fl(this))},s.Qa=function(m){this.g&&(this.response=m,fl(this))},s.ga=function(){this.g&&fl(this)};function fl(m){m.readyState=4,m.l=null,m.j=null,m.v=null,gl(m)}s.setRequestHeader=function(m,P){this.u.append(m,P)},s.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],P=this.h.entries();for(var R=P.next();!R.done;)R=R.value,m.push(R[0]+": "+R[1]),R=P.next();return m.join(`\r
`)};function gl(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Cd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Yy(m){let P="";return Q(m,function(R,K){P+=K,P+=":",P+=R,P+=`\r
`}),P}function Qm(m,P,R){e:{for(K in R){var K=!1;break e}K=!0}K||(R=Yy(R),typeof m=="string"?R!=null&&encodeURIComponent(String(R)):Xt(m,P,R))}function xs(m){ze.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(xs,ze);var gP=/^https?$/i,yP=["POST","PUT"];s=xs.prototype,s.Ha=function(m){this.J=m},s.ea=function(m,P,R,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);P=P?P.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ln.g(),this.v=this.o?ss(this.o):ss(ln),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(P,String(m),!0),this.B=!1}catch(ye){Xy(this,ye);return}if(m=R||"",R=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var de in K)R.set(de,K[de]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const ye of K.keys())R.set(ye,K.get(ye));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(R.keys()).find(ye=>ye.toLowerCase()=="content-type"),de=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(yP,P,void 0))||K||de||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,$e]of R)this.g.setRequestHeader(ye,$e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eb(this),this.u=!0,this.g.send(m),this.u=!1}catch(ye){Xy(this,ye)}};function Xy(m,P){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=P,m.m=5,Jy(m),Td(m)}function Jy(m){m.A||(m.A=!0,Ie(m,"complete"),Ie(m,"error"))}s.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Ie(this,"complete"),Ie(this,"abort"),Td(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Td(this,!0)),xs.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Zy(this):this.bb())},s.bb=function(){Zy(this)};function Zy(m){if(m.h&&typeof o<"u"&&(!m.v[1]||Ma(m)!=4||m.Z()!=2)){if(m.u&&Ma(m)==4)X(m.Ea,0,m);else if(Ie(m,"readystatechange"),Ma(m)==4){m.h=!1;try{const $e=m.Z();e:switch($e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var R;if(!(R=P)){var K;if(K=$e===0){var de=String(m.D).match($y)[1]||null;!de&&c.self&&c.self.location&&(de=c.self.location.protocol.slice(0,-1)),K=!gP.test(de?de.toLowerCase():"")}R=K}if(R)Ie(m,"complete"),Ie(m,"success");else{m.m=6;try{var ye=2<Ma(m)?m.g.statusText:""}catch{ye=""}m.l=ye+" ["+m.Z()+"]",Jy(m)}}finally{Td(m)}}}}function Td(m,P){if(m.g){eb(m);const R=m.g,K=m.v[0]?()=>{}:null;m.g=null,m.v=null,P||Ie(m,"ready");try{R.onreadystatechange=K}catch{}}}function eb(m){m.I&&(c.clearTimeout(m.I),m.I=null)}s.isActive=function(){return!!this.g};function Ma(m){return m.g?m.g.readyState:0}s.Z=function(){try{return 2<Ma(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(m){if(this.g){var P=this.g.responseText;return m&&P.indexOf(m)==0&&(P=P.substring(m.length)),_s(P)}};function tb(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function bP(m){const P={};m=(m.g&&2<=Ma(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<m.length;K++){if(M(m[K]))continue;var R=J(m[K]);const de=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const ye=P[de]||[];P[de]=ye,ye.push(R)}O(P,function(K){return K.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yl(m,P,R){return R&&R.internalChannelParams&&R.internalChannelParams[m]||P}function sb(m){this.Aa=0,this.i=[],this.j=new Ke,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yl("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yl("baseRetryDelayMs",5e3,m),this.cb=yl("retryDelaySeedMs",1e4,m),this.Wa=yl("forwardChannelMaxRetries",2,m),this.wa=yl("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new ul(m&&m.concurrentRequestLimit),this.Da=new pP,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=sb.prototype,s.la=8,s.G=1,s.connect=function(m,P,R,K){ee(0),this.W=m,this.H=P||{},R&&K!==void 0&&(this.H.OSID=R,this.H.OAID=K),this.F=this.X,this.I=ub(this,null,this.W),Dd(this)};function Ym(m){if(rb(m),m.G==3){var P=m.U++,R=Ra(m.I);if(Xt(R,"SID",m.K),Xt(R,"RID",P),Xt(R,"TYPE","terminate"),bl(m,R),P=new rr(m,m.j,P),P.L=2,P.v=Sd(Ra(R)),R=!1,c.navigator&&c.navigator.sendBeacon)try{R=c.navigator.sendBeacon(P.v.toString(),"")}catch{}!R&&c.Image&&(new Image().src=P.v,R=!0),R||(P.g=xb(P.j,null),P.g.ea(P.v)),P.F=Date.now(),qi(P)}db(m)}function _d(m){m.g&&(Jm(m),m.g.cancel(),m.g=null)}function rb(m){_d(m),m.u&&(c.clearTimeout(m.u),m.u=null),Ad(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function Dd(m){if(!xl(m.h)&&!m.s){m.s=!0;var P=m.Ga;ge||pe(),ue||(ge(),ue=!0),xe.add(P,m),m.B=0}}function vP(m,P){return kd(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=P.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Ve(w(m.Ga,m,P),cb(m,m.B)),m.B++,!0)}s.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const de=new rr(this,this.j,m);let ye=this.o;if(this.S&&(ye?(ye=u(ye),F(ye,this.S)):ye=this.S),this.m!==null||this.O||(de.H=ye,ye=null),this.P)e:{for(var P=0,R=0;R<this.i.length;R++){t:{var K=this.i[R];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(P+=K,4096<P){P=R;break e}if(P===4096||R===this.i.length-1){P=R+1;break e}}P=1e3}else P=1e3;P=nb(this,de,P),R=Ra(this.I),Xt(R,"RID",m),Xt(R,"CVER",22),this.D&&Xt(R,"X-HTTP-Session-Id",this.D),bl(this,R),ye&&(this.O?P="headers="+encodeURIComponent(String(Yy(ye)))+"&"+P:this.m&&Qm(R,this.m,ye)),Km(this.h,de),this.Ua&&Xt(R,"TYPE","init"),this.P?(Xt(R,"$req",P),Xt(R,"SID","null"),de.T=!0,dl(de,R,null)):dl(de,R,P),this.G=2}}else this.G==3&&(m?ab(this,m):this.i.length==0||xl(this.h)||ab(this))};function ab(m,P){var R;P?R=P.l:R=m.U++;const K=Ra(m.I);Xt(K,"SID",m.K),Xt(K,"RID",R),Xt(K,"AID",m.T),bl(m,K),m.m&&m.o&&Qm(K,m.m,m.o),R=new rr(m,m.j,R,m.B+1),m.m===null&&(R.H=m.o),P&&(m.i=P.D.concat(m.i)),P=nb(m,R,1e3),R.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Km(m.h,R),dl(R,K,P)}function bl(m,P){m.H&&Q(m.H,function(R,K){Xt(P,K,R)}),m.l&&Uy({},function(R,K){Xt(P,K,R)})}function nb(m,P,R){R=Math.min(m.i.length,R);var K=m.l?w(m.l.Na,m.l,m):null;e:{var de=m.i;let ye=-1;for(;;){const $e=["count="+R];ye==-1?0<R?(ye=de[0].g,$e.push("ofs="+ye)):ye=0:$e.push("ofs="+ye);let Ht=!0;for(let As=0;As<R;As++){let zt=de[As].g;const Ws=de[As].map;if(zt-=ye,0>zt)ye=Math.max(0,de[As].g-100),Ht=!1;else try{fP(Ws,$e,"req"+zt+"_")}catch{K&&K(Ws)}}if(Ht){K=$e.join("&");break e}}}return m=m.i.splice(0,R),P.D=m,K}function ib(m){if(!m.g&&!m.u){m.Y=1;var P=m.Fa;ge||pe(),ue||(ge(),ue=!0),xe.add(P,m),m.v=0}}function Xm(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Ve(w(m.Fa,m),cb(m,m.v)),m.v++,!0)}s.Fa=function(){if(this.u=null,ob(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Ve(w(this.ab,this),m)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ee(10),_d(this),ob(this))};function Jm(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function ob(m){m.g=new rr(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var P=Ra(m.qa);Xt(P,"RID","rpc"),Xt(P,"SID",m.K),Xt(P,"AID",m.T),Xt(P,"CI",m.F?"0":"1"),!m.F&&m.ja&&Xt(P,"TO",m.ja),Xt(P,"TYPE","xmlhttp"),bl(m,P),m.m&&m.o&&Qm(P,m.m,m.o),m.L&&(m.g.I=m.L);var R=m.g;m=m.ia,R.L=1,R.v=Sd(Ra(P)),R.m=null,R.P=!0,Wi(R,m)}s.Za=function(){this.C!=null&&(this.C=null,_d(this),Xm(this),ee(19))};function Ad(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function lb(m,P){var R=null;if(m.g==P){Ad(m),Jm(m),m.g=null;var K=2}else if(Gm(m.h,P))R=P.D,By(m.h,P),K=1;else return;if(m.G!=0){if(P.o)if(K==1){R=P.m?P.m.length:0,P=Date.now()-P.F;var de=m.B;K=Ds(),Ie(K,new ke(K,R)),Dd(m)}else ib(m);else if(de=P.s,de==3||de==0&&0<P.X||!(K==1&&vP(m,P)||K==2&&Xm(m)))switch(R&&0<R.length&&(P=m.h,P.i=P.i.concat(R)),de){case 1:ni(m,5);break;case 4:ni(m,10);break;case 3:ni(m,6);break;default:ni(m,2)}}}function cb(m,P){let R=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(R*=2),R*P}function ni(m,P){if(m.j.info("Error code "+P),P==2){var R=w(m.fb,m),K=m.Xa;const de=!K;K=new ai(K||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Id(K,"https"),Sd(K),de?mP(K.toString(),R):hP(K.toString(),R)}else ee(2);m.G=0,m.l&&m.l.sa(P),db(m),rb(m)}s.fb=function(m){m?(this.j.info("Successfully pinged google.com"),ee(2)):(this.j.info("Failed to ping google.com"),ee(1))};function db(m){if(m.G=0,m.ka=[],m.l){const P=Fy(m.h);(P.length!=0||m.i.length!=0)&&(E(m.ka,P),E(m.ka,m.i),m.h.i.length=0,V(m.i),m.i.length=0),m.l.ra()}}function ub(m,P,R){var K=R instanceof ai?Ra(R):new ai(R);if(K.g!="")P&&(K.g=P+"."+K.g),Pd(K,K.s);else{var de=c.location;K=de.protocol,P=P?P+"."+de.hostname:de.hostname,de=+de.port;var ye=new ai(null);K&&Id(ye,K),P&&(ye.g=P),de&&Pd(ye,de),R&&(ye.l=R),K=ye}return R=m.D,P=m.ya,R&&P&&Xt(K,R,P),Xt(K,"VER",m.la),bl(m,K),K}function xb(m,P,R){if(P&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return P=m.Ca&&!m.pa?new xs(new Ed({eb:R})):new xs(m.pa),P.Ha(m.J),P}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function mb(){}s=mb.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Rd(){}Rd.prototype.g=function(m,P){return new jr(m,P)};function jr(m,P){ze.call(this),this.g=new sb(P),this.l=m,this.h=P&&P.messageUrlParams||null,m=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(m?m["X-WebChannel-Content-Type"]=P.messageContentType:m={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(m?m["X-WebChannel-Client-Profile"]=P.va:m={"X-WebChannel-Client-Profile":P.va}),this.g.S=m,(m=P&&P.Sb)&&!M(m)&&(this.g.m=m),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!M(P)&&(this.g.D=P,m=this.h,m!==null&&P in m&&(m=this.h,P in m&&delete m[P])),this.j=new Ki(this)}g(jr,ze),jr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jr.prototype.close=function(){Ym(this.g)},jr.prototype.o=function(m){var P=this.g;if(typeof m=="string"){var R={};R.__data__=m,m=R}else this.u&&(R={},R.__data__=ts(m),m=R);P.i.push(new wd(P.Ya++,m)),P.G==3&&Dd(P)},jr.prototype.N=function(){this.g.l=null,delete this.j,Ym(this.g),delete this.g,jr.aa.N.call(this)};function hb(m){tr.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var P=m.__sm__;if(P){e:{for(const R in P){m=R;break e}m=void 0}(this.i=m)&&(m=this.i,P=P!==null&&m in P?P[m]:void 0),this.data=P}else this.data=m}g(hb,tr);function pb(){sr.call(this),this.status=1}g(pb,sr);function Ki(m){this.g=m}g(Ki,mb),Ki.prototype.ua=function(){Ie(this.g,"a")},Ki.prototype.ta=function(m){Ie(this.g,new hb(m))},Ki.prototype.sa=function(m){Ie(this.g,new pb)},Ki.prototype.ra=function(){Ie(this.g,"b")},Rd.prototype.createWebChannel=Rd.prototype.g,jr.prototype.send=jr.prototype.o,jr.prototype.open=jr.prototype.m,jr.prototype.close=jr.prototype.close,V4=function(){return new Rd},O4=function(){return Ds()},L4=$s,o0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Is.NO_ERROR=0,Is.TIMEOUT=8,Is.HTTP_ERROR=6,Pu=Is,Aa.COMPLETE="complete",M4=Aa,us.EventType=js,js.OPEN="a",js.CLOSE="b",js.ERROR="c",js.MESSAGE="d",ze.prototype.listen=ze.prototype.K,Ol=us,xs.prototype.listenOnce=xs.prototype.L,xs.prototype.getLastError=xs.prototype.Ka,xs.prototype.getLastErrorCode=xs.prototype.Ba,xs.prototype.getStatus=xs.prototype.Z,xs.prototype.getResponseJson=xs.prototype.Oa,xs.prototype.getResponseText=xs.prototype.oa,xs.prototype.send=xs.prototype.ea,xs.prototype.setWithCredentials=xs.prototype.Ha,R4=xs}).apply(typeof eu<"u"?eu:typeof self<"u"?self:typeof window<"u"?window:{});const Yv="@firebase/firestore",Xv="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ys.UNAUTHENTICATED=new Ys(null),Ys.GOOGLE_CREDENTIALS=new Ys("google-credentials-uid"),Ys.FIRST_PARTY=new Ys("first-party-uid"),Ys.MOCK_USER=new Ys("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new mm("@firebase/firestore");function Xi(){return Ei.logLevel}function Qe(s,...t){if(Ei.logLevel<=Et.DEBUG){const r=t.map(Xf);Ei.debug(`Firestore (${Zo}): ${s}`,...r)}}function Xa(s,...t){if(Ei.logLevel<=Et.ERROR){const r=t.map(Xf);Ei.error(`Firestore (${Zo}): ${s}`,...r)}}function Vo(s,...t){if(Ei.logLevel<=Et.WARN){const r=t.map(Xf);Ei.warn(`Firestore (${Zo}): ${s}`,...r)}}function Xf(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(s="Unexpected state"){const t=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: `+s;throw Xa(t),new Error(t)}function Rt(s,t){s||ut()}function ft(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends qr{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class bD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Ys.UNAUTHENTICATED))}shutdown(){}}class vD{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class jD{constructor(t){this.t=t,this.currentUser=Ys.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){Rt(this.o===void 0);let a=this.i;const i=d=>this.i!==a?(a=this.i,r(d)):Promise.resolve();let l=new ya;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ya,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const d=l;t.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{Qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ya)}},0),o()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==t?(Qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Rt(typeof a.accessToken=="string"),new z4(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Rt(t===null||typeof t=="string"),new Ys(t)}}class ND{constructor(t,r,a){this.l=t,this.h=r,this.P=a,this.type="FirstParty",this.user=Ys.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class wD{constructor(t,r,a){this.l=t,this.h=r,this.P=a}getToken(){return Promise.resolve(new ND(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(Ys.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kD{constructor(t,r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,kr(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,r){Rt(this.o===void 0);const a=l=>{l.error!=null&&Qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const o=l.token!==this.R;return this.R=l.token,Qe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>a(l))};const i=l=>{Qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?i(l):Qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Jv(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(Rt(typeof r.token=="string"),this.R=r.token,new Jv(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let a=0;a<s;a++)r[a]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const i=ID(40);for(let l=0;l<i.length;++l)a.length<20&&i[l]<r&&(a+=t.charAt(i[l]%62))}return a}}function vt(s,t){return s<t?-1:s>t?1:0}function l0(s,t){let r=0;for(;r<s.length&&r<t.length;){const a=s.codePointAt(r),i=t.codePointAt(r);if(a!==i){if(a<128&&i<128)return vt(a,i);{const l=B4(),o=PD(l.encode(Zv(s,r)),l.encode(Zv(t,r)));return o!==0?o:vt(a,i)}}r+=a>65535?2:1}return vt(s.length,t.length)}function Zv(s,t){return s.codePointAt(t)>65535?s.substring(t,t+2):s.substring(t,t+1)}function PD(s,t){for(let r=0;r<s.length&&r<t.length;++r)if(s[r]!==t[r])return vt(s[r],t[r]);return vt(s.length,t.length)}function zo(s,t,r){return s.length===t.length&&s.every((a,i)=>r(a,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=-62135596800,tj=1e6;class Qt{static now(){return Qt.fromMillis(Date.now())}static fromDate(t){return Qt.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),a=Math.floor((t-1e3*r)*tj);return new Qt(r,a)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new qe(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new qe(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<ej)throw new qe(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new qe(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tj}_compareTo(t){return this.seconds===t.seconds?vt(this.nanoseconds,t.nanoseconds):vt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-ej;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{static fromTimestamp(t){return new xt(t)}static min(){return new xt(new Qt(0,0))}static max(){return new xt(new Qt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj="__name__";class ha{constructor(t,r,a){r===void 0?r=0:r>t.length&&ut(),a===void 0?a=t.length-r:a>t.length-r&&ut(),this.segments=t,this.offset=r,this.len=a}get length(){return this.len}isEqual(t){return ha.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof ha?t.forEach(a=>{r.push(a)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,a=this.limit();r<a;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const a=Math.min(t.length,r.length);for(let i=0;i<a;i++){const l=ha.compareSegments(t.get(i),r.get(i));if(l!==0)return l}return vt(t.length,r.length)}static compareSegments(t,r){const a=ha.isNumericId(t),i=ha.isNumericId(r);return a&&!i?-1:!a&&i?1:a&&i?ha.extractNumericId(t).compare(ha.extractNumericId(r)):l0(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return On.fromString(t.substring(4,t.length-2))}}class Gt extends ha{construct(t,r,a){return new Gt(t,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const a of t){if(a.indexOf("//")>=0)throw new qe(Pe.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(i=>i.length>0))}return new Gt(r)}static emptyPath(){return new Gt([])}}const SD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Os extends ha{construct(t,r,a){return new Os(t,r,a)}static isValidIdentifier(t){return SD.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Os.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sj}static keyField(){return new Os([sj])}static fromServerFormat(t){const r=[];let a="",i=0;const l=()=>{if(a.length===0)throw new qe(Pe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let o=!1;for(;i<t.length;){const c=t[i];if(c==="\\"){if(i+1===t.length)throw new qe(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new qe(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=d,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(a+=c,i++):(l(),i++)}if(l(),o)throw new qe(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Os(r)}static emptyPath(){return new Os([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.path=t}static fromPath(t){return new dt(Gt.fromString(t))}static fromName(t){return new dt(Gt.fromString(t).popFirst(5))}static empty(){return new dt(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Gt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Gt.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new dt(new Gt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=-1;function ED(s,t){const r=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,i=xt.fromTimestamp(a===1e9?new Qt(r+1,0):new Qt(r,a));return new Un(i,dt.empty(),t)}function CD(s){return new Un(s.readTime,s.key,Cc)}class Un{constructor(t,r,a){this.readTime=t,this.documentKey=r,this.largestBatchId=a}static min(){return new Un(xt.min(),dt.empty(),Cc)}static max(){return new Un(xt.max(),dt.empty(),Cc)}}function TD(s,t){let r=s.readTime.compareTo(t.readTime);return r!==0?r:(r=dt.comparator(s.documentKey,t.documentKey),r!==0?r:vt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(s){if(s.code!==Pe.FAILED_PRECONDITION||s.message!==_D)throw s;Qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Ce((a,i)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(a,i)},this.catchCallback=l=>{this.wrapFailure(r,l).next(a,i)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Ce?r:Ce.resolve(r)}catch(r){return Ce.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Ce.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Ce.reject(r)}static resolve(t){return new Ce((r,a)=>{r(t)})}static reject(t){return new Ce((r,a)=>{a(t)})}static waitFor(t){return new Ce((r,a)=>{let i=0,l=0,o=!1;t.forEach(c=>{++i,c.next(()=>{++l,o&&l===i&&r()},d=>a(d))}),o=!0,l===i&&r()})}static or(t){let r=Ce.resolve(!1);for(const a of t)r=r.next(i=>i?Ce.resolve(i):a());return r}static forEach(t,r){const a=[];return t.forEach((i,l)=>{a.push(r.call(this,i,l))}),this.waitFor(a)}static mapArray(t,r){return new Ce((a,i)=>{const l=t.length,o=new Array(l);let c=0;for(let d=0;d<l;d++){const x=d;r(t[x]).next(f=>{o[x]=f,++c,c===l&&a(o)},f=>i(f))}})}static doWhile(t,r){return new Ce((a,i)=>{const l=()=>{t()===!0?r().next(()=>{l()},i):a()};l()})}}function AD(s){const t=s.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function tl(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=a=>this.oe(a),this._e=a=>r.writeSequenceNumber(a))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}pm.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=-1;function sd(s){return s==null}function bx(s){return s===0&&1/s==-1/0}function RD(s){return typeof s=="number"&&Number.isInteger(s)&&!bx(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4="";function MD(s){let t="";for(let r=0;r<s.length;r++)t.length>0&&(t=rj(t)),t=LD(s.get(r),t);return rj(t)}function LD(s,t){let r=t;const a=s.length;for(let i=0;i<a;i++){const l=s.charAt(i);switch(l){case"\0":r+="";break;case U4:r+="";break;default:r+=l}}return r}function rj(s){return s+U4+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(s){let t=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&t++;return t}function ei(s,t){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&t(r,s[r])}function $4(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(t,r){this.comparator=t,this.root=r||Ls.EMPTY}insert(t,r){return new ds(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Ls.BLACK,null,null))}remove(t){return new ds(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ls.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(t){let r=0,a=this.root;for(;!a.isEmpty();){const i=this.comparator(t,a.key);if(i===0)return r+a.left.size;i<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,a)=>(t(r,a),!1))}toString(){const t=[];return this.inorderTraversal((r,a)=>(t.push(`${r}:${a}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new tu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new tu(this.root,t,this.comparator,!1)}getReverseIterator(){return new tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new tu(this.root,t,this.comparator,!0)}}class tu{constructor(t,r,a,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=r?a(t.key,r):1,r&&i&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ls{constructor(t,r,a,i,l){this.key=t,this.value=r,this.color=a??Ls.RED,this.left=i??Ls.EMPTY,this.right=l??Ls.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,a,i,l){return new Ls(t??this.key,r??this.value,a??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,a){let i=this;const l=a(t,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(t,r,a),null):l===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(t,r,a)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ls.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let a,i=this;if(r(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(t,i.key)===0){if(i.right.isEmpty())return Ls.EMPTY;a=i.right.min(),i=i.copy(a.key,a.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ls.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ls.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const t=this.left.check();if(t!==this.right.check())throw ut();return t+(this.isRed()?0:1)}}Ls.EMPTY=null,Ls.RED=!0,Ls.BLACK=!1;Ls.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(t,r,a,i,l){return this}insert(t,r,a){return new Ls(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(t){this.comparator=t,this.data=new ds(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,a)=>(t(r),!1))}forEachInRange(t,r){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const i=a.getNext();if(this.comparator(i.key,t[1])>=0)return;r(i.key)}}forEachWhile(t,r){let a;for(a=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new nj(this.data.getIterator())}getIteratorFrom(t){return new nj(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(a=>{r=r.add(a)}),r}isEqual(t){if(!(t instanceof ks)||this.size!==t.size)return!1;const r=this.data.getIterator(),a=t.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,l=a.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new ks(this.comparator);return r.data=t,r}}class nj{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(t){this.fields=t,t.sort(Os.comparator)}static empty(){return new Pr([])}unionWith(t){let r=new ks(Os.comparator);for(const a of this.fields)r=r.add(a);for(const a of t)r=r.add(a);return new Pr(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return zo(this.fields,t.fields,(r,a)=>r.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(i){try{return atob(i)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new W4("Invalid base64 string: "+l):l}}(t);return new Us(r)}static fromUint8Array(t){const r=function(i){let l="";for(let o=0;o<i.length;++o)l+=String.fromCharCode(i[o]);return l}(t);return new Us(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const a=new Uint8Array(r.length);for(let i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return vt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Us.EMPTY_BYTE_STRING=new Us("");const OD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $n(s){if(Rt(!!s),typeof s=="string"){let t=0;const r=OD.exec(s);if(Rt(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),t=Number(i)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:fs(s.seconds),nanos:fs(s.nanos)}}function fs(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Wn(s){return typeof s=="string"?Us.fromBase64String(s):Us.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4="server_timestamp",H4="__type__",G4="__previous_value__",K4="__local_write_time__";function Zf(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[H4])===null||r===void 0?void 0:r.stringValue)===q4}function fm(s){const t=s.mapValue.fields[G4];return Zf(t)?fm(t):t}function Tc(s){const t=$n(s.mapValue.fields[K4].timestampValue);return new Qt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(t,r,a,i,l,o,c,d,x){this.databaseId=t,this.appId=r,this.persistenceKey=a,this.host=i,this.ssl=l,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=x}}const vx="(default)";class _c{constructor(t,r){this.projectId=t,this.database=r||vx}static empty(){return new _c("","")}get isDefaultDatabase(){return this.database===vx}isEqual(t){return t instanceof _c&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4="__type__",Y4="__max__",su={mapValue:{fields:{__type__:{stringValue:Y4}}}},X4="__vector__",jx="value";function qn(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Zf(s)?4:BD(s)?9007199254740991:zD(s)?10:11:ut()}function Pa(s,t){if(s===t)return!0;const r=qn(s);if(r!==qn(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Tc(s).isEqual(Tc(t));case 3:return function(i,l){if(typeof i.timestampValue=="string"&&typeof l.timestampValue=="string"&&i.timestampValue.length===l.timestampValue.length)return i.timestampValue===l.timestampValue;const o=$n(i.timestampValue),c=$n(l.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(i,l){return Wn(i.bytesValue).isEqual(Wn(l.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(i,l){return fs(i.geoPointValue.latitude)===fs(l.geoPointValue.latitude)&&fs(i.geoPointValue.longitude)===fs(l.geoPointValue.longitude)}(s,t);case 2:return function(i,l){if("integerValue"in i&&"integerValue"in l)return fs(i.integerValue)===fs(l.integerValue);if("doubleValue"in i&&"doubleValue"in l){const o=fs(i.doubleValue),c=fs(l.doubleValue);return o===c?bx(o)===bx(c):isNaN(o)&&isNaN(c)}return!1}(s,t);case 9:return zo(s.arrayValue.values||[],t.arrayValue.values||[],Pa);case 10:case 11:return function(i,l){const o=i.mapValue.fields||{},c=l.mapValue.fields||{};if(aj(o)!==aj(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!Pa(o[d],c[d])))return!1;return!0}(s,t);default:return ut()}}function Dc(s,t){return(s.values||[]).find(r=>Pa(r,t))!==void 0}function Bo(s,t){if(s===t)return 0;const r=qn(s),a=qn(t);if(r!==a)return vt(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return vt(s.booleanValue,t.booleanValue);case 2:return function(l,o){const c=fs(l.integerValue||l.doubleValue),d=fs(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(s,t);case 3:return ij(s.timestampValue,t.timestampValue);case 4:return ij(Tc(s),Tc(t));case 5:return l0(s.stringValue,t.stringValue);case 6:return function(l,o){const c=Wn(l),d=Wn(o);return c.compareTo(d)}(s.bytesValue,t.bytesValue);case 7:return function(l,o){const c=l.split("/"),d=o.split("/");for(let x=0;x<c.length&&x<d.length;x++){const f=vt(c[x],d[x]);if(f!==0)return f}return vt(c.length,d.length)}(s.referenceValue,t.referenceValue);case 8:return function(l,o){const c=vt(fs(l.latitude),fs(o.latitude));return c!==0?c:vt(fs(l.longitude),fs(o.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return oj(s.arrayValue,t.arrayValue);case 10:return function(l,o){var c,d,x,f;const j=l.fields||{},w=o.fields||{},S=(c=j[jx])===null||c===void 0?void 0:c.arrayValue,g=(d=w[jx])===null||d===void 0?void 0:d.arrayValue,V=vt(((x=S==null?void 0:S.values)===null||x===void 0?void 0:x.length)||0,((f=g==null?void 0:g.values)===null||f===void 0?void 0:f.length)||0);return V!==0?V:oj(S,g)}(s.mapValue,t.mapValue);case 11:return function(l,o){if(l===su.mapValue&&o===su.mapValue)return 0;if(l===su.mapValue)return 1;if(o===su.mapValue)return-1;const c=l.fields||{},d=Object.keys(c),x=o.fields||{},f=Object.keys(x);d.sort(),f.sort();for(let j=0;j<d.length&&j<f.length;++j){const w=l0(d[j],f[j]);if(w!==0)return w;const S=Bo(c[d[j]],x[f[j]]);if(S!==0)return S}return vt(d.length,f.length)}(s.mapValue,t.mapValue);default:throw ut()}}function ij(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return vt(s,t);const r=$n(s),a=$n(t),i=vt(r.seconds,a.seconds);return i!==0?i:vt(r.nanos,a.nanos)}function oj(s,t){const r=s.values||[],a=t.values||[];for(let i=0;i<r.length&&i<a.length;++i){const l=Bo(r[i],a[i]);if(l)return l}return vt(r.length,a.length)}function Fo(s){return c0(s)}function c0(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(r){const a=$n(r);return`time(${a.seconds},${a.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(r){return Wn(r).toBase64()}(s.bytesValue):"referenceValue"in s?function(r){return dt.fromName(r).toString()}(s.referenceValue):"geoPointValue"in s?function(r){return`geo(${r.latitude},${r.longitude})`}(s.geoPointValue):"arrayValue"in s?function(r){let a="[",i=!0;for(const l of r.values||[])i?i=!1:a+=",",a+=c0(l);return a+"]"}(s.arrayValue):"mapValue"in s?function(r){const a=Object.keys(r.fields||{}).sort();let i="{",l=!0;for(const o of a)l?l=!1:i+=",",i+=`${o}:${c0(r.fields[o])}`;return i+"}"}(s.mapValue):ut()}function Su(s){switch(qn(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=fm(s);return t?16+Su(t):16;case 5:return 2*s.stringValue.length;case 6:return Wn(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((i,l)=>i+Su(l),0)}(s.arrayValue);case 10:case 11:return function(a){let i=0;return ei(a.fields,(l,o)=>{i+=l.length+Su(o)}),i}(s.mapValue);default:throw ut()}}function lj(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function d0(s){return!!s&&"integerValue"in s}function eg(s){return!!s&&"arrayValue"in s}function cj(s){return!!s&&"nullValue"in s}function dj(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Eu(s){return!!s&&"mapValue"in s}function zD(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[Q4])===null||r===void 0?void 0:r.stringValue)===X4}function Xl(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return ei(s.mapValue.fields,(r,a)=>t.mapValue.fields[r]=Xl(a)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Xl(s.arrayValue.values[r]);return t}return Object.assign({},s)}function BD(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Y4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(t){this.value=t}static empty(){return new nr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let a=0;a<t.length-1;++a)if(r=(r.mapValue.fields||{})[t.get(a)],!Eu(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Xl(r)}setAll(t){let r=Os.emptyPath(),a={},i=[];t.forEach((o,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,a,i),a={},i=[],r=c.popLast()}o?a[c.lastSegment()]=Xl(o):i.push(c.lastSegment())});const l=this.getFieldsMap(r);this.applyChanges(l,a,i)}delete(t){const r=this.field(t.popLast());Eu(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return Pa(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<t.length;++a){let i=r.mapValue.fields[t.get(a)];Eu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[t.get(a)]=i),r=i}return r.mapValue.fields}applyChanges(t,r,a){ei(r,(i,l)=>t[i]=l);for(const i of a)delete t[i]}clone(){return new nr(Xl(this.value))}}function J4(s){const t=[];return ei(s.fields,(r,a)=>{const i=new Os([r]);if(Eu(a)){const l=J4(a.mapValue).fields;if(l.length===0)t.push(i);else for(const o of l)t.push(i.child(o))}else t.push(i)}),new Pr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(t,r,a,i,l,o,c){this.key=t,this.documentType=r,this.version=a,this.readTime=i,this.createTime=l,this.data=o,this.documentState=c}static newInvalidDocument(t){return new Cs(t,0,xt.min(),xt.min(),xt.min(),nr.empty(),0)}static newFoundDocument(t,r,a,i){return new Cs(t,1,r,xt.min(),a,i,0)}static newNoDocument(t,r){return new Cs(t,2,r,xt.min(),xt.min(),nr.empty(),0)}static newUnknownDocument(t,r){return new Cs(t,3,r,xt.min(),xt.min(),nr.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(xt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Cs&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Cs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(t,r){this.position=t,this.inclusive=r}}function uj(s,t,r){let a=0;for(let i=0;i<s.position.length;i++){const l=t[i],o=s.position[i];if(l.field.isKeyField()?a=dt.comparator(dt.fromName(o.referenceValue),r.key):a=Bo(o,r.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function xj(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!Pa(s.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(t,r="asc"){this.field=t,this.dir=r}}function FD(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{}class vs extends Z4{constructor(t,r,a){super(),this.field=t,this.op=r,this.value=a}static create(t,r,a){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,a):new $D(t,r,a):r==="array-contains"?new HD(t,a):r==="in"?new GD(t,a):r==="not-in"?new KD(t,a):r==="array-contains-any"?new QD(t,a):new vs(t,r,a)}static createKeyFieldInFilter(t,r,a){return r==="in"?new WD(t,a):new qD(t,a)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Bo(r,this.value)):r!==null&&qn(this.value)===qn(r)&&this.matchesComparison(Bo(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ia extends Z4{constructor(t,r){super(),this.filters=t,this.op=r,this.ce=null}static create(t,r){return new ia(t,r)}matches(t){return e3(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function e3(s){return s.op==="and"}function t3(s){return UD(s)&&e3(s)}function UD(s){for(const t of s.filters)if(t instanceof ia)return!1;return!0}function u0(s){if(s instanceof vs)return s.field.canonicalString()+s.op.toString()+Fo(s.value);if(t3(s))return s.filters.map(t=>u0(t)).join(",");{const t=s.filters.map(r=>u0(r)).join(",");return`${s.op}(${t})`}}function s3(s,t){return s instanceof vs?function(a,i){return i instanceof vs&&a.op===i.op&&a.field.isEqual(i.field)&&Pa(a.value,i.value)}(s,t):s instanceof ia?function(a,i){return i instanceof ia&&a.op===i.op&&a.filters.length===i.filters.length?a.filters.reduce((l,o,c)=>l&&s3(o,i.filters[c]),!0):!1}(s,t):void ut()}function r3(s){return s instanceof vs?function(r){return`${r.field.canonicalString()} ${r.op} ${Fo(r.value)}`}(s):s instanceof ia?function(r){return r.op.toString()+" {"+r.getFilters().map(r3).join(" ,")+"}"}(s):"Filter"}class $D extends vs{constructor(t,r,a){super(t,r,a),this.key=dt.fromName(a.referenceValue)}matches(t){const r=dt.comparator(t.key,this.key);return this.matchesComparison(r)}}class WD extends vs{constructor(t,r){super(t,"in",r),this.keys=a3("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class qD extends vs{constructor(t,r){super(t,"not-in",r),this.keys=a3("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function a3(s,t){var r;return(((r=t.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(a=>dt.fromName(a.referenceValue))}class HD extends vs{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return eg(r)&&Dc(r.arrayValue,this.value)}}class GD extends vs{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Dc(this.value.arrayValue,r)}}class KD extends vs{constructor(t,r){super(t,"not-in",r)}matches(t){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&!Dc(this.value.arrayValue,r)}}class QD extends vs{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!eg(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>Dc(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(t,r=null,a=[],i=[],l=null,o=null,c=null){this.path=t,this.collectionGroup=r,this.orderBy=a,this.filters=i,this.limit=l,this.startAt=o,this.endAt=c,this.le=null}}function mj(s,t=null,r=[],a=[],i=null,l=null,o=null){return new YD(s,t,r,a,i,l,o)}function tg(s){const t=ft(s);if(t.le===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(a=>u0(a)).join(","),r+="|ob:",r+=t.orderBy.map(a=>function(l){return l.field.canonicalString()+l.dir}(a)).join(","),sd(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>Fo(a)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>Fo(a)).join(",")),t.le=r}return t.le}function sg(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<s.orderBy.length;r++)if(!FD(s.orderBy[r],t.orderBy[r]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let r=0;r<s.filters.length;r++)if(!s3(s.filters[r],t.filters[r]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!xj(s.startAt,t.startAt)&&xj(s.endAt,t.endAt)}function x0(s){return dt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(t,r=null,a=[],i=[],l=null,o="F",c=null,d=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=i,this.limit=l,this.limitType=o,this.startAt=c,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function XD(s,t,r,a,i,l,o,c){return new sl(s,t,r,a,i,l,o,c)}function gm(s){return new sl(s)}function hj(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function n3(s){return s.collectionGroup!==null}function Jl(s){const t=ft(s);if(t.he===null){t.he=[];const r=new Set;for(const l of t.explicitOrderBy)t.he.push(l),r.add(l.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new ks(Os.comparator);return o.filters.forEach(d=>{d.getFlattenedFilters().forEach(x=>{x.isInequality()&&(c=c.add(x.field))})}),c})(t).forEach(l=>{r.has(l.canonicalString())||l.isKeyField()||t.he.push(new Ac(l,a))}),r.has(Os.keyField().canonicalString())||t.he.push(new Ac(Os.keyField(),a))}return t.he}function ba(s){const t=ft(s);return t.Pe||(t.Pe=JD(t,Jl(s))),t.Pe}function JD(s,t){if(s.limitType==="F")return mj(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(i=>{const l=i.dir==="desc"?"asc":"desc";return new Ac(i.field,l)});const r=s.endAt?new Nx(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Nx(s.startAt.position,s.startAt.inclusive):null;return mj(s.path,s.collectionGroup,t,s.filters,s.limit,r,a)}}function m0(s,t){const r=s.filters.concat([t]);return new sl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),r,s.limit,s.limitType,s.startAt,s.endAt)}function wx(s,t,r){return new sl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,r,s.startAt,s.endAt)}function ym(s,t){return sg(ba(s),ba(t))&&s.limitType===t.limitType}function i3(s){return`${tg(ba(s))}|lt:${s.limitType}`}function Ji(s){return`Query(target=${function(r){let a=r.path.canonicalString();return r.collectionGroup!==null&&(a+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(a+=`, filters: [${r.filters.map(i=>r3(i)).join(", ")}]`),sd(r.limit)||(a+=", limit: "+r.limit),r.orderBy.length>0&&(a+=`, orderBy: [${r.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),r.startAt&&(a+=", startAt: ",a+=r.startAt.inclusive?"b:":"a:",a+=r.startAt.position.map(i=>Fo(i)).join(",")),r.endAt&&(a+=", endAt: ",a+=r.endAt.inclusive?"a:":"b:",a+=r.endAt.position.map(i=>Fo(i)).join(",")),`Target(${a})`}(ba(s))}; limitType=${s.limitType})`}function bm(s,t){return t.isFoundDocument()&&function(a,i){const l=i.key.path;return a.collectionGroup!==null?i.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):dt.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)}(s,t)&&function(a,i){for(const l of Jl(a))if(!l.field.isKeyField()&&i.data.field(l.field)===null)return!1;return!0}(s,t)&&function(a,i){for(const l of a.filters)if(!l.matches(i))return!1;return!0}(s,t)&&function(a,i){return!(a.startAt&&!function(o,c,d){const x=uj(o,c,d);return o.inclusive?x<=0:x<0}(a.startAt,Jl(a),i)||a.endAt&&!function(o,c,d){const x=uj(o,c,d);return o.inclusive?x>=0:x>0}(a.endAt,Jl(a),i))}(s,t)}function ZD(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function o3(s){return(t,r)=>{let a=!1;for(const i of Jl(s)){const l=e8(i,t,r);if(l!==0)return l;a=a||i.field.isKeyField()}return 0}}function e8(s,t,r){const a=s.field.isKeyField()?dt.comparator(t.key,r.key):function(l,o,c){const d=o.data.field(l),x=c.data.field(l);return d!==null&&x!==null?Bo(d,x):ut()}(s.field,t,r);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return ut()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a!==void 0){for(const[i,l]of a)if(this.equalsFn(i,t))return l}}has(t){return this.get(t)!==void 0}set(t,r){const a=this.mapKeyFn(t),i=this.inner[a];if(i===void 0)return this.inner[a]=[[t,r]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],t))return void(i[l]=[t,r]);i.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return!1;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],t))return a.length===1?delete this.inner[r]:a.splice(i,1),this.innerSize--,!0;return!1}forEach(t){ei(this.inner,(r,a)=>{for(const[i,l]of a)t(i,l)})}isEmpty(){return $4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8=new ds(dt.comparator);function Ja(){return t8}const l3=new ds(dt.comparator);function Vl(...s){let t=l3;for(const r of s)t=t.insert(r.key,r);return t}function c3(s){let t=l3;return s.forEach((r,a)=>t=t.insert(r,a.overlayedDocument)),t}function hi(){return Zl()}function d3(){return Zl()}function Zl(){return new Bi(s=>s.toString(),(s,t)=>s.isEqual(t))}const s8=new ds(dt.comparator),r8=new ks(dt.comparator);function Ct(...s){let t=r8;for(const r of s)t=t.add(r);return t}const a8=new ks(vt);function n8(){return a8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bx(t)?"-0":t}}function u3(s){return{integerValue:""+s}}function x3(s,t){return RD(t)?u3(t):rg(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(){this._=void 0}}function i8(s,t,r){return s instanceof Rc?function(i,l){const o={fields:{[H4]:{stringValue:q4},[K4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return l&&Zf(l)&&(l=fm(l)),l&&(o.fields[G4]=l),{mapValue:o}}(r,t):s instanceof Mc?h3(s,t):s instanceof Lc?p3(s,t):function(i,l){const o=m3(i,l),c=pj(o)+pj(i.Ie);return d0(o)&&d0(i.Ie)?u3(c):rg(i.serializer,c)}(s,t)}function o8(s,t,r){return s instanceof Mc?h3(s,t):s instanceof Lc?p3(s,t):r}function m3(s,t){return s instanceof Oc?function(a){return d0(a)||function(l){return!!l&&"doubleValue"in l}(a)}(t)?t:{integerValue:0}:null}class Rc extends vm{}class Mc extends vm{constructor(t){super(),this.elements=t}}function h3(s,t){const r=f3(t);for(const a of s.elements)r.some(i=>Pa(i,a))||r.push(a);return{arrayValue:{values:r}}}class Lc extends vm{constructor(t){super(),this.elements=t}}function p3(s,t){let r=f3(t);for(const a of s.elements)r=r.filter(i=>!Pa(i,a));return{arrayValue:{values:r}}}class Oc extends vm{constructor(t,r){super(),this.serializer=t,this.Ie=r}}function pj(s){return fs(s.integerValue||s.doubleValue)}function f3(s){return eg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(t,r){this.field=t,this.transform=r}}function l8(s,t){return s.field.isEqual(t.field)&&function(a,i){return a instanceof Mc&&i instanceof Mc||a instanceof Lc&&i instanceof Lc?zo(a.elements,i.elements,Pa):a instanceof Oc&&i instanceof Oc?Pa(a.Ie,i.Ie):a instanceof Rc&&i instanceof Rc}(s.transform,t.transform)}class c8{constructor(t,r){this.version=t,this.transformResults=r}}class Vs{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Vs}static exists(t){return new Vs(void 0,t)}static updateTime(t){return new Vs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Cu(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class jm{}function y3(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Nm(s.key,Vs.none()):new rd(s.key,s.data,Vs.none());{const r=s.data,a=nr.empty();let i=new ks(Os.comparator);for(let l of t.fields)if(!i.has(l)){let o=r.field(l);o===null&&l.length>1&&(l=l.popLast(),o=r.field(l)),o===null?a.delete(l):a.set(l,o),i=i.add(l)}return new ti(s.key,a,new Pr(i.toArray()),Vs.none())}}function d8(s,t,r){s instanceof rd?function(i,l,o){const c=i.value.clone(),d=gj(i.fieldTransforms,l,o.transformResults);c.setAll(d),l.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(s,t,r):s instanceof ti?function(i,l,o){if(!Cu(i.precondition,l))return void l.convertToUnknownDocument(o.version);const c=gj(i.fieldTransforms,l,o.transformResults),d=l.data;d.setAll(b3(i)),d.setAll(c),l.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(s,t,r):function(i,l,o){l.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,r)}function ec(s,t,r,a){return s instanceof rd?function(l,o,c,d){if(!Cu(l.precondition,o))return c;const x=l.value.clone(),f=yj(l.fieldTransforms,d,o);return x.setAll(f),o.convertToFoundDocument(o.version,x).setHasLocalMutations(),null}(s,t,r,a):s instanceof ti?function(l,o,c,d){if(!Cu(l.precondition,o))return c;const x=yj(l.fieldTransforms,d,o),f=o.data;return f.setAll(b3(l)),f.setAll(x),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(j=>j.field))}(s,t,r,a):function(l,o,c){return Cu(l.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(s,t,r)}function u8(s,t){let r=null;for(const a of s.fieldTransforms){const i=t.data.field(a.field),l=m3(a.transform,i||null);l!=null&&(r===null&&(r=nr.empty()),r.set(a.field,l))}return r||null}function fj(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(a,i){return a===void 0&&i===void 0||!(!a||!i)&&zo(a,i,(l,o)=>l8(l,o))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class rd extends jm{constructor(t,r,a,i=[]){super(),this.key=t,this.value=r,this.precondition=a,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ti extends jm{constructor(t,r,a,i,l=[]){super(),this.key=t,this.data=r,this.fieldMask=a,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function b3(s){const t=new Map;return s.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=s.data.field(r);t.set(r,a)}}),t}function gj(s,t,r){const a=new Map;Rt(s.length===r.length);for(let i=0;i<r.length;i++){const l=s[i],o=l.transform,c=t.data.field(l.field);a.set(l.field,o8(o,c,r[i]))}return a}function yj(s,t,r){const a=new Map;for(const i of s){const l=i.transform,o=r.data.field(i.field);a.set(i.field,i8(l,o,t))}return a}class Nm extends jm{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class v3 extends jm{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(t,r,a,i){this.batchId=t,this.localWriteTime=r,this.baseMutations=a,this.mutations=i}applyToRemoteDocument(t,r){const a=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(t.key)&&d8(l,t,a[i])}}applyToLocalView(t,r){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(r=ec(a,t,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(r=ec(a,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const a=d3();return this.mutations.forEach(i=>{const l=t.get(i.key),o=l.overlayedDocument;let c=this.applyToLocalView(o,l.mutatedFields);c=r.has(i.key)?null:c;const d=y3(o,c);d!==null&&a.set(i.key,d),o.isValidDocument()||o.convertToNoDocument(xt.min())}),a}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Ct())}isEqual(t){return this.batchId===t.batchId&&zo(this.mutations,t.mutations,(r,a)=>fj(r,a))&&zo(this.baseMutations,t.baseMutations,(r,a)=>fj(r,a))}}class ag{constructor(t,r,a,i){this.batch=t,this.commitVersion=r,this.mutationResults=a,this.docVersions=i}static from(t,r,a){Rt(t.mutations.length===a.length);let i=function(){return s8}();const l=t.mutations;for(let o=0;o<l.length;o++)i=i.insert(l[o].key,a[o].version);return new ag(t,r,a,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ys,At;function j3(s){switch(s){case Pe.OK:return ut();case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0;default:return ut()}}function N3(s){if(s===void 0)return Xa("GRPC error has no .code"),Pe.UNKNOWN;switch(s){case ys.OK:return Pe.OK;case ys.CANCELLED:return Pe.CANCELLED;case ys.UNKNOWN:return Pe.UNKNOWN;case ys.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case ys.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case ys.INTERNAL:return Pe.INTERNAL;case ys.UNAVAILABLE:return Pe.UNAVAILABLE;case ys.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case ys.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case ys.NOT_FOUND:return Pe.NOT_FOUND;case ys.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case ys.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case ys.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case ys.ABORTED:return Pe.ABORTED;case ys.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case ys.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case ys.DATA_LOSS:return Pe.DATA_LOSS;default:return ut()}}(At=ys||(ys={}))[At.OK=0]="OK",At[At.CANCELLED=1]="CANCELLED",At[At.UNKNOWN=2]="UNKNOWN",At[At.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",At[At.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",At[At.NOT_FOUND=5]="NOT_FOUND",At[At.ALREADY_EXISTS=6]="ALREADY_EXISTS",At[At.PERMISSION_DENIED=7]="PERMISSION_DENIED",At[At.UNAUTHENTICATED=16]="UNAUTHENTICATED",At[At.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",At[At.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",At[At.ABORTED=10]="ABORTED",At[At.OUT_OF_RANGE=11]="OUT_OF_RANGE",At[At.UNIMPLEMENTED=12]="UNIMPLEMENTED",At[At.INTERNAL=13]="INTERNAL",At[At.UNAVAILABLE=14]="UNAVAILABLE",At[At.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p8=new On([4294967295,4294967295],0);function bj(s){const t=B4().encode(s),r=new A4;return r.update(t),new Uint8Array(r.digest())}function vj(s){const t=new DataView(s.buffer),r=t.getUint32(0,!0),a=t.getUint32(4,!0),i=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new On([r,a],0),new On([i,l],0)]}class ng{constructor(t,r,a){if(this.bitmap=t,this.padding=r,this.hashCount=a,r<0||r>=8)throw new zl(`Invalid padding: ${r}`);if(a<0)throw new zl(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new zl(`Invalid hash count: ${a}`);if(t.length===0&&r!==0)throw new zl(`Invalid padding when bitmap length is 0: ${r}`);this.Ee=8*t.length-r,this.de=On.fromNumber(this.Ee)}Ae(t,r,a){let i=t.add(r.multiply(On.fromNumber(a)));return i.compare(p8)===1&&(i=new On([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const r=bj(t),[a,i]=vj(r);for(let l=0;l<this.hashCount;l++){const o=this.Ae(a,i,l);if(!this.Re(o))return!1}return!0}static create(t,r,a){const i=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),o=new ng(l,i,r);return a.forEach(c=>o.insert(c)),o}insert(t){if(this.Ee===0)return;const r=bj(t),[a,i]=vj(r);for(let l=0;l<this.hashCount;l++){const o=this.Ae(a,i,l);this.Ve(o)}}Ve(t){const r=Math.floor(t/8),a=t%8;this.bitmap[r]|=1<<a}}class zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(t,r,a,i,l){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,r,a){const i=new Map;return i.set(t,ad.createSynthesizedTargetChangeForCurrentChange(t,r,a)),new wm(xt.min(),i,new ds(vt),Ja(),Ct())}}class ad{constructor(t,r,a,i,l){this.resumeToken=t,this.current=r,this.addedDocuments=a,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,r,a){return new ad(a,r,Ct(),Ct(),Ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(t,r,a,i){this.me=t,this.removedTargetIds=r,this.key=a,this.fe=i}}class w3{constructor(t,r){this.targetId=t,this.ge=r}}class k3{constructor(t,r,a=Us.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=r,this.resumeToken=a,this.cause=i}}class jj{constructor(){this.pe=0,this.ye=Nj(),this.we=Us.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Ct(),r=Ct(),a=Ct();return this.ye.forEach((i,l)=>{switch(l){case 0:t=t.add(i);break;case 2:r=r.add(i);break;case 1:a=a.add(i);break;default:ut()}}),new ad(this.we,this.Se,t,r,a)}Me(){this.be=!1,this.ye=Nj()}xe(t,r){this.be=!0,this.ye=this.ye.insert(t,r)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Rt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class f8{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Ja(),this.$e=ru(),this.Ue=ru(),this.Ke=new ds(vt)}We(t){for(const r of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(r,t.fe):this.ze(r,t.key,t.fe);for(const r of t.removedTargetIds)this.ze(r,t.key,t.fe)}je(t){this.forEachTarget(t,r=>{const a=this.He(r);switch(t.state){case 0:this.Je(r)&&a.Ce(t.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(t.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(r);break;case 3:this.Je(r)&&(a.Le(),a.Ce(t.resumeToken));break;case 4:this.Je(r)&&(this.Ye(r),a.Ce(t.resumeToken));break;default:ut()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.qe.forEach((a,i)=>{this.Je(i)&&r(i)})}Ze(t){const r=t.targetId,a=t.ge.count,i=this.Xe(r);if(i){const l=i.target;if(x0(l))if(a===0){const o=new dt(l.path);this.ze(r,o,Cs.newNoDocument(o,xt.min()))}else Rt(a===1);else{const o=this.et(r);if(o!==a){const c=this.tt(t),d=c?this.nt(c,t,o):1;if(d!==0){this.Ye(r);const x=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(r,x)}}}}}tt(t){const r=t.ge.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:a="",padding:i=0},hashCount:l=0}=r;let o,c;try{o=Wn(a).toUint8Array()}catch(d){if(d instanceof W4)return Vo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new ng(o,i,l)}catch(d){return Vo(d instanceof zl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ee===0?null:c}nt(t,r,a){return r.ge.count===a-this.st(t,r.targetId)?0:2}st(t,r){const a=this.ke.getRemoteKeysForTarget(r);let i=0;return a.forEach(l=>{const o=this.ke.it(),c=`projects/${o.projectId}/databases/${o.database}/documents/${l.path.canonicalString()}`;t.mightContain(c)||(this.ze(r,l,null),i++)}),i}ot(t){const r=new Map;this.qe.forEach((l,o)=>{const c=this.Xe(o);if(c){if(l.current&&x0(c.target)){const d=new dt(c.target.path);this._t(d).has(o)||this.ut(o,d)||this.ze(o,d,Cs.newNoDocument(d,t))}l.ve&&(r.set(o,l.Fe()),l.Me())}});let a=Ct();this.Ue.forEach((l,o)=>{let c=!0;o.forEachWhile(d=>{const x=this.Xe(d);return!x||x.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(a=a.add(l))}),this.Qe.forEach((l,o)=>o.setReadTime(t));const i=new wm(t,r,this.Ke,this.Qe,a);return this.Qe=Ja(),this.$e=ru(),this.Ue=ru(),this.Ke=new ds(vt),i}Ge(t,r){if(!this.Je(t))return;const a=this.ut(t,r.key)?2:0;this.He(t).xe(r.key,a),this.Qe=this.Qe.insert(r.key,r),this.$e=this.$e.insert(r.key,this._t(r.key).add(t)),this.Ue=this.Ue.insert(r.key,this.ct(r.key).add(t))}ze(t,r,a){if(!this.Je(t))return;const i=this.He(t);this.ut(t,r)?i.xe(r,1):i.Oe(r),this.Ue=this.Ue.insert(r,this.ct(r).delete(t)),this.Ue=this.Ue.insert(r,this.ct(r).add(t)),a&&(this.Qe=this.Qe.insert(r,a))}removeTarget(t){this.qe.delete(t)}et(t){const r=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let r=this.qe.get(t);return r||(r=new jj,this.qe.set(t,r)),r}ct(t){let r=this.Ue.get(t);return r||(r=new ks(vt),this.Ue=this.Ue.insert(t,r)),r}_t(t){let r=this.$e.get(t);return r||(r=new ks(vt),this.$e=this.$e.insert(t,r)),r}Je(t){const r=this.Xe(t)!==null;return r||Qe("WatchChangeAggregator","Detected inactive target",t),r}Xe(t){const r=this.qe.get(t);return r&&r.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new jj),this.ke.getRemoteKeysForTarget(t).forEach(r=>{this.ze(t,r,null)})}ut(t,r){return this.ke.getRemoteKeysForTarget(t).has(r)}}function ru(){return new ds(dt.comparator)}function Nj(){return new ds(dt.comparator)}const g8=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),y8=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),b8=(()=>({and:"AND",or:"OR"}))();class v8{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function h0(s,t){return s.useProto3Json||sd(t)?t:{value:t}}function kx(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function I3(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function j8(s,t){return kx(s,t.toTimestamp())}function Er(s){return Rt(!!s),xt.fromTimestamp(function(r){const a=$n(r);return new Qt(a.seconds,a.nanos)}(s))}function ig(s,t){return p0(s,t).canonicalString()}function p0(s,t){const r=function(i){return new Gt(["projects",i.projectId,"databases",i.database])}(s).child("documents");return t===void 0?r:r.child(t)}function P3(s){const t=Gt.fromString(s);return Rt(D3(t)),t}function Ix(s,t){return ig(s.databaseId,t.path)}function tc(s,t){const r=P3(t);if(r.get(1)!==s.databaseId.projectId)throw new qe(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new qe(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new dt(E3(r))}function S3(s,t){return ig(s.databaseId,t)}function N8(s){const t=P3(s);return t.length===4?Gt.emptyPath():E3(t)}function f0(s){return new Gt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function E3(s){return Rt(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function wj(s,t,r){return{name:Ix(s,t),fields:r.value.mapValue.fields}}function w8(s,t){return"found"in t?function(a,i){Rt(!!i.found),i.found.name,i.found.updateTime;const l=tc(a,i.found.name),o=Er(i.found.updateTime),c=i.found.createTime?Er(i.found.createTime):xt.min(),d=new nr({mapValue:{fields:i.found.fields}});return Cs.newFoundDocument(l,o,c,d)}(s,t):"missing"in t?function(a,i){Rt(!!i.missing),Rt(!!i.readTime);const l=tc(a,i.missing),o=Er(i.readTime);return Cs.newNoDocument(l,o)}(s,t):ut()}function k8(s,t){let r;if("targetChange"in t){t.targetChange;const a=function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:ut()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],l=function(x,f){return x.useProto3Json?(Rt(f===void 0||typeof f=="string"),Us.fromBase64String(f||"")):(Rt(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Us.fromUint8Array(f||new Uint8Array))}(s,t.targetChange.resumeToken),o=t.targetChange.cause,c=o&&function(x){const f=x.code===void 0?Pe.UNKNOWN:N3(x.code);return new qe(f,x.message||"")}(o);r=new k3(a,i,l,c||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const i=tc(s,a.document.name),l=Er(a.document.updateTime),o=a.document.createTime?Er(a.document.createTime):xt.min(),c=new nr({mapValue:{fields:a.document.fields}}),d=Cs.newFoundDocument(i,l,o,c),x=a.targetIds||[],f=a.removedTargetIds||[];r=new Tu(x,f,d.key,d)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const i=tc(s,a.document),l=a.readTime?Er(a.readTime):xt.min(),o=Cs.newNoDocument(i,l),c=a.removedTargetIds||[];r=new Tu([],c,o.key,o)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const i=tc(s,a.document),l=a.removedTargetIds||[];r=new Tu([],l,i,null)}else{if(!("filter"in t))return ut();{t.filter;const a=t.filter;a.targetId;const{count:i=0,unchangedNames:l}=a,o=new h8(i,l),c=a.targetId;r=new w3(c,o)}}return r}function C3(s,t){let r;if(t instanceof rd)r={update:wj(s,t.key,t.value)};else if(t instanceof Nm)r={delete:Ix(s,t.key)};else if(t instanceof ti)r={update:wj(s,t.key,t.data),updateMask:A8(t.fieldMask)};else{if(!(t instanceof v3))return ut();r={verify:Ix(s,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(a=>function(l,o){const c=o.transform;if(c instanceof Rc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Mc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Lc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Oc)return{fieldPath:o.field.canonicalString(),increment:c.Ie};throw ut()}(0,a))),t.precondition.isNone||(r.currentDocument=function(i,l){return l.updateTime!==void 0?{updateTime:j8(i,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ut()}(s,t.precondition)),r}function I8(s,t){return s&&s.length>0?(Rt(t!==void 0),s.map(r=>function(i,l){let o=i.updateTime?Er(i.updateTime):Er(l);return o.isEqual(xt.min())&&(o=Er(l)),new c8(o,i.transformResults||[])}(r,t))):[]}function P8(s,t){return{documents:[S3(s,t.path)]}}function S8(s,t){const r={structuredQuery:{}},a=t.path;let i;t.collectionGroup!==null?(i=a,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=a.popLast(),r.structuredQuery.from=[{collectionId:a.lastSegment()}]),r.parent=S3(s,i);const l=function(x){if(x.length!==0)return _3(ia.create(x,"and"))}(t.filters);l&&(r.structuredQuery.where=l);const o=function(x){if(x.length!==0)return x.map(f=>function(w){return{field:Zi(w.field),direction:T8(w.dir)}}(f))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);const c=h0(s,t.limit);return c!==null&&(r.structuredQuery.limit=c),t.startAt&&(r.structuredQuery.startAt=function(x){return{before:x.inclusive,values:x.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(x){return{before:!x.inclusive,values:x.position}}(t.endAt)),{ht:r,parent:i}}function E8(s){let t=N8(s.parent);const r=s.structuredQuery,a=r.from?r.from.length:0;let i=null;if(a>0){Rt(a===1);const f=r.from[0];f.allDescendants?i=f.collectionId:t=t.child(f.collectionId)}let l=[];r.where&&(l=function(j){const w=T3(j);return w instanceof ia&&t3(w)?w.getFilters():[w]}(r.where));let o=[];r.orderBy&&(o=function(j){return j.map(w=>function(g){return new Ac(eo(g.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(w))}(r.orderBy));let c=null;r.limit&&(c=function(j){let w;return w=typeof j=="object"?j.value:j,sd(w)?null:w}(r.limit));let d=null;r.startAt&&(d=function(j){const w=!!j.before,S=j.values||[];return new Nx(S,w)}(r.startAt));let x=null;return r.endAt&&(x=function(j){const w=!j.before,S=j.values||[];return new Nx(S,w)}(r.endAt)),XD(t,i,o,l,c,"F",d,x)}function C8(s,t){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut()}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function T3(s){return s.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const a=eo(r.unaryFilter.field);return vs.create(a,"==",{doubleValue:NaN});case"IS_NULL":const i=eo(r.unaryFilter.field);return vs.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=eo(r.unaryFilter.field);return vs.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=eo(r.unaryFilter.field);return vs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}(s):s.fieldFilter!==void 0?function(r){return vs.create(eo(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(r.fieldFilter.op),r.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(r){return ia.create(r.compositeFilter.filters.map(a=>T3(a)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ut()}}(r.compositeFilter.op))}(s):ut()}function T8(s){return g8[s]}function _8(s){return y8[s]}function D8(s){return b8[s]}function Zi(s){return{fieldPath:s.canonicalString()}}function eo(s){return Os.fromServerFormat(s.fieldPath)}function _3(s){return s instanceof vs?function(r){if(r.op==="=="){if(dj(r.value))return{unaryFilter:{field:Zi(r.field),op:"IS_NAN"}};if(cj(r.value))return{unaryFilter:{field:Zi(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(dj(r.value))return{unaryFilter:{field:Zi(r.field),op:"IS_NOT_NAN"}};if(cj(r.value))return{unaryFilter:{field:Zi(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zi(r.field),op:_8(r.op),value:r.value}}}(s):s instanceof ia?function(r){const a=r.getFilters().map(i=>_3(i));return a.length===1?a[0]:{compositeFilter:{op:D8(r.op),filters:a}}}(s):ut()}function A8(s){const t=[];return s.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function D3(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t,r,a,i,l=xt.min(),o=xt.min(),c=Us.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=r,this.purpose=a,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(t){return new In(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new In(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new In(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new In(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(t){this.Tt=t}}function M8(s){const t=E8({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?wx(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(){this.Tn=new O8}addToCollectionParentIndex(t,r){return this.Tn.add(r),Ce.resolve()}getCollectionParents(t,r){return Ce.resolve(this.Tn.getEntries(r))}addFieldIndex(t,r){return Ce.resolve()}deleteFieldIndex(t,r){return Ce.resolve()}deleteAllFieldIndexes(t){return Ce.resolve()}createTargetIndexes(t,r){return Ce.resolve()}getDocumentsMatchingTarget(t,r){return Ce.resolve(null)}getIndexType(t,r){return Ce.resolve(0)}getFieldIndexes(t,r){return Ce.resolve([])}getNextCollectionGroupToUpdate(t){return Ce.resolve(null)}getMinOffset(t,r){return Ce.resolve(Un.min())}getMinOffsetFromCollectionGroup(t,r){return Ce.resolve(Un.min())}updateCollectionGroup(t,r,a){return Ce.resolve()}updateIndexEntries(t,r){return Ce.resolve()}}class O8{constructor(){this.index={}}add(t){const r=t.lastSegment(),a=t.popLast(),i=this.index[r]||new ks(Gt.comparator),l=!i.has(a);return this.index[r]=i.add(a),l}has(t){const r=t.lastSegment(),a=t.popLast(),i=this.index[r];return i&&i.has(a)}getEntries(t){return(this.index[t]||new ks(Gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},A3=41943040;class ur{static withCacheSize(t){return new ur(t,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur.DEFAULT_COLLECTION_PERCENTILE=10,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ur.DEFAULT=new ur(A3,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ur.DISABLED=new ur(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new Uo(0)}static Kn(){return new Uo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij="LruGarbageCollector",V8=1048576;function Pj([s,t],[r,a]){const i=vt(s,r);return i===0?vt(t,a):i}class z8{constructor(t){this.Hn=t,this.buffer=new ks(Pj),this.Jn=0}Yn(){return++this.Jn}Zn(t){const r=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();Pj(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class B8{constructor(t,r,a){this.garbageCollector=t,this.asyncQueue=r,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Qe(Ij,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){tl(r)?Qe(Ij,"Ignoring IndexedDB error during garbage collection: ",r):await el(r)}await this.er(3e5)})}}class F8{constructor(t,r){this.tr=t,this.params=r}calculateTargetCount(t,r){return this.tr.nr(t).next(a=>Math.floor(r/100*a))}nthSequenceNumber(t,r){if(r===0)return Ce.resolve(pm.ae);const a=new z8(r);return this.tr.forEachTarget(t,i=>a.Zn(i.sequenceNumber)).next(()=>this.tr.rr(t,i=>a.Zn(i))).next(()=>a.maxValue)}removeTargets(t,r,a){return this.tr.removeTargets(t,r,a)}removeOrphanedDocuments(t,r){return this.tr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(Qe("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(kj)):this.getCacheSize(t).next(a=>a<this.params.cacheSizeCollectionThreshold?(Qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kj):this.ir(t,r))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,r){let a,i,l,o,c,d,x;const f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(j=>(j>this.params.maximumSequenceNumbersToCollect?(Qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${j}`),i=this.params.maximumSequenceNumbersToCollect):i=j,o=Date.now(),this.nthSequenceNumber(t,i))).next(j=>(a=j,c=Date.now(),this.removeTargets(t,a,r))).next(j=>(l=j,d=Date.now(),this.removeOrphanedDocuments(t,a))).next(j=>(x=Date.now(),Xi()<=Et.DEBUG&&Qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${l} targets in `+(d-c)+`ms
	Removed ${j} documents in `+(x-d)+`ms
Total Duration: ${x-f}ms`),Ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:j})))}}function U8(s,t){return new F8(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(){this.changes=new Bi(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,Cs.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const a=this.changes.get(r);return a!==void 0?Ce.resolve(a):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(t,r,a,i){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=i}getDocument(t,r){let a=null;return this.documentOverlayCache.getOverlay(t,r).next(i=>(a=i,this.remoteDocumentCache.getEntry(t,r))).next(i=>(a!==null&&ec(a.mutation,i,Pr.empty(),Qt.now()),i))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.getLocalViewOfDocuments(t,a,Ct()).next(()=>a))}getLocalViewOfDocuments(t,r,a=Ct()){const i=hi();return this.populateOverlays(t,i,r).next(()=>this.computeViews(t,r,i,a).next(l=>{let o=Vl();return l.forEach((c,d)=>{o=o.insert(c,d.overlayedDocument)}),o}))}getOverlayedDocuments(t,r){const a=hi();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,Ct()))}populateOverlays(t,r,a){const i=[];return a.forEach(l=>{r.has(l)||i.push(l)}),this.documentOverlayCache.getOverlays(t,i).next(l=>{l.forEach((o,c)=>{r.set(o,c)})})}computeViews(t,r,a,i){let l=Ja();const o=Zl(),c=function(){return Zl()}();return r.forEach((d,x)=>{const f=a.get(x.key);i.has(x.key)&&(f===void 0||f.mutation instanceof ti)?l=l.insert(x.key,x):f!==void 0?(o.set(x.key,f.mutation.getFieldMask()),ec(f.mutation,x,f.mutation.getFieldMask(),Qt.now())):o.set(x.key,Pr.empty())}),this.recalculateAndSaveOverlays(t,l).next(d=>(d.forEach((x,f)=>o.set(x,f)),r.forEach((x,f)=>{var j;return c.set(x,new W8(f,(j=o.get(x))!==null&&j!==void 0?j:null))}),c))}recalculateAndSaveOverlays(t,r){const a=Zl();let i=new ds((o,c)=>o-c),l=Ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(o=>{for(const c of o)c.keys().forEach(d=>{const x=r.get(d);if(x===null)return;let f=a.get(d)||Pr.empty();f=c.applyToLocalView(x,f),a.set(d,f);const j=(i.get(c.batchId)||Ct()).add(d);i=i.insert(c.batchId,j)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),x=d.key,f=d.value,j=d3();f.forEach(w=>{if(!l.has(w)){const S=y3(r.get(w),a.get(w));S!==null&&j.set(w,S),l=l.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(t,x,j))}return Ce.waitFor(o)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.recalculateAndSaveOverlays(t,a))}getDocumentsMatchingQuery(t,r,a,i){return function(o){return dt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):n3(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,a,i):this.getDocumentsMatchingCollectionQuery(t,r,a,i)}getNextDocuments(t,r,a,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,a,i).next(l=>{const o=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,a.largestBatchId,i-l.size):Ce.resolve(hi());let c=Cc,d=l;return o.next(x=>Ce.forEach(x,(f,j)=>(c<j.largestBatchId&&(c=j.largestBatchId),l.get(f)?Ce.resolve():this.remoteDocumentCache.getEntry(t,f).next(w=>{d=d.insert(f,w)}))).next(()=>this.populateOverlays(t,x,l)).next(()=>this.computeViews(t,d,x,Ct())).next(f=>({batchId:c,changes:c3(f)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new dt(r)).next(a=>{let i=Vl();return a.isFoundDocument()&&(i=i.insert(a.key,a)),i})}getDocumentsMatchingCollectionGroupQuery(t,r,a,i){const l=r.collectionGroup;let o=Vl();return this.indexManager.getCollectionParents(t,l).next(c=>Ce.forEach(c,d=>{const x=function(j,w){return new sl(w,null,j.explicitOrderBy.slice(),j.filters.slice(),j.limit,j.limitType,j.startAt,j.endAt)}(r,d.child(l));return this.getDocumentsMatchingCollectionQuery(t,x,a,i).next(f=>{f.forEach((j,w)=>{o=o.insert(j,w)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,r,a,i){let l;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,a.largestBatchId).next(o=>(l=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,a,l,i))).next(o=>{l.forEach((d,x)=>{const f=x.getKey();o.get(f)===null&&(o=o.insert(f,Cs.newInvalidDocument(f)))});let c=Vl();return o.forEach((d,x)=>{const f=l.get(d);f!==void 0&&ec(f.mutation,x,Pr.empty(),Qt.now()),bm(r,x)&&(c=c.insert(d,x))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,r){return Ce.resolve(this.dr.get(r))}saveBundleMetadata(t,r){return this.dr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Er(i.createTime)}}(r)),Ce.resolve()}getNamedQuery(t,r){return Ce.resolve(this.Ar.get(r))}saveNamedQuery(t,r){return this.Ar.set(r.name,function(i){return{name:i.name,query:M8(i.bundledQuery),readTime:Er(i.readTime)}}(r)),Ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(){this.overlays=new ds(dt.comparator),this.Rr=new Map}getOverlay(t,r){return Ce.resolve(this.overlays.get(r))}getOverlays(t,r){const a=hi();return Ce.forEach(r,i=>this.getOverlay(t,i).next(l=>{l!==null&&a.set(i,l)})).next(()=>a)}saveOverlays(t,r,a){return a.forEach((i,l)=>{this.Et(t,r,l)}),Ce.resolve()}removeOverlaysForBatchId(t,r,a){const i=this.Rr.get(a);return i!==void 0&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(a)),Ce.resolve()}getOverlaysForCollection(t,r,a){const i=hi(),l=r.length+1,o=new dt(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,x=d.getKey();if(!r.isPrefixOf(x.path))break;x.path.length===l&&d.largestBatchId>a&&i.set(d.getKey(),d)}return Ce.resolve(i)}getOverlaysForCollectionGroup(t,r,a,i){let l=new ds((x,f)=>x-f);const o=this.overlays.getIterator();for(;o.hasNext();){const x=o.getNext().value;if(x.getKey().getCollectionGroup()===r&&x.largestBatchId>a){let f=l.get(x.largestBatchId);f===null&&(f=hi(),l=l.insert(x.largestBatchId,f)),f.set(x.getKey(),x)}}const c=hi(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((x,f)=>c.set(x,f)),!(c.size()>=i)););return Ce.resolve(c)}Et(t,r,a){const i=this.overlays.get(a.key);if(i!==null){const o=this.Rr.get(i.largestBatchId).delete(a.key);this.Rr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(a.key,new m8(r,a));let l=this.Rr.get(r);l===void 0&&(l=Ct(),this.Rr.set(r,l)),this.Rr.set(r,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(){this.sessionToken=Us.EMPTY_BYTE_STRING}getSessionToken(t){return Ce.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.Vr=new ks(Ps.mr),this.gr=new ks(Ps.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,r){const a=new Ps(t,r);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(t,r){t.forEach(a=>this.addReference(a,r))}removeReference(t,r){this.wr(new Ps(t,r))}Sr(t,r){t.forEach(a=>this.removeReference(a,r))}br(t){const r=new dt(new Gt([])),a=new Ps(r,t),i=new Ps(r,t+1),l=[];return this.gr.forEachInRange([a,i],o=>{this.wr(o),l.push(o.key)}),l}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const r=new dt(new Gt([])),a=new Ps(r,t),i=new Ps(r,t+1);let l=Ct();return this.gr.forEachInRange([a,i],o=>{l=l.add(o.key)}),l}containsKey(t){const r=new Ps(t,0),a=this.Vr.firstAfterOrEqual(r);return a!==null&&t.isEqual(a.key)}}class Ps{constructor(t,r){this.key=t,this.Cr=r}static mr(t,r){return dt.comparator(t.key,r.key)||vt(t.Cr,r.Cr)}static pr(t,r){return vt(t.Cr,r.Cr)||dt.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Fr=1,this.Mr=new ks(Ps.mr)}checkEmpty(t){return Ce.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,a,i){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new x8(l,r,a,i);this.mutationQueue.push(o);for(const c of i)this.Mr=this.Mr.add(new Ps(c.key,l)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return Ce.resolve(o)}lookupMutationBatch(t,r){return Ce.resolve(this.Or(r))}getNextMutationBatchAfterBatchId(t,r){const a=r+1,i=this.Nr(a),l=i<0?0:i;return Ce.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(this.mutationQueue.length===0?Jf:this.Fr-1)}getAllMutationBatches(t){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const a=new Ps(r,0),i=new Ps(r,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([a,i],o=>{const c=this.Or(o.Cr);l.push(c)}),Ce.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,r){let a=new ks(vt);return r.forEach(i=>{const l=new Ps(i,0),o=new Ps(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,o],c=>{a=a.add(c.Cr)})}),Ce.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(t,r){const a=r.path,i=a.length+1;let l=a;dt.isDocumentKey(l)||(l=l.child(""));const o=new Ps(new dt(l),0);let c=new ks(vt);return this.Mr.forEachWhile(d=>{const x=d.key.path;return!!a.isPrefixOf(x)&&(x.length===i&&(c=c.add(d.Cr)),!0)},o),Ce.resolve(this.Br(c))}Br(t){const r=[];return t.forEach(a=>{const i=this.Or(a);i!==null&&r.push(i)}),r}removeMutationBatch(t,r){Rt(this.Lr(r.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return Ce.forEach(r.mutations,i=>{const l=new Ps(i.key,r.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Mr=a})}qn(t){}containsKey(t,r){const a=new Ps(r,0),i=this.Mr.firstAfterOrEqual(a);return Ce.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ce.resolve()}Lr(t,r){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const r=this.Nr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(t){this.kr=t,this.docs=function(){return new ds(dt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const a=r.key,i=this.docs.get(a),l=i?i.size:0,o=this.kr(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:o}),this.size+=o-l,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const a=this.docs.get(r);return Ce.resolve(a?a.document.mutableCopy():Cs.newInvalidDocument(r))}getEntries(t,r){let a=Ja();return r.forEach(i=>{const l=this.docs.get(i);a=a.insert(i,l?l.document.mutableCopy():Cs.newInvalidDocument(i))}),Ce.resolve(a)}getDocumentsMatchingQuery(t,r,a,i){let l=Ja();const o=r.path,c=new dt(o.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:x,value:{document:f}}=d.getNext();if(!o.isPrefixOf(x.path))break;x.path.length>o.length+1||TD(CD(f),a)<=0||(i.has(f.key)||bm(r,f))&&(l=l.insert(f.key,f.mutableCopy()))}return Ce.resolve(l)}getAllFromCollectionGroup(t,r,a,i){ut()}qr(t,r){return Ce.forEach(this.docs,a=>r(a))}newChangeBuffer(t){return new X8(this)}getSize(t){return Ce.resolve(this.size)}}class X8 extends $8{constructor(t){super(),this.Ir=t}applyChanges(t){const r=[];return this.changes.forEach((a,i)=>{i.isValidDocument()?r.push(this.Ir.addEntry(t,i)):this.Ir.removeEntry(a)}),Ce.waitFor(r)}getFromCache(t,r){return this.Ir.getEntry(t,r)}getAllFromCache(t,r){return this.Ir.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(t){this.persistence=t,this.Qr=new Bi(r=>tg(r),sg),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new og,this.targetCount=0,this.Kr=Uo.Un()}forEachTarget(t,r){return this.Qr.forEach((a,i)=>r(i)),Ce.resolve()}getLastRemoteSnapshotVersion(t){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ce.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(t,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.$r&&(this.$r=r),Ce.resolve()}zn(t){this.Qr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.Kr=new Uo(r),this.highestTargetId=r),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,r){return this.zn(r),this.targetCount+=1,Ce.resolve()}updateTargetData(t,r){return this.zn(r),Ce.resolve()}removeTargetData(t,r){return this.Qr.delete(r.target),this.Ur.br(r.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(t,r,a){let i=0;const l=[];return this.Qr.forEach((o,c)=>{c.sequenceNumber<=r&&a.get(c.targetId)===null&&(this.Qr.delete(o),l.push(this.removeMatchingKeysForTargetId(t,c.targetId)),i++)}),Ce.waitFor(l).next(()=>i)}getTargetCount(t){return Ce.resolve(this.targetCount)}getTargetData(t,r){const a=this.Qr.get(r)||null;return Ce.resolve(a)}addMatchingKeys(t,r,a){return this.Ur.yr(r,a),Ce.resolve()}removeMatchingKeys(t,r,a){this.Ur.Sr(r,a);const i=this.persistence.referenceDelegate,l=[];return i&&r.forEach(o=>{l.push(i.markPotentiallyOrphaned(t,o))}),Ce.waitFor(l)}removeMatchingKeysForTargetId(t,r){return this.Ur.br(r),Ce.resolve()}getMatchingKeysForTargetId(t,r){const a=this.Ur.vr(r);return Ce.resolve(a)}containsKey(t,r){return Ce.resolve(this.Ur.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(t,r){this.Wr={},this.overlays={},this.Gr=new pm(0),this.zr=!1,this.zr=!0,this.jr=new K8,this.referenceDelegate=t(this),this.Hr=new J8(this),this.indexManager=new L8,this.remoteDocumentCache=function(i){return new Y8(i)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new R8(r),this.Yr=new H8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new G8,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let a=this.Wr[t.toKey()];return a||(a=new Q8(r,this.referenceDelegate),this.Wr[t.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,r,a){Qe("MemoryPersistence","Starting transaction:",t);const i=new Z8(this.Gr.next());return this.referenceDelegate.Zr(),a(i).next(l=>this.referenceDelegate.Xr(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}ei(t,r){return Ce.or(Object.values(this.Wr).map(a=>()=>a.containsKey(t,r)))}}class Z8 extends DD{constructor(t){super(),this.currentSequenceNumber=t}}class lg{constructor(t){this.persistence=t,this.ti=new og,this.ni=null}static ri(t){return new lg(t)}get ii(){if(this.ni)return this.ni;throw ut()}addReference(t,r,a){return this.ti.addReference(a,r),this.ii.delete(a.toString()),Ce.resolve()}removeReference(t,r,a){return this.ti.removeReference(a,r),this.ii.add(a.toString()),Ce.resolve()}markPotentiallyOrphaned(t,r){return this.ii.add(r.toString()),Ce.resolve()}removeTarget(t,r){this.ti.br(r.targetId).forEach(i=>this.ii.add(i.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,r.targetId).next(i=>{i.forEach(l=>this.ii.add(l.toString()))}).next(()=>a.removeTargetData(t,r))}Zr(){this.ni=new Set}Xr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.ii,a=>{const i=dt.fromPath(a);return this.si(t,i).next(l=>{l||r.removeEntry(i,xt.min())})}).next(()=>(this.ni=null,r.apply(t)))}updateLimboDocument(t,r){return this.si(t,r).next(a=>{a?this.ii.delete(r.toString()):this.ii.add(r.toString())})}Jr(t){return 0}si(t,r){return Ce.or([()=>Ce.resolve(this.ti.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.ei(t,r)])}}class Px{constructor(t,r){this.persistence=t,this.oi=new Bi(a=>MD(a.path),(a,i)=>a.isEqual(i)),this.garbageCollector=U8(this,r)}static ri(t,r){return new Px(t,r)}Zr(){}Xr(t){return Ce.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}nr(t){const r=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(a=>r.next(i=>a+i))}sr(t){let r=0;return this.rr(t,a=>{r++}).next(()=>r)}rr(t,r){return Ce.forEach(this.oi,(a,i)=>this.ar(t,a,i).next(l=>l?Ce.resolve():r(i)))}removeTargets(t,r,a){return this.persistence.getTargetCache().removeTargets(t,r,a)}removeOrphanedDocuments(t,r){let a=0;const i=this.persistence.getRemoteDocumentCache(),l=i.newChangeBuffer();return i.qr(t,o=>this.ar(t,o,r).next(c=>{c||(a++,l.removeEntry(o,xt.min()))})).next(()=>l.apply(t)).next(()=>a)}markPotentiallyOrphaned(t,r){return this.oi.set(r,t.currentSequenceNumber),Ce.resolve()}removeTarget(t,r){const a=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,r,a){return this.oi.set(a,t.currentSequenceNumber),Ce.resolve()}removeReference(t,r,a){return this.oi.set(a,t.currentSequenceNumber),Ce.resolve()}updateLimboDocument(t,r){return this.oi.set(r,t.currentSequenceNumber),Ce.resolve()}Jr(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=Su(t.data.value)),r}ar(t,r,a){return Ce.or([()=>this.persistence.ei(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const i=this.oi.get(r);return Ce.resolve(i!==void 0&&i>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(t,r,a,i){this.targetId=t,this.fromCache=r,this.Hi=a,this.Ji=i}static Yi(t,r){let a=Ct(),i=Ct();for(const l of r.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new cg(t,r.fromCache,a,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return ZT()?8:AD(er())>0?6:4}()}initialize(t,r){this.ns=t,this.indexManager=r,this.Zi=!0}getDocumentsMatchingQuery(t,r,a,i){const l={result:null};return this.rs(t,r).next(o=>{l.result=o}).next(()=>{if(!l.result)return this.ss(t,r,i,a).next(o=>{l.result=o})}).next(()=>{if(l.result)return;const o=new eA;return this._s(t,r,o).next(c=>{if(l.result=c,this.Xi)return this.us(t,r,o,c.size)})}).next(()=>l.result)}us(t,r,a,i){return a.documentReadCount<this.es?(Xi()<=Et.DEBUG&&Qe("QueryEngine","SDK will not create cache indexes for query:",Ji(r),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Ce.resolve()):(Xi()<=Et.DEBUG&&Qe("QueryEngine","Query:",Ji(r),"scans",a.documentReadCount,"local documents and returns",i,"documents as results."),a.documentReadCount>this.ts*i?(Xi()<=Et.DEBUG&&Qe("QueryEngine","The SDK decides to create cache indexes for query:",Ji(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ba(r))):Ce.resolve())}rs(t,r){if(hj(r))return Ce.resolve(null);let a=ba(r);return this.indexManager.getIndexType(t,a).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=wx(r,null,"F"),a=ba(r)),this.indexManager.getDocumentsMatchingTarget(t,a).next(l=>{const o=Ct(...l);return this.ns.getDocuments(t,o).next(c=>this.indexManager.getMinOffset(t,a).next(d=>{const x=this.cs(r,c);return this.ls(r,x,o,d.readTime)?this.rs(t,wx(r,null,"F")):this.hs(t,x,r,d)}))})))}ss(t,r,a,i){return hj(r)||i.isEqual(xt.min())?Ce.resolve(null):this.ns.getDocuments(t,a).next(l=>{const o=this.cs(r,l);return this.ls(r,o,a,i)?Ce.resolve(null):(Xi()<=Et.DEBUG&&Qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ji(r)),this.hs(t,o,r,ED(i,Cc)).next(c=>c))})}cs(t,r){let a=new ks(o3(t));return r.forEach((i,l)=>{bm(t,l)&&(a=a.add(l))}),a}ls(t,r,a,i){if(t.limit===null)return!1;if(a.size!==r.size)return!0;const l=t.limitType==="F"?r.last():r.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}_s(t,r,a){return Xi()<=Et.DEBUG&&Qe("QueryEngine","Using full collection scan to execute query:",Ji(r)),this.ns.getDocumentsMatchingQuery(t,r,Un.min(),a)}hs(t,r,a,i){return this.ns.getDocumentsMatchingQuery(t,a,i).next(l=>(r.forEach(o=>{l=l.insert(o.key,o)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="LocalStore",sA=3e8;class rA{constructor(t,r,a,i){this.persistence=t,this.Ps=r,this.serializer=i,this.Ts=new ds(vt),this.Is=new Bi(l=>tg(l),sg),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(a)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new q8(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ts))}}function aA(s,t,r,a){return new rA(s,t,r,a)}async function M3(s,t){const r=ft(s);return await r.persistence.runTransaction("Handle user change","readonly",a=>{let i;return r.mutationQueue.getAllMutationBatches(a).next(l=>(i=l,r.As(t),r.mutationQueue.getAllMutationBatches(a))).next(l=>{const o=[],c=[];let d=Ct();for(const x of i){o.push(x.batchId);for(const f of x.mutations)d=d.add(f.key)}for(const x of l){c.push(x.batchId);for(const f of x.mutations)d=d.add(f.key)}return r.localDocuments.getDocuments(a,d).next(x=>({Rs:x,removedBatchIds:o,addedBatchIds:c}))})})}function nA(s,t){const r=ft(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const i=t.batch.keys(),l=r.ds.newChangeBuffer({trackRemovals:!0});return function(c,d,x,f){const j=x.batch,w=j.keys();let S=Ce.resolve();return w.forEach(g=>{S=S.next(()=>f.getEntry(d,g)).next(V=>{const E=x.docVersions.get(g);Rt(E!==null),V.version.compareTo(E)<0&&(j.applyToRemoteDocument(V,x),V.isValidDocument()&&(V.setReadTime(x.commitVersion),f.addEntry(V)))})}),S.next(()=>c.mutationQueue.removeMutationBatch(d,j))}(r,a,t,l).next(()=>l.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,i,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(c){let d=Ct();for(let x=0;x<c.mutationResults.length;++x)c.mutationResults[x].transformResults.length>0&&(d=d.add(c.batch.mutations[x].key));return d}(t))).next(()=>r.localDocuments.getDocuments(a,i))})}function L3(s){const t=ft(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Hr.getLastRemoteSnapshotVersion(r))}function iA(s,t){const r=ft(s),a=t.snapshotVersion;let i=r.Ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const o=r.ds.newChangeBuffer({trackRemovals:!0});i=r.Ts;const c=[];t.targetChanges.forEach((f,j)=>{const w=i.get(j);if(!w)return;c.push(r.Hr.removeMatchingKeys(l,f.removedDocuments,j).next(()=>r.Hr.addMatchingKeys(l,f.addedDocuments,j)));let S=w.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(j)!==null?S=S.withResumeToken(Us.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,a)),i=i.insert(j,S),function(V,E,T){return V.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=sA?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(w,S,f)&&c.push(r.Hr.updateTargetData(l,S))});let d=Ja(),x=Ct();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(l,f))}),c.push(oA(l,o,t.documentUpdates).next(f=>{d=f.Vs,x=f.fs})),!a.isEqual(xt.min())){const f=r.Hr.getLastRemoteSnapshotVersion(l).next(j=>r.Hr.setTargetsMetadata(l,l.currentSequenceNumber,a));c.push(f)}return Ce.waitFor(c).next(()=>o.apply(l)).next(()=>r.localDocuments.getLocalViewOfDocuments(l,d,x)).next(()=>d)}).then(l=>(r.Ts=i,l))}function oA(s,t,r){let a=Ct(),i=Ct();return r.forEach(l=>a=a.add(l)),t.getEntries(s,a).next(l=>{let o=Ja();return r.forEach((c,d)=>{const x=l.get(c);d.isFoundDocument()!==x.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(xt.min())?(t.removeEntry(c,d.readTime),o=o.insert(c,d)):!x.isValidDocument()||d.version.compareTo(x.version)>0||d.version.compareTo(x.version)===0&&x.hasPendingWrites?(t.addEntry(d),o=o.insert(c,d)):Qe(dg,"Ignoring outdated watch update for ",c,". Current version:",x.version," Watch version:",d.version)}),{Vs:o,fs:i}})}function lA(s,t){const r=ft(s);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(t===void 0&&(t=Jf),r.mutationQueue.getNextMutationBatchAfterBatchId(a,t)))}function cA(s,t){const r=ft(s);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let i;return r.Hr.getTargetData(a,t).next(l=>l?(i=l,Ce.resolve(i)):r.Hr.allocateTargetId(a).next(o=>(i=new In(t,o,"TargetPurposeListen",a.currentSequenceNumber),r.Hr.addTargetData(a,i).next(()=>i))))}).then(a=>{const i=r.Ts.get(a.targetId);return(i===null||a.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ts=r.Ts.insert(a.targetId,a),r.Is.set(t,a.targetId)),a})}async function g0(s,t,r){const a=ft(s),i=a.Ts.get(t),l=r?"readwrite":"readwrite-primary";try{r||await a.persistence.runTransaction("Release target",l,o=>a.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!tl(o))throw o;Qe(dg,`Failed to update sequence numbers for target ${t}: ${o}`)}a.Ts=a.Ts.remove(t),a.Is.delete(i.target)}function Sj(s,t,r){const a=ft(s);let i=xt.min(),l=Ct();return a.persistence.runTransaction("Execute query","readwrite",o=>function(d,x,f){const j=ft(d),w=j.Is.get(f);return w!==void 0?Ce.resolve(j.Ts.get(w)):j.Hr.getTargetData(x,f)}(a,o,ba(t)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(o,c.targetId).next(d=>{l=d})}).next(()=>a.Ps.getDocumentsMatchingQuery(o,t,r?i:xt.min(),r?l:Ct())).next(c=>(dA(a,ZD(t),c),{documents:c,gs:l})))}function dA(s,t,r){let a=s.Es.get(t)||xt.min();r.forEach((i,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)}),s.Es.set(t,a)}class Ej{constructor(){this.activeTargetIds=n8()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class uA{constructor(){this.ho=new Ej,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,a){}addLocalQueryTarget(t,r=!0){return r&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,r,a){this.Po[t]=r}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Ej,Promise.resolve()}handleUserChange(t,r,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="ConnectivityMonitor";class Tj{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Qe(Cj,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Qe(Cj,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au=null;function y0(){return au===null?au=function(){return 268435456+Math.round(2147483648*Math.random())}():au++,"0x"+au.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah="RestConnection",mA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hA{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=r+"://"+t.host,this.yo=`projects/${a}/databases/${i}`,this.wo=this.databaseId.database===vx?`project_id=${a}`:`project_id=${a}&database_id=${i}`}So(t,r,a,i,l){const o=y0(),c=this.bo(t,r.toUriEncodedString());Qe(Ah,`Sending RPC '${t}' ${o}:`,c,a);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,i,l),this.vo(t,c,d,a).then(x=>(Qe(Ah,`Received RPC '${t}' ${o}: `,x),x),x=>{throw Vo(Ah,`RPC '${t}' ${o} failed with error: `,x,"url: ",c,"request:",a),x})}Co(t,r,a,i,l,o){return this.So(t,r,a,i,l)}Do(t,r,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,l)=>t[l]=i),a&&a.headers.forEach((i,l)=>t[l]=i)}bo(t,r){const a=mA[t];return`${this.po}/v1/${r}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="WebChannelConnection";class fA extends hA{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,r,a,i){const l=y0();return new Promise((o,c)=>{const d=new R4;d.setWithCredentials(!0),d.listenOnce(M4.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Pu.NO_ERROR:const f=d.getResponseJson();Qe(Ks,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(f)),o(f);break;case Pu.TIMEOUT:Qe(Ks,`RPC '${t}' ${l} timed out`),c(new qe(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case Pu.HTTP_ERROR:const j=d.getStatus();if(Qe(Ks,`RPC '${t}' ${l} failed with status:`,j,"response text:",d.getResponseText()),j>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const S=w==null?void 0:w.error;if(S&&S.status&&S.message){const g=function(E){const T=E.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(T)>=0?T:Pe.UNKNOWN}(S.status);c(new qe(g,S.message))}else c(new qe(Pe.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new qe(Pe.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Qe(Ks,`RPC '${t}' ${l} completed.`)}});const x=JSON.stringify(i);Qe(Ks,`RPC '${t}' ${l} sending request:`,i),d.send(r,"POST",x,a,15)})}Wo(t,r,a){const i=y0(),l=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=V4(),c=O4(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(d.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,r,a),d.encodeInitMessageHeaders=!0;const f=l.join("");Qe(Ks,`Creating RPC '${t}' stream ${i}: ${f}`,d);const j=o.createWebChannel(f,d);let w=!1,S=!1;const g=new pA({Fo:E=>{S?Qe(Ks,`Not sending because RPC '${t}' stream ${i} is closed:`,E):(w||(Qe(Ks,`Opening RPC '${t}' stream ${i} transport.`),j.open(),w=!0),Qe(Ks,`RPC '${t}' stream ${i} sending:`,E),j.send(E))},Mo:()=>j.close()}),V=(E,T,M)=>{E.listen(T,L=>{try{M(L)}catch(H){setTimeout(()=>{throw H},0)}})};return V(j,Ol.EventType.OPEN,()=>{S||(Qe(Ks,`RPC '${t}' stream ${i} transport opened.`),g.Qo())}),V(j,Ol.EventType.CLOSE,()=>{S||(S=!0,Qe(Ks,`RPC '${t}' stream ${i} transport closed`),g.Uo())}),V(j,Ol.EventType.ERROR,E=>{S||(S=!0,Vo(Ks,`RPC '${t}' stream ${i} transport errored:`,E),g.Uo(new qe(Pe.UNAVAILABLE,"The operation could not be completed")))}),V(j,Ol.EventType.MESSAGE,E=>{var T;if(!S){const M=E.data[0];Rt(!!M);const L=M,H=(L==null?void 0:L.error)||((T=L[0])===null||T===void 0?void 0:T.error);if(H){Qe(Ks,`RPC '${t}' stream ${i} received error:`,H);const q=H.status;let Q=function(U){const F=ys[U];if(F!==void 0)return N3(F)}(q),O=H.message;Q===void 0&&(Q=Pe.INTERNAL,O="Unknown error status: "+q+" with message "+H.message),S=!0,g.Uo(new qe(Q,O)),j.close()}else Qe(Ks,`RPC '${t}' stream ${i} received:`,M),g.Ko(M)}}),V(c,L4.STAT_EVENT,E=>{E.stat===o0.PROXY?Qe(Ks,`RPC '${t}' stream ${i} detected buffering proxy`):E.stat===o0.NOPROXY&&Qe(Ks,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.$o()},0),g}}function Rh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(s){return new v8(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(t,r,a=1e3,i=1.5,l=6e4){this.Ti=t,this.timerId=r,this.Go=a,this.zo=i,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const r=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),i=Math.max(0,r-a);i>0&&Qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j="PersistentStream";class O3{constructor(t,r,a,i,l,o,c,d){this.Ti=t,this.n_=a,this.r_=i,this.connection=l,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new ug(t,r)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,r){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():r&&r.code===Pe.RESOURCE_EXHAUSTED?(Xa(r.toString()),Xa("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):r&&r.code===Pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(r)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),r=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,i])=>{this.i_===r&&this.V_(a,i)},a=>{t(()=>{const i=new qe(Pe.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(i)})})}V_(t,r){const a=this.R_(this.i_);this.stream=this.f_(t,r),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{a(()=>this.m_(i))}),this.stream.onMessage(i=>{a(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Qe(_j,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return r=>{this.Ti.enqueueAndForget(()=>this.i_===t?r():(Qe(_j,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gA extends O3{constructor(t,r,a,i,l,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,i,o),this.serializer=l}f_(t,r){return this.connection.Wo("Listen",t,r)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const r=k8(this.serializer,t),a=function(l){if(!("targetChange"in l))return xt.min();const o=l.targetChange;return o.targetIds&&o.targetIds.length?xt.min():o.readTime?Er(o.readTime):xt.min()}(t);return this.listener.p_(r,a)}y_(t){const r={};r.database=f0(this.serializer),r.addTarget=function(l,o){let c;const d=o.target;if(c=x0(d)?{documents:P8(l,d)}:{query:S8(l,d).ht},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=I3(l,o.resumeToken);const x=h0(l,o.expectedCount);x!==null&&(c.expectedCount=x)}else if(o.snapshotVersion.compareTo(xt.min())>0){c.readTime=kx(l,o.snapshotVersion.toTimestamp());const x=h0(l,o.expectedCount);x!==null&&(c.expectedCount=x)}return c}(this.serializer,t);const a=C8(this.serializer,t);a&&(r.labels=a),this.I_(r)}w_(t){const r={};r.database=f0(this.serializer),r.removeTarget=t,this.I_(r)}}class yA extends O3{constructor(t,r,a,i,l,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,i,o),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,r){return this.connection.Wo("Write",t,r)}g_(t){return Rt(!!t.streamToken),this.lastStreamToken=t.streamToken,Rt(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Rt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const r=I8(t.writeResults,t.commitTime),a=Er(t.commitTime);return this.listener.v_(a,r)}C_(){const t={};t.database=f0(this.serializer),this.I_(t)}b_(t){const r={streamToken:this.lastStreamToken,writes:t.map(a=>C3(this.serializer,a))};this.I_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{}class vA extends bA{constructor(t,r,a,i){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=a,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new qe(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,r,a,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,o])=>this.connection.So(t,p0(r,a),i,l,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new qe(Pe.UNKNOWN,l.toString())})}Co(t,r,a,i,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Co(t,p0(r,a),i,o,c,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new qe(Pe.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class jA{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Xa(r),this.N_=!1):Qe("OnlineStateTracker",r)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci="RemoteStore";class NA{constructor(t,r,a,i,l){this.localStore=t,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(o=>{a.enqueueAndForget(async()=>{Ui(this)&&(Qe(Ci,"Restarting streams for network reachability change."),await async function(d){const x=ft(d);x.W_.add(4),await nd(x),x.j_.set("Unknown"),x.W_.delete(4),await Im(x)}(this))})}),this.j_=new jA(a,i)}}async function Im(s){if(Ui(s))for(const t of s.G_)await t(!0)}async function nd(s){for(const t of s.G_)await t(!1)}function V3(s,t){const r=ft(s);r.K_.has(t.targetId)||(r.K_.set(t.targetId,t),pg(r)?hg(r):rl(r).c_()&&mg(r,t))}function xg(s,t){const r=ft(s),a=rl(r);r.K_.delete(t),a.c_()&&z3(r,t),r.K_.size===0&&(a.c_()?a.P_():Ui(r)&&r.j_.set("Unknown"))}function mg(s,t){if(s.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(xt.min())>0){const r=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}rl(s).y_(t)}function z3(s,t){s.H_.Ne(t),rl(s).w_(t)}function hg(s){s.H_=new f8({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>s.K_.get(t)||null,it:()=>s.datastore.serializer.databaseId}),rl(s).start(),s.j_.B_()}function pg(s){return Ui(s)&&!rl(s).u_()&&s.K_.size>0}function Ui(s){return ft(s).W_.size===0}function B3(s){s.H_=void 0}async function wA(s){s.j_.set("Online")}async function kA(s){s.K_.forEach((t,r)=>{mg(s,t)})}async function IA(s,t){B3(s),pg(s)?(s.j_.q_(t),hg(s)):s.j_.set("Unknown")}async function PA(s,t,r){if(s.j_.set("Online"),t instanceof k3&&t.state===2&&t.cause)try{await async function(i,l){const o=l.cause;for(const c of l.targetIds)i.K_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.K_.delete(c),i.H_.removeTarget(c))}(s,t)}catch(a){Qe(Ci,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await Sx(s,a)}else if(t instanceof Tu?s.H_.We(t):t instanceof w3?s.H_.Ze(t):s.H_.je(t),!r.isEqual(xt.min()))try{const a=await L3(s.localStore);r.compareTo(a)>=0&&await function(l,o){const c=l.H_.ot(o);return c.targetChanges.forEach((d,x)=>{if(d.resumeToken.approximateByteSize()>0){const f=l.K_.get(x);f&&l.K_.set(x,f.withResumeToken(d.resumeToken,o))}}),c.targetMismatches.forEach((d,x)=>{const f=l.K_.get(d);if(!f)return;l.K_.set(d,f.withResumeToken(Us.EMPTY_BYTE_STRING,f.snapshotVersion)),z3(l,d);const j=new In(f.target,d,x,f.sequenceNumber);mg(l,j)}),l.remoteSyncer.applyRemoteEvent(c)}(s,r)}catch(a){Qe(Ci,"Failed to raise snapshot:",a),await Sx(s,a)}}async function Sx(s,t,r){if(!tl(t))throw t;s.W_.add(1),await nd(s),s.j_.set("Offline"),r||(r=()=>L3(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{Qe(Ci,"Retrying IndexedDB access"),await r(),s.W_.delete(1),await Im(s)})}function F3(s,t){return t().catch(r=>Sx(s,r,t))}async function Pm(s){const t=ft(s),r=Hn(t);let a=t.U_.length>0?t.U_[t.U_.length-1].batchId:Jf;for(;SA(t);)try{const i=await lA(t.localStore,a);if(i===null){t.U_.length===0&&r.P_();break}a=i.batchId,EA(t,i)}catch(i){await Sx(t,i)}U3(t)&&$3(t)}function SA(s){return Ui(s)&&s.U_.length<10}function EA(s,t){s.U_.push(t);const r=Hn(s);r.c_()&&r.S_&&r.b_(t.mutations)}function U3(s){return Ui(s)&&!Hn(s).u_()&&s.U_.length>0}function $3(s){Hn(s).start()}async function CA(s){Hn(s).C_()}async function TA(s){const t=Hn(s);for(const r of s.U_)t.b_(r.mutations)}async function _A(s,t,r){const a=s.U_.shift(),i=ag.from(a,t,r);await F3(s,()=>s.remoteSyncer.applySuccessfulWrite(i)),await Pm(s)}async function DA(s,t){t&&Hn(s).S_&&await async function(a,i){if(function(o){return j3(o)&&o!==Pe.ABORTED}(i.code)){const l=a.U_.shift();Hn(a).h_(),await F3(a,()=>a.remoteSyncer.rejectFailedWrite(l.batchId,i)),await Pm(a)}}(s,t),U3(s)&&$3(s)}async function Dj(s,t){const r=ft(s);r.asyncQueue.verifyOperationInProgress(),Qe(Ci,"RemoteStore received new credentials");const a=Ui(r);r.W_.add(3),await nd(r),a&&r.j_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.W_.delete(3),await Im(r)}async function AA(s,t){const r=ft(s);t?(r.W_.delete(2),await Im(r)):t||(r.W_.add(2),await nd(r),r.j_.set("Unknown"))}function rl(s){return s.J_||(s.J_=function(r,a,i){const l=ft(r);return l.M_(),new gA(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)}(s.datastore,s.asyncQueue,{xo:wA.bind(null,s),No:kA.bind(null,s),Lo:IA.bind(null,s),p_:PA.bind(null,s)}),s.G_.push(async t=>{t?(s.J_.h_(),pg(s)?hg(s):s.j_.set("Unknown")):(await s.J_.stop(),B3(s))})),s.J_}function Hn(s){return s.Y_||(s.Y_=function(r,a,i){const l=ft(r);return l.M_(),new yA(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:CA.bind(null,s),Lo:DA.bind(null,s),D_:TA.bind(null,s),v_:_A.bind(null,s)}),s.G_.push(async t=>{t?(s.Y_.h_(),await Pm(s)):(await s.Y_.stop(),s.U_.length>0&&(Qe(Ci,`Stopping write stream with ${s.U_.length} pending writes`),s.U_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(t,r,a,i,l){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=a,this.op=i,this.removalCallback=l,this.deferred=new ya,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,a,i,l){const o=Date.now()+a,c=new fg(t,r,o,i,l);return c.start(a),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(Pe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gg(s,t){if(Xa("AsyncQueue",`${t}: ${s}`),tl(s))return new qe(Pe.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{static emptySet(t){return new So(t.comparator)}constructor(t){this.comparator=t?(r,a)=>t(r,a)||dt.comparator(r.key,a.key):(r,a)=>dt.comparator(r.key,a.key),this.keyedMap=Vl(),this.sortedSet=new ds(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,a)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof So)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,l=a.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const a=new So;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=r,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(){this.Z_=new ds(dt.comparator)}track(t){const r=t.doc.key,a=this.Z_.get(r);a?t.type!==0&&a.type===3?this.Z_=this.Z_.insert(r,t):t.type===3&&a.type!==1?this.Z_=this.Z_.insert(r,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.Z_=this.Z_.insert(r,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.Z_=this.Z_.insert(r,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.Z_=this.Z_.remove(r):t.type===1&&a.type===2?this.Z_=this.Z_.insert(r,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.Z_=this.Z_.insert(r,{type:2,doc:t.doc}):ut():this.Z_=this.Z_.insert(r,t)}X_(){const t=[];return this.Z_.inorderTraversal((r,a)=>{t.push(a)}),t}}class $o{constructor(t,r,a,i,l,o,c,d,x){this.query=t,this.docs=r,this.oldDocs=a,this.docChanges=i,this.mutatedKeys=l,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=x}static fromInitialDocuments(t,r,a,i,l){const o=[];return r.forEach(c=>{o.push({type:0,doc:c})}),new $o(t,r,So.emptySet(r),o,a,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ym(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,a=t.docChanges;if(r.length!==a.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==a[i].type||!r[i].doc.isEqual(a[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class MA{constructor(){this.queries=Rj(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(r,a){const i=ft(r),l=i.queries;i.queries=Rj(),l.forEach((o,c)=>{for(const d of c.ta)d.onError(a)})})(this,new qe(Pe.ABORTED,"Firestore shutting down"))}}function Rj(){return new Bi(s=>i3(s),ym)}async function yg(s,t){const r=ft(s);let a=3;const i=t.query;let l=r.queries.get(i);l?!l.na()&&t.ra()&&(a=2):(l=new RA,a=t.ra()?0:1);try{switch(a){case 0:l.ea=await r.onListen(i,!0);break;case 1:l.ea=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const c=gg(o,`Initialization of query '${Ji(t.query)}' failed`);return void t.onError(c)}r.queries.set(i,l),l.ta.push(t),t.sa(r.onlineState),l.ea&&t.oa(l.ea)&&vg(r)}async function bg(s,t){const r=ft(s),a=t.query;let i=3;const l=r.queries.get(a);if(l){const o=l.ta.indexOf(t);o>=0&&(l.ta.splice(o,1),l.ta.length===0?i=t.ra()?0:1:!l.na()&&t.ra()&&(i=2))}switch(i){case 0:return r.queries.delete(a),r.onUnlisten(a,!0);case 1:return r.queries.delete(a),r.onUnlisten(a,!1);case 2:return r.onLastRemoteStoreUnlisten(a);default:return}}function LA(s,t){const r=ft(s);let a=!1;for(const i of t){const l=i.query,o=r.queries.get(l);if(o){for(const c of o.ta)c.oa(i)&&(a=!0);o.ea=i}}a&&vg(r)}function OA(s,t,r){const a=ft(s),i=a.queries.get(t);if(i)for(const l of i.ta)l.onError(r);a.queries.delete(t)}function vg(s){s.ia.forEach(t=>{t.next()})}var b0,Mj;(Mj=b0||(b0={}))._a="default",Mj.Cache="cache";class jg{constructor(t,r,a){this.query=t,this.aa=r,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(t){if(!this.options.includeMetadataChanges){const a=[];for(const i of t.docChanges)i.type!==3&&a.push(i);t=new $o(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.ua?this.la(t)&&(this.aa.next(t),r=!0):this.ha(t,this.onlineState)&&(this.Pa(t),r=!0),this.ca=t,r}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let r=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),r=!0),r}ha(t,r){if(!t.fromCache||!this.ra())return!0;const a=r!=="Offline";return(!this.options.Ta||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}la(t){if(t.docChanges.length>0)return!0;const r=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Pa(t){t=$o.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==b0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(t){this.key=t}}class q3{constructor(t){this.key=t}}class VA{constructor(t,r){this.query=t,this.fa=r,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ct(),this.mutatedKeys=Ct(),this.ya=o3(t),this.wa=new So(this.ya)}get Sa(){return this.fa}ba(t,r){const a=r?r.Da:new Aj,i=r?r.wa:this.wa;let l=r?r.mutatedKeys:this.mutatedKeys,o=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,x=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((f,j)=>{const w=i.get(f),S=bm(this.query,j)?j:null,g=!!w&&this.mutatedKeys.has(w.key),V=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let E=!1;w&&S?w.data.isEqual(S.data)?g!==V&&(a.track({type:3,doc:S}),E=!0):this.va(w,S)||(a.track({type:2,doc:S}),E=!0,(d&&this.ya(S,d)>0||x&&this.ya(S,x)<0)&&(c=!0)):!w&&S?(a.track({type:0,doc:S}),E=!0):w&&!S&&(a.track({type:1,doc:w}),E=!0,(d||x)&&(c=!0)),E&&(S?(o=o.add(S),l=V?l.add(f):l.delete(f)):(o=o.delete(f),l=l.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),l=l.delete(f.key),a.track({type:1,doc:f})}return{wa:o,Da:a,ls:c,mutatedKeys:l}}va(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,a,i){const l=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const o=t.Da.X_();o.sort((f,j)=>function(S,g){const V=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return V(S)-V(g)}(f.type,j.type)||this.ya(f.doc,j.doc)),this.Ca(a),i=i!=null&&i;const c=r&&!i?this.Fa():[],d=this.pa.size===0&&this.current&&!i?1:0,x=d!==this.ga;return this.ga=d,o.length!==0||x?{snapshot:new $o(this.query,t.wa,l,o,t.mutatedKeys,d===0,x,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Aj,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(r=>this.fa=this.fa.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.fa=this.fa.delete(r)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Ct(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const r=[];return t.forEach(a=>{this.pa.has(a)||r.push(new q3(a))}),this.pa.forEach(a=>{t.has(a)||r.push(new W3(a))}),r}Oa(t){this.fa=t.gs,this.pa=Ct();const r=this.ba(t.documents);return this.applyChanges(r,!0)}Na(){return $o.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Ng="SyncEngine";class zA{constructor(t,r,a){this.query=t,this.targetId=r,this.view=a}}class BA{constructor(t){this.key=t,this.Ba=!1}}class FA{constructor(t,r,a,i,l,o){this.localStore=t,this.remoteStore=r,this.eventManager=a,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Bi(c=>i3(c),ym),this.qa=new Map,this.Qa=new Set,this.$a=new ds(dt.comparator),this.Ua=new Map,this.Ka=new og,this.Wa={},this.Ga=new Map,this.za=Uo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function UA(s,t,r=!0){const a=X3(s);let i;const l=a.ka.get(t);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),i=l.view.Na()):i=await H3(a,t,r,!0),i}async function $A(s,t){const r=X3(s);await H3(r,t,!0,!1)}async function H3(s,t,r,a){const i=await cA(s.localStore,ba(t)),l=i.targetId,o=s.sharedClientState.addLocalQueryTarget(l,r);let c;return a&&(c=await WA(s,t,l,o==="current",i.resumeToken)),s.isPrimaryClient&&r&&V3(s.remoteStore,i),c}async function WA(s,t,r,a,i){s.Ha=(j,w,S)=>async function(V,E,T,M){let L=E.view.ba(T);L.ls&&(L=await Sj(V.localStore,E.query,!1).then(({documents:O})=>E.view.ba(O,L)));const H=M&&M.targetChanges.get(E.targetId),q=M&&M.targetMismatches.get(E.targetId)!=null,Q=E.view.applyChanges(L,V.isPrimaryClient,H,q);return Oj(V,E.targetId,Q.Ma),Q.snapshot}(s,j,w,S);const l=await Sj(s.localStore,t,!0),o=new VA(t,l.gs),c=o.ba(l.documents),d=ad.createSynthesizedTargetChangeForCurrentChange(r,a&&s.onlineState!=="Offline",i),x=o.applyChanges(c,s.isPrimaryClient,d);Oj(s,r,x.Ma);const f=new zA(t,r,o);return s.ka.set(t,f),s.qa.has(r)?s.qa.get(r).push(t):s.qa.set(r,[t]),x.snapshot}async function qA(s,t,r){const a=ft(s),i=a.ka.get(t),l=a.qa.get(i.targetId);if(l.length>1)return a.qa.set(i.targetId,l.filter(o=>!ym(o,t))),void a.ka.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(i.targetId),a.sharedClientState.isActiveQueryTarget(i.targetId)||await g0(a.localStore,i.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(i.targetId),r&&xg(a.remoteStore,i.targetId),v0(a,i.targetId)}).catch(el)):(v0(a,i.targetId),await g0(a.localStore,i.targetId,!0))}async function HA(s,t){const r=ft(s),a=r.ka.get(t),i=r.qa.get(a.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(a.targetId),xg(r.remoteStore,a.targetId))}async function GA(s,t,r){const a=e6(s);try{const i=await function(o,c){const d=ft(o),x=Qt.now(),f=c.reduce((S,g)=>S.add(g.key),Ct());let j,w;return d.persistence.runTransaction("Locally write mutations","readwrite",S=>{let g=Ja(),V=Ct();return d.ds.getEntries(S,f).next(E=>{g=E,g.forEach((T,M)=>{M.isValidDocument()||(V=V.add(T))})}).next(()=>d.localDocuments.getOverlayedDocuments(S,g)).next(E=>{j=E;const T=[];for(const M of c){const L=u8(M,j.get(M.key).overlayedDocument);L!=null&&T.push(new ti(M.key,L,J4(L.value.mapValue),Vs.exists(!0)))}return d.mutationQueue.addMutationBatch(S,x,T,c)}).next(E=>{w=E;const T=E.applyToLocalDocumentSet(j,V);return d.documentOverlayCache.saveOverlays(S,E.batchId,T)})}).then(()=>({batchId:w.batchId,changes:c3(j)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(i.batchId),function(o,c,d){let x=o.Wa[o.currentUser.toKey()];x||(x=new ds(vt)),x=x.insert(c,d),o.Wa[o.currentUser.toKey()]=x}(a,i.batchId,r),await id(a,i.changes),await Pm(a.remoteStore)}catch(i){const l=gg(i,"Failed to persist write");r.reject(l)}}async function G3(s,t){const r=ft(s);try{const a=await iA(r.localStore,t);t.targetChanges.forEach((i,l)=>{const o=r.Ua.get(l);o&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ba=!0:i.modifiedDocuments.size>0?Rt(o.Ba):i.removedDocuments.size>0&&(Rt(o.Ba),o.Ba=!1))}),await id(r,a,t)}catch(a){await el(a)}}function Lj(s,t,r){const a=ft(s);if(a.isPrimaryClient&&r===0||!a.isPrimaryClient&&r===1){const i=[];a.ka.forEach((l,o)=>{const c=o.view.sa(t);c.snapshot&&i.push(c.snapshot)}),function(o,c){const d=ft(o);d.onlineState=c;let x=!1;d.queries.forEach((f,j)=>{for(const w of j.ta)w.sa(c)&&(x=!0)}),x&&vg(d)}(a.eventManager,t),i.length&&a.La.p_(i),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function KA(s,t,r){const a=ft(s);a.sharedClientState.updateQueryState(t,"rejected",r);const i=a.Ua.get(t),l=i&&i.key;if(l){let o=new ds(dt.comparator);o=o.insert(l,Cs.newNoDocument(l,xt.min()));const c=Ct().add(l),d=new wm(xt.min(),new Map,new ds(vt),o,c);await G3(a,d),a.$a=a.$a.remove(l),a.Ua.delete(t),wg(a)}else await g0(a.localStore,t,!1).then(()=>v0(a,t,r)).catch(el)}async function QA(s,t){const r=ft(s),a=t.batch.batchId;try{const i=await nA(r.localStore,t);Q3(r,a,null),K3(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),await id(r,i)}catch(i){await el(i)}}async function YA(s,t,r){const a=ft(s);try{const i=await function(o,c){const d=ft(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",x=>{let f;return d.mutationQueue.lookupMutationBatch(x,c).next(j=>(Rt(j!==null),f=j.keys(),d.mutationQueue.removeMutationBatch(x,j))).next(()=>d.mutationQueue.performConsistencyCheck(x)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(x,f,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,f)).next(()=>d.localDocuments.getDocuments(x,f))})}(a.localStore,t);Q3(a,t,r),K3(a,t),a.sharedClientState.updateMutationState(t,"rejected",r),await id(a,i)}catch(i){await el(i)}}function K3(s,t){(s.Ga.get(t)||[]).forEach(r=>{r.resolve()}),s.Ga.delete(t)}function Q3(s,t,r){const a=ft(s);let i=a.Wa[a.currentUser.toKey()];if(i){const l=i.get(t);l&&(r?l.reject(r):l.resolve(),i=i.remove(t)),a.Wa[a.currentUser.toKey()]=i}}function v0(s,t,r=null){s.sharedClientState.removeLocalQueryTarget(t);for(const a of s.qa.get(t))s.ka.delete(a),r&&s.La.Ja(a,r);s.qa.delete(t),s.isPrimaryClient&&s.Ka.br(t).forEach(a=>{s.Ka.containsKey(a)||Y3(s,a)})}function Y3(s,t){s.Qa.delete(t.path.canonicalString());const r=s.$a.get(t);r!==null&&(xg(s.remoteStore,r),s.$a=s.$a.remove(t),s.Ua.delete(r),wg(s))}function Oj(s,t,r){for(const a of r)a instanceof W3?(s.Ka.addReference(a.key,t),XA(s,a)):a instanceof q3?(Qe(Ng,"Document no longer in limbo: "+a.key),s.Ka.removeReference(a.key,t),s.Ka.containsKey(a.key)||Y3(s,a.key)):ut()}function XA(s,t){const r=t.key,a=r.path.canonicalString();s.$a.get(r)||s.Qa.has(a)||(Qe(Ng,"New document in limbo: "+r),s.Qa.add(a),wg(s))}function wg(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const t=s.Qa.values().next().value;s.Qa.delete(t);const r=new dt(Gt.fromString(t)),a=s.za.next();s.Ua.set(a,new BA(r)),s.$a=s.$a.insert(r,a),V3(s.remoteStore,new In(ba(gm(r.path)),a,"TargetPurposeLimboResolution",pm.ae))}}async function id(s,t,r){const a=ft(s),i=[],l=[],o=[];a.ka.isEmpty()||(a.ka.forEach((c,d)=>{o.push(a.Ha(d,t,r).then(x=>{var f;if((x||r)&&a.isPrimaryClient){const j=x?!x.fromCache:(f=r==null?void 0:r.targetChanges.get(d.targetId))===null||f===void 0?void 0:f.current;a.sharedClientState.updateQueryState(d.targetId,j?"current":"not-current")}if(x){i.push(x);const j=cg.Yi(d.targetId,x);l.push(j)}}))}),await Promise.all(o),a.La.p_(i),await async function(d,x){const f=ft(d);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",j=>Ce.forEach(x,w=>Ce.forEach(w.Hi,S=>f.persistence.referenceDelegate.addReference(j,w.targetId,S)).next(()=>Ce.forEach(w.Ji,S=>f.persistence.referenceDelegate.removeReference(j,w.targetId,S)))))}catch(j){if(!tl(j))throw j;Qe(dg,"Failed to update sequence numbers: "+j)}for(const j of x){const w=j.targetId;if(!j.fromCache){const S=f.Ts.get(w),g=S.snapshotVersion,V=S.withLastLimboFreeSnapshotVersion(g);f.Ts=f.Ts.insert(w,V)}}}(a.localStore,l))}async function JA(s,t){const r=ft(s);if(!r.currentUser.isEqual(t)){Qe(Ng,"User change. New user:",t.toKey());const a=await M3(r.localStore,t);r.currentUser=t,function(l,o){l.Ga.forEach(c=>{c.forEach(d=>{d.reject(new qe(Pe.CANCELLED,o))})}),l.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await id(r,a.Rs)}}function ZA(s,t){const r=ft(s),a=r.Ua.get(t);if(a&&a.Ba)return Ct().add(a.key);{let i=Ct();const l=r.qa.get(t);if(!l)return i;for(const o of l){const c=r.ka.get(o);i=i.unionWith(c.view.Sa)}return i}}function X3(s){const t=ft(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=G3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZA.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=KA.bind(null,t),t.La.p_=LA.bind(null,t.eventManager),t.La.Ja=OA.bind(null,t.eventManager),t}function e6(s){const t=ft(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=QA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=YA.bind(null,t),t}class Ex{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=km(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,r){return null}nu(t,r){return null}eu(t){return aA(this.persistence,new tA,t.initialUser,this.serializer)}Xa(t){return new R3(lg.ri,this.serializer)}Za(t){return new uA}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ex.provider={build:()=>new Ex};class t6 extends Ex{constructor(t){super(),this.cacheSizeBytes=t}tu(t,r){Rt(this.persistence.referenceDelegate instanceof Px);const a=this.persistence.referenceDelegate.garbageCollector;return new B8(a,t.asyncQueue,r)}Xa(t){const r=this.cacheSizeBytes!==void 0?ur.withCacheSize(this.cacheSizeBytes):ur.DEFAULT;return new R3(a=>Px.ri(a,r),this.serializer)}}class j0{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Lj(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=JA.bind(null,this.syncEngine),await AA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new MA}()}createDatastore(t){const r=km(t.databaseInfo.databaseId),a=function(l){return new fA(l)}(t.databaseInfo);return function(l,o,c,d){return new vA(l,o,c,d)}(t.authCredentials,t.appCheckCredentials,a,r)}createRemoteStore(t){return function(a,i,l,o,c){return new NA(a,i,l,o,c)}(this.localStore,this.datastore,t.asyncQueue,r=>Lj(this.syncEngine,r,0),function(){return Tj.D()?new Tj:new xA}())}createSyncEngine(t,r){return function(i,l,o,c,d,x,f){const j=new FA(i,l,o,c,d,x);return f&&(j.ja=!0),j}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(i){const l=ft(i);Qe(Ci,"RemoteStore shutting down."),l.W_.add(5),await nd(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}j0.provider={build:()=>new j0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):Xa("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new qe(Pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(i,l){const o=ft(i),c={documents:l.map(j=>Ix(o.serializer,j))},d=await o.Co("BatchGetDocuments",o.serializer.databaseId,Gt.emptyPath(),c,l.length),x=new Map;d.forEach(j=>{const w=w8(o.serializer,j);x.set(w.key.toString(),w)});const f=[];return l.forEach(j=>{const w=x.get(j.toString());Rt(!!w),f.push(w)}),f}(this.datastore,t);return r.forEach(a=>this.recordVersion(a)),r}set(t,r){this.write(r.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,r){try{this.write(r.toMutation(t,this.preconditionForUpdate(t)))}catch(a){this.lastTransactionError=a}this.writtenDocs.add(t.toString())}delete(t){this.write(new Nm(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const i=dt.fromPath(a);this.mutations.push(new v3(i,this.precondition(i)))}),await async function(a,i){const l=ft(a),o={writes:i.map(c=>C3(l.serializer,c))};await l.So("Commit",l.serializer.databaseId,Gt.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let r;if(t.isFoundDocument())r=t.version;else{if(!t.isNoDocument())throw ut();r=xt.min()}const a=this.readVersions.get(t.key.toString());if(a){if(!r.isEqual(a))throw new qe(Pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),r)}precondition(t){const r=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&r?r.isEqual(xt.min())?Vs.exists(!1):Vs.updateTime(r):Vs.none()}preconditionForUpdate(t){const r=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&r){if(r.isEqual(xt.min()))throw new qe(Pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vs.updateTime(r)}return Vs.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(t,r,a,i,l){this.asyncQueue=t,this.datastore=r,this.options=a,this.updateFunction=i,this.deferred=l,this.Tu=a.maxAttempts,this.a_=new ug(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new s6(this.datastore),r=this.du(t);r&&r.then(a=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(a)}).catch(i=>{this.Au(i)}))}).catch(a=>{this.Au(a)})})}du(t){try{const r=this.updateFunction(t);return!sd(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const r=t.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!j3(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn="FirestoreClient";class a6{constructor(t,r,a,i,l){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=i,this.user=Ys.UNAUTHENTICATED,this.clientId=F4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,async o=>{Qe(Gn,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(a,o=>(Qe(Gn,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ya;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=gg(r,"Failed to shutdown persistence");t.reject(a)}}),t.promise}}async function Mh(s,t){s.asyncQueue.verifyOperationInProgress(),Qe(Gn,"Initializing OfflineComponentProvider");const r=s.configuration;await t.initialize(r);let a=r.initialUser;s.setCredentialChangeListener(async i=>{a.isEqual(i)||(await M3(t.localStore,i),a=i)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function Vj(s,t){s.asyncQueue.verifyOperationInProgress();const r=await n6(s);Qe(Gn,"Initializing OnlineComponentProvider"),await t.initialize(r,s.configuration),s.setCredentialChangeListener(a=>Dj(t.remoteStore,a)),s.setAppCheckTokenChangeListener((a,i)=>Dj(t.remoteStore,i)),s._onlineComponents=t}async function n6(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Qe(Gn,"Using user provided OfflineComponentProvider");try{await Mh(s,s._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(i){return i.name==="FirebaseError"?i.code===Pe.FAILED_PRECONDITION||i.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;Vo("Error using user provided cache. Falling back to memory cache: "+r),await Mh(s,new Ex)}}else Qe(Gn,"Using default OfflineComponentProvider"),await Mh(s,new t6(void 0));return s._offlineComponents}async function Ig(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Qe(Gn,"Using user provided OnlineComponentProvider"),await Vj(s,s._uninitializedComponentsProvider._online)):(Qe(Gn,"Using default OnlineComponentProvider"),await Vj(s,new j0))),s._onlineComponents}function i6(s){return Ig(s).then(t=>t.syncEngine)}function o6(s){return Ig(s).then(t=>t.datastore)}async function Cx(s){const t=await Ig(s),r=t.eventManager;return r.onListen=UA.bind(null,t.syncEngine),r.onUnlisten=qA.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=$A.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=HA.bind(null,t.syncEngine),r}function l6(s,t,r={}){const a=new ya;return s.asyncQueue.enqueueAndForget(async()=>function(l,o,c,d,x){const f=new kg({next:w=>{f.su(),o.enqueueAndForget(()=>bg(l,j));const S=w.docs.has(c);!S&&w.fromCache?x.reject(new qe(Pe.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&w.fromCache&&d&&d.source==="server"?x.reject(new qe(Pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(w)},error:w=>x.reject(w)}),j=new jg(gm(c.path),f,{includeMetadataChanges:!0,Ta:!0});return yg(l,j)}(await Cx(s),s.asyncQueue,t,r,a)),a.promise}function c6(s,t,r={}){const a=new ya;return s.asyncQueue.enqueueAndForget(async()=>function(l,o,c,d,x){const f=new kg({next:w=>{f.su(),o.enqueueAndForget(()=>bg(l,j)),w.fromCache&&d.source==="server"?x.reject(new qe(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(w)},error:w=>x.reject(w)}),j=new jg(c,f,{includeMetadataChanges:!0,Ta:!0});return yg(l,j)}(await Cx(s),s.asyncQueue,t,r,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J3(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(s,t,r){if(!r)throw new qe(Pe.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function d6(s,t,r,a){if(t===!0&&a===!0)throw new qe(Pe.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function Bj(s){if(!dt.isDocumentKey(s))throw new qe(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Fj(s){if(dt.isDocumentKey(s))throw new qe(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Sm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(a){return a.constructor?a.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":ut()}function lr(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new qe(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Sm(s);throw new qe(Pe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return s}function u6(s,t){if(t<=0)throw new qe(Pe.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="firestore.googleapis.com",Uj=!0;class $j{constructor(t){var r,a;if(t.host===void 0){if(t.ssl!==void 0)throw new qe(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ek,this.ssl=Uj}else this.host=t.host,this.ssl=(r=t.ssl)!==null&&r!==void 0?r:Uj;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=A3;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<V8)throw new qe(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}d6("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=J3((a=t.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new qe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new qe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new qe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(a,i){return a.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Em{constructor(t,r,a,i){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=a,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $j({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new qe(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $j(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new bD;switch(a.type){case"firstParty":return new wD(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new qe(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const a=zj.get(r);a&&(Qe("ComponentProvider","Removing Datastore"),zj.delete(r),a.terminate())}(this),Promise.resolve()}}function x6(s,t,r,a={}){var i;const l=(s=lr(s,Em))._getSettings(),o=Object.assign(Object.assign({},l),{emulatorOptions:s._getEmulatorOptions()}),c=`${t}:${r}`;l.host!==ek&&l.host!==c&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},l),{host:c,ssl:!1,emulatorOptions:a});if(!Fn(d,o)&&(s._setSettings(d),a.mockUserToken)){let x,f;if(typeof a.mockUserToken=="string")x=a.mockUserToken,f=Ys.MOCK_USER;else{x=w4(a.mockUserToken,(i=s._app)===null||i===void 0?void 0:i.options.projectId);const j=a.mockUserToken.sub||a.mockUserToken.user_id;if(!j)throw new qe(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ys(j)}s._authCredentials=new vD(new z4(x,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new an(this.firestore,t,this._query)}}class Bs{constructor(t,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Bs(this.firestore,t,this._key)}}class Vn extends an{constructor(t,r,a){super(t,r,gm(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Bs(this.firestore,null,new dt(t))}withConverter(t){return new Vn(this.firestore,t,this._path)}}function Z(s,t,...r){if(s=Yt(s),Z3("collection","path",t),s instanceof Em){const a=Gt.fromString(t,...r);return Fj(a),new Vn(s,null,a)}{if(!(s instanceof Bs||s instanceof Vn))throw new qe(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Gt.fromString(t,...r));return Fj(a),new Vn(s.firestore,null,a)}}function z(s,t,...r){if(s=Yt(s),arguments.length===1&&(t=F4.newId()),Z3("doc","path",t),s instanceof Em){const a=Gt.fromString(t,...r);return Bj(a),new Bs(s,null,new dt(a))}{if(!(s instanceof Bs||s instanceof Vn))throw new qe(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Gt.fromString(t,...r));return Bj(a),new Bs(s.firestore,s instanceof Vn?s.converter:null,new dt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj="AsyncQueue";class qj{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new ug(this,"async_queue_retry"),this.Su=()=>{const a=Rh();a&&Qe(Wj,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.bu=t;const r=Rh();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const r=Rh();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const r=new ya;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!tl(t))throw t;Qe(Wj,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const r=this.bu.then(()=>(this.pu=!0,t().catch(a=>{this.gu=a,this.pu=!1;const i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(a);throw Xa("INTERNAL UNHANDLED ERROR: ",i),a}).then(a=>(this.pu=!1,a))));return this.bu=r,r}enqueueAfterDelay(t,r,a){this.Du(),this.wu.indexOf(t)>-1&&(r=0);const i=fg.createAndSchedule(this,t,r,a,l=>this.Fu(l));return this.fu.push(i),i}Du(){this.gu&&ut()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const r of this.fu)if(r.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.fu)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const r=this.fu.indexOf(t);this.fu.splice(r,1)}}function Hj(s){return function(r,a){if(typeof r!="object"||r===null)return!1;const i=r;for(const l of a)if(l in i&&typeof i[l]=="function")return!0;return!1}(s,["next","error","complete"])}class Sa extends Em{constructor(t,r,a,i){super(t,r,a,i),this.type="firestore",this._queue=new qj,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new qj(t),this._firestoreClient=void 0,await t}}}function m6(s,t){const r=typeof s=="object"?s:hm(),a=typeof s=="string"?s:t||vx,i=Zn(r,"firestore").getImmediate({identifier:a});if(!i._initialized){const l=v4("firestore");l&&x6(i,...l)}return i}function od(s){if(s._terminated)throw new qe(Pe.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||h6(s),s._firestoreClient}function h6(s){var t,r,a;const i=s._freezeSettings(),l=function(c,d,x,f){return new VD(c,d,x,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,J3(f.experimentalLongPollingOptions),f.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,i);s._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((a=i.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(s._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),s._firestoreClient=new a6(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ti(Us.fromBase64String(t))}catch(r){throw new qe(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Ti(Us.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new qe(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Os(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new qe(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new qe(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return vt(this._lat,t._lat)||vt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(a,i){if(a.length!==i.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==i[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=/^__.*__$/;class f6{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return this.fieldMask!==null?new ti(t,this.data,this.fieldMask,r,this.fieldTransforms):new rd(t,this.data,r,this.fieldTransforms)}}class tk{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return new ti(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function sk(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class Eg{constructor(t,r,a,i,l,o){this.settings=t,this.databaseId=r,this.serializer=a,this.ignoreUndefinedProperties=i,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Eg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var r;const a=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.ku({path:a,Qu:!1});return i.$u(t),i}Uu(t){var r;const a=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.ku({path:a,Qu:!1});return i.Bu(),i}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return Tx(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(sk(this.Lu)&&p6.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class g6{constructor(t,r,a){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=a||km(t)}ju(t,r,a,i=!1){return new Eg({Lu:t,methodName:r,zu:a,path:Os.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dd(s){const t=s._freezeSettings(),r=km(s._databaseId);return new g6(s._databaseId,!!t.ignoreUndefinedProperties,r)}function Cg(s,t,r,a,i,l={}){const o=s.ju(l.merge||l.mergeFields?2:0,t,r,i);Dg("Data must be an object, but it was:",o,a);const c=nk(a,o);let d,x;if(l.merge)d=new Pr(o.fieldMask),x=o.fieldTransforms;else if(l.mergeFields){const f=[];for(const j of l.mergeFields){const w=N0(t,j,r);if(!o.contains(w))throw new qe(Pe.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);ok(f,w)||f.push(w)}d=new Pr(f),x=o.fieldTransforms.filter(j=>d.covers(j.field))}else d=null,x=o.fieldTransforms;return new f6(new nr(c),d,x)}class Cm extends cd{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Cm}}class Tg extends cd{_toFieldTransform(t){return new g3(t.path,new Rc)}isEqual(t){return t instanceof Tg}}class _g extends cd{constructor(t,r){super(t),this.Ju=r}_toFieldTransform(t){const r=new Oc(t.serializer,x3(t.serializer,this.Ju));return new g3(t.path,r)}isEqual(t){return t instanceof _g&&this.Ju===t.Ju}}function rk(s,t,r,a){const i=s.ju(1,t,r);Dg("Data must be an object, but it was:",i,a);const l=[],o=nr.empty();ei(a,(d,x)=>{const f=Ag(t,d,r);x=Yt(x);const j=i.Uu(f);if(x instanceof Cm)l.push(f);else{const w=ud(x,j);w!=null&&(l.push(f),o.set(f,w))}});const c=new Pr(l);return new tk(o,c,i.fieldTransforms)}function ak(s,t,r,a,i,l){const o=s.ju(1,t,r),c=[N0(t,a,r)],d=[i];if(l.length%2!=0)throw new qe(Pe.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)c.push(N0(t,l[w])),d.push(l[w+1]);const x=[],f=nr.empty();for(let w=c.length-1;w>=0;--w)if(!ok(x,c[w])){const S=c[w];let g=d[w];g=Yt(g);const V=o.Uu(S);if(g instanceof Cm)x.push(S);else{const E=ud(g,V);E!=null&&(x.push(S),f.set(S,E))}}const j=new Pr(x);return new tk(f,j,o.fieldTransforms)}function y6(s,t,r,a=!1){return ud(r,s.ju(a?4:3,t))}function ud(s,t){if(ik(s=Yt(s)))return Dg("Unsupported field value:",t,s),nk(s,t);if(s instanceof cd)return function(a,i){if(!sk(i.Lu))throw i.Wu(`${a._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(i);l&&i.fieldTransforms.push(l)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(a,i){const l=[];let o=0;for(const c of a){let d=ud(c,i.Ku(o));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),o++}return{arrayValue:{values:l}}}(s,t)}return function(a,i){if((a=Yt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return x3(i.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=Qt.fromDate(a);return{timestampValue:kx(i.serializer,l)}}if(a instanceof Qt){const l=new Qt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:kx(i.serializer,l)}}if(a instanceof Pg)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Ti)return{bytesValue:I3(i.serializer,a._byteString)};if(a instanceof Bs){const l=i.databaseId,o=a.firestore._databaseId;if(!o.isEqual(l))throw i.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ig(a.firestore._databaseId||i.databaseId,a._key.path)}}if(a instanceof Sg)return function(o,c){return{mapValue:{fields:{[Q4]:{stringValue:X4},[jx]:{arrayValue:{values:o.toArray().map(x=>{if(typeof x!="number")throw c.Wu("VectorValues must only contain numeric values.");return rg(c.serializer,x)})}}}}}}(a,i);throw i.Wu(`Unsupported field value: ${Sm(a)}`)}(s,t)}function nk(s,t){const r={};return $4(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ei(s,(a,i)=>{const l=ud(i,t.qu(a));l!=null&&(r[a]=l)}),{mapValue:{fields:r}}}function ik(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Qt||s instanceof Pg||s instanceof Ti||s instanceof Bs||s instanceof cd||s instanceof Sg)}function Dg(s,t,r){if(!ik(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const a=Sm(r);throw a==="an object"?t.Wu(s+" a custom object"):t.Wu(s+" "+a)}}function N0(s,t,r){if((t=Yt(t))instanceof ld)return t._internalPath;if(typeof t=="string")return Ag(s,t);throw Tx("Field path arguments must be of type string or ",s,!1,void 0,r)}const b6=new RegExp("[~\\*/\\[\\]]");function Ag(s,t,r){if(t.search(b6)>=0)throw Tx(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new ld(...t.split("."))._internalPath}catch{throw Tx(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function Tx(s,t,r,a,i){const l=a&&!a.isEmpty(),o=i!==void 0;let c=`Function ${t}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(l||o)&&(d+=" (found",l&&(d+=` in field ${a}`),o&&(d+=` in document ${i}`),d+=")"),new qe(Pe.INVALID_ARGUMENT,c+s+d)}function ok(s,t){return s.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(t,r,a,i,l){this._firestore=t,this._userDataWriter=r,this._key=a,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Bs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new v6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(Tm("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class v6 extends _x{data(){return super.data()}}function Tm(s,t){return typeof t=="string"?Ag(s,t):t instanceof ld?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new qe(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rg{}class Mg extends Rg{}function be(s,t,...r){let a=[];t instanceof Rg&&a.push(t),a=a.concat(r),function(l){const o=l.filter(d=>d instanceof Lg).length,c=l.filter(d=>d instanceof _m).length;if(o>1||o>0&&c>0)throw new qe(Pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const i of a)s=i._apply(s);return s}class _m extends Mg{constructor(t,r,a){super(),this._field=t,this._op=r,this._value=a,this.type="where"}static _create(t,r,a){return new _m(t,r,a)}_apply(t){const r=this._parse(t);return ck(t._query,r),new an(t.firestore,t.converter,m0(t._query,r))}_parse(t){const r=dd(t.firestore);return function(l,o,c,d,x,f,j){let w;if(x.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new qe(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Kj(j,f);const g=[];for(const V of j)g.push(Gj(d,l,V));w={arrayValue:{values:g}}}else w=Gj(d,l,j)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Kj(j,f),w=y6(c,o,j,f==="in"||f==="not-in");return vs.create(x,f,w)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function ve(s,t,r){const a=t,i=Tm("where",s);return _m._create(i,a,r)}class Lg extends Rg{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Lg(t,r)}_parse(t){const r=this._queryConstraints.map(a=>a._parse(t)).filter(a=>a.getFilters().length>0);return r.length===1?r[0]:ia.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(i,l){let o=i;const c=l.getFlattenedFilters();for(const d of c)ck(o,d),o=m0(o,d)}(t._query,r),new an(t.firestore,t.converter,m0(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Og extends Mg{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new Og(t,r)}_apply(t){const r=function(i,l,o){if(i.startAt!==null)throw new qe(Pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new qe(Pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ac(l,o)}(t._query,this._field,this._direction);return new an(t.firestore,t.converter,function(i,l){const o=i.explicitOrderBy.concat([l]);return new sl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))}}function w0(s,t="asc"){const r=t,a=Tm("orderBy",s);return Og._create(a,r)}class Vg extends Mg{constructor(t,r,a){super(),this.type=t,this._limit=r,this._limitType=a}static _create(t,r,a){return new Vg(t,r,a)}_apply(t){return new an(t.firestore,t.converter,wx(t._query,this._limit,this._limitType))}}function Bt(s){return u6("limit",s),Vg._create("limit",s,"F")}function Gj(s,t,r){if(typeof(r=Yt(r))=="string"){if(r==="")throw new qe(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!n3(t)&&r.indexOf("/")!==-1)throw new qe(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=t.path.child(Gt.fromString(r));if(!dt.isDocumentKey(a))throw new qe(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return lj(s,new dt(a))}if(r instanceof Bs)return lj(s,r._key);throw new qe(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sm(r)}.`)}function Kj(s,t){if(!Array.isArray(s)||s.length===0)throw new qe(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ck(s,t){const r=function(i,l){for(const o of i)for(const c of o.getFlattenedFilters())if(l.indexOf(c.op)>=0)return c.op;return null}(s.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new qe(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new qe(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class dk{convertValue(t,r="none"){switch(qn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Wn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw ut()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const a={};return ei(t,(i,l)=>{a[i]=this.convertValue(l,r)}),a}convertVectorValue(t){var r,a,i;const l=(i=(a=(r=t.fields)===null||r===void 0?void 0:r[jx].arrayValue)===null||a===void 0?void 0:a.values)===null||i===void 0?void 0:i.map(o=>fs(o.doubleValue));return new Sg(l)}convertGeoPoint(t){return new Pg(fs(t.latitude),fs(t.longitude))}convertArray(t,r){return(t.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(t,r){switch(r){case"previous":const a=fm(t);return a==null?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(Tc(t));default:return null}}convertTimestamp(t){const r=$n(t);return new Qt(r.seconds,r.nanos)}convertDocumentKey(t,r){const a=Gt.fromString(t);Rt(D3(a));const i=new _c(a.get(1),a.get(3)),l=new dt(a.popFirst(5));return i.isEqual(r)||Xa(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(s,t,r){let a;return a=s?r&&(r.merge||r.mergeFields)?s.toFirestore(t,r):s.toFirestore(t):t,a}class j6 extends dk{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ti(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Bs(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Bg extends _x{constructor(t,r,a,i,l,o){super(t,r,a,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new _u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const a=this._document.data.field(Tm("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class _u extends Bg{data(t={}){return super.data(t)}}class uk{constructor(t,r,a,i){this._firestore=t,this._userDataWriter=r,this._snapshot=i,this.metadata=new ho(i.hasPendingWrites,i.fromCache),this.query=a}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(a=>{t.call(r,new _u(this._firestore,this._userDataWriter,a.key,a,new ho(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new qe(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,l){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const d=new _u(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ho(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>l||c.type!==3).map(c=>{const d=new _u(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ho(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let x=-1,f=-1;return c.type!==0&&(x=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:N6(c.type),doc:d,oldIndex:x,newIndex:f}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function N6(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(s){s=lr(s,Bs);const t=lr(s.firestore,Sa);return l6(od(t),s._key).then(r=>xk(t,s,r))}class Dm extends dk{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ti(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Bs(this.firestore,null,r)}}function gt(s){s=lr(s,an);const t=lr(s.firestore,Sa),r=od(t),a=new Dm(t);return lk(s._query),c6(r,s._query).then(i=>new uk(t,a,s,i))}function Vr(s,t,r){s=lr(s,Bs);const a=lr(s.firestore,Sa),i=zg(s.converter,t,r);return Am(a,[Cg(dd(a),"setDoc",s._key,i,s.converter!==null,r).toMutation(s._key,Vs.none())])}function rs(s,t,r,...a){s=lr(s,Bs);const i=lr(s.firestore,Sa),l=dd(i);let o;return o=typeof(t=Yt(t))=="string"||t instanceof ld?ak(l,"updateDoc",s._key,t,r,a):rk(l,"updateDoc",s._key,t),Am(i,[o.toMutation(s._key,Vs.exists(!0))])}function w6(s){return Am(lr(s.firestore,Sa),[new Nm(s._key,Vs.none())])}function vi(s,t){const r=lr(s.firestore,Sa),a=z(s),i=zg(s.converter,t);return Am(r,[Cg(dd(s.firestore),"addDoc",a._key,i,s.converter!==null,{}).toMutation(a._key,Vs.exists(!1))]).then(()=>a)}function Te(s,...t){var r,a,i;s=Yt(s);let l={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||Hj(t[o])||(l=t[o],o++);const c={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Hj(t[o])){const j=t[o];t[o]=(r=j.next)===null||r===void 0?void 0:r.bind(j),t[o+1]=(a=j.error)===null||a===void 0?void 0:a.bind(j),t[o+2]=(i=j.complete)===null||i===void 0?void 0:i.bind(j)}let d,x,f;if(s instanceof Bs)x=lr(s.firestore,Sa),f=gm(s._key.path),d={next:j=>{t[o]&&t[o](xk(x,s,j))},error:t[o+1],complete:t[o+2]};else{const j=lr(s,an);x=lr(j.firestore,Sa),f=j._query;const w=new Dm(x);d={next:S=>{t[o]&&t[o](new uk(x,w,j,S))},error:t[o+1],complete:t[o+2]},lk(s._query)}return function(w,S,g,V){const E=new kg(V),T=new jg(S,E,g);return w.asyncQueue.enqueueAndForget(async()=>yg(await Cx(w),T)),()=>{E.su(),w.asyncQueue.enqueueAndForget(async()=>bg(await Cx(w),T))}}(od(x),f,c,d)}function Am(s,t){return function(a,i){const l=new ya;return a.asyncQueue.enqueueAndForget(async()=>GA(await i6(a),i,l)),l.promise}(od(s),t)}function xk(s,t,r){const a=r.docs.get(t._key),i=new Dm(s);return new Bg(s,i,t._key,a,new ho(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6={maxAttempts:5};function Bl(s,t){if((s=Yt(s)).firestore!==t)throw new qe(Pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=dd(t)}get(t){const r=Bl(t,this._firestore),a=new j6(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return ut();const l=i[0];if(l.isFoundDocument())return new _x(this._firestore,a,l.key,l,r.converter);if(l.isNoDocument())return new _x(this._firestore,a,r._key,null,r.converter);throw ut()})}set(t,r,a){const i=Bl(t,this._firestore),l=zg(i.converter,r,a),o=Cg(this._dataReader,"Transaction.set",i._key,l,i.converter!==null,a);return this._transaction.set(i._key,o),this}update(t,r,a,...i){const l=Bl(t,this._firestore);let o;return o=typeof(r=Yt(r))=="string"||r instanceof ld?ak(this._dataReader,"Transaction.update",l._key,r,a,i):rk(this._dataReader,"Transaction.update",l._key,r),this._transaction.update(l._key,o),this}delete(t){const r=Bl(t,this._firestore);return this._transaction.delete(r._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6 extends I6{constructor(t,r){super(t,r),this._firestore=t}get(t){const r=Bl(t,this._firestore),a=new Dm(this._firestore);return super.get(t).then(i=>new Bg(this._firestore,a,r._key,i._document,new ho(!1,!1),r.converter))}}function at(s,t,r){s=lr(s,Sa);const a=Object.assign(Object.assign({},k6),r);return function(l){if(l.maxAttempts<1)throw new qe(Pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(l,o,c){const d=new ya;return l.asyncQueue.enqueueAndForget(async()=>{const x=await o6(l);new r6(l.asyncQueue,x,c,o,d).Iu()}),d.promise}(od(s),i=>t(new P6(s,i)),a)}function he(){return new Tg("serverTimestamp")}function st(s){return new _g("increment",s)}(function(t,r=!0){(function(i){Zo=i})(zi),na(new Wr("firestore",(a,{instanceIdentifier:i,options:l})=>{const o=a.getProvider("app").getImmediate(),c=new Sa(new jD(a.getProvider("auth-internal")),new kD(o,a.getProvider("app-check-internal")),function(x,f){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new qe(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _c(x.options.projectId,f)}(o,i),o);return l=Object.assign({useFetchStreams:r},l),c._setSettings(l),c},"PUBLIC").setMultipleInstances(!0)),yr(Yv,Xv,t),yr(Yv,Xv,"esm2017")})();var S6="firebase",E6="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(S6,E6,"app");const mk="@firebase/installations",Fg="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=1e4,pk=`w:${Fg}`,fk="FIS_v2",C6="https://firebaseinstallations.googleapis.com/v1",T6=60*60*1e3,_6="installations",D6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},_i=new Vi(_6,D6,A6);function gk(s){return s instanceof qr&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk({projectId:s}){return`${C6}/projects/${s}/installations`}function bk(s){return{token:s.token,requestStatus:2,expiresIn:M6(s.expiresIn),creationTime:Date.now()}}async function vk(s,t){const a=(await t.json()).error;return _i.create("request-failed",{requestName:s,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function jk({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function R6(s,{refreshToken:t}){const r=jk(s);return r.append("Authorization",L6(t)),r}async function Nk(s){const t=await s();return t.status>=500&&t.status<600?s():t}function M6(s){return Number(s.replace("s","000"))}function L6(s){return`${fk} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O6({appConfig:s,heartbeatServiceProvider:t},{fid:r}){const a=yk(s),i=jk(s),l=t.getImmediate({optional:!0});if(l){const x=await l.getHeartbeatsHeader();x&&i.append("x-firebase-client",x)}const o={fid:r,authVersion:fk,appId:s.appId,sdkVersion:pk},c={method:"POST",headers:i,body:JSON.stringify(o)},d=await Nk(()=>fetch(a,c));if(d.ok){const x=await d.json();return{fid:x.fid||r,registrationStatus:2,refreshToken:x.refreshToken,authToken:bk(x.authToken)}}else throw await vk("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(s){return new Promise(t=>{setTimeout(t,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=/^[cdef][\w-]{21}$/,k0="";function B6(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const r=F6(s);return z6.test(r)?r:k0}catch{return k0}}function F6(s){return V6(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new Map;function Ik(s,t){const r=Rm(s);Pk(r,t),U6(r,t)}function Pk(s,t){const r=kk.get(s);if(r)for(const a of r)a(t)}function U6(s,t){const r=$6();r&&r.postMessage({key:s,fid:t}),W6()}let pi=null;function $6(){return!pi&&"BroadcastChannel"in self&&(pi=new BroadcastChannel("[Firebase] FID Change"),pi.onmessage=s=>{Pk(s.data.key,s.data.fid)}),pi}function W6(){kk.size===0&&pi&&(pi.close(),pi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6="firebase-installations-database",H6=1,Di="firebase-installations-store";let Lh=null;function Ug(){return Lh||(Lh=C4(q6,H6,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(Di)}}})),Lh}async function Dx(s,t){const r=Rm(s),i=(await Ug()).transaction(Di,"readwrite"),l=i.objectStore(Di),o=await l.get(r);return await l.put(t,r),await i.done,(!o||o.fid!==t.fid)&&Ik(s,t.fid),t}async function Sk(s){const t=Rm(s),a=(await Ug()).transaction(Di,"readwrite");await a.objectStore(Di).delete(t),await a.done}async function Mm(s,t){const r=Rm(s),i=(await Ug()).transaction(Di,"readwrite"),l=i.objectStore(Di),o=await l.get(r),c=t(o);return c===void 0?await l.delete(r):await l.put(c,r),await i.done,c&&(!o||o.fid!==c.fid)&&Ik(s,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $g(s){let t;const r=await Mm(s.appConfig,a=>{const i=G6(a),l=K6(s,i);return t=l.registrationPromise,l.installationEntry});return r.fid===k0?{installationEntry:await t}:{installationEntry:r,registrationPromise:t}}function G6(s){const t=s||{fid:B6(),registrationStatus:0};return Ek(t)}function K6(s,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(_i.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},a=Q6(s,r);return{installationEntry:r,registrationPromise:a}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:Y6(s)}:{installationEntry:t}}async function Q6(s,t){try{const r=await O6(s,t);return Dx(s.appConfig,r)}catch(r){throw gk(r)&&r.customData.serverCode===409?await Sk(s.appConfig):await Dx(s.appConfig,{fid:t.fid,registrationStatus:0}),r}}async function Y6(s){let t=await Qj(s.appConfig);for(;t.registrationStatus===1;)await wk(100),t=await Qj(s.appConfig);if(t.registrationStatus===0){const{installationEntry:r,registrationPromise:a}=await $g(s);return a||r}return t}function Qj(s){return Mm(s,t=>{if(!t)throw _i.create("installation-not-found");return Ek(t)})}function Ek(s){return X6(s)?{fid:s.fid,registrationStatus:0}:s}function X6(s){return s.registrationStatus===1&&s.registrationTime+hk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J6({appConfig:s,heartbeatServiceProvider:t},r){const a=Z6(s,r),i=R6(s,r),l=t.getImmediate({optional:!0});if(l){const x=await l.getHeartbeatsHeader();x&&i.append("x-firebase-client",x)}const o={installation:{sdkVersion:pk,appId:s.appId}},c={method:"POST",headers:i,body:JSON.stringify(o)},d=await Nk(()=>fetch(a,c));if(d.ok){const x=await d.json();return bk(x)}else throw await vk("Generate Auth Token",d)}function Z6(s,{fid:t}){return`${yk(s)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wg(s,t=!1){let r;const a=await Mm(s.appConfig,l=>{if(!Ck(l))throw _i.create("not-registered");const o=l.authToken;if(!t&&sR(o))return l;if(o.requestStatus===1)return r=eR(s,t),l;{if(!navigator.onLine)throw _i.create("app-offline");const c=aR(l);return r=tR(s,c),c}});return r?await r:a.authToken}async function eR(s,t){let r=await Yj(s.appConfig);for(;r.authToken.requestStatus===1;)await wk(100),r=await Yj(s.appConfig);const a=r.authToken;return a.requestStatus===0?Wg(s,t):a}function Yj(s){return Mm(s,t=>{if(!Ck(t))throw _i.create("not-registered");const r=t.authToken;return nR(r)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function tR(s,t){try{const r=await J6(s,t),a=Object.assign(Object.assign({},t),{authToken:r});return await Dx(s.appConfig,a),r}catch(r){if(gk(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await Sk(s.appConfig);else{const a=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Dx(s.appConfig,a)}throw r}}function Ck(s){return s!==void 0&&s.registrationStatus===2}function sR(s){return s.requestStatus===2&&!rR(s)}function rR(s){const t=Date.now();return t<s.creationTime||s.creationTime+s.expiresIn<t+T6}function aR(s){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:t})}function nR(s){return s.requestStatus===1&&s.requestTime+hk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(s){const t=s,{installationEntry:r,registrationPromise:a}=await $g(t);return a?a.catch(console.error):Wg(t).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(s,t=!1){const r=s;return await lR(r),(await Wg(r,t)).token}async function lR(s){const{registrationPromise:t}=await $g(s);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(s){if(!s||!s.options)throw Oh("App Configuration");if(!s.name)throw Oh("App Name");const t=["projectId","apiKey","appId"];for(const r of t)if(!s.options[r])throw Oh(r);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Oh(s){return _i.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="installations",dR="installations-internal",uR=s=>{const t=s.getProvider("app").getImmediate(),r=cR(t),a=Zn(t,"heartbeat");return{app:t,appConfig:r,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},xR=s=>{const t=s.getProvider("app").getImmediate(),r=Zn(t,Tk).getImmediate();return{getId:()=>iR(r),getToken:i=>oR(r,i)}};function mR(){na(new Wr(Tk,uR,"PUBLIC")),na(new Wr(dR,xR,"PRIVATE"))}mR();yr(mk,Fg);yr(mk,Fg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="analytics",hR="firebase_id",pR="origin",fR=60*1e3,gR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new mm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Cr=new Vi("analytics","Analytics",yR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(s){if(!s.startsWith(qg)){const t=Cr.create("invalid-gtag-resource",{gtagURL:s});return br.warn(t.message),""}return s}function _k(s){return Promise.all(s.map(t=>t.catch(r=>r)))}function vR(s,t){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(s,t)),r}function jR(s,t){const r=vR("firebase-js-sdk-policy",{createScriptURL:bR}),a=document.createElement("script"),i=`${qg}?l=${s}&id=${t}`;a.src=r?r==null?void 0:r.createScriptURL(i):i,a.async=!0,document.head.appendChild(a)}function NR(s){let t=[];return Array.isArray(window[s])?t=window[s]:window[s]=t,t}async function wR(s,t,r,a,i,l){const o=a[i];try{if(o)await t[o];else{const d=(await _k(r)).find(x=>x.measurementId===i);d&&await t[d.appId]}}catch(c){br.error(c)}s("config",i,l)}async function kR(s,t,r,a,i){try{let l=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const c=await _k(r);for(const d of o){const x=c.find(j=>j.measurementId===d),f=x&&t[x.appId];if(f)l.push(f);else{l=[];break}}}l.length===0&&(l=Object.values(t)),await Promise.all(l),s("event",a,i||{})}catch(l){br.error(l)}}function IR(s,t,r,a){async function i(l,...o){try{if(l==="event"){const[c,d]=o;await kR(s,t,r,c,d)}else if(l==="config"){const[c,d]=o;await wR(s,t,r,a,c,d)}else if(l==="consent"){const[c,d]=o;s("consent",c,d)}else if(l==="get"){const[c,d,x]=o;s("get",c,d,x)}else if(l==="set"){const[c]=o;s("set",c)}else s(l,...o)}catch(c){br.error(c)}}return i}function PR(s,t,r,a,i){let l=function(...o){window[a].push(arguments)};return window[i]&&typeof window[i]=="function"&&(l=window[i]),window[i]=IR(l,s,t,r),{gtagCore:l,wrappedGtag:window[i]}}function SR(s){const t=window.document.getElementsByTagName("script");for(const r of Object.values(t))if(r.src&&r.src.includes(qg)&&r.src.includes(s))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=30,CR=1e3;class TR{constructor(t={},r=CR){this.throttleMetadata=t,this.intervalMillis=r}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,r){this.throttleMetadata[t]=r}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const Dk=new TR;function _R(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function DR(s){var t;const{appId:r,apiKey:a}=s,i={method:"GET",headers:_R(a)},l=gR.replace("{app-id}",r),o=await fetch(l,i);if(o.status!==200&&o.status!==304){let c="";try{const d=await o.json();!((t=d.error)===null||t===void 0)&&t.message&&(c=d.error.message)}catch{}throw Cr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()}async function AR(s,t=Dk,r){const{appId:a,apiKey:i,measurementId:l}=s.options;if(!a)throw Cr.create("no-app-id");if(!i){if(l)return{measurementId:l,appId:a};throw Cr.create("no-api-key")}const o=t.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new LR;return setTimeout(async()=>{c.abort()},r!==void 0?r:fR),Ak({appId:a,apiKey:i,measurementId:l},o,c,t)}async function Ak(s,{throttleEndTimeMillis:t,backoffCount:r},a,i=Dk){var l;const{appId:o,measurementId:c}=s;try{await RR(a,t)}catch(d){if(c)return br.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:c};throw d}try{const d=await DR(s);return i.deleteThrottleMetadata(o),d}catch(d){const x=d;if(!MR(x)){if(i.deleteThrottleMetadata(o),c)return br.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${x==null?void 0:x.message}]`),{appId:o,measurementId:c};throw d}const f=Number((l=x==null?void 0:x.customData)===null||l===void 0?void 0:l.httpStatus)===503?Bv(r,i.intervalMillis,ER):Bv(r,i.intervalMillis),j={throttleEndTimeMillis:Date.now()+f,backoffCount:r+1};return i.setThrottleMetadata(o,j),br.debug(`Calling attemptFetch again in ${f} millis`),Ak(s,j,a,i)}}function RR(s,t){return new Promise((r,a)=>{const i=Math.max(t-Date.now(),0),l=setTimeout(r,i);s.addEventListener(()=>{clearTimeout(l),a(Cr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function MR(s){if(!(s instanceof qr)||!s.customData)return!1;const t=Number(s.customData.httpStatus);return t===429||t===500||t===503||t===504}class LR{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function OR(s,t,r,a,i){if(i&&i.global){s("event",r,a);return}else{const l=await t,o=Object.assign(Object.assign({},a),{send_to:l});s("event",r,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(){if(I4())try{await P4()}catch(s){return br.warn(Cr.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return br.warn(Cr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function zR(s,t,r,a,i,l,o){var c;const d=AR(s);d.then(S=>{r[S.measurementId]=S.appId,s.options.measurementId&&S.measurementId!==s.options.measurementId&&br.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>br.error(S)),t.push(d);const x=VR().then(S=>{if(S)return a.getId()}),[f,j]=await Promise.all([d,x]);SR(l)||jR(l,f.measurementId),i("js",new Date);const w=(c=o==null?void 0:o.config)!==null&&c!==void 0?c:{};return w[pR]="firebase",w.update=!0,j!=null&&(w[hR]=j),i("config",f.measurementId,w),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(t){this.app=t}_delete(){return delete sc[this.app.options.appId],Promise.resolve()}}let sc={},Xj=[];const Jj={};let Vh="dataLayer",FR="gtag",Zj,Rk,eN=!1;function UR(){const s=[];if(k4()&&s.push("This is a browser extension environment."),e_()||s.push("Cookies are not available."),s.length>0){const t=s.map((a,i)=>`(${i+1}) ${a}`).join(" "),r=Cr.create("invalid-analytics-context",{errorInfo:t});br.warn(r.message)}}function $R(s,t,r){UR();const a=s.options.appId;if(!a)throw Cr.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)br.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Cr.create("no-api-key");if(sc[a]!=null)throw Cr.create("already-exists",{id:a});if(!eN){NR(Vh);const{wrappedGtag:l,gtagCore:o}=PR(sc,Xj,Jj,Vh,FR);Rk=l,Zj=o,eN=!0}return sc[a]=zR(s,Xj,Jj,t,Zj,Vh,r),new BR(s)}function WR(s=hm()){s=Yt(s);const t=Zn(s,Ax);return t.isInitialized()?t.getImmediate():qR(s)}function qR(s,t={}){const r=Zn(s,Ax);if(r.isInitialized()){const i=r.getImmediate();if(Fn(t,r.getOptions()))return i;throw Cr.create("already-initialized")}return r.initialize({options:t})}function HR(s,t,r,a){s=Yt(s),OR(Rk,sc[s.app.options.appId],t,r,a).catch(i=>br.error(i))}const tN="@firebase/analytics",sN="0.10.12";function GR(){na(new Wr(Ax,(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return $R(a,i,r)},"PUBLIC")),na(new Wr("analytics-internal",s,"PRIVATE")),yr(tN,sN),yr(tN,sN,"esm2017");function s(t){try{const r=t.getProvider(Ax).getImmediate();return{logEvent:(a,i,l)=>HR(r,a,i,l)}}catch(r){throw Cr.create("interop-component-reg-failed",{reason:r})}}}GR();function Hg(s,t){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(s);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(s,a[i])&&(r[a[i]]=s[a[i]]);return r}function Mk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KR=Mk,Lk=new Vi("auth","Firebase",Mk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=new mm("@firebase/auth");function QR(s,...t){Rx.logLevel<=Et.WARN&&Rx.warn(`Auth (${zi}): ${s}`,...t)}function Du(s,...t){Rx.logLevel<=Et.ERROR&&Rx.error(`Auth (${zi}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(s,...t){throw Gg(s,...t)}function va(s,...t){return Gg(s,...t)}function Ok(s,t,r){const a=Object.assign(Object.assign({},KR()),{[t]:r});return new Vi("auth","Firebase",a).create(t,{appName:s.name})}function Wa(s){return Ok(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gg(s,...t){if(typeof s!="string"){const r=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(r,...a)}return Lk.create(s,...t)}function mt(s,t,...r){if(!s)throw Gg(t,...r)}function Ba(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Du(t),new Error(t)}function Za(s,t){s||Ba(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function Vk(){return rN()==="http:"||rN()==="https:"}function rN(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vk()||k4()||"connection"in navigator)?navigator.onLine:!0}function XR(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(t,r){this.shortDelay=t,this.longDelay=r,Za(r>t,"Short delay should be less than long delay!"),this.isMobile=KT()||XT()}get(){return YR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(s,t){Za(s.emulator,"Emulator should always be set here");const{url:r}=s.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{static initialize(t,r,a){this.fetchImpl=t,r&&(this.headersImpl=r),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eM=new xd(3e4,6e4);function nn(s,t){return s.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:s.tenantId}):t}async function Ta(s,t,r,a,i={}){return Bk(s,i,async()=>{let l={},o={};a&&(t==="GET"?o=a:l={body:JSON.stringify(a)});const c=td(Object.assign({key:s.config.apiKey},o)).slice(1),d=await s._getAdditionalHeaders();d["Content-Type"]="application/json",s.languageCode&&(d["X-Firebase-Locale"]=s.languageCode);const x=Object.assign({method:t,headers:d},l);return YT()||(x.referrerPolicy="no-referrer"),zk.fetch()(await Fk(s,s.config.apiHost,r,c),x)})}async function Bk(s,t,r){s._canInitEmulator=!1;const a=Object.assign(Object.assign({},JR),t);try{const i=new sM(s),l=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await l.json();if("needConfirmation"in o)throw nu(s,"account-exists-with-different-credential",o);if(l.ok&&!("errorMessage"in o))return o;{const c=l.ok?o.errorMessage:o.error.message,[d,x]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw nu(s,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw nu(s,"email-already-in-use",o);if(d==="USER_DISABLED")throw nu(s,"user-disabled",o);const f=a[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw Ok(s,f,x);oa(s,f)}}catch(i){if(i instanceof qr)throw i;oa(s,"network-request-failed",{message:String(i)})}}async function md(s,t,r,a,i={}){const l=await Ta(s,t,r,a,i);return"mfaPendingCredential"in l&&oa(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function Fk(s,t,r,a){const i=`${t}${r}?${a}`,l=s,o=l.config.emulator?Kg(s.config,i):`${s.config.apiScheme}://${i}`;return ZR.includes(r)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(o).toString():o}function tM(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,a)=>{this.timer=setTimeout(()=>a(va(this.auth,"network-request-failed")),eM.get())})}}function nu(s,t,r){const a={appName:s.name};r.email&&(a.email=r.email),r.phoneNumber&&(a.phoneNumber=r.phoneNumber);const i=va(s,t,a);return i.customData._tokenResponse=r,i}function aN(s){return s!==void 0&&s.enterprise!==void 0}class rM{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return tM(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function aM(s,t){return Ta(s,"GET","/v2/recaptchaConfig",nn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(s,t){return Ta(s,"POST","/v1/accounts:delete",t)}async function Lx(s,t){return Ta(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function iM(s,t=!1){const r=Yt(s),a=await r.getIdToken(t),i=Qg(a);mt(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const l=typeof i.firebase=="object"?i.firebase:void 0,o=l==null?void 0:l.sign_in_provider;return{claims:i,token:a,authTime:rc(zh(i.auth_time)),issuedAtTime:rc(zh(i.iat)),expirationTime:rc(zh(i.exp)),signInProvider:o||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function zh(s){return Number(s)*1e3}function Qg(s){const[t,r,a]=s.split(".");if(t===void 0||r===void 0||a===void 0)return Du("JWT malformed, contained fewer than 3 sections"),null;try{const i=y4(r);return i?JSON.parse(i):(Du("Failed to decode base64 JWT payload"),null)}catch(i){return Du("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function nN(s){const t=Qg(s);return mt(t,"internal-error"),mt(typeof t.exp<"u","internal-error"),mt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(s,t,r=!1){if(r)return t;try{return await t}catch(a){throw a instanceof qr&&oM(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function oM({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var r;if(t){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=rc(this.lastLoginAt),this.creationTime=rc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(s){var t;const r=s.auth,a=await s.getIdToken(),i=await Wo(s,Lx(r,{idToken:a}));mt(i==null?void 0:i.users.length,r,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const o=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?Uk(l.providerUserInfo):[],c=dM(s.providerData,o),d=s.isAnonymous,x=!(s.email&&l.passwordHash)&&!(c!=null&&c.length),f=d?x:!1,j={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new I0(l.createdAt,l.lastLoginAt),isAnonymous:f};Object.assign(s,j)}async function cM(s){const t=Yt(s);await Ox(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function dM(s,t){return[...s.filter(a=>!t.some(i=>i.providerId===a.providerId)),...t]}function Uk(s){return s.map(t=>{var{providerId:r}=t,a=Hg(t,["providerId"]);return{providerId:r,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uM(s,t){const r=await Bk(s,{},async()=>{const a=td({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:l}=s.config,o=await Fk(s,i,"/v1/token",`key=${l}`),c=await s._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",zk.fetch()(o,{method:"POST",headers:c,body:a})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function xM(s,t){return Ta(s,"POST","/v2/accounts:revokeToken",nn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){mt(t.idToken,"internal-error"),mt(typeof t.idToken<"u","internal-error"),mt(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):nN(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){mt(t.length!==0,"internal-error");const r=nN(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(mt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:a,refreshToken:i,expiresIn:l}=await uM(t,r);this.updateTokensAndExpiration(a,i,Number(l))}updateTokensAndExpiration(t,r,a){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,r){const{refreshToken:a,accessToken:i,expirationTime:l}=r,o=new Eo;return a&&(mt(typeof a=="string","internal-error",{appName:t}),o.refreshToken=a),i&&(mt(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),l&&(mt(typeof l=="number","internal-error",{appName:t}),o.expirationTime=l),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return Ba("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(s,t){mt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class ea{constructor(t){var{uid:r,auth:a,stsTokenManager:i}=t,l=Hg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=a,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new I0(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const r=await Wo(this,this.stsTokenManager.getToken(this.auth,t));return mt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return iM(this,t)}reload(){return cM(this)}_assign(t){this!==t&&(mt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>Object.assign({},r)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new ea(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(t){mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),r&&await Ox(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kr(this.auth.app))return Promise.reject(Wa(this.auth));const t=await this.getIdToken();return await Wo(this,nM(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){var a,i,l,o,c,d,x,f;const j=(a=r.displayName)!==null&&a!==void 0?a:void 0,w=(i=r.email)!==null&&i!==void 0?i:void 0,S=(l=r.phoneNumber)!==null&&l!==void 0?l:void 0,g=(o=r.photoURL)!==null&&o!==void 0?o:void 0,V=(c=r.tenantId)!==null&&c!==void 0?c:void 0,E=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,T=(x=r.createdAt)!==null&&x!==void 0?x:void 0,M=(f=r.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:L,emailVerified:H,isAnonymous:q,providerData:Q,stsTokenManager:O}=r;mt(L&&O,t,"internal-error");const u=Eo.fromJSON(this.name,O);mt(typeof L=="string",t,"internal-error"),mn(j,t.name),mn(w,t.name),mt(typeof H=="boolean",t,"internal-error"),mt(typeof q=="boolean",t,"internal-error"),mn(S,t.name),mn(g,t.name),mn(V,t.name),mn(E,t.name),mn(T,t.name),mn(M,t.name);const U=new ea({uid:L,auth:t,email:w,emailVerified:H,displayName:j,isAnonymous:q,photoURL:g,phoneNumber:S,tenantId:V,stsTokenManager:u,createdAt:T,lastLoginAt:M});return Q&&Array.isArray(Q)&&(U.providerData=Q.map(F=>Object.assign({},F))),E&&(U._redirectEventId=E),U}static async _fromIdTokenResponse(t,r,a=!1){const i=new Eo;i.updateFromServerResponse(r);const l=new ea({uid:r.localId,auth:t,stsTokenManager:i,isAnonymous:a});return await Ox(l),l}static async _fromGetAccountInfoResponse(t,r,a){const i=r.users[0];mt(i.localId!==void 0,"internal-error");const l=i.providerUserInfo!==void 0?Uk(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(l!=null&&l.length),c=new Eo;c.updateFromIdToken(a);const d=new ea({uid:i.localId,auth:t,stsTokenManager:c,isAnonymous:o}),x={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new I0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(l!=null&&l.length)};return Object.assign(d,x),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=new Map;function Fa(s){Za(s instanceof Function,"Expected a class definition");let t=iN.get(s);return t?(Za(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,iN.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}$k.type="NONE";const oN=$k;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(s,t,r){return`firebase:${s}:${t}:${r}`}class Co{constructor(t,r,a){this.persistence=t,this.auth=r,this.userKey=a;const{config:i,name:l}=this.auth;this.fullUserKey=Au(this.userKey,i.apiKey,l),this.fullPersistenceKey=Au("persistence",i.apiKey,l),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await Lx(this.auth,{idToken:t}).catch(()=>{});return r?ea._fromGetAccountInfoResponse(this.auth,r,t):null}return ea._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,a="authUser"){if(!r.length)return new Co(Fa(oN),t,a);const i=(await Promise.all(r.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let l=i[0]||Fa(oN);const o=Au(a,t.config.apiKey,t.name);let c=null;for(const x of r)try{const f=await x._get(o);if(f){let j;if(typeof f=="string"){const w=await Lx(t,{idToken:f}).catch(()=>{});if(!w)break;j=await ea._fromGetAccountInfoResponse(t,w,f)}else j=ea._fromJSON(t,f);x!==l&&(c=j),l=x;break}}catch{}const d=i.filter(x=>x._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new Co(l,t,a):(l=d[0],c&&await l._set(o,c.toJSON()),await Promise.all(r.map(async x=>{if(x!==l)try{await x._remove(o)}catch{}})),new Co(l,t,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Gk(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Wk(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Qk(t))return"Blackberry";if(Yk(t))return"Webos";if(qk(t))return"Safari";if((t.includes("chrome/")||Hk(t))&&!t.includes("edge/"))return"Chrome";if(Kk(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(r);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function Wk(s=er()){return/firefox\//i.test(s)}function qk(s=er()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Hk(s=er()){return/crios\//i.test(s)}function Gk(s=er()){return/iemobile/i.test(s)}function Kk(s=er()){return/android/i.test(s)}function Qk(s=er()){return/blackberry/i.test(s)}function Yk(s=er()){return/webos/i.test(s)}function Yg(s=er()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function mM(s=er()){var t;return Yg(s)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function hM(){return JT()&&document.documentMode===10}function Xk(s=er()){return Yg(s)||Kk(s)||Yk(s)||Qk(s)||/windows phone/i.test(s)||Gk(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(s,t=[]){let r;switch(s){case"Browser":r=lN(er());break;case"Worker":r=`${lN(er())}-${s}`;break;default:r=s}const a=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${zi}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const a=l=>new Promise((o,c)=>{try{const d=t(l);o(d)}catch(d){c(d)}});a.onAbort=r,this.queue.push(a);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const a of this.queue)await a(t),a.onAbort&&r.push(a.onAbort)}catch(a){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fM(s,t={}){return Ta(s,"GET","/v2/passwordPolicy",nn(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=6;class yM{constructor(t){var r,a,i,l;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:gM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(a=t.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var r,a,i,l,o,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,d),this.validatePasswordCharacterOptions(t,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(a=d.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(l=d.containsUppercaseLetter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(t,r){const a=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;a&&(r.meetsMinPasswordLength=t.length>=a),i&&(r.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let a;for(let i=0;i<t.length;i++)a=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,r,a,i,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(t,r,a,i){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=a,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cN(this),this.idTokenSubscription=new cN(this),this.beforeStateQueue=new pM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Fa(r)),this._initializationPromise=this.queue(async()=>{var a,i,l;if(!this._deleted&&(this.persistenceManager=await Co.create(this,t),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await Lx(this,{idToken:t}),a=await ea._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(a)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(kr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let i=a,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(t);(!o||o===c)&&(d!=null&&d.user)&&(i=d.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return mt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await Ox(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=XR()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(kr(this.app))return Promise.reject(Wa(this));const r=t?Yt(t):null;return r&&mt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&mt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return kr(this.app)?Promise.reject(Wa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return kr(this.app)?Promise.reject(Wa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fa(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await fM(this),r=new yM(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Vi("auth","Firebase",t())}onAuthStateChanged(t,r,a){return this.registerStateListener(this.authStateSubscription,t,r,a)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,a){return this.registerStateListener(this.idTokenSubscription,t,r,a)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(a.tenantId=this.tenantId),await xM(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,r){const a=await this.getOrInitRedirectPersistenceManager(r);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Fa(t)||this._popupRedirectResolver;mt(r,this,"argument-error"),this.redirectPersistenceManager=await Co.create(this,[Fa(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,a;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===t?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(r=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,a,i){if(this._deleted)return()=>{};const l=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(mt(c,this,"internal-error"),c.then(()=>{o||l(this.currentUser)}),typeof r=="function"){const d=t.addObserver(r,a,i);return()=>{o=!0,d()}}else{const d=t.addObserver(r);return()=>{o=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Jk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const a=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());a&&(r["X-Firebase-Client"]=a);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var t;if(kr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return r!=null&&r.error&&QR(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function $i(s){return Yt(s)}class cN{constructor(t){this.auth=t,this.observer=null,this.addObserver=n_(r=>this.observer=r)}get next(){return mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vM(s){Lm=s}function Zk(s){return Lm.loadJS(s)}function jM(){return Lm.recaptchaEnterpriseScript}function NM(){return Lm.gapiScript}function wM(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class kM{constructor(){this.enterprise=new IM}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class IM{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const PM="recaptcha-enterprise",e1="NO_RECAPTCHA";class SM{constructor(t){this.type=PM,this.auth=$i(t)}async verify(t="verify",r=!1){async function a(l){if(!r){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(o,c)=>{aM(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const x=new rM(d);return l.tenantId==null?l._agentRecaptchaConfig=x:l._tenantRecaptchaConfigs[l.tenantId]=x,o(x.siteKey)}}).catch(d=>{c(d)})})}function i(l,o,c){const d=window.grecaptcha;aN(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:t}).then(x=>{o(x)}).catch(()=>{o(e1)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kM().execute("siteKey",{action:"verify"}):new Promise((l,o)=>{a(this.auth).then(c=>{if(!r&&aN(window.grecaptcha))i(c,l,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let d=jM();d.length!==0&&(d+=c),Zk(d).then(()=>{i(c,l,o)}).catch(x=>{o(x)})}}).catch(c=>{o(c)})})}}async function Cl(s,t,r,a=!1,i=!1){const l=new SM(s);let o;if(i)o=e1;else try{o=await l.verify(r)}catch{o=await l.verify(r,!0)}const c=Object.assign({},t);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,x=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:x,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return a?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function P0(s,t,r,a,i){var l,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((l=s._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Cl(s,t,r,r==="getOobCode");return a(s,c)}else return a(s,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Cl(s,t,r,r==="getOobCode");return a(s,d)}else return Promise.reject(c)});else if(i==="PHONE_PROVIDER")if(!((o=s._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const c=await Cl(s,t,r);return a(s,c).catch(async d=>{var x;if(((x=s._getRecaptchaConfig())===null||x===void 0?void 0:x.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(d.code==="auth/missing-recaptcha-token"||d.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${r} flow.`);const f=await Cl(s,t,r,!1,!0);return a(s,f)}return Promise.reject(d)})}else{const c=await Cl(s,t,r,!1,!0);return a(s,c)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(s,t){const r=Zn(s,"auth");if(r.isInitialized()){const i=r.getImmediate(),l=r.getOptions();if(Fn(l,t??{}))return i;oa(i,"already-initialized")}return r.initialize({options:t})}function CM(s,t){const r=(t==null?void 0:t.persistence)||[],a=(Array.isArray(r)?r:[r]).map(Fa);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(a,t==null?void 0:t.popupRedirectResolver)}function TM(s,t,r){const a=$i(s);mt(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const i=!!(r!=null&&r.disableWarnings),l=t1(t),{host:o,port:c}=_M(t),d=c===null?"":`:${c}`,x={url:`${l}//${o}${d}/`},f=Object.freeze({host:o,port:c,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!a._canInitEmulator){mt(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),mt(Fn(x,a.config.emulator)&&Fn(f,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=x,a.emulatorConfig=f,a.settings.appVerificationDisabledForTesting=!0,i||DM()}function t1(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function _M(s){const t=t1(s),r=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!r)return{host:"",port:null};const a=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(a);if(i){const l=i[1];return{host:l,port:dN(a.substr(l.length+1))}}else{const[l,o]=a.split(":");return{host:l,port:dN(o)}}}function dN(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function DM(){function s(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return Ba("not implemented")}_getIdTokenResponse(t){return Ba("not implemented")}_linkToIdToken(t,r){return Ba("not implemented")}_getReauthenticationResolver(t){return Ba("not implemented")}}async function AM(s,t){return Ta(s,"POST","/v1/accounts:update",t)}async function RM(s,t){return Ta(s,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MM(s,t){return md(s,"POST","/v1/accounts:signInWithPassword",nn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(s,t){return md(s,"POST","/v1/accounts:signInWithEmailLink",nn(s,t))}async function OM(s,t){return md(s,"POST","/v1/accounts:signInWithEmailLink",nn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends Xg{constructor(t,r,a,i=null){super("password",a),this._email=t,this._password=r,this._tenantId=i}static _fromEmailAndPassword(t,r){return new Vc(t,r,"password")}static _fromEmailAndCode(t,r,a=null){return new Vc(t,r,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return P0(t,r,"signInWithPassword",MM,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return LM(t,{email:this._email,oobCode:this._password});default:oa(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const a={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return P0(t,a,"signUpPassword",RM,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return OM(t,{idToken:r,email:this._email,oobCode:this._password});default:oa(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(s,t){return md(s,"POST","/v1/accounts:signInWithIdp",nn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM="http://localhost";class Ai extends Xg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Ai(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):oa("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:i}=r,l=Hg(r,["providerId","signInMethod"]);if(!a||!i)return null;const o=new Ai(a,i);return o.idToken=l.idToken||void 0,o.accessToken=l.accessToken||void 0,o.secret=l.secret,o.nonce=l.nonce,o.pendingToken=l.pendingToken||null,o}_getIdTokenResponse(t){const r=this.buildRequest();return To(t,r)}_linkToIdToken(t,r){const a=this.buildRequest();return a.idToken=r,To(t,a)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,To(t,r)}buildRequest(){const t={requestUri:VM,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=td(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BM(s){const t=Ml(Ll(s)).link,r=t?Ml(Ll(t)).deep_link_id:null,a=Ml(Ll(s)).deep_link_id;return(a?Ml(Ll(a)).link:null)||a||r||t||s}class Jg{constructor(t){var r,a,i,l,o,c;const d=Ml(Ll(t)),x=(r=d.apiKey)!==null&&r!==void 0?r:null,f=(a=d.oobCode)!==null&&a!==void 0?a:null,j=zM((i=d.mode)!==null&&i!==void 0?i:null);mt(x&&f&&j,"argument-error"),this.apiKey=x,this.operation=j,this.code=f,this.continueUrl=(l=d.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(o=d.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(t){const r=BM(t);try{return new Jg(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(){this.providerId=al.PROVIDER_ID}static credential(t,r){return Vc._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const a=Jg.parseLink(r);return mt(a,"argument-error"),Vc._fromEmailAndCode(t,a.code,a.tenantId)}}al.PROVIDER_ID="password";al.EMAIL_PASSWORD_SIGN_IN_METHOD="password";al.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd extends s1{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn extends hd{constructor(){super("facebook.com")}static credential(t){return Ai._fromParams({providerId:bn.PROVIDER_ID,signInMethod:bn.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bn.credentialFromTaggedObject(t)}static credentialFromError(t){return bn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bn.credential(t.oauthAccessToken)}catch{return null}}}bn.FACEBOOK_SIGN_IN_METHOD="facebook.com";bn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn extends hd{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Ai._fromParams({providerId:vn.PROVIDER_ID,signInMethod:vn.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return vn.credentialFromTaggedObject(t)}static credentialFromError(t){return vn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:a}=t;if(!r&&!a)return null;try{return vn.credential(r,a)}catch{return null}}}vn.GOOGLE_SIGN_IN_METHOD="google.com";vn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends hd{constructor(){super("github.com")}static credential(t){return Ai._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return jn.credentialFromTaggedObject(t)}static credentialFromError(t){return jn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return jn.credential(t.oauthAccessToken)}catch{return null}}}jn.GITHUB_SIGN_IN_METHOD="github.com";jn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends hd{constructor(){super("twitter.com")}static credential(t,r){return Ai._fromParams({providerId:Nn.PROVIDER_ID,signInMethod:Nn.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return Nn.credentialFromTaggedObject(t)}static credentialFromError(t){return Nn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:a}=t;if(!r||!a)return null;try{return Nn.credential(r,a)}catch{return null}}}Nn.TWITTER_SIGN_IN_METHOD="twitter.com";Nn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(s,t){return md(s,"POST","/v1/accounts:signUp",nn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,a,i=!1){const l=await ea._fromIdTokenResponse(t,a,i),o=uN(a);return new Ri({user:l,providerId:o,_tokenResponse:a,operationType:r})}static async _forOperation(t,r,a){await t._updateTokensIfNecessary(a,!0);const i=uN(a);return new Ri({user:t,providerId:i,_tokenResponse:a,operationType:r})}}function uN(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx extends qr{constructor(t,r,a,i){var l;super(r.code,r.message),this.operationType=a,this.user=i,Object.setPrototypeOf(this,Vx.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:r.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,r,a,i){return new Vx(t,r,a,i)}}function r1(s,t,r,a){return(t==="reauthenticate"?r._getReauthenticationResolver(s):r._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Vx._fromErrorAndOperation(s,l,t,a):l})}async function UM(s,t,r=!1){const a=await Wo(s,t._linkToIdToken(s.auth,await s.getIdToken()),r);return Ri._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(s,t,r=!1){const{auth:a}=s;if(kr(a.app))return Promise.reject(Wa(a));const i="reauthenticate";try{const l=await Wo(s,r1(a,i,t,s),r);mt(l.idToken,a,"internal-error");const o=Qg(l.idToken);mt(o,a,"internal-error");const{sub:c}=o;return mt(s.uid===c,a,"user-mismatch"),Ri._forOperation(s,i,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&oa(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a1(s,t,r=!1){if(kr(s.app))return Promise.reject(Wa(s));const a="signIn",i=await r1(s,a,t),l=await Ri._fromIdTokenResponse(s,a,i);return r||await s._updateCurrentUser(l.user),l}async function WM(s,t){return a1($i(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(s){const t=$i(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function qM(s,t,r){if(kr(s.app))return Promise.reject(Wa(s));const a=$i(s),o=await P0(a,{returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FM,"EMAIL_PASSWORD_PROVIDER").catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&n1(s),d}),c=await Ri._fromIdTokenResponse(a,"signIn",o);return await a._updateCurrentUser(c.user),c}function HM(s,t,r){return kr(s.app)?Promise.reject(Wa(s)):WM(Yt(s),al.credential(t,r)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&n1(s),a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GM(s,t){return Ta(s,"POST","/v1/accounts:createAuthUri",nn(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(s,t){const r=Vk()?Mx():"http://localhost",a={identifier:t,continueUri:r},{signinMethods:i}=await GM(Yt(s),a);return i||[]}function Zg(s,t){return QM(Yt(s),null,t)}async function QM(s,t,r){const{auth:a}=s,l={idToken:await s.getIdToken(),returnSecureToken:!0};t&&(l.email=t),r&&(l.password=r);const o=await Wo(s,AM(a,l));await s._updateTokensIfNecessary(o,!0)}function YM(s,t,r,a){return Yt(s).onIdTokenChanged(t,r,a)}function XM(s,t,r){return Yt(s).beforeAuthStateChanged(t,r)}function Dt(s,t,r,a){return Yt(s).onAuthStateChanged(t,r,a)}function zc(s){return Yt(s).signOut()}const zx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(zx,"1"),this.storage.removeItem(zx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=1e3,ZM=10;class o1 extends i1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xk(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const a=this.storage.getItem(r),i=this.localCache[r];a!==i&&t(r,i,a)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const a=t.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(a);!r&&this.localCache[a]===o||this.notifyListeners(a,o)},l=this.storage.getItem(a);hM()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,ZM):i()}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const i of Array.from(a))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:a}),!0)})},JM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}o1.type="LOCAL";const e7=o1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1 extends i1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}l1.type="SESSION";const c1=l1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t7(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(i=>i.isListeningto(t));if(r)return r;const a=new Om(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:a,eventType:i,data:l}=r.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:a,eventType:i});const c=Array.from(o).map(async x=>x(r.origin,l)),d=await t7(c);r.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Om.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(s="",t=10){let r="";for(let a=0;a<t;a++)r+=Math.floor(Math.random()*10);return s+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,a=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let l,o;return new Promise((c,d)=>{const x=ey("",20);i.port1.start();const f=setTimeout(()=>{d(new Error("unsupported_event"))},a);o={messageChannel:i,onMessage(j){const w=j;if(w.data.eventId===x)switch(w.data.status){case"ack":clearTimeout(f),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),c(w.data.response);break;default:clearTimeout(f),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:x,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(){return window}function r7(s){ja().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(){return typeof ja().WorkerGlobalScope<"u"&&typeof ja().importScripts=="function"}async function a7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function n7(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function i7(){return d1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="firebaseLocalStorageDb",o7=1,Bx="firebaseLocalStorage",x1="fbase_key";class pd{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Vm(s,t){return s.transaction([Bx],t?"readwrite":"readonly").objectStore(Bx)}function l7(){const s=indexedDB.deleteDatabase(u1);return new pd(s).toPromise()}function S0(){const s=indexedDB.open(u1,o7);return new Promise((t,r)=>{s.addEventListener("error",()=>{r(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(Bx,{keyPath:x1})}catch(i){r(i)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(Bx)?t(a):(a.close(),await l7(),t(await S0()))})})}async function xN(s,t,r){const a=Vm(s,!0).put({[x1]:t,value:r});return new pd(a).toPromise()}async function c7(s,t){const r=Vm(s,!1).get(t),a=await new pd(r).toPromise();return a===void 0?null:a.value}function mN(s,t){const r=Vm(s,!0).delete(t);return new pd(r).toPromise()}const d7=800,u7=3;class m1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await S0(),this.db)}async _withRetries(t){let r=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(r++>u7)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return d1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Om._getInstance(i7()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await a7(),!this.activeServiceWorker)return;this.sender=new s7(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((t=a[0])===null||t===void 0)&&t.fulfilled&&!((r=a[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||n7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await S0();return await xN(t,zx,"1"),await mN(t,zx),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(a=>xN(a,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(a=>c7(a,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>mN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const l=Vm(i,!1).getAll();return new pd(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],a=new Set;if(t.length!==0)for(const{fbase_key:i,value:l}of t)a.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(l)&&(this.notifyListeners(i,l),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!a.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const i of Array.from(a))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}m1.type="LOCAL";const x7=m1;new xd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m7(s,t){return t?Fa(t):(mt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty extends Xg{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return To(t,this._buildIdpRequest())}_linkToIdToken(t,r){return To(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return To(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function h7(s){return a1(s.auth,new ty(s),s.bypassAuthState)}function p7(s){const{auth:t,user:r}=s;return mt(r,t,"internal-error"),$M(r,new ty(s),s.bypassAuthState)}async function f7(s){const{auth:t,user:r}=s;return mt(r,t,"internal-error"),UM(r,new ty(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(t,r,a,i,l=!1){this.auth=t,this.resolver=a,this.user=i,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:a,postBody:i,tenantId:l,error:o,type:c}=t;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:r,sessionId:a,tenantId:l||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(x){this.reject(x)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return h7;case"linkViaPopup":case"linkViaRedirect":return f7;case"reauthViaPopup":case"reauthViaRedirect":return p7;default:oa(this.auth,"internal-error")}}resolve(t){Za(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Za(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7=new xd(2e3,1e4);class po extends h1{constructor(t,r,a,i,l){super(t,r,i,l),this.provider=a,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return mt(t,this.auth,"internal-error"),t}async onExecution(){Za(this.filter.length===1,"Popup operations only handle one event");const t=ey();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(va(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(va(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,a;if(!((a=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(va(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,g7.get())};t()}}po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7="pendingRedirect",Ru=new Map;class b7 extends h1{constructor(t,r,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a),this.eventId=null}async execute(){let t=Ru.get(this.auth._key());if(!t){try{const a=await v7(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(r){t=()=>Promise.reject(r)}Ru.set(this.auth._key(),t)}return this.bypassAuthState||Ru.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function v7(s,t){const r=w7(t),a=N7(s);if(!await a._isAvailable())return!1;const i=await a._get(r)==="true";return await a._remove(r),i}function j7(s,t){Ru.set(s._key(),t)}function N7(s){return Fa(s._redirectPersistence)}function w7(s){return Au(y7,s.config.apiKey,s.name)}async function k7(s,t,r=!1){if(kr(s.app))return Promise.reject(Wa(s));const a=$i(s),i=m7(a,t),o=await new b7(a,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await a._persistUserIfCurrent(o.user),await a._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7=10*60*1e3;class P7{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(r=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!S7(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var a;if(t.error&&!p1(t)){const i=((a=t.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";r.onError(va(this.auth,i))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const a=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=I7&&this.cachedEventUids.clear(),this.cachedEventUids.has(hN(t))}saveEventToCache(t){this.cachedEventUids.add(hN(t)),this.lastProcessedEventTime=Date.now()}}function hN(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function p1({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function S7(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return p1(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E7(s,t={}){return Ta(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T7=/^https?/;async function _7(s){if(s.config.emulator)return;const{authorizedDomains:t}=await E7(s);for(const r of t)try{if(D7(r))return}catch{}oa(s,"unauthorized-domain")}function D7(s){const t=Mx(),{protocol:r,hostname:a}=new URL(t);if(s.startsWith("chrome-extension://")){const o=new URL(s);return o.hostname===""&&a===""?r==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===a}if(!T7.test(r))return!1;if(C7.test(s))return a===s;const i=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=new xd(3e4,6e4);function pN(){const s=ja().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let r=0;r<s.CP.length;r++)s.CP[r]=null}}function R7(s){return new Promise((t,r)=>{var a,i,l;function o(){pN(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{pN(),r(va(s,"network-request-failed"))},timeout:A7.get()})}if(!((i=(a=ja().gapi)===null||a===void 0?void 0:a.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((l=ja().gapi)===null||l===void 0)&&l.load)o();else{const c=wM("iframefcb");return ja()[c]=()=>{gapi.load?o():r(va(s,"network-request-failed"))},Zk(`${NM()}?onload=${c}`).catch(d=>r(d))}}).catch(t=>{throw Mu=null,t})}let Mu=null;function M7(s){return Mu=Mu||R7(s),Mu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7=new xd(5e3,15e3),O7="__/auth/iframe",V7="emulator/auth/iframe",z7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function F7(s){const t=s.config;mt(t.authDomain,s,"auth-domain-config-required");const r=t.emulator?Kg(t,V7):`https://${s.config.authDomain}/${O7}`,a={apiKey:t.apiKey,appName:s.name,v:zi},i=B7.get(s.config.apiHost);i&&(a.eid=i);const l=s._getFrameworks();return l.length&&(a.fw=l.join(",")),`${r}?${td(a).slice(1)}`}async function U7(s){const t=await M7(s),r=ja().gapi;return mt(r,s,"internal-error"),t.open({where:document.body,url:F7(s),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z7,dontclear:!0},a=>new Promise(async(i,l)=>{await a.restyle({setHideOnLeave:!1});const o=va(s,"network-request-failed"),c=ja().setTimeout(()=>{l(o)},L7.get());function d(){ja().clearTimeout(c),i(a)}a.ping(d).then(d,()=>{l(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},W7=500,q7=600,H7="_blank",G7="http://localhost";class fN{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function K7(s,t,r,a=W7,i=q7){const l=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-a)/2,0).toString();let c="";const d=Object.assign(Object.assign({},$7),{width:a.toString(),height:i.toString(),top:l,left:o}),x=er().toLowerCase();r&&(c=Hk(x)?H7:r),Wk(x)&&(t=t||G7,d.scrollbars="yes");const f=Object.entries(d).reduce((w,[S,g])=>`${w}${S}=${g},`,"");if(mM(x)&&c!=="_self")return Q7(t||"",c),new fN(null);const j=window.open(t||"",c,f);mt(j,s,"popup-blocked");try{j.focus()}catch{}return new fN(j)}function Q7(s,t){const r=document.createElement("a");r.href=s,r.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7="__/auth/handler",X7="emulator/auth/handler",J7=encodeURIComponent("fac");async function gN(s,t,r,a,i,l){mt(s.config.authDomain,s,"auth-domain-config-required"),mt(s.config.apiKey,s,"invalid-api-key");const o={apiKey:s.config.apiKey,appName:s.name,authType:r,redirectUrl:a,v:zi,eventId:i};if(t instanceof s1){t.setDefaultLanguage(s.languageCode),o.providerId=t.providerId||"",a_(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[f,j]of Object.entries(l||{}))o[f]=j}if(t instanceof hd){const f=t.getScopes().filter(j=>j!=="");f.length>0&&(o.scopes=f.join(","))}s.tenantId&&(o.tid=s.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const d=await s._getAppCheckToken(),x=d?`#${J7}=${encodeURIComponent(d)}`:"";return`${Z7(s)}?${td(c).slice(1)}${x}`}function Z7({config:s}){return s.emulator?Kg(s,X7):`https://${s.authDomain}/${Y7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="webStorageSupport";class eL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=c1,this._completeRedirectFn=k7,this._overrideRedirectResult=j7}async _openPopup(t,r,a,i){var l;Za((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await gN(t,r,a,Mx(),i);return K7(t,o,ey())}async _openRedirect(t,r,a,i){await this._originValidation(t);const l=await gN(t,r,a,Mx(),i);return r7(l),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:i,promise:l}=this.eventManagers[r];return i?Promise.resolve(i):(Za(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(t);return this.eventManagers[r]={promise:a},a.catch(()=>{delete this.eventManagers[r]}),a}async initAndGetManager(t){const r=await U7(t),a=new P7(t);return r.register("authEvent",i=>(mt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:a.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=r,a}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(Bh,{type:Bh},i=>{var l;const o=(l=i==null?void 0:i[0])===null||l===void 0?void 0:l[Bh];o!==void 0&&r(!!o),oa(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=_7(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return Xk()||qk()||Yg()}}const tL=eL;var yN="@firebase/auth",bN="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(a=>{t((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aL(s){na(new Wr("auth",(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=a.options;mt(o&&!o.includes(":"),"invalid-api-key",{appName:a.name});const d={apiKey:o,authDomain:c,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jk(s)},x=new bM(a,i,l,d);return CM(x,r),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,a)=>{t.getProvider("auth-internal").initialize()})),na(new Wr("auth-internal",t=>{const r=$i(t.getProvider("auth").getImmediate());return(a=>new sL(a))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(yN,bN,rL(s)),yr(yN,bN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=5*60,iL=N4("authIdTokenMaxAge")||nL;let vN=null;const oL=s=>async t=>{const r=t&&await t.getIdTokenResult(),a=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(a&&a>iL)return;const i=r==null?void 0:r.token;vN!==i&&(vN=i,await fetch(s,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function sy(s=hm()){const t=Zn(s,"auth");if(t.isInitialized())return t.getImmediate();const r=EM(s,{popupRedirectResolver:tL,persistence:[x7,e7,c1]}),a=N4("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const o=oL(l.toString());XM(r,o,()=>o(r.currentUser)),YM(r,c=>o(c))}}const i=b4("auth");return i&&TM(r,`http://${i}`),r}function lL(){var s,t;return(t=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&t!==void 0?t:document}vM({loadJS(s){return new Promise((t,r)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=t,a.onerror=i=>{const l=va("internal-error");l.customData=i,r(l)},a.type="text/javascript",a.charset="UTF-8",lL().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aL("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="firebasestorage.googleapis.com",cL="storageBucket",dL=2*60*1e3,uL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends qr{constructor(t,r,a=0){super(Fh(t),`Firebase Storage: ${r} (${Fh(t)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_a.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Fh(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ea;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ea||(Ea={}));function Fh(s){return"storage/"+s}function xL(){const s="An unknown error occurred, please check the error payload for server response.";return new _a(Ea.UNKNOWN,s)}function mL(){return new _a(Ea.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hL(){return new _a(Ea.CANCELED,"User canceled the upload/download.")}function pL(s){return new _a(Ea.INVALID_URL,"Invalid URL '"+s+"'.")}function fL(s){return new _a(Ea.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function jN(s){return new _a(Ea.INVALID_ARGUMENT,s)}function g1(){return new _a(Ea.APP_DELETED,"The Firebase app was deleted.")}function gL(s){return new _a(Ea.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let a;try{a=ta.makeFromUrl(t,r)}catch{return new ta(t,"")}if(a.path==="")return a;throw fL(t)}static makeFromUrl(t,r){let a=null;const i="([A-Za-z0-9.\\-_]+)";function l(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),d={bucket:1,path:3};function x(H){H.path_=decodeURIComponent(H.path)}const f="v[A-Za-z0-9_]+",j=r.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",S=new RegExp(`^https?://${j}/${f}/b/${i}/o${w}`,"i"),g={bucket:1,path:3},V=r===f1?"(?:storage.googleapis.com|storage.cloud.google.com)":r,E="([^?#]*)",T=new RegExp(`^https?://${V}/${i}/${E}`,"i"),L=[{regex:c,indices:d,postModify:l},{regex:S,indices:g,postModify:x},{regex:T,indices:{bucket:1,path:2},postModify:x}];for(let H=0;H<L.length;H++){const q=L[H],Q=q.regex.exec(t);if(Q){const O=Q[q.indices.bucket];let u=Q[q.indices.path];u||(u=""),a=new ta(O,u),q.postModify(a);break}}if(a==null)throw pL(t);return a}}class yL{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(s,t,r){let a=1,i=null,l=null,o=!1,c=0;function d(){return c===2}let x=!1;function f(...E){x||(x=!0,t.apply(null,E))}function j(E){i=setTimeout(()=>{i=null,s(S,d())},E)}function w(){l&&clearTimeout(l)}function S(E,...T){if(x){w();return}if(E){w(),f.call(null,E,...T);return}if(d()||o){w(),f.call(null,E,...T);return}a<64&&(a*=2);let L;c===1?(c=2,L=0):L=(a+Math.random())*1e3,j(L)}let g=!1;function V(E){g||(g=!0,w(),!x&&(i!==null?(E||(c=2),clearTimeout(i),j(0)):E||(c=1)))}return j(0),l=setTimeout(()=>{o=!0,V(!0)},r),V}function vL(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(s){return s!==void 0}function NN(s,t,r,a){if(a<t)throw jN(`Invalid value for '${s}'. Expected ${t} or greater.`);if(a>r)throw jN(`Invalid value for '${s}'. Expected ${r} or less.`)}function NL(s){const t=encodeURIComponent;let r="?";for(const a in s)if(s.hasOwnProperty(a)){const i=t(a)+"="+t(s[a]);r=r+i+"&"}return r=r.slice(0,-1),r}var Fx;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Fx||(Fx={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(s,t){const r=s>=500&&s<600,i=[408,429].indexOf(s)!==-1,l=t.indexOf(s)!==-1;return r||i||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(t,r,a,i,l,o,c,d,x,f,j,w=!0){this.url_=t,this.method_=r,this.headers_=a,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=x,this.progressCallback_=f,this.connectionFactory_=j,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,g)=>{this.resolve_=S,this.reject_=g,this.start_()})}start_(){const t=(a,i)=>{if(i){a(!1,new iu(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const o=c=>{const d=c.loaded,x=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,x)};this.progressCallback_!==null&&l.addUploadProgressListener(o),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(o),this.pendingConnection_=null;const c=l.getErrorCode()===Fx.NO_ERROR,d=l.getStatus();if(!c||wL(d,this.additionalRetryCodes_)&&this.retry){const f=l.getErrorCode()===Fx.ABORT;a(!1,new iu(!1,null,f));return}const x=this.successCodes_.indexOf(d)!==-1;a(!0,new iu(x,l))})},r=(a,i)=>{const l=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());jL(d)?l(d):l()}catch(d){o(d)}else if(c!==null){const d=xL();d.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,d)):o(d)}else if(i.canceled){const d=this.appDelete_?g1():hL();o(d)}else{const d=mL();o(d)}};this.canceled_?r(!1,new iu(!1,null,!0)):this.backoffId_=bL(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&vL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class iu{constructor(t,r,a){this.wasSuccessCode=t,this.connection=r,this.canceled=!!a}}function IL(s,t){t!==null&&t.length>0&&(s.Authorization="Firebase "+t)}function PL(s,t){s["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function SL(s,t){t&&(s["X-Firebase-GMPID"]=t)}function EL(s,t){t!==null&&(s["X-Firebase-AppCheck"]=t)}function CL(s,t,r,a,i,l,o=!0){const c=NL(s.urlParams),d=s.url+c,x=Object.assign({},s.headers);return SL(x,t),IL(x,r),PL(x,l),EL(x,a),new kL(d,s.method,x,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(s){if(s.length===0)return null;const t=s.lastIndexOf("/");return t===-1?"":s.slice(0,t)}function _L(s){const t=s.lastIndexOf("/",s.length-2);return t===-1?s:s.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(t,r){this._service=t,r instanceof ta?this._location=r:this._location=ta.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new Ux(t,r)}get root(){const t=new ta(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _L(this._location.path)}get storage(){return this._service}get parent(){const t=TL(this._location.path);if(t===null)return null;const r=new ta(this._location.bucket,t);return new Ux(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw gL(t)}}function wN(s,t){const r=t==null?void 0:t[cL];return r==null?null:ta.makeFromBucketSpec(r,s)}function DL(s,t,r,a={}){s.host=`${t}:${r}`,s._protocol="http";const{mockUserToken:i}=a;i&&(s._overrideAuthToken=typeof i=="string"?i:w4(i,s.app.options.projectId))}class AL{constructor(t,r,a,i,l){this.app=t,this._authProvider=r,this._appCheckProvider=a,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=f1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=dL,this._maxUploadRetryTime=uL,this._requests=new Set,i!=null?this._bucket=ta.makeFromBucketSpec(i,this._host):this._bucket=wN(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=ta.makeFromBucketSpec(this._url,t):this._bucket=wN(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){NN("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){NN("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(kr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Ux(this,t)}_makeRequest(t,r,a,i,l=!0){if(this._deleted)return new yL(g1());{const o=CL(t,this._appId,a,i,r,this._firebaseVersion,l);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,r){const[a,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,a,i).getPromise()}}const kN="@firebase/storage",IN="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="storage";function RL(s=hm(),t){s=Yt(s);const a=Zn(s,y1).getImmediate({identifier:t}),i=v4("storage");return i&&ML(a,...i),a}function ML(s,t,r,a={}){DL(s,t,r,a)}function LL(s,{instanceIdentifier:t}){const r=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),i=s.getProvider("app-check-internal");return new AL(r,a,i,t,zi)}function OL(){na(new Wr(y1,LL,"PUBLIC").setMultipleInstances(!0)),yr(kN,IN,""),yr(kN,IN,"esm2017")}OL();const VL={apiKey:"AIzaSyDYacL_WIzZUSP-Tjl3794P_jHocMDqN9g",authDomain:"blackkstreaming-55f0e.firebaseapp.com",projectId:"blackkstreaming-55f0e",storageBucket:"blackkstreaming-55f0e.firebasestorage.app",messagingSenderId:"998157647233",appId:"1:998157647233:web:3e5b8128a0275ae4553c80",measurementId:"G-GFM50WNMSP"},fd=T4(VL);WR(fd);const I=m6(fd);RL(fd);const We=sy(fd),ry=b.createContext({});function ay(s){const t=b.useRef(null);return t.current===null&&(t.current=s()),t.current}const ny=typeof window<"u",b1=ny?b.useLayoutEffect:b.useEffect,zm=b.createContext(null);function iy(s,t){s.indexOf(t)===-1&&s.push(t)}function oy(s,t){const r=s.indexOf(t);r>-1&&s.splice(r,1)}const en=(s,t,r)=>r>t?t:r<s?s:r;let ly=()=>{};const tn={},v1=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function j1(s){return typeof s=="object"&&s!==null}const N1=s=>/^0[^.\s]+$/u.test(s);function cy(s){let t;return()=>(t===void 0&&(t=s()),t)}const Fr=s=>s,zL=(s,t)=>r=>t(s(r)),gd=(...s)=>s.reduce(zL),Bc=(s,t,r)=>{const a=t-s;return a===0?1:(r-s)/a};class dy{constructor(){this.subscriptions=[]}add(t){return iy(this.subscriptions,t),()=>oy(this.subscriptions,t)}notify(t,r,a){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,r,a);else for(let l=0;l<i;l++){const o=this.subscriptions[l];o&&o(t,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Na=s=>s*1e3,wa=s=>s/1e3;function w1(s,t){return t?s*(1e3/t):0}const k1=(s,t,r)=>(((1-3*r+3*t)*s+(3*r-6*t))*s+3*t)*s,BL=1e-7,FL=12;function UL(s,t,r,a,i){let l,o,c=0;do o=t+(r-t)/2,l=k1(o,a,i)-s,l>0?r=o:t=o;while(Math.abs(l)>BL&&++c<FL);return o}function yd(s,t,r,a){if(s===t&&r===a)return Fr;const i=l=>UL(l,0,1,s,r);return l=>l===0||l===1?l:k1(i(l),t,a)}const I1=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,P1=s=>t=>1-s(1-t),S1=yd(.33,1.53,.69,.99),uy=P1(S1),E1=I1(uy),C1=s=>(s*=2)<1?.5*uy(s):.5*(2-Math.pow(2,-10*(s-1))),xy=s=>1-Math.sin(Math.acos(s)),T1=P1(xy),_1=I1(xy),$L=yd(.42,0,1,1),WL=yd(0,0,.58,1),D1=yd(.42,0,.58,1),qL=s=>Array.isArray(s)&&typeof s[0]!="number",A1=s=>Array.isArray(s)&&typeof s[0]=="number",HL={linear:Fr,easeIn:$L,easeInOut:D1,easeOut:WL,circIn:xy,circInOut:_1,circOut:T1,backIn:uy,backInOut:E1,backOut:S1,anticipate:C1},GL=s=>typeof s=="string",PN=s=>{if(A1(s)){ly(s.length===4);const[t,r,a,i]=s;return yd(t,r,a,i)}else if(GL(s))return HL[s];return s},ou=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],SN={value:null,addProjectionMetrics:null};function KL(s,t){let r=new Set,a=new Set,i=!1,l=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},d=0;function x(j){o.has(j)&&(f.schedule(j),s()),d++,j(c)}const f={schedule:(j,w=!1,S=!1)=>{const V=S&&i?r:a;return w&&o.add(j),V.has(j)||V.add(j),j},cancel:j=>{a.delete(j),o.delete(j)},process:j=>{if(c=j,i){l=!0;return}i=!0,[r,a]=[a,r],r.forEach(x),t&&SN.value&&SN.value.frameloop[t].push(d),d=0,r.clear(),i=!1,l&&(l=!1,f.process(j))}};return f}const QL=40;function R1(s,t){let r=!1,a=!0;const i={delta:0,timestamp:0,isProcessing:!1},l=()=>r=!0,o=ou.reduce((L,H)=>(L[H]=KL(l,t?H:void 0),L),{}),{setup:c,read:d,resolveKeyframes:x,preUpdate:f,update:j,preRender:w,render:S,postRender:g}=o,V=()=>{const L=tn.useManualTiming?i.timestamp:performance.now();r=!1,tn.useManualTiming||(i.delta=a?1e3/60:Math.max(Math.min(L-i.timestamp,QL),1)),i.timestamp=L,i.isProcessing=!0,c.process(i),d.process(i),x.process(i),f.process(i),j.process(i),w.process(i),S.process(i),g.process(i),i.isProcessing=!1,r&&t&&(a=!1,s(V))},E=()=>{r=!0,a=!0,i.isProcessing||s(V)};return{schedule:ou.reduce((L,H)=>{const q=o[H];return L[H]=(Q,O=!1,u=!1)=>(r||E(),q.schedule(Q,O,u)),L},{}),cancel:L=>{for(let H=0;H<ou.length;H++)o[ou[H]].cancel(L)},state:i,steps:o}}const{schedule:ls,cancel:Kn,state:Ms,steps:Uh}=R1(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fr,!0);let Lu;function YL(){Lu=void 0}const hr={now:()=>(Lu===void 0&&hr.set(Ms.isProcessing||tn.useManualTiming?Ms.timestamp:performance.now()),Lu),set:s=>{Lu=s,queueMicrotask(YL)}},M1=s=>t=>typeof t=="string"&&t.startsWith(s),my=M1("--"),XL=M1("var(--"),hy=s=>XL(s)?JL.test(s.split("/*")[0].trim()):!1,JL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,nl={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Fc={...nl,transform:s=>en(0,1,s)},lu={...nl,default:1},ac=s=>Math.round(s*1e5)/1e5,py=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ZL(s){return s==null}const eO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fy=(s,t)=>r=>!!(typeof r=="string"&&eO.test(r)&&r.startsWith(s)||t&&!ZL(r)&&Object.prototype.hasOwnProperty.call(r,t)),L1=(s,t,r)=>a=>{if(typeof a!="string")return a;const[i,l,o,c]=a.match(py);return{[s]:parseFloat(i),[t]:parseFloat(l),[r]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},tO=s=>en(0,255,s),$h={...nl,transform:s=>Math.round(tO(s))},fi={test:fy("rgb","red"),parse:L1("red","green","blue"),transform:({red:s,green:t,blue:r,alpha:a=1})=>"rgba("+$h.transform(s)+", "+$h.transform(t)+", "+$h.transform(r)+", "+ac(Fc.transform(a))+")"};function sO(s){let t="",r="",a="",i="";return s.length>5?(t=s.substring(1,3),r=s.substring(3,5),a=s.substring(5,7),i=s.substring(7,9)):(t=s.substring(1,2),r=s.substring(2,3),a=s.substring(3,4),i=s.substring(4,5),t+=t,r+=r,a+=a,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:i?parseInt(i,16)/255:1}}const E0={test:fy("#"),parse:sO,transform:fi.transform},bd=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),hn=bd("deg"),ka=bd("%"),ht=bd("px"),rO=bd("vh"),aO=bd("vw"),EN=(()=>({...ka,parse:s=>ka.parse(s)/100,transform:s=>ka.transform(s*100)}))(),fo={test:fy("hsl","hue"),parse:L1("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:r,alpha:a=1})=>"hsla("+Math.round(s)+", "+ka.transform(ac(t))+", "+ka.transform(ac(r))+", "+ac(Fc.transform(a))+")"},Qs={test:s=>fi.test(s)||E0.test(s)||fo.test(s),parse:s=>fi.test(s)?fi.parse(s):fo.test(s)?fo.parse(s):E0.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?fi.transform(s):fo.transform(s)},nO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function iO(s){var t,r;return isNaN(s)&&typeof s=="string"&&(((t=s.match(py))==null?void 0:t.length)||0)+(((r=s.match(nO))==null?void 0:r.length)||0)>0}const O1="number",V1="color",oO="var",lO="var(",CN="${}",cO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Uc(s){const t=s.toString(),r=[],a={color:[],number:[],var:[]},i=[];let l=0;const c=t.replace(cO,d=>(Qs.test(d)?(a.color.push(l),i.push(V1),r.push(Qs.parse(d))):d.startsWith(lO)?(a.var.push(l),i.push(oO),r.push(d)):(a.number.push(l),i.push(O1),r.push(parseFloat(d))),++l,CN)).split(CN);return{values:r,split:c,indexes:a,types:i}}function z1(s){return Uc(s).values}function B1(s){const{split:t,types:r}=Uc(s),a=t.length;return i=>{let l="";for(let o=0;o<a;o++)if(l+=t[o],i[o]!==void 0){const c=r[o];c===O1?l+=ac(i[o]):c===V1?l+=Qs.transform(i[o]):l+=i[o]}return l}}const dO=s=>typeof s=="number"?0:s;function uO(s){const t=z1(s);return B1(s)(t.map(dO))}const Qn={test:iO,parse:z1,createTransformer:B1,getAnimatableNone:uO};function Wh(s,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?s+(t-s)*6*r:r<1/2?t:r<2/3?s+(t-s)*(2/3-r)*6:s}function xO({hue:s,saturation:t,lightness:r,alpha:a}){s/=360,t/=100,r/=100;let i=0,l=0,o=0;if(!t)i=l=o=r;else{const c=r<.5?r*(1+t):r+t-r*t,d=2*r-c;i=Wh(d,c,s+1/3),l=Wh(d,c,s),o=Wh(d,c,s-1/3)}return{red:Math.round(i*255),green:Math.round(l*255),blue:Math.round(o*255),alpha:a}}function $x(s,t){return r=>r>0?t:s}const ns=(s,t,r)=>s+(t-s)*r,qh=(s,t,r)=>{const a=s*s,i=r*(t*t-a)+a;return i<0?0:Math.sqrt(i)},mO=[E0,fi,fo],hO=s=>mO.find(t=>t.test(s));function TN(s){const t=hO(s);if(!t)return!1;let r=t.parse(s);return t===fo&&(r=xO(r)),r}const _N=(s,t)=>{const r=TN(s),a=TN(t);if(!r||!a)return $x(s,t);const i={...r};return l=>(i.red=qh(r.red,a.red,l),i.green=qh(r.green,a.green,l),i.blue=qh(r.blue,a.blue,l),i.alpha=ns(r.alpha,a.alpha,l),fi.transform(i))},C0=new Set(["none","hidden"]);function pO(s,t){return C0.has(s)?r=>r<=0?s:t:r=>r>=1?t:s}function fO(s,t){return r=>ns(s,t,r)}function gy(s){return typeof s=="number"?fO:typeof s=="string"?hy(s)?$x:Qs.test(s)?_N:bO:Array.isArray(s)?F1:typeof s=="object"?Qs.test(s)?_N:gO:$x}function F1(s,t){const r=[...s],a=r.length,i=s.map((l,o)=>gy(l)(l,t[o]));return l=>{for(let o=0;o<a;o++)r[o]=i[o](l);return r}}function gO(s,t){const r={...s,...t},a={};for(const i in r)s[i]!==void 0&&t[i]!==void 0&&(a[i]=gy(s[i])(s[i],t[i]));return i=>{for(const l in a)r[l]=a[l](i);return r}}function yO(s,t){const r=[],a={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const l=t.types[i],o=s.indexes[l][a[l]],c=s.values[o]??0;r[i]=c,a[l]++}return r}const bO=(s,t)=>{const r=Qn.createTransformer(t),a=Uc(s),i=Uc(t);return a.indexes.var.length===i.indexes.var.length&&a.indexes.color.length===i.indexes.color.length&&a.indexes.number.length>=i.indexes.number.length?C0.has(s)&&!i.values.length||C0.has(t)&&!a.values.length?pO(s,t):gd(F1(yO(a,i),i.values),r):$x(s,t)};function U1(s,t,r){return typeof s=="number"&&typeof t=="number"&&typeof r=="number"?ns(s,t,r):gy(s)(s,t)}const vO=s=>{const t=({timestamp:r})=>s(r);return{start:(r=!0)=>ls.update(t,r),stop:()=>Kn(t),now:()=>Ms.isProcessing?Ms.timestamp:hr.now()}},$1=(s,t,r=10)=>{let a="";const i=Math.max(Math.round(t/r),2);for(let l=0;l<i;l++)a+=s(l/(i-1))+", ";return`linear(${a.substring(0,a.length-2)})`},Wx=2e4;function yy(s){let t=0;const r=50;let a=s.next(t);for(;!a.done&&t<Wx;)t+=r,a=s.next(t);return t>=Wx?1/0:t}function jO(s,t=100,r){const a=r({...s,keyframes:[0,t]}),i=Math.min(yy(a),Wx);return{type:"keyframes",ease:l=>a.next(i*l).value/t,duration:wa(i)}}const NO=5;function W1(s,t,r){const a=Math.max(t-NO,0);return w1(r-s(a),t-a)}const ms={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Hh=.001;function wO({duration:s=ms.duration,bounce:t=ms.bounce,velocity:r=ms.velocity,mass:a=ms.mass}){let i,l,o=1-t;o=en(ms.minDamping,ms.maxDamping,o),s=en(ms.minDuration,ms.maxDuration,wa(s)),o<1?(i=x=>{const f=x*o,j=f*s,w=f-r,S=T0(x,o),g=Math.exp(-j);return Hh-w/S*g},l=x=>{const j=x*o*s,w=j*r+r,S=Math.pow(o,2)*Math.pow(x,2)*s,g=Math.exp(-j),V=T0(Math.pow(x,2),o);return(-i(x)+Hh>0?-1:1)*((w-S)*g)/V}):(i=x=>{const f=Math.exp(-x*s),j=(x-r)*s+1;return-Hh+f*j},l=x=>{const f=Math.exp(-x*s),j=(r-x)*(s*s);return f*j});const c=5/s,d=IO(i,l,c);if(s=Na(s),isNaN(d))return{stiffness:ms.stiffness,damping:ms.damping,duration:s};{const x=Math.pow(d,2)*a;return{stiffness:x,damping:o*2*Math.sqrt(a*x),duration:s}}}const kO=12;function IO(s,t,r){let a=r;for(let i=1;i<kO;i++)a=a-s(a)/t(a);return a}function T0(s,t){return s*Math.sqrt(1-t*t)}const PO=["duration","bounce"],SO=["stiffness","damping","mass"];function DN(s,t){return t.some(r=>s[r]!==void 0)}function EO(s){let t={velocity:ms.velocity,stiffness:ms.stiffness,damping:ms.damping,mass:ms.mass,isResolvedFromDuration:!1,...s};if(!DN(s,SO)&&DN(s,PO))if(s.visualDuration){const r=s.visualDuration,a=2*Math.PI/(r*1.2),i=a*a,l=2*en(.05,1,1-(s.bounce||0))*Math.sqrt(i);t={...t,mass:ms.mass,stiffness:i,damping:l}}else{const r=wO(s);t={...t,...r,mass:ms.mass},t.isResolvedFromDuration=!0}return t}function qx(s=ms.visualDuration,t=ms.bounce){const r=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:a,restDelta:i}=r;const l=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],c={done:!1,value:l},{stiffness:d,damping:x,mass:f,duration:j,velocity:w,isResolvedFromDuration:S}=EO({...r,velocity:-wa(r.velocity||0)}),g=w||0,V=x/(2*Math.sqrt(d*f)),E=o-l,T=wa(Math.sqrt(d/f)),M=Math.abs(E)<5;a||(a=M?ms.restSpeed.granular:ms.restSpeed.default),i||(i=M?ms.restDelta.granular:ms.restDelta.default);let L;if(V<1){const q=T0(T,V);L=Q=>{const O=Math.exp(-V*T*Q);return o-O*((g+V*T*E)/q*Math.sin(q*Q)+E*Math.cos(q*Q))}}else if(V===1)L=q=>o-Math.exp(-T*q)*(E+(g+T*E)*q);else{const q=T*Math.sqrt(V*V-1);L=Q=>{const O=Math.exp(-V*T*Q),u=Math.min(q*Q,300);return o-O*((g+V*T*E)*Math.sinh(u)+q*E*Math.cosh(u))/q}}const H={calculatedDuration:S&&j||null,next:q=>{const Q=L(q);if(S)c.done=q>=j;else{let O=q===0?g:0;V<1&&(O=q===0?Na(g):W1(L,q,Q));const u=Math.abs(O)<=a,U=Math.abs(o-Q)<=i;c.done=u&&U}return c.value=c.done?o:Q,c},toString:()=>{const q=Math.min(yy(H),Wx),Q=$1(O=>H.next(q*O).value,q,30);return q+"ms "+Q},toTransition:()=>{}};return H}qx.applyToOptions=s=>{const t=jO(s,100,qx);return s.ease=t.ease,s.duration=Na(t.duration),s.type="keyframes",s};function _0({keyframes:s,velocity:t=0,power:r=.8,timeConstant:a=325,bounceDamping:i=10,bounceStiffness:l=500,modifyTarget:o,min:c,max:d,restDelta:x=.5,restSpeed:f}){const j=s[0],w={done:!1,value:j},S=u=>c!==void 0&&u<c||d!==void 0&&u>d,g=u=>c===void 0?d:d===void 0||Math.abs(c-u)<Math.abs(d-u)?c:d;let V=r*t;const E=j+V,T=o===void 0?E:o(E);T!==E&&(V=T-j);const M=u=>-V*Math.exp(-u/a),L=u=>T+M(u),H=u=>{const U=M(u),F=L(u);w.done=Math.abs(U)<=x,w.value=w.done?T:F};let q,Q;const O=u=>{S(w.value)&&(q=u,Q=qx({keyframes:[w.value,g(w.value)],velocity:W1(L,u,w.value),damping:i,stiffness:l,restDelta:x,restSpeed:f}))};return O(0),{calculatedDuration:null,next:u=>{let U=!1;return!Q&&q===void 0&&(U=!0,H(u),O(u)),q!==void 0&&u>=q?Q.next(u-q):(!U&&H(u),w)}}}function CO(s,t,r){const a=[],i=r||tn.mix||U1,l=s.length-1;for(let o=0;o<l;o++){let c=i(s[o],s[o+1]);if(t){const d=Array.isArray(t)?t[o]||Fr:t;c=gd(d,c)}a.push(c)}return a}function TO(s,t,{clamp:r=!0,ease:a,mixer:i}={}){const l=s.length;if(ly(l===t.length),l===1)return()=>t[0];if(l===2&&t[0]===t[1])return()=>t[1];const o=s[0]===s[1];s[0]>s[l-1]&&(s=[...s].reverse(),t=[...t].reverse());const c=CO(t,a,i),d=c.length,x=f=>{if(o&&f<s[0])return t[0];let j=0;if(d>1)for(;j<s.length-2&&!(f<s[j+1]);j++);const w=Bc(s[j],s[j+1],f);return c[j](w)};return r?f=>x(en(s[0],s[l-1],f)):x}function _O(s,t){const r=s[s.length-1];for(let a=1;a<=t;a++){const i=Bc(0,t,a);s.push(ns(r,1,i))}}function DO(s){const t=[0];return _O(t,s.length-1),t}function AO(s,t){return s.map(r=>r*t)}function RO(s,t){return s.map(()=>t||D1).splice(0,s.length-1)}function nc({duration:s=300,keyframes:t,times:r,ease:a="easeInOut"}){const i=qL(a)?a.map(PN):PN(a),l={done:!1,value:t[0]},o=AO(r&&r.length===t.length?r:DO(t),s),c=TO(o,t,{ease:Array.isArray(i)?i:RO(t,i)});return{calculatedDuration:s,next:d=>(l.value=c(d),l.done=d>=s,l)}}const MO=s=>s!==null;function by(s,{repeat:t,repeatType:r="loop"},a,i=1){const l=s.filter(MO),c=i<0||t&&r!=="loop"&&t%2===1?0:l.length-1;return!c||a===void 0?l[c]:a}const LO={decay:_0,inertia:_0,tween:nc,keyframes:nc,spring:qx};function q1(s){typeof s.type=="string"&&(s.type=LO[s.type])}class vy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const OO=s=>s/100;class jy extends vy{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(r=!0)=>{var a,i;if(r){const{motionValue:l}=this.options;l&&l.updatedAt!==hr.now()&&this.tick(hr.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(a=this.options).onStop)==null||i.call(a))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;q1(t);const{type:r=nc,repeat:a=0,repeatDelay:i=0,repeatType:l,velocity:o=0}=t;let{keyframes:c}=t;const d=r||nc;d!==nc&&typeof c[0]!="number"&&(this.mixKeyframes=gd(OO,U1(c[0],c[1])),c=[0,100]);const x=d({...t,keyframes:c});l==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...c].reverse(),velocity:-o})),x.calculatedDuration===null&&(x.calculatedDuration=yy(x));const{calculatedDuration:f}=x;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(a+1)-i,this.generator=x}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:a,totalDuration:i,mixKeyframes:l,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return a.next(0);const{delay:x=0,keyframes:f,repeat:j,repeatType:w,repeatDelay:S,type:g,onUpdate:V,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const T=this.currentTime-x*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?T<0:T>i;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let L=this.currentTime,H=a;if(j){const u=Math.min(this.currentTime,i)/c;let U=Math.floor(u),F=u%1;!F&&u>=1&&(F=1),F===1&&U--,U=Math.min(U,j+1),!!(U%2)&&(w==="reverse"?(F=1-F,S&&(F-=S/c)):w==="mirror"&&(H=o)),L=en(0,1,F)*c}const q=M?{done:!1,value:f[0]}:H.next(L);l&&(q.value=l(q.value));let{done:Q}=q;!M&&d!==null&&(Q=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Q);return O&&g!==_0&&(q.value=by(f,this.options,E,this.speed)),V&&V(q.value),O&&this.finish(),q}then(t,r){return this.finished.then(t,r)}get duration(){return wa(this.calculatedDuration)}get time(){return wa(this.currentTime)}set time(t){var r;t=Na(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(hr.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=wa(this.currentTime))}play(){var i,l;if(this.isStopped)return;const{driver:t=vO,startTime:r}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(l=(i=this.options).onPlay)==null||l.call(i);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(hr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function VO(s){for(let t=1;t<s.length;t++)s[t]??(s[t]=s[t-1])}const gi=s=>s*180/Math.PI,D0=s=>{const t=gi(Math.atan2(s[1],s[0]));return A0(t)},zO={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:D0,rotateZ:D0,skewX:s=>gi(Math.atan(s[1])),skewY:s=>gi(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},A0=s=>(s=s%360,s<0&&(s+=360),s),AN=D0,RN=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),MN=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),BO={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:RN,scaleY:MN,scale:s=>(RN(s)+MN(s))/2,rotateX:s=>A0(gi(Math.atan2(s[6],s[5]))),rotateY:s=>A0(gi(Math.atan2(-s[2],s[0]))),rotateZ:AN,rotate:AN,skewX:s=>gi(Math.atan(s[4])),skewY:s=>gi(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function R0(s){return s.includes("scale")?1:0}function M0(s,t){if(!s||s==="none")return R0(t);const r=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,i;if(r)a=BO,i=r;else{const c=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=zO,i=c}if(!i)return R0(t);const l=a[t],o=i[1].split(",").map(UO);return typeof l=="function"?l(o):o[l]}const FO=(s,t)=>{const{transform:r="none"}=getComputedStyle(s);return M0(r,t)};function UO(s){return parseFloat(s.trim())}const il=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ol=(()=>new Set(il))(),LN=s=>s===nl||s===ht,$O=new Set(["x","y","z"]),WO=il.filter(s=>!$O.has(s));function qO(s){const t=[];return WO.forEach(r=>{const a=s.getValue(r);a!==void 0&&(t.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),t}const ji={width:({x:s},{paddingLeft:t="0",paddingRight:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),height:({y:s},{paddingTop:t="0",paddingBottom:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:(s,{transform:t})=>M0(t,"x"),y:(s,{transform:t})=>M0(t,"y")};ji.translateX=ji.x;ji.translateY=ji.y;const Ni=new Set;let L0=!1,O0=!1,V0=!1;function H1(){if(O0){const s=Array.from(Ni).filter(a=>a.needsMeasurement),t=new Set(s.map(a=>a.element)),r=new Map;t.forEach(a=>{const i=qO(a);i.length&&(r.set(a,i),a.render())}),s.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const i=r.get(a);i&&i.forEach(([l,o])=>{var c;(c=a.getValue(l))==null||c.set(o)})}),s.forEach(a=>a.measureEndState()),s.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}O0=!1,L0=!1,Ni.forEach(s=>s.complete(V0)),Ni.clear()}function G1(){Ni.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(O0=!0)})}function HO(){V0=!0,G1(),H1(),V0=!1}class Ny{constructor(t,r,a,i,l,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=a,this.motionValue=i,this.element=l,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Ni.add(this),L0||(L0=!0,ls.read(G1),ls.resolveKeyframes(H1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:a,motionValue:i}=this;if(t[0]===null){const l=i==null?void 0:i.get(),o=t[t.length-1];if(l!==void 0)t[0]=l;else if(a&&r){const c=a.readValue(r,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),i&&l===void 0&&i.set(t[0])}VO(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Ni.delete(this)}cancel(){this.state==="scheduled"&&(Ni.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const GO=s=>s.startsWith("--");function KO(s,t,r){GO(t)?s.style.setProperty(t,r):s.style[t]=r}const QO=cy(()=>window.ScrollTimeline!==void 0),YO={};function XO(s,t){const r=cy(s);return()=>YO[t]??r()}const K1=XO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Fl=([s,t,r,a])=>`cubic-bezier(${s}, ${t}, ${r}, ${a})`,ON={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fl([0,.65,.55,1]),circOut:Fl([.55,0,1,.45]),backIn:Fl([.31,.01,.66,-.59]),backOut:Fl([.33,1.53,.69,.99])};function Q1(s,t){if(s)return typeof s=="function"?K1()?$1(s,t):"ease-out":A1(s)?Fl(s):Array.isArray(s)?s.map(r=>Q1(r,t)||ON.easeOut):ON[s]}function JO(s,t,r,{delay:a=0,duration:i=300,repeat:l=0,repeatType:o="loop",ease:c="easeOut",times:d}={},x=void 0){const f={[t]:r};d&&(f.offset=d);const j=Q1(c,i);Array.isArray(j)&&(f.easing=j);const w={delay:a,duration:i,easing:Array.isArray(j)?"linear":j,fill:"both",iterations:l+1,direction:o==="reverse"?"alternate":"normal"};return x&&(w.pseudoElement=x),s.animate(f,w)}function Y1(s){return typeof s=="function"&&"applyToOptions"in s}function ZO({type:s,...t}){return Y1(s)&&K1()?s.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class e9 extends vy{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:a,keyframes:i,pseudoElement:l,allowFlatten:o=!1,finalKeyframe:c,onComplete:d}=t;this.isPseudoElement=!!l,this.allowFlatten=o,this.options=t,ly(typeof t.type!="string");const x=ZO(t);this.animation=JO(r,a,i,x,l),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const f=by(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(f):KO(r,a,f),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var r,a;const t=((a=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:a.call(r).duration)||0;return wa(Number(t))}get time(){return wa(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Na(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&QO()?(this.animation.timeline=t,Fr):r(this)}}const X1={anticipate:C1,backInOut:E1,circInOut:_1};function t9(s){return s in X1}function s9(s){typeof s.ease=="string"&&t9(s.ease)&&(s.ease=X1[s.ease])}const VN=10;class r9 extends e9{constructor(t){s9(t),q1(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:a,onComplete:i,element:l,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const c=new jy({...o,autoplay:!1}),d=Na(this.finishedTime??this.time);r.setWithVelocity(c.sample(d-VN).value,c.sample(d).value,VN),c.stop()}}const zN=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Qn.test(s)||s==="0")&&!s.startsWith("url("));function a9(s){const t=s[0];if(s.length===1)return!0;for(let r=0;r<s.length;r++)if(s[r]!==t)return!0}function n9(s,t,r,a){const i=s[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const l=s[s.length-1],o=zN(i,t),c=zN(l,t);return!o||!c?!1:a9(s)||(r==="spring"||Y1(r))&&a}function wy(s){return j1(s)&&"offsetHeight"in s}const i9=new Set(["opacity","clipPath","filter","transform"]),o9=cy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function l9(s){var x;const{motionValue:t,name:r,repeatDelay:a,repeatType:i,damping:l,type:o}=s;if(!wy((x=t==null?void 0:t.owner)==null?void 0:x.current))return!1;const{onUpdate:c,transformTemplate:d}=t.owner.getProps();return o9()&&r&&i9.has(r)&&(r!=="transform"||!d)&&!c&&!a&&i!=="mirror"&&l!==0&&o!=="inertia"}const c9=40;class d9 extends vy{constructor({autoplay:t=!0,delay:r=0,type:a="keyframes",repeat:i=0,repeatDelay:l=0,repeatType:o="loop",keyframes:c,name:d,motionValue:x,element:f,...j}){var g;super(),this.stop=()=>{var V,E;this._animation&&(this._animation.stop(),(V=this.stopTimeline)==null||V.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=hr.now();const w={autoplay:t,delay:r,type:a,repeat:i,repeatDelay:l,repeatType:o,name:d,motionValue:x,element:f,...j},S=(f==null?void 0:f.KeyframeResolver)||Ny;this.keyframeResolver=new S(c,(V,E,T)=>this.onKeyframesResolved(V,E,w,!T),d,x,f),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(t,r,a,i){this.keyframeResolver=void 0;const{name:l,type:o,velocity:c,delay:d,isHandoff:x,onUpdate:f}=a;this.resolvedAt=hr.now(),n9(t,l,o,c)||((tn.instantAnimations||!d)&&(f==null||f(by(t,a,r))),t[0]=t[t.length-1],a.duration=0,a.repeat=0);const w={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>c9?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...a,keyframes:t},S=!x&&l9(w)?new r9({...w,element:w.motionValue.owner.current}):new jy(w);S.finished.then(()=>this.notifyFinished()).catch(Fr),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),HO()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const u9=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function x9(s){const t=u9.exec(s);if(!t)return[,];const[,r,a,i]=t;return[`--${r??a}`,i]}function J1(s,t,r=1){const[a,i]=x9(s);if(!a)return;const l=window.getComputedStyle(t).getPropertyValue(a);if(l){const o=l.trim();return v1(o)?parseFloat(o):o}return hy(i)?J1(i,t,r+1):i}function ky(s,t){return(s==null?void 0:s[t])??(s==null?void 0:s.default)??s}const Z1=new Set(["width","height","top","left","right","bottom",...il]),m9={test:s=>s==="auto",parse:s=>s},eI=s=>t=>t.test(s),tI=[nl,ht,ka,hn,aO,rO,m9],BN=s=>tI.find(eI(s));function h9(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||N1(s):!0}const p9=new Set(["brightness","contrast","saturate","opacity"]);function f9(s){const[t,r]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[a]=r.match(py)||[];if(!a)return s;const i=r.replace(a,"");let l=p9.has(t)?1:0;return a!==r&&(l*=100),t+"("+l+i+")"}const g9=/\b([a-z-]*)\(.*?\)/gu,z0={...Qn,getAnimatableNone:s=>{const t=s.match(g9);return t?t.map(f9).join(" "):s}},FN={...nl,transform:Math.round},y9={rotate:hn,rotateX:hn,rotateY:hn,rotateZ:hn,scale:lu,scaleX:lu,scaleY:lu,scaleZ:lu,skew:hn,skewX:hn,skewY:hn,distance:ht,translateX:ht,translateY:ht,translateZ:ht,x:ht,y:ht,z:ht,perspective:ht,transformPerspective:ht,opacity:Fc,originX:EN,originY:EN,originZ:ht},Iy={borderWidth:ht,borderTopWidth:ht,borderRightWidth:ht,borderBottomWidth:ht,borderLeftWidth:ht,borderRadius:ht,radius:ht,borderTopLeftRadius:ht,borderTopRightRadius:ht,borderBottomRightRadius:ht,borderBottomLeftRadius:ht,width:ht,maxWidth:ht,height:ht,maxHeight:ht,top:ht,right:ht,bottom:ht,left:ht,padding:ht,paddingTop:ht,paddingRight:ht,paddingBottom:ht,paddingLeft:ht,margin:ht,marginTop:ht,marginRight:ht,marginBottom:ht,marginLeft:ht,backgroundPositionX:ht,backgroundPositionY:ht,...y9,zIndex:FN,fillOpacity:Fc,strokeOpacity:Fc,numOctaves:FN},b9={...Iy,color:Qs,backgroundColor:Qs,outlineColor:Qs,fill:Qs,stroke:Qs,borderColor:Qs,borderTopColor:Qs,borderRightColor:Qs,borderBottomColor:Qs,borderLeftColor:Qs,filter:z0,WebkitFilter:z0},sI=s=>b9[s];function rI(s,t){let r=sI(s);return r!==z0&&(r=Qn),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const v9=new Set(["auto","none","0"]);function j9(s,t,r){let a=0,i;for(;a<s.length&&!i;){const l=s[a];typeof l=="string"&&!v9.has(l)&&Uc(l).values.length&&(i=s[a]),a++}if(i&&r)for(const l of t)s[l]=rI(r,i)}class N9 extends Ny{constructor(t,r,a,i,l){super(t,r,a,i,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:a}=this;if(!r||!r.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let x=t[d];if(typeof x=="string"&&(x=x.trim(),hy(x))){const f=J1(x,r.current);f!==void 0&&(t[d]=f),d===t.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!Z1.has(a)||t.length!==2)return;const[i,l]=t,o=BN(i),c=BN(l);if(o!==c)if(LN(o)&&LN(c))for(let d=0;d<t.length;d++){const x=t[d];typeof x=="string"&&(t[d]=parseFloat(x))}else ji[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,a=[];for(let i=0;i<t.length;i++)(t[i]===null||h9(t[i]))&&a.push(i);a.length&&j9(t,a,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ji[a](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&t.getValue(a,i).jump(i,!1)}measureEndState(){var c;const{element:t,name:r,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const i=t.getValue(r);i&&i.jump(this.measuredOrigin,!1);const l=a.length-1,o=a[l];a[l]=ji[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([d,x])=>{t.getValue(d).set(x)}),this.resolveNoneKeyframes()}}function w9(s,t,r){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let a=document;t&&(a=t.current);const i=(r==null?void 0:r[s])??a.querySelectorAll(s);return i?Array.from(i):[]}return Array.from(s)}const UN=30,k9=s=>!isNaN(parseFloat(s));class I9{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(a,i=!0)=>{var o,c;const l=hr.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty();i&&((c=this.events.renderRequest)==null||c.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=hr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=k9(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new dy);const a=this.events[t].add(r);return t==="change"?()=>{a(),ls.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,a){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=hr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>UN)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,UN);return w1(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qo(s,t){return new I9(s,t)}const aI=(s,t)=>t&&typeof s=="number"?t.transform(s):s,{schedule:Py,cancel:dU}=R1(queueMicrotask,!1),Qr={x:!1,y:!1};function nI(){return Qr.x||Qr.y}function P9(s){return s==="x"||s==="y"?Qr[s]?null:(Qr[s]=!0,()=>{Qr[s]=!1}):Qr.x||Qr.y?null:(Qr.x=Qr.y=!0,()=>{Qr.x=Qr.y=!1})}function iI(s,t){const r=w9(s),a=new AbortController,i={passive:!0,...t,signal:a.signal};return[r,i,()=>a.abort()]}function $N(s){return!(s.pointerType==="touch"||nI())}function S9(s,t,r={}){const[a,i,l]=iI(s,r),o=c=>{if(!$N(c))return;const{target:d}=c,x=t(d,c);if(typeof x!="function"||!d)return;const f=j=>{$N(j)&&(x(j),d.removeEventListener("pointerleave",f))};d.addEventListener("pointerleave",f,i)};return a.forEach(c=>{c.addEventListener("pointerenter",o,i)}),l}const oI=(s,t)=>t?s===t?!0:oI(s,t.parentElement):!1,Sy=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,E9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function C9(s){return E9.has(s.tagName)||s.tabIndex!==-1}const Ou=new WeakSet;function WN(s){return t=>{t.key==="Enter"&&s(t)}}function Gh(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const T9=(s,t)=>{const r=s.currentTarget;if(!r)return;const a=WN(()=>{if(Ou.has(r))return;Gh(r,"down");const i=WN(()=>{Gh(r,"up")}),l=()=>Gh(r,"cancel");r.addEventListener("keyup",i,t),r.addEventListener("blur",l,t)});r.addEventListener("keydown",a,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",a),t)};function qN(s){return Sy(s)&&!nI()}function _9(s,t,r={}){const[a,i,l]=iI(s,r),o=c=>{const d=c.currentTarget;if(!qN(c))return;Ou.add(d);const x=t(d,c),f=(S,g)=>{window.removeEventListener("pointerup",j),window.removeEventListener("pointercancel",w),Ou.has(d)&&Ou.delete(d),qN(S)&&typeof x=="function"&&x(S,{success:g})},j=S=>{f(S,d===window||d===document||r.useGlobalTarget||oI(d,S.target))},w=S=>{f(S,!1)};window.addEventListener("pointerup",j,i),window.addEventListener("pointercancel",w,i)};return a.forEach(c=>{(r.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),wy(c)&&(c.addEventListener("focus",x=>T9(x,i)),!C9(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),l}function lI(s){return j1(s)&&"ownerSVGElement"in s}function D9(s){return lI(s)&&s.tagName==="svg"}const Js=s=>!!(s&&s.getVelocity),A9=[...tI,Qs,Qn],R9=s=>A9.find(eI(s)),Ey=b.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});class M9 extends b.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const a=r.offsetParent,i=wy(a)&&a.offsetWidth||0,l=this.props.sizeRef.current;l.height=r.offsetHeight||0,l.width=r.offsetWidth||0,l.top=r.offsetTop,l.left=r.offsetLeft,l.right=i-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function L9({children:s,isPresent:t,anchorX:r}){const a=b.useId(),i=b.useRef(null),l=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=b.useContext(Ey);return b.useInsertionEffect(()=>{const{width:c,height:d,top:x,left:f,right:j}=l.current;if(t||!i.current||!c||!d)return;const w=r==="left"?`left: ${f}`:`right: ${j}`;i.current.dataset.motionPopId=a;const S=document.createElement("style");return o&&(S.nonce=o),document.head.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            ${w}px !important;
            top: ${x}px !important;
          }
        `),()=>{document.head.contains(S)&&document.head.removeChild(S)}},[t]),e.jsx(M9,{isPresent:t,childRef:i,sizeRef:l,children:b.cloneElement(s,{ref:i})})}const O9=({children:s,initial:t,isPresent:r,onExitComplete:a,custom:i,presenceAffectsLayout:l,mode:o,anchorX:c})=>{const d=ay(V9),x=b.useId();let f=!0,j=b.useMemo(()=>(f=!1,{id:x,initial:t,isPresent:r,custom:i,onExitComplete:w=>{d.set(w,!0);for(const S of d.values())if(!S)return;a&&a()},register:w=>(d.set(w,!1),()=>d.delete(w))}),[r,d,a]);return l&&f&&(j={...j}),b.useMemo(()=>{d.forEach((w,S)=>d.set(S,!1))},[r]),b.useEffect(()=>{!r&&!d.size&&a&&a()},[r]),o==="popLayout"&&(s=e.jsx(L9,{isPresent:r,anchorX:c,children:s})),e.jsx(zm.Provider,{value:j,children:s})};function V9(){return new Map}function cI(s=!0){const t=b.useContext(zm);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:a,register:i}=t,l=b.useId();b.useEffect(()=>{if(s)return i(l)},[s]);const o=b.useCallback(()=>s&&a&&a(l),[l,a,s]);return!r&&a?[!1,o]:[!0]}const cu=s=>s.key||"";function HN(s){const t=[];return b.Children.forEach(s,r=>{b.isValidElement(r)&&t.push(r)}),t}const Cy=({children:s,custom:t,initial:r=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:l="sync",propagate:o=!1,anchorX:c="left"})=>{const[d,x]=cI(o),f=b.useMemo(()=>HN(s),[s]),j=o&&!d?[]:f.map(cu),w=b.useRef(!0),S=b.useRef(f),g=ay(()=>new Map),[V,E]=b.useState(f),[T,M]=b.useState(f);b1(()=>{w.current=!1,S.current=f;for(let q=0;q<T.length;q++){const Q=cu(T[q]);j.includes(Q)?g.delete(Q):g.get(Q)!==!0&&g.set(Q,!1)}},[T,j.length,j.join("-")]);const L=[];if(f!==V){let q=[...f];for(let Q=0;Q<T.length;Q++){const O=T[Q],u=cu(O);j.includes(u)||(q.splice(Q,0,O),L.push(O))}return l==="wait"&&L.length&&(q=L),M(HN(q)),E(f),null}const{forceRender:H}=b.useContext(ry);return e.jsx(e.Fragment,{children:T.map(q=>{const Q=cu(q),O=o&&!d?!1:f===T||j.includes(Q),u=()=>{if(g.has(Q))g.set(Q,!0);else return;let U=!0;g.forEach(F=>{F||(U=!1)}),U&&(H==null||H(),M(S.current),o&&(x==null||x()),a&&a())};return e.jsx(O9,{isPresent:O,initial:!w.current||r?void 0:!1,custom:t,presenceAffectsLayout:i,mode:l,onExitComplete:O?void 0:u,anchorX:c,children:q},Q)})})},dI=b.createContext({strict:!1}),GN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ho={};for(const s in GN)Ho[s]={isEnabled:t=>GN[s].some(r=>!!t[r])};function z9(s){for(const t in s)Ho[t]={...Ho[t],...s[t]}}const B9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hx(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||B9.has(s)}let uI=s=>!Hx(s);function F9(s){s&&(uI=t=>t.startsWith("on")?!Hx(t):s(t))}try{F9(require("@emotion/is-prop-valid").default)}catch{}function U9(s,t,r){const a={};for(const i in s)i==="values"&&typeof s.values=="object"||(uI(i)||r===!0&&Hx(i)||!t&&!Hx(i)||s.draggable&&i.startsWith("onDrag"))&&(a[i]=s[i]);return a}function $9(s){if(typeof Proxy>"u")return s;const t=new Map,r=(...a)=>s(...a);return new Proxy(r,{get:(a,i)=>i==="create"?s:(t.has(i)||t.set(i,s(i)),t.get(i))})}const Bm=b.createContext({});function Fm(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function $c(s){return typeof s=="string"||Array.isArray(s)}const Ty=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_y=["initial",...Ty];function Um(s){return Fm(s.animate)||_y.some(t=>$c(s[t]))}function xI(s){return!!(Um(s)||s.variants)}function W9(s,t){if(Um(s)){const{initial:r,animate:a}=s;return{initial:r===!1||$c(r)?r:void 0,animate:$c(a)?a:void 0}}return s.inherit!==!1?t:{}}function q9(s){const{initial:t,animate:r}=W9(s,b.useContext(Bm));return b.useMemo(()=>({initial:t,animate:r}),[KN(t),KN(r)])}function KN(s){return Array.isArray(s)?s.join(" "):s}const H9=Symbol.for("motionComponentSymbol");function go(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function G9(s,t,r){return b.useCallback(a=>{a&&s.onMount&&s.onMount(a),t&&(a?t.mount(a):t.unmount()),r&&(typeof r=="function"?r(a):go(r)&&(r.current=a))},[t])}const Dy=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),K9="framerAppearId",mI="data-"+Dy(K9),hI=b.createContext({});function Q9(s,t,r,a,i){var V,E;const{visualElement:l}=b.useContext(Bm),o=b.useContext(dI),c=b.useContext(zm),d=b.useContext(Ey).reducedMotion,x=b.useRef(null);a=a||o.renderer,!x.current&&a&&(x.current=a(s,{visualState:t,parent:l,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const f=x.current,j=b.useContext(hI);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&Y9(x.current,r,i,j);const w=b.useRef(!1);b.useInsertionEffect(()=>{f&&w.current&&f.update(r,c)});const S=r[mI],g=b.useRef(!!S&&!((V=window.MotionHandoffIsComplete)!=null&&V.call(window,S))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,S)));return b1(()=>{f&&(w.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Py.render(f.render),g.current&&f.animationState&&f.animationState.animateChanges())}),b.useEffect(()=>{f&&(!g.current&&f.animationState&&f.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)==null||T.call(window,S)}),g.current=!1))}),f}function Y9(s,t,r,a){const{layoutId:i,layout:l,drag:o,dragConstraints:c,layoutScroll:d,layoutRoot:x,layoutCrossfade:f}=t;s.projection=new r(s.latestValues,t["data-framer-portal-id"]?void 0:pI(s.parent)),s.projection.setOptions({layoutId:i,layout:l,alwaysMeasureLayout:!!o||c&&go(c),visualElement:s,animationType:typeof l=="string"?l:"both",initialPromotionConfig:a,crossfade:f,layoutScroll:d,layoutRoot:x})}function pI(s){if(s)return s.options.allowProjection!==!1?s.projection:pI(s.parent)}function X9({preloadedFeatures:s,createVisualElement:t,useRender:r,useVisualState:a,Component:i}){s&&z9(s);function l(c,d){let x;const f={...b.useContext(Ey),...c,layoutId:J9(c)},{isStatic:j}=f,w=q9(c),S=a(c,j);if(!j&&ny){Z9();const g=eV(f);x=g.MeasureLayout,w.visualElement=Q9(i,S,f,t,g.ProjectionNode)}return e.jsxs(Bm.Provider,{value:w,children:[x&&w.visualElement?e.jsx(x,{visualElement:w.visualElement,...f}):null,r(i,c,G9(S,w.visualElement,d),S,j,w.visualElement)]})}l.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const o=b.forwardRef(l);return o[H9]=i,o}function J9({layoutId:s}){const t=b.useContext(ry).id;return t&&s!==void 0?t+"-"+s:s}function Z9(s,t){b.useContext(dI).strict}function eV(s){const{drag:t,layout:r}=Ho;if(!t&&!r)return{};const a={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(s)||r!=null&&r.isEnabled(s)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}const Wc={};function tV(s){for(const t in s)Wc[t]=s[t],my(t)&&(Wc[t].isCSSVariable=!0)}function fI(s,{layout:t,layoutId:r}){return ol.has(s)||s.startsWith("origin")||(t||r!==void 0)&&(!!Wc[s]||s==="opacity")}const sV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rV=il.length;function aV(s,t,r){let a="",i=!0;for(let l=0;l<rV;l++){const o=il[l],c=s[o];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(o.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||r){const x=aI(c,Iy[o]);if(!d){i=!1;const f=sV[o]||o;a+=`${f}(${x}) `}r&&(t[o]=x)}}return a=a.trim(),r?a=r(t,i?"":a):i&&(a="none"),a}function Ay(s,t,r){const{style:a,vars:i,transformOrigin:l}=s;let o=!1,c=!1;for(const d in t){const x=t[d];if(ol.has(d)){o=!0;continue}else if(my(d)){i[d]=x;continue}else{const f=aI(x,Iy[d]);d.startsWith("origin")?(c=!0,l[d]=f):a[d]=f}}if(t.transform||(o||r?a.transform=aV(t,s.transform,r):a.transform&&(a.transform="none")),c){const{originX:d="50%",originY:x="50%",originZ:f=0}=l;a.transformOrigin=`${d} ${x} ${f}`}}const Ry=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function gI(s,t,r){for(const a in t)!Js(t[a])&&!fI(a,r)&&(s[a]=t[a])}function nV({transformTemplate:s},t){return b.useMemo(()=>{const r=Ry();return Ay(r,t,s),Object.assign({},r.vars,r.style)},[t])}function iV(s,t){const r=s.style||{},a={};return gI(a,r,s),Object.assign(a,nV(s,t)),a}function oV(s,t){const r={},a=iV(s,t);return s.drag&&s.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(r.tabIndex=0),r.style=a,r}const lV={offset:"stroke-dashoffset",array:"stroke-dasharray"},cV={offset:"strokeDashoffset",array:"strokeDasharray"};function dV(s,t,r=1,a=0,i=!0){s.pathLength=1;const l=i?lV:cV;s[l.offset]=ht.transform(-a);const o=ht.transform(t),c=ht.transform(r);s[l.array]=`${o} ${c}`}function yI(s,{attrX:t,attrY:r,attrScale:a,pathLength:i,pathSpacing:l=1,pathOffset:o=0,...c},d,x,f){if(Ay(s,c,x),d){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:j,style:w}=s;j.transform&&(w.transform=j.transform,delete j.transform),(w.transform||j.transformOrigin)&&(w.transformOrigin=j.transformOrigin??"50% 50%",delete j.transformOrigin),w.transform&&(w.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete j.transformBox),t!==void 0&&(j.x=t),r!==void 0&&(j.y=r),a!==void 0&&(j.scale=a),i!==void 0&&dV(j,i,l,o,!1)}const bI=()=>({...Ry(),attrs:{}}),vI=s=>typeof s=="string"&&s.toLowerCase()==="svg";function uV(s,t,r,a){const i=b.useMemo(()=>{const l=bI();return yI(l,t,vI(a),s.transformTemplate,s.style),{...l.attrs,style:{...l.style}}},[t]);if(s.style){const l={};gI(l,s.style,s),i.style={...l,...i.style}}return i}const xV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function My(s){return typeof s!="string"||s.includes("-")?!1:!!(xV.indexOf(s)>-1||/[A-Z]/u.test(s))}function mV(s=!1){return(r,a,i,{latestValues:l},o)=>{const d=(My(r)?uV:oV)(a,l,o,r),x=U9(a,typeof r=="string",s),f=r!==b.Fragment?{...x,...d,ref:i}:{},{children:j}=a,w=b.useMemo(()=>Js(j)?j.get():j,[j]);return b.createElement(r,{...f,children:w})}}function QN(s){const t=[{},{}];return s==null||s.values.forEach((r,a)=>{t[0][a]=r.get(),t[1][a]=r.getVelocity()}),t}function Ly(s,t,r,a){if(typeof t=="function"){const[i,l]=QN(a);t=t(r!==void 0?r:s.custom,i,l)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[i,l]=QN(a);t=t(r!==void 0?r:s.custom,i,l)}return t}function Vu(s){return Js(s)?s.get():s}function hV({scrapeMotionValuesFromProps:s,createRenderState:t},r,a,i){return{latestValues:pV(r,a,i,s),renderState:t()}}const jI=s=>(t,r)=>{const a=b.useContext(Bm),i=b.useContext(zm),l=()=>hV(s,t,a,i);return r?l():ay(l)};function pV(s,t,r,a){const i={},l=a(s,{});for(const w in l)i[w]=Vu(l[w]);let{initial:o,animate:c}=s;const d=Um(s),x=xI(s);t&&x&&!d&&s.inherit!==!1&&(o===void 0&&(o=t.initial),c===void 0&&(c=t.animate));let f=r?r.initial===!1:!1;f=f||o===!1;const j=f?c:o;if(j&&typeof j!="boolean"&&!Fm(j)){const w=Array.isArray(j)?j:[j];for(let S=0;S<w.length;S++){const g=Ly(s,w[S]);if(g){const{transitionEnd:V,transition:E,...T}=g;for(const M in T){let L=T[M];if(Array.isArray(L)){const H=f?L.length-1:0;L=L[H]}L!==null&&(i[M]=L)}for(const M in V)i[M]=V[M]}}}return i}function Oy(s,t,r){var l;const{style:a}=s,i={};for(const o in a)(Js(a[o])||t.style&&Js(t.style[o])||fI(o,s)||((l=r==null?void 0:r.getValue(o))==null?void 0:l.liveStyle)!==void 0)&&(i[o]=a[o]);return i}const fV={useVisualState:jI({scrapeMotionValuesFromProps:Oy,createRenderState:Ry})};function NI(s,t,r){const a=Oy(s,t,r);for(const i in s)if(Js(s[i])||Js(t[i])){const l=il.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;a[l]=s[i]}return a}const gV={useVisualState:jI({scrapeMotionValuesFromProps:NI,createRenderState:bI})};function yV(s,t){return function(a,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...My(a)?gV:fV,preloadedFeatures:s,useRender:mV(i),createVisualElement:t,Component:a};return X9(o)}}function qc(s,t,r){const a=s.getProps();return Ly(a,t,r!==void 0?r:a.custom,s)}const B0=s=>Array.isArray(s);function bV(s,t,r){s.hasValue(t)?s.getValue(t).set(r):s.addValue(t,qo(r))}function vV(s){return B0(s)?s[s.length-1]||0:s}function jV(s,t){const r=qc(s,t);let{transitionEnd:a={},transition:i={},...l}=r||{};l={...l,...a};for(const o in l){const c=vV(l[o]);bV(s,o,c)}}function NV(s){return!!(Js(s)&&s.add)}function F0(s,t){const r=s.getValue("willChange");if(NV(r))return r.add(t);if(!r&&tn.WillChange){const a=new tn.WillChange("auto");s.addValue("willChange",a),a.add(t)}}function wI(s){return s.props[mI]}const wV=s=>s!==null;function kV(s,{repeat:t,repeatType:r="loop"},a){const i=s.filter(wV),l=t&&r!=="loop"&&t%2===1?0:i.length-1;return!l||a===void 0?i[l]:a}const IV={type:"spring",stiffness:500,damping:25,restSpeed:10},PV=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),SV={type:"keyframes",duration:.8},EV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},CV=(s,{keyframes:t})=>t.length>2?SV:ol.has(s)?s.startsWith("scale")?PV(t[1]):IV:EV;function TV({when:s,delay:t,delayChildren:r,staggerChildren:a,staggerDirection:i,repeat:l,repeatType:o,repeatDelay:c,from:d,elapsed:x,...f}){return!!Object.keys(f).length}const Vy=(s,t,r,a={},i,l)=>o=>{const c=ky(a,s)||{},d=c.delay||a.delay||0;let{elapsed:x=0}=a;x=x-Na(d);const f={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-x,onUpdate:w=>{t.set(w),c.onUpdate&&c.onUpdate(w)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:s,motionValue:t,element:l?void 0:i};TV(c)||Object.assign(f,CV(s,f)),f.duration&&(f.duration=Na(f.duration)),f.repeatDelay&&(f.repeatDelay=Na(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let j=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(j=!0)),(tn.instantAnimations||tn.skipAnimations)&&(j=!0,f.duration=0,f.delay=0),f.allowFlatten=!c.type&&!c.ease,j&&!l&&t.get()!==void 0){const w=kV(f.keyframes,c);if(w!==void 0){ls.update(()=>{f.onUpdate(w),f.onComplete()});return}}return c.isSync?new jy(f):new d9(f)};function _V({protectedKeys:s,needsAnimating:t},r){const a=s.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,a}function kI(s,t,{delay:r=0,transitionOverride:a,type:i}={}){let{transition:l=s.getDefaultTransition(),transitionEnd:o,...c}=t;a&&(l=a);const d=[],x=i&&s.animationState&&s.animationState.getState()[i];for(const f in c){const j=s.getValue(f,s.latestValues[f]??null),w=c[f];if(w===void 0||x&&_V(x,f))continue;const S={delay:r,...ky(l||{},f)},g=j.get();if(g!==void 0&&!j.isAnimating&&!Array.isArray(w)&&w===g&&!S.velocity)continue;let V=!1;if(window.MotionHandoffAnimation){const T=wI(s);if(T){const M=window.MotionHandoffAnimation(T,f,ls);M!==null&&(S.startTime=M,V=!0)}}F0(s,f),j.start(Vy(f,j,w,s.shouldReduceMotion&&Z1.has(f)?{type:!1}:S,s,V));const E=j.animation;E&&d.push(E)}return o&&Promise.all(d).then(()=>{ls.update(()=>{o&&jV(s,o)})}),d}function U0(s,t,r={}){var d;const a=qc(s,t,r.type==="exit"?(d=s.presenceContext)==null?void 0:d.custom:void 0);let{transition:i=s.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(i=r.transitionOverride);const l=a?()=>Promise.all(kI(s,a,r)):()=>Promise.resolve(),o=s.variantChildren&&s.variantChildren.size?(x=0)=>{const{delayChildren:f=0,staggerChildren:j,staggerDirection:w}=i;return DV(s,t,f+x,j,w,r)}:()=>Promise.resolve(),{when:c}=i;if(c){const[x,f]=c==="beforeChildren"?[l,o]:[o,l];return x().then(()=>f())}else return Promise.all([l(),o(r.delay)])}function DV(s,t,r=0,a=0,i=1,l){const o=[],c=(s.variantChildren.size-1)*a,d=i===1?(x=0)=>x*a:(x=0)=>c-x*a;return Array.from(s.variantChildren).sort(AV).forEach((x,f)=>{x.notify("AnimationStart",t),o.push(U0(x,t,{...l,delay:r+d(f)}).then(()=>x.notify("AnimationComplete",t)))}),Promise.all(o)}function AV(s,t){return s.sortNodePosition(t)}function RV(s,t,r={}){s.notify("AnimationStart",t);let a;if(Array.isArray(t)){const i=t.map(l=>U0(s,l,r));a=Promise.all(i)}else if(typeof t=="string")a=U0(s,t,r);else{const i=typeof t=="function"?qc(s,t,r.custom):t;a=Promise.all(kI(s,i,r))}return a.then(()=>{s.notify("AnimationComplete",t)})}function II(s,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==s.length)return!1;for(let a=0;a<r;a++)if(t[a]!==s[a])return!1;return!0}const MV=_y.length;function PI(s){if(!s)return;if(!s.isControllingVariants){const r=s.parent?PI(s.parent)||{}:{};return s.props.initial!==void 0&&(r.initial=s.props.initial),r}const t={};for(let r=0;r<MV;r++){const a=_y[r],i=s.props[a];($c(i)||i===!1)&&(t[a]=i)}return t}const LV=[...Ty].reverse(),OV=Ty.length;function VV(s){return t=>Promise.all(t.map(({animation:r,options:a})=>RV(s,r,a)))}function zV(s){let t=VV(s),r=YN(),a=!0;const i=d=>(x,f)=>{var w;const j=qc(s,f,d==="exit"?(w=s.presenceContext)==null?void 0:w.custom:void 0);if(j){const{transition:S,transitionEnd:g,...V}=j;x={...x,...V,...g}}return x};function l(d){t=d(s)}function o(d){const{props:x}=s,f=PI(s.parent)||{},j=[],w=new Set;let S={},g=1/0;for(let E=0;E<OV;E++){const T=LV[E],M=r[T],L=x[T]!==void 0?x[T]:f[T],H=$c(L),q=T===d?M.isActive:null;q===!1&&(g=E);let Q=L===f[T]&&L!==x[T]&&H;if(Q&&a&&s.manuallyAnimateOnMount&&(Q=!1),M.protectedKeys={...S},!M.isActive&&q===null||!L&&!M.prevProp||Fm(L)||typeof L=="boolean")continue;const O=BV(M.prevProp,L);let u=O||T===d&&M.isActive&&!Q&&H||E>g&&H,U=!1;const F=Array.isArray(L)?L:[L];let J=F.reduce(i(T),{});q===!1&&(J={});const{prevResolvedValues:D={}}=M,$={...D,...J},je=ge=>{u=!0,w.has(ge)&&(U=!0,w.delete(ge)),M.needsAnimating[ge]=!0;const ue=s.getValue(ge);ue&&(ue.liveStyle=!1)};for(const ge in $){const ue=J[ge],xe=D[ge];if(S.hasOwnProperty(ge))continue;let pe=!1;B0(ue)&&B0(xe)?pe=!II(ue,xe):pe=ue!==xe,pe?ue!=null?je(ge):w.add(ge):ue!==void 0&&w.has(ge)?je(ge):M.protectedKeys[ge]=!0}M.prevProp=L,M.prevResolvedValues=J,M.isActive&&(S={...S,...J}),a&&s.blockInitialAnimation&&(u=!1),u&&(!(Q&&O)||U)&&j.push(...F.map(ge=>({animation:ge,options:{type:T}})))}if(w.size){const E={};if(typeof x.initial!="boolean"){const T=qc(s,Array.isArray(x.initial)?x.initial[0]:x.initial);T&&T.transition&&(E.transition=T.transition)}w.forEach(T=>{const M=s.getBaseTarget(T),L=s.getValue(T);L&&(L.liveStyle=!0),E[T]=M??null}),j.push({animation:E})}let V=!!j.length;return a&&(x.initial===!1||x.initial===x.animate)&&!s.manuallyAnimateOnMount&&(V=!1),a=!1,V?t(j):Promise.resolve()}function c(d,x){var j;if(r[d].isActive===x)return Promise.resolve();(j=s.variantChildren)==null||j.forEach(w=>{var S;return(S=w.animationState)==null?void 0:S.setActive(d,x)}),r[d].isActive=x;const f=o(d);for(const w in r)r[w].protectedKeys={};return f}return{animateChanges:o,setActive:c,setAnimateFunction:l,getState:()=>r,reset:()=>{r=YN(),a=!0}}}function BV(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!II(t,s):!1}function ii(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function YN(){return{animate:ii(!0),whileInView:ii(),whileHover:ii(),whileTap:ii(),whileDrag:ii(),whileFocus:ii(),exit:ii()}}class si{constructor(t){this.isMounted=!1,this.node=t}update(){}}class FV extends si{constructor(t){super(t),t.animationState||(t.animationState=zV(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Fm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let UV=0;class $V extends si{constructor(){super(...arguments),this.id=UV++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const i=this.node.animationState.setActive("exit",!t);r&&!t&&i.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const WV={animation:{Feature:FV},exit:{Feature:$V}};function Hc(s,t,r,a={passive:!0}){return s.addEventListener(t,r,a),()=>s.removeEventListener(t,r)}function vd(s){return{point:{x:s.pageX,y:s.pageY}}}const qV=s=>t=>Sy(t)&&s(t,vd(t));function ic(s,t,r,a){return Hc(s,t,qV(r),a)}function SI({top:s,left:t,right:r,bottom:a}){return{x:{min:t,max:r},y:{min:s,max:a}}}function HV({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function GV(s,t){if(!t)return s;const r=t({x:s.left,y:s.top}),a=t({x:s.right,y:s.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}const EI=1e-4,KV=1-EI,QV=1+EI,CI=.01,YV=0-CI,XV=0+CI;function ir(s){return s.max-s.min}function JV(s,t,r){return Math.abs(s-t)<=r}function XN(s,t,r,a=.5){s.origin=a,s.originPoint=ns(t.min,t.max,s.origin),s.scale=ir(r)/ir(t),s.translate=ns(r.min,r.max,s.origin)-s.originPoint,(s.scale>=KV&&s.scale<=QV||isNaN(s.scale))&&(s.scale=1),(s.translate>=YV&&s.translate<=XV||isNaN(s.translate))&&(s.translate=0)}function oc(s,t,r,a){XN(s.x,t.x,r.x,a?a.originX:void 0),XN(s.y,t.y,r.y,a?a.originY:void 0)}function JN(s,t,r){s.min=r.min+t.min,s.max=s.min+ir(t)}function ZV(s,t,r){JN(s.x,t.x,r.x),JN(s.y,t.y,r.y)}function ZN(s,t,r){s.min=t.min-r.min,s.max=s.min+ir(t)}function lc(s,t,r){ZN(s.x,t.x,r.x),ZN(s.y,t.y,r.y)}const ew=()=>({translate:0,scale:1,origin:0,originPoint:0}),yo=()=>({x:ew(),y:ew()}),tw=()=>({min:0,max:0}),ps=()=>({x:tw(),y:tw()});function Mr(s){return[s("x"),s("y")]}function Kh(s){return s===void 0||s===1}function $0({scale:s,scaleX:t,scaleY:r}){return!Kh(s)||!Kh(t)||!Kh(r)}function di(s){return $0(s)||TI(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function TI(s){return sw(s.x)||sw(s.y)}function sw(s){return s&&s!=="0%"}function Gx(s,t,r){const a=s-r,i=t*a;return r+i}function rw(s,t,r,a,i){return i!==void 0&&(s=Gx(s,i,a)),Gx(s,r,a)+t}function W0(s,t=0,r=1,a,i){s.min=rw(s.min,t,r,a,i),s.max=rw(s.max,t,r,a,i)}function _I(s,{x:t,y:r}){W0(s.x,t.translate,t.scale,t.originPoint),W0(s.y,r.translate,r.scale,r.originPoint)}const aw=.999999999999,nw=1.0000000000001;function ez(s,t,r,a=!1){const i=r.length;if(!i)return;t.x=t.y=1;let l,o;for(let c=0;c<i;c++){l=r[c],o=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(a&&l.options.layoutScroll&&l.scroll&&l!==l.root&&vo(s,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,_I(s,o)),a&&di(l.latestValues)&&vo(s,l.latestValues))}t.x<nw&&t.x>aw&&(t.x=1),t.y<nw&&t.y>aw&&(t.y=1)}function bo(s,t){s.min=s.min+t,s.max=s.max+t}function iw(s,t,r,a,i=.5){const l=ns(s.min,s.max,i);W0(s,t,r,l,a)}function vo(s,t){iw(s.x,t.x,t.scaleX,t.scale,t.originX),iw(s.y,t.y,t.scaleY,t.scale,t.originY)}function DI(s,t){return SI(GV(s.getBoundingClientRect(),t))}function tz(s,t,r){const a=DI(s,r),{scroll:i}=t;return i&&(bo(a.x,i.offset.x),bo(a.y,i.offset.y)),a}const AI=({current:s})=>s?s.ownerDocument.defaultView:null,ow=(s,t)=>Math.abs(s-t);function sz(s,t){const r=ow(s.x,t.x),a=ow(s.y,t.y);return Math.sqrt(r**2+a**2)}class RI{constructor(t,r,{transformPagePoint:a,contextWindow:i,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Yh(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,S=sz(j.offset,{x:0,y:0})>=3;if(!w&&!S)return;const{point:g}=j,{timestamp:V}=Ms;this.history.push({...g,timestamp:V});const{onStart:E,onMove:T}=this.handlers;w||(E&&E(this.lastMoveEvent,j),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,j)},this.handlePointerMove=(j,w)=>{this.lastMoveEvent=j,this.lastMoveEventInfo=Qh(w,this.transformPagePoint),ls.update(this.updatePoint,!0)},this.handlePointerUp=(j,w)=>{this.end();const{onEnd:S,onSessionEnd:g,resumeAnimation:V}=this.handlers;if(this.dragSnapToOrigin&&V&&V(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Yh(j.type==="pointercancel"?this.lastMoveEventInfo:Qh(w,this.transformPagePoint),this.history);this.startEvent&&S&&S(j,E),g&&g(j,E)},!Sy(t))return;this.dragSnapToOrigin=l,this.handlers=r,this.transformPagePoint=a,this.contextWindow=i||window;const o=vd(t),c=Qh(o,this.transformPagePoint),{point:d}=c,{timestamp:x}=Ms;this.history=[{...d,timestamp:x}];const{onSessionStart:f}=r;f&&f(t,Yh(c,this.history)),this.removeListeners=gd(ic(this.contextWindow,"pointermove",this.handlePointerMove),ic(this.contextWindow,"pointerup",this.handlePointerUp),ic(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Kn(this.updatePoint)}}function Qh(s,t){return t?{point:t(s.point)}:s}function lw(s,t){return{x:s.x-t.x,y:s.y-t.y}}function Yh({point:s},t){return{point:s,delta:lw(s,MI(t)),offset:lw(s,rz(t)),velocity:az(t,.1)}}function rz(s){return s[0]}function MI(s){return s[s.length-1]}function az(s,t){if(s.length<2)return{x:0,y:0};let r=s.length-1,a=null;const i=MI(s);for(;r>=0&&(a=s[r],!(i.timestamp-a.timestamp>Na(t)));)r--;if(!a)return{x:0,y:0};const l=wa(i.timestamp-a.timestamp);if(l===0)return{x:0,y:0};const o={x:(i.x-a.x)/l,y:(i.y-a.y)/l};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function nz(s,{min:t,max:r},a){return t!==void 0&&s<t?s=a?ns(t,s,a.min):Math.max(s,t):r!==void 0&&s>r&&(s=a?ns(r,s,a.max):Math.min(s,r)),s}function cw(s,t,r){return{min:t!==void 0?s.min+t:void 0,max:r!==void 0?s.max+r-(s.max-s.min):void 0}}function iz(s,{top:t,left:r,bottom:a,right:i}){return{x:cw(s.x,r,i),y:cw(s.y,t,a)}}function dw(s,t){let r=t.min-s.min,a=t.max-s.max;return t.max-t.min<s.max-s.min&&([r,a]=[a,r]),{min:r,max:a}}function oz(s,t){return{x:dw(s.x,t.x),y:dw(s.y,t.y)}}function lz(s,t){let r=.5;const a=ir(s),i=ir(t);return i>a?r=Bc(t.min,t.max-a,s.min):a>i&&(r=Bc(s.min,s.max-i,t.min)),en(0,1,r)}function cz(s,t){const r={};return t.min!==void 0&&(r.min=t.min-s.min),t.max!==void 0&&(r.max=t.max-s.min),r}const q0=.35;function dz(s=q0){return s===!1?s=0:s===!0&&(s=q0),{x:uw(s,"left","right"),y:uw(s,"top","bottom")}}function uw(s,t,r){return{min:xw(s,t),max:xw(s,r)}}function xw(s,t){return typeof s=="number"?s:s[t]||0}const uz=new WeakMap;class xz{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ps(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:j}=this.getProps();j?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(vd(f).point)},l=(f,j)=>{const{drag:w,dragPropagation:S,onDragStart:g}=this.getProps();if(w&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=P9(w),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Mr(E=>{let T=this.getAxisMotionValue(E).get()||0;if(ka.test(T)){const{projection:M}=this.visualElement;if(M&&M.layout){const L=M.layout.layoutBox[E];L&&(T=ir(L)*(parseFloat(T)/100))}}this.originPoint[E]=T}),g&&ls.postRender(()=>g(f,j)),F0(this.visualElement,"transform");const{animationState:V}=this.visualElement;V&&V.setActive("whileDrag",!0)},o=(f,j)=>{const{dragPropagation:w,dragDirectionLock:S,onDirectionLock:g,onDrag:V}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:E}=j;if(S&&this.currentDirection===null){this.currentDirection=mz(E),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",j.point,E),this.updateAxis("y",j.point,E),this.visualElement.render(),V&&V(f,j)},c=(f,j)=>this.stop(f,j),d=()=>Mr(f=>{var j;return this.getAnimationState(f)==="paused"&&((j=this.getAxisMotionValue(f).animation)==null?void 0:j.play())}),{dragSnapToOrigin:x}=this.getProps();this.panSession=new RI(t,{onSessionStart:i,onStart:l,onMove:o,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:x,contextWindow:AI(this.visualElement)})}stop(t,r){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:l}=this.getProps();l&&ls.postRender(()=>l(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,a){const{drag:i}=this.getProps();if(!a||!du(t,i,this.currentDirection))return;const l=this.getAxisMotionValue(t);let o=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(o=nz(o,this.constraints[t],this.elastic[t])),l.set(o)}resolveConstraints(){var l;const{dragConstraints:t,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,i=this.constraints;t&&go(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=iz(a.layoutBox,t):this.constraints=!1,this.elastic=dz(r),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Mr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=cz(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!go(t))return!1;const a=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const l=tz(a,i.root,this.visualElement.getTransformPagePoint());let o=oz(i.layout.layoutBox,l);if(r){const c=r(HV(o));this.hasMutatedConstraints=!!c,c&&(o=SI(c))}return o}startAnimation(t){const{drag:r,dragMomentum:a,dragElastic:i,dragTransition:l,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},x=Mr(f=>{if(!du(f,r,this.currentDirection))return;let j=d&&d[f]||{};o&&(j={min:0,max:0});const w=i?200:1e6,S=i?40:1e7,g={type:"inertia",velocity:a?t[f]:0,bounceStiffness:w,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...l,...j};return this.startAxisValueAnimation(f,g)});return Promise.all(x).then(c)}startAxisValueAnimation(t,r){const a=this.getAxisMotionValue(t);return F0(this.visualElement,t),a.start(Vy(t,a,0,r,this.visualElement,!1))}stopAnimation(){Mr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Mr(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),i=a[r];return i||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){Mr(r=>{const{drag:a}=this.getProps();if(!du(r,a,this.currentDirection))return;const{projection:i}=this.visualElement,l=this.getAxisMotionValue(r);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[r];l.set(t[r]-ns(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!go(r)||!a||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Mr(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const d=c.get();i[o]=lz({min:d,max:d},this.constraints[o])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),Mr(o=>{if(!du(o,t,null))return;const c=this.getAxisMotionValue(o),{min:d,max:x}=this.constraints[o];c.set(ns(d,x,i[o]))})}addListeners(){if(!this.visualElement.current)return;uz.set(this.visualElement,this);const t=this.visualElement.current,r=ic(t,"pointerdown",d=>{const{drag:x,dragListener:f=!0}=this.getProps();x&&f&&this.start(d)}),a=()=>{const{dragConstraints:d}=this.getProps();go(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,l=i.addEventListener("measure",a);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ls.read(a);const o=Hc(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:x})=>{this.isDragging&&x&&(Mr(f=>{const j=this.getAxisMotionValue(f);j&&(this.originPoint[f]+=d[f].translate,j.set(j.get()+d[f].translate))}),this.visualElement.render())});return()=>{o(),r(),l(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:i=!1,dragConstraints:l=!1,dragElastic:o=q0,dragMomentum:c=!0}=t;return{...t,drag:r,dragDirectionLock:a,dragPropagation:i,dragConstraints:l,dragElastic:o,dragMomentum:c}}}function du(s,t,r){return(t===!0||t===s)&&(r===null||r===s)}function mz(s,t=10){let r=null;return Math.abs(s.y)>t?r="y":Math.abs(s.x)>t&&(r="x"),r}class hz extends si{constructor(t){super(t),this.removeGroupControls=Fr,this.removeListeners=Fr,this.controls=new xz(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fr}unmount(){this.removeGroupControls(),this.removeListeners()}}const mw=s=>(t,r)=>{s&&ls.postRender(()=>s(t,r))};class pz extends si{constructor(){super(...arguments),this.removePointerDownListener=Fr}onPointerDown(t){this.session=new RI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:AI(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:a,onPanEnd:i}=this.node.getProps();return{onSessionStart:mw(t),onStart:mw(r),onMove:a,onEnd:(l,o)=>{delete this.session,i&&ls.postRender(()=>i(l,o))}}}mount(){this.removePointerDownListener=ic(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const zu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function hw(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const Tl={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(ht.test(s))s=parseFloat(s);else return s;const r=hw(s,t.target.x),a=hw(s,t.target.y);return`${r}% ${a}%`}},fz={correct:(s,{treeScale:t,projectionDelta:r})=>{const a=s,i=Qn.parse(s);if(i.length>5)return a;const l=Qn.createTransformer(s),o=typeof i[0]!="number"?1:0,c=r.x.scale*t.x,d=r.y.scale*t.y;i[0+o]/=c,i[1+o]/=d;const x=ns(c,d,.5);return typeof i[2+o]=="number"&&(i[2+o]/=x),typeof i[3+o]=="number"&&(i[3+o]/=x),l(i)}};class gz extends b.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a,layoutId:i}=this.props,{projection:l}=t;tV(yz),l&&(r.group&&r.group.add(l),a&&a.register&&i&&a.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),zu.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:a,drag:i,isPresent:l}=this.props,{projection:o}=a;return o&&(o.isPresent=l,i||t.layoutDependency!==r||r===void 0||t.isPresent!==l?o.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?o.promote():o.relegate()||ls.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Py.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),a&&a.deregister&&a.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function LI(s){const[t,r]=cI(),a=b.useContext(ry);return e.jsx(gz,{...s,layoutGroup:a,switchLayoutGroup:b.useContext(hI),isPresent:t,safeToRemove:r})}const yz={borderRadius:{...Tl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tl,borderTopRightRadius:Tl,borderBottomLeftRadius:Tl,borderBottomRightRadius:Tl,boxShadow:fz};function bz(s,t,r){const a=Js(s)?s:qo(s);return a.start(Vy("",a,t,r)),a.animation}const vz=(s,t)=>s.depth-t.depth;class jz{constructor(){this.children=[],this.isDirty=!1}add(t){iy(this.children,t),this.isDirty=!0}remove(t){oy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(vz),this.isDirty=!1,this.children.forEach(t)}}function Nz(s,t){const r=hr.now(),a=({timestamp:i})=>{const l=i-r;l>=t&&(Kn(a),s(l-t))};return ls.setup(a,!0),()=>Kn(a)}const OI=["TopLeft","TopRight","BottomLeft","BottomRight"],wz=OI.length,pw=s=>typeof s=="string"?parseFloat(s):s,fw=s=>typeof s=="number"||ht.test(s);function kz(s,t,r,a,i,l){i?(s.opacity=ns(0,r.opacity??1,Iz(a)),s.opacityExit=ns(t.opacity??1,0,Pz(a))):l&&(s.opacity=ns(t.opacity??1,r.opacity??1,a));for(let o=0;o<wz;o++){const c=`border${OI[o]}Radius`;let d=gw(t,c),x=gw(r,c);if(d===void 0&&x===void 0)continue;d||(d=0),x||(x=0),d===0||x===0||fw(d)===fw(x)?(s[c]=Math.max(ns(pw(d),pw(x),a),0),(ka.test(x)||ka.test(d))&&(s[c]+="%")):s[c]=x}(t.rotate||r.rotate)&&(s.rotate=ns(t.rotate||0,r.rotate||0,a))}function gw(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const Iz=VI(0,.5,T1),Pz=VI(.5,.95,Fr);function VI(s,t,r){return a=>a<s?0:a>t?1:r(Bc(s,t,a))}function yw(s,t){s.min=t.min,s.max=t.max}function Rr(s,t){yw(s.x,t.x),yw(s.y,t.y)}function bw(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}function vw(s,t,r,a,i){return s-=t,s=Gx(s,1/r,a),i!==void 0&&(s=Gx(s,1/i,a)),s}function Sz(s,t=0,r=1,a=.5,i,l=s,o=s){if(ka.test(t)&&(t=parseFloat(t),t=ns(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=ns(l.min,l.max,a);s===l&&(c-=t),s.min=vw(s.min,t,r,c,i),s.max=vw(s.max,t,r,c,i)}function jw(s,t,[r,a,i],l,o){Sz(s,t[r],t[a],t[i],t.scale,l,o)}const Ez=["x","scaleX","originX"],Cz=["y","scaleY","originY"];function Nw(s,t,r,a){jw(s.x,t,Ez,r?r.x:void 0,a?a.x:void 0),jw(s.y,t,Cz,r?r.y:void 0,a?a.y:void 0)}function ww(s){return s.translate===0&&s.scale===1}function zI(s){return ww(s.x)&&ww(s.y)}function kw(s,t){return s.min===t.min&&s.max===t.max}function Tz(s,t){return kw(s.x,t.x)&&kw(s.y,t.y)}function Iw(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function BI(s,t){return Iw(s.x,t.x)&&Iw(s.y,t.y)}function Pw(s){return ir(s.x)/ir(s.y)}function Sw(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}class _z{constructor(){this.members=[]}add(t){iy(this.members,t),t.scheduleRender()}remove(t){if(oy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(i=>t===i);if(r===0)return!1;let a;for(let i=r;i>=0;i--){const l=this.members[i];if(l.isPresent!==!1){a=l;break}}return a?(this.promote(a),!0):!1}promote(t,r){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,r&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:a}=t;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Dz(s,t,r){let a="";const i=s.x.translate/t.x,l=s.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((i||l||o)&&(a=`translate3d(${i}px, ${l}px, ${o}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:x,rotate:f,rotateX:j,rotateY:w,skewX:S,skewY:g}=r;x&&(a=`perspective(${x}px) ${a}`),f&&(a+=`rotate(${f}deg) `),j&&(a+=`rotateX(${j}deg) `),w&&(a+=`rotateY(${w}deg) `),S&&(a+=`skewX(${S}deg) `),g&&(a+=`skewY(${g}deg) `)}const c=s.x.scale*t.x,d=s.y.scale*t.y;return(c!==1||d!==1)&&(a+=`scale(${c}, ${d})`),a||"none"}const Xh=["","X","Y","Z"],Az={visibility:"hidden"},Rz=1e3;let Mz=0;function Jh(s,t,r,a){const{latestValues:i}=t;i[s]&&(r[s]=i[s],t.setStaticValue(s,0),a&&(a[s]=0))}function FI(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const r=wI(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:l}=s.options;window.MotionCancelOptimisedAnimation(r,"transform",ls,!(i||l))}const{parent:a}=s;a&&!a.hasCheckedOptimisedAppear&&FI(a)}function UI({attachResizeListener:s,defaultParent:t,measureScroll:r,checkIsScrollRoot:a,resetTransform:i}){return class{constructor(o={},c=t==null?void 0:t()){this.id=Mz++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Vz),this.nodes.forEach($z),this.nodes.forEach(Wz),this.nodes.forEach(zz)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new jz)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new dy),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const d=this.eventHandlers.get(o);d&&d.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=lI(o)&&!D9(o),this.instance=o;const{layoutId:c,layout:d,visualElement:x}=this.options;if(x&&!x.current&&x.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),s){let f;const j=()=>this.root.updateBlockedByResize=!1;s(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Nz(j,250),zu.hasAnimatedSinceResize&&(zu.hasAnimatedSinceResize=!1,this.nodes.forEach(Cw))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&x&&(c||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:j,hasRelativeLayoutChanged:w,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||x.getDefaultTransition()||Qz,{onLayoutAnimationStart:V,onLayoutAnimationComplete:E}=x.getProps(),T=!this.targetLayout||!BI(this.targetLayout,S),M=!j&&w;if(this.options.layoutRoot||this.resumeFrom||M||j&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,M);const L={...ky(g,"layout"),onPlay:V,onComplete:E};(x.shouldReduceMotion||this.options.layoutRoot)&&(L.delay=0,L.type=!1),this.startAnimation(L)}else j||Cw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Kn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qz),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&FI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const j=this.path[f];j.shouldResetTransform=!0,j.updateScroll("snapshot"),j.options.layoutRoot&&j.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ew);return}this.isUpdating||this.nodes.forEach(Fz),this.isUpdating=!1,this.nodes.forEach(Uz),this.nodes.forEach(Lz),this.nodes.forEach(Oz),this.clearAllSnapshots();const c=hr.now();Ms.delta=en(0,1e3/60,c-Ms.timestamp),Ms.timestamp=c,Ms.isProcessing=!0,Uh.update.process(Ms),Uh.preRender.process(Ms),Uh.render.process(Ms),Ms.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Py.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Bz),this.sharedNodes.forEach(Hz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ls.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ls.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ir(this.snapshot.measuredBox.x)&&!ir(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ps(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const d=a(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:d,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!zI(this.projectionDelta),d=this.getTransformTemplate(),x=d?d(this.latestValues,""):void 0,f=x!==this.prevTransformTemplateValue;o&&this.instance&&(c||di(this.latestValues)||f)&&(i(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return o&&(d=this.removeTransform(d)),Yz(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var x;const{visualElement:o}=this.options;if(!o)return ps();const c=o.measureViewportBox();if(!(((x=this.scroll)==null?void 0:x.wasRoot)||this.path.some(Xz))){const{scroll:f}=this.root;f&&(bo(c.x,f.offset.x),bo(c.y,f.offset.y))}return c}removeElementScroll(o){var d;const c=ps();if(Rr(c,o),(d=this.scroll)!=null&&d.wasRoot)return c;for(let x=0;x<this.path.length;x++){const f=this.path[x],{scroll:j,options:w}=f;f!==this.root&&j&&w.layoutScroll&&(j.wasRoot&&Rr(c,o),bo(c.x,j.offset.x),bo(c.y,j.offset.y))}return c}applyTransform(o,c=!1){const d=ps();Rr(d,o);for(let x=0;x<this.path.length;x++){const f=this.path[x];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&vo(d,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),di(f.latestValues)&&vo(d,f.latestValues)}return di(this.latestValues)&&vo(d,this.latestValues),d}removeTransform(o){const c=ps();Rr(c,o);for(let d=0;d<this.path.length;d++){const x=this.path[d];if(!x.instance||!di(x.latestValues))continue;$0(x.latestValues)&&x.updateSnapshot();const f=ps(),j=x.measurePageBox();Rr(f,j),Nw(c,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,f)}return di(this.latestValues)&&Nw(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ms.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var w;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:j}=this.options;if(!(!this.layout||!(f||j))){if(this.resolvedRelativeTargetAt=Ms.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ps(),this.relativeTargetOrigin=ps(),lc(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),Rr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ps(),this.targetWithTransforms=ps()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ZV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Rr(this.target,this.layout.layoutBox),_I(this.target,this.targetDelta)):Rr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ps(),this.relativeTargetOrigin=ps(),lc(this.relativeTargetOrigin,this.target,S.target),Rr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||$0(this.parent.latestValues)||TI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Ms.timestamp&&(d=!1),d)return;const{layout:x,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||f))return;Rr(this.layoutCorrected,this.layout.layoutBox);const j=this.treeScale.x,w=this.treeScale.y;ez(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ps());const{target:S}=o;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(bw(this.prevProjectionDelta.x,this.projectionDelta.x),bw(this.prevProjectionDelta.y,this.projectionDelta.y)),oc(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==j||this.treeScale.y!==w||!Sw(this.projectionDelta.x,this.prevProjectionDelta.x)||!Sw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),o){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=yo(),this.projectionDelta=yo(),this.projectionDeltaWithTransform=yo()}setAnimationOrigin(o,c=!1){const d=this.snapshot,x=d?d.latestValues:{},f={...this.latestValues},j=yo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const w=ps(),S=d?d.source:void 0,g=this.layout?this.layout.source:void 0,V=S!==g,E=this.getStack(),T=!E||E.members.length<=1,M=!!(V&&!T&&this.options.crossfade===!0&&!this.path.some(Kz));this.animationProgress=0;let L;this.mixTargetDelta=H=>{const q=H/1e3;Tw(j.x,o.x,q),Tw(j.y,o.y,q),this.setTargetDelta(j),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(lc(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Gz(this.relativeTarget,this.relativeTargetOrigin,w,q),L&&Tz(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=ps()),Rr(L,this.relativeTarget)),V&&(this.animationValues=f,kz(f,x,this.latestValues,q,M,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var c,d,x;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(!1),(x=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||x.stop(!1),this.pendingAnimation&&(Kn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ls.update(()=>{zu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=qo(0)),this.currentAnimation=bz(this.motionValue,[0,1e3],{...o,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),o.onUpdate&&o.onUpdate(f)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Rz),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:d,layout:x,latestValues:f}=o;if(!(!c||!d||!x)){if(this!==o&&this.layout&&x&&$I(this.options.animationType,this.layout.layoutBox,x.layoutBox)){d=this.target||ps();const j=ir(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+j;const w=ir(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+w}Rr(c,d),vo(c,f),oc(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new _z),this.sharedNodes.get(o).add(c);const x=c.options.initialPromotionConfig;c.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var c;const{layoutId:o}=this.options;return o?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:o}=this.options;return o?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:d}={}){const x=this.getStack();x&&x.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:d}=o;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const x={};d.z&&Jh("z",o,x,this.animationValues);for(let f=0;f<Xh.length;f++)Jh(`rotate${Xh[f]}`,o,x,this.animationValues),Jh(`skew${Xh[f]}`,o,x,this.animationValues);o.render();for(const f in x)o.setStaticValue(f,x[f]),this.animationValues&&(this.animationValues[f]=x[f]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Az;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Vu(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=Vu(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!di(this.latestValues)&&(S.transform=d?d({},""):"none",this.hasProjected=!1),S}const f=x.animationValues||x.latestValues;this.applyTransformsToTarget(),c.transform=Dz(this.projectionDeltaWithTransform,this.treeScale,f),d&&(c.transform=d(f,c.transform));const{x:j,y:w}=this.projectionDelta;c.transformOrigin=`${j.origin*100}% ${w.origin*100}% 0`,x.animationValues?c.opacity=x===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=x===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const S in Wc){if(f[S]===void 0)continue;const{correct:g,applyTo:V,isCSSVariable:E}=Wc[S],T=c.transform==="none"?f[S]:g(f[S],x);if(V){const M=V.length;for(let L=0;L<M;L++)c[V[L]]=T}else E?this.options.visualElement.renderState.vars[S]=T:c[S]=T}return this.options.layoutId&&(c.pointerEvents=x===this?Vu(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)==null?void 0:c.stop(!1)}),this.root.nodes.forEach(Ew),this.root.sharedNodes.clear()}}}function Lz(s){s.updateLayout()}function Oz(s){var r;const t=((r=s.resumeFrom)==null?void 0:r.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:i}=s.layout,{animationType:l}=s.options,o=t.source!==s.layout.source;l==="size"?Mr(j=>{const w=o?t.measuredBox[j]:t.layoutBox[j],S=ir(w);w.min=a[j].min,w.max=w.min+S}):$I(l,t.layoutBox,a)&&Mr(j=>{const w=o?t.measuredBox[j]:t.layoutBox[j],S=ir(a[j]);w.max=w.min+S,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[j].max=s.relativeTarget[j].min+S)});const c=yo();oc(c,a,t.layoutBox);const d=yo();o?oc(d,s.applyTransform(i,!0),t.measuredBox):oc(d,a,t.layoutBox);const x=!zI(c);let f=!1;if(!s.resumeFrom){const j=s.getClosestProjectingParent();if(j&&!j.resumeFrom){const{snapshot:w,layout:S}=j;if(w&&S){const g=ps();lc(g,t.layoutBox,w.layoutBox);const V=ps();lc(V,a,S.layoutBox),BI(g,V)||(f=!0),j.options.layoutRoot&&(s.relativeTarget=V,s.relativeTargetOrigin=g,s.relativeParent=j)}}}s.notifyListeners("didUpdate",{layout:a,snapshot:t,delta:d,layoutDelta:c,hasLayoutChanged:x,hasRelativeLayoutChanged:f})}else if(s.isLead()){const{onExitComplete:a}=s.options;a&&a()}s.options.transition=void 0}function Vz(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function zz(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function Bz(s){s.clearSnapshot()}function Ew(s){s.clearMeasurements()}function Fz(s){s.isLayoutDirty=!1}function Uz(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function Cw(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function $z(s){s.resolveTargetDelta()}function Wz(s){s.calcProjection()}function qz(s){s.resetSkewAndRotation()}function Hz(s){s.removeLeadSnapshot()}function Tw(s,t,r){s.translate=ns(t.translate,0,r),s.scale=ns(t.scale,1,r),s.origin=t.origin,s.originPoint=t.originPoint}function _w(s,t,r,a){s.min=ns(t.min,r.min,a),s.max=ns(t.max,r.max,a)}function Gz(s,t,r,a){_w(s.x,t.x,r.x,a),_w(s.y,t.y,r.y,a)}function Kz(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const Qz={duration:.45,ease:[.4,0,.1,1]},Dw=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),Aw=Dw("applewebkit/")&&!Dw("chrome/")?Math.round:Fr;function Rw(s){s.min=Aw(s.min),s.max=Aw(s.max)}function Yz(s){Rw(s.x),Rw(s.y)}function $I(s,t,r){return s==="position"||s==="preserve-aspect"&&!JV(Pw(t),Pw(r),.2)}function Xz(s){var t;return s!==s.root&&((t=s.scroll)==null?void 0:t.wasRoot)}const Jz=UI({attachResizeListener:(s,t)=>Hc(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zh={current:void 0},WI=UI({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Zh.current){const s=new Jz({});s.mount(window),s.setOptions({layoutScroll:!0}),Zh.current=s}return Zh.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),Zz={pan:{Feature:pz},drag:{Feature:hz,ProjectionNode:WI,MeasureLayout:LI}};function Mw(s,t,r){const{props:a}=s;s.animationState&&a.whileHover&&s.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,l=a[i];l&&ls.postRender(()=>l(t,vd(t)))}class eB extends si{mount(){const{current:t}=this.node;t&&(this.unmount=S9(t,(r,a)=>(Mw(this.node,a,"Start"),i=>Mw(this.node,i,"End"))))}unmount(){}}class tB extends si{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gd(Hc(this.node.current,"focus",()=>this.onFocus()),Hc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Lw(s,t,r){const{props:a}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&a.whileTap&&s.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),l=a[i];l&&ls.postRender(()=>l(t,vd(t)))}class sB extends si{mount(){const{current:t}=this.node;t&&(this.unmount=_9(t,(r,a)=>(Lw(this.node,a,"Start"),(i,{success:l})=>Lw(this.node,i,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const H0=new WeakMap,ep=new WeakMap,rB=s=>{const t=H0.get(s.target);t&&t(s)},aB=s=>{s.forEach(rB)};function nB({root:s,...t}){const r=s||document;ep.has(r)||ep.set(r,{});const a=ep.get(r),i=JSON.stringify(t);return a[i]||(a[i]=new IntersectionObserver(aB,{root:s,...t})),a[i]}function iB(s,t,r){const a=nB(t);return H0.set(s,r),a.observe(s),()=>{H0.delete(s),a.unobserve(s)}}const oB={some:0,all:1};class lB extends si{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:a,amount:i="some",once:l}=t,o={root:r?r.current:void 0,rootMargin:a,threshold:typeof i=="number"?i:oB[i]},c=d=>{const{isIntersecting:x}=d;if(this.isInView===x||(this.isInView=x,l&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:f,onViewportLeave:j}=this.node.getProps(),w=x?f:j;w&&w(d)};return iB(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(cB(t,r))&&this.startObserver()}unmount(){}}function cB({viewport:s={}},{viewport:t={}}={}){return r=>s[r]!==t[r]}const dB={inView:{Feature:lB},tap:{Feature:sB},focus:{Feature:tB},hover:{Feature:eB}},uB={layout:{ProjectionNode:WI,MeasureLayout:LI}},G0={current:null},qI={current:!1};function xB(){if(qI.current=!0,!!ny)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>G0.current=s.matches;s.addListener(t),t()}else G0.current=!1}const mB=new WeakMap;function hB(s,t,r){for(const a in t){const i=t[a],l=r[a];if(Js(i))s.addValue(a,i);else if(Js(l))s.addValue(a,qo(i,{owner:s}));else if(l!==i)if(s.hasValue(a)){const o=s.getValue(a);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=s.getStaticValue(a);s.addValue(a,qo(o!==void 0?o:i,{owner:s}))}}for(const a in r)t[a]===void 0&&s.removeValue(a);return t}const Ow=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class pB{scrapeMotionValuesFromProps(t,r,a){return{}}constructor({parent:t,props:r,presenceContext:a,reducedMotionConfig:i,blockInitialAnimation:l,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ny,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=hr.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,ls.render(this.render,!1,!0))};const{latestValues:d,renderState:x}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=r.initial?{...d}:{},this.renderState=x,this.parent=t,this.props=r,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!l,this.isControllingVariants=Um(r),this.isVariantNode=xI(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...j}=this.scrapeMotionValuesFromProps(r,{},this);for(const w in j){const S=j[w];d[w]!==void 0&&Js(S)&&S.set(d[w],!1)}}mount(t){this.current=t,mB.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),qI.current||xB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:G0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Kn(this.notifyUpdate),Kn(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=ol.has(t);a&&this.onBindTransform&&this.onBindTransform();const i=r.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&ls.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0)}),l=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{i(),l(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ho){const r=Ho[t];if(!r)continue;const{isEnabled:a,Feature:i}=r;if(!this.features[t]&&i&&a(this.props)&&(this.features[t]=new i(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ps()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<Ow.length;a++){const i=Ow[a];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const l="on"+i,o=t[l];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=hB(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const a=this.values.get(t);r!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&r!==void 0&&(a=qo(r===null?void 0:r,{owner:this}),this.addValue(t,a)),a}readValue(t,r){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(v1(a)||N1(a))?a=parseFloat(a):!R9(a)&&Qn.test(r)&&(a=rI(t,r)),this.setBaseTarget(t,Js(a)?a.get():a)),Js(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var l;const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const o=Ly(this.props,r,(l=this.presenceContext)==null?void 0:l.custom);o&&(a=o[t])}if(r&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Js(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new dy),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class HI extends pB{constructor(){super(...arguments),this.KeyframeResolver=N9}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:a}){delete r[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Js(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function GI(s,{style:t,vars:r},a,i){Object.assign(s.style,t,i&&i.getProjectionStyles(a));for(const l in r)s.style.setProperty(l,r[l])}function fB(s){return window.getComputedStyle(s)}class gB extends HI{constructor(){super(...arguments),this.type="html",this.renderInstance=GI}readValueFromInstance(t,r){var a;if(ol.has(r))return(a=this.projection)!=null&&a.isProjecting?R0(r):FO(t,r);{const i=fB(t),l=(my(r)?i.getPropertyValue(r):i[r])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:r}){return DI(t,r)}build(t,r,a){Ay(t,r,a.transformTemplate)}scrapeMotionValuesFromProps(t,r,a){return Oy(t,r,a)}}const KI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yB(s,t,r,a){GI(s,t,void 0,a);for(const i in t.attrs)s.setAttribute(KI.has(i)?i:Dy(i),t.attrs[i])}class bB extends HI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ps}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(ol.has(r)){const a=sI(r);return a&&a.default||0}return r=KI.has(r)?r:Dy(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,a){return NI(t,r,a)}build(t,r,a){yI(t,r,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,r,a,i){yB(t,r,a,i)}mount(t){this.isSVGTag=vI(t.tagName),super.mount(t)}}const vB=(s,t)=>My(s)?new bB(t):new gB(t,{allowProjection:s!==b.Fragment}),jB=yV({...WV,...dB,...Zz,...uB},vB),Ze=$9(jB),jt="/assets/logo-e43e9960.png",NB="/assets/brooklyn99-7c1a6c47.png",wB="/assets/stranger-things-31a579dc.png",kB="/assets/breaking-bad-482f4098.png",IB="/assets/naruto-54b60bd0.png",PB="/assets/alice-5ff5523e.png",SB="/assets/netflix-e3c8e0d2.png",EB="/assets/spotify-d09996b4.png",CB="/assets/disney-0c4f0934.png",TB="/assets/max-c00a4c65.png",_B="/assets/prime-video-72b85c51.png",DB="/assets/vix-ee8ed6dc.png",AB="/assets/Canva-e7a7d520.png",RB="/assets/ChatGPT-b8d712b1.png",MB="/assets/crunchyroll-562435fc.png",LB="/assets/redessociales-65298696.png",OB="/assets/dgo-7ac16535.png",VB="/assets/ligamax-7ac6606f.png",zB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAB4CAYAAADblO/uAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACnFJREFUeNrsnd912zYbh+Gc3FedoPQEVSYINUHUm+bS0gS2JlA8ga0JrF7qyvYElieIMkHYCapvAn+EQEb2sUgR1AsSIJ/nHKU9jkOKIH54/+AFcPby8qIAoNucIXQAhA4ACB0AEDoAIHQAQOgAgNABAKEDAEIHQOgAgNABAKEDAEIHAIQOAAgdABA6ACB0AIQOAAgdABA6AHRX6GdnZ7RiVVZJlP45Tj+D9PM5++k2/fxIPxv1NXqgkeA1UoYYoTcj8En652X6GR75TS36Rfq5TUW/peEAoYchcG29b9JPZPkvk/QzTcW+phEROkL3V+DaNb/L3PRT0GJf0qAIHaH7KfKnCm46YgeEjsjf8CkV+4YGRugIvbsiz2P2TyToEHpdPtCUYtw4ErkmSj9XNDGEadHNvLL+xK9+qq3WJqiMs8mu3zdwp/O0XRK6LRbdf6EbF1dbpwt1fNpJF5AsvBa9eZ6fyhTBuGaZtsWU7o/Q/Rb6KvmmTOGIrSi04KdexqjmmeYN3vF3YnWE7qfQZRJV2mX9y6vsc7PWPGeWtsEtEkDofgl9lQwzkUuIQVuykTdiXyU6BLlp+K5J+vznne7dxks6FLYkCN1HobuxeP6IfZX8VPblrRJ0e159lRzqlKM+lgRLCf2j4+/5pOTdWhMGrJJ2xW4WqkQt3V0nMjeOnitWb2dB6rDeDcgU+XjDR4dCcDmvrMV+n96jzSKSixbf23gXq7tBi/zU5OI86wPbTPSPlPG2ywdHItedxXWBR6SambsuyjvELb63KKtB8J1BNijdpd/3v8wLgs4IvbnpprggceOaSw/e3TiwvjbIBH+f5W4gaKHLxHh2g4qxsE1Z84EnIvscaJ9rqooQHMfo8xaeQ6/9/tTQvSaq2Xnzsli6Scqz3vty5igbhMYl7WQ8sa/RNyQYokVvL3YdZsm/vrjtxhX2KU7Xc9x6INBJN1Omq+f6b0vbERc+WNe9zUz0VRY2uHTbY9XelNrhAc5X9GzI10jPDExLYnZW5AUq9EnLz+Paql949v6G3vcwM61WtLvtFyQYmtCNtRu03vFdZeGNmznx7P2FkpC7LnlfuO+BWXRfRmdXWfiJh+8vDJGYCrkkWK+kA0hm3WOPnku78CPha156+P5CEokWetToYPU2ZzPI2stsbJJ/p54slPko1KADzzpdvKvCkiq79C8J9/q7RYF01ucCYzAsieFt39GX7HrDygNI3TLdw/UiSe0+V3Q9vWrPI4vuo2W5SRvvQagWXjoJpzvWIvtvXoAzr2ndohK3uE9okdTJ4uftP077i34Hs4pHY8Xqfc3I+gRhSl/PSYwee/ji80MUTreYsvG57kijXWcyU1BJtpHEuXK1Ig1sBs37lsqqnSIldF+zv2OBhRSSIp8W7g5jPI86K9LiQPpaUR/xcXCbZxt+EqMfGAl9Rbvwm1pro401nwuKvNwN05Vlq2QdkHhtPaxDSC4zXqv96bTbkkEkP812XNJ373bvoiP78/VB6KdsVCG1+GJpkaR57JzQy5O1Mhbdvm7+YedBFW8Hlsfuyy68gg8CLzGETpmLfVy5Y66SOyWTZEwsXfIuxulXhW3TtsU0oVTR++lM5V6fTmrJd6W5K63GMgPXk2Bsfm3ZmW07vt/VcaatL0usavsYsScH/qYzxTwSrntojTHZffTUm5nbzS1orPbzsHIxo+28qg4vVkmXXPayfQP/8ejbPhzwPCKE/tZShshYud9A4lr1kf3mHDcl/WPt2eaR/3b5lXxU4IpNx7YnvqiQj/kt84iO/Z4OT6bevS+EDjVYdOx5JoLXmnJYZH+Ens9z+lYnL/NsbG9cbMmrlZhKhxPHvIwhQpdHi2D2KxttXsJ9wPH+oeer2yG72uHevnO3otb5gc8VwwgsuiOSd0f/moowvaz0qSNiP8Vtt31+n2PLtTIFQA+NuOqm3FlXMkZIu32hHxaBmVbShQt3gbfppuH4838N3WdmMag0u87bZPlvlJ+bg/RW6MWdRce1q0TPZYe8oODUJJyvHo3Pswh3Fn1mXdLuQ4Qux7EYbZbFVaG68KcmmobC7dltjLs+LjEqi2yQ2hy5TpyFjghdKEYs75ja5VslC9XOQRCni7z52u2+r2GfFxqMoiXBPUSi1t22Y0dHf8OsREoCbM9HgWv8SbesbM2HBf1picjlhe5KkLMA21NiftguZOlW9Z0tRS77NdKWFrp9djWueF0tmnVQIpdx222EvqULi/RJKaLuCt1gI0gb1zQkq/4odB2bZBx7zPlF54WeOOnIJlO67JHb7kvYBPXzBlGXhf7DatSza4xZAC7qpqWdUn70XFbbArGNG3nnh5l0Wei2LmRc+TeNgHxfCdbWBgp9d92LQsY6U7ORUNtfWq9XMAPTF/+Fbp/5/WJ5/W+eu6ltuO3bnmfcy85004c33h/1HM3egHq3oe/KtvTaJPwOiT3fn/Bb4ZZl5r7jbFuzn8os6HJalSdZGbe2sNRxjevPlNyurNJueyIq4GqZ9wcFmusCkeanrzxkIc7m1yBgNsiIBcS1KLj3IPMq5rutxt+GGNWPi/LQdbd1IwfWu8f6O90m/Z0eKg4GzBWbfrE88g7y467us4/+/ysRC3r83rmw41efVkq7JYX+7NR931v1rsfni0rtwA4tr/lLIF+xqeklSdx7qxznW+SEbr9ryLjGPXybbkvENzg01yvbT23K7jXv2kznKz5lXs62hsCn2b9/rnVvc0T3bc3BRb9rfe7eo8smkl69ZhOnR7vspL1QZtkg4cPqtoWjjquX62qLfaH22WCzEsu9JS9yR5vM8I9q3V8nbVeJFtxEmR1mDrnKufV8VO93ol3Wes783DyzGOv1vd8bBnP953f3drzF99nLy8tpFzg7U6++bNHxNmUuqP1IaH8fF2x3I3FHzuaCljEnuL47Nvnl7z9GvsXoqkaMU+/ccTM4tD2HvEDkEAqyQi+eWyxiWHo8Ujlt7gu+rRmTARTxRzhCN9hmoeuVK5r4pq0pphnWHISJQhO6rfte/5BAUzHXdOHIkqw3NCT0xF+h27vv8Yl3nDYYr29UmBtigM+YUt1DQv/XX6EbbKadTnNZ9vOY6wZEPsJlBwdMCn4u1qdlp9f2I5ROsOli/aqJtpHIAo1Voqfcrhy8iNv0+2HJwYU11yWy3w/8jS4C+v1Ufbq16MbqNR/HGjGOBGObdTYIIXKQFvggmzt/EvCKW7Lo+7jje0Wrfi5e8WX2+76okQPQg5RO8P3T+2WgUNerzBfMHCqprXK09K9iLCmL7k7o5qGrVLDpevFzx4kO3ah/quIVS89Z467Fa9ehj0I/JXzcZl7krh+GIXTz4E9HRi822ocuCV2743MJkUsK/UMDj66X8RUJ+RaRQ8eoG4IuM3fdiUfp3qK/d6GjX3Ewa6qhexZd9+/LLEyMVPH08UbtV7IVngngjesOAP6D0AEQOgAgdABA6ACA0AEAoQMAQgcAhA4ACB0AoQMAQgcAhA4ACB0AEDoAIHQAQOgAgNABEDoAIHQAQOgAgNABAKEDAEIHAIQOAAgdAKEjdIDu838BBgAP9Pzi++BqOAAAAABJRU5ErkJggg==",BB="/assets/youtube-49ca55e1.png",FB="/assets/deezer-17be4fc1.png",UB="/assets/tidal-d3f361cb.png",$B="/assets/vpn-62bcb4e7.png",WB="/assets/wintv-4112ccf1.png",qB="/assets/applemusic-67f0cc24.png",HB="/assets/appletv-e2fd6c55.png",GB="/assets/iptv-a55016d0.png",KB="/assets/flujotv-4d1c58b0.png",QB="/assets/vikirakuten-116faf85.png",YB="/assets/pornhub-46f32d0d.png",XB="/assets/paramount-5ab87b8f.png",JB="/assets/licencias-80ba80ab.png",ZB="/assets/capcut-bc65a6c0.png",eF="/assets/duolingo-4d803f89.png",tF="/assets/buscapersonas-88e00efa.png",QI=b.createContext({theme:"dark",toggleTheme:()=>{}}),sF=({children:s})=>{const[t,r]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{r(i=>{const l=i==="dark"?"light":"dark";return localStorage.setItem("theme",l),l})};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(QI.Provider,{value:{theme:t,toggleTheme:a},children:e.jsx("div",{className:`min-h-screen font-inter transition-colors duration-300 ${t==="dark"?"bg-gradient-to-br from-gray-900 via-blue-950 to-gray-900 text-gray-100":"bg-gradient-to-br from-gray-100 via-blue-50 to-gray-100 text-gray-900"}`,children:s})})},Nr=[{src:NB,title:"Brooklyn Nine-Nine",description:"Comedia policial hilarante"},{src:wB,title:"Stranger Things",description:"Misterio y nostalgia ochentera"},{src:kB,title:"Breaking Bad",description:"A chemistry teacher's descent into the world of crime"},{src:IB,title:"Naruto",description:"Aventuras ninja épicas"},{src:PB,title:"Alice in Borderland",description:"Juego de supervivencia intenso"}],rF=[{name:"Netflix",logo:SB,route:"/netflix",color:"#E50914"},{name:"Spotify",logo:EB,route:"/spotify",color:"#1DB954"},{name:"Disney+",logo:CB,route:"/disney",color:"#1C4ED8"},{name:"Max",logo:TB,route:"/max",color:"#B5179E"},{name:"Prime Video",logo:_B,route:"/primevideo",color:"#00A8E1"},{name:"Vix",logo:DB,route:"/vix",color:"#FF5733"},{name:"Canva",logo:AB,route:"/canva",color:"#00C4B4"},{name:"ChatGPT",logo:RB,route:"/chatgpt",color:"#10A37F"},{name:"Crunchyroll",logo:MB,route:"/crunchyroll",color:"#F47521"},{name:"Redes Sociales",logo:LB,route:"/redessociales",color:"#3B5998"},{name:"Dgo",logo:OB,route:"/dgo",color:"#4CAF50"},{name:"Liga Max",logo:VB,route:"/ligamax",color:"#FFD700"},{name:"Movistar Play",logo:zB,route:"/movistarplay",color:"#00ADEF"},{name:"Youtube",logo:BB,route:"/youtube",color:"#FF0000"},{name:"Deezer",logo:FB,route:"/deezer",color:"#FEAA2D"},{name:"Tidal",logo:UB,route:"/tidal",color:"#00C7B7"},{name:"Vpn",logo:$B,route:"/vpn",color:"#4B0082"},{name:"Win Tv",logo:WB,route:"/wintv",color:"#4682B4"},{name:"Apple Music",logo:qB,route:"/applemusic",color:"#FA2C43"},{name:"Apple Tv",logo:HB,route:"/appletv",color:"#A3AAAE"},{name:"Iptv",logo:GB,route:"/iptv",color:"#8B008B"},{name:"Flujo Tv",logo:KB,route:"/flujotv",color:"#20B2AA"},{name:"Viki Rakuten",logo:QB,route:"/vikirakuten",color:"#D81B60"},{name:"Pornhub",logo:YB,route:"/pornhub",color:"#FFA500"},{name:"Paramount",logo:XB,route:"/paramount",color:"#0064D2"},{name:"Licencias",logo:JB,route:"/licencias",color:"#708090"},{name:"Cap figured",logo:ZB,route:"/capcut",color:"#00CED1"},{name:"Duolingo",logo:eF,route:"/duolingo",color:"#58CC02"},{name:"Busca Personas",logo:tF,route:"/buscapersonas",color:"#6A5ACD"}],aF=({isOpen:s,onClose:t,message:r})=>e.jsx(Cy,{children:s&&e.jsx(Ze.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs(Ze.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Zp,{className:"text-blue-500 dark:text-cyan-400 text-2xl"}),e.jsx("h3",{className:"text-xl font-bold dark:text-white text-gray-900",children:"Notificación"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:r}),e.jsx("button",{onClick:t,className:"w-full py-2 rounded-lg bg-blue-600 dark:bg-cyan-600 text-white hover:bg-blue-700 dark:hover:bg-cyan-700 transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-500",children:"Cerrar"})]})})}),nF=({isOpen:s,onClose:t,onSubmit:r,user:a})=>{const[i,l]=b.useState(0),[o,c]=b.useState(0),[d,x]=b.useState(""),[f,j]=b.useState(""),[w,S]=b.useState(""),g=async V=>{if(V.preventDefault(),!a){t();return}try{const E=Z(I,"surveys"),T=be(E,ve("userEmail","==",a.email));if(!(await gt(T)).empty){t();return}await r({websiteSatisfaction:i,providerSatisfaction:o,recommendedProvider:d,notRecommendedProvider:f,improvementSuggestions:w,timestamp:new Date,userEmail:a.email,username:a.name}),l(0),c(0),x(""),j(""),S(""),t()}catch(E){console.error("Error submitting survey:",E)}};return e.jsx(Cy,{children:s&&e.jsx(Ze.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs(Ze.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(e0,{className:"text-blue-500 dark:text-cyan-400 text-2xl"}),e.jsx("h3",{className:"text-xl font-bold dark:text-white text-gray-900",children:"Encuesta de Satisfacción"})]}),a?e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200 text-gray-700 mb-2",children:"¿Estás satisfecho con la página? (1-5)"}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(V=>e.jsx("button",{type:"button",onClick:()=>l(V),className:`w-10 h-10 rounded-full border-2 ${i===V?"bg-blue-600 dark:bg-cyan-600 text-white":"bg-gray-100 dark:bg-gray-800 dark:border-gray-700 border-gray-200"} flex items-center justify-center`,children:V},V))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200 text-gray-700 mb-2",children:"¿Estás satisfecho con los proveedores? (1-5)"}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(V=>e.jsx("button",{type:"button",onClick:()=>c(V),className:`w-10 h-10 rounded-full border-2 ${o===V?"bg-blue-600 dark:bg-cyan-600 text-white":"bg-gray-100 dark:bg-gray-800 dark:border-gray-700 border-gray-200"} flex items-center justify-center`,children:V},V))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200 text-gray-700 mb-2",children:"¿Qué proveedor recomiendas?"}),e.jsx("input",{type:"text",value:d,onChange:V=>x(V.target.value),className:"w-full py-2 px-3 rounded-lg bg-gray-100 dark:bg-gray-800 dark:text-gray-100 text-gray-900 focus:ring-2 focus:ring-blue-500 dark:focus:ring-cyan-500 focus:outline-none",placeholder:"Escribe el nombre del proveedor"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200 text-gray-700 mb-2",children:"¿Qué proveedor no recomiendas?"}),e.jsx("input",{type:"text",value:f,onChange:V=>j(V.target.value),className:"w-full py-2 px-3 rounded-lg bg-gray-100 dark:bg-gray-800 dark:text-gray-100 text-gray-900 focus:ring-2 focus:ring-blue-500 dark:focus:ring-cyan-500 focus:outline-none",placeholder:"Escribe el nombre del proveedor"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200 text-gray-700 mb-2",children:"¿Qué mejorarías de la página?"}),e.jsx("textarea",{value:w,onChange:V=>S(V.target.value),className:"w-full py-2 px-3 rounded-lg bg-gray-100 dark:bg-gray-800 dark:text-gray-100 text-gray-900 focus:ring-2 focus:ring-blue-500 dark:focus:ring-cyan-500 focus:outline-none",placeholder:"Escribe tus sugerencias",rows:"4"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:t,className:"w-full py-2 rounded-lg bg-gray-300 dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-400 dark:hover:bg-gray-600 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"w-full py-2 rounded-lg bg-blue-600 dark:bg-cyan-600 text-white hover:bg-blue-700 dark:hover:bg-cyan-700 transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-500",disabled:i===0||o===0,children:"Enviar"})]})]}):e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Por favor, inicia sesión para completar la encuesta."})]})})})},iF=()=>{const[s,t]=b.useState(0),[r,a]=b.useState(null),[i,l]=b.useState(0),[o,c]=b.useState("user"),[d,x]=b.useState(""),[f,j]=b.useState([]),[w,S]=b.useState({isOpen:!1,message:""}),[g,V]=b.useState(!1),[E,T]=b.useState(!1),[M,L]=b.useState(!1),H=Nt(),{theme:q,toggleTheme:Q}=b.useContext(QI);b.useEffect(()=>{const je=setInterval(()=>{t(Ae=>(Ae+1)%Nr.length)},5e3);return()=>clearInterval(je)},[]),b.useEffect(()=>(document.body.style.overflow=M?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[M]),b.useEffect(()=>{(async()=>{if(We.currentUser)try{const Ae=Z(I,"users"),Re=be(Ae,ve("email","==",We.currentUser.email)),ge=await gt(Re);if(!ge.empty){const xe=ge.docs[0].data();a({name:xe.username||"Usuario",email:We.currentUser.email}),l(xe.balance||0),c(xe.role||"user")}const ue=await Ye(z(I,"notifications","adminMessage"));if(ue.exists()){const xe=ue.data();S({isOpen:!0,message:xe.message||"Mensaje del administrador no disponible."})}}catch(Ae){console.error("Error al cargar datos:",Ae),S({isOpen:!0,message:"Hubo un error al cargar los datos. Por favor, intenta de nuevo."})}})()},[]);const O=async()=>{try{const je=await Ye(z(I,"notifications","adminMessage"));if(je.exists()){const Ae=je.data();S({isOpen:!0,message:Ae.message||"Mensaje del administrador no disponible."})}else S({isOpen:!0,message:"No hay notificaciones del administrador en este momento."})}catch(je){console.error("Error al cargar notificación:",je),S({isOpen:!0,message:"Error al cargar la notificación. Por favor, intenta de nuevo."})}},u=async je=>{try{await vi(Z(I,"surveys"),je),S({isOpen:!0,message:"¡Gracias por tu opinión! La encuesta se ha enviado correctamente."})}catch(Ae){console.error("Error al enviar la encuesta:",Ae),S({isOpen:!0,message:"Error al enviar la encuesta. Por favor, intenta de nuevo."})}},U=async()=>{try{await We.signOut(),a(null),H("/login")}catch(je){console.error("Error al cerrar sesión:",je),S({isOpen:!0,message:"Error al cerrar sesión. Por favor, intenta de nuevo."})}},F=()=>{H({user:"/dashboard/user",affiliate:"/dashboard/affiliate",provider:"/dashboard/provider",admin:"/dashboard/admin"}[o]||"/dashboard/user")},J=async je=>{if(je.preventDefault(),!d.trim()){j([]);return}try{const Ae=Z(I,"products"),Re=be(Ae,ve("name",">=",d.toLowerCase()),ve("name","<=",d.toLowerCase()+"")),ue=(await gt(Re)).docs.map(xe=>({id:xe.id,...xe.data()}));j(ue)}catch(Ae){console.error("Error al buscar productos:",Ae),S({isOpen:!0,message:"Error al realizar la búsqueda. Por favor, intenta de nuevo."}),j([])}},D=()=>{T(je=>!je)},$=()=>{L(je=>!je)};return e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(aF,{isOpen:w.isOpen,onClose:()=>S({...w,isOpen:!1}),message:w.message}),e.jsx(nF,{isOpen:g,onClose:()=>V(!1),onSubmit:u,user:r}),e.jsxs(Ze.header,{initial:{y:-100},animate:{y:0},transition:{type:"spring",stiffness:120},className:`fixed top-0 left-0 right-0 z-50 border-b dark:border-gray-800 border-gray-200 shadow-lg ${q==="dark"?"bg-gray-900":"bg-white"}`,children:[e.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(Ze.img,{whileHover:{scale:1.1},src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:`text-xl font-bold ${q==="dark"?"text-cyan-300":"text-blue-600"}`,children:"BlackStreaming"})]}),e.jsx("div",{className:"hidden lg:flex justify-center flex-1",children:e.jsxs(Ze.div,{className:"relative max-w-lg w-full",initial:{scale:.9},animate:{scale:1},children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full py-3 px-5 pr-12 rounded-full bg-gray-100 dark:bg-gray-800 dark:text-gray-100 text-gray-900 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 dark:focus:ring-cyan-500 focus:outline-none shadow-sm transition-all",value:d,onChange:je=>x(je.target.value)}),e.jsx(Ze.button,{whileHover:{scale:1.1},onClick:J,className:"absolute right-3 top-1/2 -translate-y-1/2 dark:text-cyan-400 text-blue-600","aria-label":"Buscar",children:e.jsx(t0,{size:20})})]})}),e.jsx(Ze.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:$,className:"lg:hidden p-2 rounded-full dark:text-cyan-300 text-blue-600 dark:hover:bg-gray-800 hover:bg-gray-100","aria-label":"Toggle menu",children:M?e.jsx(Vv,{size:22}):e.jsx(LT,{size:22})}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-3",children:[e.jsx(Ze.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:Q,className:"p-2 rounded-full dark:text-cyan-300 text-blue-600 dark:hover:bg-gray-800 hover:bg-gray-100","aria-label":"Cambiar tema",children:q==="dark"?e.jsx(fx,{size:22}):e.jsx(hx,{size:22})}),r?e.jsxs(e.Fragment,{children:[e.jsx(Ze.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:O,className:"p-2 rounded-full dark:bg-gray-800 bg-gray-100 dark:hover:bg-gray-700 hover:bg-gray-200","aria-label":"Ver notificaciones",children:e.jsx(Zp,{className:"dark:text-cyan-400 text-blue-600",size:22})}),e.jsx(Ze.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>V(!0),className:"p-2 rounded-full dark:bg-gray-800 bg-gray-100 dark:hover:bg-gray-700 hover:bg-gray-200","aria-label":"Abrir encuesta",children:e.jsx(e0,{className:"dark:text-cyan-400 text-blue-600",size:22})}),e.jsx(Ze.span,{className:"text-base font-medium dark:text-cyan-300 text-blue-700",initial:{opacity:0},animate:{opacity:1},children:r.name}),e.jsxs(Ze.span,{className:"text-base font-medium dark:bg-gray-800 bg-gray-100 dark:text-cyan-200 text-blue-800 px-4 py-1.5 rounded-full",whileHover:{scale:1.05},children:["S/ ",i.toFixed(2)]}),e.jsx(Ze.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:F,className:"p-2 rounded-full dark:bg-gray-800 bg-gray-100 dark:hover:bg-gray-700 hover:bg-gray-200","aria-label":"Panel de control",children:e.jsx(Lv,{className:"dark:text-cyan-400 text-blue-600",size:22})}),e.jsx(Ze.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:D,className:`p-2 rounded-full ${E?"bg-red-600 dark:bg-red-500 hover:bg-red-700 dark:hover:bg-red-600":"dark:bg-gray-800 bg-gray-100 dark:hover:bg-gray-700 hover:bg-gray-200"}`,"aria-label":E?"Desactivar modo live":"Activar modo live",children:e.jsx(Mv,{className:E?"text-white":"dark:text-cyan-400 text-blue-600",size:22})}),e.jsxs(Ze.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:U,className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white bg-gradient-to-r from-red-600 to-red-700 shadow-md hover:from-red-700 hover:to-red-800 transition-all duration-300",children:[e.jsx(Ov,{size:18}),e.jsx("span",{children:"Salir"})]})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Ze.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:()=>H("/login"),className:`inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 ${q==="dark"?"bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`,"aria-label":"Ingresar",children:[e.jsx(px,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsx(Ze.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:()=>H("/register"),className:`inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 ${q==="dark"?"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600":"bg-gradient-to-r from-blue-400 to-indigo-400 hover:from-blue-500 hover:to-indigo-500"}`,"aria-label":"Registrarse",children:e.jsx("span",{children:"Registrarse"})})]})]})]}),e.jsx(Cy,{children:M&&e.jsx(Ze.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:300,damping:30},className:"lg:hidden fixed top-0 left-0 h-full w-64 bg-white dark:bg-gray-900 z-50 shadow-2xl border-r dark:border-gray-700 border-gray-200",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 border-gray-200",children:[e.jsx("span",{className:"text-xl font-bold dark:text-cyan-300 text-blue-600",children:"Menú"}),e.jsx(Ze.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:$,className:"p-2 rounded-full dark:text-cyan-300 text-blue-600 dark:hover:bg-gray-800 hover:bg-gray-100","aria-label":"Cerrar menú",children:e.jsx(Vv,{size:22})})]}),e.jsxs("div",{className:"flex flex-col p-4 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full py-3 px-5 pr-12 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-cyan-500 focus:outline-none",value:d,onChange:je=>x(je.target.value)}),e.jsx(Ze.button,{whileHover:{scale:1.1},onClick:J,className:"absolute right-3 top-1/2 -translate-y-1/2 dark:text-cyan-400 text-blue-600","aria-label":"Buscar",children:e.jsx(t0,{size:20})})]}),r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-base font-medium dark:text-cyan-300 text-blue-600",children:r.name}),e.jsxs("span",{className:"text-base font-medium bg-gray-100 dark:bg-gray-800 dark:text-cyan-200 text-blue-800 px-4 py-1.5 rounded-full",children:["S/ ",i.toFixed(2)]})]}),e.jsxs(Ze.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{O(),$()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[e.jsx(Zp,{size:18}),e.jsx("span",{children:"Notificaciones"})]}),e.jsxs(Ze.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{V(!0),$()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[e.jsx(e0,{size:18}),e.jsx("span",{children:"Encuesta"})]}),e.jsxs(Ze.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{F(),$()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[e.jsx(Lv,{size:18}),e.jsx("span",{children:"Panel de control"})]}),e.jsxs(Ze.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{D(),$()},className:`flex items-center space-x-2 text-base text-left ${E?"text-red-500 dark:text-red-400":"dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600"}`,children:[e.jsx(Mv,{size:18}),e.jsx("span",{children:E?"Desactivar modo live":"Activar modo live"})]}),e.jsxs(Ze.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{U(),$()},className:"flex items-center space-x-2 text-base text-left text-red-500 dark:text-red-400 hover:text-red-600 dark:hover:text-red-300",children:[e.jsx(Ov,{size:18}),e.jsx("span",{children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ze.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{H("/login"),$()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[e.jsx(px,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsx(Ze.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{H("/register"),$()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:e.jsx("span",{children:"Registrarse"})})]}),e.jsxs(Ze.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Q(),$()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[q==="dark"?e.jsx(fx,{size:18}):e.jsx(hx,{size:18}),e.jsx("span",{children:"Cambiar tema"})]})]})]})})})]}),e.jsxs("main",{className:"flex-grow pt-24",children:[f.length>0&&e.jsxs(Ze.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"py-12 px-6 container mx-auto",children:[e.jsx("h2",{className:`text-3xl font-bold mb-6 ${q==="dark"?"text-white":"text-gray-900"}`,children:"Resultados de búsqueda"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map(je=>{var Ae;return e.jsxs(Ze.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.05,boxShadow:"0 10px 20px rgba(0,0,0,0.1)"},className:`p-6 rounded-lg shadow-md border-2 ${q==="dark"?"bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700":"bg-gradient-to-br from-white to-gray-100 border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-2 ${q==="dark"?"text-cyan-300":"text-blue-600"}`,children:je.name}),e.jsx("p",{className:`text-base line-clamp-2 mb-2 ${q==="dark"?"text-gray-300":"text-gray-600"}`,children:je.description}),e.jsxs("p",{className:`text-base font-medium mb-1 ${q==="dark"?"text-gray-200":"text-gray-700"}`,children:["Plataforma: ",je.platform]}),e.jsxs("p",{className:`text-base font-bold ${q==="dark"?"text-cyan-400":"text-blue-700"}`,children:["Precio: S/ ",(Ae=je.price)==null?void 0:Ae.toFixed(2)]})]},je.id)})})]}),d.trim()&&f.length===0&&e.jsx(Ze.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"py-12 px-6 container mx-auto text-center",children:e.jsxs("p",{className:`text-lg ${q==="dark"?"text-gray-300":"text-gray-600"}`,children:['No se encontraron productos para "',d,'".']})}),e.jsxs(Ze.section,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"py-8 px-6 text-center",children:[e.jsx("h1",{className:`text-4xl sm:text-5xl md:text-6xl font-extrabold tracking-tight ${q==="dark"?"text-white":"text-gray-900"} bg-clip-text bg-gradient-to-r dark:from-cyan-400 dark:to-blue-500 from-blue-600 to-indigo-600`,children:"Tus plataformas favoritas al instante"}),e.jsx("p",{className:`mt-4 text-lg sm:text-xl ${q==="dark"?"text-gray-300":"text-gray-600"} max-w-3xl mx-auto`,children:"Accede a todo tu entretenimiento y herramientas con BlackStreaming."})]}),e.jsxs("section",{className:"relative py-6 px-6 sm:px-8",children:[e.jsxs(Ze.div,{className:"flex justify-center items-center space-x-4 perspective-1000",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx(Ze.div,{className:"hidden lg:block w-48 h-64 rounded-2xl overflow-hidden shadow-xl transform -rotate-y-15",initial:{x:-100,opacity:0},animate:{x:0,opacity:.8},transition:{duration:.5},children:e.jsx("img",{src:Nr[(s-1+Nr.length)%Nr.length].src,alt:"Programa anterior",className:"w-full h-full object-cover scale-110"})}),e.jsxs(Ze.div,{className:"relative rounded-2xl overflow-hidden shadow-2xl dark:border-cyan-500/20 border-blue-200/20 border",initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:100},children:[e.jsx("img",{src:Nr[s].src,alt:"Programa destacado",className:"w-72 h-96 sm:w-96 sm:h-[28rem] object-cover"}),e.jsx("div",{className:`absolute inset-0 ${q==="dark"?"bg-gradient-to-t from-gray-900/80 to-transparent":"bg-gradient-to-t from-gray-900/50 to-transparent"}`}),e.jsxs(Ze.div,{className:"absolute bottom-0 w-full p-6",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${q==="dark"?"text-white":"text-gray-100"} drop-shadow-lg`,children:Nr[s].title}),e.jsx("p",{className:`text-sm ${q==="dark"?"text-gray-300":"text-gray-200"}`,children:Nr[s].description})]})]}),e.jsx(Ze.div,{className:"hidden lg:block w-48 h-64 rounded-2xl overflow-hidden shadow-xl transform rotate-y-15",initial:{x:100,opacity:0},animate:{x:0,opacity:.8},transition:{duration:.5},children:e.jsx("img",{src:Nr[(s+1)%Nr.length].src,alt:"Próximo programa",className:"w-full h-full object-cover scale-110"})}),e.jsx(Ze.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(je=>(je-1+Nr.length)%Nr.length),className:"absolute left-4 top-1/2 -translate-y-1/2 dark:bg-gray-900/60 bg-white/60 dark:hover:bg-cyan-500/60 hover:bg-blue-200/60 dark:border-cyan-500/20 border-blue-200/20 backdrop-blur-md p-3 rounded-full border","aria-label":"Programa anterior",children:e.jsx(OT,{className:"dark:text-cyan-300 text-blue-600 text-xl"})}),e.jsx(Ze.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(je=>(je+1)%Nr.length),className:"absolute right-4 top-1/2 -translate-y-1/2 dark:bg-gray-900/60 bg-white/60 dark:hover:bg-cyan-500/60 hover:bg-blue-200/60 dark:border-cyan-500/20 border-blue-200/20 backdrop-blur-md p-3 rounded-full border","aria-label":"Próximo programa",children:e.jsx(VT,{className:"dark:text-cyan-300 text-blue-600 text-xl"})})]}),e.jsx("div",{className:"flex justify-center space-x-2 mt-6",children:Nr.map((je,Ae)=>e.jsx(Ze.div,{whileHover:{scale:1.2},className:`w-2 h-2 rounded-full transition-colors ${Ae===s?"dark:bg-cyan-400 bg-blue-600":"dark:bg-gray-600 bg-gray-300"}`,"aria-label":`Ir a ${Ae+1}`},Ae))})]}),e.jsxs(Ze.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},className:"py-16 container mx-auto px-6",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx(Ze.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:`text-3xl md:text-4xl font-bold ${q==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Plataformas de Streaming"}),e.jsx(Ze.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:`${q==="dark"?"text-gray-300":"text-gray-600"} max-w-2xl mx-auto`,children:"Acceso a todas tus plataformas favoritas en un solo lugar."})]}),e.jsx(Ze.div,{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},children:rF.map(je=>e.jsx(Ze.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.05,boxShadow:"0 10px 20px rgba(0,0,0,0.2)"},className:"w-full h-32",children:e.jsxs(y,{to:je.route,className:`group relative flex items-center justify-center h-full rounded-lg shadow-lg transition-all duration-300 ${q==="dark"?"bg-gradient-to-br from-gray-800 to-gray-900":"bg-gradient-to-br from-white to-gray-100"} border-2`,style:{borderImage:`linear-gradient(to right, ${je.color}, transparent) 1`},"aria-label":`Ir a ${je.name}`,children:[e.jsxs("div",{className:"flex items-center space-x-4 p-4",children:[e.jsx(Ze.img,{whileHover:{scale:1.1},src:je.logo,alt:je.name,className:"w-20 h-20 object-contain",style:{transform:E?"scaleX(-1)":"scaleX(1)"}}),e.jsx("span",{className:`font-semibold text-center text-base ${q==="dark"?"text-gray-100":"text-gray-800"}`,children:je.name})]}),e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity duration-300",style:{backgroundColor:je.color}})]})},je.name))})]}),!r&&e.jsx(Ze.section,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"py-16 dark:bg-gradient-to-r dark:from-gray-900 dark:to-blue-950 bg-gradient-to-r from-blue-50 to-gray-100",children:e.jsxs("div",{className:"container mx-auto px-6 text-center",children:[e.jsx(Ze.h2,{initial:{scale:.9},animate:{scale:1},className:`text-2xl md:text-3xl font-bold ${q==="dark"?"text-white":"text-gray-900"} mb-4`,children:"¿Listo para adquirir?"}),e.jsx("p",{className:`${q==="dark"?"text-gray-300":"text-gray-600"} max-w-2xl mx-auto mb-6`,children:"Únete a miles de usuarios satisfechos accediendo a todas tus plataformas favoritas en un solo lugar."}),e.jsx(Ze.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H("/register"),className:`inline-flex items-center space-x-2 px-6 py-3 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 ${q==="dark"?"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600":"bg-gradient-to-r from-blue-400 to-indigo-400 hover:from-blue-500 hover:to-indigo-500"}`,children:e.jsx("span",{children:"Regístrate"})})]})})]}),e.jsx("footer",{className:"bg-gray-900 dark:bg-gray-900 bg-white dark:bg-gray-900 border-t dark:border-gray-800 border-gray-200 py-12",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-6 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:`text-base font-semibold ${q==="dark"?"text-cyan-300":"text-blue-600"}`,children:"BlackStreaming"})]}),e.jsxs("div",{className:`text-base ${q==="dark"?"text-gray-400":"text-gray-600"} text-center`,children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-base ${q==="dark"?"text-gray-400":"text-gray-600"} text-center`,children:"Desarrollado por Saiph"})]})})})]})},oF=()=>e.jsx(sF,{children:e.jsx(iF,{})});function Ut(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(s)}function He(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(s)}function YI(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(s)}function Go(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(s)}function nt(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(s)}function uu(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(s)}function $m(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(s)}function Bu(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(s)}function Ot(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(s)}function lF(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(s)}function tp(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(s)}function Es(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(s)}function sp(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(s)}function zy(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(s)}function XI(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(s)}function JI(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(s)}function Se(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(s)}function Be(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"},child:[]},{tag:"line",attr:{x1:"7",y1:"2",x2:"7",y2:"22"},child:[]},{tag:"line",attr:{x1:"17",y1:"2",x2:"17",y2:"22"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"2",y1:"7",x2:"7",y2:"7"},child:[]},{tag:"line",attr:{x1:"2",y1:"17",x2:"7",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"17",x2:"22",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"7",x2:"22",y2:"7"},child:[]}]})(s)}function it(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(s)}function Wm(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(s)}function Ue(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(s)}function ot(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(s)}function ZI(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(s)}function It(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(s)}function cF(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(s)}function Vt(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(s)}function Zr(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(s)}function $t(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(s)}function Ee(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 18V5l12-2v13"},child:[]},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"16",r:"3"},child:[]}]})(s)}function lt(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 19l7-7 3 3-7 7-3-3z"},child:[]},{tag:"path",attr:{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"},child:[]},{tag:"path",attr:{d:"M2 2l7.586 7.586"},child:[]},{tag:"circle",attr:{cx:"11",cy:"11",r:"2"},child:[]}]})(s)}function eP(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(s)}function ct(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polygon",attr:{points:"10 8 16 12 10 16 10 8"},child:[]}]})(s)}function Vw(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(s)}function tP(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(s)}function et(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(s)}function qm(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(s)}function Xe(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(s)}function Wt(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"},child:[]},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"},child:[]}]})(s)}function rp(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(s)}function dF(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(s)}function K0(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(s)}function te(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"15",rx:"2",ry:"2"},child:[]},{tag:"polyline",attr:{points:"17 2 12 7 7 2"},child:[]}]})(s)}function uF(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(s)}function qt(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(s)}function Ge(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(s)}function cc(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(s)}function Fe(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(s)}function pt(s){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(s)}const sP=b.createContext({theme:"dark",toggleTheme:()=>{}}),xF=({children:s})=>{const[t,r]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{console.log("Toggling theme from",t);const i=t==="dark"?"light":"dark";r(i),localStorage.setItem("theme",i),console.log("Theme set to",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(sP.Provider,{value:{theme:t,toggleTheme:a},children:s})},mF=()=>{const[s,t]=b.useState(""),[r,a]=b.useState(""),[i,l]=b.useState(null),[o,c]=b.useState(!1),d=Nt(),{theme:x,toggleTheme:f}=b.useContext(sP),j=async S=>{S.preventDefault(),l(null);try{const g=Z(I,"users"),V=be(g,ve("username","==",s)),E=await gt(V);if(E.empty){l("Nombre de usuario no encontrado.");return}const L=E.docs[0].data().email,q=(await HM(We,L,r)).user;d("/")}catch{l("Usuario o contraseña incorrectos.")}},w=()=>{l(null)};return e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${x==="dark"?"bg-gradient-to-b from-gray-900 via-blue-950 to-gray-900 text-gray-200":"bg-gradient-to-b from-gray-100 via-blue-50 to-gray-100 text-gray-900"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${x==="dark"?"border-gray-800/50 bg-gray-900/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-6 py-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex items-center justify-center lg:justify-start",children:e.jsxs(y,{to:"/",className:"flex items-center space-x-3",children:[e.jsx(Ze.img,{whileHover:{scale:1.1},src:jt,alt:"BlackStreaming",className:"h-12 w-auto transition-transform"}),e.jsx("span",{className:`text-2xl font-bold bg-gradient-to-r ${x==="dark"?"from-cyan-400/50 to-blue-600/50 text-cyan-400":"from-blue-500/50 to-indigo-500/50 text-blue-600"} bg-clip-text`,children:"BlackStreaming"})]})}),e.jsx(Ze.div,{animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,repeatType:"loop"},className:"text-xs font-semibold text-white bg-cyan-500/20 rounded-full px-3 py-1",children:"V 2.0"}),e.jsxs("div",{className:"flex items-center justify-center lg:justify-end space-x-3",children:[e.jsx(Ze.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:f,className:`p-2 rounded-full ${x==="dark"?"text-cyan-400 hover:bg-gray-700/50":"text-blue-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:x==="dark"?e.jsx(fx,{size:22}):e.jsx(hx,{size:22})}),e.jsxs(y,{to:"/login",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700",children:[e.jsx(px,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsxs(y,{to:"/register",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600",children:[e.jsx(p4,{size:18}),e.jsx("span",{children:"Registrarse"})]})]})]})}),e.jsx("main",{className:"flex-grow flex items-center justify-center p-6",children:e.jsxs("div",{className:`backdrop-blur-md rounded-2xl shadow-2xl p-12 w-full max-w-lg border-2 ${x==="dark"?"bg-gradient-to-br from-gray-800/60 to-gray-900/60 border-cyan-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-blue-500/20"}`,children:[e.jsx(Ze.div,{className:"flex justify-center mb-6",children:e.jsx(Ze.img,{whileHover:{scale:1.05},src:jt,alt:"BlackStreaming",className:"h-24 sm:h-32 w-auto transition-transform"})}),e.jsxs("h1",{className:`text-3xl font-bold mb-10 text-center ${x==="dark"?"text-white":"text-gray-900"}`,children:["Black",e.jsx("span",{className:x==="dark"?"text-cyan-400":"text-blue-600",children:"Streaming"})]}),e.jsx("p",{className:`text-sm text-center mb-10 ${x==="dark"?"text-gray-400":"text-gray-600"}`,children:"Bienvenido de nuevo. Inicia sesión para continuar."}),i&&e.jsxs("div",{className:"mb-6 p-3 bg-gradient-to-r from-red-900/80 to-red-800/80 border-l-4 border-red-500 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(He,{className:"mr-2 text-red-400"}),e.jsx("span",{className:"text-red-300",children:i})]}),e.jsx("button",{onClick:w,className:"text-red-400 hover:text-red-300",children:e.jsx(pt,{size:18})})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${x==="dark"?"text-gray-100":"text-gray-900"}`,children:"Nombre de Usuario"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{className:`absolute top-3 left-3 ${x==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",placeholder:"Tu nombre de usuario",value:s,onChange:S=>t(S.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${x==="dark"?"text-white":"text-gray-900"} border ${x==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${x==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${x==="dark"?"text-gray-100":"text-gray-900"}`,children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(ZI,{className:`absolute top-3 left-3 ${x==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:o?"text":"password",placeholder:"••••••••",value:r,onChange:S=>a(S.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${x==="dark"?"text-white":"text-gray-900"} border ${x==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${x==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,required:!0}),e.jsx("button",{type:"button",onClick:()=>c(!o),className:`absolute top-3 right-3 ${x==="dark"?"text-gray-400 hover:text-cyan-400":"text-gray-600 hover:text-blue-600"} transition-colors`,"aria-label":o?"Ocultar contraseña":"Mostrar contraseña",children:o?e.jsx(XI,{size:18}):e.jsx(JI,{size:18})})]})]}),e.jsx(Ze.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"w-full py-3 bg-gradient-to-r from-cyan-400 to-blue-600 hover:from-cyan-500 hover:to-blue-700 text-white font-medium rounded-xl shadow-lg transition-all duration-300",children:"Iniciar Sesión"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs(y,{to:"/register",className:`flex items-center justify-center transition-all text-lg ${x==="dark"?"text-gray-400 hover:text-cyan-400":"text-gray-600 hover:text-blue-600"}`,children:[e.jsx(YI,{className:"mr-1"})," ¿No tienes una cuenta? Regístrate"]})})]})}),e.jsx("footer",{className:`backdrop-blur-md border-t py-6 ${x==="dark"?"border-gray-800/50":"border-gray-300/50"}`,children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:`text-sm font-semibold ${x==="dark"?"text-cyan-400":"text-blue-600"}`,children:"BlackStreaming"})]}),e.jsxs("div",{className:`text-sm text-center ${x==="dark"?"text-gray-400":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-sm text-center ${x==="dark"?"text-gray-400":"text-gray-600"}`,children:"Desarrollado por Saiph"})]})})})]})},hF=()=>e.jsx(xF,{children:e.jsx(mF,{})}),pF=[{code:"+93",name:"Afghanistan",flag:"🇦🇫"},{code:"+355",name:"Albania",flag:"🇦🇱"},{code:"+213",name:"Algeria",flag:"🇩🇿"},{code:"+376",name:"Andorra",flag:"🇦🇩"},{code:"+244",name:"Angola",flag:"🇦🇴"},{code:"+1",name:"Antigua and Barbuda",flag:"🇦🇬"},{code:"+54",name:"Argentina",flag:"🇦🇷"},{code:"+374",name:"Armenia",flag:"🇦🇲"},{code:"+61",name:"Australia",flag:"🇦🇺"},{code:"+43",name:"Austria",flag:"🇦🇹"},{code:"+994",name:"Azerbaijan",flag:"🇦🇿"},{code:"+1",name:"Bahamas",flag:"🇧🇸"},{code:"+973",name:"Bahrain",flag:"🇧🇭"},{code:"+880",name:"Bangladesh",flag:"🇧🇩"},{code:"+1",name:"Barbados",flag:"🇧🇧"},{code:"+375",name:"Belarus",flag:"🇧🇾"},{code:"+32",name:"Belgium",flag:"🇧🇪"},{code:"+501",name:"Belize",flag:"🇧🇿"},{code:"+229",name:"Benin",flag:"🇧🇯"},{code:"+975",name:"Bhutan",flag:"🇧🇹"},{code:"+591",name:"Bolivia",flag:"🇧🇴"},{code:"+387",name:"Bosnia and Herzegovina",flag:"🇧🇦"},{code:"+267",name:"Botswana",flag:"🇧🇼"},{code:"+55",name:"Brazil",flag:"🇧🇷"},{code:"+673",name:"Brunei",flag:"🇧🇳"},{code:"+359",name:"Bulgaria",flag:"🇧🇬"},{code:"+226",name:"Burkina Faso",flag:"🇧🇫"},{code:"+257",name:"Burundi",flag:"🇧🇮"},{code:"+855",name:"Cambodia",flag:"🇰🇭"},{code:"+237",name:"Cameroon",flag:"🇨🇲"},{code:"+1",name:"Canada",flag:"🇨🇦"},{code:"+238",name:"Cape Verde",flag:"🇨🇻"},{code:"+236",name:"Central African Republic",flag:"🇨🇫"},{code:"+235",name:"Chad",flag:"🇹🇩"},{code:"+56",name:"Chile",flag:"🇨🇱"},{code:"+86",name:"China",flag:"🇨🇳"},{code:"+57",name:"Colombia",flag:"🇨🇴"},{code:"+269",name:"Comoros",flag:"🇰🇲"},{code:"+243",name:"Congo, Democratic Republic",flag:"🇨🇩"},{code:"+242",name:"Congo, Republic",flag:"🇨🇬"},{code:"+506",name:"Costa Rica",flag:"🇨🇷"},{code:"+385",name:"Croatia",flag:"🇭🇷"},{code:"+53",name:"Cuba",flag:"🇨🇺"},{code:"+357",name:"Cyprus",flag:"🇨🇾"},{code:"+420",name:"Czech Republic",flag:"🇨🇿"},{code:"+45",name:"Denmark",flag:"🇩🇰"},{code:"+253",name:"Djibouti",flag:"🇩🇯"},{code:"+1",name:"Dominica",flag:"🇩🇲"},{code:"+1",name:"Dominican Republic",flag:"🇩🇴"},{code:"+670",name:"East Timor",flag:"🇹🇱"},{code:"+593",name:"Ecuador",flag:"🇪🇨"},{code:"+20",name:"Egypt",flag:"🇪🇬"},{code:"+503",name:"El Salvador",flag:"🇸🇻"},{code:"+240",name:"Equatorial Guinea",flag:"🇬🇶"},{code:"+291",name:"Eritrea",flag:"🇪🇷"},{code:"+372",name:"Estonia",flag:"🇪🇪"},{code:"+251",name:"Ethiopia",flag:"🇪🇹"},{code:"+679",name:"Fiji",flag:"🇫🇯"},{code:"+358",name:"Finland",flag:"🇫🇮"},{code:"+33",name:"France",flag:"🇫🇷"},{code:"+241",name:"Gabon",flag:"🇬🇦"},{code:"+220",name:"Gambia",flag:"🇬🇲"},{code:"+995",name:"Georgia",flag:"🇬🇪"},{code:"+49",name:"Germany",flag:"🇩🇪"},{code:"+233",name:"Ghana",flag:"🇬🇭"},{code:"+30",name:"Greece",flag:"🇬🇷"},{code:"+1",name:"Grenada",flag:"🇬🇩"},{code:"+502",name:"Guatemala",flag:"🇬🇹"},{code:"+224",name:"Guinea",flag:"🇬🇳"},{code:"+245",name:"Guinea-Bissau",flag:"🇬🇼"},{code:"+592",name:"Guyana",flag:"🇬🇾"},{code:"+509",name:"Haiti",flag:"🇭🇹"},{code:"+504",name:"Honduras",flag:"🇭🇳"},{code:"+852",name:"Hong Kong",flag:"🇭🇰"},{code:"+36",name:"Hungary",flag:"🇭🇺"},{code:"+354",name:"Iceland",flag:"🇮🇸"},{code:"+91",name:"India",flag:"🇮🇳"},{code:"+62",name:"Indonesia",flag:"🇮🇩"},{code:"+98",name:"Iran",flag:"🇮🇷"},{code:"+964",name:"Iraq",flag:"🇮🇶"},{code:"+353",name:"Ireland",flag:"🇮🇪"},{code:"+972",name:"Israel",flag:"🇮🇱"},{code:"+39",name:"Italy",flag:"🇮🇹"},{code:"+1",name:"Jamaica",flag:"🇯🇲"},{code:"+81",name:"Japan",flag:"🇯🇵"},{code:"+962",name:"Jordan",flag:"🇯🇴"},{code:"+7",name:"Kazakhstan",flag:"🇰🇿"},{code:"+254",name:"Kenya",flag:"🇰🇪"},{code:"+686",name:"Kiribati",flag:"🇰🇮"},{code:"+965",name:"Kuwait",flag:"🇰🇼"},{code:"+996",name:"Kyrgyzstan",flag:"🇰🇬"},{code:"+856",name:"Laos",flag:"🇱🇦"},{code:"+371",name:"Latvia",flag:"🇱🇻"},{code:"+961",name:"Lebanon",flag:"🇱🇧"},{code:"+266",name:"Lesotho",flag:"🇱🇸"},{code:"+231",name:"Liberia",flag:"🇱🇷"},{code:"+218",name:"Libya",flag:"🇱🇾"},{code:"+423",name:"Liechtenstein",flag:"🇱🇮"},{code:"+370",name:"Lithuania",flag:"🇱🇹"},{code:"+352",name:"Luxembourg",flag:"🇱🇺"},{code:"+853",name:"Macau",flag:"🇲🇴"},{code:"+389",name:"Macedonia",flag:"🇲🇰"},{code:"+261",name:"Madagascar",flag:"🇲🇬"},{code:"+265",name:"Malawi",flag:"🇲🇼"},{code:"+60",name:"Malaysia",flag:"🇲🇾"},{code:"+960",name:"Maldives",flag:"🇲🇻"},{code:"+223",name:"Mali",flag:"🇲🇱"},{code:"+356",name:"Malta",flag:"🇲🇹"},{code:"+692",name:"Marshall Islands",flag:"🇲🇭"},{code:"+222",name:"Mauritania",flag:"🇲🇷"},{code:"+230",name:"Mauritius",flag:"🇲🇺"},{code:"+52",name:"Mexico",flag:"🇲🇽"},{code:"+691",name:"Micronesia",flag:"🇫🇲"},{code:"+373",name:"Moldova",flag:"🇲🇩"},{code:"+377",name:"Monaco",flag:"🇲🇨"},{code:"+976",name:"Mongolia",flag:"🇲🇳"},{code:"+382",name:"Montenegro",flag:"🇲🇪"},{code:"+212",name:"Morocco",flag:"🇲🇦"},{code:"+258",name:"Mozambique",flag:"🇲🇿"},{code:"+95",name:"Myanmar",flag:"🇲🇲"},{code:"+264",name:"Namibia",flag:"🇳🇦"},{code:"+674",name:"Nauru",flag:"🇳🇷"},{code:"+977",name:"Nepal",flag:"🇳🇵"},{code:"+31",name:"Netherlands",flag:"🇳🇱"},{code:"+64",name:"New Zealand",flag:"🇳🇿"},{code:"+505",name:"Nicaragua",flag:"🇳🇮"},{code:"+227",name:"Niger",flag:"🇳🇪"},{code:"+234",name:"Nigeria",flag:"🇳🇬"},{code:"+47",name:"Norway",flag:"🇳🇴"},{code:"+968",name:"Oman",flag:"🇴🇲"},{code:"+92",name:"Pakistan",flag:"🇵🇰"},{code:"+680",name:"Palau",flag:"🇵🇼"},{code:"+507",name:"Panama",flag:"🇵🇦"},{code:"+675",name:"Papua New Guinea",flag:"🇵🇬"},{code:"+595",name:"Paraguay",flag:"🇵🇾"},{code:"+51",name:"Peru",flag:"🇵🇪"},{code:"+63",name:"Philippines",flag:"🇵🇭"},{code:"+48",name:"Poland",flag:"🇵🇱"},{code:"+351",name:"Portugal",flag:"🇵🇹"},{code:"+974",name:"Qatar",flag:"🇶🇦"},{code:"+40",name:"Romania",flag:"🇷🇴"},{code:"+7",name:"Russia",flag:"🇷🇺"},{code:"+250",name:"Rwanda",flag:"🇷🇼"},{code:"+1",name:"Saint Kitts and Nevis",flag:"🇰🇳"},{code:"+1",name:"Saint Lucia",flag:"🇱🇨"},{code:"+1",name:"Saint Vincent and the Grenadines",flag:"🇻🇨"},{code:"+685",name:"Samoa",flag:"🇼🇸"},{code:"+378",name:"San Marino",flag:"🇸🇲"},{code:"+966",name:"Saudi Arabia",flag:"🇸🇦"},{code:"+221",name:"Senegal",flag:"🇸🇳"},{code:"+381",name:"Serbia",flag:"🇷🇸"},{code:"+248",name:"Seychelles",flag:"🇸🇨"},{code:"+232",name:"Sierra Leone",flag:"🇸🇱"},{code:"+65",name:"Singapore",flag:"🇸🇬"},{code:"+421",name:"Slovakia",flag:"🇸🇰"},{code:"+386",name:"Slovenia",flag:"🇸🇮"},{code:"+677",name:"Solomon Islands",flag:"🇸🇧"},{code:"+252",name:"Somalia",flag:"🇸🇴"},{code:"+27",name:"South Africa",flag:"🇿🇦"},{code:"+82",name:"South Korea",flag:"🇰🇷"},{code:"+211",name:"South Sudan",flag:"🇸🇸"},{code:"+34",name:"Spain",flag:"🇪🇸"},{code:"+94",name:"Sri Lanka",flag:"🇱🇰"},{code:"+249",name:"Sudan",flag:"🇸🇩"},{code:"+597",name:"Suriname",flag:"🇸🇷"},{code:"+268",name:"Swaziland",flag:"🇸🇿"},{code:"+46",name:"Sweden",flag:"🇸🇪"},{code:"+41",name:"Switzerland",flag:"🇨🇭"},{code:"+963",name:"Syria",flag:"🇸🇾"},{code:"+886",name:"Taiwan",flag:"🇹🇼"},{code:"+992",name:"Tajikistan",flag:"🇹🇯"},{code:"+255",name:"Tanzania",flag:"🇹🇿"},{code:"+66",name:"Thailand",flag:"🇹🇭"},{code:"+228",name:"Togo",flag:"🇹🇬"},{code:"+676",name:"Tonga",flag:"🇹🇴"},{code:"+1",name:"Trinidad and Tobago",flag:"🇹🇹"},{code:"+216",name:"Tunisia",flag:"🇹🇳"},{code:"+90",name:"Turkey",flag:"🇹🇷"},{code:"+993",name:"Turkmenistan",flag:"🇹🇲"},{code:"+688",name:"Tuvalu",flag:"🇹🇻"},{code:"+256",name:"Uganda",flag:"🇺🇬"},{code:"+380",name:"Ukraine",flag:"🇺🇦"},{code:"+971",name:"United Arab Emirates",flag:"🇦🇪"},{code:"+44",name:"United Kingdom",flag:"🇬🇧"},{code:"+1",name:"United States",flag:"🇺🇸"},{code:"+598",name:"Uruguay",flag:"🇺🇾"},{code:"+998",name:"Uzbekistan",flag:"🇺🇿"},{code:"+678",name:"Vanuatu",flag:"🇻🇺"},{code:"+58",name:"Venezuela",flag:"🇻🇪"},{code:"+84",name:"Vietnam",flag:"🇻🇳"},{code:"+967",name:"Yemen",flag:"🇾🇪"},{code:"+260",name:"Zambia",flag:"🇿🇲"},{code:"+263",name:"Zimbabwe",flag:"🇿🇼"}],rP=b.createContext({theme:"dark",toggleTheme:()=>{}}),fF=({children:s})=>{const[t,r]=b.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";r(i),localStorage.setItem("theme",i)};return b.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(rP.Provider,{value:{theme:t,toggleTheme:a},children:s})},gF=({isOpen:s,message:t,type:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:`bg-gray-800/90 backdrop-blur-md p-6 rounded-2xl shadow-2xl max-w-sm w-full border transform transition-all duration-300 ${r==="success"?"border-green-500 scale-100":"border-red-500 scale-100"}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[r==="success"?e.jsx($m,{className:"text-green-400 text-2xl mr-2"}):e.jsx(He,{className:"text-red-400 text-2xl mr-2"}),e.jsx("h3",{className:`text-lg font-bold ${r==="success"?"text-green-400":"text-red-400"}`,children:r==="success"?"Éxito":"Error"})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("button",{onClick:a,className:`w-full py-2 rounded-xl font-medium transition-all duration-300 ${r==="success"?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"}`,children:"Cerrar"})]})}):null,yF=()=>{const[s,t]=b.useState(""),[r,a]=b.useState(""),[i,l]=b.useState(""),[o,c]=b.useState(""),[d,x]=b.useState("+51"),[f,j]=b.useState("user"),[w,S]=b.useState(""),[g,V]=b.useState(!1),[E,T]=b.useState({isOpen:!1,message:"",type:"success"}),[M,L]=b.useState(!1),H=Nt(),{theme:q,toggleTheme:Q}=b.useContext(rP),O=async u=>{u.preventDefault(),T({isOpen:!1,message:"",type:"success"}),V(!0);try{if(!s||s.length<3)throw new Error("El nombre de usuario debe tener al menos 3 caracteres.");if(!r||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))throw new Error("Por favor, ingresa un correo electrónico válido.");if(!i||i.length<6)throw new Error("La contraseña debe tener al menos 6 caracteres.");if(!o||!/^\d{7,15}$/.test(o))throw new Error("Por favor, ingresa un número de teléfono válido (7-15 dígitos).");if(!["user","affiliate","provider"].includes(f))throw new Error("Rol no válido.");await Vr(z(I,"pendingRegistrations",r),{username:s,email:r,password:i,phone:`${d}${o}`,role:f,status:"pending",referrerCode:w||null,createdAt:new Date().toISOString()}),T({isOpen:!0,message:"Tu solicitud de registro ha sido enviada y está pendiente de aprobación. Comunicate con +51 931 757 531",type:"success"}),setTimeout(()=>{H("/login")},2e3)}catch(U){console.error("Error al registrar la solicitud:",U.message),T({isOpen:!0,message:U.message||"Error al enviar la solicitud de registro. Por favor, inténtalo de nuevo.",type:"error"})}finally{V(!1)}};return e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${q==="dark"?"bg-gradient-to-b from-gray-900 via-blue-950 to-gray-900 text-gray-200":"bg-gradient-to-b from-gray-100 via-blue-50 to-gray-100 text-gray-900"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${q==="dark"?"border-gray-800/50 bg-gray-900/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-6 py-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex items-center justify-center lg:justify-start",children:e.jsxs(y,{to:"/",className:"flex items-center space-x-3",children:[e.jsx(Ze.img,{whileHover:{scale:1.1},src:jt,alt:"BlackStreaming",className:"h-12 w-auto transition-transform"}),e.jsx("span",{className:`text-2xl font-bold bg-gradient-to-r ${q==="dark"?"from-cyan-400/50 to-blue-600/50 text-cyan-400":"from-blue-500/50 to-indigo-500/50 text-blue-600"} bg-clip-text`,children:"BlackStreaming"})]})}),e.jsx(Ze.div,{animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,repeatType:"loop"},className:"text-xs font-semibold text-white bg-cyan-500/20 rounded-full px-3 py-1",children:"V 2.0"}),e.jsxs("div",{className:"flex items-center justify-center lg:justify-end space-x-3",children:[e.jsx(Ze.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:Q,className:`p-2 rounded-full ${q==="dark"?"text-cyan-400 hover:bg-gray-700/50":"text-blue-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:q==="dark"?e.jsx(fx,{size:22}):e.jsx(hx,{size:22})}),e.jsxs(y,{to:"/login",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700",children:[e.jsx(px,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsxs(y,{to:"/register",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600",children:[e.jsx(p4,{size:18}),e.jsx("span",{children:"Registrarse"})]})]})]})}),e.jsx("main",{className:"flex-grow flex items-center justify-center p-6",children:e.jsxs("div",{className:`backdrop-blur-md rounded-2xl shadow-2xl p-12 w-full max-w-lg border-2 ${q==="dark"?"bg-gradient-to-br from-gray-800/60 to-gray-900/60 border-cyan-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-blue-500/20"}`,children:[e.jsx(Ze.div,{className:"flex justify-center mb-6",children:e.jsx(Ze.img,{whileHover:{scale:1.05},src:jt,alt:"BlackStreaming",className:"h-24 sm:h-32 w-auto transition-transform"})}),e.jsxs("h1",{className:`text-3xl font-bold mb-10 text-center ${q==="dark"?"text-white":"text-gray-900"}`,children:["Black",e.jsx("span",{className:q==="dark"?"text-cyan-400":"text-blue-600",children:"Streaming"})]}),e.jsx("p",{className:`text-sm text-center mb-10 ${q==="dark"?"text-gray-400":"text-gray-600"}`,children:"Regístrate para acceder al sistema."}),e.jsxs("form",{onSubmit:O,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${q==="dark"?"text-gray-100":"text-gray-900"}`,children:"Nombre de Usuario"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{className:`absolute top-3 left-3 ${q==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:s,onChange:u=>t(u.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${q==="dark"?"text-white":"text-gray-900"} border ${q==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${q==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Elige un nombre de usuario",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${q==="dark"?"text-gray-100":"text-gray-900"}`,children:"Correo Electrónico"}),e.jsxs("div",{className:"relative",children:[e.jsx(cF,{className:`absolute top-3 left-3 ${q==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"email",value:r,onChange:u=>a(u.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${q==="dark"?"text-white":"text-gray-900"} border ${q==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${q==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu correo electrónico",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${q==="dark"?"text-gray-100":"text-gray-900"}`,children:"Número de Teléfono"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"relative flex-shrink-0 w-48",children:[e.jsx("select",{value:d,onChange:u=>x(u.target.value),className:`w-full px-4 py-2.5 rounded-xl ${q==="dark"?"bg-gray-700/50 text-white":"bg-gray-200/50 text-gray-900"} border ${q==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 transition-all appearance-none`,children:pF.map(u=>e.jsxs("option",{value:u.code,children:[u.flag," ",u.name," (",u.code,")"]},u.code+u.name))}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:`w-4 h-4 ${q==="dark"?"text-gray-400":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(eP,{className:`absolute top-3 left-3 ${q==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"tel",value:o,onChange:u=>c(u.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${q==="dark"?"text-white":"text-gray-900"} border ${q==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${q==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu número de teléfono",required:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${q==="dark"?"text-gray-100":"text-gray-900"}`,children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(ZI,{className:`absolute top-3 left-3 ${q==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:M?"text":"password",value:i,onChange:u=>l(u.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${q==="dark"?"text-white":"text-gray-900"} border ${q==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${q==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Elige una contraseña",required:!0}),e.jsx("button",{type:"button",onClick:()=>L(!M),className:`absolute top-3 right-3 ${q==="dark"?"text-gray-400 hover:text-cyan-400":"text-gray-600 hover:text-blue-600"} transition-colors`,"aria-label":M?"Ocultar contraseña":"Mostrar contraseña",children:M?e.jsx(XI,{size:18}):e.jsx(JI,{size:18})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${q==="dark"?"text-gray-100":"text-gray-900"}`,children:"Rol"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:f,onChange:u=>j(u.target.value),className:`w-full px-4 py-2.5 rounded-xl ${q==="dark"?"bg-gray-700/50":"bg-gray-200/50"} ${q==="dark"?"text-white":"text-gray-900"} border ${q==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 transition-all appearance-none`,children:e.jsx("option",{value:"user",children:"Usuario"})}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:`w-4 h-4 ${q==="dark"?"text-gray-400":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${q==="dark"?"text-gray-100":"text-gray-900"}`,children:"Código de Referido (opcional)"}),e.jsx("input",{type:"text",value:w,onChange:u=>S(u.target.value),className:`w-full pl-4 pr-4 py-2.5 rounded-xl bg-transparent ${q==="dark"?"text-white":"text-gray-900"} border ${q==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${q==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Ingresa un código de referido (si tienes)"})]}),e.jsx(Ze.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:g,className:`w-full py-3 rounded-xl font-medium transition-all duration-300 ${g?"bg-gray-600 text-gray-400 cursor-not-allowed":q==="dark"?"bg-gradient-to-r from-cyan-400 to-blue-600 hover:from-cyan-500 hover:to-blue-700 text-white":"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white"}`,children:g?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white mr-2",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})]}),"Registrando..."]}):"Registrarse"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs(y,{to:"/login",className:`flex items-center justify-center transition-all text-lg ${q==="dark"?"text-gray-400 hover:text-cyan-400":"text-gray-600 hover:text-blue-600"}`,children:[e.jsx(YI,{className:"mr-1"})," ¿Ya tienes una cuenta? Inicia sesión"]})})]})}),e.jsx("footer",{className:`backdrop-blur-md border-t py-6 ${q==="dark"?"border-gray-800/50":"border-gray-300/50"}`,children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:`text-sm font-semibold ${q==="dark"?"text-cyan-400":"text-blue-600"}`,children:"BlackStreaming"})]}),e.jsxs("div",{className:`text-sm text-center ${q==="dark"?"text-gray-400":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-sm text-center ${q==="dark"?"text-gray-400":"text-gray-600"}`,children:"Desarrollado por Saiph"})]})})}),e.jsx(gF,{isOpen:E.isOpen,message:E.message,type:E.type,onClose:()=>T({isOpen:!1,message:"",type:"success"})})]})},bF=()=>e.jsx(fF,{children:e.jsx(yF,{})}),vF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(pt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,jF=({isOpen:s,user:t,onClose:r,onSave:a})=>{const[i,l]=b.useState((t==null?void 0:t.username)||""),[o,c]=b.useState(""),d=x=>{if(x.preventDefault(),c(""),!i.trim()){c("El nombre de usuario no puede estar vacío.");return}a(t.id,i.trim())};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Perfil"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(pt,{size:20})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:x=>l(x.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},NF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState(""),[i,l]=b.useState([]),[o,c]=b.useState({username:"",phone:""}),[d,x]=b.useState(""),[f,j]=b.useState(0),[w,S]=b.useState(null),[g,V]=b.useState("inicio"),[E,T]=b.useState([]),[M,L]=b.useState({}),[H,q]=b.useState([]),[Q,O]=b.useState(!0),[u,U]=b.useState({}),[F,J]=b.useState(null),[D,$]=b.useState({isOpen:!1,message:"",title:""}),[je,Ae]=b.useState({isOpen:!1,user:null}),[Re,ge]=b.useState(""),ue=Nt(),xe=(A,C)=>{$({isOpen:!0,title:A,message:C})},pe=()=>{$({isOpen:!1,message:"",title:""})},Le=A=>{Ae({isOpen:!0,user:A})},De=()=>{Ae({isOpen:!1,user:null})},n=async(A,C)=>{try{U(p=>({...p,profile:!0}));const v=z(I,"users",A);await rs(v,{username:C,updatedAt:he()}),c(p=>({...p,username:C})),xe("Éxito","Perfil actualizado exitosamente"),De()}catch(v){console.error("Error al actualizar perfil:",v),xe("Error",v.message||"Error al actualizar el perfil")}finally{U(v=>({...v,profile:!1}))}};b.useEffect(()=>{(async()=>{try{console.log("Fetching products...");const C=be(Z(I,"products")),v=await gt(C);console.log("Products fetched:",v.docs.length);const p={};v.forEach(B=>{p[B.id]=B.data()}),L(p)}catch(C){console.error("Error fetching products:",C),J("Error al cargar productos: "+C.message)}})()},[]),b.useEffect(()=>{const A=Te(z(I,"notifications","adminMessage"),C=>{if(C.exists()){const v=C.data(),p="user";v.roles&&v.roles.includes(p)?q([{id:C.id,...v}]):q([])}else q([])},C=>{console.error("Error in notifications listener:",C),J("Error al cargar notificaciones: "+C.message)});return()=>A()},[]);const N=async A=>{try{U(le=>({...le,[`renew_${A.id}`]:!0}));const C=parseFloat(A.renewalPrice)||parseFloat(A.price)||0;if(f<C){xe("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const v=parseInt(A.durationDays)||30,p=Qt.now(),B=p.toDate(),ae=B,se=new Date(ae.getTime()+v*24*60*60*1e3),ne=Qt.fromDate(se),oe=z(I,"sales",A.id);await rs(oe,{startDate:p,endDate:ne,renewedAt:p,status:"completed",updatedAt:he()});const re=z(I,"users",w);await rs(re,{balance:f-C}),j(le=>le-C),T(le=>le.map(W=>W.id===A.id?{...W,startDate:ae,endDate:se,renewedAt:B,status:"completed",daysRemaining:v,totalDays:v,timeElapsedPercentage:0}:W)),xe("Éxito",`¡Pedido renovado exitosamente! Nueva fecha de vencimiento: ${ie(se)}`)}catch(C){console.error("Error al renovar el pedido:",C),xe("Error","Error al renovar el pedido: "+C.message)}finally{U(C=>({...C,[`renew_${A.id}`]:!1}))}},h=async()=>{try{await zc(We),ue("/")}catch(A){console.error("Error al cerrar sesión:",A),xe("Error",A.message||"Error al cerrar sesión")}};b.useEffect(()=>{const A=Dt(We,C=>{C?(S(C.uid),x(C.email||"No especificado"),O(!1)):ue("/login")});return()=>A()},[ue]),b.useEffect(()=>{if(!w)return;const A=z(I,"users",w),C=Te(A,v=>{if(v.exists()){const p=v.data();c({username:p.username||"Usuario",phone:p.phone||""}),x(p.email||"No especificado"),j(Number(p.balance)||0)}else J("Usuario no encontrado")},v=>{console.error("Error in user data listener:",v),J("Error al cargar datos del usuario: "+v.message)});return()=>C()},[w]),b.useEffect(()=>{if(!w)return;const A=be(Z(I,"sales"),ve("customerId","==",w)),C=Te(A,p=>{if(p.empty){T([]),O(!1);return}const B=p.docs.map(ae=>{var rt,Tt,St,ts,_s,wt,yt,ss,us,js,tr;const se=ae.data(),oe=((Tt=(rt=se.saleDate)==null?void 0:rt.toDate)==null?void 0:Tt.call(rt))||((ts=(St=se.createdAt)==null?void 0:St.toDate)==null?void 0:ts.call(St))||new Date;let re=(wt=(_s=se.startDate)==null?void 0:_s.toDate)==null?void 0:wt.call(_s),le=re||oe,W=!1;re||(W=!0);const Y=se.durationDays||30;let me;se.endDate?me=se.endDate.toDate?se.endDate.toDate():new Date(se.endDate):(me=new Date(le.getTime()+Y*24*60*60*1e3),W=!0),W&&rs(z(I,"sales",ae.id),{startDate:re||Qt.fromDate(oe),endDate:Qt.fromDate(me),durationDays:Y}).catch(sr=>{console.error("Error al actualizar startDate/endDate en Firestore:",sr)});const we=new Date,_e=me.getTime()-le.getTime(),fe=we.getTime()-le.getTime(),ze=me.getTime()-we.getTime(),Ie=Math.ceil(_e/(1e3*60*60*24)),Oe=Math.max(0,Math.ceil(ze/(1e3*60*60*24))),X=Math.ceil(fe/(1e3*60*60*24)),ce=Ie>0?X/Ie*100:100,Ne=((yt=M[se.providerId])==null?void 0:yt.terms)||"No se especificaron términos y condiciones.";return{id:ae.id,productName:se.productName||"Producto sin nombre",category:se.type||"netflix",price:parseFloat(se.price)||0,renewalPrice:parseFloat(se.renewalPrice)||0,provider:se.provider||"No especificado",providerId:se.providerId||"",providerPhone:se.providerPhone||se.providerWhatsapp||"51999999999",status:se.status||"completed",saleDate:oe,startDate:le,endDate:me,durationDays:Y,daysRemaining:Oe,totalDays:Ie,timeElapsedPercentage:ce,account:{email:((ss=se.accountDetails)==null?void 0:ss.email)||"No especificado",password:((us=se.accountDetails)==null?void 0:us.password)||"No especificado",profile:((js=se.accountDetails)==null?void 0:js.profile)||"No especificado",pin:((tr=se.accountDetails)==null?void 0:tr.pin)||"No especificado"},client:{customerName:se.customerName||"Cliente desconocido",email:se.customerEmail||"No especificado",phone:se.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BS-${ae.id.slice(0,8).toUpperCase()}`,termsAndConditions:Ne,renewable:se.renewable!==void 0?se.renewable:!0}});T(B),O(!1)},p=>{console.error("Error al obtener pedidos:",p),J("Error al cargar pedidos: "+p.message),O(!1)}),v=setInterval(()=>{T(p=>p.map(B=>{const ae=new Date,se=new Date(B.endDate).getTime()-new Date(B.startDate).getTime(),ne=ae.getTime()-new Date(B.startDate).getTime(),oe=new Date(B.endDate).getTime()-ae.getTime(),re=Math.ceil(se/(1e3*60*60*24)),le=Math.max(0,Math.ceil(oe/(1e3*60*60*24))),W=Math.ceil(ne/(1e3*60*60*24)),Y=re>0?W/re*100:100;return{...B,daysRemaining:le,totalDays:re,timeElapsedPercentage:Y}}))},6e4);return()=>{C(),clearInterval(v)}},[w,M]),b.useEffect(()=>{if(!w)return;const A=be(Z(I,"pendingTopUps"),ve("userId","==",w)),C=Te(A,v=>{const p=v.docs.map(B=>{var ae,se;return{id:B.id,...B.data(),date:((se=(ae=B.data().requestedAt)==null?void 0:ae.toDate)==null?void 0:se.call(ae))||new Date,amount:parseFloat(B.data().amount)||0}});l(p)},v=>{console.error("Error al obtener recargas:",v),J("Error al cargar recargas: "+v.message)});return()=>C()},[w]);const _=async()=>{try{if(U(C=>({...C,topUp:!0})),!r||isNaN(r)){xe("Error","Ingrese un monto válido");return}const A=parseFloat(r);if(A<10){xe("Error","El monto mínimo de recarga es S/ 10.00");return}await vi(Z(I,"pendingTopUps"),{userId:w,username:o.username,amount:A,status:"pendiente",requestedAt:he()}),a(""),xe("Éxito","Solicitud de recarga enviada correctamente")}catch(A){console.error("Error al solicitar recarga:",A),xe("Error",A.message||"Error al enviar solicitud de recarga")}finally{U(A=>({...A,topUp:!1}))}},G=async A=>{A.preventDefault();try{U(se=>({...se,password:!0}));const C=A.target.password.value,v=A.target.phone.value,p=We.currentUser,B=z(I,"users",w),ae={};if(C){if(C.length<6){xe("Error","La contraseña debe tener al menos 6 caracteres");return}await Zg(p,C),ae.updatedAt=he()}v&&(ae.phone=v,ae.updatedAt=he()),Object.keys(ae).length>0&&await rs(B,ae),c(se=>({...se,phone:v||se.phone})),xe("Éxito","Cambios guardados correctamente"),A.target.reset()}catch(C){console.error("Error al actualizar los datos:",C),xe("Error",C.message||"Error al guardar los cambios")}finally{U(C=>({...C,password:!1}))}},ie=A=>{if(!A)return"No especificada";try{const C=A instanceof Date?A:new Date(A);return isNaN(C.getTime())?"Fecha inválida":C.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},k=()=>{if(Q)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(F)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(He,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:F}),e.jsx("button",{onClick:()=>J(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(g){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:o.username})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o.username})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Zr,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:d})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(eP,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o.phone||"No especificado"})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Saldo disponible"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",f.toFixed(2)]}),e.jsx("button",{onClick:()=>V("recargar"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Recargar"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Pedidos activos"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:E.filter(A=>new Date(A.endDate)>new Date&&A.status==="completed").length}),e.jsx("button",{onClick:()=>V("pedidos"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Ver pedidos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),E.length>0?E.slice(0,3).map(A=>{const C=new Date(A.endDate)>new Date&&A.status==="completed",v=A.status==="pending";return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium text-white",children:A.productName}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${A.status==="pending"?"bg-yellow-900/80 text-yellow-400":C?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:v?"A pedido":C?"Activo":"Expirado"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",ie(A.endDate)]})]},A.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),E.length>3&&e.jsx("button",{onClick:()=>V("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Notificaciones"}),H.length>0?H.map(A=>{var C,v;return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsx("p",{className:"text-gray-300",children:A.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:ie(((v=(C=A.updatedAt)==null?void 0:C.toDate)==null?void 0:v.call(C))||new Date)})]},A.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay notificaciones"})]})]})]});case"notificaciones":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Notificaciones"}),H.length>0?e.jsx("div",{className:"space-y-4",children:H.map(A=>{var C,v;return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("p",{className:"text-gray-300",children:A.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:ie(((v=(C=A.updatedAt)==null?void 0:C.toDate)==null?void 0:v.call(C))||new Date)})]},A.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Go,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-400",children:"No tienes mensajes nuevos"})]})]});case"recargar":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),e.jsx("input",{type:"number",value:r,onChange:A=>a(A.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all duration-300 placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),e.jsx("button",{onClick:_,disabled:u.topUp||!r||parseFloat(r)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${r&&parseFloat(r)>=10&&!u.topUp?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:u.topUp?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"})]}),e.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50 max-w-md mx-auto",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Es,{className:"mr-2"})," ¿Cómo realizar tu recarga?"]}),e.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",e.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al número:"]}),e.jsx("p",{className:"text-xl font-bold text-white mb-2",children:"📱 931757531"}),e.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contáctanos vía WhatsApp al mismo número para confirmar tu recarga."}),e.jsxs("a",{href:`https://wa.me/51931757531?text=${encodeURIComponent("Hola 😊, he realizado una recarga a través de Yape. Por favor, confirma mi pago.")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[e.jsx(Zr,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Historial de recargas"}),i.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:i.map(A=>e.jsxs("tr",{className:"hover:bg-gray-600/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",A.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${A.status==="aprobado"?"bg-green-900/80 text-green-400":A.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:A.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:ie(A.date)})]},A.id))})]})}):e.jsx("p",{className:"text-gray-400 py-8",children:"No hay recargas registradas"})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all duration-300 text-sm placeholder-gray-500",value:Re,onChange:A=>ge(A.target.value)}),e.jsx(et,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),E.length>0?E.filter(A=>(A.productName||"").toLowerCase().includes(Re.toLowerCase())||(A.orderId||"").toLowerCase().includes(Re.toLowerCase())).map(A=>{var Y,me,we,_e,fe,ze,Ie,Oe,X,ce,Ne,rt;const C=parseFloat(A.price)||0,v=parseFloat(A.renewalPrice)||0,p=new Date(A.endDate)>new Date&&A.status==="completed",B=A.status==="pending",ae=A.daysRemaining||0,se=A.timeElapsedPercentage||0;let ne="bg-green-400";se>70&&se<=90?ne="bg-yellow-400":se>90&&(ne="bg-red-400");const oe=B?e.jsx(Ot,{className:"text-yellow-400"}):p?e.jsx($m,{className:"text-green-400"}):e.jsx(He,{className:"text-red-400"}),re=encodeURIComponent(`*Consulta sobre Pedido - ${A.productName||"Sin nombre"}*

*N° Pedido:* ${A.orderId||"No especificado"}
*Producto:* ${A.productName||"No especificado"}
*Precio:* S/ ${C.toFixed(2)}
`+(A.renewalPrice?`*Precio de Renovación:* S/ ${v.toFixed(2)}
`:"")+`*Estado:* ${B?"A pedido":p?"Activo":"Expirado"}
*Fecha de Inicio:* ${ie(A.startDate)}
*Fecha de Vencimiento:* ${ie(A.endDate)}
`+(B?`Hola 😊, he comprado un producto a pedido (${A.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),le=encodeURIComponent(`😊 Estimado/a ${((Y=A.client)==null?void 0:Y.customerName)||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${A.productName||"Sin nombre"}.
🔢 Código: ${A.orderId||"No especificado"}
`+(B?"":`📧 Correo: ${((me=A.account)==null?void 0:me.email)||"No especificado"}
🔐 Contraseña: ${((we=A.account)==null?void 0:we.password)||"No especificado"}
👤 Perfil: ${((_e=A.account)==null?void 0:_e.profile)||"No especificado"}
📌 PIN: ${((fe=A.account)==null?void 0:fe.pin)||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${ie(A.startDate)}
📅 Fecha de vencimiento: ${ie(A.endDate)}
🏁 Días contratados: ${A.durationDays||30} días.

`+(B?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${A.termsAndConditions||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),W=A.providerPhone?A.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300 mb-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[oe,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:A.productName||"Producto sin nombre"}),A.orderId&&e.jsxs("p",{className:"text-xs text-gray-400",children:["N° Pedido: ",A.orderId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",C.toFixed(2)]}),A.renewalPrice&&e.jsxs("p",{className:"text-xs font-medium text-gray-400",children:["Renovación: S/ ",v.toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${B?"text-yellow-400":ne.replace("bg-","text-")}`,children:B?"Pendiente de activación":`${ae} día${ae===1?"":"s"} restante${ae===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${ne}`,style:{width:`${Math.min(se,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[se.toFixed(0),"% completado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ge,{className:"mr-2"})," Detalles de la Cuenta"]}),e.jsx("div",{className:"space-y-2 text-gray-300",children:B?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Usuario:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white break-all",children:((ze=A.account)==null?void 0:ze.email)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white break-all",children:((Ie=A.account)==null?void 0:Ie.password)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:((Oe=A.account)==null?void 0:Oe.profile)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:((X=A.account)==null?void 0:X.pin)||"No especificado"})]})]})})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Se,{className:"mr-2"})," Información del Pedido"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"block text-white",children:A.provider||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono del Proveedor:"}),e.jsx("span",{className:"block text-white",children:A.providerPhone||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Estado:"}),e.jsx("span",{className:`block px-2 py-1 text-xs rounded-full ${B?"bg-yellow-900/80 text-yellow-400":p?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:B?"A pedido":p?"Activo":"Expirado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Método de Pago:"}),e.jsx("span",{className:"block text-white",children:"BlackStreaming"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de inicio:"}),e.jsx("span",{className:"block text-white",children:ie(A.startDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de vencimiento:"}),e.jsx("span",{className:"block text-white",children:ie(A.endDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Días restantes:"}),e.jsx("span",{className:`block ${ne.replace("bg-","text-")}`,children:ae})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ge,{className:"mr-2"})," Información del Cliente"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Nombre:"}),e.jsx("span",{className:"block text-white",children:((ce=A.client)==null?void 0:ce.customerName)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono:"}),e.jsx("span",{className:"block text-white",children:((Ne=A.client)==null?void 0:Ne.phone)||"No especificado"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("a",{href:`https://wa.me/51${W}?text=${re}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Zr,{size:18})," Contactar Proveedor"]}),A.renewalPrice&&A.renewable&&e.jsx("button",{onClick:()=>N(A),disabled:u[`renew_${A.id}`],className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${u[`renew_${A.id}`]?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:u[`renew_${A.id}`]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(tP,{size:18})," Renovar Pedido (S/ ",v.toFixed(2),")"]})}),((rt=A.client)==null?void 0:rt.phone)&&e.jsxs("a",{href:`https://wa.me/${A.client.phone.replace(/^\+/,"")}?text=${le}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Zr,{size:18})," Contactar Cliente"]})]})]})]},A.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xe,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Realiza tu primer pedido en nuestra tienda"})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:G,className:"space-y-4",onChange:()=>J(""),children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:o.username,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:()=>Le({id:w,username:o.username}),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300",title:"Editar Nombre",children:e.jsx(zy,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:d,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Teléfono"}),e.jsx("input",{type:"tel",name:"phone",defaultValue:o.phone||"",placeholder:"Ingresa tu número de teléfono",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{type:"submit",disabled:u.password,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed",children:u.password?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:h,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(It,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(He,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>V("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Vt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(pt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:o.username.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:o.username}),e.jsx("p",{className:"text-xs text-gray-400",children:"Usuario"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Wm},{id:"notificaciones",label:"Notificaciones",icon:Go},{id:"recargar",label:"Recargar saldo",icon:Es},{id:"pedidos",label:"Mis pedidos",icon:Xe},{id:"configuracion",label:"Configuración",icon:qm}].map(A=>e.jsxs("button",{onClick:()=>{V(A.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${g===A.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(A.icon,{className:"text-lg"}),e.jsx("span",{children:A.label})]},A.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:h,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(It,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:k()}),e.jsx(vF,{isOpen:D.isOpen,title:D.title,message:D.message,onClose:pe}),e.jsx(jF,{isOpen:je.isOpen,user:je.user,onClose:De,onSave:n}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},wF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(pt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,kF=({isOpen:s,user:t,onClose:r,onSave:a})=>{const[i,l]=b.useState((t==null?void 0:t.username)||""),[o,c]=b.useState(""),d=x=>{if(x.preventDefault(),c(""),!i.trim()){c("El nombre de usuario no puede estar vacío.");return}a(t.id,i.trim())};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Perfil"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(pt,{size:20})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:x=>l(x.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},IF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState("inicio"),[i,l]=b.useState(""),[o,c]=b.useState(""),[d,x]=b.useState(""),[f,j]=b.useState([]),[w,S]=b.useState(0),[g,V]=b.useState(0),[E,T]=b.useState(null),[M,L]=b.useState(!0),[H,q]=b.useState({}),[Q,O]=b.useState(null),[u,U]=b.useState([]),[F,J]=b.useState(!1),[D,$]=b.useState(""),[je,Ae]=b.useState(""),[Re,ge]=b.useState([]),[ue,xe]=b.useState([]),[pe,Le]=b.useState({}),[De,n]=b.useState([]),[N,h]=b.useState({isOpen:!1,message:"",title:""}),[_,G]=b.useState({isOpen:!1,user:null}),ie=Nt(),k=(W,Y)=>{h({isOpen:!0,title:W,message:Y})},A=()=>{h({isOpen:!1,message:"",title:""})},C=W=>{G({isOpen:!0,user:W})},v=()=>{G({isOpen:!1,user:null})},p=async(W,Y)=>{try{q(_e=>({..._e,profile:!0}));const me=z(I,"users",W),we=z(I,"affiliates",W);await rs(me,{username:Y,updatedAt:he()}),await rs(we,{username:Y,updatedAt:he()}),l(Y),k("Éxito","Perfil actualizado exitosamente"),v()}catch(me){console.error("Error al actualizar perfil:",me),k("Error",me.message||"Error al actualizar el perfil")}finally{q(me=>({...me,profile:!1}))}};b.useEffect(()=>{const W=Dt(We,Y=>{Y?(T(Y.uid),c(Y.email||"No especificado"),L(!1)):ie("/login")});return()=>W()},[ie]),b.useEffect(()=>{(async()=>{try{const Y=be(Z(I,"products")),me=await gt(Y),we={};me.forEach(_e=>{we[_e.id]=_e.data()}),Le(we)}catch(Y){console.error("Error fetching products:",Y),O("Error al cargar productos")}})()},[]),b.useEffect(()=>{(()=>Te(z(I,"notifications","adminMessage"),me=>{if(me.exists()){const we=me.data(),_e="affiliate";we.roles&&we.roles.includes(_e)?n([{id:me.id,...we}]):n([])}else n([])}))()},[]),b.useEffect(()=>{(async()=>{if(E)try{const Y=z(I,"users",E),me=await Ye(Y);if(me.exists()){const fe=me.data();l(fe.username||"Usuario"),V(Number(fe.balance)||0)}const we=z(I,"affiliates",E),_e=await Ye(we);if(_e.exists()){const fe=_e.data();x(fe.affiliateCode||""),S(Number(fe.earnings)||0)}else{const fe=`AFF-${Math.random().toString(36).substring(2,8).toUpperCase()}`;await Vr(we,{username:i||"Nuevo Afiliado",email:o,affiliateCode:fe,earnings:0,createdAt:he(),updatedAt:he()}),x(fe)}}catch(Y){console.error("Error al manejar datos:",Y),O("Error al cargar datos")}finally{L(!1)}})()},[E,o,i]),b.useEffect(()=>{if(!E)return;(()=>{const Y=be(Z(I,"pendingTopUps"),ve("userId","==",E));return Te(Y,we=>{const _e=we.docs.map(fe=>{var ze,Ie;return{id:fe.id,...fe.data(),date:((Ie=(ze=fe.data().requestedAt)==null?void 0:ze.toDate)==null?void 0:Ie.call(ze))||new Date,amount:parseFloat(fe.data().amount)||0}});ge(_e)},we=>{console.error("Error al obtener recargas:",we),O("Error al cargar recargas")})})()},[E]),b.useEffect(()=>{if(!d)return;const W=be(Z(I,"users"),ve("referrerCode","==",d),w0("createdAt","desc"),Bt(5)),Y=Te(W,me=>{const we=me.docs.map(_e=>{var fe;return{id:_e.id,..._e.data(),joinDate:((fe=_e.data().createdAt)==null?void 0:fe.toDate())||new Date}});U(we)});return()=>Y()},[d]),b.useEffect(()=>{if(!d)return;const W=be(Z(I,"users"),ve("referrerCode","==",d)),Y=Te(W,me=>{const we=me.docs.map(_e=>{var fe;return{id:_e.id,..._e.data(),joinDate:((fe=_e.data().createdAt)==null?void 0:fe.toDate())||new Date}});j(we)});return()=>Y()},[d]),b.useEffect(()=>{if(!E)return;(()=>{const Y=be(Z(I,"sales"),ve("customerId","==",E)),me=Te(Y,_e=>{if(_e.empty){xe([]),L(!1);return}const fe=_e.docs.map(ze=>{var $s,on,Ds,Da,vr,Hr,ee,ke,Ve,Ke,bt;const Ie=ze.data(),X=((on=($s=Ie.saleDate)==null?void 0:$s.toDate)==null?void 0:on.call($s))||((Da=(Ds=Ie.createdAt)==null?void 0:Ds.toDate)==null?void 0:Da.call(Ds))||new Date;let ce=(Hr=(vr=Ie.startDate)==null?void 0:vr.toDate)==null?void 0:Hr.call(vr),Ne=ce||X,rt=!1;ce||(rt=!0);const Tt=Ie.durationDays||30;let St;Ie.endDate?St=new Date(Ie.endDate):(St=new Date(Ne.getTime()+Tt*24*60*60*1e3),rt=!0),rt&&rs(z(I,"sales",ze.id),{startDate:ce||Qt.fromDate(X),endDate:St.toISOString(),durationDays:Tt}).catch(_t=>{console.error("Error al actualizar startDate/endDate en Firestore:",_t)});const ts=new Date,_s=St.getTime()-Ne.getTime(),wt=ts.getTime()-Ne.getTime(),yt=St.getTime()-ts.getTime(),ss=Math.ceil(_s/(1e3*60*60*24)),us=Math.max(0,Math.ceil(yt/(1e3*60*60*24))),js=Math.ceil(wt/(1e3*60*60*24)),tr=ss>0?js/ss*100:100,sr=((ee=pe[Ie.providerId])==null?void 0:ee.terms)||"No se especificaron términos y condiciones.";return{id:ze.id,productName:Ie.productName||"Producto sin nombre",category:Ie.type||"netflix",price:parseFloat(Ie.price)||0,provider:Ie.provider||"No especificado",providerId:Ie.providerId||"",providerPhone:Ie.providerPhone||Ie.providerWhatsapp||"51999999999",status:Ie.status||"completed",saleDate:X,startDate:Ne,endDate:St,durationDays:Tt,daysRemaining:us,totalDays:ss,timeElapsedPercentage:tr,account:{email:((ke=Ie.accountDetails)==null?void 0:ke.email)||"No especificado",password:((Ve=Ie.accountDetails)==null?void 0:Ve.password)||"No especificado",profile:((Ke=Ie.accountDetails)==null?void 0:Ke.profile)||"No especificado",pin:((bt=Ie.accountDetails)==null?void 0:bt.pin)||"No especificado"},client:{name:Ie.customerName||"Cliente desconocido",email:Ie.customerEmail||"No especificado",phone:Ie.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BS-${ze.id.slice(0,8).toUpperCase()}`,termsAndConditions:sr,renewable:Ie.renewable!==void 0?Ie.renewable:!0}});xe(fe),L(!1)},_e=>{console.error("Error al obtener pedidos:",_e),O("Error al cargar pedidos: "+_e.message),L(!1)}),we=setInterval(()=>{xe(_e=>_e.map(fe=>{const ze=new Date,Ie=new Date(fe.endDate).getTime()-new Date(fe.startDate).getTime(),Oe=ze.getTime()-new Date(fe.startDate).getTime(),X=new Date(fe.endDate).getTime()-ze.getTime(),ce=Math.ceil(Ie/(1e3*60*60*24)),Ne=Math.max(0,Math.ceil(X/(1e3*60*60*24))),rt=Math.ceil(Oe/(1e3*60*60*24)),Tt=ce>0?rt/ce*100:100;return{...fe,daysRemaining:Ne,totalDays:ce,timeElapsedPercentage:Tt}}))},6e4);return()=>{me(),clearInterval(we)}})()},[E,pe]);const B=async()=>{try{if(q(Y=>({...Y,topUp:!0})),!je||isNaN(je)){k("Error","Ingrese un monto válido");return}const W=parseFloat(je);if(W<10){k("Error","El monto mínimo de recarga es S/ 10.00");return}await vi(Z(I,"pendingTopUps"),{userId:E,username:i,amount:W,status:"pendiente",requestedAt:he(),processed:!1}),Ae(""),k("Éxito","Solicitud de recarga enviada correctamente")}catch(W){console.error("Error al solicitar recarga:",W),k("Error",W.message||"Error al enviar solicitud de recarga")}finally{q(W=>({...W,topUp:!1}))}},ae=async W=>{var Y,me,we,_e,fe,ze,Ie;try{q(wt=>({...wt,[`renew_${W.id}`]:!0}));const Oe=parseFloat(W.price)||0;if(g<Oe){k("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const X=parseInt(W.durationDays)||30,ce=Qt.now(),Ne=ce.toDate(),rt=new Date(Ne.getTime()+X*24*60*60*1e3),Tt=rt.toISOString(),St={customerId:E,customerName:((Y=W.client)==null?void 0:Y.name)||"Cliente desconocido",customerEmail:((me=W.client)==null?void 0:me.email)||o,phoneNumber:((we=W.client)==null?void 0:we.phone)||"No especificado",productName:W.productName||"Producto sin nombre",type:W.category||"netflix",price:Oe,accountDetails:{email:((_e=W.account)==null?void 0:_e.email)||"No especificado",password:((fe=W.account)==null?void 0:fe.password)||"No especificado",profile:((ze=W.account)==null?void 0:ze.profile)||"No especificado",pin:((Ie=W.account)==null?void 0:Ie.pin)||"No especificado"},provider:W.provider||"Proveedor desconocido",providerId:W.providerId||"",providerPhone:W.providerPhone||W.providerWhatsapp||"51999999999",status:"completed",createdAt:ce,saleDate:ce,startDate:ce,endDate:Tt,durationDays:X,renewedAt:ce,renewable:W.renewable!==void 0?W.renewable:!0},ts=await vi(Z(I,"sales"),St),_s=z(I,"users",E);await rs(_s,{balance:g-Oe}),V(wt=>wt-Oe),xe(wt=>{var yt;return[...wt,{...St,id:ts.id,saleDate:Ne,startDate:Ne,endDate:rt,account:St.accountDetails,client:{name:St.customerName,email:St.customerEmail,phone:St.phoneNumber},orderId:`BS-${ts.id.slice(0,8).toUpperCase()}`,renewable:St.renewable,daysRemaining:X,totalDays:X,timeElapsedPercentage:0,termsAndConditions:((yt=pe[St.providerId])==null?void 0:yt.terms)||"No se especificaron términos y condiciones."}]}),k("Éxito","¡Pedido renovado exitosamente!")}catch(Oe){console.error("Error al renovar el pedido:",Oe),k("Error","Error al renovar el pedido: "+Oe.message)}finally{q(Oe=>({...Oe,[`renew_${W.id}`]:!1}))}},se=()=>{d&&(navigator.clipboard.writeText(d),J(!0),setTimeout(()=>J(!1),2e3))},ne=W=>{if(!W)return"No especificada";try{const Y=W instanceof Date?W:new Date(W);return isNaN(Y.getTime())?"Fecha inválida":Y.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},oe=async()=>{try{await zc(We),ie("/")}catch(W){console.error("Error al cerrar sesión:",W),k("Error",W.message||"Error al cerrar sesión")}},re=async W=>{W.preventDefault();try{q(we=>({...we,password:!0}));const Y=W.target.password.value;if(!Y){k("Error","Por favor, ingrese una nueva contraseña");return}if(Y.length<6){k("Error","La contraseña debe tener al menos 6 caracteres");return}const me=We.currentUser;me&&(await Zg(me,Y),k("Éxito","Contraseña actualizada correctamente"),W.target.reset())}catch(Y){console.error("Error al actualizar la contraseña:",Y),k("Error",Y.message||"Error al actualizar la contraseña")}finally{q(Y=>({...Y,password:!1}))}},le=()=>{if(M)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(Q)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(He,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:Q}),e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:i})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Zr,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Saldo disponible"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",g.toFixed(2)]}),e.jsx("button",{onClick:()=>a("recargas"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Recargar"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",w.toFixed(2)]}),e.jsx("button",{onClick:()=>a("ganancias"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Ver ganancias"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Tu código de afiliado"}),e.jsxs("button",{onClick:se,disabled:!d,className:`flex items-center gap-2 px-3 py-1 rounded-xl transition-all duration-300 ${d?"bg-cyan-900/80 text-cyan-400 hover:bg-cyan-800/80":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(lF,{size:16}),F?"¡Copiado!":"Copiar"]})]}),e.jsx("div",{className:"bg-gray-800/50 p-4 rounded-xl mb-6 border border-gray-600/50",children:e.jsx("p",{className:"text-2xl font-bold text-center tracking-wider text-white",children:d||"Generando código..."})}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Comparte este código con tus amigos para que se registren y ganes comisiones por sus compras."}),e.jsxs("div",{className:"bg-cyan-900/30 p-4 rounded-xl border border-cyan-800/50",children:[e.jsx("h4",{className:"font-medium text-cyan-400 mb-2",children:"Enlace de afiliado:"}),e.jsx("p",{className:"text-sm bg-gray-800/50 p-2 rounded-xl border border-gray-600/50 overflow-x-auto text-gray-300",children:d?`https://blackkstreaming.com/register?ref=${d}`:"Generando enlace..."})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Referidos recientes"}),u.length>0?u.map(W=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:W.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-900/80 text-green-400",children:"Activo"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Unido: ",ne(W.joinDate)]})]},W.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes referidos recientes"}),u.length>0&&e.jsx("button",{onClick:()=>a("referidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los referidos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),ue.length>0?ue.slice(0,3).map(W=>{const Y=new Date(W.endDate)>new Date&&W.status==="completed",me=W.status==="pending";return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:W.productName}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${me?"bg-yellow-900/80 text-yellow-400":Y?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:me?"A pedido":Y?"Activo":"Expirado"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",ne(W.endDate)]})]},W.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),ue.length>3&&e.jsx("button",{onClick:()=>a("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Notificaciones"}),De.length>0?De.map(W=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsx("p",{className:"text-gray-300",children:W.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:ne(W.updatedAt)})]},W.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay notificaciones"})]})]})]});case"notificaciones":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Notificaciones"}),De.length>0?e.jsx("div",{className:"space-y-4",children:De.map(W=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("p",{className:"text-gray-300",children:W.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:ne(W.updatedAt)})]},W.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Go,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-400",children:"No tienes mensajes nuevos"})]})]});case"recargas":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),e.jsx("input",{type:"number",value:je,onChange:W=>Ae(W.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),e.jsx("button",{onClick:B,disabled:H.topUp||!je||parseFloat(je)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${je&&parseFloat(je)>=10&&!H.topUp?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:H.topUp?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"}),e.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Es,{className:"mr-2"})," ¿Cómo realizar tu recarga?"]}),e.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",e.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al número:"]}),e.jsx("p",{className:"text-xl font-bold text-white mb-2",children:"📱 931757531"}),e.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contáctanos vía WhatsApp al mismo número para confirmar tu recarga."}),e.jsxs("a",{href:`https://wa.me/51931757531?text=${encodeURIComponent("Hola 😊, he realizado una recarga a través de Yape. Por favor, confirma mi pago.")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[e.jsx(Zr,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de recargas"}),Re.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acción"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:Re.map(W=>{var me,we;const Y=encodeURIComponent(`Hola, he pedido una recarga de S/ ${((me=W.amount)==null?void 0:me.toFixed(2))||"0.00"} con el nombre ${i}. Adjunto la captura de mi pago, por favor.`);return e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",((we=W.amount)==null?void 0:we.toFixed(2))||"0.00"]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${W.status==="aprobado"?"bg-green-900/80 text-green-400":W.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:W.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:ne(W.date)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:W.status==="pendiente"?e.jsxs("a",{href:`https://wa.me/51940505969?text=${Y}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 text-sm",children:[e.jsx(Zr,{className:"mr-2"})," Enviar captura"]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"—"})})]},W.id)})})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Es,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay recargas registradas"})]})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:D,onChange:W=>$(W.target.value)}),e.jsx(et,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),ue.length>0?e.jsx("div",{className:"space-y-6",children:ue.filter(W=>(W.productName||"").toLowerCase().includes(D.toLowerCase())||(W.orderId||"").toLowerCase().includes(D.toLowerCase())).map(W=>{var Ne,rt,Tt,St,ts,_s,wt,yt,ss,us,js,tr,sr;const Y=parseFloat(W.price)||0,me=new Date(W.endDate)>new Date&&W.status==="completed",we=W.status==="pending",_e=W.daysRemaining||0,fe=W.timeElapsedPercentage||0;let ze="bg-green-400";fe>70&&fe<=90?ze="bg-yellow-400":fe>90&&(ze="bg-red-400");const Ie=we?e.jsx(Ot,{className:"text-yellow-400"}):me?e.jsx($m,{className:"text-green-400"}):e.jsx(He,{className:"text-red-400"}),Oe=encodeURIComponent(`*Consulta sobre Pedido - ${W.productName||"Sin nombre"}*

*N° Pedido:* ${W.orderId||"No especificado"}
*Producto:* ${W.productName||"No especificado"}
*Precio:* S/ ${Y.toFixed(2)}
*Estado:* ${we?"A pedido":me?"Activo":"Expirado"}
*Fecha de Inicio:* ${ne(W.startDate)}
*Fecha de Vencimiento:* ${ne(W.endDate)}

`+(we?`Hola 😊, he comprado un producto a pedido (${W.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),X=encodeURIComponent(`😊 Estimado/a ${((Ne=W.client)==null?void 0:Ne.name)||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${W.productName||"Sin nombre"}.
🔢 Código: ${W.orderId||"No especificado"}
`+(we?"":`📧 Correo: ${((rt=W.account)==null?void 0:rt.email)||"No especificado"}
🔐 Contraseña: ${((Tt=W.account)==null?void 0:Tt.password)||"No especificado"}
👤 Perfil: ${((St=W.account)==null?void 0:St.profile)||"No especificado"}
📌 PIN: ${((ts=W.account)==null?void 0:ts.pin)||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${ne(W.startDate)}
📅 Fecha de vencimiento: ${ne(W.endDate)}
🏁 Días contratados: ${W.durationDays||30} días.

`+(we?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${W.termsAndConditions||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),ce=W.providerPhone?W.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[Ie,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:W.productName||"Producto sin nombre"}),W.orderId&&e.jsxs("p",{className:"text-xs text-gray-400",children:["N° Pedido: ",W.orderId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",Y.toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${we?"text-yellow-400":ze.replace("bg-","text-")}`,children:we?"Pendiente de activación":`${_e} día${_e===1?"":"s"} restante${_e===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${ze}`,style:{width:`${Math.min(fe,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[fe.toFixed(0),"% completado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ge,{className:"mr-2"})," Detalles de la Cuenta"]}),e.jsx("div",{className:"space-y-2 text-gray-300",children:we?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Usuario:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white break-all",children:((_s=W.account)==null?void 0:_s.email)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white break-all",children:((wt=W.account)==null?void 0:wt.password)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:((yt=W.account)==null?void 0:yt.profile)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:((ss=W.account)==null?void 0:ss.pin)||"No especificado"})]})]})})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Se,{className:"mr-2"})," Información del Pedido"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"block text-white",children:W.provider||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono del Proveedor:"}),e.jsx("span",{className:"block text-white",children:W.providerPhone||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Estado:"}),e.jsx("span",{className:`block px-2 py-1 text-xs rounded-full ${we?"bg-yellow-900/80 text-yellow-400":me?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:we?"A pedido":me?"Activo":"Expirado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Método de Pago:"}),e.jsx("span",{className:"block text-white",children:"BlackStreaming"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de inicio:"}),e.jsx("span",{className:"block text-white",children:ne(W.startDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de vencimiento:"}),e.jsx("span",{className:"block text-white",children:ne(W.endDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Días restantes:"}),e.jsx("span",{className:`block ${ze.replace("bg-","text-")}`,children:_e})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ge,{className:"mr-2"})," Información del Cliente"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Nombre:"}),e.jsx("span",{className:"block text-white",children:((us=W.client)==null?void 0:us.name)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono:"}),e.jsx("span",{className:"block text-white",children:((js=W.client)==null?void 0:js.phone)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white",children:((tr=W.client)==null?void 0:tr.email)||"No especificado"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("a",{href:`https://wa.me/51${ce}?text=${Oe}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Zr,{size:18})," Contactar Proveedor"]}),W.renewable&&e.jsx("button",{onClick:()=>ae(W),disabled:H[`renew_${W.id}`],className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${H[`renew_${W.id}`]?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:H[`renew_${W.id}`]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(tP,{size:18})," Renovar Pedido"]})}),((sr=W.client)==null?void 0:sr.phone)&&e.jsxs("a",{href:`https://wa.me/${W.client.phone.replace(/^\+/,"")}?text=${X}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Zr,{size:18})," Contactar Cliente"]})]})]})]},W.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xe,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Realiza tu primer pedido en nuestra tienda"})]})]});case"referidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Todos tus referidos (",f.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar referidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:D,onChange:W=>$(W.target.value)}),e.jsx(et,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),f.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha de registro"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:f.filter(W=>{const Y=W.username||"",me=W.email||"";return Y.toLowerCase().includes(D.toLowerCase())||me.toLowerCase().includes(D.toLowerCase())}).map(W=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:W.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:W.email||"Sin email"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:W.joinDate?ne(W.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/80 text-green-400",children:W.status||"Activo"})})]},W.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(cc,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes referidos aún"}),e.jsx("p",{className:"text-gray-400",children:"Comparte tu código de afiliado para empezar a ganar comisiones"})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Reporte de ganancias"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias hoy"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde ayer"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias esta semana"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde la semana pasada"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",w.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[f.length," referidos"]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx(K0,{className:"mr-2 text-cyan-400"})," Historial de comisiones"]}),f.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-800/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Referido"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Origen"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-700/50 divide-y divide-gray-600/50",children:f.map(W=>e.jsxs("tr",{className:"hover:bg-gray-600/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:W.username||"Usuario sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:W.joinDate?ne(W.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:"S/ 0.00"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:"Registro"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-900/80 text-yellow-400",children:"Pendiente"})})]},W.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Es,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay comisiones registradas"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gana comisiones cuando tus referidos realicen compras"})]})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:re,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:i,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:()=>C({id:E,username:i}),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300",title:"Editar Nombre",children:e.jsx(zy,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:o,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{type:"submit",disabled:H.password,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-cyan-800",children:H.password?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:oe,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(It,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(He,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Vt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(pt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:"Afiliador"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Wm},{id:"notificaciones",label:"Notificaciones",icon:Go},{id:"recargas",label:"Recargas",icon:Es},{id:"pedidos",label:"Pedidos",icon:Xe},{id:"referidos",label:"Referidos",icon:cc},{id:"ganancias",label:"Ganancias",icon:K0},{id:"configuracion",label:"Configuración",icon:qm}].map(W=>e.jsxs("button",{onClick:()=>{a(W.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r===W.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(W.icon,{className:"text-lg"}),e.jsx("span",{children:W.label})]},W.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:oe,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(It,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:le()}),e.jsx(wF,{isOpen:N.isOpen,title:N.title,message:N.message,onClose:A}),e.jsx(kF,{isOpen:_.isOpen,user:_.user,onClose:v,onSave:p}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},PF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(pt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,SF=()=>{var Hr;const[s,t]=b.useState(!1),[r,a]=b.useState("inicio"),[i,l]=b.useState("Usuario"),[o,c]=b.useState(""),[d,x]=b.useState(""),[f,j]=b.useState([]),[w,S]=b.useState([]),[g,V]=b.useState(!0),[E,T]=b.useState(""),[M,L]=b.useState({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:Array(1).fill({email:"",password:"",profile:"",pin:""})}),[H,q]=b.useState(null),[Q,O]=b.useState(!1),[u,U]=b.useState(""),[F,J]=b.useState(""),[D,$]=b.useState({isOpen:!1,message:"",title:""}),[je,Ae]=b.useState({email:"",password:"",preferences:""}),[Re,ge]=b.useState([]),[ue,xe]=b.useState(""),[pe,Le]=b.useState("Yape"),[De,n]=b.useState(""),[N,h]=b.useState(!1),[_,G]=b.useState([]),[ie,k]=b.useState(!0),[A,C]=b.useState(0),[v,p]=b.useState(!1),[B,ae]=b.useState(null),[se,ne]=b.useState(""),oe=Nt(),re=sy(),le=(ee,ke)=>{$({isOpen:!0,title:ee,message:ke})},W=()=>{$({isOpen:!1,message:"",title:""})},Y=ee=>{var ke;if(!ee)return"No especificada";try{const Ve=ee instanceof Date?ee:((ke=ee==null?void 0:ee.toDate)==null?void 0:ke.call(ee))||new Date(ee);return isNaN(Ve.getTime())?"Fecha inválida":Ve.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(Ve){return console.error("Error formatting date:",Ve),"Fecha inválida"}},me=ee=>({netflix:"Netflix",spotify:"Spotify",disney:"Disney",max:"Max",primevideo:"Prime Video",vix:"Vix",crunchyroll:"Crunchyroll",canva:"Canva",chatgpt:"ChatGPT",redessociales:"Redes Sociales",dgo:"Dgo",ligamax:"Liga Max",movistarplay:"Movistar Play",youtube:"Youtube",deezer:"Deezer",tidal:"Tidal",vpn:"Vpn",wintv:"WinTv",applemusic:"Apple Music",appletv:"Apple TV",iptv:"Iptv",flujotv:"Flujo Tv",vikirakuten:"Viki Rakuten",pornhub:"Pornhub",paramount:"Paramount",licencias:"Licencias",capcut:"Capcut",duolingo:"Duolingo",buscapersonas:"BuscaPersonas"})[ee==null?void 0:ee.toLowerCase()]||"Otro";b.useEffect(()=>{const ee=Dt(re,ke=>{ke?(c(ke.email||""),x(ke.uid),we(ke.uid)):oe("/login")});return()=>ee()},[re,oe]);const we=async ee=>{try{const ke=z(I,"users",ee),Ve=await Ye(ke);if(Ve.exists()){const Ke=Ve.data();l(Ke.username||"Usuario"),Ae({email:Ke.email||"",password:"",preferences:Ke.preferences||""})}V(!1)}catch(ke){T("Error al cargar datos del usuario"),console.error("Error fetching user data:",ke),V(!1)}};b.useEffect(()=>{o&&(async ke=>{try{const Ve=await Ye(z(I,"admins",ke));h(Ve.exists())}catch(Ve){console.error("Error checking admin status:",Ve)}})(o)},[o]),b.useEffect(()=>{if(!i)return;const ee=be(Z(I,"products"),ve("provider","==",i)),ke=Te(ee,Ve=>{const Ke=Ve.docs.map(bt=>({id:bt.id,...bt.data()}));S(Ke)},Ve=>{console.error("Error fetching products:",Ve),T("Error al cargar productos")});return()=>ke()},[i]),b.useEffect(()=>{if(!d)return;const ee=be(Z(I,"sales"),ve("providerId","==",d)),ke=Te(ee,Ke=>{if(Ke.empty){j([]),k(!1);return}const bt=Ke.docs.map(_t=>{var ri,Hi,da,ua,cn,wd,ul,xl;const Mt=_t.data(),Ar=((Hi=(ri=Mt.saleDate)==null?void 0:ri.toDate)==null?void 0:Hi.call(ri))||((ua=(da=Mt.createdAt)==null?void 0:da.toDate)==null?void 0:ua.call(da))||new Date;let Is=(wd=(cn=Mt.startDate)==null?void 0:cn.toDate)==null?void 0:wd.call(cn),Aa=Is||Ar,ln=!Is;const ca=Mt.durationDays||30;let rr;Mt.endDate?rr=typeof Mt.endDate=="string"?new Date(Mt.endDate):((xl=(ul=Mt.endDate).toDate)==null?void 0:xl.call(ul))||new Date(Mt.endDate):(rr=new Date(Aa.getTime()+ca*24*60*60*1e3),ln=!0),ln&&rs(z(I,"sales",_t.id),{startDate:Is||Qt.fromDate(Ar),endDate:rr.toISOString(),durationDays:ca}).catch(kd=>{console.error("Error al actualizar startDate/endDate en Firestore:",kd)});const ll=new Date,jd=rr.getTime()-Aa.getTime(),cl=ll.getTime()-Aa.getTime(),dl=rr.getTime()-ll.getTime(),Wi=Math.max(1,Math.ceil(jd/(1e3*60*60*24))),Nd=Math.max(0,Math.ceil(dl/(1e3*60*60*24))),Hm=Math.ceil(cl/(1e3*60*60*24)),qi=Wi>0?Math.min(100,Hm/Wi*100):100;return{id:_t.id,productName:Mt.productName||"Producto sin nombre",category:Mt.type||"netflix",amount:parseFloat(Mt.price)||0,buyer:Mt.buyerName||Mt.customerName||"Comprador desconocido",buyerPhone:Mt.buyerPhone||"No especificado",buyerEmail:Mt.customerEmail||"No especificado",status:Mt.status||"completed",saleDate:Ar,startDate:Aa,endDate:rr,durationDays:ca,daysRemaining:Nd,totalDays:Wi,timeElapsedPercentage:qi,accountDetails:Mt.accountDetails||{email:"No disponible",password:"No disponible",profile:"N/A",pin:""},balance:parseFloat(Mt.price)||0}});j(bt),k(!1)},Ke=>{console.error("Error fetching sales:",Ke),T("Error al cargar ventas"),k(!1)}),Ve=setInterval(()=>{j(Ke=>Ke.map(bt=>{const _t=new Date,Mt=new Date(bt.endDate).getTime()-new Date(bt.startDate).getTime(),la=_t.getTime()-new Date(bt.startDate).getTime(),Ar=new Date(bt.endDate).getTime()-_t.getTime(),Is=Math.max(1,Math.ceil(Mt/(1e3*60*60*24))),Aa=Math.max(0,Math.ceil(Ar/(1e3*60*60*24))),ln=Math.ceil(la/(1e3*60*60*24)),ca=Is>0?Math.min(100,ln/Is*100):100;return{...bt,daysRemaining:Aa,totalDays:Is,timeElapsedPercentage:ca}}))},6e4);return()=>{ke(),clearInterval(Ve)}},[d]),b.useEffect(()=>{if(!i)return;const ee=be(Z(I,"withdrawals"),ve("provider","==",i),w0("createdAt","desc")),ke=Te(ee,Ve=>{const Ke=Ve.docs.map(bt=>{const _t=bt.data();return{id:bt.id,..._t,amount:parseFloat(_t.amount)||0,createdAt:_t.createdAt||new Date,processedAt:_t.processedAt||null}});ge(Ke),k(!1)},Ve=>{});return()=>ke()},[i]),b.useEffect(()=>{if(!N)return;const ee=be(Z(I,"withdrawals"),ve("status","==","pending"),w0("createdAt","desc")),ke=Te(ee,Ve=>{const Ke=Ve.docs.map(bt=>{const _t=bt.data();return{id:bt.id,..._t,amount:parseFloat(_t.amount)||0,createdAt:_t.createdAt||new Date}});G(Ke)},Ve=>{console.error("Error fetching pending withdrawals:",Ve),T("Error al cargar solicitudes de retiro pendientes")});return()=>ke()},[N]),b.useEffect(()=>{if(!i)return;const ee=z(I,"providerBalances",i),ke=Te(ee,Ve=>{Ve.exists()?C(Ve.data().balance||0):(Vr(ee,{balance:0,provider:i,updatedAt:he()}),C(0)),k(!1)},Ve=>{console.error("Error fetching provider balance:",Ve),T("Error al cargar el saldo del proveedor"),k(!1)});return()=>ke()},[i]);const _e=async()=>{try{await zc(re),oe("/login")}catch(ee){console.error("Error al cerrar sesión:",ee),le("Error","Error al cerrar sesión")}},fe=ee=>{const{name:ke,value:Ve,type:Ke,checked:bt}=ee.target;L(_t=>({..._t,[ke]:Ke==="checkbox"?bt:Ve}))},ze=ee=>{const{name:ke,value:Ve}=ee.target;Ae(Ke=>({...Ke,[ke]:Ve}))},Ie=(ee,ke=!1)=>{const Ve=ee.target.files[0];if(Ve){if(Ve.size>10485760){ke?U("La imagen no debe exceder los 10MB"):T("La imagen no debe exceder los 10MB");return}const bt=new FileReader;bt.onloadend=()=>{ke?q(_t=>({..._t,image:bt.result})):L(_t=>({..._t,image:bt.result}))},bt.readAsDataURL(Ve)}},Oe=ee=>{const ke=parseInt(ee.target.value)||1,Ve=M.accounts||[];if(ke>Ve.length){const Ke=[...Ve];for(;Ke.length<ke;)Ke.push({email:"",password:"",profile:"",pin:""});L({...M,stock:ke,accounts:Ke})}else if(ke<Ve.length){const Ke=Ve.slice(0,Math.max(ke,1));L({...M,stock:ke,accounts:Ke})}else L({...M,stock:ke})},X=ee=>{const ke=parseInt(ee.target.value)||1;let Ke=[...H.accounts||[]];if(ke>Ke.length)for(;Ke.length<ke;)Ke.push({email:"",password:"",profile:"",pin:""});else ke<Ke.length&&(Ke=Ke.slice(0,Math.max(ke,1)));q({...H,stock:ke,accounts:Ke})},ce=(ee,ke,Ve)=>{const Ke=[...M.accounts];Ke[ee]={...Ke[ee],[ke]:Ve},L({...M,accounts:Ke})},Ne=(ee,ke,Ve)=>{q(Ke=>({...Ke,accounts:Ke.accounts.map((bt,_t)=>_t===ee?{...bt,[ke]:Ve}:bt)}))},rt=ee=>{const{name:ke,value:Ve}=ee.target;ae(Ke=>({...Ke,accountDetails:{...Ke.accountDetails,[ke]:Ve}}))},Tt=async()=>{if(T(""),!M.name||!M.price){le("Error","Por favor complete todos los campos obligatorios");return}if(M.renewal&&!M.renewalPrice){le("Error","Por favor ingrese el precio de renovación");return}if(M.status==="En stock"&&M.accounts.some(ke=>!ke.email||!ke.password)){le("Error","Por favor complete todos los campos de las cuentas");return}try{const ee={...M,provider:i,providerId:d,providerPhone:M.status==="En stock"?M.providerPhone||"":M.providerPhone||"No especificado",createdAt:he(),availableAccounts:M.status==="En stock"?M.accounts.length:0},ke=await vi(Z(I,"products"),ee);if(M.status==="En stock"){const Ve=Z(I,`products/${ke.id}/accounts`);for(const Ke of M.accounts)await vi(Ve,{email:Ke.email,password:Ke.password,profile:Ke.profile||"",pin:Ke.pin||"",status:"available"})}L({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:[{email:"",password:"",profile:"",pin:""}]}),a("inventario"),le("Éxito","Producto subido exitosamente!")}catch(ee){console.error("Error al subir el producto:",ee),le("Error",`Error al subir el producto: ${ee.message}`)}},St=ee=>{console.log("Producto seleccionado para editar:",ee),U(""),q({id:ee.id,name:ee.name||"",image:ee.image||"",category:ee.category||"Netflix",accountType:ee.accountType||"Premium",status:ee.status||"En stock",stock:ee.stock||1,price:ee.price||"",renewal:ee.renewal||!1,renewalPrice:ee.renewalPrice||"",duration:ee.duration||"",providerPhone:ee.providerPhone||"",details:ee.details||"",terms:ee.terms||"",providerId:ee.providerId||d,accounts:ee.status==="En stock"?ee.accounts||Array(Math.max(ee.stock||1,1)).fill({email:"",password:"",profile:"",pin:""}):[]}),O(!0)},ts=async()=>{var ee;if(U(""),!H.name||!H.price){U("Por favor complete todos los campos obligatorios");return}if(H.renewal&&!H.renewalPrice){U("Por favor ingrese el precio de renovación");return}if(H.status==="En stock"&&H.accounts.some(Ve=>!Ve.email||!Ve.password)){U("Por favor complete todos los campos de las cuentas");return}try{const ke=z(I,"products",H.id);await Vr(ke,{...H,providerId:H.providerId||d,availableAccounts:H.status==="En stock"&&((ee=H.accounts)==null?void 0:ee.length)||0},{merge:!0}),O(!1),le("Éxito","Producto actualizado exitosamente!")}catch(ke){console.error("Error al actualizar el producto:",ke),U("Error al actualizar el producto")}},_s=async ee=>{try{await w6(z(I,"products",ee)),le("Éxito","Producto eliminado exitosamente!")}catch(ke){console.error("Error al eliminar el producto:",ke),le("Error","Error al eliminar el producto")}},wt=async()=>{try{const ee=re.currentUser;if(ee){const ke=z(I,"users",ee.uid);await Vr(ke,{preferences:je.preferences,...je.password&&{password:je.password}},{merge:!0}),le("Éxito","Configuración actualizada correctamente!")}}catch(ee){console.error("Error al actualizar la configuración:",ee),le("Error","Error al actualizar la configuración")}},yt=async()=>{if(!ue||parseFloat(ue)<=0){le("Error","Ingrese un monto válido");return}if(parseFloat(ue)>A){le("Error","No tienes suficientes fondos disponibles");return}if(!De){le("Error","Ingrese los datos de su cuenta");return}try{await vi(Z(I,"withdrawals"),{provider:i,providerEmail:o,amount:parseFloat(ue),method:pe,account:De,status:"pending",createdAt:he()}),xe(""),n(""),le("Éxito","Solicitud de retiro enviada correctamente")}catch(ee){console.error("Error al solicitar retiro:",ee),le("Error","Error al solicitar retiro")}},ss=async(ee,ke)=>{try{const Ve=z(I,"withdrawals",ee),Ke=await Ye(Ve);if(!Ke.exists())throw new Error("Solicitud de retiro no encontrada");const bt=Ke.data(),_t=bt.provider,Mt=parseFloat(bt.amount);if(ke==="approved"){const la=z(I,"providerBalances",_t),Ar=await Ye(la);let Is=0;if(Ar.exists()&&(Is=Ar.data().balance||0),Mt>Is){le("Error","El proveedor no tiene suficientes fondos para aprobar este retiro");return}await Vr(la,{balance:Is-Mt,provider:_t,updatedAt:he()},{merge:!0})}await rs(Ve,{status:ke,processedAt:he(),processedBy:o}),le("Éxito",ke==="approved"?"Retiro aprobado y saldo actualizado correctamente":"Retiro rechazado")}catch(Ve){console.error("Error al procesar retiro:",Ve),le("Error","Error al procesar retiro: "+Ve.message)}},us=ee=>{ne(""),ae({...ee,accountDetails:{email:ee.accountDetails.email||"",password:ee.accountDetails.password||"",profile:ee.accountDetails.profile||"",pin:ee.accountDetails.pin||""}}),p(!0)},js=async()=>{if(ne(""),!B.accountDetails.email||!B.accountDetails.password){ne("Por favor complete todos los campos obligatorios de la cuenta");return}try{const ee=z(I,"sales",B.id);await rs(ee,{accountDetails:B.accountDetails,updatedAt:he()}),p(!1),le("Éxito","Detalles de la cuenta actualizados exitosamente!")}catch(ee){console.error("Error al actualizar los detalles de la cuenta:",ee),ne("Error al actualizar los detalles de la cuenta")}},tr=async ee=>{try{const ke=z(I,"sales",ee);await rs(ke,{status:"completed",updatedAt:he()}),le("Éxito","Pedido activado exitosamente!")}catch(ke){console.error("Error al activar el pedido:",ke),le("Error","Error al activar el pedido")}},sr=ie?0:f.reduce((ee,ke)=>ee+(ke.amount||0),0),$s=ie?0:Re.reduce((ee,ke)=>ee+(ke.status==="approved"?ke.amount:0),0),Ds=(()=>ie?0:A)(),Da=w.reduce((ee,ke)=>ee+(parseInt(ke.stock)||0),0),vr=()=>{if(g)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(E)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(He,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:E}),e.jsx("button",{onClick:()=>T(""),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(uu,{className:"mr-2"})," Inventario"]}),e.jsx("p",{className:"text-3xl font-bold text-white",children:w.length}),e.jsx("p",{className:"text-gray-400",children:"Productos registrados"}),e.jsxs("p",{className:"text-gray-400",children:["Stock total: ",Da]}),e.jsx("button",{onClick:()=>a("inventario"),className:"text-cyan-400 hover:underline text-sm mt-2",children:"Ver inventario"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Es,{className:"mr-2"})," Ganancias"]}),ie?e.jsx("div",{className:"animate-pulse text-gray-400",children:"Cargando..."}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",sr.toFixed(2)]}),e.jsxs("p",{className:"text-gray-400",children:[f.length," ventas realizadas"]}),e.jsxs("p",{className:"text-gray-400",children:["Disponible: S/ ",Ds.toFixed(2)]}),e.jsx("button",{onClick:()=>a("retiros"),className:"text-cyan-400 hover:underline text-sm mt-2",children:"Retirar fondos"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Ge,{className:"mr-2"})," Mi Cuenta"]}),e.jsx("p",{className:"text-lg font-medium text-white",children:i}),e.jsx("p",{className:"text-sm text-gray-400 truncate",children:o}),e.jsx("p",{className:"text-xs mt-2 bg-cyan-900 text-cyan-400 py-1 px-2 rounded-full inline-block",children:N?"Administrador":"Proveedor"}),e.jsx("button",{onClick:()=>a("configuracion"),className:"text-cyan-400 hover:underline text-sm mt-2",children:"Editar perfil"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," Pedidos recientes"]}),f.length===0?e.jsx("p",{className:"text-gray-400 py-2 text-center",children:"No hay pedidos recientes."}):f.slice(0,3).map((ee,ke)=>e.jsx("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"w-2/3",children:[e.jsx("p",{className:"font-medium text-white truncate",children:ee.productName}),e.jsxs("p",{className:"text-sm text-gray-400 truncate",children:["Comprador: ",ee.buyer]})]}),e.jsxs("div",{className:"text-right w-1/3",children:[e.jsxs("p",{className:"font-medium text-white",children:["S/ ",(ee.amount||0).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-400",children:Y(ee.date)})]})]})},ke)),f.length>3&&e.jsx("button",{onClick:()=>a("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]})]});case"inventario":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white flex items-center",children:[e.jsx(uu,{className:"mr-2"})," Inventario"]}),e.jsxs("button",{onClick:()=>a("subirProducto"),className:"px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl flex items-center w-full md:w-auto justify-center transition-all duration-300",children:[e.jsx(Vw,{className:"mr-2"})," Nuevo Producto"]})]}),w.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Precio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:w.map(ee=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[ee.image&&e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:ee.image,alt:ee.name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate max-w-xs",children:ee.name}),e.jsx("div",{className:"text-xs text-gray-400",children:me(ee.category)})]})]})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:["S/ ",(parseFloat(ee.price)||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:ee.stock||0}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ee.status==="En stock"?"bg-green-900/80 text-green-400":"bg-yellow-900/80 text-yellow-400"}`,children:ee.status})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>St(ee),className:"text-cyan-400 hover:text-cyan-500 mr-3",title:"Editar",children:e.jsx(sp,{})}),e.jsx("button",{onClick:()=>_s(ee.id),className:"text-red-400 hover:text-red-500",title:"Eliminar",children:e.jsx(dF,{})})]})]},ee.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(uu,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes productos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Agrega tu primer producto para comenzar"}),e.jsxs("button",{onClick:()=>a("subirProducto"),className:"mt-4 px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl flex items-center mx-auto transition-all duration-300",children:[e.jsx(Vw,{className:"mr-2"})," Agregar Producto"]})]})]});case"subirProducto":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-4xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Subir Nuevo Producto"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Imagen del producto"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600/50 border-dashed rounded-xl bg-gray-700/50 backdrop-blur-sm",children:M.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:M.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>L({...M,image:""}),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(pt,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-gray-800/50 rounded-xl font-medium text-cyan-400 hover:text-cyan-500 focus-within:outline-none",children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:ee=>Ie(ee),accept:"image/*"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs("div",{className:"col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:M.name,onChange:fe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Categoría*"}),e.jsxs("select",{name:"category",value:M.category,onChange:fe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Tipo de cuenta*"}),e.jsxs("select",{name:"accountType",value:M.accountType,onChange:fe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Estado*"}),e.jsxs("select",{name:"status",value:M.status,onChange:fe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:M.stock,onChange:Oe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"1",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:M.price,onChange:fe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"renewal",checked:M.renewal,onChange:fe,className:"h-4 w-4 text-cyan-400 focus:ring-cyan-400 border-gray-600/50 rounded"}),e.jsx("label",{className:"ml-2 text-gray-300",children:"¿Tiene renovación?"})]})]}),M.renewal&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio de renovación (S/)*"}),e.jsx("input",{type:"number",name:"renewalPrice",value:M.renewalPrice,onChange:fe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:M.duration,onChange:fe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Teléfono de contacto ",M.status==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:M.providerPhone,onChange:fe,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: +51 987654321",required:M.status==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:M.details,onChange:fe,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:M.terms,onChange:fe,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Especifica los términos y condiciones de uso"})]}),M.status==="En stock"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cuentas asociadas*"}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:M.accounts.map((ee,ke)=>e.jsxs("div",{className:"border border-gray-600/50 rounded-xl p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("h4",{className:"text-sm font-medium text-white mb-3",children:["Cuenta ",ke+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:ee.email,onChange:Ve=>ce(ke,"email",Ve.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Contraseña*"}),e.jsx("input",{type:"text",value:ee.password,onChange:Ve=>ce(ke,"password",Ve.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:ee.profile,onChange:Ve=>ce(ke,"profile",Ve.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"PIN (opcional)"}),e.jsx("input",{type:"text",value:ee.pin,onChange:Ve=>ce(ke,"pin",Ve.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: 1234"})]})]})]},ke))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>a("inventario"),className:"px-4 py-2 bg-gray-700/50 text-gray-300 rounded-xl hover:bg-gray-600/50 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:Tt,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Subir Producto"})]})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(Es,{className:"mr-2"})," Ganancias"]}),e.jsx("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 mb-6 border border-gray-600/50 shadow-lg",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-1",children:"Ganancias totales"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[f.length," ventas realizadas"]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Retirado: S/ ",$s.toFixed(2)]}),ie?e.jsx("p",{className:"text-sm text-gray-400",children:"Disponible: Cargando..."}):e.jsxs("p",{className:"text-sm text-gray-400",children:["Disponible: S/ ",(A||0).toFixed(2)]})]}),e.jsxs("div",{className:"text-3xl font-bold text-white mt-2 md:mt-0",children:["S/ ",sr.toFixed(2)]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Categoría"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Comprador"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contacto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:f.map((ee,ke)=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:ee.productName}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:me(ee.category)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-white",children:ee.buyer}),e.jsx("div",{className:"text-xs text-gray-400",children:ee.buyerEmail})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:ee.buyerPhone}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:Y(ee.date)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:["S/ ",(ee.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/80 text-green-400",children:"Completado"})})]},ke))})]})}),f.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Es,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay ventas registradas"}),e.jsx("p",{className:"text-gray-400",children:"Tus ventas aparecerán aquí."})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:F,onChange:ee=>J(ee.target.value)}),e.jsx(et,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),f.length>0?e.jsx("div",{className:"space-y-6",children:f.filter(ee=>(ee.productName||"").toLowerCase().includes(F.toLowerCase())||(ee.category||"").toLowerCase().includes(F.toLowerCase())).map(ee=>{const ke=ee.status==="pending",Ve=ee.status==="refunded",Ke=ee.daysRemaining||0,bt=ee.timeElapsedPercentage||0;let _t="bg-green-400";bt>70&&bt<=90?_t="bg-yellow-400":bt>90&&(_t="bg-red-400");const Mt=Ve?e.jsx(He,{className:"text-red-400"}):ke?e.jsx(Ot,{className:"text-yellow-400"}):e.jsx($m,{className:"text-green-400"}),la=ee.buyerPhone?ee.buyerPhone.replace(/^\+/,"").replace(/\D/g,""):null,Ar=encodeURIComponent(`Hola ${ee.buyer||"Cliente"}, 😊

Soy el proveedor de tu suscripción ${ee.productName||"Sin nombre"} (N° Pedido: ${ee.id||"No especificado"}). ¿En qué puedo ayudarte hoy? Por favor, indícame tu consulta o problema.

Atentamente, BlackStreaming`),Is=encodeURIComponent(`Hola ${ee.buyer||"Cliente"}, 😊

Te informamos que tu suscripción ${ee.productName||"Sin nombre"} (N° Pedido: ${ee.id||"No especificado"}) vencerá en ${Ke} día${Ke===1?"":"s"}. Te recomendamos renovarla a tiempo.

Detalles:
- Fecha de vencimiento: ${Y(ee.endDate)}
- Precio: S/ ${(ee.amount||0).toFixed(2)}

Si necesitas ayuda, contáctanos. ¡Gracias por tu preferencia!
Atentamente, BlackStreaming`);return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[Mt,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:ee.productName}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Categoría: ",me(ee.category)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",(ee.amount||0).toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${_t.replace("bg-","text-")}`,children:ke?"Pendiente de activación":`${Ke} día${Ke===1?"":"s"} restante${Ke===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${_t}`,style:{width:`${Math.min(bt,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[bt.toFixed(0),"% completado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsx("h5",{className:"text-sm font-medium text-cyan-400 mb-3",children:"Información del Comprador"}),e.jsxs("p",{className:"text-gray-300 text-sm",children:["Comprador: ",ee.buyer]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Teléfono: ",ee.buyerPhone]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsx("h5",{className:"text-sm font-medium text-cyan-400 mb-3",children:"Detalles de la Cuenta"}),ee.accountDetails?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-gray-300",children:["Email: ",ee.accountDetails.email]}),e.jsxs("p",{className:"text-gray-400",children:["Contraseña: ",ee.accountDetails.password]}),e.jsxs("p",{className:"text-gray-400",children:["Perfil: ",ee.accountDetails.profile||"N/A"]}),e.jsxs("p",{className:"text-gray-400",children:["PIN: ",ee.accountDetails.pin||"N/A"]})]}):e.jsx("p",{className:"text-gray-400",children:"No disponible"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4",children:[e.jsxs("button",{onClick:()=>us(ee),className:"flex-1 py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Editar cuenta",children:[e.jsx(sp,{size:18})," Editar Cuenta"]}),ee.status==="pending"&&e.jsxs("button",{onClick:()=>tr(ee.id),className:"flex-1 py-3 px-4 bg-green-600 hover:bg-green-700 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Activar pedido",children:[e.jsx(Bu,{size:18})," Activar Pedido"]}),ee.buyerPhone&&e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:`https://wa.me/${la}?text=${Ar}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Zr,{size:18})," Contactar al comprador"]}),e.jsxs("a",{href:`https://wa.me/${la}?text=${Is}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-yellow-600 hover:bg-yellow-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Go,{size:18})," Avisar al comprador"]})]})]})]})]},ee.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xe,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Los pedidos de tus productos aparecerán aquí."})]})]});case"retiros":return e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:N?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Solicitudes de Retiro Pendientes"}),_.length>0?e.jsx("div",{className:"space-y-6",children:_.map(ee=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-semibold text-white",children:ee.provider}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["S/ ",(ee.amount||0).toFixed(2)]})]}),e.jsxs("p",{className:"text-gray-300",children:["Email: ",ee.providerEmail]}),e.jsxs("p",{className:"text-gray-400",children:["Método: ",ee.method]}),e.jsxs("p",{className:"text-gray-400",children:["Cuenta: ",ee.account]}),e.jsxs("p",{className:"text-gray-400",children:["Fecha: ",Y(ee.createdAt)]}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx("button",{onClick:()=>ss(ee.id,"approved"),className:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-all duration-300",children:"Aprobar"}),e.jsx("button",{onClick:()=>ss(ee.id,"rejected"),className:"px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-all duration-300",children:"Rechazar"})]})]},ee.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tp,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay solicitudes pendientes"}),e.jsx("p",{className:"text-gray-400",children:"Las solicitudes de retiro aparecerán aquí"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Mis Retiros"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-4",children:"Solicitar Retiro"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a retirar (S/)*"}),e.jsx("input",{type:"number",value:ue,onChange:ee=>xe(ee.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 150.00",step:"0.01",min:"0",max:Ds}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Máximo disponible: S/ ",Ds.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Método de pago*"}),e.jsxs("select",{value:pe,onChange:ee=>Le(ee.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Yape",children:"Yape"}),e.jsx("option",{value:"Plin",children:"Plin"}),e.jsx("option",{value:"Transferencia",children:"Transferencia Bancaria"}),e.jsx("option",{value:"Otro",children:"Otro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Datos de la cuenta*"}),e.jsx("input",{type:"text",value:De,onChange:ee=>n(ee.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:pe==="Yape"?"Número de teléfono":"Número de cuenta",required:!0})]}),e.jsx("button",{onClick:yt,disabled:!ue||parseFloat(ue)<=0||parseFloat(ue)>Ds||!De,className:`w-full px-6 py-3 rounded-xl font-medium transition-all duration-300 ${ue&&parseFloat(ue)>0&&parseFloat(ue)<=Ds&&De?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:"Solicitar Retiro"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-4",children:"Historial de Retiros"}),Re.length>0?e.jsx("div",{className:"space-y-4",children:Re.map(ee=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("p",{className:"text-gray-300",children:["Monto: S/ ",(ee.amount||0).toFixed(2)]}),e.jsxs("p",{className:"text-gray-400",children:["Método: ",ee.method," - ",ee.account]}),e.jsxs("p",{className:"text-gray-400",children:[ee.status==="pending"?"Solicitado":"Procesado",": ",Y(ee.status==="pending"?ee.createdAt:ee.processedAt)]}),e.jsxs("p",{className:"text-gray-400",children:["Estado: ",ee.status==="approved"?"Aprobado":ee.status==="rejected"?"Rechazado":"Pendiente"]})]},ee.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(tp,{className:"mx-auto text-3xl text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-400",children:"No hay retiros registrados"})]})]})]})]})});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:je.email,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña"}),e.jsx("input",{type:"password",name:"password",value:je.password,onChange:ze,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",placeholder:"Dejar vacío para no cambiar"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Preferencias"}),e.jsx("textarea",{name:"preferences",value:je.preferences,onChange:ze,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Escribe tus preferencias o notas",rows:"4"})]}),e.jsx("div",{className:"flex justify-end gap-3 pt-4",children:e.jsx("button",{onClick:wt,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Guardar Cambios"})})]})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(He,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Vt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(pt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:N?"Administrador":"Proveedor"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Wm},{id:"inventario",label:"Inventario",icon:uu},{id:"subirProducto",label:"Subir Producto",icon:uF},{id:"ganancias",label:"Ganancias",icon:Es},{id:"pedidos",label:"Pedidos",icon:Xe},{id:"retiros",label:"Retiros",icon:tp},{id:"configuracion",label:"Configuración",icon:qm}].map(ee=>e.jsxs("button",{onClick:()=>{a(ee.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r===ee.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(ee.icon,{className:"text-lg"}),e.jsx("span",{children:ee.label})]},ee.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:_e,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(It,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:vr()}),e.jsx(PF,{isOpen:D.isOpen,title:D.title,message:D.message,onClose:W}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[e.jsx(sp,{className:"mr-2"})," Editar Producto"]}),e.jsx("button",{onClick:()=>O(!1),className:"text-gray-300 hover:text-white",children:e.jsx(pt,{size:24})})]}),u&&e.jsx("div",{className:"bg-red-900/80 border-l-4 border-red-500 p-4 mb-6 rounded-xl",children:e.jsxs("div",{className:"flex",children:[e.jsx(He,{className:"h-5 w-5 text-red-400"}),e.jsx("p",{className:"ml-3 text-sm text-red-300",children:u})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Imagen del producto"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600/50 border-dashed rounded-xl bg-gray-700/50 backdrop-blur-sm",children:H!=null&&H.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:H.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>q({...H,image:""}),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(pt,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"edit-file-upload",className:"relative cursor-pointer bg-gray-800/50 rounded-xl font-medium text-cyan-400 hover:text-cyan-500 focus-within:outline-none",children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"edit-file-upload",name:"edit-file-upload",type:"file",className:"sr-only",onChange:ee=>Ie(ee,!0),accept:"image/*"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs("div",{className:"col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:(H==null?void 0:H.name)||"",onChange:ee=>q({...H,name:ee.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Categoría*"}),e.jsxs("select",{name:"category",value:(H==null?void 0:H.category)||"Netflix",onChange:ee=>q({...H,category:ee.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Tipo de cuenta*"}),e.jsxs("select",{name:"accountType",value:(H==null?void 0:H.accountType)||"Premium",onChange:ee=>q({...H,accountType:ee.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Estado*"}),e.jsxs("select",{name:"status",value:(H==null?void 0:H.status)||"En stock",onChange:ee=>q({...H,status:ee.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:(H==null?void 0:H.stock)||1,onChange:X,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"1",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:(H==null?void 0:H.price)||"",onChange:ee=>q({...H,price:ee.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"renewal",checked:(H==null?void 0:H.renewal)||!1,onChange:ee=>q({...H,renewal:ee.target.checked}),className:"h-4 w-4 text-cyan-400 focus:ring-cyan-400 border-gray-600/50 rounded"}),e.jsx("label",{className:"ml-2 text-gray-300",children:"¿Tiene renovación?"})]})]}),(H==null?void 0:H.renewal)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio de renovación (S/)*"}),e.jsx("input",{type:"number",name:"renewalPrice",value:(H==null?void 0:H.renewalPrice)||"",onChange:ee=>q({...H,renewalPrice:ee.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:(H==null?void 0:H.duration)||"",onChange:ee=>q({...H,duration:ee.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Teléfono de contacto ",(H==null?void 0:H.status)==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:(H==null?void 0:H.providerPhone)||"",onChange:ee=>q({...H,providerPhone:ee.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: +51 987654321",required:(H==null?void 0:H.status)==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:(H==null?void 0:H.details)||"",onChange:ee=>q({...H,details:ee.target.value}),rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:(H==null?void 0:H.terms)||"",onChange:ee=>q({...H,terms:ee.target.value}),rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Especifica los términos y condiciones de uso"})]}),(H==null?void 0:H.status)==="En stock"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cuentas asociadas*"}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:(Hr=H==null?void 0:H.accounts)==null?void 0:Hr.map((ee,ke)=>e.jsxs("div",{className:"border border-gray-600/50 rounded-xl p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("h4",{className:"text-sm font-medium text-white mb-3",children:["Cuenta ",ke+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:ee.email||"",onChange:Ve=>Ne(ke,"email",Ve.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Contraseña*"}),e.jsx("input",{type:"text",value:ee.password||"",onChange:Ve=>Ne(ke,"password",Ve.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:ee.profile||"",onChange:Ve=>Ne(ke,"profile",Ve.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"PIN (opcional)"}),e.jsx("input",{type:"text",value:ee.pin||"",onChange:Ve=>Ne(ke,"pin",Ve.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: 1234"})]})]})]},ke))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-gray-700/50 text-gray-300 rounded-xl hover:bg-gray-600/50 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:ts,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Guardar Cambios"})]})]})]})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-2xl border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Editar Detalles de la Cuenta"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(pt,{size:20})})]}),se&&e.jsx("div",{className:"bg-red-900/80 border-l-4 border-red-500 p-4 mb-6 rounded-xl",children:e.jsxs("div",{className:"flex",children:[e.jsx(He,{className:"h-5 w-5 text-red-400"}),e.jsx("p",{className:"ml-3 text-sm text-red-300",children:se})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico*"}),e.jsx("input",{type:"email",name:"email",value:(B==null?void 0:B.accountDetails.email)||"",onChange:rt,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Contraseña*"}),e.jsx("input",{type:"text",name:"password",value:(B==null?void 0:B.accountDetails.password)||"",onChange:rt,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",name:"profile",value:(B==null?void 0:B.accountDetails.profile)||"",onChange:rt,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"PIN (opcional)"}),e.jsx("input",{type:"text",name:"pin",value:(B==null?void 0:B.accountDetails.pin)||"",onChange:rt,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",placeholder:"Ej: 1234"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-gray-700/50 text-gray-300 rounded-xl hover:bg-gray-600/50 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:js,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Actualizar Cuenta"})]})]})]})})})]})},EF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(pt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,CF=({isOpen:s,user:t,onClose:r,onSave:a})=>{const[i,l]=b.useState((t==null?void 0:t.balance)||0),[o,c]=b.useState(""),d=x=>{if(x.preventDefault(),c(""),isNaN(i)||i<0){c("Por favor, ingrese un saldo válido (número no negativo).");return}a(t.id,parseFloat(i))};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Editar Saldo de ",t.username]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(pt,{size:20})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nuevo Saldo (S/)"}),e.jsx("input",{type:"number",value:i,onChange:x=>l(x.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"0",step:"0.01",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},TF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState("inicio"),[i,l]=b.useState(""),[o,c]=b.useState(""),[d,x]=b.useState(0),[f,j]=b.useState([]),[w,S]=b.useState([]),[g,V]=b.useState([]),[E,T]=b.useState([]),[M,L]=b.useState([]),[H,q]=b.useState([]),[Q,O]=b.useState([]),[u,U]=b.useState([]),[F,J]=b.useState(0),[D,$]=b.useState({day:0,week:0,month:0,total:0}),[je,Ae]=b.useState(!0),[Re,ge]=b.useState({}),[ue,xe]=b.useState(null),[pe,Le]=b.useState(""),[De,n]=b.useState({isOpen:!1,message:"",title:""}),[N,h]=b.useState({isOpen:!1,user:null}),[_,G]=b.useState(!1),[ie,k]=b.useState({message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}}),A=Nt(),C=(X,ce)=>{n({isOpen:!0,title:X,message:ce})},v=()=>{n({isOpen:!1,message:"",title:""})},p=X=>{h({isOpen:!0,user:X})},B=()=>{h({isOpen:!1,user:null})},ae=async(X,ce)=>{try{ge(rt=>({...rt,[`balance_${X}`]:!0}));const Ne=z(I,"users",X);await rs(Ne,{balance:ce,updatedAt:he()}),C("Éxito","Saldo actualizado exitosamente"),B()}catch(Ne){console.error("Error al actualizar saldo:",Ne),C("Error",Ne.message||"Error al actualizar el saldo")}finally{ge(Ne=>({...Ne,[`balance_${X}`]:!1}))}},se=async X=>{X.preventDefault();try{ge(St=>({...St,notification:!0}));const{message:ce,roles:Ne}=ie;if(!ce.trim())throw new Error("El mensaje no puede estar vacío");const rt=Object.keys(Ne).filter(St=>Ne[St]);if(rt.length===0)throw new Error("Debe seleccionar al menos un rol");const Tt=z(I,"notifications","adminMessage");await Vr(Tt,{message:ce.trim(),roles:rt,updatedAt:he()}),k({message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}}),C("Éxito","Notificación enviada exitosamente")}catch(ce){console.error("Error al enviar notificación:",ce),C("Error",ce.message||"Error al enviar la notificación")}finally{ge(ce=>({...ce,notification:!1}))}};b.useEffect(()=>{const X=Dt(We,ce=>{!ce&&!_?A("/login"):ce&&(c(ce.email),ne(ce.uid),Ae(!1))});return()=>X()},[A,_]);const ne=async X=>{try{const ce=z(I,"users",X),Ne=await Ye(ce);if(Ne.exists()){const rt=Ne.data();l(rt.username||rt.email.split("@")[0])}else xe("Usuario no encontrado en la base de datos")}catch(ce){console.error("Error al obtener el nombre de usuario:",ce),xe("Error al cargar datos del usuario")}},oe=X=>{const Ne=X*5,rt=Ne*.25,Tt=Ne*.05;$({day:Tt,week:rt,month:Ne,total:Ne})};b.useEffect(()=>{(async()=>{try{const wt=await gt(Z(I,"users")),yt=wt.size,ss=wt.docs.map(ke=>({id:ke.id,...ke.data()}));x(yt),j(ss.slice(-5)),S(ss),oe(yt);const us=be(Z(I,"pendingRegistrations"),ve("status","==","pending")),js=await gt(us);V(js.docs.map(ke=>({id:ke.id,...ke.data()})));const tr=be(Z(I,"pendingTopUps"),ve("status","==","pendiente")),sr=await gt(tr);T(sr.docs.map(ke=>({id:ke.id,...ke.data()})));const $s=be(Z(I,"withdrawals"),ve("status","==","pending")),on=await gt($s);L(on.docs.map(ke=>({id:ke.id,...ke.data()})));const Ds=await gt(Z(I,"topUpsHistory"));q(Ds.docs.map(ke=>({id:ke.id,...ke.data()})));const Da=await gt(Z(I,"withdrawalsHistory"));O(Da.docs.map(ke=>({id:ke.id,...ke.data()})));const Hr=(await gt(Z(I,"sales"))).docs.map(ke=>({id:ke.id,...ke.data()}));U(Hr);const ee=Hr.reduce((ke,Ve)=>ke+(Ve.price||0),0);J(ee)}catch(wt){console.error("Error al obtener datos:",wt),xe("Error al cargar datos")}})();const ce=Te(Z(I,"users"),wt=>{const yt=wt.size,ss=wt.docs.map(us=>({id:us.id,...us.data()}));x(yt),j(ss.slice(-5)),S(ss),oe(yt)}),Ne=Te(be(Z(I,"pendingRegistrations"),ve("status","==","pending")),wt=>{V(wt.docs.map(yt=>({id:yt.id,...yt.data()})))}),rt=Te(be(Z(I,"pendingTopUps"),ve("status","==","pendiente")),wt=>{T(wt.docs.map(yt=>({id:yt.id,...yt.data()})))}),Tt=Te(be(Z(I,"withdrawals"),ve("status","==","pending")),wt=>{L(wt.docs.map(yt=>({id:yt.id,...yt.data()})))}),St=Te(Z(I,"topUpsHistory"),wt=>{q(wt.docs.map(yt=>({id:yt.id,...yt.data()})))}),ts=Te(Z(I,"withdrawalsHistory"),wt=>{O(wt.docs.map(yt=>({id:yt.id,...yt.data()})))}),_s=Te(Z(I,"sales"),wt=>{const yt=wt.docs.map(us=>({id:us.id,...us.data()}));U(yt);const ss=yt.reduce((us,js)=>us+(js.price||0),0);J(ss)});return()=>{ce(),Ne(),rt(),Tt(),St(),ts(),_s()}},[]);const re=async X=>{try{ge(Tt=>({...Tt,[X]:!0}));const ce=z(I,"withdrawals",X),Ne=M.find(Tt=>Tt.id===X);if(!(Ne!=null&&Ne.providerId))throw new Error("Proveedor no encontrado para el retiro");await rs(ce,{status:"approved",updatedAt:he()});const rt=z(I,"users",Ne.providerId);await rs(rt,{balance:st(-Ne.amount||0)}),await Vr(z(I,"withdrawalsHistory",X),{...Ne,status:"approved",updatedAt:he()}),xe(null),C("Éxito","Retiro aprobado exitosamente")}catch(ce){console.error("Error al aprobar retiro:",ce),xe(ce.message||"Error al aprobar el retiro"),C("Error",ce.message||"Error al aprobar el retiro")}finally{ge(ce=>({...ce,[X]:!1}))}},le=async X=>{try{ge(rt=>({...rt,[X]:!0}));const ce=z(I,"withdrawals",X);await rs(ce,{status:"denied",updatedAt:he()});const Ne=M.find(rt=>rt.id===X);await Vr(z(I,"withdrawalsHistory",X),{...Ne,status:"denied",updatedAt:he()}),xe(null),C("Éxito","Retiro rechazado exitosamente")}catch(ce){console.error("Error al rechazar retiro:",ce),xe(ce.message||"Error al rechazar el retiro"),C("Error",ce.message||"Error al rechazar el retiro")}finally{ge(ce=>({...ce,[X]:!1}))}},W=async X=>{try{ge(Tt=>({...Tt,[X]:!0}));const ce=z(I,"pendingTopUps",X),Ne=E.find(Tt=>Tt.id===X);if(!(Ne!=null&&Ne.userId))throw new Error("Usuario no encontrado para la recarga");await rs(ce,{status:"aprobado",updatedAt:he()});const rt=z(I,"users",Ne.userId);await rs(rt,{balance:st(Ne.amount||0)}),await Vr(z(I,"topUpsHistory",X),{...Ne,status:"aprobado",updatedAt:he()}),xe(null),C("Éxito","Recarga aprobada exitosamente")}catch(ce){console.error("Error al aprobar recarga:",ce),xe(ce.message||"Error al aprobar la recarga"),C("Error",ce.message||"Error al aprobar la recarga")}finally{ge(ce=>({...ce,[X]:!1}))}},Y=async X=>{try{ge(rt=>({...rt,[X]:!0}));const ce=z(I,"pendingTopUps",X);await rs(ce,{status:"rechazado",updatedAt:he()});const Ne=E.find(rt=>rt.id===X);await Vr(z(I,"topUpsHistory",X),{...Ne,status:"rechazado",updatedAt:he()}),xe(null),C("Éxito","Recarga rechazada exitosamente")}catch(ce){console.error("Error al rechazar recarga:",ce),xe(ce.message||"Error al rechazar la recarga"),C("Error",ce.message||"Error al rechazar la recarga")}finally{ge(ce=>({...ce,[X]:!1}))}},me=async X=>{try{ge(ts=>({...ts,[X]:!0})),G(!0);const ce=z(I,"pendingRegistrations",X),Ne=g.find(ts=>ts.id===X);if(!Ne)throw new Error("Solicitud no encontrada");if((await KM(We,Ne.email)).length>0)throw new Error("El correo ya está registrado");const St=(await qM(We,Ne.email,Ne.password)).user;await Vr(z(I,"users",St.uid),{username:Ne.username,email:Ne.email,phone:Ne.phone||null,role:Ne.role||"usuario",balance:0,referrerCode:Ne.referrerCode||null,createdAt:he()}),await rs(ce,{status:"approved",updatedAt:he()}),await zc(We),xe(null),C("Éxito","Solicitud de registro aprobada exitosamente")}catch(ce){console.error("Error al aceptar solicitud:",ce),xe(ce.message||"Error al aceptar la solicitud de registro"),C("Error",ce.message||"Error al aceptar la solicitud de registro")}finally{ge(ce=>({...ce,[X]:!1})),G(!1)}},we=async X=>{try{ge(Ne=>({...Ne,[X]:!0}));const ce=z(I,"pendingRegistrations",X);await rs(ce,{status:"denied",updatedAt:he()}),xe(null),C("Éxito","Solicitud de registro rechazada exitosamente")}catch(ce){console.error("Error al rechazar solicitud:",ce),xe(ce.message||"Error al rechazar la solicitud de registro"),C("Error",ce.message||"Error al rechazar la solicitud de registro")}finally{ge(ce=>({...ce,[X]:!1}))}},_e=async()=>{try{await zc(We),A("/")}catch(X){console.error("Error al cerrar sesión:",X),xe(X.message||"Error al cerrar sesión"),C("Error",X.message||"Error al cerrar sesión")}},fe=async X=>{X.preventDefault();try{ge(Tt=>({...Tt,config:!0}));const ce=We.currentUser;if(!ce)throw new Error("Usuario no autenticado");const Ne=z(I,"users",ce.uid);await rs(Ne,{username:i,updatedAt:he()});const rt=X.target.password.value;if(rt){if(rt.length<6)throw new Error("La contraseña debe tener al menos 6 caracteres");await Zg(ce,rt)}xe(null),C("Éxito","Cambios guardados exitosamente")}catch(ce){console.error("Error al guardar cambios:",ce),xe(ce.message||"Error al guardar cambios"),C("Error",ce.message||"Error al guardar cambios")}finally{ge(ce=>({...ce,config:!1}))}},ze=X=>{if(!X)return"No especificada";try{const ce=X.toDate?X.toDate():new Date(X);return isNaN(ce.getTime())?"Fecha inválida":ce.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},Ie=X=>{if(X.status==="pending")return"Pendiente";if(!X.expirationDate)return"Activo";const ce=new Date,Ne=X.expirationDate.toDate?X.expirationDate.toDate():new Date(X.expirationDate);return ce>Ne?"Expirado":"Activo"},Oe=()=>{if(je)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(ue)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(He,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:ue}),e.jsx("button",{onClick:()=>xe(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:i})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Zr,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Ganancias del mes"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",D.month.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"(5 soles por cada usuario)"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Usuarios registrados"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:d}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Total Gananacias: S/ ",D.total.toFixed(2)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Últimos usuarios"}),f.length>0?f.map(X=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:X.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-cyan-900/80 text-cyan-400",children:X.role||"usuario"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:X.email})]},X.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay usuarios registrados"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Solicitudes pendientes"}),g.length>0?g.slice(0,3).map(X=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:X.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-900/80 text-purple-400",children:X.role||"usuario"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:X.email})]},X.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay solicitudes pendientes"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Retiros pendientes"}),M.length>0?M.slice(0,3).map(X=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:X.provider||"Sin proveedor"}),e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-yellow-900/80 text-yellow-400",children:["S/ ",(X.amount||0).toFixed(2)]})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Método: ",X.method||"No especificado"]})]},X.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay retiros pendientes"})]})]})]});case"notificaciones":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Enviar Notificación"}),e.jsxs("form",{onSubmit:se,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Mensaje de la Notificación"}),e.jsx("textarea",{value:ie.message,onChange:X=>k({...ie,message:X.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all resize-y",rows:"5",placeholder:"Escribe el mensaje para los usuarios...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Enviar a los siguientes roles"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["user","affiliate","provider","admin"].map(X=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:ie.roles[X],onChange:ce=>k({...ie,roles:{...ie.roles,[X]:ce.target.checked}}),className:"h-4 w-4 text-cyan-400 focus:ring-cyan-400 border-gray-600 rounded"}),e.jsx("span",{className:"text-gray-300 capitalize",children:X})]},X))})]}),e.jsx("button",{type:"submit",disabled:Re.notification,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium transition-all duration-300 disabled:bg-cyan-800",children:Re.notification?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Enviar Notificación"})]})]});case"usuarios":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Solicitudes de registro"}),g.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Rol"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:g.map(X=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:X.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:X.email}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-cyan-900/80 text-cyan-400",children:X.role||"usuario"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>me(X.id),disabled:Re[X.id],className:"p-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 disabled:bg-green-800",title:"Aceptar",children:Re[X.id]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(Bu,{size:16})}),e.jsx("button",{onClick:()=>we(X.id),disabled:Re[X.id],className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-all duration-300 disabled:bg-red-800",title:"Rechazar",children:Re[X.id]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(pt,{size:16})})]})})]},X.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(cc,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay solicitudes de registro pendientes"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Todos los usuarios (",d,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar usuarios...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:pe,onChange:X=>Le(X.target.value)}),e.jsx(t0,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),w.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Rol"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Saldo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:w.filter(X=>(X.username||"").toLowerCase().includes(pe.toLowerCase())||(X.email||"").toLowerCase().includes(pe.toLowerCase())).map(X=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:X.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:X.email}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-cyan-900/80 text-cyan-400",children:X.role||"usuario"})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(X.balance||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>p(X),disabled:Re[`balance_${X.id}`],className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300 disabled:bg-blue-800",title:"Editar Saldo",children:Re[`balance_${X.id}`]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(zy,{size:16})})})]},X.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(cc,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay usuarios registrados"})]})]})]});case"recargas":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargas pendientes"}),E.length>0?e.jsx("div",{className:"space-y-4",children:E.map(X=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-cyan-900/80 rounded-full flex items-center justify-center text-cyan-400",children:e.jsx(Es,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:X.username||"Sin nombre"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Solicitado: ",ze(X.requestedAt)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-medium text-white",children:["S/ ",(X.amount||0).toFixed(2)]})})]}),e.jsx("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>W(X.id),disabled:Re[X.id],className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-green-800 transition-all duration-300",children:Re[X.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(Bu,{size:18})," Aprobar Recarga"]})}),e.jsx("button",{onClick:()=>Y(X.id),disabled:Re[X.id],className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-red-800 transition-all duration-300",children:Re[X.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(pt,{size:18})," Rechazar Recarga"]})})]})})]},X.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Es,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay recargas pendientes"}),e.jsx("p",{className:"text-gray-400",children:"Todas las solicitudes han sido procesadas"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de recargas"}),H.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:H.map(X=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:X.username||"Sin nombre"}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(X.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${X.status==="aprobado"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:X.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:ze(X.updatedAt)})]},X.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Es,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay historial de recargas"})]})]})]});case"retiros":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Solicitudes de retiro"}),M.length>0?e.jsx("div",{className:"space-y-4",children:M.map(X=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-900/80 rounded-full flex items-center justify-center text-yellow-400",children:e.jsx(Es,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:X.provider||"Sin proveedor"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Email: ",X.providerEmail||"No disponible"]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Solicitado: ",ze(X.createdAt)]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Método: ",X.method||"No especificado"]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Cuenta: ",X.account||"No especificada"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-medium text-white",children:["S/ ",(X.amount||0).toFixed(2)]})})]}),e.jsx("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>re(X.id),disabled:Re[X.id],className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-green-800 transition-all duration-300",children:Re[X.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(Bu,{size:18})," Aprobar Retiro"]})}),e.jsx("button",{onClick:()=>le(X.id),disabled:Re[X.id],className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-red-800 transition-all duration-300",children:Re[X.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(pt,{size:18})," Rechazar Retiro"]})})]})})]},X.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Es,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay retiros pendientes"}),e.jsx("p",{className:"text-gray-400",children:"Todas las solicitudes han sido procesadas"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de retiros"}),Q.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Proveedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Método"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:Q.map(X=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:X.provider||"Sin proveedor"}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(X.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${X.status==="approved"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:X.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:ze(X.updatedAt)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:X.method||"No especificado"})]},X.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Es,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay historial de retiros"})]})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Ventas General"}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center mb-6 border border-gray-600/50",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Total Ventas"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",F.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"Suma de todos los pedidos realizados"})]}),e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de Pedidos"}),u.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Nombre del Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Precio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Proveedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario Comprador"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha y Hora de Compra"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Detalles de la Cuenta"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:u.map(X=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:X.productName||"Sin nombre"}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(X.price||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:X.provider||"Sin proveedor"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:X.customerName||"Sin usuario"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:ze(X.purchaseDate)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Ie(X)==="Pendiente"?"bg-yellow-900/80 text-yellow-400":Ie(X)==="Activo"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:Ie(X)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:X.accountDetails?`Email: ${X.accountDetails.email||"N/A"}, Contraseña: ${X.accountDetails.password||"N/A"}, Perfil: ${X.accountDetails.profile||"N/A"}, PIN: ${X.accountDetails.pin||"No especificado"}`:"N/A"})]},X.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xe,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay pedidos registrados"})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Reporte de ganancias"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias hoy"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",D.day.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"(5 soles por usuario)"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias esta semana"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",D.week.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"(25% del total de usuarios)"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias este mes"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",D.month.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"(5 soles por cada usuario)"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Resumen de ganancias"}),e.jsxs("span",{className:"px-3 py-1 bg-cyan-900/80 text-cyan-400 rounded-full text-sm",children:["Total: S/ ",D.total.toFixed(2)]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-600/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Concepto"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Cálculo"})]})}),e.jsxs("tbody",{className:"bg-gray-700/50 divide-y divide-gray-600/50",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-300",children:"Ganancias por usuario"}),e.jsx("td",{className:"px-4 py-3 text-white",children:"S/ 5.00"}),e.jsx("td",{className:"px-4 py-3 text-gray-400",children:"Fijo por cada usuario registrado"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-300",children:"Total usuarios"}),e.jsx("td",{className:"px-4 py-3 text-white",children:d}),e.jsx("td",{className:"px-4 py-3 text-gray-400",children:"Usuarios activos en el sistema"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-300",children:"Ganancias totales"}),e.jsxs("td",{className:"px-4 py-3 text-white",children:["S/ ",D.total.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-gray-400",children:[d," usuarios × S/ 5.00"]})]})]})]})})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:X=>l(X.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:o,readOnly:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{type:"submit",disabled:Re.config,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-cyan-800",children:Re.config?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:_e,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(It,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(He,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(Vt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(pt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text white",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:"Administrador"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Wm},{id:"notificaciones",label:"Notificaciones",icon:Go},{id:"usuarios",label:"Usuarios",icon:cc},{id:"recargas",label:"Recargas",icon:Es},{id:"retiros",label:"Retiros",icon:Es},{id:"pedidos",label:"Pedidos",icon:Xe},{id:"ganancias",label:"Ganancias",icon:K0},{id:"configuracion",label:"Configuración",icon:qm}].map(X=>e.jsxs("button",{onClick:()=>{a(X.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r===X.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(X.icon,{className:"text-lg"}),e.jsx("span",{children:X.label})]},X.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:_e,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(It,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:Oe()})}),e.jsx(EF,{isOpen:De.isOpen,title:De.title,message:De.message,onClose:v}),e.jsx(CF,{isOpen:N.isOpen,user:N.user,onClose:B,onSave:ae})]})},_F=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Netflix")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,netflix:C.length}))},k=>{S("Error al cargar productos de Netflix"),console.error(k)}),h=be(Z(I,"netflix_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"netflix"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"netflix"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Netflix`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Netflix...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-red-400 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-red-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-red-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-600/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Netflix"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus series y películas favoritas con nuestras cuentas premium de Netflix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-red-400 hover:text-red-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-red-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-red-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-red-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-red-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg                           gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-red-500 hover:bg-red-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-red-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-400 bg-gray-700 border-gray-600 rounded focus:ring-red-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-red-400 hover:text-red-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-red-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-red-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-red-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},DF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Disney")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,disney:C.length}))},k=>{S("Error al cargar productos de Disney"),console.error(k)}),h=be(Z(I,"disney_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"disney"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"disney"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Disney`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-400 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-blue-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-blue-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Disney...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-blue-400 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-blue-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-blue-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616469829719-5db2df7f3a88?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Disney+"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus películas y series favoritas con nuestras cuentas premium de Disney+"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-blue-400 hover:text-blue-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-blue-500 hover:bg-blue-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-400 bg-gray-700 border-gray-600 rounded focus:ring-blue-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-blue-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-blue-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-blue-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-blue-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},AF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Max")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,max:C.length}))},k=>{S("Error al cargar productos de Max"),console.error(k)}),h=be(Z(I,"max_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"max"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"max"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Max`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-purple-400 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-purple-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-purple-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-purple-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Max...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-purple-400 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-purple-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-purple-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-purple-600/80 hover:bg-purple-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-purple-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-purple-500 text-white hover:bg-purple-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-purple-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-purple-600/30 text-white border border-purple-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1626814026160-2237a95fc5a0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Max"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus películas y series favoritas con nuestras cuentas premium de Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-purple-400 hover:text-purple-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-purple-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-purple-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-purple-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-purple-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-purple-500 hover:bg-purple-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-purple-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-purple-400 bg-gray-700 border-gray-600 rounded focus:ring-purple-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-purple-400 hover:text-purple-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-purple-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-purple-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-purple-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-purple-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover-bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsx("div",{animate:"fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Fi,{className:"mr-2 text-purple-600",info:!0,children:"Info"}),"Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 transition-all rounded-md",children:"Aceptar"})})]})})})]})},RF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Spotify")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,spotify:C.length}))},k=>{S("Error al cargar productos de Spotify"),console.error(k)}),h=be(Z(I,"spotify_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"spotify"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"spotify"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Spotify`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Spotify...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-green-500 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-green-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-green-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-500"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Spotify"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Escucha tu música favorita sin interrupciones con nuestras cuentas premium de Spotify"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-green-500 hover:text-green-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-green-500 hover:bg-green-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-green-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-500 bg-gray-700 border-gray-600 rounded focus:ring-green-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-green-500 hover:text-green-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-red-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-green-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-green-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-green-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-green-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},MF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Prime Video")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,primevideo:C.length}))},k=>{S("Error al cargar productos de Prime Video"),console.error(k)}),h=be(Z(I,"primevideo_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"primevideo"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"primevideo"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Prime Video`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-blue-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-blue-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Prime Video...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-blue-400 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-blue-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-blue-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fab26532b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Prime Video"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus películas y series favoritas con nuestras cuentas premium de Prime Video"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-blue-400 hover:text-blue-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-blue-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-orange-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-blue-500 hover:bg-blue-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-400 bg-gray-700 border-gray-600 rounded focus:ring-blue-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-blue-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-blue-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-blue-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-blue-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},LF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Vix")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,vix:C.length}))},k=>{S("Error al cargar productos de Vix"),console.error(k)}),h=be(Z(I,"vix_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");let re=n.providerPhone||"";re||(re=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const W=(Number(se.data().balance)||0)-n.price;if(W<0)throw new Error("Saldo insuficiente");const Y=se.data().orders||[],me={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:re,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"vix"};h.update(ae,{balance:W,orders:[...Y,me]});const _e=(Number(oe.data().balance)||0)+n.price,fe=oe.data().sales||[],ze={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:re,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:_e,sales:[...fe,ze]});const Ie=z(I,"providerBalances",n.providerId),Oe=await h.get(Ie);let X=0;Oe.exists()?X=parseFloat(Oe.data().balance)||0:h.set(Ie,{balance:0,provider:n.providerId,updatedAt:he()});const ce=X+n.price;h.set(Ie,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...me,provider:n.provider,providerId:n.providerId,providerPhone:re,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:ze.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");let A=n.providerPhone||"";A||(A=k.data().phoneNumber||"");const v=(Number(G.data().balance)||0)-n.price;if(v<0)throw new Error("Saldo insuficiente");const p=G.data().orders||[],B={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:A,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vix"};h.update(_,{balance:v,orders:[...p,B]});const se=(Number(k.data().balance)||0)+n.price,ne=k.data().sales||[],oe={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:A,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:se,sales:[...ne,oe]});const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});const Y=W+n.price;h.set(re,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...B,provider:n.provider,providerId:n.providerId,providerPhone:A,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Vix`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Vix...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-red-500 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-red-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-600/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1574375927938-d5a98e8ffe85?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Vix"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus telenovelas y series favoritas con nuestras cuentas premium de Vix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-red-500 hover:text-red-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-red-500 hover:bg-red-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-gray-700 border-gray-600 rounded focus:ring-red-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-red-500 hover:text-red-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},OF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Canva")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,canva:C.length}))},k=>{S("Error al cargar productos de Canva"),console.error(k)}),h=be(Z(I,"canva_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"canva"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"canva"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Canva`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-teal-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-teal-500 text-white rounded-full hover:bg-teal-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-teal-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Canva...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-teal-500 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-teal-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-teal-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-teal-600/80 hover:bg-teal-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-teal-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-teal-500 text-white hover:bg-teal-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-teal-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-teal-600/30 text-white border border-teal-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-teal-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Canva"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Crea diseños impresionantes con nuestras cuentas premium de Canva"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-teal-500 hover:text-teal-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-teal-500 hover:bg-teal-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-teal-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-teal-500 bg-gray-700 border-gray-600 rounded focus:ring-teal-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-teal-500 hover:text-teal-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-teal-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-teal-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-teal-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-teal-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-teal-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Aceptar"})})]})})]})},VF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","ChatGPT")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,chatgpt:C.length}))},k=>{S("Error al cargar productos de ChatGPT"),console.error(k)}),h=be(Z(I,"chatgpt_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"chatgpt"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"chatgpt"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=ChatGPT`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-teal-500 text-white rounded-full hover:bg-teal-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-teal-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en ChatGPT...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-teal-400 focus:border-teal-400 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-teal-400 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-teal-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-teal-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-teal-600/80 hover:bg-teal-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-teal-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-teal-500 text-white hover:bg-teal-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-teal-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-teal-600/30 text-white border border-teal-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-teal-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-teal-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1677442136019-21780ecad339?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de ChatGPT"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a funciones avanzadas de IA con nuestras cuentas premium de ChatGPT"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-teal-400 hover:text-teal-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-teal-500 hover:bg-teal-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-teal-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-400 focus:border-teal-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-400 focus:border-teal-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-teal-400 bg-gray-700 border-gray-600 rounded focus:ring-teal-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-teal-400 hover:text-teal-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-teal-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-teal-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-teal-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-teal-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-teal-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Aceptar"})})]})})]})},zF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Crunchyroll")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,crunchyroll:C.length}))},k=>{S("Error al cargar productos de Crunchyroll"),console.error(k)}),h=be(Z(I,"crunchyroll_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"crunchyroll"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"crunchyroll"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Crunchyroll`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-orange-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-orange-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-orange-500 text-white rounded-full hover:bg-orange-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-orange-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Crunchyroll...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-orange-400 focus:border-orange-400 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-orange-400 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-orange-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-orange-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-orange-600/80 hover:bg-orange-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-orange-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-orange-500 text-white hover:bg-orange-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-orange-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-orange-600/30 text-white border border-orange-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1618336753971-53f2409b1c6f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Crunchyroll"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus animes favoritos sin anuncios con nuestras cuentas premium de Crunchyroll"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-orange-400 hover:text-orange-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-orange-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-orange-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-orange-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-orange-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-orange-500 hover:bg-orange-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-orange-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-400 focus:border-orange-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-400 focus:border-orange-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-orange-400 bg-gray-700 border-gray-600 rounded focus:ring-orange-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-orange-400 hover:text-orange-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-orange-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-orange-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-orange-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-orange-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-orange-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all",children:"Aceptar"})})]})})]})},BF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Redes Sociales")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,redessociales:C.length}))},k=>{S("Error al cargar productos de Redes Sociales"),console.error(k)}),h=be(Z(I,"redessociales_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"redessociales"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"redessociales"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Redes Sociales`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-pink-500 text-white rounded-full hover:bg-pink-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-pink-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Redes Sociales...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-pink-400 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-pink-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-pink-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-pink-600/80 hover:bg-pink-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-pink-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-pink-500 text-white hover:bg-pink-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-pink-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-teal-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-pink-600/30 text-white border border-pink-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Search"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{"className-automatic":"flex items-center space-x-3 p-3 bg-gray-600/50 rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1611162617213-7d7a39e9b1d7')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Redes Sociales"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Potencia tu presencia en línea con cuentas premium de redes sociales"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-pink-400 hover:text-pink-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-pink-500 hover:bg-pink-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-pink-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-pink-400 bg-gray-700 border-gray-600 rounded focus:ring-pink-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-pink-400 hover:text-pink-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-pink-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-pink-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-pink-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-pink-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-pink-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Aceptar"})})]})})]})},FF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Apple Music")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,applemusic:C.length}))},k=>{S("Error al cargar productos de Apple Music"),console.error(k)}),h=be(Z(I,"applemusic_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"applemusic"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"applemusic"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Apple Music`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-gray-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-gray-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gray-500 text-white rounded-full hover:bg-gray-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple Music...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-gray-500 focus:border-gray-500 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-gray-500 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-gray-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-gray-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-gray-600/80 hover:bg-gray-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-gray-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-gray-500 text-white hover:bg-gray-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-teal-400"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-blue-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-gray-600/30 text-white border border-gray-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-500"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514525253161-7a46d19cd819?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Suscripciones Premium de Apple Music"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de millones de canciones con nuestras suscripciones premium de Apple Music"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-gray-500 hover:text-gray-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-gray-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-gray-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-gray-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-gray-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-gray-500 hover:bg-gray-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-gray-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-gray-500 focus:border-gray-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-gray-500 focus:border-gray-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-gray-500 bg-gray-700 border-gray-600 rounded focus:ring-gray-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-gray-500 hover:text-gray-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-gray-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-gray-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-gray-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-gray-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-gray-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-all",children:"Aceptar"})})]})})]})},UF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Apple Tv")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,appletv:C.length}))},k=>{S("Error al cargar productos de Apple TV"),console.error(k)}),h=be(Z(I,"appletv_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"appletv"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"appletv"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Apple Tv`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-400 text-black flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-800 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-gray-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-800 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-gray-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gray-400 text-black rounded-full hover:bg-gray-500 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-800 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-700/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple TV...",className:"w-full px-4 py-2 rounded-full bg-gray-700/50 text-gray-200 border border-gray-600 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-gray-300 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-gray-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-700/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-700/50 hover:bg-gray-600/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-gray-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-gray-400 text-black hover:bg-gray-500 transition-all text-sm",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-gray-300 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-gray-400 text-black hover:bg-gray-500 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-700/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-gray-600/30 text-white border border-gray-400/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-400"}),e.jsx("span",{children:"Apple TV"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-700/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-700/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-700/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-400/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-800/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Apple TV"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de series y películas exclusivas con nuestras cuentas premium de Apple TV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-gray-400 hover:text-gray-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-700/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-600/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-800",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-600/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-600/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-600/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-600/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-600/50 hover:bg-gray-500/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-500/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-600/50 hover:bg-gray-500/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-500/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-black font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-gray-400 hover:bg-gray-500":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-700/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-600/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-gray-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-600/50 text-white border border-gray-500 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-600/50 text-white border border-gray-500 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-gray-400 bg-gray-600 border-gray-500 rounded focus:ring-gray-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-gray-400 hover:text-gray-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-red-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-600/50 text-white rounded-md hover:bg-gray-500/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-gray-400 text-black rounded-md hover:bg-gray-500 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-700/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-600/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-gray-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-600/50 text-white rounded-md hover:bg-gray-500/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-700/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-600/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-gray-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-600/50 text-white rounded-md hover:bg-gray-500/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-gray-400 text-black rounded-md hover:bg-gray-500 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-700/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-600/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-gray-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-600/50 text-white rounded-md hover:bg-gray-500/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-700/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-600/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-gray-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-gray-400 text-black rounded-md hover:bg-gray-500 transition-all",children:"Aceptar"})})]})})]})},$F=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Iptv")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,iptv:C.length}))},k=>{S("Error al cargar productos de IPTV"),console.error(k)}),h=be(Z(I,"iptv_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"iptv"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"iptv"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Iptv`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-blue-700 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-blue-700 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-700 text-white rounded-full hover:bg-blue-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-700 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en IPTV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-700 focus:border-blue-700 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-blue-700 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-blue-700"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-blue-700",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-700/80 hover:bg-blue-800 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-700 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-blue-700 text-white hover:bg-blue-800 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-700",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-700/30 text-white border border-blue-700/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-700/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1485846234645-a62644f84728?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de IPTV"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a miles de canales en vivo y contenido bajo demanda con nuestras cuentas premium de IPTV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-blue-700 hover:text-blue-600 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-blue-700",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-blue-700",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-blue-700",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-blue-700",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-blue-700 hover:bg-blue-800":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-700"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-700 focus:border-blue-700 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-700 focus:border-blue-700 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-700 bg-gray-700 border-gray-600 rounded focus:ring-blue-700"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-blue-700 hover:text-blue-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-blue-700 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-700"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-blue-700"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-blue-700"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-700"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-all",children:"Aceptar"})})]})})]})},WF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Flujo Tv")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,flujotv:C.length}))},k=>{S("Error al cargar productos de Flujo TV"),console.error(k)}),h=be(Z(I,"flujotv_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"flujotv"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"flujotv"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Flujo Tv`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Flujo TV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-red-500 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-red-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-500/80 hover:bg-red-600 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-500/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Flujo TV"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de canales en vivo y contenido exclusivo con nuestras cuentas premium de Flujo TV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-red-500 hover:text-red-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-red-500 hover:bg-red-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-gray-700 border-gray-600 rounded focus:ring-red-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-red-500 hover:text-red-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},qF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Viki Rakuten")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,vikirakuten:C.length}))},k=>{S("Error al cargar productos de Viki Rakuten"),console.error(k)}),h=be(Z(I,"vikirakuten_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"vikirakuten"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vikirakuten"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Viki Rakuten`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-pink-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-pink-500 text-white rounded-full hover:bg-pink-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-pink-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Viki Rakuten...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-pink-500 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-pink-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-pink-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-pink-500/80 hover:bg-pink-600 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-pink-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-pink-500 text-white hover:bg-pink-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-pink-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-pink-500/30 text-white border border-pink-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Viki Rakuten"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de dramas asiáticos, películas y series exclusivas con nuestras cuentas premium de Viki Rakuten"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-pink-500 hover:text-pink-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-pink-500 hover:bg-pink-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-pink-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-pink-500 bg-gray-700 border-gray-600 rounded focus:ring-pink-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-pink-500 hover:text-pink-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-pink-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-pink-600"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-pink-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-pink-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-pink-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Aceptar"})})]})})]})},HF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Pornhub")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,pornhub:C.length}))},k=>{S("Error al cargar productos de Pornhub"),console.error(k)}),h=be(Z(I,"pornhub_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"pornhub"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"pornhub"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Pornhub`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-orange-600 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-orange-600 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-orange-600 text-white rounded-full hover:bg-orange-700 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-orange-600 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Pornhub...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-orange-600 focus:border-orange-600 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-orange-600 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-orange-600"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-orange-600",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-orange-600/80 hover:bg-orange-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-orange-600 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-orange-600 text-white hover:bg-orange-700 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-orange-600",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px 4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"LigaZone"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-orange-600/30 text-white border border-orange-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-orange-600"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-600/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1515378960530-7c0da6231fb1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Pornhub"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de contenido premium con nuestras cuentas de Pornhub"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-orange-600 hover:text-orange-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-orange-600",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-orange-600",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-orange-600",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-orange-600",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-orange-600 hover:bg-orange-700":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-orange-600"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-600 focus:border-orange-600 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-600 focus:border-orange-600 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-orange-600 bg-gray-700 border-gray-600 rounded focus:ring-orange-600"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-orange-600 hover:text-orange-500 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-orange-600 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-orange-600"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-orange-600"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 sm:p-8",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-orange-600"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 sm:p-8",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-orange-600"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-all",children:"Aceptar"})})]})})]})},GF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Paramount")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,paramount:C.length}))},k=>{S("Error al cargar productos de Paramount"),console.error(k)}),h=be(Z(I,"paramount_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"paramount"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"paramount"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Paramount`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-blue-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-blue-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Paramount...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-blue-400 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-blue-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-blue-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-0f1a2a76ef91?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Paramount"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus series y películas favoritas con nuestras cuentas premium de Paramount"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-blue-400 hover:text-blue-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-blue-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-blue-500 hover:bg-blue-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-400 bg-gray-700 border-gray-600 rounded focus:ring-blue-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-blue-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-blue-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-blue-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-blue-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},KF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Licencias")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,licencias:C.length}))},k=>{S("Error al cargar productos de Licencias"),console.error(k)}),h=be(Z(I,"licencias_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"licencias"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"licencias"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}o.role==="user"?D("/dashboard/user"):o.role==="affiliate"?D("/dashboard/affiliate"):o.role==="provider"?D("/dashboard/provider"):o.role==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Licencias`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-gray-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-gray-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gray-600 text-white rounded-full hover:bg-gray-700 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Licencias...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-gray-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-gray-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-gray-600 hover:bg-gray-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-gray-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-gray-600 text-white hover:bg-gray-700 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-gray-600/30 text-white border border-gray-500/50",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-400"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-600/30 flex items-center justify-center text-white font-semibold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1451187580459-43490279c3b4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Licencias Premium"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a una variedad de licencias premium para software y servicios"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Licencias Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-gray-400 hover:text-gray-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-gray-600 hover:bg-gray-700":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-gray-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-gray-400 bg-gray-700 border-gray-600 rounded focus:ring-gray-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-gray-400 hover:text-gray-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-red-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-gray-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-gray-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-gray-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-gray-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-all",children:"Aceptar"})})]})})]})},QF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Capcut")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,capcut:C.length}))},k=>{S("Error al cargar productos de Capcut"),console.error(k)}),h=be(Z(I,"capcut_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");let re=n.providerPhone||"";re||(re=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const W=(Number(se.data().balance)||0)-n.price;if(W<0)throw new Error("Saldo insuficiente");const Y=se.data().orders||[],me={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:re,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"capcut"};h.update(ae,{balance:W,orders:[...Y,me]});const _e=(Number(oe.data().balance)||0)+n.price,fe=oe.data().sales||[],ze={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:re,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:_e,sales:[...fe,ze]});const Ie=z(I,"providerBalances",n.providerId),Oe=await h.get(Ie);let X=0;Oe.exists()?X=parseFloat(Oe.data().balance)||0:h.set(Ie,{balance:0,provider:n.providerId,updatedAt:he()});const ce=X+n.price;h.set(Ie,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...me,provider:n.provider,providerId:n.providerId,providerPhone:re,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:ze.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");let A=n.providerPhone||"";A||(A=k.data().phoneNumber||"");const v=(Number(G.data().balance)||0)-n.price;if(v<0)throw new Error("Saldo insuficiente");const p=G.data().orders||[],B={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:A,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"capcut"};h.update(_,{balance:v,orders:[...p,B]});const se=(Number(k.data().balance)||0)+n.price,ne=k.data().sales||[],oe={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:A,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:se,sales:[...ne,oe]});const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});const Y=W+n.price;h.set(re,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...B,provider:n.provider,providerId:n.providerId,providerPhone:A,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Capcut`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-teal-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-teal-500 text-white rounded-full hover:bg-teal-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-teal-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Capcut...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-teal-500 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-teal-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-teal-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-teal-600/80 hover:bg-teal-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-teal-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-teal-500 text-white hover:bg-teal-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-teal-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-teal-600/30 text-white border border-teal-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-teal-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fab26532b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Capcut"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Crea y edita videos impresionantes con nuestras cuentas premium de Capcut"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-teal-500 hover:text-teal-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-teal-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-teal-500 hover:bg-teal-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-teal-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-teal-500 bg-gray-700 border-gray-600 rounded focus:ring-teal-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-teal-500 hover:text-teal-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-teal-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-teal-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-teal-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-teal-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-teal-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Aceptar"})})]})})]})},YF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Duolingo")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,duolingo:C.length}))},k=>{S("Error al cargar productos de Duolingo"),console.error(k)}),h=be(Z(I,"duolingo_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");let re=n.providerPhone||"";re||(re=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const W=(Number(se.data().balance)||0)-n.price;if(W<0)throw new Error("Saldo insuficiente");const Y=se.data().orders||[],me={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:re,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"duolingo"};h.update(ae,{balance:W,orders:[...Y,me]});const _e=(Number(oe.data().balance)||0)+n.price,fe=oe.data().sales||[],ze={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:re,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:_e,sales:[...fe,ze]});const Ie=z(I,"providerBalances",n.providerId),Oe=await h.get(Ie);let X=0;Oe.exists()?X=parseFloat(Oe.data().balance)||0:h.set(Ie,{balance:0,provider:n.providerId,updatedAt:he()});const ce=X+n.price;h.set(Ie,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...me,provider:n.provider,providerId:n.providerId,providerPhone:re,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:ze.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");let A=n.providerPhone||"";A||(A=k.data().phoneNumber||"");const v=(Number(G.data().balance)||0)-n.price;if(v<0)throw new Error("Saldo insuficiente");const p=G.data().orders||[],B={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:A,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"duolingo"};h.update(_,{balance:v,orders:[...p,B]});const se=(Number(k.data().balance)||0)+n.price,ne=k.data().sales||[],oe={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:A,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:se,sales:[...ne,oe]});const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});const Y=W+n.price;h.set(re,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...B,provider:n.provider,providerId:n.providerId,providerPhone:A,saleDate:new Date().toISOString(),status:"pending",saleId:oe.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Duolingo`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Duolingo...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-green-500 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-green-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-green-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"fluid items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-500"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1524178232363-1fb2b075b655?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Duolingo"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Aprende idiomas de forma divertida y efectiva con nuestras cuentas premium de Duolingo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-green-500 hover:text-green-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-green-500 hover:bg-green-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-green-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-500 bg-gray-700 border-gray-600 rounded focus:ring-green-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-green-500 hover:text-green-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-green-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-green-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-green-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-green-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-green-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},XF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Dgo")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,dgo:C.length}))},k=>{S("Error al cargar productos de Dgo"),console.error(k)}),h=be(Z(I,"dgo_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"dgo"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"dgo"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Dgo`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Dgo...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-blue-400 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-teal-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Dgo"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de streaming en vivo y contenido exclusivo con Dgo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-blue-400 hover:text-blue-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-blue-500 hover:bg-blue-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-400 bg-gray-700 border-gray-600 rounded focus:ring-blue-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-blue-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-blue-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},JF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Liga Max")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,ligamax:C.length}))},k=>{S("Error al cargar productos de Liga Max"),console.error(k)}),h=be(Z(I,"ligamax_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"ligamax"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"ligamax"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Liga Max`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Liga Max...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-red-400 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-red-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-red-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-600/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1518894781321-91d8e090916d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Liga Max"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus eventos deportivos favoritos con nuestras cuentas premium de Liga Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-red-400 hover:text-red-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-red-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-red-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-red-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-red-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-red-500 hover:bg-red-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-red-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-400 bg-gray-700 border-gray-600 rounded focus:ring-red-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-red-400 hover:text-red-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-red-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-red-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-red-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},ZF=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Movistar Play")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,movistarplay:C.length}))},k=>{S("Error al cargar productos de Movistar Play"),console.error(k)}),h=be(Z(I,"movistarplay_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"movistarplay"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"movistarplay"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Movistar Play`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-auto",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Movistar Play...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-blue-400 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm sm:text-base text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm sm:text-base text-gray-200 hover:text-blue-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm sm:text-base",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-md text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/30`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-600"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-600"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-600"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-400"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1593696954577-ab3c6b39ed36?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Movistar Play"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de películas, series y TV en vivo con Movistar Play"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-blue-400 hover:text-blue-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-blue-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-blue-500 hover:bg-blue-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-blue-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-blue-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas las siguientes condiciones:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},eU=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Youtube")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,youtube:C.length}))},k=>{S("Error al cargar productos de Youtube"),console.error(k)}),h=be(Z(I,"youtube_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"youtube"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"youtube"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Youtube`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-auto",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Youtube...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-red-400 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-red-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm sm:text-base text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm sm:text-base text-gray-200 hover:text-red-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm sm:text-base",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-md text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/30`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-600"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-600"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-600/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-600"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-400"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1611162617213-7d7a39e9b1d7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Youtube"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de videos sin anuncios y contenido exclusivo con Youtube Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-red-400 hover:text-red-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-red-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-red-500 hover:bg-red-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-gray-700 border-gray-600 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-red-400 hover:text-red-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-red-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas las siguientes condiciones:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},tU=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Deezer")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,deezer:C.length}))},k=>{S("Error al cargar productos de Deezer"),console.error(k)}),h=be(Z(I,"deezer_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"deezer"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"deezer"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Deezer`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-auto",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Deezer...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-green-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-green-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm sm:text-base text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm sm:text-base text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm sm:text-base",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-md text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/30`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-600"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-600"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-600"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-green-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-500"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-500"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-600"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-400"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a204?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Deezer"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Escucha música sin anuncios y sin conexión con Deezer Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-green-500 hover:bg-green-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-green-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-500 bg-gray-700 border-gray-600 rounded"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-green-400 hover:text-green-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-green-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-green-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-green-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-green-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas las siguientes condiciones:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-pulse",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-green-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},sU=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Tidal")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,tidal:C.length}))},k=>{S("Error al cargar productos de Tidal"),console.error(k)}),h=be(Z(I,"tidal_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"tidal"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"tidal"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Tidal`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-teal-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-teal-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-teal-500 text-white rounded-full hover:bg-teal-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-teal-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Tidal...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-teal-400 focus:border-teal-400 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-teal-400 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-teal-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-teal-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-teal-600/80 hover:bg-teal-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-teal-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-teal-500 text-white hover:bg-teal-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-teal-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-teal-600/30 text-white border border-teal-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-teal-400"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-teal-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a596?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Tidal"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de música en alta fidelidad con nuestras cuentas premium de Tidal"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-teal-400 hover:text-teal-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-teal-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-teal-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-teal-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-teal-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-teal-500 hover:bg-teal-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-teal-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-400 focus:border-teal-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-400 focus:border-teal-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-teal-400 bg-gray-700 border-gray-600 rounded focus:ring-teal-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-teal-400 hover:text-teal-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-teal-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-teal-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-teal-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-teal-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-teal-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Aceptar"})})]})})]})},rU=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","Vpn")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,vpn:C.length}))},k=>{S("Error al cargar productos de VPN"),console.error(k)}),h=be(Z(I,"vpn_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"vpn"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vpn"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Vpn`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en VPN...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-teal-400"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-blue-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1628151016710-795c42cd104f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Servicios Premium de VPN"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Navega con seguridad y privacidad con nuestros servicios premium de VPN"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-blue-500 hover:text-blue-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-blue-500 hover:bg-blue-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-blue-500 hover:text-blue-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},aU=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","WinTv")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,wintv:C.length}))},k=>{S("Error al cargar productos de Win Tv"),console.error(k)}),h=be(Z(I,"wintv_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"wintv"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"wintv"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Win Tv`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-orange-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-orange-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-orange-500 text-white rounded-full hover:bg-orange-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-orange-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Win TV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-orange-500 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-orange-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-orange-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-orange-600/80 hover:bg-orange-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),class:!0,Alcance:"lg font-semibold text-gray-200 hover:text-orange-500 transition-colors",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-orange-500 text-white hover:bg-orange-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-0 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-orange-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-teal-400"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-blue-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-orange-600/30 text-white border border-orange-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Suscripciones Premium de Win TV"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de contenido exclusivo con nuestras suscripciones premium de Win TV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-orange-500 hover:text-orange-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-orange-500",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-orange-500",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-orange-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-orange-500",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-orange-500 hover:bg-orange-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-orange-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-orange-500 bg-gray-700 border-gray-600 rounded focus:ring-orange-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-orange-500 hover:text-orange-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-orange-500 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-orange-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-orange-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-orange-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-orange-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all",children:"Aceptar"})})]})})]})},nU=()=>{const[s,t]=b.useState(!1),[r,a]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(null),[d,x]=b.useState(0),[f,j]=b.useState(!0),[w,S]=b.useState(null),[g,V]=b.useState(null),[E,T]=b.useState(null),[M,L]=b.useState(!1),[H,q]=b.useState(!1),[Q,O]=b.useState(null),[u,U]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[F,J]=b.useState(""),D=Nt(),$=n=>{const N=Number(n);return isNaN(N)?"0.00":N.toFixed(2)};b.useEffect(()=>{const n=Dt(We,async N=>{if(N)try{const h=await Ye(z(I,"users",N.uid));if(h.exists()){const _=h.data();c({id:N.uid,name:_.username||"Usuario",email:N.email,orders:_.orders||[],role:_.role||"user",phone:_.phone||""}),x(Number(_.balance)||0)}else S("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(h){S("Error al cargar datos del usuario"),console.error(h)}else c(null),x(0);j(!1)});return()=>n()},[]),b.useEffect(()=>{const n=be(Z(I,"products"),ve("category","==","BuscaPersonas")),N=Te(n,async k=>{const A=k.docs.map(v=>{const p=v.data();return{id:v.id,...p,price:Number(p.price)||0,stock:Number(p.availableAccounts)||0,accountDetails:p.details||"Detalles no disponibles",terms:p.terms||"Términos del proveedor",provider:p.provider||"Proveedor no especificado",providerId:p.providerId||"",providerPhone:p.providerPhone||"",acceptsOrders:p.status==="A pedido",duration:p.duration||"1 mes",accountType:p.accountType||"No especificado",status:p.status||"En stock",image:p.image||"https://via.placeholder.com/300",renewal:p.renewal||!1,renewalPrice:Number(p.renewalPrice)||Number(p.price)*.9}}),C=await Promise.all(A.map(async v=>{if(!v.provider||v.provider==="Proveedor no especificado")try{if(v.providerId){const p=await Ye(z(I,"users",v.providerId));if(p.exists())return{...v,provider:p.data().username||p.data().email||v.provider,providerPhone:p.data().phoneNumber||v.providerPhone}}}catch(p){console.error("Error al cargar datos del proveedor:",p)}return v}));a(C),U(v=>({...v,buscapersonas:C.length}))},k=>{S("Error al cargar productos de Busca Personas"),console.error(k)}),h=be(Z(I,"buscapersonas_accounts"),ve("status","==","available")),_=Te(h,k=>{const A=k.docs.map(C=>({id:C.id,...C.data(),productId:C.data().productId||"",providerId:C.data().providerId||""}));l(A)},k=>{console.error("Error al cargar cuentas:",k)}),ie=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(k=>{const A=k.toLowerCase().replace(/\s+/g,""),C=be(Z(I,"products"),ve("category","==",k));return Te(C,v=>{U(p=>({...p,[A]:v.docs.length}))},v=>{console.error(`Error al cargar productos de ${k}:`,v)})});return()=>{N(),_(),ie.forEach(k=>k())}},[]);const je=n=>{if(!o){O({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>D("/login")});return}if(d<n.price){O({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){O({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}V({product:n,customerName:o.name,phoneNumber:""})},Ae=async()=>{if(!document.getElementById("termsCheck").checked){S("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(g.phoneNumber)){S("El número de WhatsApp debe tener 9 dígitos");return}try{j(!0);const n=g.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let N=null;n.status==="En stock"?N=await at(I,async h=>{const _=z(I,"products",n.id),G=await h.get(_);if(!G.exists())throw new Error("Producto no encontrado");if(G.data().availableAccounts<=0)throw new Error("No hay cuentas disponibles para este producto");const k=Z(I,`products/${n.id}/accounts`),A=be(k,ve("status","==","available"),Bt(1)),C=await gt(A);if(C.empty)throw new Error("No hay cuentas disponibles en la subcolección");const v=C.docs[0],p=v.ref,B=v.data(),ae=z(I,"users",o.id),se=await h.get(ae);if(!se.exists())throw new Error("Usuario no encontrado");const ne=z(I,"users",n.providerId),oe=await h.get(ne);if(!oe.exists())throw new Error("Proveedor no encontrado");const re=z(I,"providerBalances",n.providerId),le=await h.get(re);let W=0;le.exists()?W=parseFloat(le.data().balance)||0:h.set(re,{balance:0,provider:n.providerId,updatedAt:he()});let Y=n.providerPhone||"";Y||(Y=oe.data().phoneNumber||""),h.update(p,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),h.update(_,{availableAccounts:st(-1),stock:st(-1)});const we=(Number(se.data().balance)||0)-n.price;if(we<0)throw new Error("Saldo insuficiente");const _e=se.data().orders||[],fe={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,status:"active",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},terms:n.terms,type:"buscapersonas"};h.update(ae,{balance:we,orders:[..._e,fe]});const Ie=(Number(oe.data().balance)||0)+n.price,Oe=oe.data().sales||[],X={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:Y,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};h.update(ne,{balance:Ie,sales:[...Oe,X]});const ce=W+n.price;h.set(re,{balance:ce,provider:n.providerId,updatedAt:he()},{merge:!0});const Ne=z(Z(I,"sales"));return h.set(Ne,{...fe,provider:n.provider,providerId:n.providerId,providerPhone:Y,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:B.email||"No proporcionado",password:B.password||"No proporcionado",profile:B.profile||"No proporcionado"},saleId:X.saleId,terms:n.terms}),B}):await at(I,async h=>{const _=z(I,"users",o.id),G=await h.get(_);if(!G.exists())throw new Error("Usuario no encontrado");const ie=z(I,"users",n.providerId),k=await h.get(ie);if(!k.exists())throw new Error("Proveedor no encontrado");const A=z(I,"providerBalances",n.providerId),C=await h.get(A);let v=0;C.exists()?v=parseFloat(C.data().balance)||0:h.set(A,{balance:0,provider:n.providerId,updatedAt:he()});let p=n.providerPhone||"";p||(p=k.data().phoneNumber||"");const ae=(Number(G.data().balance)||0)-n.price;if(ae<0)throw new Error("Saldo insuficiente");const se=G.data().orders||[],ne={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,status:"pending",customerName:g.customerName,customerId:o.id,phoneNumber:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"buscapersonas"};h.update(_,{balance:ae,orders:[...se,ne]});const re=(Number(k.data().balance)||0)+n.price,le=k.data().sales||[],W={saleId:z(Z(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:p,customerId:o.id,customerName:g.customerName,customerPhone:g.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};h.update(ie,{balance:re,sales:[...le,W]});const Y=v+n.price;h.set(A,{balance:Y,provider:n.providerId,updatedAt:he()},{merge:!0});const me=z(Z(I,"sales"));h.set(me,{...ne,provider:n.provider,providerId:n.providerId,providerPhone:p,saleDate:new Date().toISOString(),status:"pending",saleId:W.saleId,terms:n.terms})}),x(h=>h-n.price),c(h=>({...h,orders:[...h.orders,{...g,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(N==null?void 0:N.email)||"No proporcionado",password:(N==null?void 0:N.password)||"No proporcionado",profile:(N==null?void 0:N.profile)||"No proporcionado"}:null}]})),V(null),O({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){S(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{j(!1)}},Re=n=>{T({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{T({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),L(!0)},ue=()=>{if(!o){D("/login");return}(o==null?void 0:o.role)==="user"?D("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?D("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?D("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&D("/dashboard/admin")},xe=n=>{n.preventDefault(),F.trim()&&D(`/search?q=${encodeURIComponent(F)}&category=Busca Personas`)},pe=r.filter(n=>n.name.toLowerCase().includes(F.toLowerCase())),Le=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):n.stock>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),De=n=>{if(!n||typeof n!="string")return"30 días";const N=n.match(/(\d+)\s*(mes|meses)/i);if(N)return`${parseInt(N[1],10)*30} días`;const h=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(h)return`${parseInt(h[1],10)} días`;const _=n.match(/(\d+)/);return _?`${parseInt(_[1],10)} días`:"30 días"};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(ot,{className:"animate-spin text-5xl text-yellow-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(He,{className:"text-5xl text-yellow-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-yellow-500 text-white rounded-full hover:bg-yellow-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(Vt,{size:24})}),e.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-yellow-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Busca Personas...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 transition-all placeholder-gray-500",value:F,onChange:n=>J(n.target.value)}),e.jsx("button",{onClick:xe,className:"absolute right-3 text-gray-400 hover:text-yellow-400 transition-all",children:e.jsx(et,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Ge,{className:"mr-2 text-yellow-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:ue,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Ge,{className:"text-yellow-400",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),D("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-yellow-600/80 hover:bg-yellow-700 transition-all text-sm text-white",children:[e.jsx(It,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-yellow-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>D("/register"),className:"px-4 py-2 rounded-full bg-yellow-500 text-white hover:bg-yellow-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-yellow-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(pt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(y,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(y,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(y,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(y,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(y,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(y,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(y,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(y,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(y,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(y,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(y,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(y,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(y,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(y,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(y,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(y,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(y,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(y,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(y,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(y,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(y,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(y,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(y,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(y,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(y,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(y,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(y,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(y,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(y,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-yellow-600/30 text-white border border-yellow-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Servicios de Busca Personas"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a herramientas avanzadas para localizar personas de manera rápida y segura"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>q(!0),className:"text-sm sm:text-base text-yellow-400 hover:text-yellow-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:pe.map(n=>e.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 w-full border border-gray-700/50 flex flex-col",children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-gray-900",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-contain transition-transform duration-500 hover:scale-105"}),Le(n)]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-white mb-2 truncate",children:n.name}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("p",{className:"text-green-400 text-sm",children:["Renovación - S/ ",$(n.renewalPrice)]}):e.jsx("p",{className:"text-yellow-400 text-sm",children:"Sin renovación"})}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(qt,{className:"text-yellow-400",size:16}),e.jsx("span",{className:"text-gray-400 truncate",children:n.provider})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ot,{className:"text-yellow-400",size:16}),e.jsx("span",{className:"text-gray-400",children:De(n.duration||"1 mes")})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Wt,{className:"text-yellow-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.accountType})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md",children:[e.jsx(Ut,{className:"text-yellow-400",size:16}),e.jsx("span",{className:"text-gray-400",children:n.status})]})]}),e.jsx("div",{className:"flex justify-between items-center mt-auto mb-3",children:e.jsxs("span",{className:"text-white font-bold text-xl sm:text-2xl",children:["S/ ",$(n.price)]})}),e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>Re(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Ue,{className:"mr-2",size:14})," Detalles"]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 py-2 px-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-md text-sm flex items-center justify-center transition-all border border-gray-600/50",children:[e.jsx(Se,{className:"mr-2",size:14})," Términos"]})]}),e.jsxs("button",{onClick:()=>je(n),className:`w-full py-3 px-4 rounded-md text-white font-semibold transition-all flex items-center justify-center gap-2 ${n.stock>0||n.status==="A pedido"?"bg-yellow-500 hover:bg-yellow-600":"bg-gray-600 cursor-not-allowed"}`,disabled:n.stock<=0&&n.status!=="A pedido",children:[e.jsx(Xe,{size:18}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]},n.id))})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-yellow-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:g.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",$(g.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:g.customerName,onChange:n=>V({...g,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:g.phoneNumber,onChange:n=>V({...g,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(g.product),className:"text-yellow-400 hover:text-yellow-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),w&&e.jsxs("p",{className:"text-yellow-400 text-sm flex items-center",children:[e.jsx(He,{className:"mr-2"})," ",w]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:Ae,disabled:f,className:`px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 transition-all flex items-center ${f?"opacity-50 cursor-not-allowed":""}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),E&&!M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-yellow-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",E.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",E.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),E&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-yellow-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",E.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",E.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",E.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{L(!1),T(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),g&&e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 transition-all",children:"Volver a Compra"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-yellow-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),Q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 text-yellow-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:Q.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{Q.onClose&&Q.onClose(),O(null)},className:"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 transition-all",children:"Aceptar"})})]})})]})};b.memo(()=>{const[s,t]=b.useState(null),[r,a]=b.useState(0),[i,l]=b.useState(!0),[o,c]=b.useState(null),[d,x]=b.useState(!1),[f,j]=b.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0}),[w,S]=b.useState(""),g=Nt();b.useEffect(()=>{const T=Dt(We,async M=>{if(M)try{const L=await Ye(z(I,"users",M.uid));if(L.exists()){const H=L.data();t({id:M.uid,name:H.username||"Usuario",email:M.email,orders:H.orders||[],role:H.role||"user"}),a(Number(H.balance)||0)}else c("Usuario no encontrado"),console.error("Usuario no encontrado en la base de datos")}catch(L){c("Error al cargar datos"),console.error(L)}else t(null),a(0);l(!1)});return()=>T()},[]),b.useEffect(()=>{const M=[{name:"Netflix",key:"netflix"},{name:"Spotify",key:"spotify"},{name:"Disney",key:"disney"},{name:"Max",key:"max"},{name:"Prime Video",key:"primevideo"},{name:"Vix",key:"vix"},{name:"Crunchyroll",key:"crunchyroll"},{name:"Canva",key:"canva"},{name:"ChatGPT",key:"chatgpt"},{name:"Redes Sociales",key:"redessociales"}].map(({name:L,key:H})=>{const q=be(Z(I,"products"),ve("category","==",L));return Te(q,Q=>{j(O=>({...O,[H]:Q.docs.length}))},Q=>console.error(`Error loading ${L}:`,Q))});return()=>M.forEach(L=>L())},[]);const V=()=>{if(!s)return g("/login");g({user:"/dashboard/user",affiliate:"/dashboard/affiliate",provider:"/dashboard/provider",admin:"/dashboard/admin"}[s.role]||"/dashboard/user")},E=T=>{T.preventDefault(),w.trim()&&g(`/search?q=${encodeURIComponent(w)}`)};return i?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:[e.jsx(rp,{className:"animate-spin text-4xl text-cyan-500"}),e.jsx("span",{className:"ml-2 text-white",children:"Cargando..."})]}):o?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 p-4",children:[e.jsx(rp,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-400 mb-6",children:o}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Reintentar"})]}):e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-800/80 backdrop-blur-sm",children:e.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(y,{to:"/",className:"flex items-center gap-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-8"}),e.jsx("span",{className:"text-lg font-bold text-cyan-500 hidden sm:block",children:"BlackStreaming"})]})}),e.jsx("form",{onSubmit:E,className:"flex-1 max-w-md mx-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full py-2 px-4 rounded-lg bg-gray-700 text-white border border-gray-600 focus:ring-2 focus:ring-cyan-500 focus:border-transparent",value:w,onChange:T=>S(T.target.value)}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-cyan-500",children:e.jsx(et,{size:20})})]})}),e.jsx("div",{className:"flex items-center gap-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:block text-sm text-gray-300",children:s.name}),e.jsxs("span",{className:"px-3 py-1 bg-gray-700 rounded-lg text-sm",children:["S/ ",r.toFixed(2)]}),e.jsx("button",{onClick:V,className:"p-2 hover:bg-gray-700 rounded-lg",title:"Dashboard",children:e.jsx(Ge,{className:"text-cyan-500",size:20})}),e.jsxs("button",{onClick:()=>{We.signOut(),g("/")},className:"flex items-center gap-1 px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:[e.jsx(It,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>g("/login"),className:"px-3 py-2 text-sm hover:text-cyan-500",children:"Ingresar"}),e.jsx("button",{onClick:()=>g("/register"),className:"px-3 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 text-sm",children:"Registrarse"})]})})]})}),e.jsx("main",{className:"flex-1 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-lg text-center",children:[e.jsx("div",{className:"p-4 bg-gray-800 rounded-full inline-flex mb-6",children:e.jsx(rp,{className:"text-4xl text-cyan-500"})}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"En Mantenimiento"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Estamos mejorando nuestra plataforma para ti."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-300 mb-6",children:[e.jsx(Ot,{className:"text-yellow-500"}),e.jsx("span",{children:"Volveremos pronto."})]}),e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"¿Qué estamos haciendo?"}),e.jsxs("ul",{className:"text-left space-y-2 text-gray-300",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Corrección de errores en el sistema de pedidos"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Solución de fallos en el retiro de dinero"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Arreglo de errores al pasar del sistema al pedido"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Actualización del dashboard del proveedor"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Actualización del dashboard del usuario"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Refuerzo de la seguridad general del sitio"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Mejora en la visualización y diseño"]})]}),e.jsx("button",{onClick:()=>x(!0),className:"mt-4 text-cyan-500 hover:text-cyan-400 underline",children:"Términos Generales"})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-800 rounded-lg max-w-lg w-full max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Términos y Condiciones"}),e.jsx("button",{onClick:()=>x(!1),className:"hover:text-gray-300",children:e.jsx(FiX,{size:24})})]}),e.jsx("div",{className:"space-y-4 text-gray-300",children:[{title:"Proceso de Compra",text:"El proveedor te contactará en 24 horas hábiles para los accesos."},{title:"Garantía",text:"7 días de garantía. El proveedor resolverá problemas o reembolsará."},{title:"Uso Responsable",text:"No nos responsabilizamos por suspensiones por mal uso."},{title:"Soporte",text:"Contacta al proveedor vía WhatsApp."},{title:"Renovaciones",text:"Solicita renovaciones manuales antes del fin del período."}].map(({title:T,text:M},L)=>e.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:T}),e.jsx("p",{children:M})]},L))}),e.jsx("button",{onClick:()=>x(!1),className:"w-full mt-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-800 py-6",children:e.jsxs("div",{className:"container mx-auto px-4 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:jt,alt:"BlackStreaming",className:"h-6"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-500",children:"BlackStreaming"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Desarrollado por Saiph"})]})})]})});const iU=b.createContext(),oU=({children:s})=>{const t=sy(fd),[r,a]=b.useState(null),[i,l]=b.useState(!0);return b.useEffect(()=>{const o=Dt(t,c=>{a(c),l(!1)});return()=>o()},[]),e.jsx(iU.Provider,{value:{user:r,loading:i},children:!i&&s})},lU=()=>e.jsx(QC,{children:e.jsxs(e.Fragment,{children:[e.jsx(kt,{path:"/",element:e.jsx(oF,{})}),e.jsx(kt,{path:"/login",element:e.jsx(hF,{})}),e.jsx(kt,{path:"/register",element:e.jsx(bF,{})}),e.jsx(kt,{path:"/dashboard/user",element:e.jsx(NF,{})}),e.jsx(kt,{path:"/dashboard/affiliate",element:e.jsx(IF,{})}),e.jsx(kt,{path:"/dashboard/provider",element:e.jsx(SF,{})}),e.jsx(kt,{path:"/dashboard/admin",element:e.jsx(TF,{})}),e.jsx(kt,{path:"/netflix",element:e.jsx(_F,{})}),e.jsx(kt,{path:"/disney",element:e.jsx(DF,{})}),e.jsx(kt,{path:"/max",element:e.jsx(AF,{})}),e.jsx(kt,{path:"/spotify",element:e.jsx(RF,{})}),e.jsx(kt,{path:"/primevideo",element:e.jsx(MF,{})}),e.jsx(kt,{path:"/vix",element:e.jsx(LF,{})}),e.jsx(kt,{path:"/canva",element:e.jsx(OF,{})}),e.jsx(kt,{path:"/chatgpt",element:e.jsx(VF,{})}),e.jsx(kt,{path:"/crunchyroll",element:e.jsx(zF,{})}),e.jsx(kt,{path:"/redessociales",element:e.jsx(BF,{})}),e.jsx(kt,{path:"/applemusic",element:e.jsx(FF,{})}),e.jsx(kt,{path:"/appletv",element:e.jsx(UF,{})}),e.jsx(kt,{path:"/iptv",element:e.jsx($F,{})}),e.jsx(kt,{path:"/flujotv",element:e.jsx(WF,{})}),e.jsx(kt,{path:"/vikirakuten",element:e.jsx(qF,{})}),e.jsx(kt,{path:"/pornhub",element:e.jsx(HF,{})}),e.jsx(kt,{path:"/paramount",element:e.jsx(GF,{})}),e.jsx(kt,{path:"/licencias",element:e.jsx(KF,{})}),e.jsx(kt,{path:"/capcut",element:e.jsx(QF,{})}),e.jsx(kt,{path:"/duolingo",element:e.jsx(YF,{})}),e.jsx(kt,{path:"/dgo",element:e.jsx(XF,{})}),e.jsx(kt,{path:"/ligamax",element:e.jsx(JF,{})}),e.jsx(kt,{path:"/movistarplay",element:e.jsx(ZF,{})}),e.jsx(kt,{path:"/youtube",element:e.jsx(eU,{})}),e.jsx(kt,{path:"/deezer",element:e.jsx(tU,{})}),e.jsx(kt,{path:"/tidal",element:e.jsx(sU,{})}),e.jsx(kt,{path:"/vpn",element:e.jsx(rU,{})}),e.jsx(kt,{path:"/wintv",element:e.jsx(aU,{})}),e.jsx(kt,{path:"/buscapersonas",element:e.jsx(nU,{})})]})});ap.createRoot(document.getElementById("root")).render(e.jsx(Pn.StrictMode,{children:e.jsx(bT,{children:e.jsx(oU,{children:e.jsx(lU,{})})})}));
