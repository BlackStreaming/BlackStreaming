(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(i){if(i.ep)return;i.ep=!0;const c=a(i);fetch(i.href,c)}})();function uy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var yf={exports:{}},M0={},vf={exports:{}},Ar={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mk;function p9(){if(Mk)return Ar;Mk=1;var r=Symbol.for("react.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),k=Symbol.iterator;function S(re){return re===null||typeof re!="object"?null:(re=k&&re[k]||re["@@iterator"],typeof re=="function"?re:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,P={};function b(re,J,de){this.props=re,this.context=J,this.refs=P,this.updater=de||_}b.prototype.isReactComponent={},b.prototype.setState=function(re,J){if(typeof re!="object"&&typeof re!="function"&&re!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,re,J,"setState")},b.prototype.forceUpdate=function(re){this.updater.enqueueForceUpdate(this,re,"forceUpdate")};function B(){}B.prototype=b.prototype;function L(re,J,de){this.props=re,this.context=J,this.refs=P,this.updater=de||_}var O=L.prototype=new B;O.constructor=L,I(O,b.prototype),O.isPureReactComponent=!0;var te=Array.isArray,ne=Object.prototype.hasOwnProperty,be={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function z(re,J,de){var ce,he={},q=null,l=null;if(J!=null)for(ce in J.ref!==void 0&&(l=J.ref),J.key!==void 0&&(q=""+J.key),J)ne.call(J,ce)&&!H.hasOwnProperty(ce)&&(he[ce]=J[ce]);var Xe=arguments.length-2;if(Xe===1)he.children=de;else if(1<Xe){for(var qe=Array(Xe),Ae=0;Ae<Xe;Ae++)qe[Ae]=arguments[Ae+2];he.children=qe}if(re&&re.defaultProps)for(ce in Xe=re.defaultProps,Xe)he[ce]===void 0&&(he[ce]=Xe[ce]);return{$$typeof:r,type:re,key:q,ref:l,props:he,_owner:be.current}}function F(re,J){return{$$typeof:r,type:re.type,key:J,ref:re.ref,props:re.props,_owner:re._owner}}function v(re){return typeof re=="object"&&re!==null&&re.$$typeof===r}function ie(re){var J={"=":"=0",":":"=2"};return"$"+re.replace(/[=:]/g,function(de){return J[de]})}var X=/\/+/g;function ae(re,J){return typeof re=="object"&&re!==null&&re.key!=null?ie(""+re.key):J.toString(36)}function We(re,J,de,ce,he){var q=typeof re;(q==="undefined"||q==="boolean")&&(re=null);var l=!1;if(re===null)l=!0;else switch(q){case"string":case"number":l=!0;break;case"object":switch(re.$$typeof){case r:case t:l=!0}}if(l)return l=re,he=he(l),re=ce===""?"."+ae(l,0):ce,te(he)?(de="",re!=null&&(de=re.replace(X,"$&/")+"/"),We(he,J,de,"",function(Ae){return Ae})):he!=null&&(v(he)&&(he=F(he,de+(!he.key||l&&l.key===he.key?"":(""+he.key).replace(X,"$&/")+"/")+re)),J.push(he)),1;if(l=0,ce=ce===""?".":ce+":",te(re))for(var Xe=0;Xe<re.length;Xe++){q=re[Xe];var qe=ce+ae(q,Xe);l+=We(q,J,de,qe,he)}else if(qe=S(re),typeof qe=="function")for(re=qe.call(re),Xe=0;!(q=re.next()).done;)q=q.value,qe=ce+ae(q,Xe++),l+=We(q,J,de,qe,he);else if(q==="object")throw J=String(re),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(re).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return l}function ct(re,J,de){if(re==null)return re;var ce=[],he=0;return We(re,ce,"","",function(q){return J.call(de,q,he++)}),ce}function ft(re){if(re._status===-1){var J=re._result;J=J(),J.then(function(de){(re._status===0||re._status===-1)&&(re._status=1,re._result=de)},function(de){(re._status===0||re._status===-1)&&(re._status=2,re._result=de)}),re._status===-1&&(re._status=0,re._result=J)}if(re._status===1)return re._result.default;throw re._result}var ot={current:null},Ee={transition:null},Ie={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:Ee,ReactCurrentOwner:be};function _e(){throw Error("act(...) is not supported in production builds of React.")}return Ar.Children={map:ct,forEach:function(re,J,de){ct(re,function(){J.apply(this,arguments)},de)},count:function(re){var J=0;return ct(re,function(){J++}),J},toArray:function(re){return ct(re,function(J){return J})||[]},only:function(re){if(!v(re))throw Error("React.Children.only expected to receive a single React element child.");return re}},Ar.Component=b,Ar.Fragment=a,Ar.Profiler=i,Ar.PureComponent=L,Ar.StrictMode=n,Ar.Suspense=m,Ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ie,Ar.act=_e,Ar.cloneElement=function(re,J,de){if(re==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+re+".");var ce=I({},re.props),he=re.key,q=re.ref,l=re._owner;if(J!=null){if(J.ref!==void 0&&(q=J.ref,l=be.current),J.key!==void 0&&(he=""+J.key),re.type&&re.type.defaultProps)var Xe=re.type.defaultProps;for(qe in J)ne.call(J,qe)&&!H.hasOwnProperty(qe)&&(ce[qe]=J[qe]===void 0&&Xe!==void 0?Xe[qe]:J[qe])}var qe=arguments.length-2;if(qe===1)ce.children=de;else if(1<qe){Xe=Array(qe);for(var Ae=0;Ae<qe;Ae++)Xe[Ae]=arguments[Ae+2];ce.children=Xe}return{$$typeof:r,type:re.type,key:he,ref:q,props:ce,_owner:l}},Ar.createContext=function(re){return re={$$typeof:o,_currentValue:re,_currentValue2:re,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},re.Provider={$$typeof:c,_context:re},re.Consumer=re},Ar.createElement=z,Ar.createFactory=function(re){var J=z.bind(null,re);return J.type=re,J},Ar.createRef=function(){return{current:null}},Ar.forwardRef=function(re){return{$$typeof:u,render:re}},Ar.isValidElement=v,Ar.lazy=function(re){return{$$typeof:g,_payload:{_status:-1,_result:re},_init:ft}},Ar.memo=function(re,J){return{$$typeof:x,type:re,compare:J===void 0?null:J}},Ar.startTransition=function(re){var J=Ee.transition;Ee.transition={};try{re()}finally{Ee.transition=J}},Ar.unstable_act=_e,Ar.useCallback=function(re,J){return ot.current.useCallback(re,J)},Ar.useContext=function(re){return ot.current.useContext(re)},Ar.useDebugValue=function(){},Ar.useDeferredValue=function(re){return ot.current.useDeferredValue(re)},Ar.useEffect=function(re,J){return ot.current.useEffect(re,J)},Ar.useId=function(){return ot.current.useId()},Ar.useImperativeHandle=function(re,J,de){return ot.current.useImperativeHandle(re,J,de)},Ar.useInsertionEffect=function(re,J){return ot.current.useInsertionEffect(re,J)},Ar.useLayoutEffect=function(re,J){return ot.current.useLayoutEffect(re,J)},Ar.useMemo=function(re,J){return ot.current.useMemo(re,J)},Ar.useReducer=function(re,J,de){return ot.current.useReducer(re,J,de)},Ar.useRef=function(re){return ot.current.useRef(re)},Ar.useState=function(re){return ot.current.useState(re)},Ar.useSyncExternalStore=function(re,J,de){return ot.current.useSyncExternalStore(re,J,de)},Ar.useTransition=function(){return ot.current.useTransition()},Ar.version="18.3.1",Ar}var Fk;function hy(){return Fk||(Fk=1,vf.exports=p9()),vf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ok;function x9(){if(Ok)return M0;Ok=1;var r=hy(),t=Symbol.for("react.element"),a=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function o(u,m,x){var g,k={},S=null,_=null;x!==void 0&&(S=""+x),m.key!==void 0&&(S=""+m.key),m.ref!==void 0&&(_=m.ref);for(g in m)n.call(m,g)&&!c.hasOwnProperty(g)&&(k[g]=m[g]);if(u&&u.defaultProps)for(g in m=u.defaultProps,m)k[g]===void 0&&(k[g]=m[g]);return{$$typeof:t,type:u,key:S,ref:_,props:k,_owner:i.current}}return M0.Fragment=a,M0.jsx=o,M0.jsxs=o,M0}var Lk;function g9(){return Lk||(Lk=1,yf.exports=x9()),yf.exports}var e=g9(),p=hy();const Sn=uy(p);var Cm={},wf={exports:{}},sn={},kf={exports:{}},Nf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bk;function f9(){return Bk||(Bk=1,(function(r){function t(Ee,Ie){var _e=Ee.length;Ee.push(Ie);e:for(;0<_e;){var re=_e-1>>>1,J=Ee[re];if(0<i(J,Ie))Ee[re]=Ie,Ee[_e]=J,_e=re;else break e}}function a(Ee){return Ee.length===0?null:Ee[0]}function n(Ee){if(Ee.length===0)return null;var Ie=Ee[0],_e=Ee.pop();if(_e!==Ie){Ee[0]=_e;e:for(var re=0,J=Ee.length,de=J>>>1;re<de;){var ce=2*(re+1)-1,he=Ee[ce],q=ce+1,l=Ee[q];if(0>i(he,_e))q<J&&0>i(l,he)?(Ee[re]=l,Ee[q]=_e,re=q):(Ee[re]=he,Ee[ce]=_e,re=ce);else if(q<J&&0>i(l,_e))Ee[re]=l,Ee[q]=_e,re=q;else break e}}return Ie}function i(Ee,Ie){var _e=Ee.sortIndex-Ie.sortIndex;return _e!==0?_e:Ee.id-Ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var o=Date,u=o.now();r.unstable_now=function(){return o.now()-u}}var m=[],x=[],g=1,k=null,S=3,_=!1,I=!1,P=!1,b=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(Ee){for(var Ie=a(x);Ie!==null;){if(Ie.callback===null)n(x);else if(Ie.startTime<=Ee)n(x),Ie.sortIndex=Ie.expirationTime,t(m,Ie);else break;Ie=a(x)}}function te(Ee){if(P=!1,O(Ee),!I)if(a(m)!==null)I=!0,ft(ne);else{var Ie=a(x);Ie!==null&&ot(te,Ie.startTime-Ee)}}function ne(Ee,Ie){I=!1,P&&(P=!1,B(z),z=-1),_=!0;var _e=S;try{for(O(Ie),k=a(m);k!==null&&(!(k.expirationTime>Ie)||Ee&&!ie());){var re=k.callback;if(typeof re=="function"){k.callback=null,S=k.priorityLevel;var J=re(k.expirationTime<=Ie);Ie=r.unstable_now(),typeof J=="function"?k.callback=J:k===a(m)&&n(m),O(Ie)}else n(m);k=a(m)}if(k!==null)var de=!0;else{var ce=a(x);ce!==null&&ot(te,ce.startTime-Ie),de=!1}return de}finally{k=null,S=_e,_=!1}}var be=!1,H=null,z=-1,F=5,v=-1;function ie(){return!(r.unstable_now()-v<F)}function X(){if(H!==null){var Ee=r.unstable_now();v=Ee;var Ie=!0;try{Ie=H(!0,Ee)}finally{Ie?ae():(be=!1,H=null)}}else be=!1}var ae;if(typeof L=="function")ae=function(){L(X)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,ct=We.port2;We.port1.onmessage=X,ae=function(){ct.postMessage(null)}}else ae=function(){b(X,0)};function ft(Ee){H=Ee,be||(be=!0,ae())}function ot(Ee,Ie){z=b(function(){Ee(r.unstable_now())},Ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Ee){Ee.callback=null},r.unstable_continueExecution=function(){I||_||(I=!0,ft(ne))},r.unstable_forceFrameRate=function(Ee){0>Ee||125<Ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<Ee?Math.floor(1e3/Ee):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return a(m)},r.unstable_next=function(Ee){switch(S){case 1:case 2:case 3:var Ie=3;break;default:Ie=S}var _e=S;S=Ie;try{return Ee()}finally{S=_e}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Ee,Ie){switch(Ee){case 1:case 2:case 3:case 4:case 5:break;default:Ee=3}var _e=S;S=Ee;try{return Ie()}finally{S=_e}},r.unstable_scheduleCallback=function(Ee,Ie,_e){var re=r.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?re+_e:re):_e=re,Ee){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=_e+J,Ee={id:g++,callback:Ie,priorityLevel:Ee,startTime:_e,expirationTime:J,sortIndex:-1},_e>re?(Ee.sortIndex=_e,t(x,Ee),a(m)===null&&Ee===a(x)&&(P?(B(z),z=-1):P=!0,ot(te,_e-re))):(Ee.sortIndex=J,t(m,Ee),I||_||(I=!0,ft(ne))),Ee},r.unstable_shouldYield=ie,r.unstable_wrapCallback=function(Ee){var Ie=S;return function(){var _e=S;S=Ie;try{return Ee.apply(this,arguments)}finally{S=_e}}}})(Nf)),Nf}var zk;function b9(){return zk||(zk=1,kf.exports=f9()),kf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vk;function y9(){if(Vk)return sn;Vk=1;var r=hy(),t=b9();function a(d){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+d,f=1;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function c(d,h){o(d,h),o(d+"Capture",h)}function o(d,h){for(i[d]=h,d=0;d<h.length;d++)n.add(h[d])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},k={};function S(d){return m.call(k,d)?!0:m.call(g,d)?!1:x.test(d)?k[d]=!0:(g[d]=!0,!1)}function _(d,h,f,T){if(f!==null&&f.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return T?!1:f!==null?!f.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function I(d,h,f,T){if(h===null||typeof h>"u"||_(d,h,f,T))return!0;if(T)return!1;if(f!==null)switch(f.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function P(d,h,f,T,D,G,oe){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=T,this.attributeNamespace=D,this.mustUseProperty=f,this.propertyName=d,this.type=h,this.sanitizeURL=G,this.removeEmptyString=oe}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){b[d]=new P(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var h=d[0];b[h]=new P(h,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){b[d]=new P(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){b[d]=new P(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){b[d]=new P(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){b[d]=new P(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){b[d]=new P(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){b[d]=new P(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){b[d]=new P(d,5,!1,d.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function L(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var h=d.replace(B,L);b[h]=new P(h,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var h=d.replace(B,L);b[h]=new P(h,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var h=d.replace(B,L);b[h]=new P(h,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){b[d]=new P(d,1,!1,d.toLowerCase(),null,!1,!1)}),b.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){b[d]=new P(d,1,!1,d.toLowerCase(),null,!0,!0)});function O(d,h,f,T){var D=b.hasOwnProperty(h)?b[h]:null;(D!==null?D.type!==0:T||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(I(h,f,D,T)&&(f=null),T||D===null?S(h)&&(f===null?d.removeAttribute(h):d.setAttribute(h,""+f)):D.mustUseProperty?d[D.propertyName]=f===null?D.type===3?!1:"":f:(h=D.attributeName,T=D.attributeNamespace,f===null?d.removeAttribute(h):(D=D.type,f=D===3||D===4&&f===!0?"":""+f,T?d.setAttributeNS(T,h,f):d.setAttribute(h,f))))}var te=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),be=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),ie=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),We=Symbol.for("react.suspense_list"),ct=Symbol.for("react.memo"),ft=Symbol.for("react.lazy"),ot=Symbol.for("react.offscreen"),Ee=Symbol.iterator;function Ie(d){return d===null||typeof d!="object"?null:(d=Ee&&d[Ee]||d["@@iterator"],typeof d=="function"?d:null)}var _e=Object.assign,re;function J(d){if(re===void 0)try{throw Error()}catch(f){var h=f.stack.trim().match(/\n( *(at )?)/);re=h&&h[1]||""}return`
`+re+d}var de=!1;function ce(d,h){if(!d||de)return"";de=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(nt){var T=nt}Reflect.construct(d,[],h)}else{try{h.call()}catch(nt){T=nt}d.call(h.prototype)}else{try{throw Error()}catch(nt){T=nt}d()}}catch(nt){if(nt&&T&&typeof nt.stack=="string"){for(var D=nt.stack.split(`
`),G=T.stack.split(`
`),oe=D.length-1,Ce=G.length-1;1<=oe&&0<=Ce&&D[oe]!==G[Ce];)Ce--;for(;1<=oe&&0<=Ce;oe--,Ce--)if(D[oe]!==G[Ce]){if(oe!==1||Ce!==1)do if(oe--,Ce--,0>Ce||D[oe]!==G[Ce]){var Re=`
`+D[oe].replace(" at new "," at ");return d.displayName&&Re.includes("<anonymous>")&&(Re=Re.replace("<anonymous>",d.displayName)),Re}while(1<=oe&&0<=Ce);break}}}finally{de=!1,Error.prepareStackTrace=f}return(d=d?d.displayName||d.name:"")?J(d):""}function he(d){switch(d.tag){case 5:return J(d.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return d=ce(d.type,!1),d;case 11:return d=ce(d.type.render,!1),d;case 1:return d=ce(d.type,!0),d;default:return""}}function q(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case H:return"Fragment";case be:return"Portal";case F:return"Profiler";case z:return"StrictMode";case ae:return"Suspense";case We:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case ie:return(d.displayName||"Context")+".Consumer";case v:return(d._context.displayName||"Context")+".Provider";case X:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case ct:return h=d.displayName||null,h!==null?h:q(d.type)||"Memo";case ft:h=d._payload,d=d._init;try{return q(d(h))}catch{}}return null}function l(d){var h=d.type;switch(d.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=h.render,d=d.displayName||d.name||"",h.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(h);case 8:return h===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function Xe(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function qe(d){var h=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Ae(d){var h=qe(d)?"checked":"value",f=Object.getOwnPropertyDescriptor(d.constructor.prototype,h),T=""+d[h];if(!d.hasOwnProperty(h)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var D=f.get,G=f.set;return Object.defineProperty(d,h,{configurable:!0,get:function(){return D.call(this)},set:function(oe){T=""+oe,G.call(this,oe)}}),Object.defineProperty(d,h,{enumerable:f.enumerable}),{getValue:function(){return T},setValue:function(oe){T=""+oe},stopTracking:function(){d._valueTracker=null,delete d[h]}}}}function Oe(d){d._valueTracker||(d._valueTracker=Ae(d))}function kt(d){if(!d)return!1;var h=d._valueTracker;if(!h)return!0;var f=h.getValue(),T="";return d&&(T=qe(d)?d.checked?"true":"false":d.value),d=T,d!==f?(h.setValue(d),!0):!1}function Lt(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function jt(d,h){var f=h.checked;return _e({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??d._wrapperState.initialChecked})}function Wt(d,h){var f=h.defaultValue==null?"":h.defaultValue,T=h.checked!=null?h.checked:h.defaultChecked;f=Xe(h.value!=null?h.value:f),d._wrapperState={initialChecked:T,initialValue:f,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function Tt(d,h){h=h.checked,h!=null&&O(d,"checked",h,!1)}function tt(d,h){Tt(d,h);var f=Xe(h.value),T=h.type;if(f!=null)T==="number"?(f===0&&d.value===""||d.value!=f)&&(d.value=""+f):d.value!==""+f&&(d.value=""+f);else if(T==="submit"||T==="reset"){d.removeAttribute("value");return}h.hasOwnProperty("value")?Ue(d,h.type,f):h.hasOwnProperty("defaultValue")&&Ue(d,h.type,Xe(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(d.defaultChecked=!!h.defaultChecked)}function yt(d,h,f){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var T=h.type;if(!(T!=="submit"&&T!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+d._wrapperState.initialValue,f||h===d.value||(d.value=h),d.defaultValue=h}f=d.name,f!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,f!==""&&(d.name=f)}function Ue(d,h,f){(h!=="number"||Lt(d.ownerDocument)!==d)&&(f==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+f&&(d.defaultValue=""+f))}var lt=Array.isArray;function Te(d,h,f,T){if(d=d.options,h){h={};for(var D=0;D<f.length;D++)h["$"+f[D]]=!0;for(f=0;f<d.length;f++)D=h.hasOwnProperty("$"+d[f].value),d[f].selected!==D&&(d[f].selected=D),D&&T&&(d[f].defaultSelected=!0)}else{for(f=""+Xe(f),h=null,D=0;D<d.length;D++){if(d[D].value===f){d[D].selected=!0,T&&(d[D].defaultSelected=!0);return}h!==null||d[D].disabled||(h=d[D])}h!==null&&(h.selected=!0)}}function Ze(d,h){if(h.dangerouslySetInnerHTML!=null)throw Error(a(91));return _e({},h,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function st(d,h){var f=h.value;if(f==null){if(f=h.children,h=h.defaultValue,f!=null){if(h!=null)throw Error(a(92));if(lt(f)){if(1<f.length)throw Error(a(93));f=f[0]}h=f}h==null&&(h=""),f=h}d._wrapperState={initialValue:Xe(f)}}function pt(d,h){var f=Xe(h.value),T=Xe(h.defaultValue);f!=null&&(f=""+f,f!==d.value&&(d.value=f),h.defaultValue==null&&d.defaultValue!==f&&(d.defaultValue=f)),T!=null&&(d.defaultValue=""+T)}function $e(d){var h=d.textContent;h===d._wrapperState.initialValue&&h!==""&&h!==null&&(d.value=h)}function s(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function E(d,h){return d==null||d==="http://www.w3.org/1999/xhtml"?s(h):d==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var y,R=(function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,f,T,D){MSApp.execUnsafeLocalFunction(function(){return d(h,f,T,D)})}:d})(function(d,h){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=h;else{for(y=y||document.createElement("div"),y.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=y.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;h.firstChild;)d.appendChild(h.firstChild)}});function V(d,h){if(h){var f=d.firstChild;if(f&&f===d.lastChild&&f.nodeType===3){f.nodeValue=h;return}}d.textContent=h}var ee={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];Object.keys(ee).forEach(function(d){fe.forEach(function(h){h=h+d.charAt(0).toUpperCase()+d.substring(1),ee[h]=ee[d]})});function ge(d,h,f){return h==null||typeof h=="boolean"||h===""?"":f||typeof h!="number"||h===0||ee.hasOwnProperty(d)&&ee[d]?(""+h).trim():h+"px"}function A(d,h){d=d.style;for(var f in h)if(h.hasOwnProperty(f)){var T=f.indexOf("--")===0,D=ge(f,h[f],T);f==="float"&&(f="cssFloat"),T?d.setProperty(f,D):d[f]=D}}var Y=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function U(d,h){if(h){if(Y[d]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(a(137,d));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(a(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(a(61))}if(h.style!=null&&typeof h.style!="object")throw Error(a(62))}}function N(d,h){if(d.indexOf("-")===-1)return typeof h.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C=null;function K(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var we=null,je=null,Me=null;function Ye(d){if(d=w0(d)){if(typeof we!="function")throw Error(a(280));var h=d.stateNode;h&&(h=Bh(h),we(d.stateNode,d.type,h))}}function Be(d){je?Me?Me.push(d):Me=[d]:je=d}function Se(){if(je){var d=je,h=Me;if(Me=je=null,Ye(d),h)for(d=0;d<h.length;d++)Ye(h[d])}}function _t(d,h){return d(h)}function At(){}var Le=!1;function He(d,h,f){if(Le)return d(h,f);Le=!0;try{return _t(d,h,f)}finally{Le=!1,(je!==null||Me!==null)&&(At(),Se())}}function Pt(d,h){var f=d.stateNode;if(f===null)return null;var T=Bh(f);if(T===null)return null;f=T[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(d=d.type,T=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!T;break e;default:d=!1}if(d)return null;if(f&&typeof f!="function")throw Error(a(231,h,typeof f));return f}var gt=!1;if(u)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){gt=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch{gt=!1}function Nt(d,h,f,T,D,G,oe,Ce,Re){var nt=Array.prototype.slice.call(arguments,3);try{h.apply(f,nt)}catch($t){this.onError($t)}}var Ht=!1,It=null,le=!1,ye=null,pe={onError:function(d){Ht=!0,It=d}};function xe(d,h,f,T,D,G,oe,Ce,Re){Ht=!1,It=null,Nt.apply(pe,arguments)}function ke(d,h,f,T,D,G,oe,Ce,Re){if(xe.apply(this,arguments),Ht){if(Ht){var nt=It;Ht=!1,It=null}else throw Error(a(198));le||(le=!0,ye=nt)}}function Ne(d){var h=d,f=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,(h.flags&4098)!==0&&(f=h.return),d=h.return;while(d)}return h.tag===3?f:null}function Ge(d){if(d.tag===13){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function ut(d){if(Ne(d)!==d)throw Error(a(188))}function Je(d){var h=d.alternate;if(!h){if(h=Ne(d),h===null)throw Error(a(188));return h!==d?null:d}for(var f=d,T=h;;){var D=f.return;if(D===null)break;var G=D.alternate;if(G===null){if(T=D.return,T!==null){f=T;continue}break}if(D.child===G.child){for(G=D.child;G;){if(G===f)return ut(D),d;if(G===T)return ut(D),h;G=G.sibling}throw Error(a(188))}if(f.return!==T.return)f=D,T=G;else{for(var oe=!1,Ce=D.child;Ce;){if(Ce===f){oe=!0,f=D,T=G;break}if(Ce===T){oe=!0,T=D,f=G;break}Ce=Ce.sibling}if(!oe){for(Ce=G.child;Ce;){if(Ce===f){oe=!0,f=G,T=D;break}if(Ce===T){oe=!0,T=G,f=D;break}Ce=Ce.sibling}if(!oe)throw Error(a(189))}}if(f.alternate!==T)throw Error(a(190))}if(f.tag!==3)throw Error(a(188));return f.stateNode.current===f?d:h}function et(d){return d=Je(d),d!==null?at(d):null}function at(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var h=at(d);if(h!==null)return h;d=d.sibling}return null}var St=t.unstable_scheduleCallback,qt=t.unstable_cancelCallback,Zt=t.unstable_shouldYield,Ft=t.unstable_requestPaint,Dt=t.unstable_now,Sr=t.unstable_getCurrentPriorityLevel,ia=t.unstable_ImmediatePriority,aa=t.unstable_UserBlockingPriority,ua=t.unstable_NormalPriority,Yn=t.unstable_LowPriority,yi=t.unstable_IdlePriority,mn=null,Ua=null;function _o(d){if(Ua&&typeof Ua.onCommitFiberRoot=="function")try{Ua.onCommitFiberRoot(mn,d,void 0,(d.current.flags&128)===128)}catch{}}var Sa=Math.clz32?Math.clz32:bh,n0=Math.log,fh=Math.LN2;function bh(d){return d>>>=0,d===0?32:31-(n0(d)/fh|0)|0}var Pc=64,Ic=4194304;function Po(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function $l(d,h){var f=d.pendingLanes;if(f===0)return 0;var T=0,D=d.suspendedLanes,G=d.pingedLanes,oe=f&268435455;if(oe!==0){var Ce=oe&~D;Ce!==0?T=Po(Ce):(G&=oe,G!==0&&(T=Po(G)))}else oe=f&~D,oe!==0?T=Po(oe):G!==0&&(T=Po(G));if(T===0)return 0;if(h!==0&&h!==T&&(h&D)===0&&(D=T&-T,G=h&-h,D>=G||D===16&&(G&4194240)!==0))return h;if((T&4)!==0&&(T|=f&16),h=d.entangledLanes,h!==0)for(d=d.entanglements,h&=T;0<h;)f=31-Sa(h),D=1<<f,T|=d[f],h&=~D;return T}function Kx(d,h){switch(d){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wi(d,h){for(var f=d.suspendedLanes,T=d.pingedLanes,D=d.expirationTimes,G=d.pendingLanes;0<G;){var oe=31-Sa(G),Ce=1<<oe,Re=D[oe];Re===-1?((Ce&f)===0||(Ce&T)!==0)&&(D[oe]=Kx(Ce,h)):Re<=h&&(d.expiredLanes|=Ce),G&=~Ce}}function pn(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Dl(){var d=Pc;return Pc<<=1,(Pc&4194240)===0&&(Pc=64),d}function Io(d){for(var h=[],f=0;31>f;f++)h.push(d);return h}function $o(d,h,f){d.pendingLanes|=h,h!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,h=31-Sa(h),d[h]=f}function ka(d,h){var f=d.pendingLanes&~h;d.pendingLanes=h,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=h,d.mutableReadLanes&=h,d.entangledLanes&=h,h=d.entanglements;var T=d.eventTimes;for(d=d.expirationTimes;0<f;){var D=31-Sa(f),G=1<<D;h[D]=0,T[D]=-1,d[D]=-1,f&=~G}}function Do(d,h){var f=d.entangledLanes|=h;for(d=d.entanglements;f;){var T=31-Sa(f),D=1<<T;D&h|d[T]&h&&(d[T]|=h),f&=~D}}var Wr=0;function Ao(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var yh,$c,vh,wh,kh,i0=!1,vi=[],xs=null,Qn=null,Xn=null,Ro=new Map,$n=new Map,wi=[],Yx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nh(d,h){switch(d){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":Ro.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":$n.delete(h.pointerId)}}function Xs(d,h,f,T,D,G){return d===null||d.nativeEvent!==G?(d={blockedOn:h,domEventName:f,eventSystemFlags:T,nativeEvent:G,targetContainers:[D]},h!==null&&(h=w0(h),h!==null&&$c(h)),d):(d.eventSystemFlags|=T,h=d.targetContainers,D!==null&&h.indexOf(D)===-1&&h.push(D),d)}function Qx(d,h,f,T,D){switch(h){case"focusin":return xs=Xs(xs,d,h,f,T,D),!0;case"dragenter":return Qn=Xs(Qn,d,h,f,T,D),!0;case"mouseover":return Xn=Xs(Xn,d,h,f,T,D),!0;case"pointerover":var G=D.pointerId;return Ro.set(G,Xs(Ro.get(G)||null,d,h,f,T,D)),!0;case"gotpointercapture":return G=D.pointerId,$n.set(G,Xs($n.get(G)||null,d,h,f,T,D)),!0}return!1}function jh(d){var h=Ol(d.target);if(h!==null){var f=Ne(h);if(f!==null){if(h=f.tag,h===13){if(h=Ge(f),h!==null){d.blockedOn=h,kh(d.priority,function(){vh(f)});return}}else if(h===3&&f.stateNode.current.memoizedState.isDehydrated){d.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}d.blockedOn=null}function Gi(d){if(d.blockedOn!==null)return!1;for(var h=d.targetContainers;0<h.length;){var f=Dc(d.domEventName,d.eventSystemFlags,h[0],d.nativeEvent);if(f===null){f=d.nativeEvent;var T=new f.constructor(f.type,f);C=T,f.target.dispatchEvent(T),C=null}else return h=w0(f),h!==null&&$c(h),d.blockedOn=f,!1;h.shift()}return!0}function Al(d,h,f){Gi(d)&&f.delete(h)}function Ch(){i0=!1,xs!==null&&Gi(xs)&&(xs=null),Qn!==null&&Gi(Qn)&&(Qn=null),Xn!==null&&Gi(Xn)&&(Xn=null),Ro.forEach(Al),$n.forEach(Al)}function Jn(d,h){d.blockedOn===h&&(d.blockedOn=null,i0||(i0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ch)))}function Zn(d){function h(D){return Jn(D,d)}if(0<vi.length){Jn(vi[0],d);for(var f=1;f<vi.length;f++){var T=vi[f];T.blockedOn===d&&(T.blockedOn=null)}}for(xs!==null&&Jn(xs,d),Qn!==null&&Jn(Qn,d),Xn!==null&&Jn(Xn,d),Ro.forEach(h),$n.forEach(h),f=0;f<wi.length;f++)T=wi[f],T.blockedOn===d&&(T.blockedOn=null);for(;0<wi.length&&(f=wi[0],f.blockedOn===null);)jh(f),f.blockedOn===null&&wi.shift()}var Ki=te.ReactCurrentBatchConfig,Mo=!0;function Ia(d,h,f,T){var D=Wr,G=Ki.transition;Ki.transition=null;try{Wr=1,o0(d,h,f,T)}finally{Wr=D,Ki.transition=G}}function Xx(d,h,f,T){var D=Wr,G=Ki.transition;Ki.transition=null;try{Wr=4,o0(d,h,f,T)}finally{Wr=D,Ki.transition=G}}function o0(d,h,f,T){if(Mo){var D=Dc(d,h,f,T);if(D===null)lg(d,h,T,Rl,f),Nh(d,T);else if(Qx(D,d,h,f,T))T.stopPropagation();else if(Nh(d,T),h&4&&-1<Yx.indexOf(d)){for(;D!==null;){var G=w0(D);if(G!==null&&yh(G),G=Dc(d,h,f,T),G===null&&lg(d,h,T,Rl,f),G===D)break;D=G}D!==null&&T.stopPropagation()}else lg(d,h,T,null,f)}}var Rl=null;function Dc(d,h,f,T){if(Rl=null,d=K(T),d=Ol(d),d!==null)if(h=Ne(d),h===null)d=null;else if(f=h.tag,f===13){if(d=Ge(h),d!==null)return d;d=null}else if(f===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;d=null}else h!==d&&(d=null);return Rl=d,null}function l0(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sr()){case ia:return 1;case aa:return 4;case ua:case Yn:return 16;case yi:return 536870912;default:return 16}default:return 16}}var xn=null,Ac=null,Js=null;function c0(){if(Js)return Js;var d,h=Ac,f=h.length,T,D="value"in xn?xn.value:xn.textContent,G=D.length;for(d=0;d<f&&h[d]===D[d];d++);var oe=f-d;for(T=1;T<=oe&&h[f-T]===D[G-T];T++);return Js=D.slice(d,1<T?1-T:void 0)}function Rc(d){var h=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&h===13&&(d=13)):d=h,d===10&&(d=13),32<=d||d===13?d:0}function ki(){return!0}function d0(){return!1}function gs(d){function h(f,T,D,G,oe){this._reactName=f,this._targetInst=D,this.type=T,this.nativeEvent=G,this.target=oe,this.currentTarget=null;for(var Ce in d)d.hasOwnProperty(Ce)&&(f=d[Ce],this[Ce]=f?f(G):G[Ce]);return this.isDefaultPrevented=(G.defaultPrevented!=null?G.defaultPrevented:G.returnValue===!1)?ki:d0,this.isPropagationStopped=d0,this}return _e(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=ki)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=ki)},persist:function(){},isPersistent:ki}),h}var ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mc=gs(ei),Ni=_e({},ei,{view:0,detail:0}),Jx=gs(Ni),Fc,Yi,Fo,Ml=_e({},Ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ji,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Fo&&(Fo&&d.type==="mousemove"?(Fc=d.screenX-Fo.screenX,Yi=d.screenY-Fo.screenY):Yi=Fc=0,Fo=d),Fc)},movementY:function(d){return"movementY"in d?d.movementY:Yi}}),Oc=gs(Ml),u0=_e({},Ml,{dataTransfer:0}),Th=gs(u0),Lc=_e({},Ni,{relatedTarget:0}),Bc=gs(Lc),Sh=_e({},ei,{animationName:0,elapsedTime:0,pseudoElement:0}),Qi=gs(Sh),Eh=_e({},ei,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),_h=gs(Eh),Ph=_e({},ei,{data:0}),h0=gs(Ph),zc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ih={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $h(d){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(d):(d=Ih[d])?!!h[d]:!1}function ji(){return $h}var w=_e({},Ni,{key:function(d){if(d.key){var h=zc[d.key]||d.key;if(h!=="Unidentified")return h}return d.type==="keypress"?(d=Rc(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Vs[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ji,charCode:function(d){return d.type==="keypress"?Rc(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Rc(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),W=gs(w),Z=_e({},Ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),me=gs(Z),Ke=_e({},Ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ji}),ht=gs(Ke),Yt=_e({},ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),ha=gs(Yt),ts=_e({},Ml,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Gr=gs(ts),is=[9,13,27,32],Ka=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var gn=u&&"TextEvent"in window&&!Dn,Fl=u&&(!Ka||Dn&&8<Dn&&11>=Dn),Vc=" ",Pw=!1;function Iw(d,h){switch(d){case"keyup":return is.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $w(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Uc=!1;function uI(d,h){switch(d){case"compositionend":return $w(h);case"keypress":return h.which!==32?null:(Pw=!0,Vc);case"textInput":return d=h.data,d===Vc&&Pw?null:d;default:return null}}function hI(d,h){if(Uc)return d==="compositionend"||!Ka&&Iw(d,h)?(d=c0(),Js=Ac=xn=null,Uc=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Fl&&h.locale!=="ko"?null:h.data;default:return null}}var mI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dw(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h==="input"?!!mI[d.type]:h==="textarea"}function Aw(d,h,f,T){Be(T),h=Fh(h,"onChange"),0<h.length&&(f=new Mc("onChange","change",null,f,T),d.push({event:f,listeners:h}))}var m0=null,p0=null;function pI(d){Jw(d,0)}function Dh(d){var h=Kc(d);if(kt(h))return d}function xI(d,h){if(d==="change")return h}var Rw=!1;if(u){var Zx;if(u){var eg="oninput"in document;if(!eg){var Mw=document.createElement("div");Mw.setAttribute("oninput","return;"),eg=typeof Mw.oninput=="function"}Zx=eg}else Zx=!1;Rw=Zx&&(!document.documentMode||9<document.documentMode)}function Fw(){m0&&(m0.detachEvent("onpropertychange",Ow),p0=m0=null)}function Ow(d){if(d.propertyName==="value"&&Dh(p0)){var h=[];Aw(h,p0,d,K(d)),He(pI,h)}}function gI(d,h,f){d==="focusin"?(Fw(),m0=h,p0=f,m0.attachEvent("onpropertychange",Ow)):d==="focusout"&&Fw()}function fI(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Dh(p0)}function bI(d,h){if(d==="click")return Dh(h)}function yI(d,h){if(d==="input"||d==="change")return Dh(h)}function vI(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var ti=typeof Object.is=="function"?Object.is:vI;function x0(d,h){if(ti(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var f=Object.keys(d),T=Object.keys(h);if(f.length!==T.length)return!1;for(T=0;T<f.length;T++){var D=f[T];if(!m.call(h,D)||!ti(d[D],h[D]))return!1}return!0}function Lw(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Bw(d,h){var f=Lw(d);d=0;for(var T;f;){if(f.nodeType===3){if(T=d+f.textContent.length,d<=h&&T>=h)return{node:f,offset:h-d};d=T}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Lw(f)}}function zw(d,h){return d&&h?d===h?!0:d&&d.nodeType===3?!1:h&&h.nodeType===3?zw(d,h.parentNode):"contains"in d?d.contains(h):d.compareDocumentPosition?!!(d.compareDocumentPosition(h)&16):!1:!1}function Vw(){for(var d=window,h=Lt();h instanceof d.HTMLIFrameElement;){try{var f=typeof h.contentWindow.location.href=="string"}catch{f=!1}if(f)d=h.contentWindow;else break;h=Lt(d.document)}return h}function tg(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h&&(h==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||h==="textarea"||d.contentEditable==="true")}function wI(d){var h=Vw(),f=d.focusedElem,T=d.selectionRange;if(h!==f&&f&&f.ownerDocument&&zw(f.ownerDocument.documentElement,f)){if(T!==null&&tg(f)){if(h=T.start,d=T.end,d===void 0&&(d=h),"selectionStart"in f)f.selectionStart=h,f.selectionEnd=Math.min(d,f.value.length);else if(d=(h=f.ownerDocument||document)&&h.defaultView||window,d.getSelection){d=d.getSelection();var D=f.textContent.length,G=Math.min(T.start,D);T=T.end===void 0?G:Math.min(T.end,D),!d.extend&&G>T&&(D=T,T=G,G=D),D=Bw(f,G);var oe=Bw(f,T);D&&oe&&(d.rangeCount!==1||d.anchorNode!==D.node||d.anchorOffset!==D.offset||d.focusNode!==oe.node||d.focusOffset!==oe.offset)&&(h=h.createRange(),h.setStart(D.node,D.offset),d.removeAllRanges(),G>T?(d.addRange(h),d.extend(oe.node,oe.offset)):(h.setEnd(oe.node,oe.offset),d.addRange(h)))}}for(h=[],d=f;d=d.parentNode;)d.nodeType===1&&h.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<h.length;f++)d=h[f],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var kI=u&&"documentMode"in document&&11>=document.documentMode,Hc=null,rg=null,g0=null,ag=!1;function Uw(d,h,f){var T=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;ag||Hc==null||Hc!==Lt(T)||(T=Hc,"selectionStart"in T&&tg(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),g0&&x0(g0,T)||(g0=T,T=Fh(rg,"onSelect"),0<T.length&&(h=new Mc("onSelect","select",null,h,f),d.push({event:h,listeners:T}),h.target=Hc)))}function Ah(d,h){var f={};return f[d.toLowerCase()]=h.toLowerCase(),f["Webkit"+d]="webkit"+h,f["Moz"+d]="moz"+h,f}var qc={animationend:Ah("Animation","AnimationEnd"),animationiteration:Ah("Animation","AnimationIteration"),animationstart:Ah("Animation","AnimationStart"),transitionend:Ah("Transition","TransitionEnd")},sg={},Hw={};u&&(Hw=document.createElement("div").style,"AnimationEvent"in window||(delete qc.animationend.animation,delete qc.animationiteration.animation,delete qc.animationstart.animation),"TransitionEvent"in window||delete qc.transitionend.transition);function Rh(d){if(sg[d])return sg[d];if(!qc[d])return d;var h=qc[d],f;for(f in h)if(h.hasOwnProperty(f)&&f in Hw)return sg[d]=h[f];return d}var qw=Rh("animationend"),Ww=Rh("animationiteration"),Gw=Rh("animationstart"),Kw=Rh("transitionend"),Yw=new Map,Qw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oo(d,h){Yw.set(d,h),c(h,[d])}for(var ng=0;ng<Qw.length;ng++){var ig=Qw[ng],NI=ig.toLowerCase(),jI=ig[0].toUpperCase()+ig.slice(1);Oo(NI,"on"+jI)}Oo(qw,"onAnimationEnd"),Oo(Ww,"onAnimationIteration"),Oo(Gw,"onAnimationStart"),Oo("dblclick","onDoubleClick"),Oo("focusin","onFocus"),Oo("focusout","onBlur"),Oo(Kw,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var f0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CI=new Set("cancel close invalid load scroll toggle".split(" ").concat(f0));function Xw(d,h,f){var T=d.type||"unknown-event";d.currentTarget=f,ke(T,h,void 0,d),d.currentTarget=null}function Jw(d,h){h=(h&4)!==0;for(var f=0;f<d.length;f++){var T=d[f],D=T.event;T=T.listeners;e:{var G=void 0;if(h)for(var oe=T.length-1;0<=oe;oe--){var Ce=T[oe],Re=Ce.instance,nt=Ce.currentTarget;if(Ce=Ce.listener,Re!==G&&D.isPropagationStopped())break e;Xw(D,Ce,nt),G=Re}else for(oe=0;oe<T.length;oe++){if(Ce=T[oe],Re=Ce.instance,nt=Ce.currentTarget,Ce=Ce.listener,Re!==G&&D.isPropagationStopped())break e;Xw(D,Ce,nt),G=Re}}}if(le)throw d=ye,le=!1,ye=null,d}function Ea(d,h){var f=h[pg];f===void 0&&(f=h[pg]=new Set);var T=d+"__bubble";f.has(T)||(Zw(h,d,2,!1),f.add(T))}function og(d,h,f){var T=0;h&&(T|=4),Zw(f,d,T,h)}var Mh="_reactListening"+Math.random().toString(36).slice(2);function b0(d){if(!d[Mh]){d[Mh]=!0,n.forEach(function(f){f!=="selectionchange"&&(CI.has(f)||og(f,!1,d),og(f,!0,d))});var h=d.nodeType===9?d:d.ownerDocument;h===null||h[Mh]||(h[Mh]=!0,og("selectionchange",!1,h))}}function Zw(d,h,f,T){switch(l0(h)){case 1:var D=Ia;break;case 4:D=Xx;break;default:D=o0}f=D.bind(null,h,f,d),D=void 0,!gt||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(D=!0),T?D!==void 0?d.addEventListener(h,f,{capture:!0,passive:D}):d.addEventListener(h,f,!0):D!==void 0?d.addEventListener(h,f,{passive:D}):d.addEventListener(h,f,!1)}function lg(d,h,f,T,D){var G=T;if((h&1)===0&&(h&2)===0&&T!==null)e:for(;;){if(T===null)return;var oe=T.tag;if(oe===3||oe===4){var Ce=T.stateNode.containerInfo;if(Ce===D||Ce.nodeType===8&&Ce.parentNode===D)break;if(oe===4)for(oe=T.return;oe!==null;){var Re=oe.tag;if((Re===3||Re===4)&&(Re=oe.stateNode.containerInfo,Re===D||Re.nodeType===8&&Re.parentNode===D))return;oe=oe.return}for(;Ce!==null;){if(oe=Ol(Ce),oe===null)return;if(Re=oe.tag,Re===5||Re===6){T=G=oe;continue e}Ce=Ce.parentNode}}T=T.return}He(function(){var nt=G,$t=K(f),Mt=[];e:{var Et=Yw.get(d);if(Et!==void 0){var tr=Mc,ir=d;switch(d){case"keypress":if(Rc(f)===0)break e;case"keydown":case"keyup":tr=W;break;case"focusin":ir="focus",tr=Bc;break;case"focusout":ir="blur",tr=Bc;break;case"beforeblur":case"afterblur":tr=Bc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tr=Oc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tr=Th;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tr=ht;break;case qw:case Ww:case Gw:tr=Qi;break;case Kw:tr=ha;break;case"scroll":tr=Jx;break;case"wheel":tr=Gr;break;case"copy":case"cut":case"paste":tr=_h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tr=me}var lr=(h&4)!==0,Ha=!lr&&d==="scroll",Qe=lr?Et!==null?Et+"Capture":null:Et;lr=[];for(var ze=nt,rt;ze!==null;){rt=ze;var Bt=rt.stateNode;if(rt.tag===5&&Bt!==null&&(rt=Bt,Qe!==null&&(Bt=Pt(ze,Qe),Bt!=null&&lr.push(y0(ze,Bt,rt)))),Ha)break;ze=ze.return}0<lr.length&&(Et=new tr(Et,ir,null,f,$t),Mt.push({event:Et,listeners:lr}))}}if((h&7)===0){e:{if(Et=d==="mouseover"||d==="pointerover",tr=d==="mouseout"||d==="pointerout",Et&&f!==C&&(ir=f.relatedTarget||f.fromElement)&&(Ol(ir)||ir[Xi]))break e;if((tr||Et)&&(Et=$t.window===$t?$t:(Et=$t.ownerDocument)?Et.defaultView||Et.parentWindow:window,tr?(ir=f.relatedTarget||f.toElement,tr=nt,ir=ir?Ol(ir):null,ir!==null&&(Ha=Ne(ir),ir!==Ha||ir.tag!==5&&ir.tag!==6)&&(ir=null)):(tr=null,ir=nt),tr!==ir)){if(lr=Oc,Bt="onMouseLeave",Qe="onMouseEnter",ze="mouse",(d==="pointerout"||d==="pointerover")&&(lr=me,Bt="onPointerLeave",Qe="onPointerEnter",ze="pointer"),Ha=tr==null?Et:Kc(tr),rt=ir==null?Et:Kc(ir),Et=new lr(Bt,ze+"leave",tr,f,$t),Et.target=Ha,Et.relatedTarget=rt,Bt=null,Ol($t)===nt&&(lr=new lr(Qe,ze+"enter",ir,f,$t),lr.target=rt,lr.relatedTarget=Ha,Bt=lr),Ha=Bt,tr&&ir)t:{for(lr=tr,Qe=ir,ze=0,rt=lr;rt;rt=Wc(rt))ze++;for(rt=0,Bt=Qe;Bt;Bt=Wc(Bt))rt++;for(;0<ze-rt;)lr=Wc(lr),ze--;for(;0<rt-ze;)Qe=Wc(Qe),rt--;for(;ze--;){if(lr===Qe||Qe!==null&&lr===Qe.alternate)break t;lr=Wc(lr),Qe=Wc(Qe)}lr=null}else lr=null;tr!==null&&e1(Mt,Et,tr,lr,!1),ir!==null&&Ha!==null&&e1(Mt,Ha,ir,lr,!0)}}e:{if(Et=nt?Kc(nt):window,tr=Et.nodeName&&Et.nodeName.toLowerCase(),tr==="select"||tr==="input"&&Et.type==="file")var hr=xI;else if(Dw(Et))if(Rw)hr=yI;else{hr=fI;var kr=gI}else(tr=Et.nodeName)&&tr.toLowerCase()==="input"&&(Et.type==="checkbox"||Et.type==="radio")&&(hr=bI);if(hr&&(hr=hr(d,nt))){Aw(Mt,hr,f,$t);break e}kr&&kr(d,Et,nt),d==="focusout"&&(kr=Et._wrapperState)&&kr.controlled&&Et.type==="number"&&Ue(Et,"number",Et.value)}switch(kr=nt?Kc(nt):window,d){case"focusin":(Dw(kr)||kr.contentEditable==="true")&&(Hc=kr,rg=nt,g0=null);break;case"focusout":g0=rg=Hc=null;break;case"mousedown":ag=!0;break;case"contextmenu":case"mouseup":case"dragend":ag=!1,Uw(Mt,f,$t);break;case"selectionchange":if(kI)break;case"keydown":case"keyup":Uw(Mt,f,$t)}var Nr;if(Ka)e:{switch(d){case"compositionstart":var _r="onCompositionStart";break e;case"compositionend":_r="onCompositionEnd";break e;case"compositionupdate":_r="onCompositionUpdate";break e}_r=void 0}else Uc?Iw(d,f)&&(_r="onCompositionEnd"):d==="keydown"&&f.keyCode===229&&(_r="onCompositionStart");_r&&(Fl&&f.locale!=="ko"&&(Uc||_r!=="onCompositionStart"?_r==="onCompositionEnd"&&Uc&&(Nr=c0()):(xn=$t,Ac="value"in xn?xn.value:xn.textContent,Uc=!0)),kr=Fh(nt,_r),0<kr.length&&(_r=new h0(_r,d,null,f,$t),Mt.push({event:_r,listeners:kr}),Nr?_r.data=Nr:(Nr=$w(f),Nr!==null&&(_r.data=Nr)))),(Nr=gn?uI(d,f):hI(d,f))&&(nt=Fh(nt,"onBeforeInput"),0<nt.length&&($t=new h0("onBeforeInput","beforeinput",null,f,$t),Mt.push({event:$t,listeners:nt}),$t.data=Nr))}Jw(Mt,h)})}function y0(d,h,f){return{instance:d,listener:h,currentTarget:f}}function Fh(d,h){for(var f=h+"Capture",T=[];d!==null;){var D=d,G=D.stateNode;D.tag===5&&G!==null&&(D=G,G=Pt(d,f),G!=null&&T.unshift(y0(d,G,D)),G=Pt(d,h),G!=null&&T.push(y0(d,G,D))),d=d.return}return T}function Wc(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function e1(d,h,f,T,D){for(var G=h._reactName,oe=[];f!==null&&f!==T;){var Ce=f,Re=Ce.alternate,nt=Ce.stateNode;if(Re!==null&&Re===T)break;Ce.tag===5&&nt!==null&&(Ce=nt,D?(Re=Pt(f,G),Re!=null&&oe.unshift(y0(f,Re,Ce))):D||(Re=Pt(f,G),Re!=null&&oe.push(y0(f,Re,Ce)))),f=f.return}oe.length!==0&&d.push({event:h,listeners:oe})}var TI=/\r\n?/g,SI=/\u0000|\uFFFD/g;function t1(d){return(typeof d=="string"?d:""+d).replace(TI,`
`).replace(SI,"")}function Oh(d,h,f){if(h=t1(h),t1(d)!==h&&f)throw Error(a(425))}function Lh(){}var cg=null,dg=null;function ug(d,h){return d==="textarea"||d==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var hg=typeof setTimeout=="function"?setTimeout:void 0,EI=typeof clearTimeout=="function"?clearTimeout:void 0,r1=typeof Promise=="function"?Promise:void 0,_I=typeof queueMicrotask=="function"?queueMicrotask:typeof r1<"u"?function(d){return r1.resolve(null).then(d).catch(PI)}:hg;function PI(d){setTimeout(function(){throw d})}function mg(d,h){var f=h,T=0;do{var D=f.nextSibling;if(d.removeChild(f),D&&D.nodeType===8)if(f=D.data,f==="/$"){if(T===0){d.removeChild(D),Zn(h);return}T--}else f!=="$"&&f!=="$?"&&f!=="$!"||T++;f=D}while(f);Zn(h)}function Lo(d){for(;d!=null;d=d.nextSibling){var h=d.nodeType;if(h===1||h===3)break;if(h===8){if(h=d.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return d}function a1(d){d=d.previousSibling;for(var h=0;d;){if(d.nodeType===8){var f=d.data;if(f==="$"||f==="$!"||f==="$?"){if(h===0)return d;h--}else f==="/$"&&h++}d=d.previousSibling}return null}var Gc=Math.random().toString(36).slice(2),Ci="__reactFiber$"+Gc,v0="__reactProps$"+Gc,Xi="__reactContainer$"+Gc,pg="__reactEvents$"+Gc,II="__reactListeners$"+Gc,$I="__reactHandles$"+Gc;function Ol(d){var h=d[Ci];if(h)return h;for(var f=d.parentNode;f;){if(h=f[Xi]||f[Ci]){if(f=h.alternate,h.child!==null||f!==null&&f.child!==null)for(d=a1(d);d!==null;){if(f=d[Ci])return f;d=a1(d)}return h}d=f,f=d.parentNode}return null}function w0(d){return d=d[Ci]||d[Xi],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Kc(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(a(33))}function Bh(d){return d[v0]||null}var xg=[],Yc=-1;function Bo(d){return{current:d}}function _a(d){0>Yc||(d.current=xg[Yc],xg[Yc]=null,Yc--)}function Ca(d,h){Yc++,xg[Yc]=d.current,d.current=h}var zo={},Is=Bo(zo),Zs=Bo(!1),Ll=zo;function Qc(d,h){var f=d.type.contextTypes;if(!f)return zo;var T=d.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===h)return T.__reactInternalMemoizedMaskedChildContext;var D={},G;for(G in f)D[G]=h[G];return T&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=h,d.__reactInternalMemoizedMaskedChildContext=D),D}function en(d){return d=d.childContextTypes,d!=null}function zh(){_a(Zs),_a(Is)}function s1(d,h,f){if(Is.current!==zo)throw Error(a(168));Ca(Is,h),Ca(Zs,f)}function n1(d,h,f){var T=d.stateNode;if(h=h.childContextTypes,typeof T.getChildContext!="function")return f;T=T.getChildContext();for(var D in T)if(!(D in h))throw Error(a(108,l(d)||"Unknown",D));return _e({},f,T)}function Vh(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||zo,Ll=Is.current,Ca(Is,d),Ca(Zs,Zs.current),!0}function i1(d,h,f){var T=d.stateNode;if(!T)throw Error(a(169));f?(d=n1(d,h,Ll),T.__reactInternalMemoizedMergedChildContext=d,_a(Zs),_a(Is),Ca(Is,d)):_a(Zs),Ca(Zs,f)}var Ji=null,Uh=!1,gg=!1;function o1(d){Ji===null?Ji=[d]:Ji.push(d)}function DI(d){Uh=!0,o1(d)}function Vo(){if(!gg&&Ji!==null){gg=!0;var d=0,h=Wr;try{var f=Ji;for(Wr=1;d<f.length;d++){var T=f[d];do T=T(!0);while(T!==null)}Ji=null,Uh=!1}catch(D){throw Ji!==null&&(Ji=Ji.slice(d+1)),St(ia,Vo),D}finally{Wr=h,gg=!1}}return null}var Xc=[],Jc=0,Hh=null,qh=0,An=[],Rn=0,Bl=null,Zi=1,eo="";function zl(d,h){Xc[Jc++]=qh,Xc[Jc++]=Hh,Hh=d,qh=h}function l1(d,h,f){An[Rn++]=Zi,An[Rn++]=eo,An[Rn++]=Bl,Bl=d;var T=Zi;d=eo;var D=32-Sa(T)-1;T&=~(1<<D),f+=1;var G=32-Sa(h)+D;if(30<G){var oe=D-D%5;G=(T&(1<<oe)-1).toString(32),T>>=oe,D-=oe,Zi=1<<32-Sa(h)+D|f<<D|T,eo=G+d}else Zi=1<<G|f<<D|T,eo=d}function fg(d){d.return!==null&&(zl(d,1),l1(d,1,0))}function bg(d){for(;d===Hh;)Hh=Xc[--Jc],Xc[Jc]=null,qh=Xc[--Jc],Xc[Jc]=null;for(;d===Bl;)Bl=An[--Rn],An[Rn]=null,eo=An[--Rn],An[Rn]=null,Zi=An[--Rn],An[Rn]=null}var fn=null,bn=null,$a=!1,ri=null;function c1(d,h){var f=Ln(5,null,null,0);f.elementType="DELETED",f.stateNode=h,f.return=d,h=d.deletions,h===null?(d.deletions=[f],d.flags|=16):h.push(f)}function d1(d,h){switch(d.tag){case 5:var f=d.type;return h=h.nodeType!==1||f.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(d.stateNode=h,fn=d,bn=Lo(h.firstChild),!0):!1;case 6:return h=d.pendingProps===""||h.nodeType!==3?null:h,h!==null?(d.stateNode=h,fn=d,bn=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(f=Bl!==null?{id:Zi,overflow:eo}:null,d.memoizedState={dehydrated:h,treeContext:f,retryLane:1073741824},f=Ln(18,null,null,0),f.stateNode=h,f.return=d,d.child=f,fn=d,bn=null,!0):!1;default:return!1}}function yg(d){return(d.mode&1)!==0&&(d.flags&128)===0}function vg(d){if($a){var h=bn;if(h){var f=h;if(!d1(d,h)){if(yg(d))throw Error(a(418));h=Lo(f.nextSibling);var T=fn;h&&d1(d,h)?c1(T,f):(d.flags=d.flags&-4097|2,$a=!1,fn=d)}}else{if(yg(d))throw Error(a(418));d.flags=d.flags&-4097|2,$a=!1,fn=d}}}function u1(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;fn=d}function Wh(d){if(d!==fn)return!1;if(!$a)return u1(d),$a=!0,!1;var h;if((h=d.tag!==3)&&!(h=d.tag!==5)&&(h=d.type,h=h!=="head"&&h!=="body"&&!ug(d.type,d.memoizedProps)),h&&(h=bn)){if(yg(d))throw h1(),Error(a(418));for(;h;)c1(d,h),h=Lo(h.nextSibling)}if(u1(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(a(317));e:{for(d=d.nextSibling,h=0;d;){if(d.nodeType===8){var f=d.data;if(f==="/$"){if(h===0){bn=Lo(d.nextSibling);break e}h--}else f!=="$"&&f!=="$!"&&f!=="$?"||h++}d=d.nextSibling}bn=null}}else bn=fn?Lo(d.stateNode.nextSibling):null;return!0}function h1(){for(var d=bn;d;)d=Lo(d.nextSibling)}function Zc(){bn=fn=null,$a=!1}function wg(d){ri===null?ri=[d]:ri.push(d)}var AI=te.ReactCurrentBatchConfig;function k0(d,h,f){if(d=f.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(a(309));var T=f.stateNode}if(!T)throw Error(a(147,d));var D=T,G=""+d;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===G?h.ref:(h=function(oe){var Ce=D.refs;oe===null?delete Ce[G]:Ce[G]=oe},h._stringRef=G,h)}if(typeof d!="string")throw Error(a(284));if(!f._owner)throw Error(a(290,d))}return d}function Gh(d,h){throw d=Object.prototype.toString.call(h),Error(a(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d))}function m1(d){var h=d._init;return h(d._payload)}function p1(d){function h(Qe,ze){if(d){var rt=Qe.deletions;rt===null?(Qe.deletions=[ze],Qe.flags|=16):rt.push(ze)}}function f(Qe,ze){if(!d)return null;for(;ze!==null;)h(Qe,ze),ze=ze.sibling;return null}function T(Qe,ze){for(Qe=new Map;ze!==null;)ze.key!==null?Qe.set(ze.key,ze):Qe.set(ze.index,ze),ze=ze.sibling;return Qe}function D(Qe,ze){return Qe=Qo(Qe,ze),Qe.index=0,Qe.sibling=null,Qe}function G(Qe,ze,rt){return Qe.index=rt,d?(rt=Qe.alternate,rt!==null?(rt=rt.index,rt<ze?(Qe.flags|=2,ze):rt):(Qe.flags|=2,ze)):(Qe.flags|=1048576,ze)}function oe(Qe){return d&&Qe.alternate===null&&(Qe.flags|=2),Qe}function Ce(Qe,ze,rt,Bt){return ze===null||ze.tag!==6?(ze=mf(rt,Qe.mode,Bt),ze.return=Qe,ze):(ze=D(ze,rt),ze.return=Qe,ze)}function Re(Qe,ze,rt,Bt){var hr=rt.type;return hr===H?$t(Qe,ze,rt.props.children,Bt,rt.key):ze!==null&&(ze.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===ft&&m1(hr)===ze.type)?(Bt=D(ze,rt.props),Bt.ref=k0(Qe,ze,rt),Bt.return=Qe,Bt):(Bt=fm(rt.type,rt.key,rt.props,null,Qe.mode,Bt),Bt.ref=k0(Qe,ze,rt),Bt.return=Qe,Bt)}function nt(Qe,ze,rt,Bt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==rt.containerInfo||ze.stateNode.implementation!==rt.implementation?(ze=pf(rt,Qe.mode,Bt),ze.return=Qe,ze):(ze=D(ze,rt.children||[]),ze.return=Qe,ze)}function $t(Qe,ze,rt,Bt,hr){return ze===null||ze.tag!==7?(ze=Yl(rt,Qe.mode,Bt,hr),ze.return=Qe,ze):(ze=D(ze,rt),ze.return=Qe,ze)}function Mt(Qe,ze,rt){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=mf(""+ze,Qe.mode,rt),ze.return=Qe,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case ne:return rt=fm(ze.type,ze.key,ze.props,null,Qe.mode,rt),rt.ref=k0(Qe,null,ze),rt.return=Qe,rt;case be:return ze=pf(ze,Qe.mode,rt),ze.return=Qe,ze;case ft:var Bt=ze._init;return Mt(Qe,Bt(ze._payload),rt)}if(lt(ze)||Ie(ze))return ze=Yl(ze,Qe.mode,rt,null),ze.return=Qe,ze;Gh(Qe,ze)}return null}function Et(Qe,ze,rt,Bt){var hr=ze!==null?ze.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number")return hr!==null?null:Ce(Qe,ze,""+rt,Bt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case ne:return rt.key===hr?Re(Qe,ze,rt,Bt):null;case be:return rt.key===hr?nt(Qe,ze,rt,Bt):null;case ft:return hr=rt._init,Et(Qe,ze,hr(rt._payload),Bt)}if(lt(rt)||Ie(rt))return hr!==null?null:$t(Qe,ze,rt,Bt,null);Gh(Qe,rt)}return null}function tr(Qe,ze,rt,Bt,hr){if(typeof Bt=="string"&&Bt!==""||typeof Bt=="number")return Qe=Qe.get(rt)||null,Ce(ze,Qe,""+Bt,hr);if(typeof Bt=="object"&&Bt!==null){switch(Bt.$$typeof){case ne:return Qe=Qe.get(Bt.key===null?rt:Bt.key)||null,Re(ze,Qe,Bt,hr);case be:return Qe=Qe.get(Bt.key===null?rt:Bt.key)||null,nt(ze,Qe,Bt,hr);case ft:var kr=Bt._init;return tr(Qe,ze,rt,kr(Bt._payload),hr)}if(lt(Bt)||Ie(Bt))return Qe=Qe.get(rt)||null,$t(ze,Qe,Bt,hr,null);Gh(ze,Bt)}return null}function ir(Qe,ze,rt,Bt){for(var hr=null,kr=null,Nr=ze,_r=ze=0,cs=null;Nr!==null&&_r<rt.length;_r++){Nr.index>_r?(cs=Nr,Nr=null):cs=Nr.sibling;var sa=Et(Qe,Nr,rt[_r],Bt);if(sa===null){Nr===null&&(Nr=cs);break}d&&Nr&&sa.alternate===null&&h(Qe,Nr),ze=G(sa,ze,_r),kr===null?hr=sa:kr.sibling=sa,kr=sa,Nr=cs}if(_r===rt.length)return f(Qe,Nr),$a&&zl(Qe,_r),hr;if(Nr===null){for(;_r<rt.length;_r++)Nr=Mt(Qe,rt[_r],Bt),Nr!==null&&(ze=G(Nr,ze,_r),kr===null?hr=Nr:kr.sibling=Nr,kr=Nr);return $a&&zl(Qe,_r),hr}for(Nr=T(Qe,Nr);_r<rt.length;_r++)cs=tr(Nr,Qe,_r,rt[_r],Bt),cs!==null&&(d&&cs.alternate!==null&&Nr.delete(cs.key===null?_r:cs.key),ze=G(cs,ze,_r),kr===null?hr=cs:kr.sibling=cs,kr=cs);return d&&Nr.forEach(function(Xo){return h(Qe,Xo)}),$a&&zl(Qe,_r),hr}function lr(Qe,ze,rt,Bt){var hr=Ie(rt);if(typeof hr!="function")throw Error(a(150));if(rt=hr.call(rt),rt==null)throw Error(a(151));for(var kr=hr=null,Nr=ze,_r=ze=0,cs=null,sa=rt.next();Nr!==null&&!sa.done;_r++,sa=rt.next()){Nr.index>_r?(cs=Nr,Nr=null):cs=Nr.sibling;var Xo=Et(Qe,Nr,sa.value,Bt);if(Xo===null){Nr===null&&(Nr=cs);break}d&&Nr&&Xo.alternate===null&&h(Qe,Nr),ze=G(Xo,ze,_r),kr===null?hr=Xo:kr.sibling=Xo,kr=Xo,Nr=cs}if(sa.done)return f(Qe,Nr),$a&&zl(Qe,_r),hr;if(Nr===null){for(;!sa.done;_r++,sa=rt.next())sa=Mt(Qe,sa.value,Bt),sa!==null&&(ze=G(sa,ze,_r),kr===null?hr=sa:kr.sibling=sa,kr=sa);return $a&&zl(Qe,_r),hr}for(Nr=T(Qe,Nr);!sa.done;_r++,sa=rt.next())sa=tr(Nr,Qe,_r,sa.value,Bt),sa!==null&&(d&&sa.alternate!==null&&Nr.delete(sa.key===null?_r:sa.key),ze=G(sa,ze,_r),kr===null?hr=sa:kr.sibling=sa,kr=sa);return d&&Nr.forEach(function(m9){return h(Qe,m9)}),$a&&zl(Qe,_r),hr}function Ha(Qe,ze,rt,Bt){if(typeof rt=="object"&&rt!==null&&rt.type===H&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case ne:e:{for(var hr=rt.key,kr=ze;kr!==null;){if(kr.key===hr){if(hr=rt.type,hr===H){if(kr.tag===7){f(Qe,kr.sibling),ze=D(kr,rt.props.children),ze.return=Qe,Qe=ze;break e}}else if(kr.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===ft&&m1(hr)===kr.type){f(Qe,kr.sibling),ze=D(kr,rt.props),ze.ref=k0(Qe,kr,rt),ze.return=Qe,Qe=ze;break e}f(Qe,kr);break}else h(Qe,kr);kr=kr.sibling}rt.type===H?(ze=Yl(rt.props.children,Qe.mode,Bt,rt.key),ze.return=Qe,Qe=ze):(Bt=fm(rt.type,rt.key,rt.props,null,Qe.mode,Bt),Bt.ref=k0(Qe,ze,rt),Bt.return=Qe,Qe=Bt)}return oe(Qe);case be:e:{for(kr=rt.key;ze!==null;){if(ze.key===kr)if(ze.tag===4&&ze.stateNode.containerInfo===rt.containerInfo&&ze.stateNode.implementation===rt.implementation){f(Qe,ze.sibling),ze=D(ze,rt.children||[]),ze.return=Qe,Qe=ze;break e}else{f(Qe,ze);break}else h(Qe,ze);ze=ze.sibling}ze=pf(rt,Qe.mode,Bt),ze.return=Qe,Qe=ze}return oe(Qe);case ft:return kr=rt._init,Ha(Qe,ze,kr(rt._payload),Bt)}if(lt(rt))return ir(Qe,ze,rt,Bt);if(Ie(rt))return lr(Qe,ze,rt,Bt);Gh(Qe,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"?(rt=""+rt,ze!==null&&ze.tag===6?(f(Qe,ze.sibling),ze=D(ze,rt),ze.return=Qe,Qe=ze):(f(Qe,ze),ze=mf(rt,Qe.mode,Bt),ze.return=Qe,Qe=ze),oe(Qe)):f(Qe,ze)}return Ha}var ed=p1(!0),x1=p1(!1),Kh=Bo(null),Yh=null,td=null,kg=null;function Ng(){kg=td=Yh=null}function jg(d){var h=Kh.current;_a(Kh),d._currentValue=h}function Cg(d,h,f){for(;d!==null;){var T=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,T!==null&&(T.childLanes|=h)):T!==null&&(T.childLanes&h)!==h&&(T.childLanes|=h),d===f)break;d=d.return}}function rd(d,h){Yh=d,kg=td=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&h)!==0&&(tn=!0),d.firstContext=null)}function Mn(d){var h=d._currentValue;if(kg!==d)if(d={context:d,memoizedValue:h,next:null},td===null){if(Yh===null)throw Error(a(308));td=d,Yh.dependencies={lanes:0,firstContext:d}}else td=td.next=d;return h}var Vl=null;function Tg(d){Vl===null?Vl=[d]:Vl.push(d)}function g1(d,h,f,T){var D=h.interleaved;return D===null?(f.next=f,Tg(h)):(f.next=D.next,D.next=f),h.interleaved=f,to(d,T)}function to(d,h){d.lanes|=h;var f=d.alternate;for(f!==null&&(f.lanes|=h),f=d,d=d.return;d!==null;)d.childLanes|=h,f=d.alternate,f!==null&&(f.childLanes|=h),f=d,d=d.return;return f.tag===3?f.stateNode:null}var Uo=!1;function Sg(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function f1(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function ro(d,h){return{eventTime:d,lane:h,tag:0,payload:null,callback:null,next:null}}function Ho(d,h,f){var T=d.updateQueue;if(T===null)return null;if(T=T.shared,(ea&2)!==0){var D=T.pending;return D===null?h.next=h:(h.next=D.next,D.next=h),T.pending=h,to(d,f)}return D=T.interleaved,D===null?(h.next=h,Tg(T)):(h.next=D.next,D.next=h),T.interleaved=h,to(d,f)}function Qh(d,h,f){if(h=h.updateQueue,h!==null&&(h=h.shared,(f&4194240)!==0)){var T=h.lanes;T&=d.pendingLanes,f|=T,h.lanes=f,Do(d,f)}}function b1(d,h){var f=d.updateQueue,T=d.alternate;if(T!==null&&(T=T.updateQueue,f===T)){var D=null,G=null;if(f=f.firstBaseUpdate,f!==null){do{var oe={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};G===null?D=G=oe:G=G.next=oe,f=f.next}while(f!==null);G===null?D=G=h:G=G.next=h}else D=G=h;f={baseState:T.baseState,firstBaseUpdate:D,lastBaseUpdate:G,shared:T.shared,effects:T.effects},d.updateQueue=f;return}d=f.lastBaseUpdate,d===null?f.firstBaseUpdate=h:d.next=h,f.lastBaseUpdate=h}function Xh(d,h,f,T){var D=d.updateQueue;Uo=!1;var G=D.firstBaseUpdate,oe=D.lastBaseUpdate,Ce=D.shared.pending;if(Ce!==null){D.shared.pending=null;var Re=Ce,nt=Re.next;Re.next=null,oe===null?G=nt:oe.next=nt,oe=Re;var $t=d.alternate;$t!==null&&($t=$t.updateQueue,Ce=$t.lastBaseUpdate,Ce!==oe&&(Ce===null?$t.firstBaseUpdate=nt:Ce.next=nt,$t.lastBaseUpdate=Re))}if(G!==null){var Mt=D.baseState;oe=0,$t=nt=Re=null,Ce=G;do{var Et=Ce.lane,tr=Ce.eventTime;if((T&Et)===Et){$t!==null&&($t=$t.next={eventTime:tr,lane:0,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null});e:{var ir=d,lr=Ce;switch(Et=h,tr=f,lr.tag){case 1:if(ir=lr.payload,typeof ir=="function"){Mt=ir.call(tr,Mt,Et);break e}Mt=ir;break e;case 3:ir.flags=ir.flags&-65537|128;case 0:if(ir=lr.payload,Et=typeof ir=="function"?ir.call(tr,Mt,Et):ir,Et==null)break e;Mt=_e({},Mt,Et);break e;case 2:Uo=!0}}Ce.callback!==null&&Ce.lane!==0&&(d.flags|=64,Et=D.effects,Et===null?D.effects=[Ce]:Et.push(Ce))}else tr={eventTime:tr,lane:Et,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},$t===null?(nt=$t=tr,Re=Mt):$t=$t.next=tr,oe|=Et;if(Ce=Ce.next,Ce===null){if(Ce=D.shared.pending,Ce===null)break;Et=Ce,Ce=Et.next,Et.next=null,D.lastBaseUpdate=Et,D.shared.pending=null}}while(!0);if($t===null&&(Re=Mt),D.baseState=Re,D.firstBaseUpdate=nt,D.lastBaseUpdate=$t,h=D.shared.interleaved,h!==null){D=h;do oe|=D.lane,D=D.next;while(D!==h)}else G===null&&(D.shared.lanes=0);ql|=oe,d.lanes=oe,d.memoizedState=Mt}}function y1(d,h,f){if(d=h.effects,h.effects=null,d!==null)for(h=0;h<d.length;h++){var T=d[h],D=T.callback;if(D!==null){if(T.callback=null,T=f,typeof D!="function")throw Error(a(191,D));D.call(T)}}}var N0={},Ti=Bo(N0),j0=Bo(N0),C0=Bo(N0);function Ul(d){if(d===N0)throw Error(a(174));return d}function Eg(d,h){switch(Ca(C0,h),Ca(j0,d),Ca(Ti,N0),d=h.nodeType,d){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:E(null,"");break;default:d=d===8?h.parentNode:h,h=d.namespaceURI||null,d=d.tagName,h=E(h,d)}_a(Ti),Ca(Ti,h)}function ad(){_a(Ti),_a(j0),_a(C0)}function v1(d){Ul(C0.current);var h=Ul(Ti.current),f=E(h,d.type);h!==f&&(Ca(j0,d),Ca(Ti,f))}function _g(d){j0.current===d&&(_a(Ti),_a(j0))}var Da=Bo(0);function Jh(d){for(var h=d;h!==null;){if(h.tag===13){var f=h.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Pg=[];function Ig(){for(var d=0;d<Pg.length;d++)Pg[d]._workInProgressVersionPrimary=null;Pg.length=0}var Zh=te.ReactCurrentDispatcher,$g=te.ReactCurrentBatchConfig,Hl=0,Aa=null,rs=null,os=null,em=!1,T0=!1,S0=0,RI=0;function $s(){throw Error(a(321))}function Dg(d,h){if(h===null)return!1;for(var f=0;f<h.length&&f<d.length;f++)if(!ti(d[f],h[f]))return!1;return!0}function Ag(d,h,f,T,D,G){if(Hl=G,Aa=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Zh.current=d===null||d.memoizedState===null?LI:BI,d=f(T,D),T0){G=0;do{if(T0=!1,S0=0,25<=G)throw Error(a(301));G+=1,os=rs=null,h.updateQueue=null,Zh.current=zI,d=f(T,D)}while(T0)}if(Zh.current=am,h=rs!==null&&rs.next!==null,Hl=0,os=rs=Aa=null,em=!1,h)throw Error(a(300));return d}function Rg(){var d=S0!==0;return S0=0,d}function Si(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return os===null?Aa.memoizedState=os=d:os=os.next=d,os}function Fn(){if(rs===null){var d=Aa.alternate;d=d!==null?d.memoizedState:null}else d=rs.next;var h=os===null?Aa.memoizedState:os.next;if(h!==null)os=h,rs=d;else{if(d===null)throw Error(a(310));rs=d,d={memoizedState:rs.memoizedState,baseState:rs.baseState,baseQueue:rs.baseQueue,queue:rs.queue,next:null},os===null?Aa.memoizedState=os=d:os=os.next=d}return os}function E0(d,h){return typeof h=="function"?h(d):h}function Mg(d){var h=Fn(),f=h.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=d;var T=rs,D=T.baseQueue,G=f.pending;if(G!==null){if(D!==null){var oe=D.next;D.next=G.next,G.next=oe}T.baseQueue=D=G,f.pending=null}if(D!==null){G=D.next,T=T.baseState;var Ce=oe=null,Re=null,nt=G;do{var $t=nt.lane;if((Hl&$t)===$t)Re!==null&&(Re=Re.next={lane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),T=nt.hasEagerState?nt.eagerState:d(T,nt.action);else{var Mt={lane:$t,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null};Re===null?(Ce=Re=Mt,oe=T):Re=Re.next=Mt,Aa.lanes|=$t,ql|=$t}nt=nt.next}while(nt!==null&&nt!==G);Re===null?oe=T:Re.next=Ce,ti(T,h.memoizedState)||(tn=!0),h.memoizedState=T,h.baseState=oe,h.baseQueue=Re,f.lastRenderedState=T}if(d=f.interleaved,d!==null){D=d;do G=D.lane,Aa.lanes|=G,ql|=G,D=D.next;while(D!==d)}else D===null&&(f.lanes=0);return[h.memoizedState,f.dispatch]}function Fg(d){var h=Fn(),f=h.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=d;var T=f.dispatch,D=f.pending,G=h.memoizedState;if(D!==null){f.pending=null;var oe=D=D.next;do G=d(G,oe.action),oe=oe.next;while(oe!==D);ti(G,h.memoizedState)||(tn=!0),h.memoizedState=G,h.baseQueue===null&&(h.baseState=G),f.lastRenderedState=G}return[G,T]}function w1(){}function k1(d,h){var f=Aa,T=Fn(),D=h(),G=!ti(T.memoizedState,D);if(G&&(T.memoizedState=D,tn=!0),T=T.queue,Og(C1.bind(null,f,T,d),[d]),T.getSnapshot!==h||G||os!==null&&os.memoizedState.tag&1){if(f.flags|=2048,_0(9,j1.bind(null,f,T,D,h),void 0,null),ls===null)throw Error(a(349));(Hl&30)!==0||N1(f,h,D)}return D}function N1(d,h,f){d.flags|=16384,d={getSnapshot:h,value:f},h=Aa.updateQueue,h===null?(h={lastEffect:null,stores:null},Aa.updateQueue=h,h.stores=[d]):(f=h.stores,f===null?h.stores=[d]:f.push(d))}function j1(d,h,f,T){h.value=f,h.getSnapshot=T,T1(h)&&S1(d)}function C1(d,h,f){return f(function(){T1(h)&&S1(d)})}function T1(d){var h=d.getSnapshot;d=d.value;try{var f=h();return!ti(d,f)}catch{return!0}}function S1(d){var h=to(d,1);h!==null&&ii(h,d,1,-1)}function E1(d){var h=Si();return typeof d=="function"&&(d=d()),h.memoizedState=h.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:E0,lastRenderedState:d},h.queue=d,d=d.dispatch=OI.bind(null,Aa,d),[h.memoizedState,d]}function _0(d,h,f,T){return d={tag:d,create:h,destroy:f,deps:T,next:null},h=Aa.updateQueue,h===null?(h={lastEffect:null,stores:null},Aa.updateQueue=h,h.lastEffect=d.next=d):(f=h.lastEffect,f===null?h.lastEffect=d.next=d:(T=f.next,f.next=d,d.next=T,h.lastEffect=d)),d}function _1(){return Fn().memoizedState}function tm(d,h,f,T){var D=Si();Aa.flags|=d,D.memoizedState=_0(1|h,f,void 0,T===void 0?null:T)}function rm(d,h,f,T){var D=Fn();T=T===void 0?null:T;var G=void 0;if(rs!==null){var oe=rs.memoizedState;if(G=oe.destroy,T!==null&&Dg(T,oe.deps)){D.memoizedState=_0(h,f,G,T);return}}Aa.flags|=d,D.memoizedState=_0(1|h,f,G,T)}function P1(d,h){return tm(8390656,8,d,h)}function Og(d,h){return rm(2048,8,d,h)}function I1(d,h){return rm(4,2,d,h)}function $1(d,h){return rm(4,4,d,h)}function D1(d,h){if(typeof h=="function")return d=d(),h(d),function(){h(null)};if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function A1(d,h,f){return f=f!=null?f.concat([d]):null,rm(4,4,D1.bind(null,h,d),f)}function Lg(){}function R1(d,h){var f=Fn();h=h===void 0?null:h;var T=f.memoizedState;return T!==null&&h!==null&&Dg(h,T[1])?T[0]:(f.memoizedState=[d,h],d)}function M1(d,h){var f=Fn();h=h===void 0?null:h;var T=f.memoizedState;return T!==null&&h!==null&&Dg(h,T[1])?T[0]:(d=d(),f.memoizedState=[d,h],d)}function F1(d,h,f){return(Hl&21)===0?(d.baseState&&(d.baseState=!1,tn=!0),d.memoizedState=f):(ti(f,h)||(f=Dl(),Aa.lanes|=f,ql|=f,d.baseState=!0),h)}function MI(d,h){var f=Wr;Wr=f!==0&&4>f?f:4,d(!0);var T=$g.transition;$g.transition={};try{d(!1),h()}finally{Wr=f,$g.transition=T}}function O1(){return Fn().memoizedState}function FI(d,h,f){var T=Ko(d);if(f={lane:T,action:f,hasEagerState:!1,eagerState:null,next:null},L1(d))B1(h,f);else if(f=g1(d,h,f,T),f!==null){var D=Hs();ii(f,d,T,D),z1(f,h,T)}}function OI(d,h,f){var T=Ko(d),D={lane:T,action:f,hasEagerState:!1,eagerState:null,next:null};if(L1(d))B1(h,D);else{var G=d.alternate;if(d.lanes===0&&(G===null||G.lanes===0)&&(G=h.lastRenderedReducer,G!==null))try{var oe=h.lastRenderedState,Ce=G(oe,f);if(D.hasEagerState=!0,D.eagerState=Ce,ti(Ce,oe)){var Re=h.interleaved;Re===null?(D.next=D,Tg(h)):(D.next=Re.next,Re.next=D),h.interleaved=D;return}}catch{}finally{}f=g1(d,h,D,T),f!==null&&(D=Hs(),ii(f,d,T,D),z1(f,h,T))}}function L1(d){var h=d.alternate;return d===Aa||h!==null&&h===Aa}function B1(d,h){T0=em=!0;var f=d.pending;f===null?h.next=h:(h.next=f.next,f.next=h),d.pending=h}function z1(d,h,f){if((f&4194240)!==0){var T=h.lanes;T&=d.pendingLanes,f|=T,h.lanes=f,Do(d,f)}}var am={readContext:Mn,useCallback:$s,useContext:$s,useEffect:$s,useImperativeHandle:$s,useInsertionEffect:$s,useLayoutEffect:$s,useMemo:$s,useReducer:$s,useRef:$s,useState:$s,useDebugValue:$s,useDeferredValue:$s,useTransition:$s,useMutableSource:$s,useSyncExternalStore:$s,useId:$s,unstable_isNewReconciler:!1},LI={readContext:Mn,useCallback:function(d,h){return Si().memoizedState=[d,h===void 0?null:h],d},useContext:Mn,useEffect:P1,useImperativeHandle:function(d,h,f){return f=f!=null?f.concat([d]):null,tm(4194308,4,D1.bind(null,h,d),f)},useLayoutEffect:function(d,h){return tm(4194308,4,d,h)},useInsertionEffect:function(d,h){return tm(4,2,d,h)},useMemo:function(d,h){var f=Si();return h=h===void 0?null:h,d=d(),f.memoizedState=[d,h],d},useReducer:function(d,h,f){var T=Si();return h=f!==void 0?f(h):h,T.memoizedState=T.baseState=h,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:h},T.queue=d,d=d.dispatch=FI.bind(null,Aa,d),[T.memoizedState,d]},useRef:function(d){var h=Si();return d={current:d},h.memoizedState=d},useState:E1,useDebugValue:Lg,useDeferredValue:function(d){return Si().memoizedState=d},useTransition:function(){var d=E1(!1),h=d[0];return d=MI.bind(null,d[1]),Si().memoizedState=d,[h,d]},useMutableSource:function(){},useSyncExternalStore:function(d,h,f){var T=Aa,D=Si();if($a){if(f===void 0)throw Error(a(407));f=f()}else{if(f=h(),ls===null)throw Error(a(349));(Hl&30)!==0||N1(T,h,f)}D.memoizedState=f;var G={value:f,getSnapshot:h};return D.queue=G,P1(C1.bind(null,T,G,d),[d]),T.flags|=2048,_0(9,j1.bind(null,T,G,f,h),void 0,null),f},useId:function(){var d=Si(),h=ls.identifierPrefix;if($a){var f=eo,T=Zi;f=(T&~(1<<32-Sa(T)-1)).toString(32)+f,h=":"+h+"R"+f,f=S0++,0<f&&(h+="H"+f.toString(32)),h+=":"}else f=RI++,h=":"+h+"r"+f.toString(32)+":";return d.memoizedState=h},unstable_isNewReconciler:!1},BI={readContext:Mn,useCallback:R1,useContext:Mn,useEffect:Og,useImperativeHandle:A1,useInsertionEffect:I1,useLayoutEffect:$1,useMemo:M1,useReducer:Mg,useRef:_1,useState:function(){return Mg(E0)},useDebugValue:Lg,useDeferredValue:function(d){var h=Fn();return F1(h,rs.memoizedState,d)},useTransition:function(){var d=Mg(E0)[0],h=Fn().memoizedState;return[d,h]},useMutableSource:w1,useSyncExternalStore:k1,useId:O1,unstable_isNewReconciler:!1},zI={readContext:Mn,useCallback:R1,useContext:Mn,useEffect:Og,useImperativeHandle:A1,useInsertionEffect:I1,useLayoutEffect:$1,useMemo:M1,useReducer:Fg,useRef:_1,useState:function(){return Fg(E0)},useDebugValue:Lg,useDeferredValue:function(d){var h=Fn();return rs===null?h.memoizedState=d:F1(h,rs.memoizedState,d)},useTransition:function(){var d=Fg(E0)[0],h=Fn().memoizedState;return[d,h]},useMutableSource:w1,useSyncExternalStore:k1,useId:O1,unstable_isNewReconciler:!1};function ai(d,h){if(d&&d.defaultProps){h=_e({},h),d=d.defaultProps;for(var f in d)h[f]===void 0&&(h[f]=d[f]);return h}return h}function Bg(d,h,f,T){h=d.memoizedState,f=f(T,h),f=f==null?h:_e({},h,f),d.memoizedState=f,d.lanes===0&&(d.updateQueue.baseState=f)}var sm={isMounted:function(d){return(d=d._reactInternals)?Ne(d)===d:!1},enqueueSetState:function(d,h,f){d=d._reactInternals;var T=Hs(),D=Ko(d),G=ro(T,D);G.payload=h,f!=null&&(G.callback=f),h=Ho(d,G,D),h!==null&&(ii(h,d,D,T),Qh(h,d,D))},enqueueReplaceState:function(d,h,f){d=d._reactInternals;var T=Hs(),D=Ko(d),G=ro(T,D);G.tag=1,G.payload=h,f!=null&&(G.callback=f),h=Ho(d,G,D),h!==null&&(ii(h,d,D,T),Qh(h,d,D))},enqueueForceUpdate:function(d,h){d=d._reactInternals;var f=Hs(),T=Ko(d),D=ro(f,T);D.tag=2,h!=null&&(D.callback=h),h=Ho(d,D,T),h!==null&&(ii(h,d,T,f),Qh(h,d,T))}};function V1(d,h,f,T,D,G,oe){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(T,G,oe):h.prototype&&h.prototype.isPureReactComponent?!x0(f,T)||!x0(D,G):!0}function U1(d,h,f){var T=!1,D=zo,G=h.contextType;return typeof G=="object"&&G!==null?G=Mn(G):(D=en(h)?Ll:Is.current,T=h.contextTypes,G=(T=T!=null)?Qc(d,D):zo),h=new h(f,G),d.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=sm,d.stateNode=h,h._reactInternals=d,T&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=D,d.__reactInternalMemoizedMaskedChildContext=G),h}function H1(d,h,f,T){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(f,T),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(f,T),h.state!==d&&sm.enqueueReplaceState(h,h.state,null)}function zg(d,h,f,T){var D=d.stateNode;D.props=f,D.state=d.memoizedState,D.refs={},Sg(d);var G=h.contextType;typeof G=="object"&&G!==null?D.context=Mn(G):(G=en(h)?Ll:Is.current,D.context=Qc(d,G)),D.state=d.memoizedState,G=h.getDerivedStateFromProps,typeof G=="function"&&(Bg(d,h,G,f),D.state=d.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(h=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),h!==D.state&&sm.enqueueReplaceState(D,D.state,null),Xh(d,f,D,T),D.state=d.memoizedState),typeof D.componentDidMount=="function"&&(d.flags|=4194308)}function sd(d,h){try{var f="",T=h;do f+=he(T),T=T.return;while(T);var D=f}catch(G){D=`
Error generating stack: `+G.message+`
`+G.stack}return{value:d,source:h,stack:D,digest:null}}function Vg(d,h,f){return{value:d,source:null,stack:f??null,digest:h??null}}function Ug(d,h){try{console.error(h.value)}catch(f){setTimeout(function(){throw f})}}var VI=typeof WeakMap=="function"?WeakMap:Map;function q1(d,h,f){f=ro(-1,f),f.tag=3,f.payload={element:null};var T=h.value;return f.callback=function(){um||(um=!0,sf=T),Ug(d,h)},f}function W1(d,h,f){f=ro(-1,f),f.tag=3;var T=d.type.getDerivedStateFromError;if(typeof T=="function"){var D=h.value;f.payload=function(){return T(D)},f.callback=function(){Ug(d,h)}}var G=d.stateNode;return G!==null&&typeof G.componentDidCatch=="function"&&(f.callback=function(){Ug(d,h),typeof T!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var oe=h.stack;this.componentDidCatch(h.value,{componentStack:oe!==null?oe:""})}),f}function G1(d,h,f){var T=d.pingCache;if(T===null){T=d.pingCache=new VI;var D=new Set;T.set(h,D)}else D=T.get(h),D===void 0&&(D=new Set,T.set(h,D));D.has(f)||(D.add(f),d=r9.bind(null,d,h,f),h.then(d,d))}function K1(d){do{var h;if((h=d.tag===13)&&(h=d.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return d;d=d.return}while(d!==null);return null}function Y1(d,h,f,T,D){return(d.mode&1)===0?(d===h?d.flags|=65536:(d.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(h=ro(-1,1),h.tag=2,Ho(f,h,1))),f.lanes|=1),d):(d.flags|=65536,d.lanes=D,d)}var UI=te.ReactCurrentOwner,tn=!1;function Us(d,h,f,T){h.child=d===null?x1(h,null,f,T):ed(h,d.child,f,T)}function Q1(d,h,f,T,D){f=f.render;var G=h.ref;return rd(h,D),T=Ag(d,h,f,T,G,D),f=Rg(),d!==null&&!tn?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~D,ao(d,h,D)):($a&&f&&fg(h),h.flags|=1,Us(d,h,T,D),h.child)}function X1(d,h,f,T,D){if(d===null){var G=f.type;return typeof G=="function"&&!hf(G)&&G.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(h.tag=15,h.type=G,J1(d,h,G,T,D)):(d=fm(f.type,null,T,h,h.mode,D),d.ref=h.ref,d.return=h,h.child=d)}if(G=d.child,(d.lanes&D)===0){var oe=G.memoizedProps;if(f=f.compare,f=f!==null?f:x0,f(oe,T)&&d.ref===h.ref)return ao(d,h,D)}return h.flags|=1,d=Qo(G,T),d.ref=h.ref,d.return=h,h.child=d}function J1(d,h,f,T,D){if(d!==null){var G=d.memoizedProps;if(x0(G,T)&&d.ref===h.ref)if(tn=!1,h.pendingProps=T=G,(d.lanes&D)!==0)(d.flags&131072)!==0&&(tn=!0);else return h.lanes=d.lanes,ao(d,h,D)}return Hg(d,h,f,T,D)}function Z1(d,h,f){var T=h.pendingProps,D=T.children,G=d!==null?d.memoizedState:null;if(T.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ca(id,yn),yn|=f;else{if((f&1073741824)===0)return d=G!==null?G.baseLanes|f:f,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:d,cachePool:null,transitions:null},h.updateQueue=null,Ca(id,yn),yn|=d,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},T=G!==null?G.baseLanes:f,Ca(id,yn),yn|=T}else G!==null?(T=G.baseLanes|f,h.memoizedState=null):T=f,Ca(id,yn),yn|=T;return Us(d,h,D,f),h.child}function ek(d,h){var f=h.ref;(d===null&&f!==null||d!==null&&d.ref!==f)&&(h.flags|=512,h.flags|=2097152)}function Hg(d,h,f,T,D){var G=en(f)?Ll:Is.current;return G=Qc(h,G),rd(h,D),f=Ag(d,h,f,T,G,D),T=Rg(),d!==null&&!tn?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~D,ao(d,h,D)):($a&&T&&fg(h),h.flags|=1,Us(d,h,f,D),h.child)}function tk(d,h,f,T,D){if(en(f)){var G=!0;Vh(h)}else G=!1;if(rd(h,D),h.stateNode===null)im(d,h),U1(h,f,T),zg(h,f,T,D),T=!0;else if(d===null){var oe=h.stateNode,Ce=h.memoizedProps;oe.props=Ce;var Re=oe.context,nt=f.contextType;typeof nt=="object"&&nt!==null?nt=Mn(nt):(nt=en(f)?Ll:Is.current,nt=Qc(h,nt));var $t=f.getDerivedStateFromProps,Mt=typeof $t=="function"||typeof oe.getSnapshotBeforeUpdate=="function";Mt||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Ce!==T||Re!==nt)&&H1(h,oe,T,nt),Uo=!1;var Et=h.memoizedState;oe.state=Et,Xh(h,T,oe,D),Re=h.memoizedState,Ce!==T||Et!==Re||Zs.current||Uo?(typeof $t=="function"&&(Bg(h,f,$t,T),Re=h.memoizedState),(Ce=Uo||V1(h,f,Ce,T,Et,Re,nt))?(Mt||typeof oe.UNSAFE_componentWillMount!="function"&&typeof oe.componentWillMount!="function"||(typeof oe.componentWillMount=="function"&&oe.componentWillMount(),typeof oe.UNSAFE_componentWillMount=="function"&&oe.UNSAFE_componentWillMount()),typeof oe.componentDidMount=="function"&&(h.flags|=4194308)):(typeof oe.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=T,h.memoizedState=Re),oe.props=T,oe.state=Re,oe.context=nt,T=Ce):(typeof oe.componentDidMount=="function"&&(h.flags|=4194308),T=!1)}else{oe=h.stateNode,f1(d,h),Ce=h.memoizedProps,nt=h.type===h.elementType?Ce:ai(h.type,Ce),oe.props=nt,Mt=h.pendingProps,Et=oe.context,Re=f.contextType,typeof Re=="object"&&Re!==null?Re=Mn(Re):(Re=en(f)?Ll:Is.current,Re=Qc(h,Re));var tr=f.getDerivedStateFromProps;($t=typeof tr=="function"||typeof oe.getSnapshotBeforeUpdate=="function")||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Ce!==Mt||Et!==Re)&&H1(h,oe,T,Re),Uo=!1,Et=h.memoizedState,oe.state=Et,Xh(h,T,oe,D);var ir=h.memoizedState;Ce!==Mt||Et!==ir||Zs.current||Uo?(typeof tr=="function"&&(Bg(h,f,tr,T),ir=h.memoizedState),(nt=Uo||V1(h,f,nt,T,Et,ir,Re)||!1)?($t||typeof oe.UNSAFE_componentWillUpdate!="function"&&typeof oe.componentWillUpdate!="function"||(typeof oe.componentWillUpdate=="function"&&oe.componentWillUpdate(T,ir,Re),typeof oe.UNSAFE_componentWillUpdate=="function"&&oe.UNSAFE_componentWillUpdate(T,ir,Re)),typeof oe.componentDidUpdate=="function"&&(h.flags|=4),typeof oe.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof oe.componentDidUpdate!="function"||Ce===d.memoizedProps&&Et===d.memoizedState||(h.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Ce===d.memoizedProps&&Et===d.memoizedState||(h.flags|=1024),h.memoizedProps=T,h.memoizedState=ir),oe.props=T,oe.state=ir,oe.context=Re,T=nt):(typeof oe.componentDidUpdate!="function"||Ce===d.memoizedProps&&Et===d.memoizedState||(h.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Ce===d.memoizedProps&&Et===d.memoizedState||(h.flags|=1024),T=!1)}return qg(d,h,f,T,G,D)}function qg(d,h,f,T,D,G){ek(d,h);var oe=(h.flags&128)!==0;if(!T&&!oe)return D&&i1(h,f,!1),ao(d,h,G);T=h.stateNode,UI.current=h;var Ce=oe&&typeof f.getDerivedStateFromError!="function"?null:T.render();return h.flags|=1,d!==null&&oe?(h.child=ed(h,d.child,null,G),h.child=ed(h,null,Ce,G)):Us(d,h,Ce,G),h.memoizedState=T.state,D&&i1(h,f,!0),h.child}function rk(d){var h=d.stateNode;h.pendingContext?s1(d,h.pendingContext,h.pendingContext!==h.context):h.context&&s1(d,h.context,!1),Eg(d,h.containerInfo)}function ak(d,h,f,T,D){return Zc(),wg(D),h.flags|=256,Us(d,h,f,T),h.child}var Wg={dehydrated:null,treeContext:null,retryLane:0};function Gg(d){return{baseLanes:d,cachePool:null,transitions:null}}function sk(d,h,f){var T=h.pendingProps,D=Da.current,G=!1,oe=(h.flags&128)!==0,Ce;if((Ce=oe)||(Ce=d!==null&&d.memoizedState===null?!1:(D&2)!==0),Ce?(G=!0,h.flags&=-129):(d===null||d.memoizedState!==null)&&(D|=1),Ca(Da,D&1),d===null)return vg(h),d=h.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((h.mode&1)===0?h.lanes=1:d.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(oe=T.children,d=T.fallback,G?(T=h.mode,G=h.child,oe={mode:"hidden",children:oe},(T&1)===0&&G!==null?(G.childLanes=0,G.pendingProps=oe):G=bm(oe,T,0,null),d=Yl(d,T,f,null),G.return=h,d.return=h,G.sibling=d,h.child=G,h.child.memoizedState=Gg(f),h.memoizedState=Wg,d):Kg(h,oe));if(D=d.memoizedState,D!==null&&(Ce=D.dehydrated,Ce!==null))return HI(d,h,oe,T,Ce,D,f);if(G){G=T.fallback,oe=h.mode,D=d.child,Ce=D.sibling;var Re={mode:"hidden",children:T.children};return(oe&1)===0&&h.child!==D?(T=h.child,T.childLanes=0,T.pendingProps=Re,h.deletions=null):(T=Qo(D,Re),T.subtreeFlags=D.subtreeFlags&14680064),Ce!==null?G=Qo(Ce,G):(G=Yl(G,oe,f,null),G.flags|=2),G.return=h,T.return=h,T.sibling=G,h.child=T,T=G,G=h.child,oe=d.child.memoizedState,oe=oe===null?Gg(f):{baseLanes:oe.baseLanes|f,cachePool:null,transitions:oe.transitions},G.memoizedState=oe,G.childLanes=d.childLanes&~f,h.memoizedState=Wg,T}return G=d.child,d=G.sibling,T=Qo(G,{mode:"visible",children:T.children}),(h.mode&1)===0&&(T.lanes=f),T.return=h,T.sibling=null,d!==null&&(f=h.deletions,f===null?(h.deletions=[d],h.flags|=16):f.push(d)),h.child=T,h.memoizedState=null,T}function Kg(d,h){return h=bm({mode:"visible",children:h},d.mode,0,null),h.return=d,d.child=h}function nm(d,h,f,T){return T!==null&&wg(T),ed(h,d.child,null,f),d=Kg(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function HI(d,h,f,T,D,G,oe){if(f)return h.flags&256?(h.flags&=-257,T=Vg(Error(a(422))),nm(d,h,oe,T)):h.memoizedState!==null?(h.child=d.child,h.flags|=128,null):(G=T.fallback,D=h.mode,T=bm({mode:"visible",children:T.children},D,0,null),G=Yl(G,D,oe,null),G.flags|=2,T.return=h,G.return=h,T.sibling=G,h.child=T,(h.mode&1)!==0&&ed(h,d.child,null,oe),h.child.memoizedState=Gg(oe),h.memoizedState=Wg,G);if((h.mode&1)===0)return nm(d,h,oe,null);if(D.data==="$!"){if(T=D.nextSibling&&D.nextSibling.dataset,T)var Ce=T.dgst;return T=Ce,G=Error(a(419)),T=Vg(G,T,void 0),nm(d,h,oe,T)}if(Ce=(oe&d.childLanes)!==0,tn||Ce){if(T=ls,T!==null){switch(oe&-oe){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}D=(D&(T.suspendedLanes|oe))!==0?0:D,D!==0&&D!==G.retryLane&&(G.retryLane=D,to(d,D),ii(T,d,D,-1))}return uf(),T=Vg(Error(a(421))),nm(d,h,oe,T)}return D.data==="$?"?(h.flags|=128,h.child=d.child,h=a9.bind(null,d),D._reactRetry=h,null):(d=G.treeContext,bn=Lo(D.nextSibling),fn=h,$a=!0,ri=null,d!==null&&(An[Rn++]=Zi,An[Rn++]=eo,An[Rn++]=Bl,Zi=d.id,eo=d.overflow,Bl=h),h=Kg(h,T.children),h.flags|=4096,h)}function nk(d,h,f){d.lanes|=h;var T=d.alternate;T!==null&&(T.lanes|=h),Cg(d.return,h,f)}function Yg(d,h,f,T,D){var G=d.memoizedState;G===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:T,tail:f,tailMode:D}:(G.isBackwards=h,G.rendering=null,G.renderingStartTime=0,G.last=T,G.tail=f,G.tailMode=D)}function ik(d,h,f){var T=h.pendingProps,D=T.revealOrder,G=T.tail;if(Us(d,h,T.children,f),T=Da.current,(T&2)!==0)T=T&1|2,h.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&nk(d,f,h);else if(d.tag===19)nk(d,f,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}T&=1}if(Ca(Da,T),(h.mode&1)===0)h.memoizedState=null;else switch(D){case"forwards":for(f=h.child,D=null;f!==null;)d=f.alternate,d!==null&&Jh(d)===null&&(D=f),f=f.sibling;f=D,f===null?(D=h.child,h.child=null):(D=f.sibling,f.sibling=null),Yg(h,!1,D,f,G);break;case"backwards":for(f=null,D=h.child,h.child=null;D!==null;){if(d=D.alternate,d!==null&&Jh(d)===null){h.child=D;break}d=D.sibling,D.sibling=f,f=D,D=d}Yg(h,!0,f,null,G);break;case"together":Yg(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function im(d,h){(h.mode&1)===0&&d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2)}function ao(d,h,f){if(d!==null&&(h.dependencies=d.dependencies),ql|=h.lanes,(f&h.childLanes)===0)return null;if(d!==null&&h.child!==d.child)throw Error(a(153));if(h.child!==null){for(d=h.child,f=Qo(d,d.pendingProps),h.child=f,f.return=h;d.sibling!==null;)d=d.sibling,f=f.sibling=Qo(d,d.pendingProps),f.return=h;f.sibling=null}return h.child}function qI(d,h,f){switch(h.tag){case 3:rk(h),Zc();break;case 5:v1(h);break;case 1:en(h.type)&&Vh(h);break;case 4:Eg(h,h.stateNode.containerInfo);break;case 10:var T=h.type._context,D=h.memoizedProps.value;Ca(Kh,T._currentValue),T._currentValue=D;break;case 13:if(T=h.memoizedState,T!==null)return T.dehydrated!==null?(Ca(Da,Da.current&1),h.flags|=128,null):(f&h.child.childLanes)!==0?sk(d,h,f):(Ca(Da,Da.current&1),d=ao(d,h,f),d!==null?d.sibling:null);Ca(Da,Da.current&1);break;case 19:if(T=(f&h.childLanes)!==0,(d.flags&128)!==0){if(T)return ik(d,h,f);h.flags|=128}if(D=h.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),Ca(Da,Da.current),T)break;return null;case 22:case 23:return h.lanes=0,Z1(d,h,f)}return ao(d,h,f)}var ok,Qg,lk,ck;ok=function(d,h){for(var f=h.child;f!==null;){if(f.tag===5||f.tag===6)d.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break;for(;f.sibling===null;){if(f.return===null||f.return===h)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Qg=function(){},lk=function(d,h,f,T){var D=d.memoizedProps;if(D!==T){d=h.stateNode,Ul(Ti.current);var G=null;switch(f){case"input":D=jt(d,D),T=jt(d,T),G=[];break;case"select":D=_e({},D,{value:void 0}),T=_e({},T,{value:void 0}),G=[];break;case"textarea":D=Ze(d,D),T=Ze(d,T),G=[];break;default:typeof D.onClick!="function"&&typeof T.onClick=="function"&&(d.onclick=Lh)}U(f,T);var oe;f=null;for(nt in D)if(!T.hasOwnProperty(nt)&&D.hasOwnProperty(nt)&&D[nt]!=null)if(nt==="style"){var Ce=D[nt];for(oe in Ce)Ce.hasOwnProperty(oe)&&(f||(f={}),f[oe]="")}else nt!=="dangerouslySetInnerHTML"&&nt!=="children"&&nt!=="suppressContentEditableWarning"&&nt!=="suppressHydrationWarning"&&nt!=="autoFocus"&&(i.hasOwnProperty(nt)?G||(G=[]):(G=G||[]).push(nt,null));for(nt in T){var Re=T[nt];if(Ce=D?.[nt],T.hasOwnProperty(nt)&&Re!==Ce&&(Re!=null||Ce!=null))if(nt==="style")if(Ce){for(oe in Ce)!Ce.hasOwnProperty(oe)||Re&&Re.hasOwnProperty(oe)||(f||(f={}),f[oe]="");for(oe in Re)Re.hasOwnProperty(oe)&&Ce[oe]!==Re[oe]&&(f||(f={}),f[oe]=Re[oe])}else f||(G||(G=[]),G.push(nt,f)),f=Re;else nt==="dangerouslySetInnerHTML"?(Re=Re?Re.__html:void 0,Ce=Ce?Ce.__html:void 0,Re!=null&&Ce!==Re&&(G=G||[]).push(nt,Re)):nt==="children"?typeof Re!="string"&&typeof Re!="number"||(G=G||[]).push(nt,""+Re):nt!=="suppressContentEditableWarning"&&nt!=="suppressHydrationWarning"&&(i.hasOwnProperty(nt)?(Re!=null&&nt==="onScroll"&&Ea("scroll",d),G||Ce===Re||(G=[])):(G=G||[]).push(nt,Re))}f&&(G=G||[]).push("style",f);var nt=G;(h.updateQueue=nt)&&(h.flags|=4)}},ck=function(d,h,f,T){f!==T&&(h.flags|=4)};function P0(d,h){if(!$a)switch(d.tailMode){case"hidden":h=d.tail;for(var f=null;h!==null;)h.alternate!==null&&(f=h),h=h.sibling;f===null?d.tail=null:f.sibling=null;break;case"collapsed":f=d.tail;for(var T=null;f!==null;)f.alternate!==null&&(T=f),f=f.sibling;T===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:T.sibling=null}}function Ds(d){var h=d.alternate!==null&&d.alternate.child===d.child,f=0,T=0;if(h)for(var D=d.child;D!==null;)f|=D.lanes|D.childLanes,T|=D.subtreeFlags&14680064,T|=D.flags&14680064,D.return=d,D=D.sibling;else for(D=d.child;D!==null;)f|=D.lanes|D.childLanes,T|=D.subtreeFlags,T|=D.flags,D.return=d,D=D.sibling;return d.subtreeFlags|=T,d.childLanes=f,h}function WI(d,h,f){var T=h.pendingProps;switch(bg(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ds(h),null;case 1:return en(h.type)&&zh(),Ds(h),null;case 3:return T=h.stateNode,ad(),_a(Zs),_a(Is),Ig(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(d===null||d.child===null)&&(Wh(h)?h.flags|=4:d===null||d.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,ri!==null&&(lf(ri),ri=null))),Qg(d,h),Ds(h),null;case 5:_g(h);var D=Ul(C0.current);if(f=h.type,d!==null&&h.stateNode!=null)lk(d,h,f,T,D),d.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!T){if(h.stateNode===null)throw Error(a(166));return Ds(h),null}if(d=Ul(Ti.current),Wh(h)){T=h.stateNode,f=h.type;var G=h.memoizedProps;switch(T[Ci]=h,T[v0]=G,d=(h.mode&1)!==0,f){case"dialog":Ea("cancel",T),Ea("close",T);break;case"iframe":case"object":case"embed":Ea("load",T);break;case"video":case"audio":for(D=0;D<f0.length;D++)Ea(f0[D],T);break;case"source":Ea("error",T);break;case"img":case"image":case"link":Ea("error",T),Ea("load",T);break;case"details":Ea("toggle",T);break;case"input":Wt(T,G),Ea("invalid",T);break;case"select":T._wrapperState={wasMultiple:!!G.multiple},Ea("invalid",T);break;case"textarea":st(T,G),Ea("invalid",T)}U(f,G),D=null;for(var oe in G)if(G.hasOwnProperty(oe)){var Ce=G[oe];oe==="children"?typeof Ce=="string"?T.textContent!==Ce&&(G.suppressHydrationWarning!==!0&&Oh(T.textContent,Ce,d),D=["children",Ce]):typeof Ce=="number"&&T.textContent!==""+Ce&&(G.suppressHydrationWarning!==!0&&Oh(T.textContent,Ce,d),D=["children",""+Ce]):i.hasOwnProperty(oe)&&Ce!=null&&oe==="onScroll"&&Ea("scroll",T)}switch(f){case"input":Oe(T),yt(T,G,!0);break;case"textarea":Oe(T),$e(T);break;case"select":case"option":break;default:typeof G.onClick=="function"&&(T.onclick=Lh)}T=D,h.updateQueue=T,T!==null&&(h.flags|=4)}else{oe=D.nodeType===9?D:D.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=s(f)),d==="http://www.w3.org/1999/xhtml"?f==="script"?(d=oe.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof T.is=="string"?d=oe.createElement(f,{is:T.is}):(d=oe.createElement(f),f==="select"&&(oe=d,T.multiple?oe.multiple=!0:T.size&&(oe.size=T.size))):d=oe.createElementNS(d,f),d[Ci]=h,d[v0]=T,ok(d,h,!1,!1),h.stateNode=d;e:{switch(oe=N(f,T),f){case"dialog":Ea("cancel",d),Ea("close",d),D=T;break;case"iframe":case"object":case"embed":Ea("load",d),D=T;break;case"video":case"audio":for(D=0;D<f0.length;D++)Ea(f0[D],d);D=T;break;case"source":Ea("error",d),D=T;break;case"img":case"image":case"link":Ea("error",d),Ea("load",d),D=T;break;case"details":Ea("toggle",d),D=T;break;case"input":Wt(d,T),D=jt(d,T),Ea("invalid",d);break;case"option":D=T;break;case"select":d._wrapperState={wasMultiple:!!T.multiple},D=_e({},T,{value:void 0}),Ea("invalid",d);break;case"textarea":st(d,T),D=Ze(d,T),Ea("invalid",d);break;default:D=T}U(f,D),Ce=D;for(G in Ce)if(Ce.hasOwnProperty(G)){var Re=Ce[G];G==="style"?A(d,Re):G==="dangerouslySetInnerHTML"?(Re=Re?Re.__html:void 0,Re!=null&&R(d,Re)):G==="children"?typeof Re=="string"?(f!=="textarea"||Re!=="")&&V(d,Re):typeof Re=="number"&&V(d,""+Re):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(i.hasOwnProperty(G)?Re!=null&&G==="onScroll"&&Ea("scroll",d):Re!=null&&O(d,G,Re,oe))}switch(f){case"input":Oe(d),yt(d,T,!1);break;case"textarea":Oe(d),$e(d);break;case"option":T.value!=null&&d.setAttribute("value",""+Xe(T.value));break;case"select":d.multiple=!!T.multiple,G=T.value,G!=null?Te(d,!!T.multiple,G,!1):T.defaultValue!=null&&Te(d,!!T.multiple,T.defaultValue,!0);break;default:typeof D.onClick=="function"&&(d.onclick=Lh)}switch(f){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}}T&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Ds(h),null;case 6:if(d&&h.stateNode!=null)ck(d,h,d.memoizedProps,T);else{if(typeof T!="string"&&h.stateNode===null)throw Error(a(166));if(f=Ul(C0.current),Ul(Ti.current),Wh(h)){if(T=h.stateNode,f=h.memoizedProps,T[Ci]=h,(G=T.nodeValue!==f)&&(d=fn,d!==null))switch(d.tag){case 3:Oh(T.nodeValue,f,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&Oh(T.nodeValue,f,(d.mode&1)!==0)}G&&(h.flags|=4)}else T=(f.nodeType===9?f:f.ownerDocument).createTextNode(T),T[Ci]=h,h.stateNode=T}return Ds(h),null;case 13:if(_a(Da),T=h.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if($a&&bn!==null&&(h.mode&1)!==0&&(h.flags&128)===0)h1(),Zc(),h.flags|=98560,G=!1;else if(G=Wh(h),T!==null&&T.dehydrated!==null){if(d===null){if(!G)throw Error(a(318));if(G=h.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(a(317));G[Ci]=h}else Zc(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Ds(h),G=!1}else ri!==null&&(lf(ri),ri=null),G=!0;if(!G)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=f,h):(T=T!==null,T!==(d!==null&&d.memoizedState!==null)&&T&&(h.child.flags|=8192,(h.mode&1)!==0&&(d===null||(Da.current&1)!==0?as===0&&(as=3):uf())),h.updateQueue!==null&&(h.flags|=4),Ds(h),null);case 4:return ad(),Qg(d,h),d===null&&b0(h.stateNode.containerInfo),Ds(h),null;case 10:return jg(h.type._context),Ds(h),null;case 17:return en(h.type)&&zh(),Ds(h),null;case 19:if(_a(Da),G=h.memoizedState,G===null)return Ds(h),null;if(T=(h.flags&128)!==0,oe=G.rendering,oe===null)if(T)P0(G,!1);else{if(as!==0||d!==null&&(d.flags&128)!==0)for(d=h.child;d!==null;){if(oe=Jh(d),oe!==null){for(h.flags|=128,P0(G,!1),T=oe.updateQueue,T!==null&&(h.updateQueue=T,h.flags|=4),h.subtreeFlags=0,T=f,f=h.child;f!==null;)G=f,d=T,G.flags&=14680066,oe=G.alternate,oe===null?(G.childLanes=0,G.lanes=d,G.child=null,G.subtreeFlags=0,G.memoizedProps=null,G.memoizedState=null,G.updateQueue=null,G.dependencies=null,G.stateNode=null):(G.childLanes=oe.childLanes,G.lanes=oe.lanes,G.child=oe.child,G.subtreeFlags=0,G.deletions=null,G.memoizedProps=oe.memoizedProps,G.memoizedState=oe.memoizedState,G.updateQueue=oe.updateQueue,G.type=oe.type,d=oe.dependencies,G.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),f=f.sibling;return Ca(Da,Da.current&1|2),h.child}d=d.sibling}G.tail!==null&&Dt()>od&&(h.flags|=128,T=!0,P0(G,!1),h.lanes=4194304)}else{if(!T)if(d=Jh(oe),d!==null){if(h.flags|=128,T=!0,f=d.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),P0(G,!0),G.tail===null&&G.tailMode==="hidden"&&!oe.alternate&&!$a)return Ds(h),null}else 2*Dt()-G.renderingStartTime>od&&f!==1073741824&&(h.flags|=128,T=!0,P0(G,!1),h.lanes=4194304);G.isBackwards?(oe.sibling=h.child,h.child=oe):(f=G.last,f!==null?f.sibling=oe:h.child=oe,G.last=oe)}return G.tail!==null?(h=G.tail,G.rendering=h,G.tail=h.sibling,G.renderingStartTime=Dt(),h.sibling=null,f=Da.current,Ca(Da,T?f&1|2:f&1),h):(Ds(h),null);case 22:case 23:return df(),T=h.memoizedState!==null,d!==null&&d.memoizedState!==null!==T&&(h.flags|=8192),T&&(h.mode&1)!==0?(yn&1073741824)!==0&&(Ds(h),h.subtreeFlags&6&&(h.flags|=8192)):Ds(h),null;case 24:return null;case 25:return null}throw Error(a(156,h.tag))}function GI(d,h){switch(bg(h),h.tag){case 1:return en(h.type)&&zh(),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return ad(),_a(Zs),_a(Is),Ig(),d=h.flags,(d&65536)!==0&&(d&128)===0?(h.flags=d&-65537|128,h):null;case 5:return _g(h),null;case 13:if(_a(Da),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(a(340));Zc()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return _a(Da),null;case 4:return ad(),null;case 10:return jg(h.type._context),null;case 22:case 23:return df(),null;case 24:return null;default:return null}}var om=!1,As=!1,KI=typeof WeakSet=="function"?WeakSet:Set,ar=null;function nd(d,h){var f=d.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(T){La(d,h,T)}else f.current=null}function Xg(d,h,f){try{f()}catch(T){La(d,h,T)}}var dk=!1;function YI(d,h){if(cg=Mo,d=Vw(),tg(d)){if("selectionStart"in d)var f={start:d.selectionStart,end:d.selectionEnd};else e:{f=(f=d.ownerDocument)&&f.defaultView||window;var T=f.getSelection&&f.getSelection();if(T&&T.rangeCount!==0){f=T.anchorNode;var D=T.anchorOffset,G=T.focusNode;T=T.focusOffset;try{f.nodeType,G.nodeType}catch{f=null;break e}var oe=0,Ce=-1,Re=-1,nt=0,$t=0,Mt=d,Et=null;t:for(;;){for(var tr;Mt!==f||D!==0&&Mt.nodeType!==3||(Ce=oe+D),Mt!==G||T!==0&&Mt.nodeType!==3||(Re=oe+T),Mt.nodeType===3&&(oe+=Mt.nodeValue.length),(tr=Mt.firstChild)!==null;)Et=Mt,Mt=tr;for(;;){if(Mt===d)break t;if(Et===f&&++nt===D&&(Ce=oe),Et===G&&++$t===T&&(Re=oe),(tr=Mt.nextSibling)!==null)break;Mt=Et,Et=Mt.parentNode}Mt=tr}f=Ce===-1||Re===-1?null:{start:Ce,end:Re}}else f=null}f=f||{start:0,end:0}}else f=null;for(dg={focusedElem:d,selectionRange:f},Mo=!1,ar=h;ar!==null;)if(h=ar,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,ar=d;else for(;ar!==null;){h=ar;try{var ir=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(ir!==null){var lr=ir.memoizedProps,Ha=ir.memoizedState,Qe=h.stateNode,ze=Qe.getSnapshotBeforeUpdate(h.elementType===h.type?lr:ai(h.type,lr),Ha);Qe.__reactInternalSnapshotBeforeUpdate=ze}break;case 3:var rt=h.stateNode.containerInfo;rt.nodeType===1?rt.textContent="":rt.nodeType===9&&rt.documentElement&&rt.removeChild(rt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Bt){La(h,h.return,Bt)}if(d=h.sibling,d!==null){d.return=h.return,ar=d;break}ar=h.return}return ir=dk,dk=!1,ir}function I0(d,h,f){var T=h.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var D=T=T.next;do{if((D.tag&d)===d){var G=D.destroy;D.destroy=void 0,G!==void 0&&Xg(h,f,G)}D=D.next}while(D!==T)}}function lm(d,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&d)===d){var T=f.create;f.destroy=T()}f=f.next}while(f!==h)}}function Jg(d){var h=d.ref;if(h!==null){var f=d.stateNode;switch(d.tag){case 5:d=f;break;default:d=f}typeof h=="function"?h(d):h.current=d}}function uk(d){var h=d.alternate;h!==null&&(d.alternate=null,uk(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&(delete h[Ci],delete h[v0],delete h[pg],delete h[II],delete h[$I])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function hk(d){return d.tag===5||d.tag===3||d.tag===4}function mk(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||hk(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function Zg(d,h,f){var T=d.tag;if(T===5||T===6)d=d.stateNode,h?f.nodeType===8?f.parentNode.insertBefore(d,h):f.insertBefore(d,h):(f.nodeType===8?(h=f.parentNode,h.insertBefore(d,f)):(h=f,h.appendChild(d)),f=f._reactRootContainer,f!=null||h.onclick!==null||(h.onclick=Lh));else if(T!==4&&(d=d.child,d!==null))for(Zg(d,h,f),d=d.sibling;d!==null;)Zg(d,h,f),d=d.sibling}function ef(d,h,f){var T=d.tag;if(T===5||T===6)d=d.stateNode,h?f.insertBefore(d,h):f.appendChild(d);else if(T!==4&&(d=d.child,d!==null))for(ef(d,h,f),d=d.sibling;d!==null;)ef(d,h,f),d=d.sibling}var fs=null,si=!1;function qo(d,h,f){for(f=f.child;f!==null;)pk(d,h,f),f=f.sibling}function pk(d,h,f){if(Ua&&typeof Ua.onCommitFiberUnmount=="function")try{Ua.onCommitFiberUnmount(mn,f)}catch{}switch(f.tag){case 5:As||nd(f,h);case 6:var T=fs,D=si;fs=null,qo(d,h,f),fs=T,si=D,fs!==null&&(si?(d=fs,f=f.stateNode,d.nodeType===8?d.parentNode.removeChild(f):d.removeChild(f)):fs.removeChild(f.stateNode));break;case 18:fs!==null&&(si?(d=fs,f=f.stateNode,d.nodeType===8?mg(d.parentNode,f):d.nodeType===1&&mg(d,f),Zn(d)):mg(fs,f.stateNode));break;case 4:T=fs,D=si,fs=f.stateNode.containerInfo,si=!0,qo(d,h,f),fs=T,si=D;break;case 0:case 11:case 14:case 15:if(!As&&(T=f.updateQueue,T!==null&&(T=T.lastEffect,T!==null))){D=T=T.next;do{var G=D,oe=G.destroy;G=G.tag,oe!==void 0&&((G&2)!==0||(G&4)!==0)&&Xg(f,h,oe),D=D.next}while(D!==T)}qo(d,h,f);break;case 1:if(!As&&(nd(f,h),T=f.stateNode,typeof T.componentWillUnmount=="function"))try{T.props=f.memoizedProps,T.state=f.memoizedState,T.componentWillUnmount()}catch(Ce){La(f,h,Ce)}qo(d,h,f);break;case 21:qo(d,h,f);break;case 22:f.mode&1?(As=(T=As)||f.memoizedState!==null,qo(d,h,f),As=T):qo(d,h,f);break;default:qo(d,h,f)}}function xk(d){var h=d.updateQueue;if(h!==null){d.updateQueue=null;var f=d.stateNode;f===null&&(f=d.stateNode=new KI),h.forEach(function(T){var D=s9.bind(null,d,T);f.has(T)||(f.add(T),T.then(D,D))})}}function ni(d,h){var f=h.deletions;if(f!==null)for(var T=0;T<f.length;T++){var D=f[T];try{var G=d,oe=h,Ce=oe;e:for(;Ce!==null;){switch(Ce.tag){case 5:fs=Ce.stateNode,si=!1;break e;case 3:fs=Ce.stateNode.containerInfo,si=!0;break e;case 4:fs=Ce.stateNode.containerInfo,si=!0;break e}Ce=Ce.return}if(fs===null)throw Error(a(160));pk(G,oe,D),fs=null,si=!1;var Re=D.alternate;Re!==null&&(Re.return=null),D.return=null}catch(nt){La(D,h,nt)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)gk(h,d),h=h.sibling}function gk(d,h){var f=d.alternate,T=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(ni(h,d),Ei(d),T&4){try{I0(3,d,d.return),lm(3,d)}catch(lr){La(d,d.return,lr)}try{I0(5,d,d.return)}catch(lr){La(d,d.return,lr)}}break;case 1:ni(h,d),Ei(d),T&512&&f!==null&&nd(f,f.return);break;case 5:if(ni(h,d),Ei(d),T&512&&f!==null&&nd(f,f.return),d.flags&32){var D=d.stateNode;try{V(D,"")}catch(lr){La(d,d.return,lr)}}if(T&4&&(D=d.stateNode,D!=null)){var G=d.memoizedProps,oe=f!==null?f.memoizedProps:G,Ce=d.type,Re=d.updateQueue;if(d.updateQueue=null,Re!==null)try{Ce==="input"&&G.type==="radio"&&G.name!=null&&Tt(D,G),N(Ce,oe);var nt=N(Ce,G);for(oe=0;oe<Re.length;oe+=2){var $t=Re[oe],Mt=Re[oe+1];$t==="style"?A(D,Mt):$t==="dangerouslySetInnerHTML"?R(D,Mt):$t==="children"?V(D,Mt):O(D,$t,Mt,nt)}switch(Ce){case"input":tt(D,G);break;case"textarea":pt(D,G);break;case"select":var Et=D._wrapperState.wasMultiple;D._wrapperState.wasMultiple=!!G.multiple;var tr=G.value;tr!=null?Te(D,!!G.multiple,tr,!1):Et!==!!G.multiple&&(G.defaultValue!=null?Te(D,!!G.multiple,G.defaultValue,!0):Te(D,!!G.multiple,G.multiple?[]:"",!1))}D[v0]=G}catch(lr){La(d,d.return,lr)}}break;case 6:if(ni(h,d),Ei(d),T&4){if(d.stateNode===null)throw Error(a(162));D=d.stateNode,G=d.memoizedProps;try{D.nodeValue=G}catch(lr){La(d,d.return,lr)}}break;case 3:if(ni(h,d),Ei(d),T&4&&f!==null&&f.memoizedState.isDehydrated)try{Zn(h.containerInfo)}catch(lr){La(d,d.return,lr)}break;case 4:ni(h,d),Ei(d);break;case 13:ni(h,d),Ei(d),D=d.child,D.flags&8192&&(G=D.memoizedState!==null,D.stateNode.isHidden=G,!G||D.alternate!==null&&D.alternate.memoizedState!==null||(af=Dt())),T&4&&xk(d);break;case 22:if($t=f!==null&&f.memoizedState!==null,d.mode&1?(As=(nt=As)||$t,ni(h,d),As=nt):ni(h,d),Ei(d),T&8192){if(nt=d.memoizedState!==null,(d.stateNode.isHidden=nt)&&!$t&&(d.mode&1)!==0)for(ar=d,$t=d.child;$t!==null;){for(Mt=ar=$t;ar!==null;){switch(Et=ar,tr=Et.child,Et.tag){case 0:case 11:case 14:case 15:I0(4,Et,Et.return);break;case 1:nd(Et,Et.return);var ir=Et.stateNode;if(typeof ir.componentWillUnmount=="function"){T=Et,f=Et.return;try{h=T,ir.props=h.memoizedProps,ir.state=h.memoizedState,ir.componentWillUnmount()}catch(lr){La(T,f,lr)}}break;case 5:nd(Et,Et.return);break;case 22:if(Et.memoizedState!==null){yk(Mt);continue}}tr!==null?(tr.return=Et,ar=tr):yk(Mt)}$t=$t.sibling}e:for($t=null,Mt=d;;){if(Mt.tag===5){if($t===null){$t=Mt;try{D=Mt.stateNode,nt?(G=D.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none"):(Ce=Mt.stateNode,Re=Mt.memoizedProps.style,oe=Re!=null&&Re.hasOwnProperty("display")?Re.display:null,Ce.style.display=ge("display",oe))}catch(lr){La(d,d.return,lr)}}}else if(Mt.tag===6){if($t===null)try{Mt.stateNode.nodeValue=nt?"":Mt.memoizedProps}catch(lr){La(d,d.return,lr)}}else if((Mt.tag!==22&&Mt.tag!==23||Mt.memoizedState===null||Mt===d)&&Mt.child!==null){Mt.child.return=Mt,Mt=Mt.child;continue}if(Mt===d)break e;for(;Mt.sibling===null;){if(Mt.return===null||Mt.return===d)break e;$t===Mt&&($t=null),Mt=Mt.return}$t===Mt&&($t=null),Mt.sibling.return=Mt.return,Mt=Mt.sibling}}break;case 19:ni(h,d),Ei(d),T&4&&xk(d);break;case 21:break;default:ni(h,d),Ei(d)}}function Ei(d){var h=d.flags;if(h&2){try{e:{for(var f=d.return;f!==null;){if(hk(f)){var T=f;break e}f=f.return}throw Error(a(160))}switch(T.tag){case 5:var D=T.stateNode;T.flags&32&&(V(D,""),T.flags&=-33);var G=mk(d);ef(d,G,D);break;case 3:case 4:var oe=T.stateNode.containerInfo,Ce=mk(d);Zg(d,Ce,oe);break;default:throw Error(a(161))}}catch(Re){La(d,d.return,Re)}d.flags&=-3}h&4096&&(d.flags&=-4097)}function QI(d,h,f){ar=d,fk(d)}function fk(d,h,f){for(var T=(d.mode&1)!==0;ar!==null;){var D=ar,G=D.child;if(D.tag===22&&T){var oe=D.memoizedState!==null||om;if(!oe){var Ce=D.alternate,Re=Ce!==null&&Ce.memoizedState!==null||As;Ce=om;var nt=As;if(om=oe,(As=Re)&&!nt)for(ar=D;ar!==null;)oe=ar,Re=oe.child,oe.tag===22&&oe.memoizedState!==null?vk(D):Re!==null?(Re.return=oe,ar=Re):vk(D);for(;G!==null;)ar=G,fk(G),G=G.sibling;ar=D,om=Ce,As=nt}bk(d)}else(D.subtreeFlags&8772)!==0&&G!==null?(G.return=D,ar=G):bk(d)}}function bk(d){for(;ar!==null;){var h=ar;if((h.flags&8772)!==0){var f=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:As||lm(5,h);break;case 1:var T=h.stateNode;if(h.flags&4&&!As)if(f===null)T.componentDidMount();else{var D=h.elementType===h.type?f.memoizedProps:ai(h.type,f.memoizedProps);T.componentDidUpdate(D,f.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var G=h.updateQueue;G!==null&&y1(h,G,T);break;case 3:var oe=h.updateQueue;if(oe!==null){if(f=null,h.child!==null)switch(h.child.tag){case 5:f=h.child.stateNode;break;case 1:f=h.child.stateNode}y1(h,oe,f)}break;case 5:var Ce=h.stateNode;if(f===null&&h.flags&4){f=Ce;var Re=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":Re.autoFocus&&f.focus();break;case"img":Re.src&&(f.src=Re.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var nt=h.alternate;if(nt!==null){var $t=nt.memoizedState;if($t!==null){var Mt=$t.dehydrated;Mt!==null&&Zn(Mt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}As||h.flags&512&&Jg(h)}catch(Et){La(h,h.return,Et)}}if(h===d){ar=null;break}if(f=h.sibling,f!==null){f.return=h.return,ar=f;break}ar=h.return}}function yk(d){for(;ar!==null;){var h=ar;if(h===d){ar=null;break}var f=h.sibling;if(f!==null){f.return=h.return,ar=f;break}ar=h.return}}function vk(d){for(;ar!==null;){var h=ar;try{switch(h.tag){case 0:case 11:case 15:var f=h.return;try{lm(4,h)}catch(Re){La(h,f,Re)}break;case 1:var T=h.stateNode;if(typeof T.componentDidMount=="function"){var D=h.return;try{T.componentDidMount()}catch(Re){La(h,D,Re)}}var G=h.return;try{Jg(h)}catch(Re){La(h,G,Re)}break;case 5:var oe=h.return;try{Jg(h)}catch(Re){La(h,oe,Re)}}}catch(Re){La(h,h.return,Re)}if(h===d){ar=null;break}var Ce=h.sibling;if(Ce!==null){Ce.return=h.return,ar=Ce;break}ar=h.return}}var XI=Math.ceil,cm=te.ReactCurrentDispatcher,tf=te.ReactCurrentOwner,On=te.ReactCurrentBatchConfig,ea=0,ls=null,Ya=null,bs=0,yn=0,id=Bo(0),as=0,$0=null,ql=0,dm=0,rf=0,D0=null,rn=null,af=0,od=1/0,so=null,um=!1,sf=null,Wo=null,hm=!1,Go=null,mm=0,A0=0,nf=null,pm=-1,xm=0;function Hs(){return(ea&6)!==0?Dt():pm!==-1?pm:pm=Dt()}function Ko(d){return(d.mode&1)===0?1:(ea&2)!==0&&bs!==0?bs&-bs:AI.transition!==null?(xm===0&&(xm=Dl()),xm):(d=Wr,d!==0||(d=window.event,d=d===void 0?16:l0(d.type)),d)}function ii(d,h,f,T){if(50<A0)throw A0=0,nf=null,Error(a(185));$o(d,f,T),((ea&2)===0||d!==ls)&&(d===ls&&((ea&2)===0&&(dm|=f),as===4&&Yo(d,bs)),an(d,T),f===1&&ea===0&&(h.mode&1)===0&&(od=Dt()+500,Uh&&Vo()))}function an(d,h){var f=d.callbackNode;Wi(d,h);var T=$l(d,d===ls?bs:0);if(T===0)f!==null&&qt(f),d.callbackNode=null,d.callbackPriority=0;else if(h=T&-T,d.callbackPriority!==h){if(f!=null&&qt(f),h===1)d.tag===0?DI(kk.bind(null,d)):o1(kk.bind(null,d)),_I(function(){(ea&6)===0&&Vo()}),f=null;else{switch(Ao(T)){case 1:f=ia;break;case 4:f=aa;break;case 16:f=ua;break;case 536870912:f=yi;break;default:f=ua}f=Pk(f,wk.bind(null,d))}d.callbackPriority=h,d.callbackNode=f}}function wk(d,h){if(pm=-1,xm=0,(ea&6)!==0)throw Error(a(327));var f=d.callbackNode;if(ld()&&d.callbackNode!==f)return null;var T=$l(d,d===ls?bs:0);if(T===0)return null;if((T&30)!==0||(T&d.expiredLanes)!==0||h)h=gm(d,T);else{h=T;var D=ea;ea|=2;var G=jk();(ls!==d||bs!==h)&&(so=null,od=Dt()+500,Gl(d,h));do try{e9();break}catch(Ce){Nk(d,Ce)}while(!0);Ng(),cm.current=G,ea=D,Ya!==null?h=0:(ls=null,bs=0,h=as)}if(h!==0){if(h===2&&(D=pn(d),D!==0&&(T=D,h=of(d,D))),h===1)throw f=$0,Gl(d,0),Yo(d,T),an(d,Dt()),f;if(h===6)Yo(d,T);else{if(D=d.current.alternate,(T&30)===0&&!JI(D)&&(h=gm(d,T),h===2&&(G=pn(d),G!==0&&(T=G,h=of(d,G))),h===1))throw f=$0,Gl(d,0),Yo(d,T),an(d,Dt()),f;switch(d.finishedWork=D,d.finishedLanes=T,h){case 0:case 1:throw Error(a(345));case 2:Kl(d,rn,so);break;case 3:if(Yo(d,T),(T&130023424)===T&&(h=af+500-Dt(),10<h)){if($l(d,0)!==0)break;if(D=d.suspendedLanes,(D&T)!==T){Hs(),d.pingedLanes|=d.suspendedLanes&D;break}d.timeoutHandle=hg(Kl.bind(null,d,rn,so),h);break}Kl(d,rn,so);break;case 4:if(Yo(d,T),(T&4194240)===T)break;for(h=d.eventTimes,D=-1;0<T;){var oe=31-Sa(T);G=1<<oe,oe=h[oe],oe>D&&(D=oe),T&=~G}if(T=D,T=Dt()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*XI(T/1960))-T,10<T){d.timeoutHandle=hg(Kl.bind(null,d,rn,so),T);break}Kl(d,rn,so);break;case 5:Kl(d,rn,so);break;default:throw Error(a(329))}}}return an(d,Dt()),d.callbackNode===f?wk.bind(null,d):null}function of(d,h){var f=D0;return d.current.memoizedState.isDehydrated&&(Gl(d,h).flags|=256),d=gm(d,h),d!==2&&(h=rn,rn=f,h!==null&&lf(h)),d}function lf(d){rn===null?rn=d:rn.push.apply(rn,d)}function JI(d){for(var h=d;;){if(h.flags&16384){var f=h.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var T=0;T<f.length;T++){var D=f[T],G=D.getSnapshot;D=D.value;try{if(!ti(G(),D))return!1}catch{return!1}}}if(f=h.child,h.subtreeFlags&16384&&f!==null)f.return=h,h=f;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Yo(d,h){for(h&=~rf,h&=~dm,d.suspendedLanes|=h,d.pingedLanes&=~h,d=d.expirationTimes;0<h;){var f=31-Sa(h),T=1<<f;d[f]=-1,h&=~T}}function kk(d){if((ea&6)!==0)throw Error(a(327));ld();var h=$l(d,0);if((h&1)===0)return an(d,Dt()),null;var f=gm(d,h);if(d.tag!==0&&f===2){var T=pn(d);T!==0&&(h=T,f=of(d,T))}if(f===1)throw f=$0,Gl(d,0),Yo(d,h),an(d,Dt()),f;if(f===6)throw Error(a(345));return d.finishedWork=d.current.alternate,d.finishedLanes=h,Kl(d,rn,so),an(d,Dt()),null}function cf(d,h){var f=ea;ea|=1;try{return d(h)}finally{ea=f,ea===0&&(od=Dt()+500,Uh&&Vo())}}function Wl(d){Go!==null&&Go.tag===0&&(ea&6)===0&&ld();var h=ea;ea|=1;var f=On.transition,T=Wr;try{if(On.transition=null,Wr=1,d)return d()}finally{Wr=T,On.transition=f,ea=h,(ea&6)===0&&Vo()}}function df(){yn=id.current,_a(id)}function Gl(d,h){d.finishedWork=null,d.finishedLanes=0;var f=d.timeoutHandle;if(f!==-1&&(d.timeoutHandle=-1,EI(f)),Ya!==null)for(f=Ya.return;f!==null;){var T=f;switch(bg(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&zh();break;case 3:ad(),_a(Zs),_a(Is),Ig();break;case 5:_g(T);break;case 4:ad();break;case 13:_a(Da);break;case 19:_a(Da);break;case 10:jg(T.type._context);break;case 22:case 23:df()}f=f.return}if(ls=d,Ya=d=Qo(d.current,null),bs=yn=h,as=0,$0=null,rf=dm=ql=0,rn=D0=null,Vl!==null){for(h=0;h<Vl.length;h++)if(f=Vl[h],T=f.interleaved,T!==null){f.interleaved=null;var D=T.next,G=f.pending;if(G!==null){var oe=G.next;G.next=D,T.next=oe}f.pending=T}Vl=null}return d}function Nk(d,h){do{var f=Ya;try{if(Ng(),Zh.current=am,em){for(var T=Aa.memoizedState;T!==null;){var D=T.queue;D!==null&&(D.pending=null),T=T.next}em=!1}if(Hl=0,os=rs=Aa=null,T0=!1,S0=0,tf.current=null,f===null||f.return===null){as=1,$0=h,Ya=null;break}e:{var G=d,oe=f.return,Ce=f,Re=h;if(h=bs,Ce.flags|=32768,Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var nt=Re,$t=Ce,Mt=$t.tag;if(($t.mode&1)===0&&(Mt===0||Mt===11||Mt===15)){var Et=$t.alternate;Et?($t.updateQueue=Et.updateQueue,$t.memoizedState=Et.memoizedState,$t.lanes=Et.lanes):($t.updateQueue=null,$t.memoizedState=null)}var tr=K1(oe);if(tr!==null){tr.flags&=-257,Y1(tr,oe,Ce,G,h),tr.mode&1&&G1(G,nt,h),h=tr,Re=nt;var ir=h.updateQueue;if(ir===null){var lr=new Set;lr.add(Re),h.updateQueue=lr}else ir.add(Re);break e}else{if((h&1)===0){G1(G,nt,h),uf();break e}Re=Error(a(426))}}else if($a&&Ce.mode&1){var Ha=K1(oe);if(Ha!==null){(Ha.flags&65536)===0&&(Ha.flags|=256),Y1(Ha,oe,Ce,G,h),wg(sd(Re,Ce));break e}}G=Re=sd(Re,Ce),as!==4&&(as=2),D0===null?D0=[G]:D0.push(G),G=oe;do{switch(G.tag){case 3:G.flags|=65536,h&=-h,G.lanes|=h;var Qe=q1(G,Re,h);b1(G,Qe);break e;case 1:Ce=Re;var ze=G.type,rt=G.stateNode;if((G.flags&128)===0&&(typeof ze.getDerivedStateFromError=="function"||rt!==null&&typeof rt.componentDidCatch=="function"&&(Wo===null||!Wo.has(rt)))){G.flags|=65536,h&=-h,G.lanes|=h;var Bt=W1(G,Ce,h);b1(G,Bt);break e}}G=G.return}while(G!==null)}Tk(f)}catch(hr){h=hr,Ya===f&&f!==null&&(Ya=f=f.return);continue}break}while(!0)}function jk(){var d=cm.current;return cm.current=am,d===null?am:d}function uf(){(as===0||as===3||as===2)&&(as=4),ls===null||(ql&268435455)===0&&(dm&268435455)===0||Yo(ls,bs)}function gm(d,h){var f=ea;ea|=2;var T=jk();(ls!==d||bs!==h)&&(so=null,Gl(d,h));do try{ZI();break}catch(D){Nk(d,D)}while(!0);if(Ng(),ea=f,cm.current=T,Ya!==null)throw Error(a(261));return ls=null,bs=0,as}function ZI(){for(;Ya!==null;)Ck(Ya)}function e9(){for(;Ya!==null&&!Zt();)Ck(Ya)}function Ck(d){var h=_k(d.alternate,d,yn);d.memoizedProps=d.pendingProps,h===null?Tk(d):Ya=h,tf.current=null}function Tk(d){var h=d;do{var f=h.alternate;if(d=h.return,(h.flags&32768)===0){if(f=WI(f,h,yn),f!==null){Ya=f;return}}else{if(f=GI(f,h),f!==null){f.flags&=32767,Ya=f;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{as=6,Ya=null;return}}if(h=h.sibling,h!==null){Ya=h;return}Ya=h=d}while(h!==null);as===0&&(as=5)}function Kl(d,h,f){var T=Wr,D=On.transition;try{On.transition=null,Wr=1,t9(d,h,f,T)}finally{On.transition=D,Wr=T}return null}function t9(d,h,f,T){do ld();while(Go!==null);if((ea&6)!==0)throw Error(a(327));f=d.finishedWork;var D=d.finishedLanes;if(f===null)return null;if(d.finishedWork=null,d.finishedLanes=0,f===d.current)throw Error(a(177));d.callbackNode=null,d.callbackPriority=0;var G=f.lanes|f.childLanes;if(ka(d,G),d===ls&&(Ya=ls=null,bs=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||hm||(hm=!0,Pk(ua,function(){return ld(),null})),G=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||G){G=On.transition,On.transition=null;var oe=Wr;Wr=1;var Ce=ea;ea|=4,tf.current=null,YI(d,f),gk(f,d),wI(dg),Mo=!!cg,dg=cg=null,d.current=f,QI(f),Ft(),ea=Ce,Wr=oe,On.transition=G}else d.current=f;if(hm&&(hm=!1,Go=d,mm=D),G=d.pendingLanes,G===0&&(Wo=null),_o(f.stateNode),an(d,Dt()),h!==null)for(T=d.onRecoverableError,f=0;f<h.length;f++)D=h[f],T(D.value,{componentStack:D.stack,digest:D.digest});if(um)throw um=!1,d=sf,sf=null,d;return(mm&1)!==0&&d.tag!==0&&ld(),G=d.pendingLanes,(G&1)!==0?d===nf?A0++:(A0=0,nf=d):A0=0,Vo(),null}function ld(){if(Go!==null){var d=Ao(mm),h=On.transition,f=Wr;try{if(On.transition=null,Wr=16>d?16:d,Go===null)var T=!1;else{if(d=Go,Go=null,mm=0,(ea&6)!==0)throw Error(a(331));var D=ea;for(ea|=4,ar=d.current;ar!==null;){var G=ar,oe=G.child;if((ar.flags&16)!==0){var Ce=G.deletions;if(Ce!==null){for(var Re=0;Re<Ce.length;Re++){var nt=Ce[Re];for(ar=nt;ar!==null;){var $t=ar;switch($t.tag){case 0:case 11:case 15:I0(8,$t,G)}var Mt=$t.child;if(Mt!==null)Mt.return=$t,ar=Mt;else for(;ar!==null;){$t=ar;var Et=$t.sibling,tr=$t.return;if(uk($t),$t===nt){ar=null;break}if(Et!==null){Et.return=tr,ar=Et;break}ar=tr}}}var ir=G.alternate;if(ir!==null){var lr=ir.child;if(lr!==null){ir.child=null;do{var Ha=lr.sibling;lr.sibling=null,lr=Ha}while(lr!==null)}}ar=G}}if((G.subtreeFlags&2064)!==0&&oe!==null)oe.return=G,ar=oe;else e:for(;ar!==null;){if(G=ar,(G.flags&2048)!==0)switch(G.tag){case 0:case 11:case 15:I0(9,G,G.return)}var Qe=G.sibling;if(Qe!==null){Qe.return=G.return,ar=Qe;break e}ar=G.return}}var ze=d.current;for(ar=ze;ar!==null;){oe=ar;var rt=oe.child;if((oe.subtreeFlags&2064)!==0&&rt!==null)rt.return=oe,ar=rt;else e:for(oe=ze;ar!==null;){if(Ce=ar,(Ce.flags&2048)!==0)try{switch(Ce.tag){case 0:case 11:case 15:lm(9,Ce)}}catch(hr){La(Ce,Ce.return,hr)}if(Ce===oe){ar=null;break e}var Bt=Ce.sibling;if(Bt!==null){Bt.return=Ce.return,ar=Bt;break e}ar=Ce.return}}if(ea=D,Vo(),Ua&&typeof Ua.onPostCommitFiberRoot=="function")try{Ua.onPostCommitFiberRoot(mn,d)}catch{}T=!0}return T}finally{Wr=f,On.transition=h}}return!1}function Sk(d,h,f){h=sd(f,h),h=q1(d,h,1),d=Ho(d,h,1),h=Hs(),d!==null&&($o(d,1,h),an(d,h))}function La(d,h,f){if(d.tag===3)Sk(d,d,f);else for(;h!==null;){if(h.tag===3){Sk(h,d,f);break}else if(h.tag===1){var T=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(Wo===null||!Wo.has(T))){d=sd(f,d),d=W1(h,d,1),h=Ho(h,d,1),d=Hs(),h!==null&&($o(h,1,d),an(h,d));break}}h=h.return}}function r9(d,h,f){var T=d.pingCache;T!==null&&T.delete(h),h=Hs(),d.pingedLanes|=d.suspendedLanes&f,ls===d&&(bs&f)===f&&(as===4||as===3&&(bs&130023424)===bs&&500>Dt()-af?Gl(d,0):rf|=f),an(d,h)}function Ek(d,h){h===0&&((d.mode&1)===0?h=1:(h=Ic,Ic<<=1,(Ic&130023424)===0&&(Ic=4194304)));var f=Hs();d=to(d,h),d!==null&&($o(d,h,f),an(d,f))}function a9(d){var h=d.memoizedState,f=0;h!==null&&(f=h.retryLane),Ek(d,f)}function s9(d,h){var f=0;switch(d.tag){case 13:var T=d.stateNode,D=d.memoizedState;D!==null&&(f=D.retryLane);break;case 19:T=d.stateNode;break;default:throw Error(a(314))}T!==null&&T.delete(h),Ek(d,f)}var _k;_k=function(d,h,f){if(d!==null)if(d.memoizedProps!==h.pendingProps||Zs.current)tn=!0;else{if((d.lanes&f)===0&&(h.flags&128)===0)return tn=!1,qI(d,h,f);tn=(d.flags&131072)!==0}else tn=!1,$a&&(h.flags&1048576)!==0&&l1(h,qh,h.index);switch(h.lanes=0,h.tag){case 2:var T=h.type;im(d,h),d=h.pendingProps;var D=Qc(h,Is.current);rd(h,f),D=Ag(null,h,T,d,D,f);var G=Rg();return h.flags|=1,typeof D=="object"&&D!==null&&typeof D.render=="function"&&D.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,en(T)?(G=!0,Vh(h)):G=!1,h.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,Sg(h),D.updater=sm,h.stateNode=D,D._reactInternals=h,zg(h,T,d,f),h=qg(null,h,T,!0,G,f)):(h.tag=0,$a&&G&&fg(h),Us(null,h,D,f),h=h.child),h;case 16:T=h.elementType;e:{switch(im(d,h),d=h.pendingProps,D=T._init,T=D(T._payload),h.type=T,D=h.tag=i9(T),d=ai(T,d),D){case 0:h=Hg(null,h,T,d,f);break e;case 1:h=tk(null,h,T,d,f);break e;case 11:h=Q1(null,h,T,d,f);break e;case 14:h=X1(null,h,T,ai(T.type,d),f);break e}throw Error(a(306,T,""))}return h;case 0:return T=h.type,D=h.pendingProps,D=h.elementType===T?D:ai(T,D),Hg(d,h,T,D,f);case 1:return T=h.type,D=h.pendingProps,D=h.elementType===T?D:ai(T,D),tk(d,h,T,D,f);case 3:e:{if(rk(h),d===null)throw Error(a(387));T=h.pendingProps,G=h.memoizedState,D=G.element,f1(d,h),Xh(h,T,null,f);var oe=h.memoizedState;if(T=oe.element,G.isDehydrated)if(G={element:T,isDehydrated:!1,cache:oe.cache,pendingSuspenseBoundaries:oe.pendingSuspenseBoundaries,transitions:oe.transitions},h.updateQueue.baseState=G,h.memoizedState=G,h.flags&256){D=sd(Error(a(423)),h),h=ak(d,h,T,f,D);break e}else if(T!==D){D=sd(Error(a(424)),h),h=ak(d,h,T,f,D);break e}else for(bn=Lo(h.stateNode.containerInfo.firstChild),fn=h,$a=!0,ri=null,f=x1(h,null,T,f),h.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Zc(),T===D){h=ao(d,h,f);break e}Us(d,h,T,f)}h=h.child}return h;case 5:return v1(h),d===null&&vg(h),T=h.type,D=h.pendingProps,G=d!==null?d.memoizedProps:null,oe=D.children,ug(T,D)?oe=null:G!==null&&ug(T,G)&&(h.flags|=32),ek(d,h),Us(d,h,oe,f),h.child;case 6:return d===null&&vg(h),null;case 13:return sk(d,h,f);case 4:return Eg(h,h.stateNode.containerInfo),T=h.pendingProps,d===null?h.child=ed(h,null,T,f):Us(d,h,T,f),h.child;case 11:return T=h.type,D=h.pendingProps,D=h.elementType===T?D:ai(T,D),Q1(d,h,T,D,f);case 7:return Us(d,h,h.pendingProps,f),h.child;case 8:return Us(d,h,h.pendingProps.children,f),h.child;case 12:return Us(d,h,h.pendingProps.children,f),h.child;case 10:e:{if(T=h.type._context,D=h.pendingProps,G=h.memoizedProps,oe=D.value,Ca(Kh,T._currentValue),T._currentValue=oe,G!==null)if(ti(G.value,oe)){if(G.children===D.children&&!Zs.current){h=ao(d,h,f);break e}}else for(G=h.child,G!==null&&(G.return=h);G!==null;){var Ce=G.dependencies;if(Ce!==null){oe=G.child;for(var Re=Ce.firstContext;Re!==null;){if(Re.context===T){if(G.tag===1){Re=ro(-1,f&-f),Re.tag=2;var nt=G.updateQueue;if(nt!==null){nt=nt.shared;var $t=nt.pending;$t===null?Re.next=Re:(Re.next=$t.next,$t.next=Re),nt.pending=Re}}G.lanes|=f,Re=G.alternate,Re!==null&&(Re.lanes|=f),Cg(G.return,f,h),Ce.lanes|=f;break}Re=Re.next}}else if(G.tag===10)oe=G.type===h.type?null:G.child;else if(G.tag===18){if(oe=G.return,oe===null)throw Error(a(341));oe.lanes|=f,Ce=oe.alternate,Ce!==null&&(Ce.lanes|=f),Cg(oe,f,h),oe=G.sibling}else oe=G.child;if(oe!==null)oe.return=G;else for(oe=G;oe!==null;){if(oe===h){oe=null;break}if(G=oe.sibling,G!==null){G.return=oe.return,oe=G;break}oe=oe.return}G=oe}Us(d,h,D.children,f),h=h.child}return h;case 9:return D=h.type,T=h.pendingProps.children,rd(h,f),D=Mn(D),T=T(D),h.flags|=1,Us(d,h,T,f),h.child;case 14:return T=h.type,D=ai(T,h.pendingProps),D=ai(T.type,D),X1(d,h,T,D,f);case 15:return J1(d,h,h.type,h.pendingProps,f);case 17:return T=h.type,D=h.pendingProps,D=h.elementType===T?D:ai(T,D),im(d,h),h.tag=1,en(T)?(d=!0,Vh(h)):d=!1,rd(h,f),U1(h,T,D),zg(h,T,D,f),qg(null,h,T,!0,d,f);case 19:return ik(d,h,f);case 22:return Z1(d,h,f)}throw Error(a(156,h.tag))};function Pk(d,h){return St(d,h)}function n9(d,h,f,T){this.tag=d,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(d,h,f,T){return new n9(d,h,f,T)}function hf(d){return d=d.prototype,!(!d||!d.isReactComponent)}function i9(d){if(typeof d=="function")return hf(d)?1:0;if(d!=null){if(d=d.$$typeof,d===X)return 11;if(d===ct)return 14}return 2}function Qo(d,h){var f=d.alternate;return f===null?(f=Ln(d.tag,h,d.key,d.mode),f.elementType=d.elementType,f.type=d.type,f.stateNode=d.stateNode,f.alternate=d,d.alternate=f):(f.pendingProps=h,f.type=d.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=d.flags&14680064,f.childLanes=d.childLanes,f.lanes=d.lanes,f.child=d.child,f.memoizedProps=d.memoizedProps,f.memoizedState=d.memoizedState,f.updateQueue=d.updateQueue,h=d.dependencies,f.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},f.sibling=d.sibling,f.index=d.index,f.ref=d.ref,f}function fm(d,h,f,T,D,G){var oe=2;if(T=d,typeof d=="function")hf(d)&&(oe=1);else if(typeof d=="string")oe=5;else e:switch(d){case H:return Yl(f.children,D,G,h);case z:oe=8,D|=8;break;case F:return d=Ln(12,f,h,D|2),d.elementType=F,d.lanes=G,d;case ae:return d=Ln(13,f,h,D),d.elementType=ae,d.lanes=G,d;case We:return d=Ln(19,f,h,D),d.elementType=We,d.lanes=G,d;case ot:return bm(f,D,G,h);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case v:oe=10;break e;case ie:oe=9;break e;case X:oe=11;break e;case ct:oe=14;break e;case ft:oe=16,T=null;break e}throw Error(a(130,d==null?d:typeof d,""))}return h=Ln(oe,f,h,D),h.elementType=d,h.type=T,h.lanes=G,h}function Yl(d,h,f,T){return d=Ln(7,d,T,h),d.lanes=f,d}function bm(d,h,f,T){return d=Ln(22,d,T,h),d.elementType=ot,d.lanes=f,d.stateNode={isHidden:!1},d}function mf(d,h,f){return d=Ln(6,d,null,h),d.lanes=f,d}function pf(d,h,f){return h=Ln(4,d.children!==null?d.children:[],d.key,h),h.lanes=f,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}function o9(d,h,f,T,D){this.tag=h,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Io(0),this.expirationTimes=Io(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Io(0),this.identifierPrefix=T,this.onRecoverableError=D,this.mutableSourceEagerHydrationData=null}function xf(d,h,f,T,D,G,oe,Ce,Re){return d=new o9(d,h,f,Ce,Re),h===1?(h=1,G===!0&&(h|=8)):h=0,G=Ln(3,null,null,h),d.current=G,G.stateNode=d,G.memoizedState={element:T,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sg(G),d}function l9(d,h,f){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:be,key:T==null?null:""+T,children:d,containerInfo:h,implementation:f}}function Ik(d){if(!d)return zo;d=d._reactInternals;e:{if(Ne(d)!==d||d.tag!==1)throw Error(a(170));var h=d;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(en(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(a(171))}if(d.tag===1){var f=d.type;if(en(f))return n1(d,f,h)}return h}function $k(d,h,f,T,D,G,oe,Ce,Re){return d=xf(f,T,!0,d,D,G,oe,Ce,Re),d.context=Ik(null),f=d.current,T=Hs(),D=Ko(f),G=ro(T,D),G.callback=h??null,Ho(f,G,D),d.current.lanes=D,$o(d,D,T),an(d,T),d}function ym(d,h,f,T){var D=h.current,G=Hs(),oe=Ko(D);return f=Ik(f),h.context===null?h.context=f:h.pendingContext=f,h=ro(G,oe),h.payload={element:d},T=T===void 0?null:T,T!==null&&(h.callback=T),d=Ho(D,h,oe),d!==null&&(ii(d,D,oe,G),Qh(d,D,oe)),oe}function vm(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function Dk(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var f=d.retryLane;d.retryLane=f!==0&&f<h?f:h}}function gf(d,h){Dk(d,h),(d=d.alternate)&&Dk(d,h)}function c9(){return null}var Ak=typeof reportError=="function"?reportError:function(d){console.error(d)};function ff(d){this._internalRoot=d}wm.prototype.render=ff.prototype.render=function(d){var h=this._internalRoot;if(h===null)throw Error(a(409));ym(d,h,null,null)},wm.prototype.unmount=ff.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var h=d.containerInfo;Wl(function(){ym(null,d,null,null)}),h[Xi]=null}};function wm(d){this._internalRoot=d}wm.prototype.unstable_scheduleHydration=function(d){if(d){var h=wh();d={blockedOn:null,target:d,priority:h};for(var f=0;f<wi.length&&h!==0&&h<wi[f].priority;f++);wi.splice(f,0,d),f===0&&jh(d)}};function bf(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function km(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function Rk(){}function d9(d,h,f,T,D){if(D){if(typeof T=="function"){var G=T;T=function(){var nt=vm(oe);G.call(nt)}}var oe=$k(h,T,d,0,null,!1,!1,"",Rk);return d._reactRootContainer=oe,d[Xi]=oe.current,b0(d.nodeType===8?d.parentNode:d),Wl(),oe}for(;D=d.lastChild;)d.removeChild(D);if(typeof T=="function"){var Ce=T;T=function(){var nt=vm(Re);Ce.call(nt)}}var Re=xf(d,0,!1,null,null,!1,!1,"",Rk);return d._reactRootContainer=Re,d[Xi]=Re.current,b0(d.nodeType===8?d.parentNode:d),Wl(function(){ym(h,Re,f,T)}),Re}function Nm(d,h,f,T,D){var G=f._reactRootContainer;if(G){var oe=G;if(typeof D=="function"){var Ce=D;D=function(){var Re=vm(oe);Ce.call(Re)}}ym(h,oe,d,D)}else oe=d9(f,h,d,D,T);return vm(oe)}yh=function(d){switch(d.tag){case 3:var h=d.stateNode;if(h.current.memoizedState.isDehydrated){var f=Po(h.pendingLanes);f!==0&&(Do(h,f|1),an(h,Dt()),(ea&6)===0&&(od=Dt()+500,Vo()))}break;case 13:Wl(function(){var T=to(d,1);if(T!==null){var D=Hs();ii(T,d,1,D)}}),gf(d,1)}},$c=function(d){if(d.tag===13){var h=to(d,134217728);if(h!==null){var f=Hs();ii(h,d,134217728,f)}gf(d,134217728)}},vh=function(d){if(d.tag===13){var h=Ko(d),f=to(d,h);if(f!==null){var T=Hs();ii(f,d,h,T)}gf(d,h)}},wh=function(){return Wr},kh=function(d,h){var f=Wr;try{return Wr=d,h()}finally{Wr=f}},we=function(d,h,f){switch(h){case"input":if(tt(d,f),h=f.name,f.type==="radio"&&h!=null){for(f=d;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<f.length;h++){var T=f[h];if(T!==d&&T.form===d.form){var D=Bh(T);if(!D)throw Error(a(90));kt(T),tt(T,D)}}}break;case"textarea":pt(d,f);break;case"select":h=f.value,h!=null&&Te(d,!!f.multiple,h,!1)}},_t=cf,At=Wl;var u9={usingClientEntryPoint:!1,Events:[w0,Kc,Bh,Be,Se,cf]},R0={findFiberByHostInstance:Ol,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},h9={bundleType:R0.bundleType,version:R0.version,rendererPackageName:R0.rendererPackageName,rendererConfig:R0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=et(d),d===null?null:d.stateNode},findFiberByHostInstance:R0.findFiberByHostInstance||c9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jm.isDisabled&&jm.supportsFiber)try{mn=jm.inject(h9),Ua=jm}catch{}}return sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u9,sn.createPortal=function(d,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bf(h))throw Error(a(200));return l9(d,h,null,f)},sn.createRoot=function(d,h){if(!bf(d))throw Error(a(299));var f=!1,T="",D=Ak;return h!=null&&(h.unstable_strictMode===!0&&(f=!0),h.identifierPrefix!==void 0&&(T=h.identifierPrefix),h.onRecoverableError!==void 0&&(D=h.onRecoverableError)),h=xf(d,1,!1,null,null,f,!1,T,D),d[Xi]=h.current,b0(d.nodeType===8?d.parentNode:d),new ff(h)},sn.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(a(188)):(d=Object.keys(d).join(","),Error(a(268,d)));return d=et(h),d=d===null?null:d.stateNode,d},sn.flushSync=function(d){return Wl(d)},sn.hydrate=function(d,h,f){if(!km(h))throw Error(a(200));return Nm(null,d,h,!0,f)},sn.hydrateRoot=function(d,h,f){if(!bf(d))throw Error(a(405));var T=f!=null&&f.hydratedSources||null,D=!1,G="",oe=Ak;if(f!=null&&(f.unstable_strictMode===!0&&(D=!0),f.identifierPrefix!==void 0&&(G=f.identifierPrefix),f.onRecoverableError!==void 0&&(oe=f.onRecoverableError)),h=$k(h,null,d,1,f??null,D,!1,G,oe),d[Xi]=h.current,b0(d),T)for(d=0;d<T.length;d++)f=T[d],D=f._getVersion,D=D(f._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[f,D]:h.mutableSourceEagerHydrationData.push(f,D);return new wm(h)},sn.render=function(d,h,f){if(!km(h))throw Error(a(200));return Nm(null,d,h,!1,f)},sn.unmountComponentAtNode=function(d){if(!km(d))throw Error(a(40));return d._reactRootContainer?(Wl(function(){Nm(null,null,d,!1,function(){d._reactRootContainer=null,d[Xi]=null})}),!0):!1},sn.unstable_batchedUpdates=cf,sn.unstable_renderSubtreeIntoContainer=function(d,h,f,T){if(!km(f))throw Error(a(200));if(d==null||d._reactInternals===void 0)throw Error(a(38));return Nm(d,h,f,!1,T)},sn.version="18.3.1-next-f1338f8080-20240426",sn}var Uk;function v9(){if(Uk)return wf.exports;Uk=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),wf.exports=y9(),wf.exports}var Hk;function w9(){if(Hk)return Cm;Hk=1;var r=v9();return Cm.createRoot=r.createRoot,Cm.hydrateRoot=r.hydrateRoot,Cm}var k9=w9();const N9=uy(k9);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qk="popstate";function j9(r={}){function t(n,i){let{pathname:c,search:o,hash:u}=n.location;return hb("",{pathname:c,search:o,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function a(n,i){return typeof i=="string"?i:pu(i)}return T9(t,a,null,r)}function Ma(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function Li(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function C9(){return Math.random().toString(36).substring(2,10)}function Wk(r,t){return{usr:r.state,key:r.key,idx:t}}function hb(r,t,a=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof t=="string"?Hd(t):t,state:a,key:t&&t.key||n||C9()}}function pu({pathname:r="/",search:t="",hash:a=""}){return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Hd(r){let t={};if(r){let a=r.indexOf("#");a>=0&&(t.hash=r.substring(a),r=r.substring(0,a));let n=r.indexOf("?");n>=0&&(t.search=r.substring(n),r=r.substring(0,n)),r&&(t.pathname=r)}return t}function T9(r,t,a,n={}){let{window:i=document.defaultView,v5Compat:c=!1}=n,o=i.history,u="POP",m=null,x=g();x==null&&(x=0,o.replaceState({...o.state,idx:x},""));function g(){return(o.state||{idx:null}).idx}function k(){u="POP";let b=g(),B=b==null?null:b-x;x=b,m&&m({action:u,location:P.location,delta:B})}function S(b,B){u="PUSH";let L=hb(P.location,b,B);x=g()+1;let O=Wk(L,x),te=P.createHref(L);try{o.pushState(O,"",te)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;i.location.assign(te)}c&&m&&m({action:u,location:P.location,delta:1})}function _(b,B){u="REPLACE";let L=hb(P.location,b,B);x=g();let O=Wk(L,x),te=P.createHref(L);o.replaceState(O,"",te),c&&m&&m({action:u,location:P.location,delta:0})}function I(b){return S9(b)}let P={get action(){return u},get location(){return r(i,o)},listen(b){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(qk,k),m=b,()=>{i.removeEventListener(qk,k),m=null}},createHref(b){return t(i,b)},createURL:I,encodeLocation(b){let B=I(b);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:S,replace:_,go(b){return o.go(b)}};return P}function S9(r,t=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),Ma(a,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:pu(r);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=a+n),new URL(n,a)}function Y5(r,t,a="/"){return E9(r,t,a,!1)}function E9(r,t,a,n){let i=typeof t=="string"?Hd(t):t,c=go(i.pathname||"/",a);if(c==null)return null;let o=Q5(r);_9(o);let u=null;for(let m=0;u==null&&m<o.length;++m){let x=B9(c);u=O9(o[m],x,n)}return u}function Q5(r,t=[],a=[],n="",i=!1){let c=(o,u,m=i,x)=>{let g={relativePath:x===void 0?o.path||"":x,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&m)return;Ma(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let k=co([n,g.relativePath]),S=a.concat(g);o.children&&o.children.length>0&&(Ma(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${k}".`),Q5(o.children,t,S,k,m)),!(o.path==null&&!o.index)&&t.push({path:k,score:M9(k,o.index),routesMeta:S})};return r.forEach((o,u)=>{if(o.path===""||!o.path?.includes("?"))c(o,u);else for(let m of X5(o.path))c(o,u,!0,m)}),t}function X5(r){let t=r.split("/");if(t.length===0)return[];let[a,...n]=t,i=a.endsWith("?"),c=a.replace(/\?$/,"");if(n.length===0)return i?[c,""]:[c];let o=X5(n.join("/")),u=[];return u.push(...o.map(m=>m===""?c:[c,m].join("/"))),i&&u.push(...o),u.map(m=>r.startsWith("/")&&m===""?"/":m)}function _9(r){r.sort((t,a)=>t.score!==a.score?a.score-t.score:F9(t.routesMeta.map(n=>n.childrenIndex),a.routesMeta.map(n=>n.childrenIndex)))}var P9=/^:[\w-]+$/,I9=3,$9=2,D9=1,A9=10,R9=-2,Gk=r=>r==="*";function M9(r,t){let a=r.split("/"),n=a.length;return a.some(Gk)&&(n+=R9),t&&(n+=$9),a.filter(i=>!Gk(i)).reduce((i,c)=>i+(P9.test(c)?I9:c===""?D9:A9),n)}function F9(r,t){return r.length===t.length&&r.slice(0,-1).every((n,i)=>n===t[i])?r[r.length-1]-t[t.length-1]:0}function O9(r,t,a=!1){let{routesMeta:n}=r,i={},c="/",o=[];for(let u=0;u<n.length;++u){let m=n[u],x=u===n.length-1,g=c==="/"?t:t.slice(c.length)||"/",k=lp({path:m.relativePath,caseSensitive:m.caseSensitive,end:x},g),S=m.route;if(!k&&x&&a&&!n[n.length-1].route.index&&(k=lp({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},g)),!k)return null;Object.assign(i,k.params),o.push({params:i,pathname:co([c,k.pathname]),pathnameBase:H9(co([c,k.pathnameBase])),route:S}),k.pathnameBase!=="/"&&(c=co([c,k.pathnameBase]))}return o}function lp(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[a,n]=L9(r.path,r.caseSensitive,r.end),i=t.match(a);if(!i)return null;let c=i[0],o=c.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((x,{paramName:g,isOptional:k},S)=>{if(g==="*"){let I=u[S]||"";o=c.slice(0,c.length-I.length).replace(/(.)\/+$/,"$1")}const _=u[S];return k&&!_?x[g]=void 0:x[g]=(_||"").replace(/%2F/g,"/"),x},{}),pathname:c,pathnameBase:o,pattern:r}}function L9(r,t=!1,a=!0){Li(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,m)=>(n.push({paramName:u,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function B9(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Li(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),r}}function go(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,n=r.charAt(a);return n&&n!=="/"?null:r.slice(a)||"/"}function z9(r,t="/"){let{pathname:a,search:n="",hash:i=""}=typeof r=="string"?Hd(r):r;return{pathname:a?a.startsWith("/")?a:V9(a,t):t,search:q9(n),hash:W9(i)}}function V9(r,t){let a=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?a.length>1&&a.pop():i!=="."&&a.push(i)}),a.length>1?a.join("/"):"/"}function jf(r,t,a,n){return`Cannot include a '${r}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function U9(r){return r.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function J5(r){let t=U9(r);return t.map((a,n)=>n===t.length-1?a.pathname:a.pathnameBase)}function Z5(r,t,a,n=!1){let i;typeof r=="string"?i=Hd(r):(i={...r},Ma(!i.pathname||!i.pathname.includes("?"),jf("?","pathname","search",i)),Ma(!i.pathname||!i.pathname.includes("#"),jf("#","pathname","hash",i)),Ma(!i.search||!i.search.includes("#"),jf("#","search","hash",i)));let c=r===""||i.pathname==="",o=c?"/":i.pathname,u;if(o==null)u=a;else{let k=t.length-1;if(!n&&o.startsWith("..")){let S=o.split("/");for(;S[0]==="..";)S.shift(),k-=1;i.pathname=S.join("/")}u=k>=0?t[k]:"/"}let m=z9(i,u),x=o&&o!=="/"&&o.endsWith("/"),g=(c||o===".")&&a.endsWith("/");return!m.pathname.endsWith("/")&&(x||g)&&(m.pathname+="/"),m}var co=r=>r.join("/").replace(/\/\/+/g,"/"),H9=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),q9=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,W9=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function G9(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var e3=["POST","PUT","PATCH","DELETE"];new Set(e3);var K9=["GET",...e3];new Set(K9);var qd=p.createContext(null);qd.displayName="DataRouter";var ix=p.createContext(null);ix.displayName="DataRouterState";p.createContext(!1);var t3=p.createContext({isTransitioning:!1});t3.displayName="ViewTransition";var Y9=p.createContext(new Map);Y9.displayName="Fetchers";var Q9=p.createContext(null);Q9.displayName="Await";var Hi=p.createContext(null);Hi.displayName="Navigation";var Vu=p.createContext(null);Vu.displayName="Location";var Co=p.createContext({outlet:null,matches:[],isDataRoute:!1});Co.displayName="Route";var my=p.createContext(null);my.displayName="RouteError";function X9(r,{relative:t}={}){Ma(Uu(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:n}=p.useContext(Hi),{hash:i,pathname:c,search:o}=Hu(r,{relative:t}),u=c;return a!=="/"&&(u=c==="/"?a:co([a,c])),n.createHref({pathname:u,search:o,hash:i})}function Uu(){return p.useContext(Vu)!=null}function vc(){return Ma(Uu(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(Vu).location}var r3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function a3(r){p.useContext(Hi).static||p.useLayoutEffect(r)}function $r(){let{isDataRoute:r}=p.useContext(Co);return r?d$():J9()}function J9(){Ma(Uu(),"useNavigate() may be used only in the context of a <Router> component.");let r=p.useContext(qd),{basename:t,navigator:a}=p.useContext(Hi),{matches:n}=p.useContext(Co),{pathname:i}=vc(),c=JSON.stringify(J5(n)),o=p.useRef(!1);return a3(()=>{o.current=!0}),p.useCallback((m,x={})=>{if(Li(o.current,r3),!o.current)return;if(typeof m=="number"){a.go(m);return}let g=Z5(m,JSON.parse(c),i,x.relative==="path");r==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:co([t,g.pathname])),(x.replace?a.replace:a.push)(g,x.state,x)},[t,a,c,i,r])}p.createContext(null);function Hu(r,{relative:t}={}){let{matches:a}=p.useContext(Co),{pathname:n}=vc(),i=JSON.stringify(J5(a));return p.useMemo(()=>Z5(r,JSON.parse(i),n,t==="path"),[r,i,n,t])}function Z9(r,t){return s3(r,t)}function s3(r,t,a,n,i){Ma(Uu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=p.useContext(Hi),{matches:o}=p.useContext(Co),u=o[o.length-1],m=u?u.params:{},x=u?u.pathname:"/",g=u?u.pathnameBase:"/",k=u&&u.route;{let L=k&&k.path||"";n3(x,!k||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let S=vc(),_;if(t){let L=typeof t=="string"?Hd(t):t;Ma(g==="/"||L.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${L.pathname}" was given in the \`location\` prop.`),_=L}else _=S;let I=_.pathname||"/",P=I;if(g!=="/"){let L=g.replace(/^\//,"").split("/");P="/"+I.replace(/^\//,"").split("/").slice(L.length).join("/")}let b=Y5(r,{pathname:P});Li(k||b!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),Li(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=s$(b&&b.map(L=>Object.assign({},L,{params:Object.assign({},m,L.params),pathname:co([g,c.encodeLocation?c.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?g:co([g,c.encodeLocation?c.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),o,a,n,i);return t&&B?p.createElement(Vu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},B):B}function e$(){let r=c$(),t=G9(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),a=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},c={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",r),o=p.createElement(p.Fragment,null,p.createElement("p",null,"💿 Hey developer 👋"),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:c},"ErrorBoundary")," or"," ",p.createElement("code",{style:c},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),a?p.createElement("pre",{style:i},a):null,o)}var t$=p.createElement(e$,null),r$=class extends p.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){this.props.unstable_onError?this.props.unstable_onError(r,t):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?p.createElement(Co.Provider,{value:this.props.routeContext},p.createElement(my.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function a$({routeContext:r,match:t,children:a}){let n=p.useContext(qd);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),p.createElement(Co.Provider,{value:r},a)}function s$(r,t=[],a=null,n=null,i=null){if(r==null){if(!a)return null;if(a.errors)r=a.matches;else if(t.length===0&&!a.initialized&&a.matches.length>0)r=a.matches;else return null}let c=r,o=a?.errors;if(o!=null){let x=c.findIndex(g=>g.route.id&&o?.[g.route.id]!==void 0);Ma(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),c=c.slice(0,Math.min(c.length,x+1))}let u=!1,m=-1;if(a)for(let x=0;x<c.length;x++){let g=c[x];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=x),g.route.id){let{loaderData:k,errors:S}=a,_=g.route.loader&&!k.hasOwnProperty(g.route.id)&&(!S||S[g.route.id]===void 0);if(g.route.lazy||_){u=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((x,g,k)=>{let S,_=!1,I=null,P=null;a&&(S=o&&g.route.id?o[g.route.id]:void 0,I=g.route.errorElement||t$,u&&(m<0&&k===0?(n3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,P=null):m===k&&(_=!0,P=g.route.hydrateFallbackElement||null)));let b=t.concat(c.slice(0,k+1)),B=()=>{let L;return S?L=I:_?L=P:g.route.Component?L=p.createElement(g.route.Component,null):g.route.element?L=g.route.element:L=x,p.createElement(a$,{match:g,routeContext:{outlet:x,matches:b,isDataRoute:a!=null},children:L})};return a&&(g.route.ErrorBoundary||g.route.errorElement||k===0)?p.createElement(r$,{location:a.location,revalidation:a.revalidation,component:I,error:S,children:B(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:n}):B()},null)}function py(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function n$(r){let t=p.useContext(qd);return Ma(t,py(r)),t}function i$(r){let t=p.useContext(ix);return Ma(t,py(r)),t}function o$(r){let t=p.useContext(Co);return Ma(t,py(r)),t}function xy(r){let t=o$(r),a=t.matches[t.matches.length-1];return Ma(a.route.id,`${r} can only be used on routes that contain a unique "id"`),a.route.id}function l$(){return xy("useRouteId")}function c$(){let r=p.useContext(my),t=i$("useRouteError"),a=xy("useRouteError");return r!==void 0?r:t.errors?.[a]}function d$(){let{router:r}=n$("useNavigate"),t=xy("useNavigate"),a=p.useRef(!1);return a3(()=>{a.current=!0}),p.useCallback(async(i,c={})=>{Li(a.current,r3),a.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:t,...c}))},[r,t])}var Kk={};function n3(r,t,a){!t&&!Kk[r]&&(Kk[r]=!0,Li(!1,a))}p.memo(u$);function u$({routes:r,future:t,state:a,unstable_onError:n}){return s3(r,void 0,a,n,t)}function Rr(r){Ma(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function h$({basename:r="/",children:t=null,location:a,navigationType:n="POP",navigator:i,static:c=!1}){Ma(!Uu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=r.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:o,navigator:i,static:c,future:{}}),[o,i,c]);typeof a=="string"&&(a=Hd(a));let{pathname:m="/",search:x="",hash:g="",state:k=null,key:S="default"}=a,_=p.useMemo(()=>{let I=go(m,o);return I==null?null:{location:{pathname:I,search:x,hash:g,state:k,key:S},navigationType:n}},[o,m,x,g,k,S,n]);return Li(_!=null,`<Router basename="${o}"> is not able to match the URL "${m}${x}${g}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:p.createElement(Hi.Provider,{value:u},p.createElement(Vu.Provider,{children:t,value:_}))}function m$({children:r,location:t}){return Z9(mb(r),t)}function mb(r,t=[]){let a=[];return p.Children.forEach(r,(n,i)=>{if(!p.isValidElement(n))return;let c=[...t,i];if(n.type===p.Fragment){a.push.apply(a,mb(n.props.children,c));return}Ma(n.type===Rr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ma(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||c.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=mb(n.props.children,c)),a.push(o)}),a}var Wm="get",Gm="application/x-www-form-urlencoded";function ox(r){return r!=null&&typeof r.tagName=="string"}function p$(r){return ox(r)&&r.tagName.toLowerCase()==="button"}function x$(r){return ox(r)&&r.tagName.toLowerCase()==="form"}function g$(r){return ox(r)&&r.tagName.toLowerCase()==="input"}function f$(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function b$(r,t){return r.button===0&&(!t||t==="_self")&&!f$(r)}var Tm=null;function y$(){if(Tm===null)try{new FormData(document.createElement("form"),0),Tm=!1}catch{Tm=!0}return Tm}var v$=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Cf(r){return r!=null&&!v$.has(r)?(Li(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gm}"`),null):r}function w$(r,t){let a,n,i,c,o;if(x$(r)){let u=r.getAttribute("action");n=u?go(u,t):null,a=r.getAttribute("method")||Wm,i=Cf(r.getAttribute("enctype"))||Gm,c=new FormData(r)}else if(p$(r)||g$(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=r.getAttribute("formaction")||u.getAttribute("action");if(n=m?go(m,t):null,a=r.getAttribute("formmethod")||u.getAttribute("method")||Wm,i=Cf(r.getAttribute("formenctype"))||Cf(u.getAttribute("enctype"))||Gm,c=new FormData(u,r),!y$()){let{name:x,type:g,value:k}=r;if(g==="image"){let S=x?`${x}.`:"";c.append(`${S}x`,"0"),c.append(`${S}y`,"0")}else x&&c.append(x,k)}}else{if(ox(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Wm,n=null,i=Gm,o=r}return c&&i==="text/plain"&&(o=c,c=void 0),{action:n,method:a.toLowerCase(),encType:i,formData:c,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gy(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function k$(r,t,a){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${a}`:t&&go(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${a}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${a}`,n}async function N$(r,t){if(r.id in t)return t[r.id];try{let a=await import(r.module);return t[r.id]=a,a}catch(a){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function j$(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function C$(r,t,a){let n=await Promise.all(r.map(async i=>{let c=t.routes[i.route.id];if(c){let o=await N$(c,a);return o.links?o.links():[]}return[]}));return _$(n.flat(1).filter(j$).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Yk(r,t,a,n,i,c){let o=(m,x)=>a[x]?m.route.id!==a[x].route.id:!0,u=(m,x)=>a[x].pathname!==m.pathname||a[x].route.path?.endsWith("*")&&a[x].params["*"]!==m.params["*"];return c==="assets"?t.filter((m,x)=>o(m,x)||u(m,x)):c==="data"?t.filter((m,x)=>{let g=n.routes[m.route.id];if(!g||!g.hasLoader)return!1;if(o(m,x)||u(m,x))return!0;if(m.route.shouldRevalidate){let k=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function T$(r,t,{includeHydrateFallback:a}={}){return S$(r.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let c=[i.module];return i.clientActionModule&&(c=c.concat(i.clientActionModule)),i.clientLoaderModule&&(c=c.concat(i.clientLoaderModule)),a&&i.hydrateFallbackModule&&(c=c.concat(i.hydrateFallbackModule)),i.imports&&(c=c.concat(i.imports)),c}).flat(1))}function S$(r){return[...new Set(r)]}function E$(r){let t={},a=Object.keys(r).sort();for(let n of a)t[n]=r[n];return t}function _$(r,t){let a=new Set;return new Set(t),r.reduce((n,i)=>{let c=JSON.stringify(E$(i));return a.has(c)||(a.add(c),n.push({key:c,link:i})),n},[])}function i3(){let r=p.useContext(qd);return gy(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function P$(){let r=p.useContext(ix);return gy(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var fy=p.createContext(void 0);fy.displayName="FrameworkContext";function o3(){let r=p.useContext(fy);return gy(r,"You must render this element inside a <HydratedRouter> element"),r}function I$(r,t){let a=p.useContext(fy),[n,i]=p.useState(!1),[c,o]=p.useState(!1),{onFocus:u,onBlur:m,onMouseEnter:x,onMouseLeave:g,onTouchStart:k}=t,S=p.useRef(null);p.useEffect(()=>{if(r==="render"&&o(!0),r==="viewport"){let P=B=>{B.forEach(L=>{o(L.isIntersecting)})},b=new IntersectionObserver(P,{threshold:.5});return S.current&&b.observe(S.current),()=>{b.disconnect()}}},[r]),p.useEffect(()=>{if(n){let P=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(P)}}},[n]);let _=()=>{i(!0)},I=()=>{i(!1),o(!1)};return a?r!=="intent"?[c,S,{}]:[c,S,{onFocus:F0(u,_),onBlur:F0(m,I),onMouseEnter:F0(x,_),onMouseLeave:F0(g,I),onTouchStart:F0(k,_)}]:[!1,S,{}]}function F0(r,t){return a=>{r&&r(a),a.defaultPrevented||t(a)}}function $$({page:r,...t}){let{router:a}=i3(),n=p.useMemo(()=>Y5(a.routes,r,a.basename),[a.routes,r,a.basename]);return n?p.createElement(A$,{page:r,matches:n,...t}):null}function D$(r){let{manifest:t,routeModules:a}=o3(),[n,i]=p.useState([]);return p.useEffect(()=>{let c=!1;return C$(r,t,a).then(o=>{c||i(o)}),()=>{c=!0}},[r,t,a]),n}function A$({page:r,matches:t,...a}){let n=vc(),{manifest:i,routeModules:c}=o3(),{basename:o}=i3(),{loaderData:u,matches:m}=P$(),x=p.useMemo(()=>Yk(r,t,m,i,n,"data"),[r,t,m,i,n]),g=p.useMemo(()=>Yk(r,t,m,i,n,"assets"),[r,t,m,i,n]),k=p.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let I=new Set,P=!1;if(t.forEach(B=>{let L=i.routes[B.route.id];!L||!L.hasLoader||(!x.some(O=>O.route.id===B.route.id)&&B.route.id in u&&c[B.route.id]?.shouldRevalidate||L.hasClientLoader?P=!0:I.add(B.route.id))}),I.size===0)return[];let b=k$(r,o,"data");return P&&I.size>0&&b.searchParams.set("_routes",t.filter(B=>I.has(B.route.id)).map(B=>B.route.id).join(",")),[b.pathname+b.search]},[o,u,n,i,x,t,r,c]),S=p.useMemo(()=>T$(g,i),[g,i]),_=D$(g);return p.createElement(p.Fragment,null,k.map(I=>p.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...a})),S.map(I=>p.createElement("link",{key:I,rel:"modulepreload",href:I,...a})),_.map(({key:I,link:P})=>p.createElement("link",{key:I,nonce:a.nonce,...P})))}function R$(...r){return t=>{r.forEach(a=>{typeof a=="function"?a(t):a!=null&&(a.current=t)})}}var l3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{l3&&(window.__reactRouterVersion="7.8.2")}catch{}function M$({basename:r,children:t,window:a}){let n=p.useRef();n.current==null&&(n.current=j9({window:a,v5Compat:!0}));let i=n.current,[c,o]=p.useState({action:i.action,location:i.location}),u=p.useCallback(m=>{p.startTransition(()=>o(m))},[o]);return p.useLayoutEffect(()=>i.listen(u),[i,u]),p.createElement(h$,{basename:r,children:t,location:c.location,navigationType:c.action,navigator:i})}var c3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ve=p.forwardRef(function({onClick:t,discover:a="render",prefetch:n="none",relative:i,reloadDocument:c,replace:o,state:u,target:m,to:x,preventScrollReset:g,viewTransition:k,...S},_){let{basename:I}=p.useContext(Hi),P=typeof x=="string"&&c3.test(x),b,B=!1;if(typeof x=="string"&&P&&(b=x,l3))try{let F=new URL(window.location.href),v=x.startsWith("//")?new URL(F.protocol+x):new URL(x),ie=go(v.pathname,I);v.origin===F.origin&&ie!=null?x=ie+v.search+v.hash:B=!0}catch{Li(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=X9(x,{relative:i}),[O,te,ne]=I$(n,S),be=B$(x,{replace:o,state:u,target:m,preventScrollReset:g,relative:i,viewTransition:k});function H(F){t&&t(F),F.defaultPrevented||be(F)}let z=p.createElement("a",{...S,...ne,href:b||L,onClick:B||c?t:H,ref:R$(_,te),target:m,"data-discover":!P&&a==="render"?"true":void 0});return O&&!P?p.createElement(p.Fragment,null,z,p.createElement($$,{page:L})):z});Ve.displayName="Link";var F$=p.forwardRef(function({"aria-current":t="page",caseSensitive:a=!1,className:n="",end:i=!1,style:c,to:o,viewTransition:u,children:m,...x},g){let k=Hu(o,{relative:x.relative}),S=vc(),_=p.useContext(ix),{navigator:I,basename:P}=p.useContext(Hi),b=_!=null&&q$(k)&&u===!0,B=I.encodeLocation?I.encodeLocation(k).pathname:k.pathname,L=S.pathname,O=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;a||(L=L.toLowerCase(),O=O?O.toLowerCase():null,B=B.toLowerCase()),O&&P&&(O=go(O,P)||O);const te=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let ne=L===B||!i&&L.startsWith(B)&&L.charAt(te)==="/",be=O!=null&&(O===B||!i&&O.startsWith(B)&&O.charAt(B.length)==="/"),H={isActive:ne,isPending:be,isTransitioning:b},z=ne?t:void 0,F;typeof n=="function"?F=n(H):F=[n,ne?"active":null,be?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let v=typeof c=="function"?c(H):c;return p.createElement(Ve,{...x,"aria-current":z,className:F,ref:g,style:v,to:o,viewTransition:u},typeof m=="function"?m(H):m)});F$.displayName="NavLink";var O$=p.forwardRef(({discover:r="render",fetcherKey:t,navigate:a,reloadDocument:n,replace:i,state:c,method:o=Wm,action:u,onSubmit:m,relative:x,preventScrollReset:g,viewTransition:k,...S},_)=>{let I=U$(),P=H$(u,{relative:x}),b=o.toLowerCase()==="get"?"get":"post",B=typeof u=="string"&&c3.test(u),L=O=>{if(m&&m(O),O.defaultPrevented)return;O.preventDefault();let te=O.nativeEvent.submitter,ne=te?.getAttribute("formmethod")||o;I(te||O.currentTarget,{fetcherKey:t,method:ne,navigate:a,replace:i,state:c,relative:x,preventScrollReset:g,viewTransition:k})};return p.createElement("form",{ref:_,method:b,action:P,onSubmit:n?m:L,...S,"data-discover":!B&&r==="render"?"true":void 0})});O$.displayName="Form";function L$(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d3(r){let t=p.useContext(qd);return Ma(t,L$(r)),t}function B$(r,{target:t,replace:a,state:n,preventScrollReset:i,relative:c,viewTransition:o}={}){let u=$r(),m=vc(),x=Hu(r,{relative:c});return p.useCallback(g=>{if(b$(g,t)){g.preventDefault();let k=a!==void 0?a:pu(m)===pu(x);u(r,{replace:k,state:n,preventScrollReset:i,relative:c,viewTransition:o})}},[m,u,x,a,n,t,r,i,c,o])}var z$=0,V$=()=>`__${String(++z$)}__`;function U$(){let{router:r}=d3("useSubmit"),{basename:t}=p.useContext(Hi),a=l$();return p.useCallback(async(n,i={})=>{let{action:c,method:o,encType:u,formData:m,body:x}=w$(n,t);if(i.navigate===!1){let g=i.fetcherKey||V$();await r.fetch(g,a,i.action||c,{preventScrollReset:i.preventScrollReset,formData:m,body:x,formMethod:i.method||o,formEncType:i.encType||u,flushSync:i.flushSync})}else await r.navigate(i.action||c,{preventScrollReset:i.preventScrollReset,formData:m,body:x,formMethod:i.method||o,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:a,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,t,a])}function H$(r,{relative:t}={}){let{basename:a}=p.useContext(Hi),n=p.useContext(Co);Ma(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),c={...Hu(r||".",{relative:t})},o=vc();if(r==null){c.search=o.search;let u=new URLSearchParams(c.search),m=u.getAll("index");if(m.some(g=>g==="")){u.delete("index"),m.filter(k=>k).forEach(k=>u.append("index",k));let g=u.toString();c.search=g?`?${g}`:""}}return(!r||r===".")&&i.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(c.pathname=c.pathname==="/"?a:co([a,c.pathname])),pu(c)}function q$(r,{relative:t}={}){let a=p.useContext(t3);Ma(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=d3("useViewTransitionState"),i=Hu(r,{relative:t});if(!a.isTransitioning)return!1;let c=go(a.currentLocation.pathname,n)||a.currentLocation.pathname,o=go(a.nextLocation.pathname,n)||a.nextLocation.pathname;return lp(i.pathname,o)!=null||lp(i.pathname,c)!=null}const W$=()=>{};var Qk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=function(r){const t=[];let a=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?t[a++]=i:i<2048?(t[a++]=i>>6|192,t[a++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),t[a++]=i>>18|240,t[a++]=i>>12&63|128,t[a++]=i>>6&63|128,t[a++]=i&63|128):(t[a++]=i>>12|224,t[a++]=i>>6&63|128,t[a++]=i&63|128)}return t},G$=function(r){const t=[];let a=0,n=0;for(;a<r.length;){const i=r[a++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){const c=r[a++];t[n++]=String.fromCharCode((i&31)<<6|c&63)}else if(i>239&&i<365){const c=r[a++],o=r[a++],u=r[a++],m=((i&7)<<18|(c&63)<<12|(o&63)<<6|u&63)-65536;t[n++]=String.fromCharCode(55296+(m>>10)),t[n++]=String.fromCharCode(56320+(m&1023))}else{const c=r[a++],o=r[a++];t[n++]=String.fromCharCode((i&15)<<12|(c&63)<<6|o&63)}}return t.join("")},h3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const c=r[i],o=i+1<r.length,u=o?r[i+1]:0,m=i+2<r.length,x=m?r[i+2]:0,g=c>>2,k=(c&3)<<4|u>>4;let S=(u&15)<<2|x>>6,_=x&63;m||(_=64,o||(S=64)),n.push(a[g],a[k],a[S],a[_])}return n.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(u3(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):G$(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const a=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const c=a[r.charAt(i++)],u=i<r.length?a[r.charAt(i)]:0;++i;const x=i<r.length?a[r.charAt(i)]:64;++i;const k=i<r.length?a[r.charAt(i)]:64;if(++i,c==null||u==null||x==null||k==null)throw new K$;const S=c<<2|u>>4;if(n.push(S),x!==64){const _=u<<4&240|x>>2;if(n.push(_),k!==64){const I=x<<6&192|k;n.push(I)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class K$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Y$=function(r){const t=u3(r);return h3.encodeByteArray(t,!0)},cp=function(r){return Y$(r).replace(/\./g,"")},m3=function(r){try{return h3.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X$=()=>Q$().__FIREBASE_DEFAULTS__,J$=()=>{if(typeof process>"u"||typeof Qk>"u")return;const r=Qk.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Z$=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&m3(r[1]);return t&&JSON.parse(t)},lx=()=>{try{return W$()||X$()||J$()||Z$()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},p3=r=>{var t,a;return(a=(t=lx())===null||t===void 0?void 0:t.emulatorHosts)===null||a===void 0?void 0:a[r]},x3=r=>{const t=p3(r);if(!t)return;const a=t.lastIndexOf(":");if(a<=0||a+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(a+1),10);return t[0]==="["?[t.substring(1,a-1),n]:[t.substring(0,a),n]},g3=()=>{var r;return(r=lx())===null||r===void 0?void 0:r.config},f3=r=>{var t;return(t=lx())===null||t===void 0?void 0:t[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,a)=>{this.resolve=t,this.reject=a})}wrapCallback(t){return(a,n)=>{a?this.reject(a):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(a):t(a,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},n=t||"demo-project",i=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[cp(JSON.stringify(a)),cp(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zs())}function rD(){var r;const t=(r=lx())===null||r===void 0?void 0:r.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function y3(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function sD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nD(){const r=zs();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function iD(){return!rD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v3(){try{return typeof indexedDB=="object"}catch{return!1}}function w3(){return new Promise((r,t)=>{try{let a=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),a||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{a=!1},i.onerror=()=>{var c;t(((c=i.error)===null||c===void 0?void 0:c.message)||"")}}catch(a){t(a)}})}function oD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="FirebaseError";class Gn extends Error{constructor(t,a,n){super(a),this.code=t,this.customData=n,this.name=lD,Object.setPrototypeOf(this,Gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wc.prototype.create)}}class wc{constructor(t,a,n){this.service=t,this.serviceName=a,this.errors=n}create(t,...a){const n=a[0]||{},i=`${this.service}/${t}`,c=this.errors[t],o=c?cD(c,n):"Error",u=`${this.serviceName}: ${o} (${i}).`;return new Gn(i,u,n)}}function cD(r,t){return r.replace(dD,(a,n)=>{const i=t[n];return i!=null?String(i):`<${n}?>`})}const dD=/\{\$([^}]+)}/g;function uD(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function pl(r,t){if(r===t)return!0;const a=Object.keys(r),n=Object.keys(t);for(const i of a){if(!n.includes(i))return!1;const c=r[i],o=t[i];if(Xk(c)&&Xk(o)){if(!pl(c,o))return!1}else if(c!==o)return!1}for(const i of n)if(!a.includes(i))return!1;return!0}function Xk(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(r){const t=[];for(const[a,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{t.push(encodeURIComponent(a)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(a)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function z0(r){const t={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,c]=n.split("=");t[decodeURIComponent(i)]=decodeURIComponent(c)}}),t}function V0(r){const t=r.indexOf("?");if(!t)return"";const a=r.indexOf("#",t);return r.substring(t,a>0?a:void 0)}function hD(r,t){const a=new mD(r,t);return a.subscribe.bind(a)}class mD{constructor(t,a){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=a,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(a=>{a.next(t)})}error(t){this.forEachObserver(a=>{a.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,a,n){let i;if(t===void 0&&a===void 0&&n===void 0)throw new Error("Missing Observer.");pD(t,["next","error","complete"])?i=t:i={next:t,error:a,complete:n},i.next===void 0&&(i.next=Tf),i.error===void 0&&(i.error=Tf),i.complete===void 0&&(i.complete=Tf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let a=0;a<this.observers.length;a++)this.sendOne(a,t)}sendOne(t,a){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{a(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pD(r,t){if(typeof r!="object"||r===null)return!1;for(const a of t)if(a in r&&typeof r[a]=="function")return!0;return!1}function Tf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=1e3,gD=2,fD=14400*1e3,bD=.5;function Jk(r,t=xD,a=gD){const n=t*Math.pow(a,r),i=Math.round(bD*n*(Math.random()-.5)*2);return Math.min(fD,n+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(r){return r&&r._delegate?r._delegate:r}class Wn{constructor(t,a,n){this.name=t,this.instanceFactory=a,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(t,a){this.name=t,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const a=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(a)){const n=new eD;if(this.instancesDeferred.set(a,n),this.isInitialized(a)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:a});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(t){var a;const n=this.normalizeInstanceIdentifier(t?.identifier),i=(a=t?.optional)!==null&&a!==void 0?a:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(c){if(i)return null;throw c}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(wD(t))try{this.getOrInitializeService({instanceIdentifier:Xl})}catch{}for(const[a,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(a);try{const c=this.getOrInitializeService({instanceIdentifier:i});n.resolve(c)}catch{}}}}clearInstance(t=Xl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...t.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Xl){return this.instances.has(t)}getOptions(t=Xl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:a={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:a});for(const[c,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(c);n===u&&o.resolve(i)}return i}onInit(t,a){var n;const i=this.normalizeInstanceIdentifier(a),c=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;c.add(t),this.onInitCallbacks.set(i,c);const o=this.instances.get(i);return o&&t(o,i),()=>{c.delete(t)}}invokeOnInitCallbacks(t,a){const n=this.onInitCallbacks.get(a);if(n)for(const i of n)try{i(t,a)}catch{}}getOrInitializeService({instanceIdentifier:t,options:a={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:vD(t),options:a}),this.instances.set(t,n),this.instancesOptions.set(t,a),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Xl){return this.component?this.component.multipleInstances?t:Xl:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vD(r){return r===Xl?void 0:r}function wD(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const a=this.getProvider(t.name);if(a.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);a.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const a=new yD(t,this);return this.providers.set(t,a),a}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Or;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Or||(Or={}));const ND={debug:Or.DEBUG,verbose:Or.VERBOSE,info:Or.INFO,warn:Or.WARN,error:Or.ERROR,silent:Or.SILENT},jD=Or.INFO,CD={[Or.DEBUG]:"log",[Or.VERBOSE]:"log",[Or.INFO]:"info",[Or.WARN]:"warn",[Or.ERROR]:"error"},TD=(r,t,...a)=>{if(t<r.logLevel)return;const n=new Date().toISOString(),i=CD[t];if(i)console[i](`[${n}]  ${r.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class cx{constructor(t){this.name=t,this._logLevel=jD,this._logHandler=TD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Or))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?ND[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Or.DEBUG,...t),this._logHandler(this,Or.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Or.VERBOSE,...t),this._logHandler(this,Or.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Or.INFO,...t),this._logHandler(this,Or.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Or.WARN,...t),this._logHandler(this,Or.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Or.ERROR,...t),this._logHandler(this,Or.ERROR,...t)}}const SD=(r,t)=>t.some(a=>r instanceof a);let Zk,eN;function ED(){return Zk||(Zk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _D(){return eN||(eN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const k3=new WeakMap,pb=new WeakMap,N3=new WeakMap,Sf=new WeakMap,by=new WeakMap;function PD(r){const t=new Promise((a,n)=>{const i=()=>{r.removeEventListener("success",c),r.removeEventListener("error",o)},c=()=>{a(ll(r.result)),i()},o=()=>{n(r.error),i()};r.addEventListener("success",c),r.addEventListener("error",o)});return t.then(a=>{a instanceof IDBCursor&&k3.set(a,r)}).catch(()=>{}),by.set(t,r),t}function ID(r){if(pb.has(r))return;const t=new Promise((a,n)=>{const i=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",o),r.removeEventListener("abort",o)},c=()=>{a(),i()},o=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",c),r.addEventListener("error",o),r.addEventListener("abort",o)});pb.set(r,t)}let xb={get(r,t,a){if(r instanceof IDBTransaction){if(t==="done")return pb.get(r);if(t==="objectStoreNames")return r.objectStoreNames||N3.get(r);if(t==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return ll(r[t])},set(r,t,a){return r[t]=a,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function $D(r){xb=r(xb)}function DD(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...a){const n=r.call(Ef(this),t,...a);return N3.set(n,t.sort?t.sort():[t]),ll(n)}:_D().includes(r)?function(...t){return r.apply(Ef(this),t),ll(k3.get(this))}:function(...t){return ll(r.apply(Ef(this),t))}}function AD(r){return typeof r=="function"?DD(r):(r instanceof IDBTransaction&&ID(r),SD(r,ED())?new Proxy(r,xb):r)}function ll(r){if(r instanceof IDBRequest)return PD(r);if(Sf.has(r))return Sf.get(r);const t=AD(r);return t!==r&&(Sf.set(r,t),by.set(t,r)),t}const Ef=r=>by.get(r);function j3(r,t,{blocked:a,upgrade:n,blocking:i,terminated:c}={}){const o=indexedDB.open(r,t),u=ll(o);return n&&o.addEventListener("upgradeneeded",m=>{n(ll(o.result),m.oldVersion,m.newVersion,ll(o.transaction),m)}),a&&o.addEventListener("blocked",m=>a(m.oldVersion,m.newVersion,m)),u.then(m=>{c&&m.addEventListener("close",()=>c()),i&&m.addEventListener("versionchange",x=>i(x.oldVersion,x.newVersion,x))}).catch(()=>{}),u}const RD=["get","getKey","getAll","getAllKeys","count"],MD=["put","add","delete","clear"],_f=new Map;function tN(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(_f.get(t))return _f.get(t);const a=t.replace(/FromIndex$/,""),n=t!==a,i=MD.includes(a);if(!(a in(n?IDBIndex:IDBObjectStore).prototype)||!(i||RD.includes(a)))return;const c=async function(o,...u){const m=this.transaction(o,i?"readwrite":"readonly");let x=m.store;return n&&(x=x.index(u.shift())),(await Promise.all([x[a](...u),i&&m.done]))[0]};return _f.set(t,c),c}$D(r=>({...r,get:(t,a,n)=>tN(t,a)||r.get(t,a,n),has:(t,a)=>!!tN(t,a)||r.has(t,a)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(OD(a)){const n=a.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(a=>a).join(" ")}}function OD(r){const t=r.getComponent();return t?.type==="VERSION"}const gb="@firebase/app",rN="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=new cx("@firebase/app"),LD="@firebase/app-compat",BD="@firebase/analytics-compat",zD="@firebase/analytics",VD="@firebase/app-check-compat",UD="@firebase/app-check",HD="@firebase/auth",qD="@firebase/auth-compat",WD="@firebase/database",GD="@firebase/data-connect",KD="@firebase/database-compat",YD="@firebase/functions",QD="@firebase/functions-compat",XD="@firebase/installations",JD="@firebase/installations-compat",ZD="@firebase/messaging",eA="@firebase/messaging-compat",tA="@firebase/performance",rA="@firebase/performance-compat",aA="@firebase/remote-config",sA="@firebase/remote-config-compat",nA="@firebase/storage",iA="@firebase/storage-compat",oA="@firebase/firestore",lA="@firebase/vertexai",cA="@firebase/firestore-compat",dA="firebase",uA="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="[DEFAULT]",hA={[gb]:"fire-core",[LD]:"fire-core-compat",[zD]:"fire-analytics",[BD]:"fire-analytics-compat",[UD]:"fire-app-check",[VD]:"fire-app-check-compat",[HD]:"fire-auth",[qD]:"fire-auth-compat",[WD]:"fire-rtdb",[GD]:"fire-data-connect",[KD]:"fire-rtdb-compat",[YD]:"fire-fn",[QD]:"fire-fn-compat",[XD]:"fire-iid",[JD]:"fire-iid-compat",[ZD]:"fire-fcm",[eA]:"fire-fcm-compat",[tA]:"fire-perf",[rA]:"fire-perf-compat",[aA]:"fire-rc",[sA]:"fire-rc-compat",[nA]:"fire-gcs",[iA]:"fire-gcs-compat",[oA]:"fire-fst",[cA]:"fire-fst-compat",[lA]:"fire-vertex","fire-js":"fire-js",[dA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp=new Map,mA=new Map,bb=new Map;function aN(r,t){try{r.container.addComponent(t)}catch(a){fo.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,a)}}function xi(r){const t=r.name;if(bb.has(t))return fo.debug(`There were multiple attempts to register component ${t}.`),!1;bb.set(t,r);for(const a of dp.values())aN(a,r);for(const a of mA.values())aN(a,r);return!0}function Tl(r,t){const a=r.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),r.container.getProvider(t)}function jn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cl=new wc("app","Firebase",pA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(t,a,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},a),this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Wn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw cl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=uA;function C3(r,t={}){let a=r;typeof t!="object"&&(t={name:t});const n=Object.assign({name:fb,automaticDataCollectionEnabled:!1},t),i=n.name;if(typeof i!="string"||!i)throw cl.create("bad-app-name",{appName:String(i)});if(a||(a=g3()),!a)throw cl.create("no-options");const c=dp.get(i);if(c){if(pl(a,c.options)&&pl(n,c.config))return c;throw cl.create("duplicate-app",{appName:i})}const o=new kD(i);for(const m of bb.values())o.addComponent(m);const u=new xA(a,n,o);return dp.set(i,u),u}function dx(r=fb){const t=dp.get(r);if(!t&&r===fb&&g3())return C3();if(!t)throw cl.create("no-app",{appName:r});return t}function ln(r,t,a){var n;let i=(n=hA[r])!==null&&n!==void 0?n:r;a&&(i+=`-${a}`);const c=i.match(/\s|\//),o=t.match(/\s|\//);if(c||o){const u=[`Unable to register library "${i}" with version "${t}":`];c&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),c&&o&&u.push("and"),o&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),fo.warn(u.join(" "));return}xi(new Wn(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="firebase-heartbeat-database",fA=1,xu="firebase-heartbeat-store";let Pf=null;function T3(){return Pf||(Pf=j3(gA,fA,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(xu)}catch(a){console.warn(a)}}}}).catch(r=>{throw cl.create("idb-open",{originalErrorMessage:r.message})})),Pf}async function bA(r){try{const a=(await T3()).transaction(xu),n=await a.objectStore(xu).get(S3(r));return await a.done,n}catch(t){if(t instanceof Gn)fo.warn(t.message);else{const a=cl.create("idb-get",{originalErrorMessage:t?.message});fo.warn(a.message)}}}async function sN(r,t){try{const n=(await T3()).transaction(xu,"readwrite");await n.objectStore(xu).put(t,S3(r)),await n.done}catch(a){if(a instanceof Gn)fo.warn(a.message);else{const n=cl.create("idb-set",{originalErrorMessage:a?.message});fo.warn(n.message)}}}function S3(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=1024,vA=30;class wA{constructor(t){this.container=t,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new NA(a),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,a;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=nN();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((a=this._heartbeatsCache)===null||a===void 0?void 0:a.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(o=>o.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:i}),this._heartbeatsCache.heartbeats.length>vA){const o=jA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){fo.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const a=nN(),{heartbeatsToSend:n,unsentEntries:i}=kA(this._heartbeatsCache.heartbeats),c=cp(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=a,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(a){return fo.warn(a),""}}}function nN(){return new Date().toISOString().substring(0,10)}function kA(r,t=yA){const a=[];let n=r.slice();for(const i of r){const c=a.find(o=>o.agent===i.agent);if(c){if(c.dates.push(i.date),iN(a)>t){c.dates.pop();break}}else if(a.push({agent:i.agent,dates:[i.date]}),iN(a)>t){a.pop();break}n=n.slice(1)}return{heartbeatsToSend:a,unsentEntries:n}}class NA{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return v3()?w3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const a=await bA(this.app);return a?.heartbeats?a:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var a;if(await this._canUseIndexedDBPromise){const i=await this.read();return sN(this.app,{lastSentHeartbeatDate:(a=t.lastSentHeartbeatDate)!==null&&a!==void 0?a:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var a;if(await this._canUseIndexedDBPromise){const i=await this.read();return sN(this.app,{lastSentHeartbeatDate:(a=t.lastSentHeartbeatDate)!==null&&a!==void 0?a:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function iN(r){return cp(JSON.stringify({version:2,heartbeats:r})).length}function jA(r){if(r.length===0)return-1;let t=0,a=r[0].date;for(let n=1;n<r.length;n++)r[n].date<a&&(a=r[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(r){xi(new Wn("platform-logger",t=>new FD(t),"PRIVATE")),xi(new Wn("heartbeat",t=>new wA(t),"PRIVATE")),ln(gb,rN,r),ln(gb,rN,"esm2017"),ln("fire-js","")}CA("");var TA="firebase",SA="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln(TA,SA,"app");const E3="@firebase/installations",yy="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3=1e4,P3=`w:${yy}`,I3="FIS_v2",EA="https://firebaseinstallations.googleapis.com/v1",_A=3600*1e3,PA="installations",IA="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},lc=new wc(PA,IA,$A);function $3(r){return r instanceof Gn&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3({projectId:r}){return`${EA}/projects/${r}/installations`}function A3(r){return{token:r.token,requestStatus:2,expiresIn:AA(r.expiresIn),creationTime:Date.now()}}async function R3(r,t){const n=(await t.json()).error;return lc.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function M3({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function DA(r,{refreshToken:t}){const a=M3(r);return a.append("Authorization",RA(t)),a}async function F3(r){const t=await r();return t.status>=500&&t.status<600?r():t}function AA(r){return Number(r.replace("s","000"))}function RA(r){return`${I3} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA({appConfig:r,heartbeatServiceProvider:t},{fid:a}){const n=D3(r),i=M3(r),c=t.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&i.append("x-firebase-client",x)}const o={fid:a,authVersion:I3,appId:r.appId,sdkVersion:P3},u={method:"POST",headers:i,body:JSON.stringify(o)},m=await F3(()=>fetch(n,u));if(m.ok){const x=await m.json();return{fid:x.fid||a,registrationStatus:2,refreshToken:x.refreshToken,authToken:A3(x.authToken)}}else throw await R3("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(r){return new Promise(t=>{setTimeout(t,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=/^[cdef][\w-]{21}$/,yb="";function LA(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const a=BA(r);return OA.test(a)?a:yb}catch{return yb}}function BA(r){return FA(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=new Map;function B3(r,t){const a=ux(r);z3(a,t),zA(a,t)}function z3(r,t){const a=L3.get(r);if(a)for(const n of a)n(t)}function zA(r,t){const a=VA();a&&a.postMessage({key:r,fid:t}),UA()}let ec=null;function VA(){return!ec&&"BroadcastChannel"in self&&(ec=new BroadcastChannel("[Firebase] FID Change"),ec.onmessage=r=>{z3(r.data.key,r.data.fid)}),ec}function UA(){L3.size===0&&ec&&(ec.close(),ec=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="firebase-installations-database",qA=1,cc="firebase-installations-store";let If=null;function vy(){return If||(If=j3(HA,qA,{upgrade:(r,t)=>{switch(t){case 0:r.createObjectStore(cc)}}})),If}async function up(r,t){const a=ux(r),i=(await vy()).transaction(cc,"readwrite"),c=i.objectStore(cc),o=await c.get(a);return await c.put(t,a),await i.done,(!o||o.fid!==t.fid)&&B3(r,t.fid),t}async function V3(r){const t=ux(r),n=(await vy()).transaction(cc,"readwrite");await n.objectStore(cc).delete(t),await n.done}async function hx(r,t){const a=ux(r),i=(await vy()).transaction(cc,"readwrite"),c=i.objectStore(cc),o=await c.get(a),u=t(o);return u===void 0?await c.delete(a):await c.put(u,a),await i.done,u&&(!o||o.fid!==u.fid)&&B3(r,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wy(r){let t;const a=await hx(r.appConfig,n=>{const i=WA(n),c=GA(r,i);return t=c.registrationPromise,c.installationEntry});return a.fid===yb?{installationEntry:await t}:{installationEntry:a,registrationPromise:t}}function WA(r){const t=r||{fid:LA(),registrationStatus:0};return U3(t)}function GA(r,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(lc.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const a={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=KA(r,a);return{installationEntry:a,registrationPromise:n}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:YA(r)}:{installationEntry:t}}async function KA(r,t){try{const a=await MA(r,t);return up(r.appConfig,a)}catch(a){throw $3(a)&&a.customData.serverCode===409?await V3(r.appConfig):await up(r.appConfig,{fid:t.fid,registrationStatus:0}),a}}async function YA(r){let t=await oN(r.appConfig);for(;t.registrationStatus===1;)await O3(100),t=await oN(r.appConfig);if(t.registrationStatus===0){const{installationEntry:a,registrationPromise:n}=await wy(r);return n||a}return t}function oN(r){return hx(r,t=>{if(!t)throw lc.create("installation-not-found");return U3(t)})}function U3(r){return QA(r)?{fid:r.fid,registrationStatus:0}:r}function QA(r){return r.registrationStatus===1&&r.registrationTime+_3<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XA({appConfig:r,heartbeatServiceProvider:t},a){const n=JA(r,a),i=DA(r,a),c=t.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&i.append("x-firebase-client",x)}const o={installation:{sdkVersion:P3,appId:r.appId}},u={method:"POST",headers:i,body:JSON.stringify(o)},m=await F3(()=>fetch(n,u));if(m.ok){const x=await m.json();return A3(x)}else throw await R3("Generate Auth Token",m)}function JA(r,{fid:t}){return`${D3(r)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ky(r,t=!1){let a;const n=await hx(r.appConfig,c=>{if(!H3(c))throw lc.create("not-registered");const o=c.authToken;if(!t&&t8(o))return c;if(o.requestStatus===1)return a=ZA(r,t),c;{if(!navigator.onLine)throw lc.create("app-offline");const u=a8(c);return a=e8(r,u),u}});return a?await a:n.authToken}async function ZA(r,t){let a=await lN(r.appConfig);for(;a.authToken.requestStatus===1;)await O3(100),a=await lN(r.appConfig);const n=a.authToken;return n.requestStatus===0?ky(r,t):n}function lN(r){return hx(r,t=>{if(!H3(t))throw lc.create("not-registered");const a=t.authToken;return s8(a)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function e8(r,t){try{const a=await XA(r,t),n=Object.assign(Object.assign({},t),{authToken:a});return await up(r.appConfig,n),a}catch(a){if($3(a)&&(a.customData.serverCode===401||a.customData.serverCode===404))await V3(r.appConfig);else{const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await up(r.appConfig,n)}throw a}}function H3(r){return r!==void 0&&r.registrationStatus===2}function t8(r){return r.requestStatus===2&&!r8(r)}function r8(r){const t=Date.now();return t<r.creationTime||r.creationTime+r.expiresIn<t+_A}function a8(r){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:t})}function s8(r){return r.requestStatus===1&&r.requestTime+_3<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n8(r){const t=r,{installationEntry:a,registrationPromise:n}=await wy(t);return n?n.catch(console.error):ky(t).catch(console.error),a.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8(r,t=!1){const a=r;return await o8(a),(await ky(a,t)).token}async function o8(r){const{registrationPromise:t}=await wy(r);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l8(r){if(!r||!r.options)throw $f("App Configuration");if(!r.name)throw $f("App Name");const t=["projectId","apiKey","appId"];for(const a of t)if(!r.options[a])throw $f(a);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function $f(r){return lc.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3="installations",c8="installations-internal",d8=r=>{const t=r.getProvider("app").getImmediate(),a=l8(t),n=Tl(t,"heartbeat");return{app:t,appConfig:a,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},u8=r=>{const t=r.getProvider("app").getImmediate(),a=Tl(t,q3).getImmediate();return{getId:()=>n8(a),getToken:i=>i8(a,i)}};function h8(){xi(new Wn(q3,d8,"PUBLIC")),xi(new Wn(c8,u8,"PRIVATE"))}h8();ln(E3,yy);ln(E3,yy,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="analytics",m8="firebase_id",p8="origin",x8=60*1e3,g8="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ny="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn=new cx("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},En=new wc("analytics","Analytics",f8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(r){if(!r.startsWith(Ny)){const t=En.create("invalid-gtag-resource",{gtagURL:r});return cn.warn(t.message),""}return r}function W3(r){return Promise.all(r.map(t=>t.catch(a=>a)))}function y8(r,t){let a;return window.trustedTypes&&(a=window.trustedTypes.createPolicy(r,t)),a}function v8(r,t){const a=y8("firebase-js-sdk-policy",{createScriptURL:b8}),n=document.createElement("script"),i=`${Ny}?l=${r}&id=${t}`;n.src=a?a?.createScriptURL(i):i,n.async=!0,document.head.appendChild(n)}function w8(r){let t=[];return Array.isArray(window[r])?t=window[r]:window[r]=t,t}async function k8(r,t,a,n,i,c){const o=n[i];try{if(o)await t[o];else{const m=(await W3(a)).find(x=>x.measurementId===i);m&&await t[m.appId]}}catch(u){cn.error(u)}r("config",i,c)}async function N8(r,t,a,n,i){try{let c=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const u=await W3(a);for(const m of o){const x=u.find(k=>k.measurementId===m),g=x&&t[x.appId];if(g)c.push(g);else{c=[];break}}}c.length===0&&(c=Object.values(t)),await Promise.all(c),r("event",n,i||{})}catch(c){cn.error(c)}}function j8(r,t,a,n){async function i(c,...o){try{if(c==="event"){const[u,m]=o;await N8(r,t,a,u,m)}else if(c==="config"){const[u,m]=o;await k8(r,t,a,n,u,m)}else if(c==="consent"){const[u,m]=o;r("consent",u,m)}else if(c==="get"){const[u,m,x]=o;r("get",u,m,x)}else if(c==="set"){const[u]=o;r("set",u)}else r(c,...o)}catch(u){cn.error(u)}}return i}function C8(r,t,a,n,i){let c=function(...o){window[n].push(arguments)};return window[i]&&typeof window[i]=="function"&&(c=window[i]),window[i]=j8(c,r,t,a),{gtagCore:c,wrappedGtag:window[i]}}function T8(r){const t=window.document.getElementsByTagName("script");for(const a of Object.values(t))if(a.src&&a.src.includes(Ny)&&a.src.includes(r))return a;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8=30,E8=1e3;class _8{constructor(t={},a=E8){this.throttleMetadata=t,this.intervalMillis=a}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,a){this.throttleMetadata[t]=a}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const G3=new _8;function P8(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function I8(r){var t;const{appId:a,apiKey:n}=r,i={method:"GET",headers:P8(n)},c=g8.replace("{app-id}",a),o=await fetch(c,i);if(o.status!==200&&o.status!==304){let u="";try{const m=await o.json();!((t=m.error)===null||t===void 0)&&t.message&&(u=m.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:o.status,responseMessage:u})}return o.json()}async function $8(r,t=G3,a){const{appId:n,apiKey:i,measurementId:c}=r.options;if(!n)throw En.create("no-app-id");if(!i){if(c)return{measurementId:c,appId:n};throw En.create("no-api-key")}const o=t.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new R8;return setTimeout(async()=>{u.abort()},x8),K3({appId:n,apiKey:i,measurementId:c},o,u,t)}async function K3(r,{throttleEndTimeMillis:t,backoffCount:a},n,i=G3){var c;const{appId:o,measurementId:u}=r;try{await D8(n,t)}catch(m){if(u)return cn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:o,measurementId:u};throw m}try{const m=await I8(r);return i.deleteThrottleMetadata(o),m}catch(m){const x=m;if(!A8(x)){if(i.deleteThrottleMetadata(o),u)return cn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${x?.message}]`),{appId:o,measurementId:u};throw m}const g=Number((c=x?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Jk(a,i.intervalMillis,S8):Jk(a,i.intervalMillis),k={throttleEndTimeMillis:Date.now()+g,backoffCount:a+1};return i.setThrottleMetadata(o,k),cn.debug(`Calling attemptFetch again in ${g} millis`),K3(r,k,n,i)}}function D8(r,t){return new Promise((a,n)=>{const i=Math.max(t-Date.now(),0),c=setTimeout(a,i);r.addEventListener(()=>{clearTimeout(c),n(En.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function A8(r){if(!(r instanceof Gn)||!r.customData)return!1;const t=Number(r.customData.httpStatus);return t===429||t===500||t===503||t===504}class R8{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function M8(r,t,a,n,i){if(i&&i.global){r("event",a,n);return}else{const c=await t,o=Object.assign(Object.assign({},n),{send_to:c});r("event",a,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F8(){if(v3())try{await w3()}catch(r){return cn.warn(En.create("indexeddb-unavailable",{errorInfo:r?.toString()}).message),!1}else return cn.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function O8(r,t,a,n,i,c,o){var u;const m=$8(r);m.then(_=>{a[_.measurementId]=_.appId,r.options.measurementId&&_.measurementId!==r.options.measurementId&&cn.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>cn.error(_)),t.push(m);const x=F8().then(_=>{if(_)return n.getId()}),[g,k]=await Promise.all([m,x]);T8(c)||v8(c,g.measurementId),i("js",new Date);const S=(u=o?.config)!==null&&u!==void 0?u:{};return S[p8]="firebase",S.update=!0,k!=null&&(S[m8]=k),i("config",g.measurementId,S),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(t){this.app=t}_delete(){return delete Q0[this.app.options.appId],Promise.resolve()}}let Q0={},cN=[];const dN={};let Df="dataLayer",B8="gtag",uN,Y3,hN=!1;function z8(){const r=[];if(y3()&&r.push("This is a browser extension environment."),oD()||r.push("Cookies are not available."),r.length>0){const t=r.map((n,i)=>`(${i+1}) ${n}`).join(" "),a=En.create("invalid-analytics-context",{errorInfo:t});cn.warn(a.message)}}function V8(r,t,a){z8();const n=r.options.appId;if(!n)throw En.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)cn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(Q0[n]!=null)throw En.create("already-exists",{id:n});if(!hN){w8(Df);const{wrappedGtag:c,gtagCore:o}=C8(Q0,cN,dN,Df,B8);Y3=c,uN=o,hN=!0}return Q0[n]=O8(r,cN,dN,t,uN,Df,a),new L8(r)}function U8(r=dx()){r=Ta(r);const t=Tl(r,hp);return t.isInitialized()?t.getImmediate():H8(r)}function H8(r,t={}){const a=Tl(r,hp);if(a.isInitialized()){const i=a.getImmediate();if(pl(t,a.getOptions()))return i;throw En.create("already-initialized")}return a.initialize({options:t})}function q8(r,t,a,n){r=Ta(r),M8(Y3,Q0[r.app.options.appId],t,a,n).catch(i=>cn.error(i))}const mN="@firebase/analytics",pN="0.10.12";function W8(){xi(new Wn(hp,(t,{options:a})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return V8(n,i,a)},"PUBLIC")),xi(new Wn("analytics-internal",r,"PRIVATE")),ln(mN,pN),ln(mN,pN,"esm2017");function r(t){try{const a=t.getProvider(hp).getImmediate();return{logEvent:(n,i,c)=>q8(a,n,i,c)}}catch(a){throw En.create("interop-component-reg-failed",{reason:a})}}}W8();var xN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dl,Q3;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(H,z){function F(){}F.prototype=z.prototype,H.D=z.prototype,H.prototype=new F,H.prototype.constructor=H,H.C=function(v,ie,X){for(var ae=Array(arguments.length-2),We=2;We<arguments.length;We++)ae[We-2]=arguments[We];return z.prototype[ie].apply(v,ae)}}function a(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,a),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(H,z,F){F||(F=0);var v=Array(16);if(typeof z=="string")for(var ie=0;16>ie;++ie)v[ie]=z.charCodeAt(F++)|z.charCodeAt(F++)<<8|z.charCodeAt(F++)<<16|z.charCodeAt(F++)<<24;else for(ie=0;16>ie;++ie)v[ie]=z[F++]|z[F++]<<8|z[F++]<<16|z[F++]<<24;z=H.g[0],F=H.g[1],ie=H.g[2];var X=H.g[3],ae=z+(X^F&(ie^X))+v[0]+3614090360&4294967295;z=F+(ae<<7&4294967295|ae>>>25),ae=X+(ie^z&(F^ie))+v[1]+3905402710&4294967295,X=z+(ae<<12&4294967295|ae>>>20),ae=ie+(F^X&(z^F))+v[2]+606105819&4294967295,ie=X+(ae<<17&4294967295|ae>>>15),ae=F+(z^ie&(X^z))+v[3]+3250441966&4294967295,F=ie+(ae<<22&4294967295|ae>>>10),ae=z+(X^F&(ie^X))+v[4]+4118548399&4294967295,z=F+(ae<<7&4294967295|ae>>>25),ae=X+(ie^z&(F^ie))+v[5]+1200080426&4294967295,X=z+(ae<<12&4294967295|ae>>>20),ae=ie+(F^X&(z^F))+v[6]+2821735955&4294967295,ie=X+(ae<<17&4294967295|ae>>>15),ae=F+(z^ie&(X^z))+v[7]+4249261313&4294967295,F=ie+(ae<<22&4294967295|ae>>>10),ae=z+(X^F&(ie^X))+v[8]+1770035416&4294967295,z=F+(ae<<7&4294967295|ae>>>25),ae=X+(ie^z&(F^ie))+v[9]+2336552879&4294967295,X=z+(ae<<12&4294967295|ae>>>20),ae=ie+(F^X&(z^F))+v[10]+4294925233&4294967295,ie=X+(ae<<17&4294967295|ae>>>15),ae=F+(z^ie&(X^z))+v[11]+2304563134&4294967295,F=ie+(ae<<22&4294967295|ae>>>10),ae=z+(X^F&(ie^X))+v[12]+1804603682&4294967295,z=F+(ae<<7&4294967295|ae>>>25),ae=X+(ie^z&(F^ie))+v[13]+4254626195&4294967295,X=z+(ae<<12&4294967295|ae>>>20),ae=ie+(F^X&(z^F))+v[14]+2792965006&4294967295,ie=X+(ae<<17&4294967295|ae>>>15),ae=F+(z^ie&(X^z))+v[15]+1236535329&4294967295,F=ie+(ae<<22&4294967295|ae>>>10),ae=z+(ie^X&(F^ie))+v[1]+4129170786&4294967295,z=F+(ae<<5&4294967295|ae>>>27),ae=X+(F^ie&(z^F))+v[6]+3225465664&4294967295,X=z+(ae<<9&4294967295|ae>>>23),ae=ie+(z^F&(X^z))+v[11]+643717713&4294967295,ie=X+(ae<<14&4294967295|ae>>>18),ae=F+(X^z&(ie^X))+v[0]+3921069994&4294967295,F=ie+(ae<<20&4294967295|ae>>>12),ae=z+(ie^X&(F^ie))+v[5]+3593408605&4294967295,z=F+(ae<<5&4294967295|ae>>>27),ae=X+(F^ie&(z^F))+v[10]+38016083&4294967295,X=z+(ae<<9&4294967295|ae>>>23),ae=ie+(z^F&(X^z))+v[15]+3634488961&4294967295,ie=X+(ae<<14&4294967295|ae>>>18),ae=F+(X^z&(ie^X))+v[4]+3889429448&4294967295,F=ie+(ae<<20&4294967295|ae>>>12),ae=z+(ie^X&(F^ie))+v[9]+568446438&4294967295,z=F+(ae<<5&4294967295|ae>>>27),ae=X+(F^ie&(z^F))+v[14]+3275163606&4294967295,X=z+(ae<<9&4294967295|ae>>>23),ae=ie+(z^F&(X^z))+v[3]+4107603335&4294967295,ie=X+(ae<<14&4294967295|ae>>>18),ae=F+(X^z&(ie^X))+v[8]+1163531501&4294967295,F=ie+(ae<<20&4294967295|ae>>>12),ae=z+(ie^X&(F^ie))+v[13]+2850285829&4294967295,z=F+(ae<<5&4294967295|ae>>>27),ae=X+(F^ie&(z^F))+v[2]+4243563512&4294967295,X=z+(ae<<9&4294967295|ae>>>23),ae=ie+(z^F&(X^z))+v[7]+1735328473&4294967295,ie=X+(ae<<14&4294967295|ae>>>18),ae=F+(X^z&(ie^X))+v[12]+2368359562&4294967295,F=ie+(ae<<20&4294967295|ae>>>12),ae=z+(F^ie^X)+v[5]+4294588738&4294967295,z=F+(ae<<4&4294967295|ae>>>28),ae=X+(z^F^ie)+v[8]+2272392833&4294967295,X=z+(ae<<11&4294967295|ae>>>21),ae=ie+(X^z^F)+v[11]+1839030562&4294967295,ie=X+(ae<<16&4294967295|ae>>>16),ae=F+(ie^X^z)+v[14]+4259657740&4294967295,F=ie+(ae<<23&4294967295|ae>>>9),ae=z+(F^ie^X)+v[1]+2763975236&4294967295,z=F+(ae<<4&4294967295|ae>>>28),ae=X+(z^F^ie)+v[4]+1272893353&4294967295,X=z+(ae<<11&4294967295|ae>>>21),ae=ie+(X^z^F)+v[7]+4139469664&4294967295,ie=X+(ae<<16&4294967295|ae>>>16),ae=F+(ie^X^z)+v[10]+3200236656&4294967295,F=ie+(ae<<23&4294967295|ae>>>9),ae=z+(F^ie^X)+v[13]+681279174&4294967295,z=F+(ae<<4&4294967295|ae>>>28),ae=X+(z^F^ie)+v[0]+3936430074&4294967295,X=z+(ae<<11&4294967295|ae>>>21),ae=ie+(X^z^F)+v[3]+3572445317&4294967295,ie=X+(ae<<16&4294967295|ae>>>16),ae=F+(ie^X^z)+v[6]+76029189&4294967295,F=ie+(ae<<23&4294967295|ae>>>9),ae=z+(F^ie^X)+v[9]+3654602809&4294967295,z=F+(ae<<4&4294967295|ae>>>28),ae=X+(z^F^ie)+v[12]+3873151461&4294967295,X=z+(ae<<11&4294967295|ae>>>21),ae=ie+(X^z^F)+v[15]+530742520&4294967295,ie=X+(ae<<16&4294967295|ae>>>16),ae=F+(ie^X^z)+v[2]+3299628645&4294967295,F=ie+(ae<<23&4294967295|ae>>>9),ae=z+(ie^(F|~X))+v[0]+4096336452&4294967295,z=F+(ae<<6&4294967295|ae>>>26),ae=X+(F^(z|~ie))+v[7]+1126891415&4294967295,X=z+(ae<<10&4294967295|ae>>>22),ae=ie+(z^(X|~F))+v[14]+2878612391&4294967295,ie=X+(ae<<15&4294967295|ae>>>17),ae=F+(X^(ie|~z))+v[5]+4237533241&4294967295,F=ie+(ae<<21&4294967295|ae>>>11),ae=z+(ie^(F|~X))+v[12]+1700485571&4294967295,z=F+(ae<<6&4294967295|ae>>>26),ae=X+(F^(z|~ie))+v[3]+2399980690&4294967295,X=z+(ae<<10&4294967295|ae>>>22),ae=ie+(z^(X|~F))+v[10]+4293915773&4294967295,ie=X+(ae<<15&4294967295|ae>>>17),ae=F+(X^(ie|~z))+v[1]+2240044497&4294967295,F=ie+(ae<<21&4294967295|ae>>>11),ae=z+(ie^(F|~X))+v[8]+1873313359&4294967295,z=F+(ae<<6&4294967295|ae>>>26),ae=X+(F^(z|~ie))+v[15]+4264355552&4294967295,X=z+(ae<<10&4294967295|ae>>>22),ae=ie+(z^(X|~F))+v[6]+2734768916&4294967295,ie=X+(ae<<15&4294967295|ae>>>17),ae=F+(X^(ie|~z))+v[13]+1309151649&4294967295,F=ie+(ae<<21&4294967295|ae>>>11),ae=z+(ie^(F|~X))+v[4]+4149444226&4294967295,z=F+(ae<<6&4294967295|ae>>>26),ae=X+(F^(z|~ie))+v[11]+3174756917&4294967295,X=z+(ae<<10&4294967295|ae>>>22),ae=ie+(z^(X|~F))+v[2]+718787259&4294967295,ie=X+(ae<<15&4294967295|ae>>>17),ae=F+(X^(ie|~z))+v[9]+3951481745&4294967295,H.g[0]=H.g[0]+z&4294967295,H.g[1]=H.g[1]+(ie+(ae<<21&4294967295|ae>>>11))&4294967295,H.g[2]=H.g[2]+ie&4294967295,H.g[3]=H.g[3]+X&4294967295}n.prototype.u=function(H,z){z===void 0&&(z=H.length);for(var F=z-this.blockSize,v=this.B,ie=this.h,X=0;X<z;){if(ie==0)for(;X<=F;)i(this,H,X),X+=this.blockSize;if(typeof H=="string"){for(;X<z;)if(v[ie++]=H.charCodeAt(X++),ie==this.blockSize){i(this,v),ie=0;break}}else for(;X<z;)if(v[ie++]=H[X++],ie==this.blockSize){i(this,v),ie=0;break}}this.h=ie,this.o+=z},n.prototype.v=function(){var H=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);H[0]=128;for(var z=1;z<H.length-8;++z)H[z]=0;var F=8*this.o;for(z=H.length-8;z<H.length;++z)H[z]=F&255,F/=256;for(this.u(H),H=Array(16),z=F=0;4>z;++z)for(var v=0;32>v;v+=8)H[F++]=this.g[z]>>>v&255;return H};function c(H,z){var F=u;return Object.prototype.hasOwnProperty.call(F,H)?F[H]:F[H]=z(H)}function o(H,z){this.h=z;for(var F=[],v=!0,ie=H.length-1;0<=ie;ie--){var X=H[ie]|0;v&&X==z||(F[ie]=X,v=!1)}this.g=F}var u={};function m(H){return-128<=H&&128>H?c(H,function(z){return new o([z|0],0>z?-1:0)}):new o([H|0],0>H?-1:0)}function x(H){if(isNaN(H)||!isFinite(H))return k;if(0>H)return b(x(-H));for(var z=[],F=1,v=0;H>=F;v++)z[v]=H/F|0,F*=4294967296;return new o(z,0)}function g(H,z){if(H.length==0)throw Error("number format error: empty string");if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(H.charAt(0)=="-")return b(g(H.substring(1),z));if(0<=H.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=x(Math.pow(z,8)),v=k,ie=0;ie<H.length;ie+=8){var X=Math.min(8,H.length-ie),ae=parseInt(H.substring(ie,ie+X),z);8>X?(X=x(Math.pow(z,X)),v=v.j(X).add(x(ae))):(v=v.j(F),v=v.add(x(ae)))}return v}var k=m(0),S=m(1),_=m(16777216);r=o.prototype,r.m=function(){if(P(this))return-b(this).m();for(var H=0,z=1,F=0;F<this.g.length;F++){var v=this.i(F);H+=(0<=v?v:4294967296+v)*z,z*=4294967296}return H},r.toString=function(H){if(H=H||10,2>H||36<H)throw Error("radix out of range: "+H);if(I(this))return"0";if(P(this))return"-"+b(this).toString(H);for(var z=x(Math.pow(H,6)),F=this,v="";;){var ie=te(F,z).g;F=B(F,ie.j(z));var X=((0<F.g.length?F.g[0]:F.h)>>>0).toString(H);if(F=ie,I(F))return X+v;for(;6>X.length;)X="0"+X;v=X+v}},r.i=function(H){return 0>H?0:H<this.g.length?this.g[H]:this.h};function I(H){if(H.h!=0)return!1;for(var z=0;z<H.g.length;z++)if(H.g[z]!=0)return!1;return!0}function P(H){return H.h==-1}r.l=function(H){return H=B(this,H),P(H)?-1:I(H)?0:1};function b(H){for(var z=H.g.length,F=[],v=0;v<z;v++)F[v]=~H.g[v];return new o(F,~H.h).add(S)}r.abs=function(){return P(this)?b(this):this},r.add=function(H){for(var z=Math.max(this.g.length,H.g.length),F=[],v=0,ie=0;ie<=z;ie++){var X=v+(this.i(ie)&65535)+(H.i(ie)&65535),ae=(X>>>16)+(this.i(ie)>>>16)+(H.i(ie)>>>16);v=ae>>>16,X&=65535,ae&=65535,F[ie]=ae<<16|X}return new o(F,F[F.length-1]&-2147483648?-1:0)};function B(H,z){return H.add(b(z))}r.j=function(H){if(I(this)||I(H))return k;if(P(this))return P(H)?b(this).j(b(H)):b(b(this).j(H));if(P(H))return b(this.j(b(H)));if(0>this.l(_)&&0>H.l(_))return x(this.m()*H.m());for(var z=this.g.length+H.g.length,F=[],v=0;v<2*z;v++)F[v]=0;for(v=0;v<this.g.length;v++)for(var ie=0;ie<H.g.length;ie++){var X=this.i(v)>>>16,ae=this.i(v)&65535,We=H.i(ie)>>>16,ct=H.i(ie)&65535;F[2*v+2*ie]+=ae*ct,L(F,2*v+2*ie),F[2*v+2*ie+1]+=X*ct,L(F,2*v+2*ie+1),F[2*v+2*ie+1]+=ae*We,L(F,2*v+2*ie+1),F[2*v+2*ie+2]+=X*We,L(F,2*v+2*ie+2)}for(v=0;v<z;v++)F[v]=F[2*v+1]<<16|F[2*v];for(v=z;v<2*z;v++)F[v]=0;return new o(F,0)};function L(H,z){for(;(H[z]&65535)!=H[z];)H[z+1]+=H[z]>>>16,H[z]&=65535,z++}function O(H,z){this.g=H,this.h=z}function te(H,z){if(I(z))throw Error("division by zero");if(I(H))return new O(k,k);if(P(H))return z=te(b(H),z),new O(b(z.g),b(z.h));if(P(z))return z=te(H,b(z)),new O(b(z.g),z.h);if(30<H.g.length){if(P(H)||P(z))throw Error("slowDivide_ only works with positive integers.");for(var F=S,v=z;0>=v.l(H);)F=ne(F),v=ne(v);var ie=be(F,1),X=be(v,1);for(v=be(v,2),F=be(F,2);!I(v);){var ae=X.add(v);0>=ae.l(H)&&(ie=ie.add(F),X=ae),v=be(v,1),F=be(F,1)}return z=B(H,ie.j(z)),new O(ie,z)}for(ie=k;0<=H.l(z);){for(F=Math.max(1,Math.floor(H.m()/z.m())),v=Math.ceil(Math.log(F)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),X=x(F),ae=X.j(z);P(ae)||0<ae.l(H);)F-=v,X=x(F),ae=X.j(z);I(X)&&(X=S),ie=ie.add(X),H=B(H,ae)}return new O(ie,H)}r.A=function(H){return te(this,H).h},r.and=function(H){for(var z=Math.max(this.g.length,H.g.length),F=[],v=0;v<z;v++)F[v]=this.i(v)&H.i(v);return new o(F,this.h&H.h)},r.or=function(H){for(var z=Math.max(this.g.length,H.g.length),F=[],v=0;v<z;v++)F[v]=this.i(v)|H.i(v);return new o(F,this.h|H.h)},r.xor=function(H){for(var z=Math.max(this.g.length,H.g.length),F=[],v=0;v<z;v++)F[v]=this.i(v)^H.i(v);return new o(F,this.h^H.h)};function ne(H){for(var z=H.g.length+1,F=[],v=0;v<z;v++)F[v]=H.i(v)<<1|H.i(v-1)>>>31;return new o(F,H.h)}function be(H,z){var F=z>>5;z%=32;for(var v=H.g.length-F,ie=[],X=0;X<v;X++)ie[X]=0<z?H.i(X+F)>>>z|H.i(X+F+1)<<32-z:H.i(X+F);return new o(ie,H.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Q3=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=x,o.fromString=g,dl=o}).apply(typeof xN<"u"?xN:typeof self<"u"?self:typeof window<"u"?window:{});var Sm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var X3,U0,J3,Km,vb,Z3,e4,t4;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,W,Z){return w==Array.prototype||w==Object.prototype||(w[W]=Z.value),w};function a(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sm=="object"&&Sm];for(var W=0;W<w.length;++W){var Z=w[W];if(Z&&Z.Math==Math)return Z}throw Error("Cannot find global object")}var n=a(this);function i(w,W){if(W)e:{var Z=n;w=w.split(".");for(var me=0;me<w.length-1;me++){var Ke=w[me];if(!(Ke in Z))break e;Z=Z[Ke]}w=w[w.length-1],me=Z[w],W=W(me),W!=me&&W!=null&&t(Z,w,{configurable:!0,writable:!0,value:W})}}function c(w,W){w instanceof String&&(w+="");var Z=0,me=!1,Ke={next:function(){if(!me&&Z<w.length){var ht=Z++;return{value:W(ht,w[ht]),done:!1}}return me=!0,{done:!0,value:void 0}}};return Ke[Symbol.iterator]=function(){return Ke},Ke}i("Array.prototype.values",function(w){return w||function(){return c(this,function(W,Z){return Z})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function m(w){var W=typeof w;return W=W!="object"?W:w?Array.isArray(w)?"array":W:"null",W=="array"||W=="object"&&typeof w.length=="number"}function x(w){var W=typeof w;return W=="object"&&w!=null||W=="function"}function g(w,W,Z){return w.call.apply(w.bind,arguments)}function k(w,W,Z){if(!w)throw Error();if(2<arguments.length){var me=Array.prototype.slice.call(arguments,2);return function(){var Ke=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ke,me),w.apply(W,Ke)}}return function(){return w.apply(W,arguments)}}function S(w,W,Z){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:k,S.apply(null,arguments)}function _(w,W){var Z=Array.prototype.slice.call(arguments,1);return function(){var me=Z.slice();return me.push.apply(me,arguments),w.apply(this,me)}}function I(w,W){function Z(){}Z.prototype=W.prototype,w.aa=W.prototype,w.prototype=new Z,w.prototype.constructor=w,w.Qb=function(me,Ke,ht){for(var Yt=Array(arguments.length-2),ha=2;ha<arguments.length;ha++)Yt[ha-2]=arguments[ha];return W.prototype[Ke].apply(me,Yt)}}function P(w){const W=w.length;if(0<W){const Z=Array(W);for(let me=0;me<W;me++)Z[me]=w[me];return Z}return[]}function b(w,W){for(let Z=1;Z<arguments.length;Z++){const me=arguments[Z];if(m(me)){const Ke=w.length||0,ht=me.length||0;w.length=Ke+ht;for(let Yt=0;Yt<ht;Yt++)w[Ke+Yt]=me[Yt]}else w.push(me)}}class B{constructor(W,Z){this.i=W,this.j=Z,this.h=0,this.g=null}get(){let W;return 0<this.h?(this.h--,W=this.g,this.g=W.next,W.next=null):W=this.i(),W}}function L(w){return/^[\s\xa0]*$/.test(w)}function O(){var w=u.navigator;return w&&(w=w.userAgent)?w:""}function te(w){return te[" "](w),w}te[" "]=function(){};var ne=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function be(w,W,Z){for(const me in w)W.call(Z,w[me],me,w)}function H(w,W){for(const Z in w)W.call(void 0,w[Z],Z,w)}function z(w){const W={};for(const Z in w)W[Z]=w[Z];return W}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(w,W){let Z,me;for(let Ke=1;Ke<arguments.length;Ke++){me=arguments[Ke];for(Z in me)w[Z]=me[Z];for(let ht=0;ht<F.length;ht++)Z=F[ht],Object.prototype.hasOwnProperty.call(me,Z)&&(w[Z]=me[Z])}}function ie(w){var W=1;w=w.split(":");const Z=[];for(;0<W&&w.length;)Z.push(w.shift()),W--;return w.length&&Z.push(w.join(":")),Z}function X(w){u.setTimeout(()=>{throw w},0)}function ae(){var w=Ie;let W=null;return w.g&&(W=w.g,w.g=w.g.next,w.g||(w.h=null),W.next=null),W}class We{constructor(){this.h=this.g=null}add(W,Z){const me=ct.get();me.set(W,Z),this.h?this.h.next=me:this.g=me,this.h=me}}var ct=new B(()=>new ft,w=>w.reset());class ft{constructor(){this.next=this.g=this.h=null}set(W,Z){this.h=W,this.g=Z,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,Ee=!1,Ie=new We,_e=()=>{const w=u.Promise.resolve(void 0);ot=()=>{w.then(re)}};var re=()=>{for(var w;w=ae();){try{w.h.call(w.g)}catch(Z){X(Z)}var W=ct;W.j(w),100>W.h&&(W.h++,w.next=W.g,W.g=w)}Ee=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(w,W){this.type=w,this.g=this.target=W,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var ce=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var w=!1,W=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const Z=()=>{};u.addEventListener("test",Z,W),u.removeEventListener("test",Z,W)}catch{}return w})();function he(w,W){if(de.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var Z=this.type=w.type,me=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=W,W=w.relatedTarget){if(ne){e:{try{te(W.nodeName);var Ke=!0;break e}catch{}Ke=!1}Ke||(W=null)}}else Z=="mouseover"?W=w.fromElement:Z=="mouseout"&&(W=w.toElement);this.relatedTarget=W,me?(this.clientX=me.clientX!==void 0?me.clientX:me.pageX,this.clientY=me.clientY!==void 0?me.clientY:me.pageY,this.screenX=me.screenX||0,this.screenY=me.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=typeof w.pointerType=="string"?w.pointerType:q[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&he.aa.h.call(this)}}I(he,de);var q={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var l="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function qe(w,W,Z,me,Ke){this.listener=w,this.proxy=null,this.src=W,this.type=Z,this.capture=!!me,this.ha=Ke,this.key=++Xe,this.da=this.fa=!1}function Ae(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function Oe(w){this.src=w,this.g={},this.h=0}Oe.prototype.add=function(w,W,Z,me,Ke){var ht=w.toString();w=this.g[ht],w||(w=this.g[ht]=[],this.h++);var Yt=Lt(w,W,me,Ke);return-1<Yt?(W=w[Yt],Z||(W.fa=!1)):(W=new qe(W,this.src,ht,!!me,Ke),W.fa=Z,w.push(W)),W};function kt(w,W){var Z=W.type;if(Z in w.g){var me=w.g[Z],Ke=Array.prototype.indexOf.call(me,W,void 0),ht;(ht=0<=Ke)&&Array.prototype.splice.call(me,Ke,1),ht&&(Ae(W),w.g[Z].length==0&&(delete w.g[Z],w.h--))}}function Lt(w,W,Z,me){for(var Ke=0;Ke<w.length;++Ke){var ht=w[Ke];if(!ht.da&&ht.listener==W&&ht.capture==!!Z&&ht.ha==me)return Ke}return-1}var jt="closure_lm_"+(1e6*Math.random()|0),Wt={};function Tt(w,W,Z,me,Ke){if(Array.isArray(W)){for(var ht=0;ht<W.length;ht++)Tt(w,W[ht],Z,me,Ke);return null}return Z=$e(Z),w&&w[l]?w.K(W,Z,x(me)?!!me.capture:!1,Ke):tt(w,W,Z,!1,me,Ke)}function tt(w,W,Z,me,Ke,ht){if(!W)throw Error("Invalid event type");var Yt=x(Ke)?!!Ke.capture:!!Ke,ha=st(w);if(ha||(w[jt]=ha=new Oe(w)),Z=ha.add(W,Z,me,Yt,ht),Z.proxy)return Z;if(me=yt(),Z.proxy=me,me.src=w,me.listener=Z,w.addEventListener)ce||(Ke=Yt),Ke===void 0&&(Ke=!1),w.addEventListener(W.toString(),me,Ke);else if(w.attachEvent)w.attachEvent(Te(W.toString()),me);else if(w.addListener&&w.removeListener)w.addListener(me);else throw Error("addEventListener and attachEvent are unavailable.");return Z}function yt(){function w(Z){return W.call(w.src,w.listener,Z)}const W=Ze;return w}function Ue(w,W,Z,me,Ke){if(Array.isArray(W))for(var ht=0;ht<W.length;ht++)Ue(w,W[ht],Z,me,Ke);else me=x(me)?!!me.capture:!!me,Z=$e(Z),w&&w[l]?(w=w.i,W=String(W).toString(),W in w.g&&(ht=w.g[W],Z=Lt(ht,Z,me,Ke),-1<Z&&(Ae(ht[Z]),Array.prototype.splice.call(ht,Z,1),ht.length==0&&(delete w.g[W],w.h--)))):w&&(w=st(w))&&(W=w.g[W.toString()],w=-1,W&&(w=Lt(W,Z,me,Ke)),(Z=-1<w?W[w]:null)&&lt(Z))}function lt(w){if(typeof w!="number"&&w&&!w.da){var W=w.src;if(W&&W[l])kt(W.i,w);else{var Z=w.type,me=w.proxy;W.removeEventListener?W.removeEventListener(Z,me,w.capture):W.detachEvent?W.detachEvent(Te(Z),me):W.addListener&&W.removeListener&&W.removeListener(me),(Z=st(W))?(kt(Z,w),Z.h==0&&(Z.src=null,W[jt]=null)):Ae(w)}}}function Te(w){return w in Wt?Wt[w]:Wt[w]="on"+w}function Ze(w,W){if(w.da)w=!0;else{W=new he(W,this);var Z=w.listener,me=w.ha||w.src;w.fa&&lt(w),w=Z.call(me,W)}return w}function st(w){return w=w[jt],w instanceof Oe?w:null}var pt="__closure_events_fn_"+(1e9*Math.random()>>>0);function $e(w){return typeof w=="function"?w:(w[pt]||(w[pt]=function(W){return w.handleEvent(W)}),w[pt])}function s(){J.call(this),this.i=new Oe(this),this.M=this,this.F=null}I(s,J),s.prototype[l]=!0,s.prototype.removeEventListener=function(w,W,Z,me){Ue(this,w,W,Z,me)};function E(w,W){var Z,me=w.F;if(me)for(Z=[];me;me=me.F)Z.push(me);if(w=w.M,me=W.type||W,typeof W=="string")W=new de(W,w);else if(W instanceof de)W.target=W.target||w;else{var Ke=W;W=new de(me,w),v(W,Ke)}if(Ke=!0,Z)for(var ht=Z.length-1;0<=ht;ht--){var Yt=W.g=Z[ht];Ke=y(Yt,me,!0,W)&&Ke}if(Yt=W.g=w,Ke=y(Yt,me,!0,W)&&Ke,Ke=y(Yt,me,!1,W)&&Ke,Z)for(ht=0;ht<Z.length;ht++)Yt=W.g=Z[ht],Ke=y(Yt,me,!1,W)&&Ke}s.prototype.N=function(){if(s.aa.N.call(this),this.i){var w=this.i,W;for(W in w.g){for(var Z=w.g[W],me=0;me<Z.length;me++)Ae(Z[me]);delete w.g[W],w.h--}}this.F=null},s.prototype.K=function(w,W,Z,me){return this.i.add(String(w),W,!1,Z,me)},s.prototype.L=function(w,W,Z,me){return this.i.add(String(w),W,!0,Z,me)};function y(w,W,Z,me){if(W=w.i.g[String(W)],!W)return!0;W=W.concat();for(var Ke=!0,ht=0;ht<W.length;++ht){var Yt=W[ht];if(Yt&&!Yt.da&&Yt.capture==Z){var ha=Yt.listener,ts=Yt.ha||Yt.src;Yt.fa&&kt(w.i,Yt),Ke=ha.call(ts,me)!==!1&&Ke}}return Ke&&!me.defaultPrevented}function R(w,W,Z){if(typeof w=="function")Z&&(w=S(w,Z));else if(w&&typeof w.handleEvent=="function")w=S(w.handleEvent,w);else throw Error("Invalid listener argument");return 2147483647<Number(W)?-1:u.setTimeout(w,W||0)}function V(w){w.g=R(()=>{w.g=null,w.i&&(w.i=!1,V(w))},w.l);const W=w.h;w.h=null,w.m.apply(null,W)}class ee extends J{constructor(W,Z){super(),this.m=W,this.l=Z,this.h=null,this.i=!1,this.g=null}j(W){this.h=arguments,this.g?this.i=!0:V(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fe(w){J.call(this),this.h=w,this.g={}}I(fe,J);var ge=[];function A(w){be(w.g,function(W,Z){this.g.hasOwnProperty(Z)&&lt(W)},w),w.g={}}fe.prototype.N=function(){fe.aa.N.call(this),A(this)},fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Y=u.JSON.stringify,U=u.JSON.parse,N=class{stringify(w){return u.JSON.stringify(w,void 0)}parse(w){return u.JSON.parse(w,void 0)}};function C(){}C.prototype.h=null;function K(w){return w.h||(w.h=w.i())}function we(){}var je={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Me(){de.call(this,"d")}I(Me,de);function Ye(){de.call(this,"c")}I(Ye,de);var Be={},Se=null;function _t(){return Se=Se||new s}Be.La="serverreachability";function At(w){de.call(this,Be.La,w)}I(At,de);function Le(w){const W=_t();E(W,new At(W))}Be.STAT_EVENT="statevent";function He(w,W){de.call(this,Be.STAT_EVENT,w),this.stat=W}I(He,de);function Pt(w){const W=_t();E(W,new He(W,w))}Be.Ma="timingevent";function gt(w,W){de.call(this,Be.Ma,w),this.size=W}I(gt,de);function Rt(w,W){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){w()},W)}function Nt(){this.g=!0}Nt.prototype.xa=function(){this.g=!1};function Ht(w,W,Z,me,Ke,ht){w.info(function(){if(w.g)if(ht)for(var Yt="",ha=ht.split("&"),ts=0;ts<ha.length;ts++){var Gr=ha[ts].split("=");if(1<Gr.length){var is=Gr[0];Gr=Gr[1];var Ka=is.split("_");Yt=2<=Ka.length&&Ka[1]=="type"?Yt+(is+"="+Gr+"&"):Yt+(is+"=redacted&")}}else Yt=null;else Yt=ht;return"XMLHTTP REQ ("+me+") [attempt "+Ke+"]: "+W+`
`+Z+`
`+Yt})}function It(w,W,Z,me,Ke,ht,Yt){w.info(function(){return"XMLHTTP RESP ("+me+") [ attempt "+Ke+"]: "+W+`
`+Z+`
`+ht+" "+Yt})}function le(w,W,Z,me){w.info(function(){return"XMLHTTP TEXT ("+W+"): "+pe(w,Z)+(me?" "+me:"")})}function ye(w,W){w.info(function(){return"TIMEOUT: "+W})}Nt.prototype.info=function(){};function pe(w,W){if(!w.g)return W;if(!W)return null;try{var Z=JSON.parse(W);if(Z){for(w=0;w<Z.length;w++)if(Array.isArray(Z[w])){var me=Z[w];if(!(2>me.length)){var Ke=me[1];if(Array.isArray(Ke)&&!(1>Ke.length)){var ht=Ke[0];if(ht!="noop"&&ht!="stop"&&ht!="close")for(var Yt=1;Yt<Ke.length;Yt++)Ke[Yt]=""}}}}return Y(Z)}catch{return W}}var xe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ke={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ne;function Ge(){}I(Ge,C),Ge.prototype.g=function(){return new XMLHttpRequest},Ge.prototype.i=function(){return{}},Ne=new Ge;function ut(w,W,Z,me){this.j=w,this.i=W,this.l=Z,this.R=me||1,this.U=new fe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Je}function Je(){this.i=null,this.g="",this.h=!1}var et={},at={};function St(w,W,Z){w.L=1,w.v=Do(pn(W)),w.m=Z,w.P=!0,qt(w,null)}function qt(w,W){w.F=Date.now(),Dt(w),w.A=pn(w.v);var Z=w.A,me=w.R;Array.isArray(me)||(me=[String(me)]),Ro(Z.i,"t",me),w.C=0,Z=w.j.J,w.h=new Je,w.g=Ph(w.j,Z?W:null,!w.m),0<w.O&&(w.M=new ee(S(w.Y,w,w.g),w.O)),W=w.U,Z=w.g,me=w.ca;var Ke="readystatechange";Array.isArray(Ke)||(Ke&&(ge[0]=Ke.toString()),Ke=ge);for(var ht=0;ht<Ke.length;ht++){var Yt=Tt(Z,Ke[ht],me||W.handleEvent,!1,W.h||W);if(!Yt)break;W.g[Yt.key]=Yt}W=w.H?z(w.H):{},w.m?(w.u||(w.u="POST"),W["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,W)):(w.u="GET",w.g.ea(w.A,w.u,null,W)),Le(),Ht(w.i,w.u,w.A,w.l,w.R,w.m)}ut.prototype.ca=function(w){w=w.target;const W=this.M;W&&Js(w)==3?W.j():this.Y(w)},ut.prototype.Y=function(w){try{if(w==this.g)e:{const Ka=Js(this.g);var W=this.g.Ba();const Dn=this.g.Z();if(!(3>Ka)&&(Ka!=3||this.g&&(this.h.h||this.g.oa()||c0(this.g)))){this.J||Ka!=4||W==7||(W==8||0>=Dn?Le(3):Le(2)),ia(this);var Z=this.g.Z();this.X=Z;t:if(Zt(this)){var me=c0(this.g);w="";var Ke=me.length,ht=Js(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ua(this),aa(this);var Yt="";break t}this.h.i=new u.TextDecoder}for(W=0;W<Ke;W++)this.h.h=!0,w+=this.h.i.decode(me[W],{stream:!(ht&&W==Ke-1)});me.length=0,this.h.g+=w,this.C=0,Yt=this.h.g}else Yt=this.g.oa();if(this.o=Z==200,It(this.i,this.u,this.A,this.l,this.R,Ka,Z),this.o){if(this.T&&!this.K){t:{if(this.g){var ha,ts=this.g;if((ha=ts.g?ts.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(ha)){var Gr=ha;break t}}Gr=null}if(Z=Gr)le(this.i,this.l,Z,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yn(this,Z);else{this.o=!1,this.s=3,Pt(12),ua(this),aa(this);break e}}if(this.P){Z=!0;let gn;for(;!this.J&&this.C<Yt.length;)if(gn=Ft(this,Yt),gn==at){Ka==4&&(this.s=4,Pt(14),Z=!1),le(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==et){this.s=4,Pt(15),le(this.i,this.l,Yt,"[Invalid Chunk]"),Z=!1;break}else le(this.i,this.l,gn,null),Yn(this,gn);if(Zt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ka!=4||Yt.length!=0||this.h.h||(this.s=1,Pt(16),Z=!1),this.o=this.o&&Z,!Z)le(this.i,this.l,Yt,"[Invalid Chunked Response]"),ua(this),aa(this);else if(0<Yt.length&&!this.W){this.W=!0;var is=this.j;is.g==this&&is.ba&&!is.M&&(is.j.info("Great, no buffering proxy detected. Bytes received: "+Yt.length),u0(is),is.M=!0,Pt(11))}}else le(this.i,this.l,Yt,null),Yn(this,Yt);Ka==4&&ua(this),this.o&&!this.J&&(Ka==4?Bc(this.j,this):(this.o=!1,Dt(this)))}else Rc(this.g),Z==400&&0<Yt.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),ua(this),aa(this)}}}catch{}finally{}};function Zt(w){return w.g?w.u=="GET"&&w.L!=2&&w.j.Ca:!1}function Ft(w,W){var Z=w.C,me=W.indexOf(`
`,Z);return me==-1?at:(Z=Number(W.substring(Z,me)),isNaN(Z)?et:(me+=1,me+Z>W.length?at:(W=W.slice(me,me+Z),w.C=me+Z,W)))}ut.prototype.cancel=function(){this.J=!0,ua(this)};function Dt(w){w.S=Date.now()+w.I,Sr(w,w.I)}function Sr(w,W){if(w.B!=null)throw Error("WatchDog timer not null");w.B=Rt(S(w.ba,w),W)}function ia(w){w.B&&(u.clearTimeout(w.B),w.B=null)}ut.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(ye(this.i,this.A),this.L!=2&&(Le(),Pt(17)),ua(this),this.s=2,aa(this)):Sr(this,this.S-w)};function aa(w){w.j.G==0||w.J||Bc(w.j,w)}function ua(w){ia(w);var W=w.M;W&&typeof W.ma=="function"&&W.ma(),w.M=null,A(w.U),w.g&&(W=w.g,w.g=null,W.abort(),W.ma())}function Yn(w,W){try{var Z=w.j;if(Z.G!=0&&(Z.g==w||Sa(Z.h,w))){if(!w.K&&Sa(Z.h,w)&&Z.G==3){try{var me=Z.Da.g.parse(W)}catch{me=null}if(Array.isArray(me)&&me.length==3){var Ke=me;if(Ke[0]==0){e:if(!Z.u){if(Z.g)if(Z.g.F+3e3<w.F)Lc(Z),ei(Z);else break e;Oc(Z),Pt(18)}}else Z.za=Ke[1],0<Z.za-Z.T&&37500>Ke[2]&&Z.F&&Z.v==0&&!Z.C&&(Z.C=Rt(S(Z.Za,Z),6e3));if(1>=_o(Z.h)&&Z.ca){try{Z.ca()}catch{}Z.ca=void 0}}else Qi(Z,11)}else if((w.K||Z.g==w)&&Lc(Z),!L(W))for(Ke=Z.Da.g.parse(W),W=0;W<Ke.length;W++){let Gr=Ke[W];if(Z.T=Gr[0],Gr=Gr[1],Z.G==2)if(Gr[0]=="c"){Z.K=Gr[1],Z.ia=Gr[2];const is=Gr[3];is!=null&&(Z.la=is,Z.j.info("VER="+Z.la));const Ka=Gr[4];Ka!=null&&(Z.Aa=Ka,Z.j.info("SVER="+Z.Aa));const Dn=Gr[5];Dn!=null&&typeof Dn=="number"&&0<Dn&&(me=1.5*Dn,Z.L=me,Z.j.info("backChannelRequestTimeoutMs_="+me)),me=Z;const gn=w.g;if(gn){const Fl=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fl){var ht=me.h;ht.g||Fl.indexOf("spdy")==-1&&Fl.indexOf("quic")==-1&&Fl.indexOf("h2")==-1||(ht.j=ht.l,ht.g=new Set,ht.h&&(n0(ht,ht.h),ht.h=null))}if(me.D){const Vc=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vc&&(me.ya=Vc,ka(me.I,me.D,Vc))}}Z.G=3,Z.l&&Z.l.ua(),Z.ba&&(Z.R=Date.now()-w.F,Z.j.info("Handshake RTT: "+Z.R+"ms")),me=Z;var Yt=w;if(me.qa=_h(me,me.J?me.ia:null,me.W),Yt.K){fh(me.h,Yt);var ha=Yt,ts=me.L;ts&&(ha.I=ts),ha.B&&(ia(ha),Dt(ha)),me.g=Yt}else Ml(me);0<Z.i.length&&Ni(Z)}else Gr[0]!="stop"&&Gr[0]!="close"||Qi(Z,7);else Z.G==3&&(Gr[0]=="stop"||Gr[0]=="close"?Gr[0]=="stop"?Qi(Z,7):gs(Z):Gr[0]!="noop"&&Z.l&&Z.l.ta(Gr),Z.v=0)}}Le(4)}catch{}}var yi=class{constructor(w,W){this.g=w,this.map=W}};function mn(w){this.l=w||10,u.PerformanceNavigationTiming?(w=u.performance.getEntriesByType("navigation"),w=0<w.length&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ua(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function _o(w){return w.h?1:w.g?w.g.size:0}function Sa(w,W){return w.h?w.h==W:w.g?w.g.has(W):!1}function n0(w,W){w.g?w.g.add(W):w.h=W}function fh(w,W){w.h&&w.h==W?w.h=null:w.g&&w.g.has(W)&&w.g.delete(W)}mn.prototype.cancel=function(){if(this.i=bh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function bh(w){if(w.h!=null)return w.i.concat(w.h.D);if(w.g!=null&&w.g.size!==0){let W=w.i;for(const Z of w.g.values())W=W.concat(Z.D);return W}return P(w.i)}function Pc(w){if(w.V&&typeof w.V=="function")return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if(typeof w=="string")return w.split("");if(m(w)){for(var W=[],Z=w.length,me=0;me<Z;me++)W.push(w[me]);return W}W=[],Z=0;for(me in w)W[Z++]=w[me];return W}function Ic(w){if(w.na&&typeof w.na=="function")return w.na();if(!w.V||typeof w.V!="function"){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(m(w)||typeof w=="string"){var W=[];w=w.length;for(var Z=0;Z<w;Z++)W.push(Z);return W}W=[],Z=0;for(const me in w)W[Z++]=me;return W}}}function Po(w,W){if(w.forEach&&typeof w.forEach=="function")w.forEach(W,void 0);else if(m(w)||typeof w=="string")Array.prototype.forEach.call(w,W,void 0);else for(var Z=Ic(w),me=Pc(w),Ke=me.length,ht=0;ht<Ke;ht++)W.call(void 0,me[ht],Z&&Z[ht],w)}var $l=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kx(w,W){if(w){w=w.split("&");for(var Z=0;Z<w.length;Z++){var me=w[Z].indexOf("="),Ke=null;if(0<=me){var ht=w[Z].substring(0,me);Ke=w[Z].substring(me+1)}else ht=w[Z];W(ht,Ke?decodeURIComponent(Ke.replace(/\+/g," ")):"")}}}function Wi(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof Wi){this.h=w.h,Dl(this,w.j),this.o=w.o,this.g=w.g,Io(this,w.s),this.l=w.l;var W=w.i,Z=new vi;Z.i=W.i,W.g&&(Z.g=new Map(W.g),Z.h=W.h),$o(this,Z),this.m=w.m}else w&&(W=String(w).match($l))?(this.h=!1,Dl(this,W[1]||"",!0),this.o=Wr(W[2]||""),this.g=Wr(W[3]||"",!0),Io(this,W[4]),this.l=Wr(W[5]||"",!0),$o(this,W[6]||"",!0),this.m=Wr(W[7]||"")):(this.h=!1,this.i=new vi(null,this.h))}Wi.prototype.toString=function(){var w=[],W=this.j;W&&w.push(Ao(W,$c,!0),":");var Z=this.g;return(Z||W=="file")&&(w.push("//"),(W=this.o)&&w.push(Ao(W,$c,!0),"@"),w.push(encodeURIComponent(String(Z)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Z=this.s,Z!=null&&w.push(":",String(Z))),(Z=this.l)&&(this.g&&Z.charAt(0)!="/"&&w.push("/"),w.push(Ao(Z,Z.charAt(0)=="/"?wh:vh,!0))),(Z=this.i.toString())&&w.push("?",Z),(Z=this.m)&&w.push("#",Ao(Z,i0)),w.join("")};function pn(w){return new Wi(w)}function Dl(w,W,Z){w.j=Z?Wr(W,!0):W,w.j&&(w.j=w.j.replace(/:$/,""))}function Io(w,W){if(W){if(W=Number(W),isNaN(W)||0>W)throw Error("Bad port number "+W);w.s=W}else w.s=null}function $o(w,W,Z){W instanceof vi?(w.i=W,wi(w.i,w.h)):(Z||(W=Ao(W,kh)),w.i=new vi(W,w.h))}function ka(w,W,Z){w.i.set(W,Z)}function Do(w){return ka(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function Wr(w,W){return w?W?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function Ao(w,W,Z){return typeof w=="string"?(w=encodeURI(w).replace(W,yh),Z&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function yh(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var $c=/[#\/\?@]/g,vh=/[#\?:]/g,wh=/[#\?]/g,kh=/[#\?@]/g,i0=/#/g;function vi(w,W){this.h=this.g=null,this.i=w||null,this.j=!!W}function xs(w){w.g||(w.g=new Map,w.h=0,w.i&&Kx(w.i,function(W,Z){w.add(decodeURIComponent(W.replace(/\+/g," ")),Z)}))}r=vi.prototype,r.add=function(w,W){xs(this),this.i=null,w=$n(this,w);var Z=this.g.get(w);return Z||this.g.set(w,Z=[]),Z.push(W),this.h+=1,this};function Qn(w,W){xs(w),W=$n(w,W),w.g.has(W)&&(w.i=null,w.h-=w.g.get(W).length,w.g.delete(W))}function Xn(w,W){return xs(w),W=$n(w,W),w.g.has(W)}r.forEach=function(w,W){xs(this),this.g.forEach(function(Z,me){Z.forEach(function(Ke){w.call(W,Ke,me,this)},this)},this)},r.na=function(){xs(this);const w=Array.from(this.g.values()),W=Array.from(this.g.keys()),Z=[];for(let me=0;me<W.length;me++){const Ke=w[me];for(let ht=0;ht<Ke.length;ht++)Z.push(W[me])}return Z},r.V=function(w){xs(this);let W=[];if(typeof w=="string")Xn(this,w)&&(W=W.concat(this.g.get($n(this,w))));else{w=Array.from(this.g.values());for(let Z=0;Z<w.length;Z++)W=W.concat(w[Z])}return W},r.set=function(w,W){return xs(this),this.i=null,w=$n(this,w),Xn(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[W]),this.h+=1,this},r.get=function(w,W){return w?(w=this.V(w),0<w.length?String(w[0]):W):W};function Ro(w,W,Z){Qn(w,W),0<Z.length&&(w.i=null,w.g.set($n(w,W),P(Z)),w.h+=Z.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],W=Array.from(this.g.keys());for(var Z=0;Z<W.length;Z++){var me=W[Z];const ht=encodeURIComponent(String(me)),Yt=this.V(me);for(me=0;me<Yt.length;me++){var Ke=ht;Yt[me]!==""&&(Ke+="="+encodeURIComponent(String(Yt[me]))),w.push(Ke)}}return this.i=w.join("&")};function $n(w,W){return W=String(W),w.j&&(W=W.toLowerCase()),W}function wi(w,W){W&&!w.j&&(xs(w),w.i=null,w.g.forEach(function(Z,me){var Ke=me.toLowerCase();me!=Ke&&(Qn(this,me),Ro(this,Ke,Z))},w)),w.j=W}function Yx(w,W){const Z=new Nt;if(u.Image){const me=new Image;me.onload=_(Xs,Z,"TestLoadImage: loaded",!0,W,me),me.onerror=_(Xs,Z,"TestLoadImage: error",!1,W,me),me.onabort=_(Xs,Z,"TestLoadImage: abort",!1,W,me),me.ontimeout=_(Xs,Z,"TestLoadImage: timeout",!1,W,me),u.setTimeout(function(){me.ontimeout&&me.ontimeout()},1e4),me.src=w}else W(!1)}function Nh(w,W){const Z=new Nt,me=new AbortController,Ke=setTimeout(()=>{me.abort(),Xs(Z,"TestPingServer: timeout",!1,W)},1e4);fetch(w,{signal:me.signal}).then(ht=>{clearTimeout(Ke),ht.ok?Xs(Z,"TestPingServer: ok",!0,W):Xs(Z,"TestPingServer: server error",!1,W)}).catch(()=>{clearTimeout(Ke),Xs(Z,"TestPingServer: error",!1,W)})}function Xs(w,W,Z,me,Ke){try{Ke&&(Ke.onload=null,Ke.onerror=null,Ke.onabort=null,Ke.ontimeout=null),me(Z)}catch{}}function Qx(){this.g=new N}function jh(w,W,Z){const me=Z||"";try{Po(w,function(Ke,ht){let Yt=Ke;x(Ke)&&(Yt=Y(Ke)),W.push(me+ht+"="+encodeURIComponent(Yt))})}catch(Ke){throw W.push(me+"type="+encodeURIComponent("_badmap")),Ke}}function Gi(w){this.l=w.Ub||null,this.j=w.eb||!1}I(Gi,C),Gi.prototype.g=function(){return new Al(this.l,this.j)},Gi.prototype.i=(function(w){return function(){return w}})({});function Al(w,W){s.call(this),this.D=w,this.o=W,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Al,s),r=Al.prototype,r.open=function(w,W){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=W,this.readyState=1,Zn(this)},r.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const W={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(W.body=w),(this.D||u).fetch(new Request(this.A,W)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jn(this)),this.readyState=0},r.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ch(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ch(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}r.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var W=w.value?w.value:new Uint8Array(0);(W=this.v.decode(W,{stream:!w.done}))&&(this.response=this.responseText+=W)}w.done?Jn(this):Zn(this),this.readyState==3&&Ch(this)}},r.Ra=function(w){this.g&&(this.response=this.responseText=w,Jn(this))},r.Qa=function(w){this.g&&(this.response=w,Jn(this))},r.ga=function(){this.g&&Jn(this)};function Jn(w){w.readyState=4,w.l=null,w.j=null,w.v=null,Zn(w)}r.setRequestHeader=function(w,W){this.u.append(w,W)},r.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],W=this.h.entries();for(var Z=W.next();!Z.done;)Z=Z.value,w.push(Z[0]+": "+Z[1]),Z=W.next();return w.join(`\r
`)};function Zn(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(Al.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function Ki(w){let W="";return be(w,function(Z,me){W+=me,W+=":",W+=Z,W+=`\r
`}),W}function Mo(w,W,Z){e:{for(me in Z){var me=!1;break e}me=!0}me||(Z=Ki(Z),typeof w=="string"?Z!=null&&encodeURIComponent(String(Z)):ka(w,W,Z))}function Ia(w){s.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Ia,s);var Xx=/^https?$/i,o0=["POST","PUT"];r=Ia.prototype,r.Ha=function(w){this.J=w},r.ea=function(w,W,Z,me){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);W=W?W.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ne.g(),this.v=this.o?K(this.o):K(Ne),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(W,String(w),!0),this.B=!1}catch(ht){Rl(this,ht);return}if(w=Z||"",Z=new Map(this.headers),me)if(Object.getPrototypeOf(me)===Object.prototype)for(var Ke in me)Z.set(Ke,me[Ke]);else if(typeof me.keys=="function"&&typeof me.get=="function")for(const ht of me.keys())Z.set(ht,me.get(ht));else throw Error("Unknown input type for opt_headers: "+String(me));me=Array.from(Z.keys()).find(ht=>ht.toLowerCase()=="content-type"),Ke=u.FormData&&w instanceof u.FormData,!(0<=Array.prototype.indexOf.call(o0,W,void 0))||me||Ke||Z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ht,Yt]of Z)this.g.setRequestHeader(ht,Yt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ac(this),this.u=!0,this.g.send(w),this.u=!1}catch(ht){Rl(this,ht)}};function Rl(w,W){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=W,w.m=5,Dc(w),xn(w)}function Dc(w){w.A||(w.A=!0,E(w,"complete"),E(w,"error"))}r.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,E(this,"complete"),E(this,"abort"),xn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xn(this,!0)),Ia.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?l0(this):this.bb())},r.bb=function(){l0(this)};function l0(w){if(w.h&&typeof o<"u"&&(!w.v[1]||Js(w)!=4||w.Z()!=2)){if(w.u&&Js(w)==4)R(w.Ea,0,w);else if(E(w,"readystatechange"),Js(w)==4){w.h=!1;try{const Yt=w.Z();e:switch(Yt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var W=!0;break e;default:W=!1}var Z;if(!(Z=W)){var me;if(me=Yt===0){var Ke=String(w.D).match($l)[1]||null;!Ke&&u.self&&u.self.location&&(Ke=u.self.location.protocol.slice(0,-1)),me=!Xx.test(Ke?Ke.toLowerCase():"")}Z=me}if(Z)E(w,"complete"),E(w,"success");else{w.m=6;try{var ht=2<Js(w)?w.g.statusText:""}catch{ht=""}w.l=ht+" ["+w.Z()+"]",Dc(w)}}finally{xn(w)}}}}function xn(w,W){if(w.g){Ac(w);const Z=w.g,me=w.v[0]?()=>{}:null;w.g=null,w.v=null,W||E(w,"ready");try{Z.onreadystatechange=me}catch{}}}function Ac(w){w.I&&(u.clearTimeout(w.I),w.I=null)}r.isActive=function(){return!!this.g};function Js(w){return w.g?w.g.readyState:0}r.Z=function(){try{return 2<Js(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(w){if(this.g){var W=this.g.responseText;return w&&W.indexOf(w)==0&&(W=W.substring(w.length)),U(W)}};function c0(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function Rc(w){const W={};w=(w.g&&2<=Js(w)&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let me=0;me<w.length;me++){if(L(w[me]))continue;var Z=ie(w[me]);const Ke=Z[0];if(Z=Z[1],typeof Z!="string")continue;Z=Z.trim();const ht=W[Ke]||[];W[Ke]=ht,ht.push(Z)}H(W,function(me){return me.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(w,W,Z){return Z&&Z.internalChannelParams&&Z.internalChannelParams[w]||W}function d0(w){this.Aa=0,this.i=[],this.j=new Nt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ki("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ki("baseRetryDelayMs",5e3,w),this.cb=ki("retryDelaySeedMs",1e4,w),this.Wa=ki("forwardChannelMaxRetries",2,w),this.wa=ki("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new mn(w&&w.concurrentRequestLimit),this.Da=new Qx,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=d0.prototype,r.la=8,r.G=1,r.connect=function(w,W,Z,me){Pt(0),this.W=w,this.H=W||{},Z&&me!==void 0&&(this.H.OSID=Z,this.H.OAID=me),this.F=this.X,this.I=_h(this,null,this.W),Ni(this)};function gs(w){if(Mc(w),w.G==3){var W=w.U++,Z=pn(w.I);if(ka(Z,"SID",w.K),ka(Z,"RID",W),ka(Z,"TYPE","terminate"),Yi(w,Z),W=new ut(w,w.j,W),W.L=2,W.v=Do(pn(Z)),Z=!1,u.navigator&&u.navigator.sendBeacon)try{Z=u.navigator.sendBeacon(W.v.toString(),"")}catch{}!Z&&u.Image&&(new Image().src=W.v,Z=!0),Z||(W.g=Ph(W.j,null),W.g.ea(W.v)),W.F=Date.now(),Dt(W)}Eh(w)}function ei(w){w.g&&(u0(w),w.g.cancel(),w.g=null)}function Mc(w){ei(w),w.u&&(u.clearTimeout(w.u),w.u=null),Lc(w),w.h.cancel(),w.s&&(typeof w.s=="number"&&u.clearTimeout(w.s),w.s=null)}function Ni(w){if(!Ua(w.h)&&!w.s){w.s=!0;var W=w.Ga;ot||_e(),Ee||(ot(),Ee=!0),Ie.add(W,w),w.B=0}}function Jx(w,W){return _o(w.h)>=w.h.j-(w.s?1:0)?!1:w.s?(w.i=W.D.concat(w.i),!0):w.G==1||w.G==2||w.B>=(w.Va?0:w.Wa)?!1:(w.s=Rt(S(w.Ga,w,W),Sh(w,w.B)),w.B++,!0)}r.Ga=function(w){if(this.s)if(this.s=null,this.G==1){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const Ke=new ut(this,this.j,w);let ht=this.o;if(this.S&&(ht?(ht=z(ht),v(ht,this.S)):ht=this.S),this.m!==null||this.O||(Ke.H=ht,ht=null),this.P)e:{for(var W=0,Z=0;Z<this.i.length;Z++){t:{var me=this.i[Z];if("__data__"in me.map&&(me=me.map.__data__,typeof me=="string")){me=me.length;break t}me=void 0}if(me===void 0)break;if(W+=me,4096<W){W=Z;break e}if(W===4096||Z===this.i.length-1){W=Z+1;break e}}W=1e3}else W=1e3;W=Fo(this,Ke,W),Z=pn(this.I),ka(Z,"RID",w),ka(Z,"CVER",22),this.D&&ka(Z,"X-HTTP-Session-Id",this.D),Yi(this,Z),ht&&(this.O?W="headers="+encodeURIComponent(String(Ki(ht)))+"&"+W:this.m&&Mo(Z,this.m,ht)),n0(this.h,Ke),this.Ua&&ka(Z,"TYPE","init"),this.P?(ka(Z,"$req",W),ka(Z,"SID","null"),Ke.T=!0,St(Ke,Z,null)):St(Ke,Z,W),this.G=2}}else this.G==3&&(w?Fc(this,w):this.i.length==0||Ua(this.h)||Fc(this))};function Fc(w,W){var Z;W?Z=W.l:Z=w.U++;const me=pn(w.I);ka(me,"SID",w.K),ka(me,"RID",Z),ka(me,"AID",w.T),Yi(w,me),w.m&&w.o&&Mo(me,w.m,w.o),Z=new ut(w,w.j,Z,w.B+1),w.m===null&&(Z.H=w.o),W&&(w.i=W.D.concat(w.i)),W=Fo(w,Z,1e3),Z.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),n0(w.h,Z),St(Z,me,W)}function Yi(w,W){w.H&&be(w.H,function(Z,me){ka(W,me,Z)}),w.l&&Po({},function(Z,me){ka(W,me,Z)})}function Fo(w,W,Z){Z=Math.min(w.i.length,Z);var me=w.l?S(w.l.Na,w.l,w):null;e:{var Ke=w.i;let ht=-1;for(;;){const Yt=["count="+Z];ht==-1?0<Z?(ht=Ke[0].g,Yt.push("ofs="+ht)):ht=0:Yt.push("ofs="+ht);let ha=!0;for(let ts=0;ts<Z;ts++){let Gr=Ke[ts].g;const is=Ke[ts].map;if(Gr-=ht,0>Gr)ht=Math.max(0,Ke[ts].g-100),ha=!1;else try{jh(is,Yt,"req"+Gr+"_")}catch{me&&me(is)}}if(ha){me=Yt.join("&");break e}}}return w=w.i.splice(0,Z),W.D=w,me}function Ml(w){if(!w.g&&!w.u){w.Y=1;var W=w.Fa;ot||_e(),Ee||(ot(),Ee=!0),Ie.add(W,w),w.v=0}}function Oc(w){return w.g||w.u||3<=w.v?!1:(w.Y++,w.u=Rt(S(w.Fa,w),Sh(w,w.v)),w.v++,!0)}r.Fa=function(){if(this.u=null,Th(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=Rt(S(this.ab,this),w)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),ei(this),Th(this))};function u0(w){w.A!=null&&(u.clearTimeout(w.A),w.A=null)}function Th(w){w.g=new ut(w,w.j,"rpc",w.Y),w.m===null&&(w.g.H=w.o),w.g.O=0;var W=pn(w.qa);ka(W,"RID","rpc"),ka(W,"SID",w.K),ka(W,"AID",w.T),ka(W,"CI",w.F?"0":"1"),!w.F&&w.ja&&ka(W,"TO",w.ja),ka(W,"TYPE","xmlhttp"),Yi(w,W),w.m&&w.o&&Mo(W,w.m,w.o),w.L&&(w.g.I=w.L);var Z=w.g;w=w.ia,Z.L=1,Z.v=Do(pn(W)),Z.m=null,Z.P=!0,qt(Z,w)}r.Za=function(){this.C!=null&&(this.C=null,ei(this),Oc(this),Pt(19))};function Lc(w){w.C!=null&&(u.clearTimeout(w.C),w.C=null)}function Bc(w,W){var Z=null;if(w.g==W){Lc(w),u0(w),w.g=null;var me=2}else if(Sa(w.h,W))Z=W.D,fh(w.h,W),me=1;else return;if(w.G!=0){if(W.o)if(me==1){Z=W.m?W.m.length:0,W=Date.now()-W.F;var Ke=w.B;me=_t(),E(me,new gt(me,Z)),Ni(w)}else Ml(w);else if(Ke=W.s,Ke==3||Ke==0&&0<W.X||!(me==1&&Jx(w,W)||me==2&&Oc(w)))switch(Z&&0<Z.length&&(W=w.h,W.i=W.i.concat(Z)),Ke){case 1:Qi(w,5);break;case 4:Qi(w,10);break;case 3:Qi(w,6);break;default:Qi(w,2)}}}function Sh(w,W){let Z=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||(Z*=2),Z*W}function Qi(w,W){if(w.j.info("Error code "+W),W==2){var Z=S(w.fb,w),me=w.Xa;const Ke=!me;me=new Wi(me||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Dl(me,"https"),Do(me),Ke?Yx(me.toString(),Z):Nh(me.toString(),Z)}else Pt(2);w.G=0,w.l&&w.l.sa(W),Eh(w),Mc(w)}r.fb=function(w){w?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function Eh(w){if(w.G=0,w.ka=[],w.l){const W=bh(w.h);(W.length!=0||w.i.length!=0)&&(b(w.ka,W),b(w.ka,w.i),w.h.i.length=0,P(w.i),w.i.length=0),w.l.ra()}}function _h(w,W,Z){var me=Z instanceof Wi?pn(Z):new Wi(Z);if(me.g!="")W&&(me.g=W+"."+me.g),Io(me,me.s);else{var Ke=u.location;me=Ke.protocol,W=W?W+"."+Ke.hostname:Ke.hostname,Ke=+Ke.port;var ht=new Wi(null);me&&Dl(ht,me),W&&(ht.g=W),Ke&&Io(ht,Ke),Z&&(ht.l=Z),me=ht}return Z=w.D,W=w.ya,Z&&W&&ka(me,Z,W),ka(me,"VER",w.la),Yi(w,me),me}function Ph(w,W,Z){if(W&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return W=w.Ca&&!w.pa?new Ia(new Gi({eb:Z})):new Ia(w.pa),W.Ha(w.J),W}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function h0(){}r=h0.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function zc(){}zc.prototype.g=function(w,W){return new Vs(w,W)};function Vs(w,W){s.call(this),this.g=new d0(W),this.l=w,this.h=W&&W.messageUrlParams||null,w=W&&W.messageHeaders||null,W&&W.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=W&&W.initMessageHeaders||null,W&&W.messageContentType&&(w?w["X-WebChannel-Content-Type"]=W.messageContentType:w={"X-WebChannel-Content-Type":W.messageContentType}),W&&W.va&&(w?w["X-WebChannel-Client-Profile"]=W.va:w={"X-WebChannel-Client-Profile":W.va}),this.g.S=w,(w=W&&W.Sb)&&!L(w)&&(this.g.m=w),this.v=W&&W.supportsCrossDomainXhr||!1,this.u=W&&W.sendRawJson||!1,(W=W&&W.httpSessionIdParam)&&!L(W)&&(this.g.D=W,w=this.h,w!==null&&W in w&&(w=this.h,W in w&&delete w[W])),this.j=new ji(this)}I(Vs,s),Vs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vs.prototype.close=function(){gs(this.g)},Vs.prototype.o=function(w){var W=this.g;if(typeof w=="string"){var Z={};Z.__data__=w,w=Z}else this.u&&(Z={},Z.__data__=Y(w),w=Z);W.i.push(new yi(W.Ya++,w)),W.G==3&&Ni(W)},Vs.prototype.N=function(){this.g.l=null,delete this.j,gs(this.g),delete this.g,Vs.aa.N.call(this)};function Ih(w){Me.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var W=w.__sm__;if(W){e:{for(const Z in W){w=Z;break e}w=void 0}(this.i=w)&&(w=this.i,W=W!==null&&w in W?W[w]:void 0),this.data=W}else this.data=w}I(Ih,Me);function $h(){Ye.call(this),this.status=1}I($h,Ye);function ji(w){this.g=w}I(ji,h0),ji.prototype.ua=function(){E(this.g,"a")},ji.prototype.ta=function(w){E(this.g,new Ih(w))},ji.prototype.sa=function(w){E(this.g,new $h)},ji.prototype.ra=function(){E(this.g,"b")},zc.prototype.createWebChannel=zc.prototype.g,Vs.prototype.send=Vs.prototype.o,Vs.prototype.open=Vs.prototype.m,Vs.prototype.close=Vs.prototype.close,t4=function(){return new zc},e4=function(){return _t()},Z3=Be,vb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xe.NO_ERROR=0,xe.TIMEOUT=8,xe.HTTP_ERROR=6,Km=xe,ke.COMPLETE="complete",J3=ke,we.EventType=je,je.OPEN="a",je.CLOSE="b",je.ERROR="c",je.MESSAGE="d",s.prototype.listen=s.prototype.K,U0=we,Ia.prototype.listenOnce=Ia.prototype.L,Ia.prototype.getLastError=Ia.prototype.Ka,Ia.prototype.getLastErrorCode=Ia.prototype.Ba,Ia.prototype.getStatus=Ia.prototype.Z,Ia.prototype.getResponseJson=Ia.prototype.Oa,Ia.prototype.getResponseText=Ia.prototype.oa,Ia.prototype.send=Ia.prototype.ea,Ia.prototype.setWithCredentials=Ia.prototype.Ha,X3=Ia}).apply(typeof Sm<"u"?Sm:typeof self<"u"?self:typeof window<"u"?window:{});const gN="@firebase/firestore",fN="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Fs.UNAUTHENTICATED=new Fs(null),Fs.GOOGLE_CREDENTIALS=new Fs("google-credentials-uid"),Fs.FIRST_PARTY=new Fs("first-party-uid"),Fs.MOCK_USER=new Fs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wd="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new cx("@firebase/firestore");function hd(){return dc.logLevel}function rr(r,...t){if(dc.logLevel<=Or.DEBUG){const a=t.map(jy);dc.debug(`Firestore (${Wd}): ${r}`,...a)}}function bo(r,...t){if(dc.logLevel<=Or.ERROR){const a=t.map(jy);dc.error(`Firestore (${Wd}): ${r}`,...a)}}function Dd(r,...t){if(dc.logLevel<=Or.WARN){const a=t.map(jy);dc.warn(`Firestore (${Wd}): ${r}`,...a)}}function jy(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(a){return JSON.stringify(a)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(r="Unexpected state"){const t=`FIRESTORE (${Wd}) INTERNAL ASSERTION FAILED: `+r;throw bo(t),new Error(t)}function Yr(r,t){r||jr()}function Pr(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class er extends Gn{constructor(t,a){super(t,a),this.code=t,this.message=a,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.promise=new Promise(((t,a)=>{this.resolve=t,this.reject=a}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(t,a){this.user=a,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class G8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,a){t.enqueueRetryable((()=>a(Fs.UNAUTHENTICATED)))}shutdown(){}}class K8{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,a){this.changeListener=a,t.enqueueRetryable((()=>a(this.token.user)))}shutdown(){this.changeListener=null}}class Y8{constructor(t){this.t=t,this.currentUser=Fs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,a){Yr(this.o===void 0);let n=this.i;const i=m=>this.i!==n?(n=this.i,a(m)):Promise.resolve();let c=new $i;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new $i,t.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const m=c;t.enqueueRetryable((async()=>{await m.promise,await i(this.currentUser)}))},u=m=>{rr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((m=>u(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?u(m):(rr("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new $i)}}),0),o()}getToken(){const t=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then((n=>this.i!==t?(rr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Yr(typeof n.accessToken=="string"),new r4(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Yr(t===null||typeof t=="string"),new Fs(t)}}class Q8{constructor(t,a,n){this.l=t,this.h=a,this.P=n,this.type="FirstParty",this.user=Fs.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class X8{constructor(t,a,n){this.l=t,this.h=a,this.P=n}getToken(){return Promise.resolve(new Q8(this.l,this.h,this.P))}start(t,a){t.enqueueRetryable((()=>a(Fs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bN{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class J8{constructor(t,a){this.A=a,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,jn(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,a){Yr(this.o===void 0);const n=c=>{c.error!=null&&rr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const o=c.token!==this.R;return this.R=c.token,rr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?a(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>n(c)))};const i=c=>{rr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((c=>i(c))),setTimeout((()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?i(c):rr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new bN(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((a=>a?(Yr(typeof a.token=="string"),this.R=a.token,new bN(a.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),a=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(a);else for(let n=0;n<r;n++)a[n]=Math.floor(256*Math.random());return a}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=Z8(40);for(let c=0;c<i.length;++c)n.length<20&&i[c]<a&&(n+=t.charAt(i[c]%62))}return n}}function Dr(r,t){return r<t?-1:r>t?1:0}function wb(r,t){let a=0;for(;a<r.length&&a<t.length;){const n=r.codePointAt(a),i=t.codePointAt(a);if(n!==i){if(n<128&&i<128)return Dr(n,i);{const c=a4(),o=eR(c.encode(yN(r,a)),c.encode(yN(t,a)));return o!==0?o:Dr(n,i)}}a+=n>65535?2:1}return Dr(r.length,t.length)}function yN(r,t){return r.codePointAt(t)>65535?r.substring(t,t+2):r.substring(t,t+1)}function eR(r,t){for(let a=0;a<r.length&&a<t.length;++a)if(r[a]!==t[a])return Dr(r[a],t[a]);return Dr(r.length,t.length)}function Ad(r,t,a){return r.length===t.length&&r.every(((n,i)=>a(n,t[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=-62135596800,wN=1e6;class ja{static now(){return ja.fromMillis(Date.now())}static fromDate(t){return ja.fromMillis(t.getTime())}static fromMillis(t){const a=Math.floor(t/1e3),n=Math.floor((t-1e3*a)*wN);return new ja(a,n)}constructor(t,a){if(this.seconds=t,this.nanoseconds=a,a<0)throw new er(bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(a>=1e9)throw new er(bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(t<vN)throw new er(bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new er(bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wN}_compareTo(t){return this.seconds===t.seconds?Dr(this.nanoseconds,t.nanoseconds):Dr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-vN;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{static fromTimestamp(t){return new Cr(t)}static min(){return new Cr(new ja(0,0))}static max(){return new Cr(new ja(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="__name__";class Ii{constructor(t,a,n){a===void 0?a=0:a>t.length&&jr(),n===void 0?n=t.length-a:n>t.length-a&&jr(),this.segments=t,this.offset=a,this.len=n}get length(){return this.len}isEqual(t){return Ii.comparator(this,t)===0}child(t){const a=this.segments.slice(this.offset,this.limit());return t instanceof Ii?t.forEach((n=>{a.push(n)})):a.push(t),this.construct(a)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==t.get(a))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==t.get(a))return!1;return!0}forEach(t){for(let a=this.offset,n=this.limit();a<n;a++)t(this.segments[a])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,a){const n=Math.min(t.length,a.length);for(let i=0;i<n;i++){const c=Ii.compareSegments(t.get(i),a.get(i));if(c!==0)return c}return Dr(t.length,a.length)}static compareSegments(t,a){const n=Ii.isNumericId(t),i=Ii.isNumericId(a);return n&&!i?-1:!n&&i?1:n&&i?Ii.extractNumericId(t).compare(Ii.extractNumericId(a)):wb(t,a)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return dl.fromString(t.substring(4,t.length-2))}}class Na extends Ii{construct(t,a,n){return new Na(t,a,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const a=[];for(const n of t){if(n.indexOf("//")>=0)throw new er(bt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);a.push(...n.split("/").filter((i=>i.length>0)))}return new Na(a)}static emptyPath(){return new Na([])}}const tR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ns extends Ii{construct(t,a,n){return new Ns(t,a,n)}static isValidIdentifier(t){return tR.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ns.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kN}static keyField(){return new Ns([kN])}static fromServerFormat(t){const a=[];let n="",i=0;const c=()=>{if(n.length===0)throw new er(bt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);a.push(n),n=""};let o=!1;for(;i<t.length;){const u=t[i];if(u==="\\"){if(i+1===t.length)throw new er(bt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[i+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new er(bt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=m,i+=2}else u==="`"?(o=!o,i++):u!=="."||o?(n+=u,i++):(c(),i++)}if(c(),o)throw new er(bt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ns(a)}static emptyPath(){return new Ns([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(t){this.path=t}static fromPath(t){return new wr(Na.fromString(t))}static fromName(t){return new wr(Na.fromString(t).popFirst(5))}static empty(){return new wr(Na.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Na.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,a){return Na.comparator(t.path,a.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new wr(new Na(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=-1;function rR(r,t){const a=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Cr.fromTimestamp(n===1e9?new ja(a+1,0):new ja(a,n));return new xl(i,wr.empty(),t)}function aR(r){return new xl(r.readTime,r.key,gu)}class xl{constructor(t,a,n){this.readTime=t,this.documentKey=a,this.largestBatchId=n}static min(){return new xl(Cr.min(),wr.empty(),gu)}static max(){return new xl(Cr.max(),wr.empty(),gu)}}function sR(r,t){let a=r.readTime.compareTo(t.readTime);return a!==0?a:(a=wr.comparator(r.documentKey,t.documentKey),a!==0?a:Dr(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gd(r){if(r.code!==bt.FAILED_PRECONDITION||r.message!==nR)throw r;rr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((a=>{this.isDone=!0,this.result=a,this.nextCallback&&this.nextCallback(a)}),(a=>{this.isDone=!0,this.error=a,this.catchCallback&&this.catchCallback(a)}))}catch(t){return this.next(void 0,t)}next(t,a){return this.callbackAttached&&jr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(a,this.error):this.wrapSuccess(t,this.result):new wt(((n,i)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(n,i)},this.catchCallback=c=>{this.wrapFailure(a,c).next(n,i)}}))}toPromise(){return new Promise(((t,a)=>{this.next(t,a)}))}wrapUserFunction(t){try{const a=t();return a instanceof wt?a:wt.resolve(a)}catch(a){return wt.reject(a)}}wrapSuccess(t,a){return t?this.wrapUserFunction((()=>t(a))):wt.resolve(a)}wrapFailure(t,a){return t?this.wrapUserFunction((()=>t(a))):wt.reject(a)}static resolve(t){return new wt(((a,n)=>{a(t)}))}static reject(t){return new wt(((a,n)=>{n(t)}))}static waitFor(t){return new wt(((a,n)=>{let i=0,c=0,o=!1;t.forEach((u=>{++i,u.next((()=>{++c,o&&c===i&&a()}),(m=>n(m)))})),o=!0,c===i&&a()}))}static or(t){let a=wt.resolve(!1);for(const n of t)a=a.next((i=>i?wt.resolve(i):n()));return a}static forEach(t,a){const n=[];return t.forEach(((i,c)=>{n.push(a.call(this,i,c))})),this.waitFor(n)}static mapArray(t,a){return new wt(((n,i)=>{const c=t.length,o=new Array(c);let u=0;for(let m=0;m<c;m++){const x=m;a(t[x]).next((g=>{o[x]=g,++u,u===c&&n(o)}),(g=>i(g)))}}))}static doWhile(t,a){return new wt(((n,i)=>{const c=()=>{t()===!0?a().next((()=>{c()}),i):n()};c()}))}}function oR(r){const t=r.match(/Android ([\d.]+)/i),a=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(a)}function Kd(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(t,a){this.previousValue=t,a&&(a.sequenceNumberHandler=n=>this.oe(n),this._e=n=>a.writeSequenceNumber(n))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}mx.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy=-1;function Wu(r){return r==null}function mp(r){return r===0&&1/r==-1/0}function lR(r){return typeof r=="number"&&Number.isInteger(r)&&!mp(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="";function cR(r){let t="";for(let a=0;a<r.length;a++)t.length>0&&(t=NN(t)),t=dR(r.get(a),t);return NN(t)}function dR(r,t){let a=t;const n=r.length;for(let i=0;i<n;i++){const c=r.charAt(i);switch(c){case"\0":a+="";break;case n4:a+="";break;default:a+=c}}return a}function NN(r){return r+n4+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(r){let t=0;for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&t++;return t}function Sl(r,t){for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&t(a,r[a])}function i4(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(t,a){this.comparator=t,this.root=a||ks.EMPTY}insert(t,a){return new Oa(this.comparator,this.root.insert(t,a,this.comparator).copy(null,null,ks.BLACK,null,null))}remove(t){return new Oa(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ks.BLACK,null,null))}get(t){let a=this.root;for(;!a.isEmpty();){const n=this.comparator(t,a.key);if(n===0)return a.value;n<0?a=a.left:n>0&&(a=a.right)}return null}indexOf(t){let a=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return a+n.left.size;i<0?n=n.left:(a+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((a,n)=>(t(a,n),!1)))}toString(){const t=[];return this.inorderTraversal(((a,n)=>(t.push(`${a}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Em(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Em(this.root,t,this.comparator,!1)}getReverseIterator(){return new Em(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Em(this.root,t,this.comparator,!0)}}class Em{constructor(t,a,n,i){this.isReverse=i,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=a?n(t.key,a):1,a&&i&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const a={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return a}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ks{constructor(t,a,n,i,c){this.key=t,this.value=a,this.color=n??ks.RED,this.left=i??ks.EMPTY,this.right=c??ks.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,a,n,i,c){return new ks(t??this.key,a??this.value,n??this.color,i??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,a,n){let i=this;const c=n(t,i.key);return i=c<0?i.copy(null,null,null,i.left.insert(t,a,n),null):c===0?i.copy(null,a,null,null,null):i.copy(null,null,null,null,i.right.insert(t,a,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ks.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,a){let n,i=this;if(a(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,a),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),a(t,i.key)===0){if(i.right.isEmpty())return ks.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,a))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ks.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ks.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,a)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw jr();const t=this.left.check();if(t!==this.right.check())throw jr();return t+(this.isRed()?0:1)}}ks.EMPTY=null,ks.RED=!0,ks.BLACK=!1;ks.EMPTY=new class{constructor(){this.size=0}get key(){throw jr()}get value(){throw jr()}get color(){throw jr()}get left(){throw jr()}get right(){throw jr()}copy(t,a,n,i,c){return this}insert(t,a,n){return new ks(t,a)}remove(t,a){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(t){this.comparator=t,this.data=new Oa(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((a,n)=>(t(a),!1)))}forEachInRange(t,a){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;a(i.key)}}forEachWhile(t,a){let n;for(n=a!==void 0?this.data.getIteratorFrom(a):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const a=this.data.getIteratorFrom(t);return a.hasNext()?a.getNext().key:null}getIterator(){return new CN(this.data.getIterator())}getIteratorFrom(t){return new CN(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let a=this;return a.size<t.size&&(a=t,t=this),t.forEach((n=>{a=a.add(n)})),a}isEqual(t){if(!(t instanceof ns)||this.size!==t.size)return!1;const a=this.data.getIterator(),n=t.data.getIterator();for(;a.hasNext();){const i=a.getNext().key,c=n.getNext().key;if(this.comparator(i,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((a=>{t.push(a)})),t}toString(){const t=[];return this.forEach((a=>t.push(a))),"SortedSet("+t.toString()+")"}copy(t){const a=new ns(this.comparator);return a.data=t,a}}class CN{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t){this.fields=t,t.sort(Ns.comparator)}static empty(){return new Tn([])}unionWith(t){let a=new ns(Ns.comparator);for(const n of this.fields)a=a.add(n);for(const n of t)a=a.add(n);return new Tn(a.toArray())}covers(t){for(const a of this.fields)if(a.isPrefixOf(t))return!0;return!1}isEqual(t){return Ad(this.fields,t.fields,((a,n)=>a.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(t){this.binaryString=t}static fromBase64String(t){const a=(function(i){try{return atob(i)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new o4("Invalid base64 string: "+c):c}})(t);return new _s(a)}static fromUint8Array(t){const a=(function(i){let c="";for(let o=0;o<i.length;++o)c+=String.fromCharCode(i[o]);return c})(t);return new _s(a)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(a){return btoa(a)})(this.binaryString)}toUint8Array(){return(function(a){const n=new Uint8Array(a.length);for(let i=0;i<a.length;i++)n[i]=a.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Dr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}_s.EMPTY_BYTE_STRING=new _s("");const uR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gl(r){if(Yr(!!r),typeof r=="string"){let t=0;const a=uR.exec(r);if(Yr(!!a),a[1]){let i=a[1];i=(i+"000000000").substr(0,9),t=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Wa(r.seconds),nanos:Wa(r.nanos)}}function Wa(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function fl(r){return typeof r=="string"?_s.fromBase64String(r):_s.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4="server_timestamp",c4="__type__",d4="__previous_value__",u4="__local_write_time__";function Ty(r){var t,a;return((a=(((t=r?.mapValue)===null||t===void 0?void 0:t.fields)||{})[c4])===null||a===void 0?void 0:a.stringValue)===l4}function px(r){const t=r.mapValue.fields[d4];return Ty(t)?px(t):t}function fu(r){const t=gl(r.mapValue.fields[u4].timestampValue);return new ja(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(t,a,n,i,c,o,u,m,x){this.databaseId=t,this.appId=a,this.persistenceKey=n,this.host=i,this.ssl=c,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=m,this.useFetchStreams=x}}const pp="(default)";class bu{constructor(t,a){this.projectId=t,this.database=a||pp}static empty(){return new bu("","")}get isDefaultDatabase(){return this.database===pp}isEqual(t){return t instanceof bu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4="__type__",mR="__max__",_m={mapValue:{}},m4="__vector__",xp="value";function bl(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ty(r)?4:xR(r)?9007199254740991:pR(r)?10:11:jr()}function Bi(r,t){if(r===t)return!0;const a=bl(r);if(a!==bl(t))return!1;switch(a){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return fu(r).isEqual(fu(t));case 3:return(function(i,c){if(typeof i.timestampValue=="string"&&typeof c.timestampValue=="string"&&i.timestampValue.length===c.timestampValue.length)return i.timestampValue===c.timestampValue;const o=gl(i.timestampValue),u=gl(c.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(i,c){return fl(i.bytesValue).isEqual(fl(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(i,c){return Wa(i.geoPointValue.latitude)===Wa(c.geoPointValue.latitude)&&Wa(i.geoPointValue.longitude)===Wa(c.geoPointValue.longitude)})(r,t);case 2:return(function(i,c){if("integerValue"in i&&"integerValue"in c)return Wa(i.integerValue)===Wa(c.integerValue);if("doubleValue"in i&&"doubleValue"in c){const o=Wa(i.doubleValue),u=Wa(c.doubleValue);return o===u?mp(o)===mp(u):isNaN(o)&&isNaN(u)}return!1})(r,t);case 9:return Ad(r.arrayValue.values||[],t.arrayValue.values||[],Bi);case 10:case 11:return(function(i,c){const o=i.mapValue.fields||{},u=c.mapValue.fields||{};if(jN(o)!==jN(u))return!1;for(const m in o)if(o.hasOwnProperty(m)&&(u[m]===void 0||!Bi(o[m],u[m])))return!1;return!0})(r,t);default:return jr()}}function yu(r,t){return(r.values||[]).find((a=>Bi(a,t)))!==void 0}function Rd(r,t){if(r===t)return 0;const a=bl(r),n=bl(t);if(a!==n)return Dr(a,n);switch(a){case 0:case 9007199254740991:return 0;case 1:return Dr(r.booleanValue,t.booleanValue);case 2:return(function(c,o){const u=Wa(c.integerValue||c.doubleValue),m=Wa(o.integerValue||o.doubleValue);return u<m?-1:u>m?1:u===m?0:isNaN(u)?isNaN(m)?0:-1:1})(r,t);case 3:return TN(r.timestampValue,t.timestampValue);case 4:return TN(fu(r),fu(t));case 5:return wb(r.stringValue,t.stringValue);case 6:return(function(c,o){const u=fl(c),m=fl(o);return u.compareTo(m)})(r.bytesValue,t.bytesValue);case 7:return(function(c,o){const u=c.split("/"),m=o.split("/");for(let x=0;x<u.length&&x<m.length;x++){const g=Dr(u[x],m[x]);if(g!==0)return g}return Dr(u.length,m.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,o){const u=Dr(Wa(c.latitude),Wa(o.latitude));return u!==0?u:Dr(Wa(c.longitude),Wa(o.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return SN(r.arrayValue,t.arrayValue);case 10:return(function(c,o){var u,m,x,g;const k=c.fields||{},S=o.fields||{},_=(u=k[xp])===null||u===void 0?void 0:u.arrayValue,I=(m=S[xp])===null||m===void 0?void 0:m.arrayValue,P=Dr(((x=_?.values)===null||x===void 0?void 0:x.length)||0,((g=I?.values)===null||g===void 0?void 0:g.length)||0);return P!==0?P:SN(_,I)})(r.mapValue,t.mapValue);case 11:return(function(c,o){if(c===_m.mapValue&&o===_m.mapValue)return 0;if(c===_m.mapValue)return 1;if(o===_m.mapValue)return-1;const u=c.fields||{},m=Object.keys(u),x=o.fields||{},g=Object.keys(x);m.sort(),g.sort();for(let k=0;k<m.length&&k<g.length;++k){const S=wb(m[k],g[k]);if(S!==0)return S;const _=Rd(u[m[k]],x[g[k]]);if(_!==0)return _}return Dr(m.length,g.length)})(r.mapValue,t.mapValue);default:throw jr()}}function TN(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Dr(r,t);const a=gl(r),n=gl(t),i=Dr(a.seconds,n.seconds);return i!==0?i:Dr(a.nanos,n.nanos)}function SN(r,t){const a=r.values||[],n=t.values||[];for(let i=0;i<a.length&&i<n.length;++i){const c=Rd(a[i],n[i]);if(c)return c}return Dr(a.length,n.length)}function Md(r){return kb(r)}function kb(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(a){const n=gl(a);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(a){return fl(a).toBase64()})(r.bytesValue):"referenceValue"in r?(function(a){return wr.fromName(a).toString()})(r.referenceValue):"geoPointValue"in r?(function(a){return`geo(${a.latitude},${a.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(a){let n="[",i=!0;for(const c of a.values||[])i?i=!1:n+=",",n+=kb(c);return n+"]"})(r.arrayValue):"mapValue"in r?(function(a){const n=Object.keys(a.fields||{}).sort();let i="{",c=!0;for(const o of n)c?c=!1:i+=",",i+=`${o}:${kb(a.fields[o])}`;return i+"}"})(r.mapValue):jr()}function Ym(r){switch(bl(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=px(r);return t?16+Ym(t):16;case 5:return 2*r.stringValue.length;case 6:return fl(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,c)=>i+Ym(c)),0)})(r.arrayValue);case 10:case 11:return(function(n){let i=0;return Sl(n.fields,((c,o)=>{i+=c.length+Ym(o)})),i})(r.mapValue);default:throw jr()}}function EN(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function Nb(r){return!!r&&"integerValue"in r}function Sy(r){return!!r&&"arrayValue"in r}function _N(r){return!!r&&"nullValue"in r}function PN(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Qm(r){return!!r&&"mapValue"in r}function pR(r){var t,a;return((a=(((t=r?.mapValue)===null||t===void 0?void 0:t.fields)||{})[h4])===null||a===void 0?void 0:a.stringValue)===m4}function X0(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const t={mapValue:{fields:{}}};return Sl(r.mapValue.fields,((a,n)=>t.mapValue.fields[a]=X0(n))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let a=0;a<(r.arrayValue.values||[]).length;++a)t.arrayValue.values[a]=X0(r.arrayValue.values[a]);return t}return Object.assign({},r)}function xR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===mR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(t){this.value=t}static empty(){return new Gs({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let a=this.value;for(let n=0;n<t.length-1;++n)if(a=(a.mapValue.fields||{})[t.get(n)],!Qm(a))return null;return a=(a.mapValue.fields||{})[t.lastSegment()],a||null}}set(t,a){this.getFieldsMap(t.popLast())[t.lastSegment()]=X0(a)}setAll(t){let a=Ns.emptyPath(),n={},i=[];t.forEach(((o,u)=>{if(!a.isImmediateParentOf(u)){const m=this.getFieldsMap(a);this.applyChanges(m,n,i),n={},i=[],a=u.popLast()}o?n[u.lastSegment()]=X0(o):i.push(u.lastSegment())}));const c=this.getFieldsMap(a);this.applyChanges(c,n,i)}delete(t){const a=this.field(t.popLast());Qm(a)&&a.mapValue.fields&&delete a.mapValue.fields[t.lastSegment()]}isEqual(t){return Bi(this.value,t.value)}getFieldsMap(t){let a=this.value;a.mapValue.fields||(a.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=a.mapValue.fields[t.get(n)];Qm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},a.mapValue.fields[t.get(n)]=i),a=i}return a.mapValue.fields}applyChanges(t,a,n){Sl(a,((i,c)=>t[i]=c));for(const i of n)delete t[i]}clone(){return new Gs(X0(this.value))}}function p4(r){const t=[];return Sl(r.fields,((a,n)=>{const i=new Ns([a]);if(Qm(n)){const c=p4(n.mapValue).fields;if(c.length===0)t.push(i);else for(const o of c)t.push(i.child(o))}else t.push(i)})),new Tn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(t,a,n,i,c,o,u){this.key=t,this.documentType=a,this.version=n,this.readTime=i,this.createTime=c,this.data=o,this.documentState=u}static newInvalidDocument(t){return new us(t,0,Cr.min(),Cr.min(),Cr.min(),Gs.empty(),0)}static newFoundDocument(t,a,n,i){return new us(t,1,a,Cr.min(),n,i,0)}static newNoDocument(t,a){return new us(t,2,a,Cr.min(),Cr.min(),Gs.empty(),0)}static newUnknownDocument(t,a){return new us(t,3,a,Cr.min(),Cr.min(),Gs.empty(),2)}convertToFoundDocument(t,a){return!this.createTime.isEqual(Cr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=a,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Gs.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Cr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof us&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new us(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(t,a){this.position=t,this.inclusive=a}}function IN(r,t,a){let n=0;for(let i=0;i<r.position.length;i++){const c=t[i],o=r.position[i];if(c.field.isKeyField()?n=wr.comparator(wr.fromName(o.referenceValue),a.key):n=Rd(o,a.data.field(c.field)),c.dir==="desc"&&(n*=-1),n!==0)break}return n}function $N(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let a=0;a<r.position.length;a++)if(!Bi(r.position[a],t.position[a]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(t,a="asc"){this.field=t,this.dir=a}}function gR(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{}class Ja extends x4{constructor(t,a,n){super(),this.field=t,this.op=a,this.value=n}static create(t,a,n){return t.isKeyField()?a==="in"||a==="not-in"?this.createKeyFieldInFilter(t,a,n):new bR(t,a,n):a==="array-contains"?new wR(t,n):a==="in"?new kR(t,n):a==="not-in"?new NR(t,n):a==="array-contains-any"?new jR(t,n):new Ja(t,a,n)}static createKeyFieldInFilter(t,a,n){return a==="in"?new yR(t,n):new vR(t,n)}matches(t){const a=t.data.field(this.field);return this.op==="!="?a!==null&&this.matchesComparison(Rd(a,this.value)):a!==null&&bl(this.value)===bl(a)&&this.matchesComparison(Rd(a,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return jr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gi extends x4{constructor(t,a){super(),this.filters=t,this.op=a,this.ce=null}static create(t,a){return new gi(t,a)}matches(t){return g4(this)?this.filters.find((a=>!a.matches(t)))===void 0:this.filters.find((a=>a.matches(t)))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce(((t,a)=>t.concat(a.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function g4(r){return r.op==="and"}function f4(r){return fR(r)&&g4(r)}function fR(r){for(const t of r.filters)if(t instanceof gi)return!1;return!0}function jb(r){if(r instanceof Ja)return r.field.canonicalString()+r.op.toString()+Md(r.value);if(f4(r))return r.filters.map((t=>jb(t))).join(",");{const t=r.filters.map((a=>jb(a))).join(",");return`${r.op}(${t})`}}function b4(r,t){return r instanceof Ja?(function(n,i){return i instanceof Ja&&n.op===i.op&&n.field.isEqual(i.field)&&Bi(n.value,i.value)})(r,t):r instanceof gi?(function(n,i){return i instanceof gi&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((c,o,u)=>c&&b4(o,i.filters[u])),!0):!1})(r,t):void jr()}function y4(r){return r instanceof Ja?(function(a){return`${a.field.canonicalString()} ${a.op} ${Md(a.value)}`})(r):r instanceof gi?(function(a){return a.op.toString()+" {"+a.getFilters().map(y4).join(" ,")+"}"})(r):"Filter"}class bR extends Ja{constructor(t,a,n){super(t,a,n),this.key=wr.fromName(n.referenceValue)}matches(t){const a=wr.comparator(t.key,this.key);return this.matchesComparison(a)}}class yR extends Ja{constructor(t,a){super(t,"in",a),this.keys=v4("in",a)}matches(t){return this.keys.some((a=>a.isEqual(t.key)))}}class vR extends Ja{constructor(t,a){super(t,"not-in",a),this.keys=v4("not-in",a)}matches(t){return!this.keys.some((a=>a.isEqual(t.key)))}}function v4(r,t){var a;return(((a=t.arrayValue)===null||a===void 0?void 0:a.values)||[]).map((n=>wr.fromName(n.referenceValue)))}class wR extends Ja{constructor(t,a){super(t,"array-contains",a)}matches(t){const a=t.data.field(this.field);return Sy(a)&&yu(a.arrayValue,this.value)}}class kR extends Ja{constructor(t,a){super(t,"in",a)}matches(t){const a=t.data.field(this.field);return a!==null&&yu(this.value.arrayValue,a)}}class NR extends Ja{constructor(t,a){super(t,"not-in",a)}matches(t){if(yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const a=t.data.field(this.field);return a!==null&&!yu(this.value.arrayValue,a)}}class jR extends Ja{constructor(t,a){super(t,"array-contains-any",a)}matches(t){const a=t.data.field(this.field);return!(!Sy(a)||!a.arrayValue.values)&&a.arrayValue.values.some((n=>yu(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(t,a=null,n=[],i=[],c=null,o=null,u=null){this.path=t,this.collectionGroup=a,this.orderBy=n,this.filters=i,this.limit=c,this.startAt=o,this.endAt=u,this.le=null}}function DN(r,t=null,a=[],n=[],i=null,c=null,o=null){return new CR(r,t,a,n,i,c,o)}function Ey(r){const t=Pr(r);if(t.le===null){let a=t.path.canonicalString();t.collectionGroup!==null&&(a+="|cg:"+t.collectionGroup),a+="|f:",a+=t.filters.map((n=>jb(n))).join(","),a+="|ob:",a+=t.orderBy.map((n=>(function(c){return c.field.canonicalString()+c.dir})(n))).join(","),Wu(t.limit)||(a+="|l:",a+=t.limit),t.startAt&&(a+="|lb:",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((n=>Md(n))).join(",")),t.endAt&&(a+="|ub:",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((n=>Md(n))).join(",")),t.le=a}return t.le}function _y(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let a=0;a<r.orderBy.length;a++)if(!gR(r.orderBy[a],t.orderBy[a]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let a=0;a<r.filters.length;a++)if(!b4(r.filters[a],t.filters[a]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!$N(r.startAt,t.startAt)&&$N(r.endAt,t.endAt)}function Cb(r){return wr.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(t,a=null,n=[],i=[],c=null,o="F",u=null,m=null){this.path=t,this.collectionGroup=a,this.explicitOrderBy=n,this.filters=i,this.limit=c,this.limitType=o,this.startAt=u,this.endAt=m,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function TR(r,t,a,n,i,c,o,u){return new Yd(r,t,a,n,i,c,o,u)}function xx(r){return new Yd(r)}function AN(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function w4(r){return r.collectionGroup!==null}function J0(r){const t=Pr(r);if(t.he===null){t.he=[];const a=new Set;for(const c of t.explicitOrderBy)t.he.push(c),a.add(c.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new ns(Ns.comparator);return o.filters.forEach((m=>{m.getFlattenedFilters().forEach((x=>{x.isInequality()&&(u=u.add(x.field))}))})),u})(t).forEach((c=>{a.has(c.canonicalString())||c.isKeyField()||t.he.push(new vu(c,n))})),a.has(Ns.keyField().canonicalString())||t.he.push(new vu(Ns.keyField(),n))}return t.he}function Di(r){const t=Pr(r);return t.Pe||(t.Pe=SR(t,J0(r))),t.Pe}function SR(r,t){if(r.limitType==="F")return DN(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((i=>{const c=i.dir==="desc"?"asc":"desc";return new vu(i.field,c)}));const a=r.endAt?new gp(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new gp(r.startAt.position,r.startAt.inclusive):null;return DN(r.path,r.collectionGroup,t,r.filters,r.limit,a,n)}}function Tb(r,t){const a=r.filters.concat([t]);return new Yd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),a,r.limit,r.limitType,r.startAt,r.endAt)}function fp(r,t,a){return new Yd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,a,r.startAt,r.endAt)}function gx(r,t){return _y(Di(r),Di(t))&&r.limitType===t.limitType}function k4(r){return`${Ey(Di(r))}|lt:${r.limitType}`}function md(r){return`Query(target=${(function(a){let n=a.path.canonicalString();return a.collectionGroup!==null&&(n+=" collectionGroup="+a.collectionGroup),a.filters.length>0&&(n+=`, filters: [${a.filters.map((i=>y4(i))).join(", ")}]`),Wu(a.limit)||(n+=", limit: "+a.limit),a.orderBy.length>0&&(n+=`, orderBy: [${a.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),a.startAt&&(n+=", startAt: ",n+=a.startAt.inclusive?"b:":"a:",n+=a.startAt.position.map((i=>Md(i))).join(",")),a.endAt&&(n+=", endAt: ",n+=a.endAt.inclusive?"a:":"b:",n+=a.endAt.position.map((i=>Md(i))).join(",")),`Target(${n})`})(Di(r))}; limitType=${r.limitType})`}function fx(r,t){return t.isFoundDocument()&&(function(n,i){const c=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(c):wr.isDocumentKey(n.path)?n.path.isEqual(c):n.path.isImmediateParentOf(c)})(r,t)&&(function(n,i){for(const c of J0(n))if(!c.field.isKeyField()&&i.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(n,i){for(const c of n.filters)if(!c.matches(i))return!1;return!0})(r,t)&&(function(n,i){return!(n.startAt&&!(function(o,u,m){const x=IN(o,u,m);return o.inclusive?x<=0:x<0})(n.startAt,J0(n),i)||n.endAt&&!(function(o,u,m){const x=IN(o,u,m);return o.inclusive?x>=0:x>0})(n.endAt,J0(n),i))})(r,t)}function ER(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function N4(r){return(t,a)=>{let n=!1;for(const i of J0(r)){const c=_R(i,t,a);if(c!==0)return c;n=n||i.field.isKeyField()}return 0}}function _R(r,t,a){const n=r.field.isKeyField()?wr.comparator(t.key,a.key):(function(c,o,u){const m=o.data.field(c),x=u.data.field(c);return m!==null&&x!==null?Rd(m,x):jr()})(r.field,t,a);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return jr()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(t,a){this.mapKeyFn=t,this.equalsFn=a,this.inner={},this.innerSize=0}get(t){const a=this.mapKeyFn(t),n=this.inner[a];if(n!==void 0){for(const[i,c]of n)if(this.equalsFn(i,t))return c}}has(t){return this.get(t)!==void 0}set(t,a){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return this.inner[n]=[[t,a]],void this.innerSize++;for(let c=0;c<i.length;c++)if(this.equalsFn(i[c][0],t))return void(i[c]=[t,a]);i.push([t,a]),this.innerSize++}delete(t){const a=this.mapKeyFn(t),n=this.inner[a];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return n.length===1?delete this.inner[a]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Sl(this.inner,((a,n)=>{for(const[i,c]of n)t(i,c)}))}isEmpty(){return i4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=new Oa(wr.comparator);function yo(){return PR}const j4=new Oa(wr.comparator);function H0(...r){let t=j4;for(const a of r)t=t.insert(a.key,a);return t}function C4(r){let t=j4;return r.forEach(((a,n)=>t=t.insert(a,n.overlayedDocument))),t}function tc(){return Z0()}function T4(){return Z0()}function Z0(){return new Nc((r=>r.toString()),((r,t)=>r.isEqual(t)))}const IR=new Oa(wr.comparator),$R=new ns(wr.comparator);function Lr(...r){let t=$R;for(const a of r)t=t.add(a);return t}const DR=new ns(Dr);function AR(){return DR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mp(t)?"-0":t}}function S4(r){return{integerValue:""+r}}function E4(r,t){return lR(t)?S4(t):Py(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this._=void 0}}function RR(r,t,a){return r instanceof wu?(function(i,c){const o={fields:{[c4]:{stringValue:l4},[u4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return c&&Ty(c)&&(c=px(c)),c&&(o.fields[d4]=c),{mapValue:o}})(a,t):r instanceof ku?P4(r,t):r instanceof Nu?I4(r,t):(function(i,c){const o=_4(i,c),u=RN(o)+RN(i.Ie);return Nb(o)&&Nb(i.Ie)?S4(u):Py(i.serializer,u)})(r,t)}function MR(r,t,a){return r instanceof ku?P4(r,t):r instanceof Nu?I4(r,t):a}function _4(r,t){return r instanceof ju?(function(n){return Nb(n)||(function(c){return!!c&&"doubleValue"in c})(n)})(t)?t:{integerValue:0}:null}class wu extends bx{}class ku extends bx{constructor(t){super(),this.elements=t}}function P4(r,t){const a=$4(t);for(const n of r.elements)a.some((i=>Bi(i,n)))||a.push(n);return{arrayValue:{values:a}}}class Nu extends bx{constructor(t){super(),this.elements=t}}function I4(r,t){let a=$4(t);for(const n of r.elements)a=a.filter((i=>!Bi(i,n)));return{arrayValue:{values:a}}}class ju extends bx{constructor(t,a){super(),this.serializer=t,this.Ie=a}}function RN(r){return Wa(r.integerValue||r.doubleValue)}function $4(r){return Sy(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(t,a){this.field=t,this.transform=a}}function FR(r,t){return r.field.isEqual(t.field)&&(function(n,i){return n instanceof ku&&i instanceof ku||n instanceof Nu&&i instanceof Nu?Ad(n.elements,i.elements,Bi):n instanceof ju&&i instanceof ju?Bi(n.Ie,i.Ie):n instanceof wu&&i instanceof wu})(r.transform,t.transform)}class OR{constructor(t,a){this.version=t,this.transformResults=a}}class js{constructor(t,a){this.updateTime=t,this.exists=a}static none(){return new js}static exists(t){return new js(void 0,t)}static updateTime(t){return new js(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Xm(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class yx{}function A4(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new vx(r.key,js.none()):new Gu(r.key,r.data,js.none());{const a=r.data,n=Gs.empty();let i=new ns(Ns.comparator);for(let c of t.fields)if(!i.has(c)){let o=a.field(c);o===null&&c.length>1&&(c=c.popLast(),o=a.field(c)),o===null?n.delete(c):n.set(c,o),i=i.add(c)}return new El(r.key,n,new Tn(i.toArray()),js.none())}}function LR(r,t,a){r instanceof Gu?(function(i,c,o){const u=i.value.clone(),m=FN(i.fieldTransforms,c,o.transformResults);u.setAll(m),c.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(r,t,a):r instanceof El?(function(i,c,o){if(!Xm(i.precondition,c))return void c.convertToUnknownDocument(o.version);const u=FN(i.fieldTransforms,c,o.transformResults),m=c.data;m.setAll(R4(i)),m.setAll(u),c.convertToFoundDocument(o.version,m).setHasCommittedMutations()})(r,t,a):(function(i,c,o){c.convertToNoDocument(o.version).setHasCommittedMutations()})(0,t,a)}function eu(r,t,a,n){return r instanceof Gu?(function(c,o,u,m){if(!Xm(c.precondition,o))return u;const x=c.value.clone(),g=ON(c.fieldTransforms,m,o);return x.setAll(g),o.convertToFoundDocument(o.version,x).setHasLocalMutations(),null})(r,t,a,n):r instanceof El?(function(c,o,u,m){if(!Xm(c.precondition,o))return u;const x=ON(c.fieldTransforms,m,o),g=o.data;return g.setAll(R4(c)),g.setAll(x),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),u===null?null:u.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((k=>k.field)))})(r,t,a,n):(function(c,o,u){return Xm(c.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u})(r,t,a)}function BR(r,t){let a=null;for(const n of r.fieldTransforms){const i=t.data.field(n.field),c=_4(n.transform,i||null);c!=null&&(a===null&&(a=Gs.empty()),a.set(n.field,c))}return a||null}function MN(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Ad(n,i,((c,o)=>FR(c,o)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Gu extends yx{constructor(t,a,n,i=[]){super(),this.key=t,this.value=a,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class El extends yx{constructor(t,a,n,i,c=[]){super(),this.key=t,this.data=a,this.fieldMask=n,this.precondition=i,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function R4(r){const t=new Map;return r.fieldMask.fields.forEach((a=>{if(!a.isEmpty()){const n=r.data.field(a);t.set(a,n)}})),t}function FN(r,t,a){const n=new Map;Yr(r.length===a.length);for(let i=0;i<a.length;i++){const c=r[i],o=c.transform,u=t.data.field(c.field);n.set(c.field,MR(o,u,a[i]))}return n}function ON(r,t,a){const n=new Map;for(const i of r){const c=i.transform,o=a.data.field(i.field);n.set(i.field,RR(c,o,t))}return n}class vx extends yx{constructor(t,a){super(),this.key=t,this.precondition=a,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class M4 extends yx{constructor(t,a){super(),this.key=t,this.precondition=a,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(t,a,n,i){this.batchId=t,this.localWriteTime=a,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,a){const n=a.mutationResults;for(let i=0;i<this.mutations.length;i++){const c=this.mutations[i];c.key.isEqual(t.key)&&LR(c,t,n[i])}}applyToLocalView(t,a){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(a=eu(n,t,a,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(a=eu(n,t,a,this.localWriteTime));return a}applyToLocalDocumentSet(t,a){const n=T4();return this.mutations.forEach((i=>{const c=t.get(i.key),o=c.overlayedDocument;let u=this.applyToLocalView(o,c.mutatedFields);u=a.has(i.key)?null:u;const m=A4(o,u);m!==null&&n.set(i.key,m),o.isValidDocument()||o.convertToNoDocument(Cr.min())})),n}keys(){return this.mutations.reduce(((t,a)=>t.add(a.key)),Lr())}isEqual(t){return this.batchId===t.batchId&&Ad(this.mutations,t.mutations,((a,n)=>MN(a,n)))&&Ad(this.baseMutations,t.baseMutations,((a,n)=>MN(a,n)))}}class Iy{constructor(t,a,n,i){this.batch=t,this.commitVersion=a,this.mutationResults=n,this.docVersions=i}static from(t,a,n){Yr(t.mutations.length===n.length);let i=(function(){return IR})();const c=t.mutations;for(let o=0;o<c.length;o++)i=i.insert(c[o].key,n[o].version);return new Iy(t,a,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(t,a){this.largestBatchId=t,this.mutation=a}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(t,a){this.count=t,this.unchangedNames=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xa,Kr;function F4(r){switch(r){case bt.OK:return jr();case bt.CANCELLED:case bt.UNKNOWN:case bt.DEADLINE_EXCEEDED:case bt.RESOURCE_EXHAUSTED:case bt.INTERNAL:case bt.UNAVAILABLE:case bt.UNAUTHENTICATED:return!1;case bt.INVALID_ARGUMENT:case bt.NOT_FOUND:case bt.ALREADY_EXISTS:case bt.PERMISSION_DENIED:case bt.FAILED_PRECONDITION:case bt.ABORTED:case bt.OUT_OF_RANGE:case bt.UNIMPLEMENTED:case bt.DATA_LOSS:return!0;default:return jr()}}function O4(r){if(r===void 0)return bo("GRPC error has no .code"),bt.UNKNOWN;switch(r){case Xa.OK:return bt.OK;case Xa.CANCELLED:return bt.CANCELLED;case Xa.UNKNOWN:return bt.UNKNOWN;case Xa.DEADLINE_EXCEEDED:return bt.DEADLINE_EXCEEDED;case Xa.RESOURCE_EXHAUSTED:return bt.RESOURCE_EXHAUSTED;case Xa.INTERNAL:return bt.INTERNAL;case Xa.UNAVAILABLE:return bt.UNAVAILABLE;case Xa.UNAUTHENTICATED:return bt.UNAUTHENTICATED;case Xa.INVALID_ARGUMENT:return bt.INVALID_ARGUMENT;case Xa.NOT_FOUND:return bt.NOT_FOUND;case Xa.ALREADY_EXISTS:return bt.ALREADY_EXISTS;case Xa.PERMISSION_DENIED:return bt.PERMISSION_DENIED;case Xa.FAILED_PRECONDITION:return bt.FAILED_PRECONDITION;case Xa.ABORTED:return bt.ABORTED;case Xa.OUT_OF_RANGE:return bt.OUT_OF_RANGE;case Xa.UNIMPLEMENTED:return bt.UNIMPLEMENTED;case Xa.DATA_LOSS:return bt.DATA_LOSS;default:return jr()}}(Kr=Xa||(Xa={}))[Kr.OK=0]="OK",Kr[Kr.CANCELLED=1]="CANCELLED",Kr[Kr.UNKNOWN=2]="UNKNOWN",Kr[Kr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kr[Kr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kr[Kr.NOT_FOUND=5]="NOT_FOUND",Kr[Kr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kr[Kr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kr[Kr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kr[Kr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kr[Kr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kr[Kr.ABORTED=10]="ABORTED",Kr[Kr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kr[Kr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kr[Kr.INTERNAL=13]="INTERNAL",Kr[Kr.UNAVAILABLE=14]="UNAVAILABLE",Kr[Kr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=new dl([4294967295,4294967295],0);function LN(r){const t=a4().encode(r),a=new Q3;return a.update(t),new Uint8Array(a.digest())}function BN(r){const t=new DataView(r.buffer),a=t.getUint32(0,!0),n=t.getUint32(4,!0),i=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new dl([a,n],0),new dl([i,c],0)]}class $y{constructor(t,a,n){if(this.bitmap=t,this.padding=a,this.hashCount=n,a<0||a>=8)throw new q0(`Invalid padding: ${a}`);if(n<0)throw new q0(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new q0(`Invalid hash count: ${n}`);if(t.length===0&&a!==0)throw new q0(`Invalid padding when bitmap length is 0: ${a}`);this.Ee=8*t.length-a,this.de=dl.fromNumber(this.Ee)}Ae(t,a,n){let i=t.add(a.multiply(dl.fromNumber(n)));return i.compare(HR)===1&&(i=new dl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const a=LN(t),[n,i]=BN(a);for(let c=0;c<this.hashCount;c++){const o=this.Ae(n,i,c);if(!this.Re(o))return!1}return!0}static create(t,a,n){const i=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),o=new $y(c,i,a);return n.forEach((u=>o.insert(u))),o}insert(t){if(this.Ee===0)return;const a=LN(t),[n,i]=BN(a);for(let c=0;c<this.hashCount;c++){const o=this.Ae(n,i,c);this.Ve(o)}}Ve(t){const a=Math.floor(t/8),n=t%8;this.bitmap[a]|=1<<n}}class q0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(t,a,n,i,c){this.snapshotVersion=t,this.targetChanges=a,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,a,n){const i=new Map;return i.set(t,Ku.createSynthesizedTargetChangeForCurrentChange(t,a,n)),new wx(Cr.min(),i,new Oa(Dr),yo(),Lr())}}class Ku{constructor(t,a,n,i,c){this.resumeToken=t,this.current=a,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,a,n){return new Ku(n,a,Lr(),Lr(),Lr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(t,a,n,i){this.me=t,this.removedTargetIds=a,this.key=n,this.fe=i}}class L4{constructor(t,a){this.targetId=t,this.ge=a}}class B4{constructor(t,a,n=_s.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=a,this.resumeToken=n,this.cause=i}}class zN{constructor(){this.pe=0,this.ye=VN(),this.we=_s.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Lr(),a=Lr(),n=Lr();return this.ye.forEach(((i,c)=>{switch(c){case 0:t=t.add(i);break;case 2:a=a.add(i);break;case 1:n=n.add(i);break;default:jr()}})),new Ku(this.we,this.Se,t,a,n)}Me(){this.be=!1,this.ye=VN()}xe(t,a){this.be=!0,this.ye=this.ye.insert(t,a)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Yr(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class qR{constructor(t){this.ke=t,this.qe=new Map,this.Qe=yo(),this.$e=Pm(),this.Ue=Pm(),this.Ke=new Oa(Dr)}We(t){for(const a of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(a,t.fe):this.ze(a,t.key,t.fe);for(const a of t.removedTargetIds)this.ze(a,t.key,t.fe)}je(t){this.forEachTarget(t,(a=>{const n=this.He(a);switch(t.state){case 0:this.Je(a)&&n.Ce(t.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(t.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(a);break;case 3:this.Je(a)&&(n.Le(),n.Ce(t.resumeToken));break;case 4:this.Je(a)&&(this.Ye(a),n.Ce(t.resumeToken));break;default:jr()}}))}forEachTarget(t,a){t.targetIds.length>0?t.targetIds.forEach(a):this.qe.forEach(((n,i)=>{this.Je(i)&&a(i)}))}Ze(t){const a=t.targetId,n=t.ge.count,i=this.Xe(a);if(i){const c=i.target;if(Cb(c))if(n===0){const o=new wr(c.path);this.ze(a,o,us.newNoDocument(o,Cr.min()))}else Yr(n===1);else{const o=this.et(a);if(o!==n){const u=this.tt(t),m=u?this.nt(u,t,o):1;if(m!==0){this.Ye(a);const x=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(a,x)}}}}}tt(t){const a=t.ge.unchangedNames;if(!a||!a.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:c=0}=a;let o,u;try{o=fl(n).toUint8Array()}catch(m){if(m instanceof o4)return Dd("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{u=new $y(o,i,c)}catch(m){return Dd(m instanceof q0?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return u.Ee===0?null:u}nt(t,a,n){return a.ge.count===n-this.st(t,a.targetId)?0:2}st(t,a){const n=this.ke.getRemoteKeysForTarget(a);let i=0;return n.forEach((c=>{const o=this.ke.it(),u=`projects/${o.projectId}/databases/${o.database}/documents/${c.path.canonicalString()}`;t.mightContain(u)||(this.ze(a,c,null),i++)})),i}ot(t){const a=new Map;this.qe.forEach(((c,o)=>{const u=this.Xe(o);if(u){if(c.current&&Cb(u.target)){const m=new wr(u.target.path);this._t(m).has(o)||this.ut(o,m)||this.ze(o,m,us.newNoDocument(m,t))}c.ve&&(a.set(o,c.Fe()),c.Me())}}));let n=Lr();this.Ue.forEach(((c,o)=>{let u=!0;o.forEachWhile((m=>{const x=this.Xe(m);return!x||x.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(c))})),this.Qe.forEach(((c,o)=>o.setReadTime(t)));const i=new wx(t,a,this.Ke,this.Qe,n);return this.Qe=yo(),this.$e=Pm(),this.Ue=Pm(),this.Ke=new Oa(Dr),i}Ge(t,a){if(!this.Je(t))return;const n=this.ut(t,a.key)?2:0;this.He(t).xe(a.key,n),this.Qe=this.Qe.insert(a.key,a),this.$e=this.$e.insert(a.key,this._t(a.key).add(t)),this.Ue=this.Ue.insert(a.key,this.ct(a.key).add(t))}ze(t,a,n){if(!this.Je(t))return;const i=this.He(t);this.ut(t,a)?i.xe(a,1):i.Oe(a),this.Ue=this.Ue.insert(a,this.ct(a).delete(t)),this.Ue=this.Ue.insert(a,this.ct(a).add(t)),n&&(this.Qe=this.Qe.insert(a,n))}removeTarget(t){this.qe.delete(t)}et(t){const a=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+a.addedDocuments.size-a.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let a=this.qe.get(t);return a||(a=new zN,this.qe.set(t,a)),a}ct(t){let a=this.Ue.get(t);return a||(a=new ns(Dr),this.Ue=this.Ue.insert(t,a)),a}_t(t){let a=this.$e.get(t);return a||(a=new ns(Dr),this.$e=this.$e.insert(t,a)),a}Je(t){const a=this.Xe(t)!==null;return a||rr("WatchChangeAggregator","Detected inactive target",t),a}Xe(t){const a=this.qe.get(t);return a&&a.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new zN),this.ke.getRemoteKeysForTarget(t).forEach((a=>{this.ze(t,a,null)}))}ut(t,a){return this.ke.getRemoteKeysForTarget(t).has(a)}}function Pm(){return new Oa(wr.comparator)}function VN(){return new Oa(wr.comparator)}const WR={asc:"ASCENDING",desc:"DESCENDING"},GR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KR={and:"AND",or:"OR"};class YR{constructor(t,a){this.databaseId=t,this.useProto3Json=a}}function Sb(r,t){return r.useProto3Json||Wu(t)?t:{value:t}}function bp(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function z4(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function QR(r,t){return bp(r,t.toTimestamp())}function _n(r){return Yr(!!r),Cr.fromTimestamp((function(a){const n=gl(a);return new ja(n.seconds,n.nanos)})(r))}function Dy(r,t){return Eb(r,t).canonicalString()}function Eb(r,t){const a=(function(i){return new Na(["projects",i.projectId,"databases",i.database])})(r).child("documents");return t===void 0?a:a.child(t)}function V4(r){const t=Na.fromString(r);return Yr(K4(t)),t}function yp(r,t){return Dy(r.databaseId,t.path)}function tu(r,t){const a=V4(t);if(a.get(1)!==r.databaseId.projectId)throw new er(bt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+a.get(1)+" vs "+r.databaseId.projectId);if(a.get(3)!==r.databaseId.database)throw new er(bt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+a.get(3)+" vs "+r.databaseId.database);return new wr(H4(a))}function U4(r,t){return Dy(r.databaseId,t)}function XR(r){const t=V4(r);return t.length===4?Na.emptyPath():H4(t)}function _b(r){return new Na(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function H4(r){return Yr(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function UN(r,t,a){return{name:yp(r,t),fields:a.value.mapValue.fields}}function JR(r,t){return"found"in t?(function(n,i){Yr(!!i.found),i.found.name,i.found.updateTime;const c=tu(n,i.found.name),o=_n(i.found.updateTime),u=i.found.createTime?_n(i.found.createTime):Cr.min(),m=new Gs({mapValue:{fields:i.found.fields}});return us.newFoundDocument(c,o,u,m)})(r,t):"missing"in t?(function(n,i){Yr(!!i.missing),Yr(!!i.readTime);const c=tu(n,i.missing),o=_n(i.readTime);return us.newNoDocument(c,o)})(r,t):jr()}function ZR(r,t){let a;if("targetChange"in t){t.targetChange;const n=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:jr()})(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],c=(function(x,g){return x.useProto3Json?(Yr(g===void 0||typeof g=="string"),_s.fromBase64String(g||"")):(Yr(g===void 0||g instanceof Buffer||g instanceof Uint8Array),_s.fromUint8Array(g||new Uint8Array))})(r,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&(function(x){const g=x.code===void 0?bt.UNKNOWN:O4(x.code);return new er(g,x.message||"")})(o);a=new B4(n,i,c,u||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const i=tu(r,n.document.name),c=_n(n.document.updateTime),o=n.document.createTime?_n(n.document.createTime):Cr.min(),u=new Gs({mapValue:{fields:n.document.fields}}),m=us.newFoundDocument(i,c,o,u),x=n.targetIds||[],g=n.removedTargetIds||[];a=new Jm(x,g,m.key,m)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const i=tu(r,n.document),c=n.readTime?_n(n.readTime):Cr.min(),o=us.newNoDocument(i,c),u=n.removedTargetIds||[];a=new Jm([],u,o.key,o)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const i=tu(r,n.document),c=n.removedTargetIds||[];a=new Jm([],c,i,null)}else{if(!("filter"in t))return jr();{t.filter;const n=t.filter;n.targetId;const{count:i=0,unchangedNames:c}=n,o=new UR(i,c),u=n.targetId;a=new L4(u,o)}}return a}function q4(r,t){let a;if(t instanceof Gu)a={update:UN(r,t.key,t.value)};else if(t instanceof vx)a={delete:yp(r,t.key)};else if(t instanceof El)a={update:UN(r,t.key,t.data),updateMask:l7(t.fieldMask)};else{if(!(t instanceof M4))return jr();a={verify:yp(r,t.key)}}return t.fieldTransforms.length>0&&(a.updateTransforms=t.fieldTransforms.map((n=>(function(c,o){const u=o.transform;if(u instanceof wu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ku)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Nu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ju)return{fieldPath:o.field.canonicalString(),increment:u.Ie};throw jr()})(0,n)))),t.precondition.isNone||(a.currentDocument=(function(i,c){return c.updateTime!==void 0?{updateTime:QR(i,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:jr()})(r,t.precondition)),a}function e7(r,t){return r&&r.length>0?(Yr(t!==void 0),r.map((a=>(function(i,c){let o=i.updateTime?_n(i.updateTime):_n(c);return o.isEqual(Cr.min())&&(o=_n(c)),new OR(o,i.transformResults||[])})(a,t)))):[]}function t7(r,t){return{documents:[U4(r,t.path)]}}function r7(r,t){const a={structuredQuery:{}},n=t.path;let i;t.collectionGroup!==null?(i=n,a.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=n.popLast(),a.structuredQuery.from=[{collectionId:n.lastSegment()}]),a.parent=U4(r,i);const c=(function(x){if(x.length!==0)return G4(gi.create(x,"and"))})(t.filters);c&&(a.structuredQuery.where=c);const o=(function(x){if(x.length!==0)return x.map((g=>(function(S){return{field:pd(S.field),direction:n7(S.dir)}})(g)))})(t.orderBy);o&&(a.structuredQuery.orderBy=o);const u=Sb(r,t.limit);return u!==null&&(a.structuredQuery.limit=u),t.startAt&&(a.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(t.startAt)),t.endAt&&(a.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(t.endAt)),{ht:a,parent:i}}function a7(r){let t=XR(r.parent);const a=r.structuredQuery,n=a.from?a.from.length:0;let i=null;if(n>0){Yr(n===1);const g=a.from[0];g.allDescendants?i=g.collectionId:t=t.child(g.collectionId)}let c=[];a.where&&(c=(function(k){const S=W4(k);return S instanceof gi&&f4(S)?S.getFilters():[S]})(a.where));let o=[];a.orderBy&&(o=(function(k){return k.map((S=>(function(I){return new vu(xd(I.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(S)))})(a.orderBy));let u=null;a.limit&&(u=(function(k){let S;return S=typeof k=="object"?k.value:k,Wu(S)?null:S})(a.limit));let m=null;a.startAt&&(m=(function(k){const S=!!k.before,_=k.values||[];return new gp(_,S)})(a.startAt));let x=null;return a.endAt&&(x=(function(k){const S=!k.before,_=k.values||[];return new gp(_,S)})(a.endAt)),TR(t,i,o,c,u,"F",m,x)}function s7(r,t){const a=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return jr()}})(t.purpose);return a==null?null:{"goog-listen-tags":a}}function W4(r){return r.unaryFilter!==void 0?(function(a){switch(a.unaryFilter.op){case"IS_NAN":const n=xd(a.unaryFilter.field);return Ja.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=xd(a.unaryFilter.field);return Ja.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=xd(a.unaryFilter.field);return Ja.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xd(a.unaryFilter.field);return Ja.create(o,"!=",{nullValue:"NULL_VALUE"});default:return jr()}})(r):r.fieldFilter!==void 0?(function(a){return Ja.create(xd(a.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jr()}})(a.fieldFilter.op),a.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(a){return gi.create(a.compositeFilter.filters.map((n=>W4(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return jr()}})(a.compositeFilter.op))})(r):jr()}function n7(r){return WR[r]}function i7(r){return GR[r]}function o7(r){return KR[r]}function pd(r){return{fieldPath:r.canonicalString()}}function xd(r){return Ns.fromServerFormat(r.fieldPath)}function G4(r){return r instanceof Ja?(function(a){if(a.op==="=="){if(PN(a.value))return{unaryFilter:{field:pd(a.field),op:"IS_NAN"}};if(_N(a.value))return{unaryFilter:{field:pd(a.field),op:"IS_NULL"}}}else if(a.op==="!="){if(PN(a.value))return{unaryFilter:{field:pd(a.field),op:"IS_NOT_NAN"}};if(_N(a.value))return{unaryFilter:{field:pd(a.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pd(a.field),op:i7(a.op),value:a.value}}})(r):r instanceof gi?(function(a){const n=a.getFilters().map((i=>G4(i)));return n.length===1?n[0]:{compositeFilter:{op:o7(a.op),filters:n}}})(r):jr()}function l7(r){const t=[];return r.fields.forEach((a=>t.push(a.canonicalString()))),{fieldPaths:t}}function K4(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t,a,n,i,c=Cr.min(),o=Cr.min(),u=_s.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=a,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=m}withSequenceNumber(t){return new nl(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,a){return new nl(this.target,this.targetId,this.purpose,this.sequenceNumber,a,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new nl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new nl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(t){this.Tt=t}}function d7(r){const t=a7({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?fp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(){this.Tn=new h7}addToCollectionParentIndex(t,a){return this.Tn.add(a),wt.resolve()}getCollectionParents(t,a){return wt.resolve(this.Tn.getEntries(a))}addFieldIndex(t,a){return wt.resolve()}deleteFieldIndex(t,a){return wt.resolve()}deleteAllFieldIndexes(t){return wt.resolve()}createTargetIndexes(t,a){return wt.resolve()}getDocumentsMatchingTarget(t,a){return wt.resolve(null)}getIndexType(t,a){return wt.resolve(0)}getFieldIndexes(t,a){return wt.resolve([])}getNextCollectionGroupToUpdate(t){return wt.resolve(null)}getMinOffset(t,a){return wt.resolve(xl.min())}getMinOffsetFromCollectionGroup(t,a){return wt.resolve(xl.min())}updateCollectionGroup(t,a,n){return wt.resolve()}updateIndexEntries(t,a){return wt.resolve()}}class h7{constructor(){this.index={}}add(t){const a=t.lastSegment(),n=t.popLast(),i=this.index[a]||new ns(Na.comparator),c=!i.has(n);return this.index[a]=i.add(n),c}has(t){const a=t.lastSegment(),n=t.popLast(),i=this.index[a];return i&&i.has(n)}getEntries(t){return(this.index[t]||new ns(Na.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Y4=41943040;class nn{static withCacheSize(t){return new nn(t,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,a,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=a,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(Y4,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new Fd(0)}static Kn(){return new Fd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="LruGarbageCollector",m7=1048576;function WN([r,t],[a,n]){const i=Dr(r,a);return i===0?Dr(t,n):i}class p7{constructor(t){this.Hn=t,this.buffer=new ns(WN),this.Jn=0}Yn(){return++this.Jn}Zn(t){const a=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(a);else{const n=this.buffer.last();WN(a,n)<0&&(this.buffer=this.buffer.delete(n).add(a))}}get maxValue(){return this.buffer.last()[0]}}class x7{constructor(t,a,n){this.garbageCollector=t,this.asyncQueue=a,this.localStore=n,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){rr(qN,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(a){Kd(a)?rr(qN,"Ignoring IndexedDB error during garbage collection: ",a):await Gd(a)}await this.er(3e5)}))}}class g7{constructor(t,a){this.tr=t,this.params=a}calculateTargetCount(t,a){return this.tr.nr(t).next((n=>Math.floor(a/100*n)))}nthSequenceNumber(t,a){if(a===0)return wt.resolve(mx.ae);const n=new p7(a);return this.tr.forEachTarget(t,(i=>n.Zn(i.sequenceNumber))).next((()=>this.tr.rr(t,(i=>n.Zn(i))))).next((()=>n.maxValue))}removeTargets(t,a,n){return this.tr.removeTargets(t,a,n)}removeOrphanedDocuments(t,a){return this.tr.removeOrphanedDocuments(t,a)}collect(t,a){return this.params.cacheSizeCollectionThreshold===-1?(rr("LruGarbageCollector","Garbage collection skipped; disabled"),wt.resolve(HN)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(rr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HN):this.ir(t,a)))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,a){let n,i,c,o,u,m,x;const g=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((k=>(k>this.params.maximumSequenceNumbersToCollect?(rr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),i=this.params.maximumSequenceNumbersToCollect):i=k,o=Date.now(),this.nthSequenceNumber(t,i)))).next((k=>(n=k,u=Date.now(),this.removeTargets(t,n,a)))).next((k=>(c=k,m=Date.now(),this.removeOrphanedDocuments(t,n)))).next((k=>(x=Date.now(),hd()<=Or.DEBUG&&rr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-g}ms
	Determined least recently used ${i} in `+(u-o)+`ms
	Removed ${c} targets in `+(m-u)+`ms
	Removed ${k} documents in `+(x-m)+`ms
Total Duration: ${x-g}ms`),wt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:c,documentsRemoved:k}))))}}function f7(r,t){return new g7(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(){this.changes=new Nc((t=>t.toString()),((t,a)=>t.isEqual(a))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,a){this.assertNotApplied(),this.changes.set(t,us.newInvalidDocument(t).setReadTime(a))}getEntry(t,a){this.assertNotApplied();const n=this.changes.get(a);return n!==void 0?wt.resolve(n):this.getFromCache(t,a)}getEntries(t,a){return this.getAllFromCache(t,a)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(t,a){this.overlayedDocument=t,this.mutatedFields=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v7{constructor(t,a,n,i){this.remoteDocumentCache=t,this.mutationQueue=a,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,a){let n=null;return this.documentOverlayCache.getOverlay(t,a).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,a)))).next((i=>(n!==null&&eu(n.mutation,i,Tn.empty(),ja.now()),i)))}getDocuments(t,a){return this.remoteDocumentCache.getEntries(t,a).next((n=>this.getLocalViewOfDocuments(t,n,Lr()).next((()=>n))))}getLocalViewOfDocuments(t,a,n=Lr()){const i=tc();return this.populateOverlays(t,i,a).next((()=>this.computeViews(t,a,i,n).next((c=>{let o=H0();return c.forEach(((u,m)=>{o=o.insert(u,m.overlayedDocument)})),o}))))}getOverlayedDocuments(t,a){const n=tc();return this.populateOverlays(t,n,a).next((()=>this.computeViews(t,a,n,Lr())))}populateOverlays(t,a,n){const i=[];return n.forEach((c=>{a.has(c)||i.push(c)})),this.documentOverlayCache.getOverlays(t,i).next((c=>{c.forEach(((o,u)=>{a.set(o,u)}))}))}computeViews(t,a,n,i){let c=yo();const o=Z0(),u=(function(){return Z0()})();return a.forEach(((m,x)=>{const g=n.get(x.key);i.has(x.key)&&(g===void 0||g.mutation instanceof El)?c=c.insert(x.key,x):g!==void 0?(o.set(x.key,g.mutation.getFieldMask()),eu(g.mutation,x,g.mutation.getFieldMask(),ja.now())):o.set(x.key,Tn.empty())})),this.recalculateAndSaveOverlays(t,c).next((m=>(m.forEach(((x,g)=>o.set(x,g))),a.forEach(((x,g)=>{var k;return u.set(x,new y7(g,(k=o.get(x))!==null&&k!==void 0?k:null))})),u)))}recalculateAndSaveOverlays(t,a){const n=Z0();let i=new Oa(((o,u)=>o-u)),c=Lr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,a).next((o=>{for(const u of o)u.keys().forEach((m=>{const x=a.get(m);if(x===null)return;let g=n.get(m)||Tn.empty();g=u.applyToLocalView(x,g),n.set(m,g);const k=(i.get(u.batchId)||Lr()).add(m);i=i.insert(u.batchId,k)}))})).next((()=>{const o=[],u=i.getReverseIterator();for(;u.hasNext();){const m=u.getNext(),x=m.key,g=m.value,k=T4();g.forEach((S=>{if(!c.has(S)){const _=A4(a.get(S),n.get(S));_!==null&&k.set(S,_),c=c.add(S)}})),o.push(this.documentOverlayCache.saveOverlays(t,x,k))}return wt.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,a){return this.remoteDocumentCache.getEntries(t,a).next((n=>this.recalculateAndSaveOverlays(t,n)))}getDocumentsMatchingQuery(t,a,n,i){return(function(o){return wr.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(a)?this.getDocumentsMatchingDocumentQuery(t,a.path):w4(a)?this.getDocumentsMatchingCollectionGroupQuery(t,a,n,i):this.getDocumentsMatchingCollectionQuery(t,a,n,i)}getNextDocuments(t,a,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,a,n,i).next((c=>{const o=i-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,a,n.largestBatchId,i-c.size):wt.resolve(tc());let u=gu,m=c;return o.next((x=>wt.forEach(x,((g,k)=>(u<k.largestBatchId&&(u=k.largestBatchId),c.get(g)?wt.resolve():this.remoteDocumentCache.getEntry(t,g).next((S=>{m=m.insert(g,S)}))))).next((()=>this.populateOverlays(t,x,c))).next((()=>this.computeViews(t,m,x,Lr()))).next((g=>({batchId:u,changes:C4(g)})))))}))}getDocumentsMatchingDocumentQuery(t,a){return this.getDocument(t,new wr(a)).next((n=>{let i=H0();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(t,a,n,i){const c=a.collectionGroup;let o=H0();return this.indexManager.getCollectionParents(t,c).next((u=>wt.forEach(u,(m=>{const x=(function(k,S){return new Yd(S,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(a,m.child(c));return this.getDocumentsMatchingCollectionQuery(t,x,n,i).next((g=>{g.forEach(((k,S)=>{o=o.insert(k,S)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(t,a,n,i){let c;return this.documentOverlayCache.getOverlaysForCollection(t,a.path,n.largestBatchId).next((o=>(c=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,a,n,c,i)))).next((o=>{c.forEach(((m,x)=>{const g=x.getKey();o.get(g)===null&&(o=o.insert(g,us.newInvalidDocument(g)))}));let u=H0();return o.forEach(((m,x)=>{const g=c.get(m);g!==void 0&&eu(g.mutation,x,Tn.empty(),ja.now()),fx(a,x)&&(u=u.insert(m,x))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,a){return wt.resolve(this.dr.get(a))}saveBundleMetadata(t,a){return this.dr.set(a.id,(function(i){return{id:i.id,version:i.version,createTime:_n(i.createTime)}})(a)),wt.resolve()}getNamedQuery(t,a){return wt.resolve(this.Ar.get(a))}saveNamedQuery(t,a){return this.Ar.set(a.name,(function(i){return{name:i.name,query:d7(i.bundledQuery),readTime:_n(i.readTime)}})(a)),wt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(){this.overlays=new Oa(wr.comparator),this.Rr=new Map}getOverlay(t,a){return wt.resolve(this.overlays.get(a))}getOverlays(t,a){const n=tc();return wt.forEach(a,(i=>this.getOverlay(t,i).next((c=>{c!==null&&n.set(i,c)})))).next((()=>n))}saveOverlays(t,a,n){return n.forEach(((i,c)=>{this.Et(t,a,c)})),wt.resolve()}removeOverlaysForBatchId(t,a,n){const i=this.Rr.get(n);return i!==void 0&&(i.forEach((c=>this.overlays=this.overlays.remove(c))),this.Rr.delete(n)),wt.resolve()}getOverlaysForCollection(t,a,n){const i=tc(),c=a.length+1,o=new wr(a.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const m=u.getNext().value,x=m.getKey();if(!a.isPrefixOf(x.path))break;x.path.length===c&&m.largestBatchId>n&&i.set(m.getKey(),m)}return wt.resolve(i)}getOverlaysForCollectionGroup(t,a,n,i){let c=new Oa(((x,g)=>x-g));const o=this.overlays.getIterator();for(;o.hasNext();){const x=o.getNext().value;if(x.getKey().getCollectionGroup()===a&&x.largestBatchId>n){let g=c.get(x.largestBatchId);g===null&&(g=tc(),c=c.insert(x.largestBatchId,g)),g.set(x.getKey(),x)}}const u=tc(),m=c.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((x,g)=>u.set(x,g))),!(u.size()>=i)););return wt.resolve(u)}Et(t,a,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.Rr.get(i.largestBatchId).delete(n.key);this.Rr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new VR(a,n));let c=this.Rr.get(a);c===void 0&&(c=Lr(),this.Rr.set(a,c)),this.Rr.set(a,c.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(){this.sessionToken=_s.EMPTY_BYTE_STRING}getSessionToken(t){return wt.resolve(this.sessionToken)}setSessionToken(t,a){return this.sessionToken=a,wt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(){this.Vr=new ns(ds.mr),this.gr=new ns(ds.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,a){const n=new ds(t,a);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(t,a){t.forEach((n=>this.addReference(n,a)))}removeReference(t,a){this.wr(new ds(t,a))}Sr(t,a){t.forEach((n=>this.removeReference(n,a)))}br(t){const a=new wr(new Na([])),n=new ds(a,t),i=new ds(a,t+1),c=[];return this.gr.forEachInRange([n,i],(o=>{this.wr(o),c.push(o.key)})),c}Dr(){this.Vr.forEach((t=>this.wr(t)))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const a=new wr(new Na([])),n=new ds(a,t),i=new ds(a,t+1);let c=Lr();return this.gr.forEachInRange([n,i],(o=>{c=c.add(o.key)})),c}containsKey(t){const a=new ds(t,0),n=this.Vr.firstAfterOrEqual(a);return n!==null&&t.isEqual(n.key)}}class ds{constructor(t,a){this.key=t,this.Cr=a}static mr(t,a){return wr.comparator(t.key,a.key)||Dr(t.Cr,a.Cr)}static pr(t,a){return Dr(t.Cr,a.Cr)||wr.comparator(t.key,a.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(t,a){this.indexManager=t,this.referenceDelegate=a,this.mutationQueue=[],this.Fr=1,this.Mr=new ns(ds.mr)}checkEmpty(t){return wt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,a,n,i){const c=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zR(c,a,n,i);this.mutationQueue.push(o);for(const u of i)this.Mr=this.Mr.add(new ds(u.key,c)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return wt.resolve(o)}lookupMutationBatch(t,a){return wt.resolve(this.Or(a))}getNextMutationBatchAfterBatchId(t,a){const n=a+1,i=this.Nr(n),c=i<0?0:i;return wt.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return wt.resolve(this.mutationQueue.length===0?Cy:this.Fr-1)}getAllMutationBatches(t){return wt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,a){const n=new ds(a,0),i=new ds(a,Number.POSITIVE_INFINITY),c=[];return this.Mr.forEachInRange([n,i],(o=>{const u=this.Or(o.Cr);c.push(u)})),wt.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,a){let n=new ns(Dr);return a.forEach((i=>{const c=new ds(i,0),o=new ds(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([c,o],(u=>{n=n.add(u.Cr)}))})),wt.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(t,a){const n=a.path,i=n.length+1;let c=n;wr.isDocumentKey(c)||(c=c.child(""));const o=new ds(new wr(c),0);let u=new ns(Dr);return this.Mr.forEachWhile((m=>{const x=m.key.path;return!!n.isPrefixOf(x)&&(x.length===i&&(u=u.add(m.Cr)),!0)}),o),wt.resolve(this.Br(u))}Br(t){const a=[];return t.forEach((n=>{const i=this.Or(n);i!==null&&a.push(i)})),a}removeMutationBatch(t,a){Yr(this.Lr(a.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Mr;return wt.forEach(a.mutations,(i=>{const c=new ds(i.key,a.batchId);return n=n.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Mr=n}))}qn(t){}containsKey(t,a){const n=new ds(a,0),i=this.Mr.firstAfterOrEqual(n);return wt.resolve(a.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,wt.resolve()}Lr(t,a){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const a=this.Nr(t);return a<0||a>=this.mutationQueue.length?null:this.mutationQueue[a]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(t){this.kr=t,this.docs=(function(){return new Oa(wr.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,a){const n=a.key,i=this.docs.get(n),c=i?i.size:0,o=this.kr(a);return this.docs=this.docs.insert(n,{document:a.mutableCopy(),size:o}),this.size+=o-c,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const a=this.docs.get(t);a&&(this.docs=this.docs.remove(t),this.size-=a.size)}getEntry(t,a){const n=this.docs.get(a);return wt.resolve(n?n.document.mutableCopy():us.newInvalidDocument(a))}getEntries(t,a){let n=yo();return a.forEach((i=>{const c=this.docs.get(i);n=n.insert(i,c?c.document.mutableCopy():us.newInvalidDocument(i))})),wt.resolve(n)}getDocumentsMatchingQuery(t,a,n,i){let c=yo();const o=a.path,u=new wr(o.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(u);for(;m.hasNext();){const{key:x,value:{document:g}}=m.getNext();if(!o.isPrefixOf(x.path))break;x.path.length>o.length+1||sR(aR(g),n)<=0||(i.has(g.key)||fx(a,g))&&(c=c.insert(g.key,g.mutableCopy()))}return wt.resolve(c)}getAllFromCollectionGroup(t,a,n,i){jr()}qr(t,a){return wt.forEach(this.docs,(n=>a(n)))}newChangeBuffer(t){return new T7(this)}getSize(t){return wt.resolve(this.size)}}class T7 extends b7{constructor(t){super(),this.Ir=t}applyChanges(t){const a=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?a.push(this.Ir.addEntry(t,i)):this.Ir.removeEntry(n)})),wt.waitFor(a)}getFromCache(t,a){return this.Ir.getEntry(t,a)}getAllFromCache(t,a){return this.Ir.getEntries(t,a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(t){this.persistence=t,this.Qr=new Nc((a=>Ey(a)),_y),this.lastRemoteSnapshotVersion=Cr.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Ay,this.targetCount=0,this.Kr=Fd.Un()}forEachTarget(t,a){return this.Qr.forEach(((n,i)=>a(i))),wt.resolve()}getLastRemoteSnapshotVersion(t){return wt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return wt.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),wt.resolve(this.highestTargetId)}setTargetsMetadata(t,a,n){return n&&(this.lastRemoteSnapshotVersion=n),a>this.$r&&(this.$r=a),wt.resolve()}zn(t){this.Qr.set(t.target,t);const a=t.targetId;a>this.highestTargetId&&(this.Kr=new Fd(a),this.highestTargetId=a),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,a){return this.zn(a),this.targetCount+=1,wt.resolve()}updateTargetData(t,a){return this.zn(a),wt.resolve()}removeTargetData(t,a){return this.Qr.delete(a.target),this.Ur.br(a.targetId),this.targetCount-=1,wt.resolve()}removeTargets(t,a,n){let i=0;const c=[];return this.Qr.forEach(((o,u)=>{u.sequenceNumber<=a&&n.get(u.targetId)===null&&(this.Qr.delete(o),c.push(this.removeMatchingKeysForTargetId(t,u.targetId)),i++)})),wt.waitFor(c).next((()=>i))}getTargetCount(t){return wt.resolve(this.targetCount)}getTargetData(t,a){const n=this.Qr.get(a)||null;return wt.resolve(n)}addMatchingKeys(t,a,n){return this.Ur.yr(a,n),wt.resolve()}removeMatchingKeys(t,a,n){this.Ur.Sr(a,n);const i=this.persistence.referenceDelegate,c=[];return i&&a.forEach((o=>{c.push(i.markPotentiallyOrphaned(t,o))})),wt.waitFor(c)}removeMatchingKeysForTargetId(t,a){return this.Ur.br(a),wt.resolve()}getMatchingKeysForTargetId(t,a){const n=this.Ur.vr(a);return wt.resolve(n)}containsKey(t,a){return wt.resolve(this.Ur.containsKey(a))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(t,a){this.Wr={},this.overlays={},this.Gr=new mx(0),this.zr=!1,this.zr=!0,this.jr=new N7,this.referenceDelegate=t(this),this.Hr=new S7(this),this.indexManager=new u7,this.remoteDocumentCache=(function(i){return new C7(i)})((n=>this.referenceDelegate.Jr(n))),this.serializer=new c7(a),this.Yr=new w7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let a=this.overlays[t.toKey()];return a||(a=new k7,this.overlays[t.toKey()]=a),a}getMutationQueue(t,a){let n=this.Wr[t.toKey()];return n||(n=new j7(a,this.referenceDelegate),this.Wr[t.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,a,n){rr("MemoryPersistence","Starting transaction:",t);const i=new E7(this.Gr.next());return this.referenceDelegate.Zr(),n(i).next((c=>this.referenceDelegate.Xr(i).next((()=>c)))).toPromise().then((c=>(i.raiseOnCommittedEvent(),c)))}ei(t,a){return wt.or(Object.values(this.Wr).map((n=>()=>n.containsKey(t,a))))}}class E7 extends iR{constructor(t){super(),this.currentSequenceNumber=t}}class Ry{constructor(t){this.persistence=t,this.ti=new Ay,this.ni=null}static ri(t){return new Ry(t)}get ii(){if(this.ni)return this.ni;throw jr()}addReference(t,a,n){return this.ti.addReference(n,a),this.ii.delete(n.toString()),wt.resolve()}removeReference(t,a,n){return this.ti.removeReference(n,a),this.ii.add(n.toString()),wt.resolve()}markPotentiallyOrphaned(t,a){return this.ii.add(a.toString()),wt.resolve()}removeTarget(t,a){this.ti.br(a.targetId).forEach((i=>this.ii.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,a.targetId).next((i=>{i.forEach((c=>this.ii.add(c.toString())))})).next((()=>n.removeTargetData(t,a)))}Zr(){this.ni=new Set}Xr(t){const a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wt.forEach(this.ii,(n=>{const i=wr.fromPath(n);return this.si(t,i).next((c=>{c||a.removeEntry(i,Cr.min())}))})).next((()=>(this.ni=null,a.apply(t))))}updateLimboDocument(t,a){return this.si(t,a).next((n=>{n?this.ii.delete(a.toString()):this.ii.add(a.toString())}))}Jr(t){return 0}si(t,a){return wt.or([()=>wt.resolve(this.ti.containsKey(a)),()=>this.persistence.getTargetCache().containsKey(t,a),()=>this.persistence.ei(t,a)])}}class vp{constructor(t,a){this.persistence=t,this.oi=new Nc((n=>cR(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=f7(this,a)}static ri(t,a){return new vp(t,a)}Zr(){}Xr(t){return wt.resolve()}forEachTarget(t,a){return this.persistence.getTargetCache().forEachTarget(t,a)}nr(t){const a=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next((n=>a.next((i=>n+i))))}sr(t){let a=0;return this.rr(t,(n=>{a++})).next((()=>a))}rr(t,a){return wt.forEach(this.oi,((n,i)=>this.ar(t,n,i).next((c=>c?wt.resolve():a(i)))))}removeTargets(t,a,n){return this.persistence.getTargetCache().removeTargets(t,a,n)}removeOrphanedDocuments(t,a){let n=0;const i=this.persistence.getRemoteDocumentCache(),c=i.newChangeBuffer();return i.qr(t,(o=>this.ar(t,o,a).next((u=>{u||(n++,c.removeEntry(o,Cr.min()))})))).next((()=>c.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,a){return this.oi.set(a,t.currentSequenceNumber),wt.resolve()}removeTarget(t,a){const n=a.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,a,n){return this.oi.set(n,t.currentSequenceNumber),wt.resolve()}removeReference(t,a,n){return this.oi.set(n,t.currentSequenceNumber),wt.resolve()}updateLimboDocument(t,a){return this.oi.set(a,t.currentSequenceNumber),wt.resolve()}Jr(t){let a=t.key.toString().length;return t.isFoundDocument()&&(a+=Ym(t.data.value)),a}ar(t,a,n){return wt.or([()=>this.persistence.ei(t,a),()=>this.persistence.getTargetCache().containsKey(t,a),()=>{const i=this.oi.get(a);return wt.resolve(i!==void 0&&i>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(t,a,n,i){this.targetId=t,this.fromCache=a,this.Hi=n,this.Ji=i}static Yi(t,a){let n=Lr(),i=Lr();for(const c of a.docChanges)switch(c.type){case 0:n=n.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}return new My(t,a.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=(function(){return iD()?8:oR(zs())>0?6:4})()}initialize(t,a){this.ns=t,this.indexManager=a,this.Zi=!0}getDocumentsMatchingQuery(t,a,n,i){const c={result:null};return this.rs(t,a).next((o=>{c.result=o})).next((()=>{if(!c.result)return this.ss(t,a,i,n).next((o=>{c.result=o}))})).next((()=>{if(c.result)return;const o=new _7;return this._s(t,a,o).next((u=>{if(c.result=u,this.Xi)return this.us(t,a,o,u.size)}))})).next((()=>c.result))}us(t,a,n,i){return n.documentReadCount<this.es?(hd()<=Or.DEBUG&&rr("QueryEngine","SDK will not create cache indexes for query:",md(a),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),wt.resolve()):(hd()<=Or.DEBUG&&rr("QueryEngine","Query:",md(a),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ts*i?(hd()<=Or.DEBUG&&rr("QueryEngine","The SDK decides to create cache indexes for query:",md(a),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Di(a))):wt.resolve())}rs(t,a){if(AN(a))return wt.resolve(null);let n=Di(a);return this.indexManager.getIndexType(t,n).next((i=>i===0?null:(a.limit!==null&&i===1&&(a=fp(a,null,"F"),n=Di(a)),this.indexManager.getDocumentsMatchingTarget(t,n).next((c=>{const o=Lr(...c);return this.ns.getDocuments(t,o).next((u=>this.indexManager.getMinOffset(t,n).next((m=>{const x=this.cs(a,u);return this.ls(a,x,o,m.readTime)?this.rs(t,fp(a,null,"F")):this.hs(t,x,a,m)}))))})))))}ss(t,a,n,i){return AN(a)||i.isEqual(Cr.min())?wt.resolve(null):this.ns.getDocuments(t,n).next((c=>{const o=this.cs(a,c);return this.ls(a,o,n,i)?wt.resolve(null):(hd()<=Or.DEBUG&&rr("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),md(a)),this.hs(t,o,a,rR(i,gu)).next((u=>u)))}))}cs(t,a){let n=new ns(N4(t));return a.forEach(((i,c)=>{fx(t,c)&&(n=n.add(c))})),n}ls(t,a,n,i){if(t.limit===null)return!1;if(n.size!==a.size)return!0;const c=t.limitType==="F"?a.last():a.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(i)>0)}_s(t,a,n){return hd()<=Or.DEBUG&&rr("QueryEngine","Using full collection scan to execute query:",md(a)),this.ns.getDocumentsMatchingQuery(t,a,xl.min(),n)}hs(t,a,n,i){return this.ns.getDocumentsMatchingQuery(t,n,i).next((c=>(a.forEach((o=>{c=c.insert(o.key,o)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="LocalStore",I7=3e8;class $7{constructor(t,a,n,i){this.persistence=t,this.Ps=a,this.serializer=i,this.Ts=new Oa(Dr),this.Is=new Nc((c=>Ey(c)),_y),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(n)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new v7(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(a=>t.collect(a,this.Ts)))}}function D7(r,t,a,n){return new $7(r,t,a,n)}async function X4(r,t){const a=Pr(r);return await a.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return a.mutationQueue.getAllMutationBatches(n).next((c=>(i=c,a.As(t),a.mutationQueue.getAllMutationBatches(n)))).next((c=>{const o=[],u=[];let m=Lr();for(const x of i){o.push(x.batchId);for(const g of x.mutations)m=m.add(g.key)}for(const x of c){u.push(x.batchId);for(const g of x.mutations)m=m.add(g.key)}return a.localDocuments.getDocuments(n,m).next((x=>({Rs:x,removedBatchIds:o,addedBatchIds:u})))}))}))}function A7(r,t){const a=Pr(r);return a.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=t.batch.keys(),c=a.ds.newChangeBuffer({trackRemovals:!0});return(function(u,m,x,g){const k=x.batch,S=k.keys();let _=wt.resolve();return S.forEach((I=>{_=_.next((()=>g.getEntry(m,I))).next((P=>{const b=x.docVersions.get(I);Yr(b!==null),P.version.compareTo(b)<0&&(k.applyToRemoteDocument(P,x),P.isValidDocument()&&(P.setReadTime(x.commitVersion),g.addEntry(P)))}))})),_.next((()=>u.mutationQueue.removeMutationBatch(m,k)))})(a,n,t,c).next((()=>c.apply(n))).next((()=>a.mutationQueue.performConsistencyCheck(n))).next((()=>a.documentOverlayCache.removeOverlaysForBatchId(n,i,t.batch.batchId))).next((()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let m=Lr();for(let x=0;x<u.mutationResults.length;++x)u.mutationResults[x].transformResults.length>0&&(m=m.add(u.batch.mutations[x].key));return m})(t)))).next((()=>a.localDocuments.getDocuments(n,i)))}))}function J4(r){const t=Pr(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(a=>t.Hr.getLastRemoteSnapshotVersion(a)))}function R7(r,t){const a=Pr(r),n=t.snapshotVersion;let i=a.Ts;return a.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const o=a.ds.newChangeBuffer({trackRemovals:!0});i=a.Ts;const u=[];t.targetChanges.forEach(((g,k)=>{const S=i.get(k);if(!S)return;u.push(a.Hr.removeMatchingKeys(c,g.removedDocuments,k).next((()=>a.Hr.addMatchingKeys(c,g.addedDocuments,k))));let _=S.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(k)!==null?_=_.withResumeToken(_s.EMPTY_BYTE_STRING,Cr.min()).withLastLimboFreeSnapshotVersion(Cr.min()):g.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(g.resumeToken,n)),i=i.insert(k,_),(function(P,b,B){return P.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=I7?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(S,_,g)&&u.push(a.Hr.updateTargetData(c,_))}));let m=yo(),x=Lr();if(t.documentUpdates.forEach((g=>{t.resolvedLimboDocuments.has(g)&&u.push(a.persistence.referenceDelegate.updateLimboDocument(c,g))})),u.push(M7(c,o,t.documentUpdates).next((g=>{m=g.Vs,x=g.fs}))),!n.isEqual(Cr.min())){const g=a.Hr.getLastRemoteSnapshotVersion(c).next((k=>a.Hr.setTargetsMetadata(c,c.currentSequenceNumber,n)));u.push(g)}return wt.waitFor(u).next((()=>o.apply(c))).next((()=>a.localDocuments.getLocalViewOfDocuments(c,m,x))).next((()=>m))})).then((c=>(a.Ts=i,c)))}function M7(r,t,a){let n=Lr(),i=Lr();return a.forEach((c=>n=n.add(c))),t.getEntries(r,n).next((c=>{let o=yo();return a.forEach(((u,m)=>{const x=c.get(u);m.isFoundDocument()!==x.isFoundDocument()&&(i=i.add(u)),m.isNoDocument()&&m.version.isEqual(Cr.min())?(t.removeEntry(u,m.readTime),o=o.insert(u,m)):!x.isValidDocument()||m.version.compareTo(x.version)>0||m.version.compareTo(x.version)===0&&x.hasPendingWrites?(t.addEntry(m),o=o.insert(u,m)):rr(Fy,"Ignoring outdated watch update for ",u,". Current version:",x.version," Watch version:",m.version)})),{Vs:o,fs:i}}))}function F7(r,t){const a=Pr(r);return a.persistence.runTransaction("Get next mutation batch","readonly",(n=>(t===void 0&&(t=Cy),a.mutationQueue.getNextMutationBatchAfterBatchId(n,t))))}function O7(r,t){const a=Pr(r);return a.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return a.Hr.getTargetData(n,t).next((c=>c?(i=c,wt.resolve(i)):a.Hr.allocateTargetId(n).next((o=>(i=new nl(t,o,"TargetPurposeListen",n.currentSequenceNumber),a.Hr.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=a.Ts.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(a.Ts=a.Ts.insert(n.targetId,n),a.Is.set(t,n.targetId)),n}))}async function Pb(r,t,a){const n=Pr(r),i=n.Ts.get(t),c=a?"readwrite":"readwrite-primary";try{a||await n.persistence.runTransaction("Release target",c,(o=>n.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Kd(o))throw o;rr(Fy,`Failed to update sequence numbers for target ${t}: ${o}`)}n.Ts=n.Ts.remove(t),n.Is.delete(i.target)}function GN(r,t,a){const n=Pr(r);let i=Cr.min(),c=Lr();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(m,x,g){const k=Pr(m),S=k.Is.get(g);return S!==void 0?wt.resolve(k.Ts.get(S)):k.Hr.getTargetData(x,g)})(n,o,Di(t)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,n.Hr.getMatchingKeysForTargetId(o,u.targetId).next((m=>{c=m}))})).next((()=>n.Ps.getDocumentsMatchingQuery(o,t,a?i:Cr.min(),a?c:Lr()))).next((u=>(L7(n,ER(t),u),{documents:u,gs:c})))))}function L7(r,t,a){let n=r.Es.get(t)||Cr.min();a.forEach(((i,c)=>{c.readTime.compareTo(n)>0&&(n=c.readTime)})),r.Es.set(t,n)}class KN{constructor(){this.activeTargetIds=AR()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class B7{constructor(){this.ho=new KN,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,a,n){}addLocalQueryTarget(t,a=!0){return a&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,a,n){this.Po[t]=a}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new KN,Promise.resolve()}handleUserChange(t,a,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="ConnectivityMonitor";class QN{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){rr(YN,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){rr(YN,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Im=null;function Ib(){return Im===null?Im=(function(){return 268435456+Math.round(2147483648*Math.random())})():Im++,"0x"+Im.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="RestConnection",V7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class U7{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const a=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=a+"://"+t.host,this.yo=`projects/${n}/databases/${i}`,this.wo=this.databaseId.database===pp?`project_id=${n}`:`project_id=${n}&database_id=${i}`}So(t,a,n,i,c){const o=Ib(),u=this.bo(t,a.toUriEncodedString());rr(Af,`Sending RPC '${t}' ${o}:`,u,n);const m={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(m,i,c),this.vo(t,u,m,n).then((x=>(rr(Af,`Received RPC '${t}' ${o}: `,x),x)),(x=>{throw Dd(Af,`RPC '${t}' ${o} failed with error: `,x,"url: ",u,"request:",n),x}))}Co(t,a,n,i,c,o){return this.So(t,a,n,i,c)}Do(t,a,n){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wd})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),a&&a.headers.forEach(((i,c)=>t[c]=i)),n&&n.headers.forEach(((i,c)=>t[c]=i))}bo(t,a){const n=V7[t];return`${this.po}/v1/${a}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="WebChannelConnection";class q7 extends U7{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,a,n,i){const c=Ib();return new Promise(((o,u)=>{const m=new X3;m.setWithCredentials(!0),m.listenOnce(J3.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Km.NO_ERROR:const g=m.getResponseJson();rr(Rs,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(g)),o(g);break;case Km.TIMEOUT:rr(Rs,`RPC '${t}' ${c} timed out`),u(new er(bt.DEADLINE_EXCEEDED,"Request time out"));break;case Km.HTTP_ERROR:const k=m.getStatus();if(rr(Rs,`RPC '${t}' ${c} failed with status:`,k,"response text:",m.getResponseText()),k>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const _=S?.error;if(_&&_.status&&_.message){const I=(function(b){const B=b.toLowerCase().replace(/_/g,"-");return Object.values(bt).indexOf(B)>=0?B:bt.UNKNOWN})(_.status);u(new er(I,_.message))}else u(new er(bt.UNKNOWN,"Server responded with status "+m.getStatus()))}else u(new er(bt.UNAVAILABLE,"Connection failed."));break;default:jr()}}finally{rr(Rs,`RPC '${t}' ${c} completed.`)}}));const x=JSON.stringify(i);rr(Rs,`RPC '${t}' ${c} sending request:`,i),m.send(a,"POST",x,n,15)}))}Wo(t,a,n){const i=Ib(),c=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=t4(),u=e4(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(m.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Do(m.initMessageHeaders,a,n),m.encodeInitMessageHeaders=!0;const g=c.join("");rr(Rs,`Creating RPC '${t}' stream ${i}: ${g}`,m);const k=o.createWebChannel(g,m);let S=!1,_=!1;const I=new H7({Fo:b=>{_?rr(Rs,`Not sending because RPC '${t}' stream ${i} is closed:`,b):(S||(rr(Rs,`Opening RPC '${t}' stream ${i} transport.`),k.open(),S=!0),rr(Rs,`RPC '${t}' stream ${i} sending:`,b),k.send(b))},Mo:()=>k.close()}),P=(b,B,L)=>{b.listen(B,(O=>{try{L(O)}catch(te){setTimeout((()=>{throw te}),0)}}))};return P(k,U0.EventType.OPEN,(()=>{_||(rr(Rs,`RPC '${t}' stream ${i} transport opened.`),I.Qo())})),P(k,U0.EventType.CLOSE,(()=>{_||(_=!0,rr(Rs,`RPC '${t}' stream ${i} transport closed`),I.Uo())})),P(k,U0.EventType.ERROR,(b=>{_||(_=!0,Dd(Rs,`RPC '${t}' stream ${i} transport errored:`,b),I.Uo(new er(bt.UNAVAILABLE,"The operation could not be completed")))})),P(k,U0.EventType.MESSAGE,(b=>{var B;if(!_){const L=b.data[0];Yr(!!L);const O=L,te=O?.error||((B=O[0])===null||B===void 0?void 0:B.error);if(te){rr(Rs,`RPC '${t}' stream ${i} received error:`,te);const ne=te.status;let be=(function(F){const v=Xa[F];if(v!==void 0)return O4(v)})(ne),H=te.message;be===void 0&&(be=bt.INTERNAL,H="Unknown error status: "+ne+" with message "+te.message),_=!0,I.Uo(new er(be,H)),k.close()}else rr(Rs,`RPC '${t}' stream ${i} received:`,L),I.Ko(L)}})),P(u,Z3.STAT_EVENT,(b=>{b.stat===vb.PROXY?rr(Rs,`RPC '${t}' stream ${i} detected buffering proxy`):b.stat===vb.NOPROXY&&rr(Rs,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{I.$o()}),0),I}}function Rf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(r){return new YR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(t,a,n=1e3,i=1.5,c=6e4){this.Ti=t,this.timerId=a,this.Go=n,this.zo=i,this.jo=c,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const a=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),i=Math.max(0,a-n);i>0&&rr("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${a} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,(()=>(this.Yo=Date.now(),t()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="PersistentStream";class Z4{constructor(t,a,n,i,c,o,u,m){this.Ti=t,this.n_=n,this.r_=i,this.connection=c,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=m,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Oy(t,a)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,a){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():a&&a.code===bt.RESOURCE_EXHAUSTED?(bo(a.toString()),bo("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):a&&a.code===bt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(a)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),a=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.i_===a&&this.V_(n,i)}),(n=>{t((()=>{const i=new er(bt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.m_(i)}))}))}V_(t,a){const n=this.R_(this.i_);this.stream=this.f_(t,a),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((i=>{n((()=>this.m_(i)))})),this.stream.onMessage((i=>{n((()=>++this.__==1?this.g_(i):this.onNext(i)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(t){return rr(XN,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return a=>{this.Ti.enqueueAndForget((()=>this.i_===t?a():(rr(XN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class W7 extends Z4{constructor(t,a,n,i,c,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",a,n,i,o),this.serializer=c}f_(t,a){return this.connection.Wo("Listen",t,a)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const a=ZR(this.serializer,t),n=(function(c){if(!("targetChange"in c))return Cr.min();const o=c.targetChange;return o.targetIds&&o.targetIds.length?Cr.min():o.readTime?_n(o.readTime):Cr.min()})(t);return this.listener.p_(a,n)}y_(t){const a={};a.database=_b(this.serializer),a.addTarget=(function(c,o){let u;const m=o.target;if(u=Cb(m)?{documents:t7(c,m)}:{query:r7(c,m).ht},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=z4(c,o.resumeToken);const x=Sb(c,o.expectedCount);x!==null&&(u.expectedCount=x)}else if(o.snapshotVersion.compareTo(Cr.min())>0){u.readTime=bp(c,o.snapshotVersion.toTimestamp());const x=Sb(c,o.expectedCount);x!==null&&(u.expectedCount=x)}return u})(this.serializer,t);const n=s7(this.serializer,t);n&&(a.labels=n),this.I_(a)}w_(t){const a={};a.database=_b(this.serializer),a.removeTarget=t,this.I_(a)}}class G7 extends Z4{constructor(t,a,n,i,c,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",a,n,i,o),this.serializer=c}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,a){return this.connection.Wo("Write",t,a)}g_(t){return Yr(!!t.streamToken),this.lastStreamToken=t.streamToken,Yr(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Yr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const a=e7(t.writeResults,t.commitTime),n=_n(t.commitTime);return this.listener.v_(n,a)}C_(){const t={};t.database=_b(this.serializer),this.I_(t)}b_(t){const a={streamToken:this.lastStreamToken,writes:t.map((n=>q4(this.serializer,n)))};this.I_(a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{}class Y7 extends K7{constructor(t,a,n,i){super(),this.authCredentials=t,this.appCheckCredentials=a,this.connection=n,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new er(bt.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,a,n,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,o])=>this.connection.So(t,Eb(a,n),i,c,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new er(bt.UNKNOWN,c.toString())}))}Co(t,a,n,i,c){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Co(t,Eb(a,n),i,o,u,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new er(bt.UNKNOWN,o.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class Q7{constructor(t,a){this.asyncQueue=t,this.onlineStateHandler=a,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const a=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(bo(a),this.N_=!1):rr("OnlineStateTracker",a)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc="RemoteStore";class X7{constructor(t,a,n,i,c){this.localStore=t,this.datastore=a,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=c,this.z_.To((o=>{n.enqueueAndForget((async()=>{jc(this)&&(rr(uc,"Restarting streams for network reachability change."),await(async function(m){const x=Pr(m);x.W_.add(4),await Yu(x),x.j_.set("Unknown"),x.W_.delete(4),await Nx(x)})(this))}))})),this.j_=new Q7(n,i)}}async function Nx(r){if(jc(r))for(const t of r.G_)await t(!0)}async function Yu(r){for(const t of r.G_)await t(!1)}function eC(r,t){const a=Pr(r);a.K_.has(t.targetId)||(a.K_.set(t.targetId,t),Vy(a)?zy(a):Qd(a).c_()&&By(a,t))}function Ly(r,t){const a=Pr(r),n=Qd(a);a.K_.delete(t),n.c_()&&tC(a,t),a.K_.size===0&&(n.c_()?n.P_():jc(a)&&a.j_.set("Unknown"))}function By(r,t){if(r.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Cr.min())>0){const a=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(a)}Qd(r).y_(t)}function tC(r,t){r.H_.Ne(t),Qd(r).w_(t)}function zy(r){r.H_=new qR({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>r.K_.get(t)||null,it:()=>r.datastore.serializer.databaseId}),Qd(r).start(),r.j_.B_()}function Vy(r){return jc(r)&&!Qd(r).u_()&&r.K_.size>0}function jc(r){return Pr(r).W_.size===0}function rC(r){r.H_=void 0}async function J7(r){r.j_.set("Online")}async function Z7(r){r.K_.forEach(((t,a)=>{By(r,t)}))}async function eM(r,t){rC(r),Vy(r)?(r.j_.q_(t),zy(r)):r.j_.set("Unknown")}async function tM(r,t,a){if(r.j_.set("Online"),t instanceof B4&&t.state===2&&t.cause)try{await(async function(i,c){const o=c.cause;for(const u of c.targetIds)i.K_.has(u)&&(await i.remoteSyncer.rejectListen(u,o),i.K_.delete(u),i.H_.removeTarget(u))})(r,t)}catch(n){rr(uc,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await wp(r,n)}else if(t instanceof Jm?r.H_.We(t):t instanceof L4?r.H_.Ze(t):r.H_.je(t),!a.isEqual(Cr.min()))try{const n=await J4(r.localStore);a.compareTo(n)>=0&&await(function(c,o){const u=c.H_.ot(o);return u.targetChanges.forEach(((m,x)=>{if(m.resumeToken.approximateByteSize()>0){const g=c.K_.get(x);g&&c.K_.set(x,g.withResumeToken(m.resumeToken,o))}})),u.targetMismatches.forEach(((m,x)=>{const g=c.K_.get(m);if(!g)return;c.K_.set(m,g.withResumeToken(_s.EMPTY_BYTE_STRING,g.snapshotVersion)),tC(c,m);const k=new nl(g.target,m,x,g.sequenceNumber);By(c,k)})),c.remoteSyncer.applyRemoteEvent(u)})(r,a)}catch(n){rr(uc,"Failed to raise snapshot:",n),await wp(r,n)}}async function wp(r,t,a){if(!Kd(t))throw t;r.W_.add(1),await Yu(r),r.j_.set("Offline"),a||(a=()=>J4(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{rr(uc,"Retrying IndexedDB access"),await a(),r.W_.delete(1),await Nx(r)}))}function aC(r,t){return t().catch((a=>wp(r,a,t)))}async function jx(r){const t=Pr(r),a=yl(t);let n=t.U_.length>0?t.U_[t.U_.length-1].batchId:Cy;for(;rM(t);)try{const i=await F7(t.localStore,n);if(i===null){t.U_.length===0&&a.P_();break}n=i.batchId,aM(t,i)}catch(i){await wp(t,i)}sC(t)&&nC(t)}function rM(r){return jc(r)&&r.U_.length<10}function aM(r,t){r.U_.push(t);const a=yl(r);a.c_()&&a.S_&&a.b_(t.mutations)}function sC(r){return jc(r)&&!yl(r).u_()&&r.U_.length>0}function nC(r){yl(r).start()}async function sM(r){yl(r).C_()}async function nM(r){const t=yl(r);for(const a of r.U_)t.b_(a.mutations)}async function iM(r,t,a){const n=r.U_.shift(),i=Iy.from(n,t,a);await aC(r,(()=>r.remoteSyncer.applySuccessfulWrite(i))),await jx(r)}async function oM(r,t){t&&yl(r).S_&&await(async function(n,i){if((function(o){return F4(o)&&o!==bt.ABORTED})(i.code)){const c=n.U_.shift();yl(n).h_(),await aC(n,(()=>n.remoteSyncer.rejectFailedWrite(c.batchId,i))),await jx(n)}})(r,t),sC(r)&&nC(r)}async function JN(r,t){const a=Pr(r);a.asyncQueue.verifyOperationInProgress(),rr(uc,"RemoteStore received new credentials");const n=jc(a);a.W_.add(3),await Yu(a),n&&a.j_.set("Unknown"),await a.remoteSyncer.handleCredentialChange(t),a.W_.delete(3),await Nx(a)}async function lM(r,t){const a=Pr(r);t?(a.W_.delete(2),await Nx(a)):t||(a.W_.add(2),await Yu(a),a.j_.set("Unknown"))}function Qd(r){return r.J_||(r.J_=(function(a,n,i){const c=Pr(a);return c.M_(),new W7(n,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)})(r.datastore,r.asyncQueue,{xo:J7.bind(null,r),No:Z7.bind(null,r),Lo:eM.bind(null,r),p_:tM.bind(null,r)}),r.G_.push((async t=>{t?(r.J_.h_(),Vy(r)?zy(r):r.j_.set("Unknown")):(await r.J_.stop(),rC(r))}))),r.J_}function yl(r){return r.Y_||(r.Y_=(function(a,n,i){const c=Pr(a);return c.M_(),new G7(n,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)})(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:sM.bind(null,r),Lo:oM.bind(null,r),D_:nM.bind(null,r),v_:iM.bind(null,r)}),r.G_.push((async t=>{t?(r.Y_.h_(),await jx(r)):(await r.Y_.stop(),r.U_.length>0&&(rr(uc,`Stopping write stream with ${r.U_.length} pending writes`),r.U_=[]))}))),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(t,a,n,i,c){this.asyncQueue=t,this.timerId=a,this.targetTimeMs=n,this.op=i,this.removalCallback=c,this.deferred=new $i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,a,n,i,c){const o=Date.now()+n,u=new Uy(t,a,o,i,c);return u.start(n),u}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new er(bt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hy(r,t){if(bo("AsyncQueue",`${t}: ${r}`),Kd(r))return new er(bt.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{static emptySet(t){return new Cd(t.comparator)}constructor(t){this.comparator=t?(a,n)=>t(a,n)||wr.comparator(a.key,n.key):(a,n)=>wr.comparator(a.key,n.key),this.keyedMap=H0(),this.sortedSet=new Oa(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const a=this.keyedMap.get(t);return a?this.sortedSet.indexOf(a):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((a,n)=>(t(a),!1)))}add(t){const a=this.delete(t.key);return a.copy(a.keyedMap.insert(t.key,t),a.sortedSet.insert(t,null))}delete(t){const a=this.get(t);return a?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(a)):this}isEqual(t){if(!(t instanceof Cd)||this.size!==t.size)return!1;const a=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;a.hasNext();){const i=a.getNext().key,c=n.getNext().key;if(!i.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((a=>{t.push(a.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,a){const n=new Cd;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=a,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.Z_=new Oa(wr.comparator)}track(t){const a=t.doc.key,n=this.Z_.get(a);n?t.type!==0&&n.type===3?this.Z_=this.Z_.insert(a,t):t.type===3&&n.type!==1?this.Z_=this.Z_.insert(a,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.Z_=this.Z_.insert(a,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.Z_=this.Z_.insert(a,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.Z_=this.Z_.remove(a):t.type===1&&n.type===2?this.Z_=this.Z_.insert(a,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.Z_=this.Z_.insert(a,{type:2,doc:t.doc}):jr():this.Z_=this.Z_.insert(a,t)}X_(){const t=[];return this.Z_.inorderTraversal(((a,n)=>{t.push(n)})),t}}class Od{constructor(t,a,n,i,c,o,u,m,x){this.query=t,this.docs=a,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=c,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=m,this.hasCachedResults=x}static fromInitialDocuments(t,a,n,i,c){const o=[];return a.forEach((u=>{o.push({type:0,doc:u})})),new Od(t,a,Cd.emptySet(a),o,n,i,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&gx(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const a=this.docChanges,n=t.docChanges;if(a.length!==n.length)return!1;for(let i=0;i<a.length;i++)if(a[i].type!==n[i].type||!a[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((t=>t.ra()))}}class dM{constructor(){this.queries=e2(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(a,n){const i=Pr(a),c=i.queries;i.queries=e2(),c.forEach(((o,u)=>{for(const m of u.ta)m.onError(n)}))})(this,new er(bt.ABORTED,"Firestore shutting down"))}}function e2(){return new Nc((r=>k4(r)),gx)}async function qy(r,t){const a=Pr(r);let n=3;const i=t.query;let c=a.queries.get(i);c?!c.na()&&t.ra()&&(n=2):(c=new cM,n=t.ra()?0:1);try{switch(n){case 0:c.ea=await a.onListen(i,!0);break;case 1:c.ea=await a.onListen(i,!1);break;case 2:await a.onFirstRemoteStoreListen(i)}}catch(o){const u=Hy(o,`Initialization of query '${md(t.query)}' failed`);return void t.onError(u)}a.queries.set(i,c),c.ta.push(t),t.sa(a.onlineState),c.ea&&t.oa(c.ea)&&Gy(a)}async function Wy(r,t){const a=Pr(r),n=t.query;let i=3;const c=a.queries.get(n);if(c){const o=c.ta.indexOf(t);o>=0&&(c.ta.splice(o,1),c.ta.length===0?i=t.ra()?0:1:!c.na()&&t.ra()&&(i=2))}switch(i){case 0:return a.queries.delete(n),a.onUnlisten(n,!0);case 1:return a.queries.delete(n),a.onUnlisten(n,!1);case 2:return a.onLastRemoteStoreUnlisten(n);default:return}}function uM(r,t){const a=Pr(r);let n=!1;for(const i of t){const c=i.query,o=a.queries.get(c);if(o){for(const u of o.ta)u.oa(i)&&(n=!0);o.ea=i}}n&&Gy(a)}function hM(r,t,a){const n=Pr(r),i=n.queries.get(t);if(i)for(const c of i.ta)c.onError(a);n.queries.delete(t)}function Gy(r){r.ia.forEach((t=>{t.next()}))}var $b,t2;(t2=$b||($b={}))._a="default",t2.Cache="cache";class Ky{constructor(t,a,n){this.query=t,this.aa=a,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(t){if(!this.options.includeMetadataChanges){const n=[];for(const i of t.docChanges)i.type!==3&&n.push(i);t=new Od(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let a=!1;return this.ua?this.la(t)&&(this.aa.next(t),a=!0):this.ha(t,this.onlineState)&&(this.Pa(t),a=!0),this.ca=t,a}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let a=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),a=!0),a}ha(t,a){if(!t.fromCache||!this.ra())return!0;const n=a!=="Offline";return(!this.options.Ta||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||a==="Offline")}la(t){if(t.docChanges.length>0)return!0;const a=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!a)&&this.options.includeMetadataChanges===!0}Pa(t){t=Od.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==$b.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(t){this.key=t}}class oC{constructor(t){this.key=t}}class mM{constructor(t,a){this.query=t,this.fa=a,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Lr(),this.mutatedKeys=Lr(),this.ya=N4(t),this.wa=new Cd(this.ya)}get Sa(){return this.fa}ba(t,a){const n=a?a.Da:new ZN,i=a?a.wa:this.wa;let c=a?a.mutatedKeys:this.mutatedKeys,o=i,u=!1;const m=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,x=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((g,k)=>{const S=i.get(g),_=fx(this.query,k)?k:null,I=!!S&&this.mutatedKeys.has(S.key),P=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let b=!1;S&&_?S.data.isEqual(_.data)?I!==P&&(n.track({type:3,doc:_}),b=!0):this.va(S,_)||(n.track({type:2,doc:_}),b=!0,(m&&this.ya(_,m)>0||x&&this.ya(_,x)<0)&&(u=!0)):!S&&_?(n.track({type:0,doc:_}),b=!0):S&&!_&&(n.track({type:1,doc:S}),b=!0,(m||x)&&(u=!0)),b&&(_?(o=o.add(_),c=P?c.add(g):c.delete(g)):(o=o.delete(g),c=c.delete(g)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const g=this.query.limitType==="F"?o.last():o.first();o=o.delete(g.key),c=c.delete(g.key),n.track({type:1,doc:g})}return{wa:o,Da:n,ls:u,mutatedKeys:c}}va(t,a){return t.hasLocalMutations&&a.hasCommittedMutations&&!a.hasLocalMutations}applyChanges(t,a,n,i){const c=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const o=t.Da.X_();o.sort(((g,k)=>(function(_,I){const P=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jr()}};return P(_)-P(I)})(g.type,k.type)||this.ya(g.doc,k.doc))),this.Ca(n),i=i!=null&&i;const u=a&&!i?this.Fa():[],m=this.pa.size===0&&this.current&&!i?1:0,x=m!==this.ga;return this.ga=m,o.length!==0||x?{snapshot:new Od(this.query,t.wa,c,o,t.mutatedKeys,m===0,x,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:u}:{Ma:u}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new ZN,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach((a=>this.fa=this.fa.add(a))),t.modifiedDocuments.forEach((a=>{})),t.removedDocuments.forEach((a=>this.fa=this.fa.delete(a))),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Lr(),this.wa.forEach((n=>{this.xa(n.key)&&(this.pa=this.pa.add(n.key))}));const a=[];return t.forEach((n=>{this.pa.has(n)||a.push(new oC(n))})),this.pa.forEach((n=>{t.has(n)||a.push(new iC(n))})),a}Oa(t){this.fa=t.gs,this.pa=Lr();const a=this.ba(t.documents);return this.applyChanges(a,!0)}Na(){return Od.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Yy="SyncEngine";class pM{constructor(t,a,n){this.query=t,this.targetId=a,this.view=n}}class xM{constructor(t){this.key=t,this.Ba=!1}}class gM{constructor(t,a,n,i,c,o){this.localStore=t,this.remoteStore=a,this.eventManager=n,this.sharedClientState=i,this.currentUser=c,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Nc((u=>k4(u)),gx),this.qa=new Map,this.Qa=new Set,this.$a=new Oa(wr.comparator),this.Ua=new Map,this.Ka=new Ay,this.Wa={},this.Ga=new Map,this.za=Fd.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function fM(r,t,a=!0){const n=mC(r);let i;const c=n.ka.get(t);return c?(n.sharedClientState.addLocalQueryTarget(c.targetId),i=c.view.Na()):i=await lC(n,t,a,!0),i}async function bM(r,t){const a=mC(r);await lC(a,t,!0,!1)}async function lC(r,t,a,n){const i=await O7(r.localStore,Di(t)),c=i.targetId,o=r.sharedClientState.addLocalQueryTarget(c,a);let u;return n&&(u=await yM(r,t,c,o==="current",i.resumeToken)),r.isPrimaryClient&&a&&eC(r.remoteStore,i),u}async function yM(r,t,a,n,i){r.Ha=(k,S,_)=>(async function(P,b,B,L){let O=b.view.ba(B);O.ls&&(O=await GN(P.localStore,b.query,!1).then((({documents:H})=>b.view.ba(H,O))));const te=L&&L.targetChanges.get(b.targetId),ne=L&&L.targetMismatches.get(b.targetId)!=null,be=b.view.applyChanges(O,P.isPrimaryClient,te,ne);return a2(P,b.targetId,be.Ma),be.snapshot})(r,k,S,_);const c=await GN(r.localStore,t,!0),o=new mM(t,c.gs),u=o.ba(c.documents),m=Ku.createSynthesizedTargetChangeForCurrentChange(a,n&&r.onlineState!=="Offline",i),x=o.applyChanges(u,r.isPrimaryClient,m);a2(r,a,x.Ma);const g=new pM(t,a,o);return r.ka.set(t,g),r.qa.has(a)?r.qa.get(a).push(t):r.qa.set(a,[t]),x.snapshot}async function vM(r,t,a){const n=Pr(r),i=n.ka.get(t),c=n.qa.get(i.targetId);if(c.length>1)return n.qa.set(i.targetId,c.filter((o=>!gx(o,t)))),void n.ka.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Pb(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),a&&Ly(n.remoteStore,i.targetId),Db(n,i.targetId)})).catch(Gd)):(Db(n,i.targetId),await Pb(n.localStore,i.targetId,!0))}async function wM(r,t){const a=Pr(r),n=a.ka.get(t),i=a.qa.get(n.targetId);a.isPrimaryClient&&i.length===1&&(a.sharedClientState.removeLocalQueryTarget(n.targetId),Ly(a.remoteStore,n.targetId))}async function kM(r,t,a){const n=_M(r);try{const i=await(function(o,u){const m=Pr(o),x=ja.now(),g=u.reduce(((_,I)=>_.add(I.key)),Lr());let k,S;return m.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let I=yo(),P=Lr();return m.ds.getEntries(_,g).next((b=>{I=b,I.forEach(((B,L)=>{L.isValidDocument()||(P=P.add(B))}))})).next((()=>m.localDocuments.getOverlayedDocuments(_,I))).next((b=>{k=b;const B=[];for(const L of u){const O=BR(L,k.get(L.key).overlayedDocument);O!=null&&B.push(new El(L.key,O,p4(O.value.mapValue),js.exists(!0)))}return m.mutationQueue.addMutationBatch(_,x,B,u)})).next((b=>{S=b;const B=b.applyToLocalDocumentSet(k,P);return m.documentOverlayCache.saveOverlays(_,b.batchId,B)}))})).then((()=>({batchId:S.batchId,changes:C4(k)})))})(n.localStore,t);n.sharedClientState.addPendingMutation(i.batchId),(function(o,u,m){let x=o.Wa[o.currentUser.toKey()];x||(x=new Oa(Dr)),x=x.insert(u,m),o.Wa[o.currentUser.toKey()]=x})(n,i.batchId,a),await Qu(n,i.changes),await jx(n.remoteStore)}catch(i){const c=Hy(i,"Failed to persist write");a.reject(c)}}async function cC(r,t){const a=Pr(r);try{const n=await R7(a.localStore,t);t.targetChanges.forEach(((i,c)=>{const o=a.Ua.get(c);o&&(Yr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ba=!0:i.modifiedDocuments.size>0?Yr(o.Ba):i.removedDocuments.size>0&&(Yr(o.Ba),o.Ba=!1))})),await Qu(a,n,t)}catch(n){await Gd(n)}}function r2(r,t,a){const n=Pr(r);if(n.isPrimaryClient&&a===0||!n.isPrimaryClient&&a===1){const i=[];n.ka.forEach(((c,o)=>{const u=o.view.sa(t);u.snapshot&&i.push(u.snapshot)})),(function(o,u){const m=Pr(o);m.onlineState=u;let x=!1;m.queries.forEach(((g,k)=>{for(const S of k.ta)S.sa(u)&&(x=!0)})),x&&Gy(m)})(n.eventManager,t),i.length&&n.La.p_(i),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function NM(r,t,a){const n=Pr(r);n.sharedClientState.updateQueryState(t,"rejected",a);const i=n.Ua.get(t),c=i&&i.key;if(c){let o=new Oa(wr.comparator);o=o.insert(c,us.newNoDocument(c,Cr.min()));const u=Lr().add(c),m=new wx(Cr.min(),new Map,new Oa(Dr),o,u);await cC(n,m),n.$a=n.$a.remove(c),n.Ua.delete(t),Qy(n)}else await Pb(n.localStore,t,!1).then((()=>Db(n,t,a))).catch(Gd)}async function jM(r,t){const a=Pr(r),n=t.batch.batchId;try{const i=await A7(a.localStore,t);uC(a,n,null),dC(a,n),a.sharedClientState.updateMutationState(n,"acknowledged"),await Qu(a,i)}catch(i){await Gd(i)}}async function CM(r,t,a){const n=Pr(r);try{const i=await(function(o,u){const m=Pr(o);return m.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let g;return m.mutationQueue.lookupMutationBatch(x,u).next((k=>(Yr(k!==null),g=k.keys(),m.mutationQueue.removeMutationBatch(x,k)))).next((()=>m.mutationQueue.performConsistencyCheck(x))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(x,g,u))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,g))).next((()=>m.localDocuments.getDocuments(x,g)))}))})(n.localStore,t);uC(n,t,a),dC(n,t),n.sharedClientState.updateMutationState(t,"rejected",a),await Qu(n,i)}catch(i){await Gd(i)}}function dC(r,t){(r.Ga.get(t)||[]).forEach((a=>{a.resolve()})),r.Ga.delete(t)}function uC(r,t,a){const n=Pr(r);let i=n.Wa[n.currentUser.toKey()];if(i){const c=i.get(t);c&&(a?c.reject(a):c.resolve(),i=i.remove(t)),n.Wa[n.currentUser.toKey()]=i}}function Db(r,t,a=null){r.sharedClientState.removeLocalQueryTarget(t);for(const n of r.qa.get(t))r.ka.delete(n),a&&r.La.Ja(n,a);r.qa.delete(t),r.isPrimaryClient&&r.Ka.br(t).forEach((n=>{r.Ka.containsKey(n)||hC(r,n)}))}function hC(r,t){r.Qa.delete(t.path.canonicalString());const a=r.$a.get(t);a!==null&&(Ly(r.remoteStore,a),r.$a=r.$a.remove(t),r.Ua.delete(a),Qy(r))}function a2(r,t,a){for(const n of a)n instanceof iC?(r.Ka.addReference(n.key,t),TM(r,n)):n instanceof oC?(rr(Yy,"Document no longer in limbo: "+n.key),r.Ka.removeReference(n.key,t),r.Ka.containsKey(n.key)||hC(r,n.key)):jr()}function TM(r,t){const a=t.key,n=a.path.canonicalString();r.$a.get(a)||r.Qa.has(n)||(rr(Yy,"New document in limbo: "+a),r.Qa.add(n),Qy(r))}function Qy(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const t=r.Qa.values().next().value;r.Qa.delete(t);const a=new wr(Na.fromString(t)),n=r.za.next();r.Ua.set(n,new xM(a)),r.$a=r.$a.insert(a,n),eC(r.remoteStore,new nl(Di(xx(a.path)),n,"TargetPurposeLimboResolution",mx.ae))}}async function Qu(r,t,a){const n=Pr(r),i=[],c=[],o=[];n.ka.isEmpty()||(n.ka.forEach(((u,m)=>{o.push(n.Ha(m,t,a).then((x=>{var g;if((x||a)&&n.isPrimaryClient){const k=x?!x.fromCache:(g=a?.targetChanges.get(m.targetId))===null||g===void 0?void 0:g.current;n.sharedClientState.updateQueryState(m.targetId,k?"current":"not-current")}if(x){i.push(x);const k=My.Yi(m.targetId,x);c.push(k)}})))})),await Promise.all(o),n.La.p_(i),await(async function(m,x){const g=Pr(m);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>wt.forEach(x,(S=>wt.forEach(S.Hi,(_=>g.persistence.referenceDelegate.addReference(k,S.targetId,_))).next((()=>wt.forEach(S.Ji,(_=>g.persistence.referenceDelegate.removeReference(k,S.targetId,_)))))))))}catch(k){if(!Kd(k))throw k;rr(Fy,"Failed to update sequence numbers: "+k)}for(const k of x){const S=k.targetId;if(!k.fromCache){const _=g.Ts.get(S),I=_.snapshotVersion,P=_.withLastLimboFreeSnapshotVersion(I);g.Ts=g.Ts.insert(S,P)}}})(n.localStore,c))}async function SM(r,t){const a=Pr(r);if(!a.currentUser.isEqual(t)){rr(Yy,"User change. New user:",t.toKey());const n=await X4(a.localStore,t);a.currentUser=t,(function(c,o){c.Ga.forEach((u=>{u.forEach((m=>{m.reject(new er(bt.CANCELLED,o))}))})),c.Ga.clear()})(a,"'waitForPendingWrites' promise is rejected due to a user change."),a.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await Qu(a,n.Rs)}}function EM(r,t){const a=Pr(r),n=a.Ua.get(t);if(n&&n.Ba)return Lr().add(n.key);{let i=Lr();const c=a.qa.get(t);if(!c)return i;for(const o of c){const u=a.ka.get(o);i=i.unionWith(u.view.Sa)}return i}}function mC(r){const t=Pr(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=cC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=EM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=NM.bind(null,t),t.La.p_=uM.bind(null,t.eventManager),t.La.Ja=hM.bind(null,t.eventManager),t}function _M(r){const t=Pr(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=jM.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=CM.bind(null,t),t}class kp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=kx(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,a){return null}nu(t,a){return null}eu(t){return D7(this.persistence,new P7,t.initialUser,this.serializer)}Xa(t){return new Q4(Ry.ri,this.serializer)}Za(t){return new B7}async terminate(){var t,a;(t=this.gcScheduler)===null||t===void 0||t.stop(),(a=this.indexBackfillerScheduler)===null||a===void 0||a.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kp.provider={build:()=>new kp};class PM extends kp{constructor(t){super(),this.cacheSizeBytes=t}tu(t,a){Yr(this.persistence.referenceDelegate instanceof vp);const n=this.persistence.referenceDelegate.garbageCollector;return new x7(n,t.asyncQueue,a)}Xa(t){const a=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new Q4((n=>vp.ri(n,a)),this.serializer)}}class Ab{async initialize(t,a){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(a),this.remoteStore=this.createRemoteStore(a),this.eventManager=this.createEventManager(a),this.syncEngine=this.createSyncEngine(a,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>r2(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=SM.bind(null,this.syncEngine),await lM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new dM})()}createDatastore(t){const a=kx(t.databaseInfo.databaseId),n=(function(c){return new q7(c)})(t.databaseInfo);return(function(c,o,u,m){return new Y7(c,o,u,m)})(t.authCredentials,t.appCheckCredentials,n,a)}createRemoteStore(t){return(function(n,i,c,o,u){return new X7(n,i,c,o,u)})(this.localStore,this.datastore,t.asyncQueue,(a=>r2(this.syncEngine,a,0)),(function(){return QN.D()?new QN:new z7})())}createSyncEngine(t,a){return(function(i,c,o,u,m,x,g){const k=new gM(i,c,o,u,m,x);return g&&(k.ja=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,a)}async terminate(){var t,a;await(async function(i){const c=Pr(i);rr(uc,"RemoteStore shutting down."),c.W_.add(5),await Yu(c),c.z_.shutdown(),c.j_.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(a=this.eventManager)===null||a===void 0||a.terminate()}}Ab.provider={build:()=>new Ab};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):bo("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,a){setTimeout((()=>{this.muted||t(a)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new er(bt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const a=await(async function(i,c){const o=Pr(i),u={documents:c.map((k=>yp(o.serializer,k)))},m=await o.Co("BatchGetDocuments",o.serializer.databaseId,Na.emptyPath(),u,c.length),x=new Map;m.forEach((k=>{const S=JR(o.serializer,k);x.set(S.key.toString(),S)}));const g=[];return c.forEach((k=>{const S=x.get(k.toString());Yr(!!S),g.push(S)})),g})(this.datastore,t);return a.forEach((n=>this.recordVersion(n))),a}set(t,a){this.write(a.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,a){try{this.write(a.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(t.toString())}delete(t){this.write(new vx(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((a=>{t.delete(a.key.toString())})),t.forEach(((a,n)=>{const i=wr.fromPath(n);this.mutations.push(new M4(i,this.precondition(i)))})),await(async function(n,i){const c=Pr(n),o={writes:i.map((u=>q4(c.serializer,u)))};await c.So("Commit",c.serializer.databaseId,Na.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let a;if(t.isFoundDocument())a=t.version;else{if(!t.isNoDocument())throw jr();a=Cr.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!a.isEqual(n))throw new er(bt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),a)}precondition(t){const a=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&a?a.isEqual(Cr.min())?js.exists(!1):js.updateTime(a):js.none()}preconditionForUpdate(t){const a=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&a){if(a.isEqual(Cr.min()))throw new er(bt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return js.updateTime(a)}return js.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(t,a,n,i,c){this.asyncQueue=t,this.datastore=a,this.options=n,this.updateFunction=i,this.deferred=c,this.Tu=n.maxAttempts,this.a_=new Oy(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo((async()=>{const t=new IM(this.datastore),a=this.du(t);a&&a.then((n=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(n)})).catch((i=>{this.Au(i)}))))})).catch((n=>{this.Au(n)}))}))}du(t){try{const a=this.updateFunction(t);return!Wu(a)&&a.catch&&a.then?a:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(a){return this.deferred.reject(a),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Eu(),Promise.resolve())))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const a=t.code;return a==="aborted"||a==="failed-precondition"||a==="already-exists"||!F4(a)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl="FirestoreClient";class DM{constructor(t,a,n,i,c){this.authCredentials=t,this.appCheckCredentials=a,this.asyncQueue=n,this.databaseInfo=i,this.user=Fs.UNAUTHENTICATED,this.clientId=s4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(n,(async o=>{rr(vl,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(rr(vl,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new $i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(a){const n=Hy(a,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Mf(r,t){r.asyncQueue.verifyOperationInProgress(),rr(vl,"Initializing OfflineComponentProvider");const a=r.configuration;await t.initialize(a);let n=a.initialUser;r.setCredentialChangeListener((async i=>{n.isEqual(i)||(await X4(t.localStore,i),n=i)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function s2(r,t){r.asyncQueue.verifyOperationInProgress();const a=await AM(r);rr(vl,"Initializing OnlineComponentProvider"),await t.initialize(a,r.configuration),r.setCredentialChangeListener((n=>JN(t.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,i)=>JN(t.remoteStore,i))),r._onlineComponents=t}async function AM(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){rr(vl,"Using user provided OfflineComponentProvider");try{await Mf(r,r._uninitializedComponentsProvider._offline)}catch(t){const a=t;if(!(function(i){return i.name==="FirebaseError"?i.code===bt.FAILED_PRECONDITION||i.code===bt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(a))throw a;Dd("Error using user provided cache. Falling back to memory cache: "+a),await Mf(r,new kp)}}else rr(vl,"Using default OfflineComponentProvider"),await Mf(r,new PM(void 0));return r._offlineComponents}async function Jy(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(rr(vl,"Using user provided OnlineComponentProvider"),await s2(r,r._uninitializedComponentsProvider._online)):(rr(vl,"Using default OnlineComponentProvider"),await s2(r,new Ab))),r._onlineComponents}function RM(r){return Jy(r).then((t=>t.syncEngine))}function MM(r){return Jy(r).then((t=>t.datastore))}async function Np(r){const t=await Jy(r),a=t.eventManager;return a.onListen=fM.bind(null,t.syncEngine),a.onUnlisten=vM.bind(null,t.syncEngine),a.onFirstRemoteStoreListen=bM.bind(null,t.syncEngine),a.onLastRemoteStoreUnlisten=wM.bind(null,t.syncEngine),a}function FM(r,t,a={}){const n=new $i;return r.asyncQueue.enqueueAndForget((async()=>(function(c,o,u,m,x){const g=new Xy({next:S=>{g.su(),o.enqueueAndForget((()=>Wy(c,k)));const _=S.docs.has(u);!_&&S.fromCache?x.reject(new er(bt.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&S.fromCache&&m&&m.source==="server"?x.reject(new er(bt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(S)},error:S=>x.reject(S)}),k=new Ky(xx(u.path),g,{includeMetadataChanges:!0,Ta:!0});return qy(c,k)})(await Np(r),r.asyncQueue,t,a,n))),n.promise}function OM(r,t,a={}){const n=new $i;return r.asyncQueue.enqueueAndForget((async()=>(function(c,o,u,m,x){const g=new Xy({next:S=>{g.su(),o.enqueueAndForget((()=>Wy(c,k))),S.fromCache&&m.source==="server"?x.reject(new er(bt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(S)},error:S=>x.reject(S)}),k=new Ky(u,g,{includeMetadataChanges:!0,Ta:!0});return qy(c,k)})(await Np(r),r.asyncQueue,t,a,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(r,t,a){if(!a)throw new er(bt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function LM(r,t,a,n){if(t===!0&&n===!0)throw new er(bt.INVALID_ARGUMENT,`${r} and ${a} cannot be used together.`)}function i2(r){if(!wr.isDocumentKey(r))throw new er(bt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function o2(r){if(wr.isDocumentKey(r))throw new er(bt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Cx(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(n){return n.constructor?n.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":jr()}function Ys(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new er(bt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const a=Cx(r);throw new er(bt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${a}`)}}return r}function BM(r,t){if(t<=0)throw new er(bt.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="firestore.googleapis.com",l2=!0;class c2{constructor(t){var a,n;if(t.host===void 0){if(t.ssl!==void 0)throw new er(bt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gC,this.ssl=l2}else this.host=t.host,this.ssl=(a=t.ssl)!==null&&a!==void 0?a:l2;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Y4;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<m7)throw new er(bt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}LM("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pC((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new er(bt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new er(bt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new er(bt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Tx{constructor(t,a,n,i){this._authCredentials=t,this._appCheckCredentials=a,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new er(bt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new er(bt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c2(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new G8;switch(n.type){case"firstParty":return new X8(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new er(bt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(a){const n=n2.get(a);n&&(rr("ComponentProvider","Removing Datastore"),n2.delete(a),n.terminate())})(this),Promise.resolve()}}function zM(r,t,a,n={}){var i;const c=(r=Ys(r,Tx))._getSettings(),o=Object.assign(Object.assign({},c),{emulatorOptions:r._getEmulatorOptions()}),u=`${t}:${a}`;c.host!==gC&&c.host!==u&&Dd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:u,ssl:!1,emulatorOptions:n});if(!pl(m,o)&&(r._setSettings(m),n.mockUserToken)){let x,g;if(typeof n.mockUserToken=="string")x=n.mockUserToken,g=Fs.MOCK_USER;else{x=b3(n.mockUserToken,(i=r._app)===null||i===void 0?void 0:i.options.projectId);const k=n.mockUserToken.sub||n.mockUserToken.user_id;if(!k)throw new er(bt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Fs(k)}r._authCredentials=new K8(new r4(x,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t,a,n){this.converter=a,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new To(this.firestore,t,this._query)}}class Ss{constructor(t,a,n){this.converter=a,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ul(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ss(this.firestore,t,this._key)}}class ul extends To{constructor(t,a,n){super(t,a,xx(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ss(this.firestore,null,new wr(t))}withConverter(t){return new ul(this.firestore,t,this._path)}}function ue(r,t,...a){if(r=Ta(r),xC("collection","path",t),r instanceof Tx){const n=Na.fromString(t,...a);return o2(n),new ul(r,null,n)}{if(!(r instanceof Ss||r instanceof ul))throw new er(bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Na.fromString(t,...a));return o2(n),new ul(r.firestore,null,n)}}function se(r,t,...a){if(r=Ta(r),arguments.length===1&&(t=s4.newId()),xC("doc","path",t),r instanceof Tx){const n=Na.fromString(t,...a);return i2(n),new Ss(r,null,new wr(n))}{if(!(r instanceof Ss||r instanceof ul))throw new er(bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Na.fromString(t,...a));return i2(n),new Ss(r.firestore,r instanceof ul?r.converter:null,new wr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="AsyncQueue";class u2{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Oy(this,"async_queue_retry"),this.Su=()=>{const n=Rf();n&&rr(d2,"Visibility state changed to "+n.visibilityState),this.a_.t_()},this.bu=t;const a=Rf();a&&typeof a.addEventListener=="function"&&a.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const a=Rf();a&&typeof a.removeEventListener=="function"&&a.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise((()=>{}));const a=new $i;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(t().then(a.resolve,a.reject),a.promise))).then((()=>a.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Vu.push(t),this.Cu())))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Kd(t))throw t;rr(d2,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(t){const a=this.bu.then((()=>(this.pu=!0,t().catch((n=>{this.gu=n,this.pu=!1;const i=(function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u})(n);throw bo("INTERNAL UNHANDLED ERROR: ",i),n})).then((n=>(this.pu=!1,n))))));return this.bu=a,a}enqueueAfterDelay(t,a,n){this.Du(),this.wu.indexOf(t)>-1&&(a=0);const i=Uy.createAndSchedule(this,t,a,n,(c=>this.Fu(c)));return this.fu.push(i),i}Du(){this.gu&&jr()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const a of this.fu)if(a.timerId===t)return!0;return!1}Ou(t){return this.Mu().then((()=>{this.fu.sort(((a,n)=>a.targetTimeMs-n.targetTimeMs));for(const a of this.fu)if(a.skipDelay(),t!=="all"&&a.timerId===t)break;return this.Mu()}))}Nu(t){this.wu.push(t)}Fu(t){const a=this.fu.indexOf(t);this.fu.splice(a,1)}}function h2(r){return(function(a,n){if(typeof a!="object"||a===null)return!1;const i=a;for(const c of n)if(c in i&&typeof i[c]=="function")return!0;return!1})(r,["next","error","complete"])}class zi extends Tx{constructor(t,a,n,i){super(t,a,n,i),this.type="firestore",this._queue=new u2,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new u2(t),this._firestoreClient=void 0,await t}}}function VM(r,t){const a=typeof r=="object"?r:dx(),n=typeof r=="string"?r:pp,i=Tl(a,"firestore").getImmediate({identifier:n});if(!i._initialized){const c=x3("firestore");c&&zM(i,...c)}return i}function Xu(r){if(r._terminated)throw new er(bt.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||UM(r),r._firestoreClient}function UM(r){var t,a,n;const i=r._freezeSettings(),c=(function(u,m,x,g){return new hR(u,m,x,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,pC(g.experimentalLongPollingOptions),g.useFetchStreams)})(r._databaseId,((t=r._app)===null||t===void 0?void 0:t.options.appId)||"",r._persistenceKey,i);r._componentsProvider||!((a=i.localCache)===null||a===void 0)&&a._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),r._firestoreClient=new DM(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&(function(u){const m=u?._online.build();return{_offline:u?._offline.build(m),_online:m}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new hc(_s.fromBase64String(t))}catch(a){throw new er(bt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+a)}}static fromUint8Array(t){return new hc(_s.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(...t){for(let a=0;a<t.length;++a)if(t[a].length===0)throw new er(bt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ns(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(t,a){if(!isFinite(t)||t<-90||t>90)throw new er(bt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(a)||a<-180||a>180)throw new er(bt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+a);this._lat=t,this._long=a}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Dr(this._lat,t._lat)||Dr(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(t){this._values=(t||[]).map((a=>a))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(n,i){if(n.length!==i.length)return!1;for(let c=0;c<n.length;++c)if(n[c]!==i[c])return!1;return!0})(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=/^__.*__$/;class qM{constructor(t,a,n){this.data=t,this.fieldMask=a,this.fieldTransforms=n}toMutation(t,a){return this.fieldMask!==null?new El(t,this.data,this.fieldMask,a,this.fieldTransforms):new Gu(t,this.data,a,this.fieldTransforms)}}class fC{constructor(t,a,n){this.data=t,this.fieldMask=a,this.fieldTransforms=n}toMutation(t,a){return new El(t,this.data,this.fieldMask,a,this.fieldTransforms)}}function bC(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jr()}}class tv{constructor(t,a,n,i,c,o){this.settings=t,this.databaseId=a,this.serializer=n,this.ignoreUndefinedProperties=i,c===void 0&&this.Bu(),this.fieldTransforms=c||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new tv(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var a;const n=(a=this.path)===null||a===void 0?void 0:a.child(t),i=this.ku({path:n,Qu:!1});return i.$u(t),i}Uu(t){var a;const n=(a=this.path)===null||a===void 0?void 0:a.child(t),i=this.ku({path:n,Qu:!1});return i.Bu(),i}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return jp(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find((a=>t.isPrefixOf(a)))!==void 0||this.fieldTransforms.find((a=>t.isPrefixOf(a.field)))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(bC(this.Lu)&&HM.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class WM{constructor(t,a,n){this.databaseId=t,this.ignoreUndefinedProperties=a,this.serializer=n||kx(t)}ju(t,a,n,i=!1){return new tv({Lu:t,methodName:a,zu:n,path:Ns.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eh(r){const t=r._freezeSettings(),a=kx(r._databaseId);return new WM(r._databaseId,!!t.ignoreUndefinedProperties,a)}function rv(r,t,a,n,i,c={}){const o=r.ju(c.merge||c.mergeFields?2:0,t,a,i);nv("Data must be an object, but it was:",o,n);const u=wC(n,o);let m,x;if(c.merge)m=new Tn(o.fieldMask),x=o.fieldTransforms;else if(c.mergeFields){const g=[];for(const k of c.mergeFields){const S=Rb(t,k,a);if(!o.contains(S))throw new er(bt.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);NC(g,S)||g.push(S)}m=new Tn(g),x=o.fieldTransforms.filter((k=>m.covers(k.field)))}else m=null,x=o.fieldTransforms;return new qM(new Gs(u),m,x)}class Sx extends Zu{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Sx}}class av extends Zu{_toFieldTransform(t){return new D4(t.path,new wu)}isEqual(t){return t instanceof av}}class sv extends Zu{constructor(t,a){super(t),this.Ju=a}_toFieldTransform(t){const a=new ju(t.serializer,E4(t.serializer,this.Ju));return new D4(t.path,a)}isEqual(t){return t instanceof sv&&this.Ju===t.Ju}}function yC(r,t,a,n){const i=r.ju(1,t,a);nv("Data must be an object, but it was:",i,n);const c=[],o=Gs.empty();Sl(n,((m,x)=>{const g=iv(t,m,a);x=Ta(x);const k=i.Uu(g);if(x instanceof Sx)c.push(g);else{const S=th(x,k);S!=null&&(c.push(g),o.set(g,S))}}));const u=new Tn(c);return new fC(o,u,i.fieldTransforms)}function vC(r,t,a,n,i,c){const o=r.ju(1,t,a),u=[Rb(t,n,a)],m=[i];if(c.length%2!=0)throw new er(bt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<c.length;S+=2)u.push(Rb(t,c[S])),m.push(c[S+1]);const x=[],g=Gs.empty();for(let S=u.length-1;S>=0;--S)if(!NC(x,u[S])){const _=u[S];let I=m[S];I=Ta(I);const P=o.Uu(_);if(I instanceof Sx)x.push(_);else{const b=th(I,P);b!=null&&(x.push(_),g.set(_,b))}}const k=new Tn(x);return new fC(g,k,o.fieldTransforms)}function GM(r,t,a,n=!1){return th(a,r.ju(n?4:3,t))}function th(r,t){if(kC(r=Ta(r)))return nv("Unsupported field value:",t,r),wC(r,t);if(r instanceof Zu)return(function(n,i){if(!bC(i.Lu))throw i.Wu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${n._methodName}() is not currently supported inside arrays`);const c=n._toFieldTransform(i);c&&i.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return(function(n,i){const c=[];let o=0;for(const u of n){let m=th(u,i.Ku(o));m==null&&(m={nullValue:"NULL_VALUE"}),c.push(m),o++}return{arrayValue:{values:c}}})(r,t)}return(function(n,i){if((n=Ta(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return E4(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const c=ja.fromDate(n);return{timestampValue:bp(i.serializer,c)}}if(n instanceof ja){const c=new ja(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:bp(i.serializer,c)}}if(n instanceof Zy)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof hc)return{bytesValue:z4(i.serializer,n._byteString)};if(n instanceof Ss){const c=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(c))throw i.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Dy(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof ev)return(function(o,u){return{mapValue:{fields:{[h4]:{stringValue:m4},[xp]:{arrayValue:{values:o.toArray().map((x=>{if(typeof x!="number")throw u.Wu("VectorValues must only contain numeric values.");return Py(u.serializer,x)}))}}}}}})(n,i);throw i.Wu(`Unsupported field value: ${Cx(n)}`)})(r,t)}function wC(r,t){const a={};return i4(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Sl(r,((n,i)=>{const c=th(i,t.qu(n));c!=null&&(a[n]=c)})),{mapValue:{fields:a}}}function kC(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ja||r instanceof Zy||r instanceof hc||r instanceof Ss||r instanceof Zu||r instanceof ev)}function nv(r,t,a){if(!kC(a)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(a)){const n=Cx(a);throw n==="an object"?t.Wu(r+" a custom object"):t.Wu(r+" "+n)}}function Rb(r,t,a){if((t=Ta(t))instanceof Ju)return t._internalPath;if(typeof t=="string")return iv(r,t);throw jp("Field path arguments must be of type string or ",r,!1,void 0,a)}const KM=new RegExp("[~\\*/\\[\\]]");function iv(r,t,a){if(t.search(KM)>=0)throw jp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,a);try{return new Ju(...t.split("."))._internalPath}catch{throw jp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,a)}}function jp(r,t,a,n,i){const c=n&&!n.isEmpty(),o=i!==void 0;let u=`Function ${t}() called with invalid data`;a&&(u+=" (via `toFirestore()`)"),u+=". ";let m="";return(c||o)&&(m+=" (found",c&&(m+=` in field ${n}`),o&&(m+=` in document ${i}`),m+=")"),new er(bt.INVALID_ARGUMENT,u+r+m)}function NC(r,t){return r.some((a=>a.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(t,a,n,i,c){this._firestore=t,this._userDataWriter=a,this._key=n,this._document=i,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ss(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new YM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const a=this._document.data.field(Ex("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a)}}}class YM extends Cp{data(){return super.data()}}function Ex(r,t){return typeof t=="string"?iv(r,t):t instanceof Ju?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new er(bt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ov{}class lv extends ov{}function Fe(r,t,...a){let n=[];t instanceof ov&&n.push(t),n=n.concat(a),(function(c){const o=c.filter((m=>m instanceof cv)).length,u=c.filter((m=>m instanceof _x)).length;if(o>1||o>0&&u>0)throw new er(bt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)r=i._apply(r);return r}class _x extends lv{constructor(t,a,n){super(),this._field=t,this._op=a,this._value=n,this.type="where"}static _create(t,a,n){return new _x(t,a,n)}_apply(t){const a=this._parse(t);return CC(t._query,a),new To(t.firestore,t.converter,Tb(t._query,a))}_parse(t){const a=eh(t.firestore);return(function(c,o,u,m,x,g,k){let S;if(x.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new er(bt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){p2(k,g);const I=[];for(const P of k)I.push(m2(m,c,P));S={arrayValue:{values:I}}}else S=m2(m,c,k)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||p2(k,g),S=GM(u,o,k,g==="in"||g==="not-in");return Ja.create(x,g,S)})(t._query,"where",a,t.firestore._databaseId,this._field,this._op,this._value)}}function dt(r,t,a){const n=t,i=Ex("where",r);return _x._create(i,n,a)}class cv extends ov{constructor(t,a){super(),this.type=t,this._queryConstraints=a}static _create(t,a){return new cv(t,a)}_parse(t){const a=this._queryConstraints.map((n=>n._parse(t))).filter((n=>n.getFilters().length>0));return a.length===1?a[0]:gi.create(a,this._getOperator())}_apply(t){const a=this._parse(t);return a.getFilters().length===0?t:((function(i,c){let o=i;const u=c.getFlattenedFilters();for(const m of u)CC(o,m),o=Tb(o,m)})(t._query,a),new To(t.firestore,t.converter,Tb(t._query,a)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dv extends lv{constructor(t,a){super(),this._field=t,this._direction=a,this.type="orderBy"}static _create(t,a){return new dv(t,a)}_apply(t){const a=(function(i,c,o){if(i.startAt!==null)throw new er(bt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new er(bt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vu(c,o)})(t._query,this._field,this._direction);return new To(t.firestore,t.converter,(function(i,c){const o=i.explicitOrderBy.concat([c]);return new Yd(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(t._query,a))}}function Qr(r,t="asc"){const a=t,n=Ex("orderBy",r);return dv._create(n,a)}class uv extends lv{constructor(t,a,n){super(),this.type=t,this._limit=a,this._limitType=n}static _create(t,a,n){return new uv(t,a,n)}_apply(t){return new To(t.firestore,t.converter,fp(t._query,this._limit,this._limitType))}}function la(r){return BM("limit",r),uv._create("limit",r,"F")}function m2(r,t,a){if(typeof(a=Ta(a))=="string"){if(a==="")throw new er(bt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w4(t)&&a.indexOf("/")!==-1)throw new er(bt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${a}' contains a '/' character.`);const n=t.path.child(Na.fromString(a));if(!wr.isDocumentKey(n))throw new er(bt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return EN(r,new wr(n))}if(a instanceof Ss)return EN(r,a._key);throw new er(bt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cx(a)}.`)}function p2(r,t){if(!Array.isArray(r)||r.length===0)throw new er(bt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function CC(r,t){const a=(function(i,c){for(const o of i)for(const u of o.getFlattenedFilters())if(c.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(a!==null)throw a===t.op?new er(bt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new er(bt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${a.toString()}' filters.`)}class TC{convertValue(t,a="none"){switch(bl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Wa(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,a);case 5:return t.stringValue;case 6:return this.convertBytes(fl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,a);case 11:return this.convertObject(t.mapValue,a);case 10:return this.convertVectorValue(t.mapValue);default:throw jr()}}convertObject(t,a){return this.convertObjectMap(t.fields,a)}convertObjectMap(t,a="none"){const n={};return Sl(t,((i,c)=>{n[i]=this.convertValue(c,a)})),n}convertVectorValue(t){var a,n,i;const c=(i=(n=(a=t.fields)===null||a===void 0?void 0:a[xp].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map((o=>Wa(o.doubleValue)));return new ev(c)}convertGeoPoint(t){return new Zy(Wa(t.latitude),Wa(t.longitude))}convertArray(t,a){return(t.values||[]).map((n=>this.convertValue(n,a)))}convertServerTimestamp(t,a){switch(a){case"previous":const n=px(t);return n==null?null:this.convertValue(n,a);case"estimate":return this.convertTimestamp(fu(t));default:return null}}convertTimestamp(t){const a=gl(t);return new ja(a.seconds,a.nanos)}convertDocumentKey(t,a){const n=Na.fromString(t);Yr(K4(n));const i=new bu(n.get(1),n.get(3)),c=new wr(n.popFirst(5));return i.isEqual(a)||bo(`Document ${c} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${a.projectId}/${a.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(r,t,a){let n;return n=r?a&&(a.merge||a.mergeFields)?r.toFirestore(t,a):r.toFirestore(t):t,n}class QM extends TC{constructor(t){super(),this.firestore=t}convertBytes(t){return new hc(t)}convertReference(t){const a=this.convertDocumentKey(t,this.firestore._databaseId);return new Ss(this.firestore,null,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(t,a){this.hasPendingWrites=t,this.fromCache=a}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class mv extends Cp{constructor(t,a,n,i,c,o){super(t,a,n,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const a=new Zm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(a,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,a={}){if(this._document){const n=this._document.data.field(Ex("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,a.serverTimestamps)}}}class Zm extends mv{data(t={}){return super.data(t)}}class SC{constructor(t,a,n,i){this._firestore=t,this._userDataWriter=a,this._snapshot=i,this.metadata=new fd(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((a=>t.push(a))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,a){this._snapshot.docs.forEach((n=>{t.call(a,new Zm(this._firestore,this._userDataWriter,n.key,n,new fd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const a=!!t.includeMetadataChanges;if(a&&this._snapshot.excludesMetadataChanges)throw new er(bt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===a||(this._cachedChanges=(function(i,c){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((u=>{const m=new Zm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new fd(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:m,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>c||u.type!==3)).map((u=>{const m=new Zm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new fd(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let x=-1,g=-1;return u.type!==0&&(x=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),g=o.indexOf(u.doc.key)),{type:XM(u.type),doc:m,oldIndex:x,newIndex:g}}))}})(this,a),this._cachedChangesIncludeMetadataChanges=a),this._cachedChanges}}function XM(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jr()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(r){r=Ys(r,Ss);const t=Ys(r.firestore,zi);return FM(Xu(t),r._key).then((a=>EC(t,r,a)))}class Px extends TC{constructor(t){super(),this.firestore=t}convertBytes(t){return new hc(t)}convertReference(t){const a=this.convertDocumentKey(t,this.firestore._databaseId);return new Ss(this.firestore,null,a)}}function Jt(r){r=Ys(r,To);const t=Ys(r.firestore,zi),a=Xu(t),n=new Px(t);return jC(r._query),OM(a,r._query).then((i=>new SC(t,n,r,i)))}function hl(r,t,a){r=Ys(r,Ss);const n=Ys(r.firestore,zi),i=hv(r.converter,t,a);return Ix(n,[rv(eh(n),"setDoc",r._key,i,r.converter!==null,a).toMutation(r._key,js.none())])}function Ga(r,t,a,...n){r=Ys(r,Ss);const i=Ys(r.firestore,zi),c=eh(i);let o;return o=typeof(t=Ta(t))=="string"||t instanceof Ju?vC(c,"updateDoc",r._key,t,a,n):yC(c,"updateDoc",r._key,t),Ix(i,[o.toMutation(r._key,js.exists(!0))])}function sc(r){return Ix(Ys(r.firestore,zi),[new vx(r._key,js.none())])}function ml(r,t){const a=Ys(r.firestore,zi),n=se(r),i=hv(r.converter,t);return Ix(a,[rv(eh(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,js.exists(!1))]).then((()=>n))}function it(r,...t){var a,n,i;r=Ta(r);let c={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||h2(t[o])||(c=t[o],o++);const u={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(h2(t[o])){const k=t[o];t[o]=(a=k.next)===null||a===void 0?void 0:a.bind(k),t[o+1]=(n=k.error)===null||n===void 0?void 0:n.bind(k),t[o+2]=(i=k.complete)===null||i===void 0?void 0:i.bind(k)}let m,x,g;if(r instanceof Ss)x=Ys(r.firestore,zi),g=xx(r._key.path),m={next:k=>{t[o]&&t[o](EC(x,r,k))},error:t[o+1],complete:t[o+2]};else{const k=Ys(r,To);x=Ys(k.firestore,zi),g=k._query;const S=new Px(x);m={next:_=>{t[o]&&t[o](new SC(x,S,k,_))},error:t[o+1],complete:t[o+2]},jC(r._query)}return(function(S,_,I,P){const b=new Xy(P),B=new Ky(_,b,I);return S.asyncQueue.enqueueAndForget((async()=>qy(await Np(S),B))),()=>{b.su(),S.asyncQueue.enqueueAndForget((async()=>Wy(await Np(S),B)))}})(Xu(x),g,u,m)}function Ix(r,t){return(function(n,i){const c=new $i;return n.asyncQueue.enqueueAndForget((async()=>kM(await RM(n),i,c))),c.promise})(Xu(r),t)}function EC(r,t,a){const n=a.docs.get(t._key),i=new Px(r);return new mv(r,i,t._key,n,new fd(a.hasPendingWrites,a.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM={maxAttempts:5};function W0(r,t){if((r=Ta(r)).firestore!==t)throw new er(bt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(t,a){this._firestore=t,this._transaction=a,this._dataReader=eh(t)}get(t){const a=W0(t,this._firestore),n=new QM(this._firestore);return this._transaction.lookup([a._key]).then((i=>{if(!i||i.length!==1)return jr();const c=i[0];if(c.isFoundDocument())return new Cp(this._firestore,n,c.key,c,a.converter);if(c.isNoDocument())return new Cp(this._firestore,n,a._key,null,a.converter);throw jr()}))}set(t,a,n){const i=W0(t,this._firestore),c=hv(i.converter,a,n),o=rv(this._dataReader,"Transaction.set",i._key,c,i.converter!==null,n);return this._transaction.set(i._key,o),this}update(t,a,n,...i){const c=W0(t,this._firestore);let o;return o=typeof(a=Ta(a))=="string"||a instanceof Ju?vC(this._dataReader,"Transaction.update",c._key,a,n,i):yC(this._dataReader,"Transaction.update",c._key,a),this._transaction.update(c._key,o),this}delete(t){const a=W0(t,this._firestore);return this._transaction.delete(a._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF extends ZM{constructor(t,a){super(t,a),this._firestore=t}get(t){const a=W0(t,this._firestore),n=new Px(this._firestore);return super.get(t).then((i=>new mv(this._firestore,n,a._key,i._document,new fd(!1,!1),a.converter)))}}function vr(r,t,a){r=Ys(r,zi);const n=Object.assign(Object.assign({},JM),a);return(function(c){if(c.maxAttempts<1)throw new er(bt.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(c,o,u){const m=new $i;return c.asyncQueue.enqueueAndForget((async()=>{const x=await MM(c);new $M(c.asyncQueue,x,u,o,m).Iu()})),m.promise})(Xu(r),(i=>t(new eF(r,i))),n)}function mt(){return new av("serverTimestamp")}function pr(r){return new sv("increment",r)}(function(t,a=!0){(function(i){Wd=i})(kc),xi(new Wn("firestore",((n,{instanceIdentifier:i,options:c})=>{const o=n.getProvider("app").getImmediate(),u=new zi(new Y8(n.getProvider("auth-internal")),new J8(o,n.getProvider("app-check-internal")),(function(x,g){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new er(bt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bu(x.options.projectId,g)})(o,i),o);return c=Object.assign({useFetchStreams:a},c),u._setSettings(c),u}),"PUBLIC").setMultipleInstances(!0)),ln(gN,fN,t),ln(gN,fN,"esm2017")})();function pv(r,t){var a={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(a[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(a[n[i]]=r[n[i]]);return a}function _C(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tF=_C,PC=new wc("auth","Firebase",_C());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp=new cx("@firebase/auth");function rF(r,...t){Tp.logLevel<=Or.WARN&&Tp.warn(`Auth (${kc}): ${r}`,...t)}function ep(r,...t){Tp.logLevel<=Or.ERROR&&Tp.error(`Auth (${kc}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(r,...t){throw xv(r,...t)}function Ai(r,...t){return xv(r,...t)}function IC(r,t,a){const n=Object.assign(Object.assign({},tF()),{[t]:a});return new wc("auth","Firebase",n).create(t,{appName:r.name})}function uo(r){return IC(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xv(r,...t){if(typeof r!="string"){const a=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(a,...n)}return PC.create(r,...t)}function Tr(r,t,...a){if(!r)throw xv(t,...a)}function io(r){const t="INTERNAL ASSERTION FAILED: "+r;throw ep(t),new Error(t)}function vo(r,t){r||io(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function aF(){return x2()==="http:"||x2()==="https:"}function x2(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aF()||y3()||"connection"in navigator)?navigator.onLine:!0}function nF(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(t,a){this.shortDelay=t,this.longDelay=a,vo(a>t,"Short delay should be less than long delay!"),this.isMobile=tD()||sD()}get(){return sF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(r,t){vo(r.emulator,"Emulator should always be set here");const{url:a}=r.emulator;return t?`${a}${t.startsWith("/")?t.slice(1):t}`:a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{static initialize(t,a,n){this.fetchImpl=t,a&&(this.headersImpl=a),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;io("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;io("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;io("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lF=new rh(3e4,6e4);function So(r,t){return r.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:r.tenantId}):t}async function bi(r,t,a,n,i={}){return DC(r,i,async()=>{let c={},o={};n&&(t==="GET"?o=n:c={body:JSON.stringify(n)});const u=qu(Object.assign({key:r.config.apiKey},o)).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const x=Object.assign({method:t,headers:m},c);return aD()||(x.referrerPolicy="no-referrer"),$C.fetch()(await AC(r,r.config.apiHost,a,u),x)})}async function DC(r,t,a){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},iF),t);try{const i=new dF(r),c=await Promise.race([a(),i.promise]);i.clearNetworkTimeout();const o=await c.json();if("needConfirmation"in o)throw $m(r,"account-exists-with-different-credential",o);if(c.ok&&!("errorMessage"in o))return o;{const u=c.ok?o.errorMessage:o.error.message,[m,x]=u.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw $m(r,"credential-already-in-use",o);if(m==="EMAIL_EXISTS")throw $m(r,"email-already-in-use",o);if(m==="USER_DISABLED")throw $m(r,"user-disabled",o);const g=n[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw IC(r,g,x);fi(r,g)}}catch(i){if(i instanceof Gn)throw i;fi(r,"network-request-failed",{message:String(i)})}}async function ah(r,t,a,n,i={}){const c=await bi(r,t,a,n,i);return"mfaPendingCredential"in c&&fi(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function AC(r,t,a,n){const i=`${t}${a}?${n}`,c=r,o=c.config.emulator?gv(r.config,i):`${r.config.apiScheme}://${i}`;return oF.includes(a)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(o).toString():o}function cF(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((a,n)=>{this.timer=setTimeout(()=>n(Ai(this.auth,"network-request-failed")),lF.get())})}}function $m(r,t,a){const n={appName:r.name};a.email&&(n.email=a.email),a.phoneNumber&&(n.phoneNumber=a.phoneNumber);const i=Ai(r,t,n);return i.customData._tokenResponse=a,i}function g2(r){return r!==void 0&&r.enterprise!==void 0}class uF{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const a of this.recaptchaEnforcementState)if(a.provider&&a.provider===t)return cF(a.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hF(r,t){return bi(r,"GET","/v2/recaptchaConfig",So(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mF(r,t){return bi(r,"POST","/v1/accounts:delete",t)}async function Sp(r,t){return bi(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function pF(r,t=!1){const a=Ta(r),n=await a.getIdToken(t),i=fv(n);Tr(i&&i.exp&&i.auth_time&&i.iat,a.auth,"internal-error");const c=typeof i.firebase=="object"?i.firebase:void 0,o=c?.sign_in_provider;return{claims:i,token:n,authTime:ru(Ff(i.auth_time)),issuedAtTime:ru(Ff(i.iat)),expirationTime:ru(Ff(i.exp)),signInProvider:o||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Ff(r){return Number(r)*1e3}function fv(r){const[t,a,n]=r.split(".");if(t===void 0||a===void 0||n===void 0)return ep("JWT malformed, contained fewer than 3 sections"),null;try{const i=m3(a);return i?JSON.parse(i):(ep("Failed to decode base64 JWT payload"),null)}catch(i){return ep("Caught error parsing JWT payload as JSON",i?.toString()),null}}function f2(r){const t=fv(r);return Tr(t,"internal-error"),Tr(typeof t.exp<"u","internal-error"),Tr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(r,t,a=!1){if(a)return t;try{return await t}catch(n){throw n instanceof Gn&&xF(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function xF({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var a;if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((a=this.user.stsTokenManager.expirationTime)!==null&&a!==void 0?a:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const a=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},a)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(t,a){this.createdAt=t,this.lastLoginAt=a,this._initializeTime()}_initializeTime(){this.lastSignInTime=ru(this.lastLoginAt),this.creationTime=ru(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ep(r){var t;const a=r.auth,n=await r.getIdToken(),i=await mc(r,Sp(a,{idToken:n}));Tr(i?.users.length,a,"internal-error");const c=i.users[0];r._notifyReloadListener(c);const o=!((t=c.providerUserInfo)===null||t===void 0)&&t.length?RC(c.providerUserInfo):[],u=bF(r.providerData,o),m=r.isAnonymous,x=!(r.email&&c.passwordHash)&&!u?.length,g=m?x:!1,k={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:u,metadata:new Fb(c.createdAt,c.lastLoginAt),isAnonymous:g};Object.assign(r,k)}async function fF(r){const t=Ta(r);await Ep(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function bF(r,t){return[...r.filter(n=>!t.some(i=>i.providerId===n.providerId)),...t]}function RC(r){return r.map(t=>{var{providerId:a}=t,n=pv(t,["providerId"]);return{providerId:a,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yF(r,t){const a=await DC(r,{},async()=>{const n=qu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:c}=r.config,o=await AC(r,i,"/v1/token",`key=${c}`),u=await r._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",$C.fetch()(o,{method:"POST",headers:u,body:n})});return{accessToken:a.access_token,expiresIn:a.expires_in,refreshToken:a.refresh_token}}async function vF(r,t){return bi(r,"POST","/v2/accounts:revokeToken",So(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Tr(t.idToken,"internal-error"),Tr(typeof t.idToken<"u","internal-error"),Tr(typeof t.refreshToken<"u","internal-error");const a="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):f2(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,a)}updateFromIdToken(t){Tr(t.length!==0,"internal-error");const a=f2(t);this.updateTokensAndExpiration(t,null,a)}async getToken(t,a=!1){return!a&&this.accessToken&&!this.isExpired?this.accessToken:(Tr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,a){const{accessToken:n,refreshToken:i,expiresIn:c}=await yF(t,a);this.updateTokensAndExpiration(n,i,Number(c))}updateTokensAndExpiration(t,a,n){this.refreshToken=a||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,a){const{refreshToken:n,accessToken:i,expirationTime:c}=a,o=new Td;return n&&(Tr(typeof n=="string","internal-error",{appName:t}),o.refreshToken=n),i&&(Tr(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),c&&(Tr(typeof c=="number","internal-error",{appName:t}),o.expirationTime=c),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Td,this.toJSON())}_performRefresh(){return io("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(r,t){Tr(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class ui{constructor(t){var{uid:a,auth:n,stsTokenManager:i}=t,c=pv(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=a,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Fb(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(t){const a=await mc(this,this.stsTokenManager.getToken(this.auth,t));return Tr(a,this.auth,"internal-error"),this.accessToken!==a&&(this.accessToken=a,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),a}getIdTokenResult(t){return pF(this,t)}reload(){return fF(this)}_assign(t){this!==t&&(Tr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(a=>Object.assign({},a)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const a=new ui(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return a.metadata._copy(this.metadata),a}_onReload(t){Tr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,a=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),a&&await Ep(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(uo(this.auth));const t=await this.getIdToken();return await mc(this,mF(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,a){var n,i,c,o,u,m,x,g;const k=(n=a.displayName)!==null&&n!==void 0?n:void 0,S=(i=a.email)!==null&&i!==void 0?i:void 0,_=(c=a.phoneNumber)!==null&&c!==void 0?c:void 0,I=(o=a.photoURL)!==null&&o!==void 0?o:void 0,P=(u=a.tenantId)!==null&&u!==void 0?u:void 0,b=(m=a._redirectEventId)!==null&&m!==void 0?m:void 0,B=(x=a.createdAt)!==null&&x!==void 0?x:void 0,L=(g=a.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:O,emailVerified:te,isAnonymous:ne,providerData:be,stsTokenManager:H}=a;Tr(O&&H,t,"internal-error");const z=Td.fromJSON(this.name,H);Tr(typeof O=="string",t,"internal-error"),Jo(k,t.name),Jo(S,t.name),Tr(typeof te=="boolean",t,"internal-error"),Tr(typeof ne=="boolean",t,"internal-error"),Jo(_,t.name),Jo(I,t.name),Jo(P,t.name),Jo(b,t.name),Jo(B,t.name),Jo(L,t.name);const F=new ui({uid:O,auth:t,email:S,emailVerified:te,displayName:k,isAnonymous:ne,photoURL:I,phoneNumber:_,tenantId:P,stsTokenManager:z,createdAt:B,lastLoginAt:L});return be&&Array.isArray(be)&&(F.providerData=be.map(v=>Object.assign({},v))),b&&(F._redirectEventId=b),F}static async _fromIdTokenResponse(t,a,n=!1){const i=new Td;i.updateFromServerResponse(a);const c=new ui({uid:a.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await Ep(c),c}static async _fromGetAccountInfoResponse(t,a,n){const i=a.users[0];Tr(i.localId!==void 0,"internal-error");const c=i.providerUserInfo!==void 0?RC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!c?.length,u=new Td;u.updateFromIdToken(n);const m=new ui({uid:i.localId,auth:t,stsTokenManager:u,isAnonymous:o}),x={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Fb(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!c?.length};return Object.assign(m,x),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=new Map;function oo(r){vo(r instanceof Function,"Expected a class definition");let t=b2.get(r);return t?(vo(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,b2.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,a){this.storage[t]=a}async _get(t){const a=this.storage[t];return a===void 0?null:a}async _remove(t){delete this.storage[t]}_addListener(t,a){}_removeListener(t,a){}}MC.type="NONE";const y2=MC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(r,t,a){return`firebase:${r}:${t}:${a}`}class Sd{constructor(t,a,n){this.persistence=t,this.auth=a,this.userKey=n;const{config:i,name:c}=this.auth;this.fullUserKey=tp(this.userKey,i.apiKey,c),this.fullPersistenceKey=tp("persistence",i.apiKey,c),this.boundEventHandler=a._onStorageEvent.bind(a),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const a=await Sp(this.auth,{idToken:t}).catch(()=>{});return a?ui._fromGetAccountInfoResponse(this.auth,a,t):null}return ui._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const a=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,a)return this.setCurrentUser(a)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,a,n="authUser"){if(!a.length)return new Sd(oo(y2),t,n);const i=(await Promise.all(a.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=i[0]||oo(y2);const o=tp(n,t.config.apiKey,t.name);let u=null;for(const x of a)try{const g=await x._get(o);if(g){let k;if(typeof g=="string"){const S=await Sp(t,{idToken:g}).catch(()=>{});if(!S)break;k=await ui._fromGetAccountInfoResponse(t,S,g)}else k=ui._fromJSON(t,g);x!==c&&(u=k),c=x;break}}catch{}const m=i.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!m.length?new Sd(c,t,n):(c=m[0],u&&await c._set(o,u.toJSON()),await Promise.all(a.map(async x=>{if(x!==c)try{await x._remove(o)}catch{}})),new Sd(c,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(BC(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(FC(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(VC(t))return"Blackberry";if(UC(t))return"Webos";if(OC(t))return"Safari";if((t.includes("chrome/")||LC(t))&&!t.includes("edge/"))return"Chrome";if(zC(t))return"Android";{const a=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(a);if(n?.length===2)return n[1]}return"Other"}function FC(r=zs()){return/firefox\//i.test(r)}function OC(r=zs()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function LC(r=zs()){return/crios\//i.test(r)}function BC(r=zs()){return/iemobile/i.test(r)}function zC(r=zs()){return/android/i.test(r)}function VC(r=zs()){return/blackberry/i.test(r)}function UC(r=zs()){return/webos/i.test(r)}function bv(r=zs()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function wF(r=zs()){var t;return bv(r)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function kF(){return nD()&&document.documentMode===10}function HC(r=zs()){return bv(r)||zC(r)||UC(r)||VC(r)||/windows phone/i.test(r)||BC(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(r,t=[]){let a;switch(r){case"Browser":a=v2(zs());break;case"Worker":a=`${v2(zs())}-${r}`;break;default:a=r}const n=t.length?t.join(","):"FirebaseCore-web";return`${a}/JsCore/${kc}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,a){const n=c=>new Promise((o,u)=>{try{const m=t(c);o(m)}catch(m){u(m)}});n.onAbort=a,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const a=[];try{for(const n of this.queue)await n(t),n.onAbort&&a.push(n.onAbort)}catch(n){a.reverse();for(const i of a)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jF(r,t={}){return bi(r,"GET","/v2/passwordPolicy",So(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF=6;class TF{constructor(t){var a,n,i,c;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(a=o.minPasswordLength)!==null&&a!==void 0?a:CF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=t.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(c=t.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var a,n,i,c,o,u;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,m),this.validatePasswordCharacterOptions(t,m),m.isValid&&(m.isValid=(a=m.meetsMinPasswordLength)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(n=m.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),m.isValid&&(m.isValid=(i=m.containsLowercaseLetter)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(c=m.containsUppercaseLetter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(o=m.containsNumericCharacter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(u=m.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),m}validatePasswordLengthOptions(t,a){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(a.meetsMinPasswordLength=t.length>=n),i&&(a.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,a){this.updatePasswordCharacterOptionsStatuses(a,!1,!1,!1,!1);let n;for(let i=0;i<t.length;i++)n=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(a,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,a,n,i,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=a)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(t,a,n,i){this.app=t,this.heartbeatServiceProvider=a,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new w2(this),this.idTokenSubscription=new w2(this),this.beforeStateQueue=new NF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,a){return a&&(this._popupRedirectResolver=oo(a)),this._initializationPromise=this.queue(async()=>{var n,i,c;if(!this._deleted&&(this.persistenceManager=await Sd.create(this,t),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(a),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const a=await Sp(this,{idToken:t}),n=await ui._fromGetAccountInfoResponse(this,a,t);await this.directlySetCurrentUser(n)}catch(a){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",a),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var a;if(jn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,c=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId,u=i?._redirectEventId,m=await this.tryRedirectSignIn(t);(!o||o===u)&&m?.user&&(i=m.user,c=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Tr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let a=null;try{a=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return a}async reloadAndSetCurrentUserOrClear(t){try{await Ep(t)}catch(a){if(a?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=nF()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(jn(this.app))return Promise.reject(uo(this));const a=t?Ta(t):null;return a&&Tr(a.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(a&&a._clone(this))}async _updateCurrentUser(t,a=!1){if(!this._deleted)return t&&Tr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),a||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(uo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return jn(this.app)?Promise.reject(uo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oo(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const a=this._getPasswordPolicyInternal();return a.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):a.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await jF(this),a=new TF(t);this.tenantId===null?this._projectPasswordPolicy=a:this._tenantPasswordPolicies[this.tenantId]=a}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new wc("auth","Firebase",t())}onAuthStateChanged(t,a,n){return this.registerStateListener(this.authStateSubscription,t,a,n)}beforeAuthStateChanged(t,a){return this.beforeStateQueue.pushCallback(t,a)}onIdTokenChanged(t,a,n){return this.registerStateListener(this.idTokenSubscription,t,a,n)}authStateReady(){return new Promise((t,a)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},a)}})}async revokeAccessToken(t){if(this.currentUser){const a=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:a};this.tenantId!=null&&(n.tenantId=this.tenantId),await vF(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,a){const n=await this.getOrInitRedirectPersistenceManager(a);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const a=t&&oo(t)||this._popupRedirectResolver;Tr(a,this,"argument-error"),this.redirectPersistenceManager=await Sd.create(this,[oo(a._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var a,n;return this._isInitialized&&await this.queue(async()=>{}),((a=this._currentUser)===null||a===void 0?void 0:a._redirectEventId)===t?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,a;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(a=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&a!==void 0?a:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,a,n,i){if(this._deleted)return()=>{};const c=typeof a=="function"?a:a.next.bind(a);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tr(u,this,"internal-error"),u.then(()=>{o||c(this.currentUser)}),typeof a=="function"){const m=t.addObserver(a,n,i);return()=>{o=!0,m()}}else{const m=t.addObserver(a);return()=>{o=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Tr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=qC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const a={"X-Client-Version":this.clientVersion};this.app.options.appId&&(a["X-Firebase-gmpid"]=this.app.options.appId);const n=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());n&&(a["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(a["X-Firebase-AppCheck"]=i),a}async _getAppCheckToken(){var t;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const a=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return a?.error&&rF(`Error while retrieving App Check token: ${a.error}`),a?.token}}function _l(r){return Ta(r)}class w2{constructor(t){this.auth=t,this.observer=null,this.addObserver=hD(a=>this.observer=a)}get next(){return Tr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $x={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EF(r){$x=r}function WC(r){return $x.loadJS(r)}function _F(){return $x.recaptchaEnterpriseScript}function PF(){return $x.gapiScript}function IF(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class $F{constructor(){this.enterprise=new DF}ready(t){t()}execute(t,a){return Promise.resolve("token")}render(t,a){return""}}class DF{ready(t){t()}execute(t,a){return Promise.resolve("token")}render(t,a){return""}}const AF="recaptcha-enterprise",GC="NO_RECAPTCHA";class RF{constructor(t){this.type=AF,this.auth=_l(t)}async verify(t="verify",a=!1){async function n(c){if(!a){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(o,u)=>{hF(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const x=new uF(m);return c.tenantId==null?c._agentRecaptchaConfig=x:c._tenantRecaptchaConfigs[c.tenantId]=x,o(x.siteKey)}}).catch(m=>{u(m)})})}function i(c,o,u){const m=window.grecaptcha;g2(m)?m.enterprise.ready(()=>{m.enterprise.execute(c,{action:t}).then(x=>{o(x)}).catch(()=>{o(GC)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $F().execute("siteKey",{action:"verify"}):new Promise((c,o)=>{n(this.auth).then(u=>{if(!a&&g2(window.grecaptcha))i(u,c,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let m=_F();m.length!==0&&(m+=u),WC(m).then(()=>{i(u,c,o)}).catch(x=>{o(x)})}}).catch(u=>{o(u)})})}}async function k2(r,t,a,n=!1,i=!1){const c=new RF(r);let o;if(i)o=GC;else try{o=await c.verify(a)}catch{o=await c.verify(a,!0)}const u=Object.assign({},t);if(a==="mfaSmsEnrollment"||a==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const m=u.phoneEnrollmentInfo.phoneNumber,x=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:x,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const m=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function _p(r,t,a,n,i){var c;if(!((c=r._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await k2(r,t,a,a==="getOobCode");return n(r,o)}else return n(r,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${a} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await k2(r,t,a,a==="getOobCode");return n(r,u)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(r,t){const a=Tl(r,"auth");if(a.isInitialized()){const i=a.getImmediate(),c=a.getOptions();if(pl(c,t??{}))return i;fi(i,"already-initialized")}return a.initialize({options:t})}function FF(r,t){const a=t?.persistence||[],n=(Array.isArray(a)?a:[a]).map(oo);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(n,t?.popupRedirectResolver)}function OF(r,t,a){const n=_l(r);Tr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const i=!1,c=KC(t),{host:o,port:u}=LF(t),m=u===null?"":`:${u}`,x={url:`${c}//${o}${m}/`},g=Object.freeze({host:o,port:u,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Tr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Tr(pl(x,n.config.emulator)&&pl(g,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=x,n.emulatorConfig=g,n.settings.appVerificationDisabledForTesting=!0,BF()}function KC(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function LF(r){const t=KC(r),a=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!a)return{host:"",port:null};const n=a[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const c=i[1];return{host:c,port:N2(n.substr(c.length+1))}}else{const[c,o]=n.split(":");return{host:c,port:N2(o)}}}function N2(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function BF(){function r(){const t=document.createElement("p"),a=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",a.position="fixed",a.width="100%",a.backgroundColor="#ffffff",a.border=".1em solid #000000",a.color="#b50000",a.bottom="0px",a.left="0px",a.margin="0px",a.zIndex="10000",a.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(t,a){this.providerId=t,this.signInMethod=a}toJSON(){return io("not implemented")}_getIdTokenResponse(t){return io("not implemented")}_linkToIdToken(t,a){return io("not implemented")}_getReauthenticationResolver(t){return io("not implemented")}}async function zF(r,t){return bi(r,"POST","/v1/accounts:update",t)}async function VF(r,t){return bi(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UF(r,t){return ah(r,"POST","/v1/accounts:signInWithPassword",So(r,t))}async function HF(r,t){return bi(r,"POST","/v1/accounts:sendOobCode",So(r,t))}async function qF(r,t){return HF(r,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WF(r,t){return ah(r,"POST","/v1/accounts:signInWithEmailLink",So(r,t))}async function GF(r,t){return ah(r,"POST","/v1/accounts:signInWithEmailLink",So(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends yv{constructor(t,a,n,i=null){super("password",n),this._email=t,this._password=a,this._tenantId=i}static _fromEmailAndPassword(t,a){return new Cu(t,a,"password")}static _fromEmailAndCode(t,a,n=null){return new Cu(t,a,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const a=typeof t=="string"?JSON.parse(t):t;if(a?.email&&a?.password){if(a.signInMethod==="password")return this._fromEmailAndPassword(a.email,a.password);if(a.signInMethod==="emailLink")return this._fromEmailAndCode(a.email,a.password,a.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const a={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _p(t,a,"signInWithPassword",UF);case"emailLink":return WF(t,{email:this._email,oobCode:this._password});default:fi(t,"internal-error")}}async _linkToIdToken(t,a){switch(this.signInMethod){case"password":const n={idToken:a,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _p(t,n,"signUpPassword",VF);case"emailLink":return GF(t,{idToken:a,email:this._email,oobCode:this._password});default:fi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ed(r,t){return ah(r,"POST","/v1/accounts:signInWithIdp",So(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF="http://localhost";class pc extends yv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const a=new pc(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(a.idToken=t.idToken),t.accessToken&&(a.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(a.nonce=t.nonce),t.pendingToken&&(a.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(a.accessToken=t.oauthToken,a.secret=t.oauthTokenSecret):fi("argument-error"),a}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const a=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:i}=a,c=pv(a,["providerId","signInMethod"]);if(!n||!i)return null;const o=new pc(n,i);return o.idToken=c.idToken||void 0,o.accessToken=c.accessToken||void 0,o.secret=c.secret,o.nonce=c.nonce,o.pendingToken=c.pendingToken||null,o}_getIdTokenResponse(t){const a=this.buildRequest();return Ed(t,a)}_linkToIdToken(t,a){const n=this.buildRequest();return n.idToken=a,Ed(t,n)}_getReauthenticationResolver(t){const a=this.buildRequest();return a.autoCreate=!1,Ed(t,a)}buildRequest(){const t={requestUri:KF,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const a={};this.idToken&&(a.id_token=this.idToken),this.accessToken&&(a.access_token=this.accessToken),this.secret&&(a.oauth_token_secret=this.secret),a.providerId=this.providerId,this.nonce&&!this.pendingToken&&(a.nonce=this.nonce),t.postBody=qu(a)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QF(r){const t=z0(V0(r)).link,a=t?z0(V0(t)).deep_link_id:null,n=z0(V0(r)).deep_link_id;return(n?z0(V0(n)).link:null)||n||a||t||r}class vv{constructor(t){var a,n,i,c,o,u;const m=z0(V0(t)),x=(a=m.apiKey)!==null&&a!==void 0?a:null,g=(n=m.oobCode)!==null&&n!==void 0?n:null,k=YF((i=m.mode)!==null&&i!==void 0?i:null);Tr(x&&g&&k,"argument-error"),this.apiKey=x,this.operation=k,this.code=g,this.continueUrl=(c=m.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(o=m.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(u=m.tenantId)!==null&&u!==void 0?u:null}static parseLink(t){const a=QF(t);try{return new vv(a)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(){this.providerId=Xd.PROVIDER_ID}static credential(t,a){return Cu._fromEmailAndPassword(t,a)}static credentialWithLink(t,a){const n=vv.parseLink(a);return Tr(n,"argument-error"),Cu._fromEmailAndCode(t,n.code,n.tenantId)}}Xd.PROVIDER_ID="password";Xd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends YC{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends sh{constructor(){super("facebook.com")}static credential(t){return pc._fromParams({providerId:tl.PROVIDER_ID,signInMethod:tl.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return tl.credentialFromTaggedObject(t)}static credentialFromError(t){return tl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return tl.credential(t.oauthAccessToken)}catch{return null}}}tl.FACEBOOK_SIGN_IN_METHOD="facebook.com";tl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends sh{constructor(){super("google.com"),this.addScope("profile")}static credential(t,a){return pc._fromParams({providerId:rl.PROVIDER_ID,signInMethod:rl.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:a})}static credentialFromResult(t){return rl.credentialFromTaggedObject(t)}static credentialFromError(t){return rl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:a,oauthAccessToken:n}=t;if(!a&&!n)return null;try{return rl.credential(a,n)}catch{return null}}}rl.GOOGLE_SIGN_IN_METHOD="google.com";rl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends sh{constructor(){super("github.com")}static credential(t){return pc._fromParams({providerId:al.PROVIDER_ID,signInMethod:al.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return al.credentialFromTaggedObject(t)}static credentialFromError(t){return al.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return al.credential(t.oauthAccessToken)}catch{return null}}}al.GITHUB_SIGN_IN_METHOD="github.com";al.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends sh{constructor(){super("twitter.com")}static credential(t,a){return pc._fromParams({providerId:sl.PROVIDER_ID,signInMethod:sl.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:a})}static credentialFromResult(t){return sl.credentialFromTaggedObject(t)}static credentialFromError(t){return sl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:a,oauthTokenSecret:n}=t;if(!a||!n)return null;try{return sl.credential(a,n)}catch{return null}}}sl.TWITTER_SIGN_IN_METHOD="twitter.com";sl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XF(r,t){return ah(r,"POST","/v1/accounts:signUp",So(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,a,n,i=!1){const c=await ui._fromIdTokenResponse(t,n,i),o=j2(n);return new xc({user:c,providerId:o,_tokenResponse:n,operationType:a})}static async _forOperation(t,a,n){await t._updateTokensIfNecessary(n,!0);const i=j2(n);return new xc({user:t,providerId:i,_tokenResponse:n,operationType:a})}}function j2(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends Gn{constructor(t,a,n,i){var c;super(a.code,a.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Pp.prototype),this.customData={appName:t.name,tenantId:(c=t.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:a.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,a,n,i){return new Pp(t,a,n,i)}}function QC(r,t,a,n){return(t==="reauthenticate"?a._getReauthenticationResolver(r):a._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Pp._fromErrorAndOperation(r,c,t,n):c})}async function JF(r,t,a=!1){const n=await mc(r,t._linkToIdToken(r.auth,await r.getIdToken()),a);return xc._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZF(r,t,a=!1){const{auth:n}=r;if(jn(n.app))return Promise.reject(uo(n));const i="reauthenticate";try{const c=await mc(r,QC(n,i,t,r),a);Tr(c.idToken,n,"internal-error");const o=fv(c.idToken);Tr(o,n,"internal-error");const{sub:u}=o;return Tr(r.uid===u,n,"user-mismatch"),xc._forOperation(r,i,c)}catch(c){throw c?.code==="auth/user-not-found"&&fi(n,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(r,t,a=!1){if(jn(r.app))return Promise.reject(uo(r));const n="signIn",i=await QC(r,n,t),c=await xc._fromIdTokenResponse(r,n,i);return a||await r._updateCurrentUser(c.user),c}async function eO(r,t){return XC(_l(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JC(r){const t=_l(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function tO(r,t,a){const n=_l(r);await _p(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",qF)}async function rO(r,t,a){if(jn(r.app))return Promise.reject(uo(r));const n=_l(r),o=await _p(n,{returnSecureToken:!0,email:t,password:a,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",XF).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&JC(r),m}),u=await xc._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(u.user),u}function aO(r,t,a){return jn(r.app)?Promise.reject(uo(r)):eO(Ta(r),Xd.credential(t,a)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&JC(r),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(r,t){return bi(r,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(r,{displayName:t,photoURL:a}){if(t===void 0&&a===void 0)return;const n=Ta(r),c={idToken:await n.getIdToken(),displayName:t,photoUrl:a,returnSecureToken:!0},o=await mc(n,sO(n.auth,c));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const u=n.providerData.find(({providerId:m})=>m==="password");u&&(u.displayName=n.displayName,u.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function wv(r,t){return iO(Ta(r),null,t)}async function iO(r,t,a){const{auth:n}=r,c={idToken:await r.getIdToken(),returnSecureToken:!0};a&&(c.password=a);const o=await mc(r,zF(n,c));await r._updateTokensIfNecessary(o,!0)}function oO(r,t,a,n){return Ta(r).onIdTokenChanged(t,a,n)}function lO(r,t,a){return Ta(r).beforeAuthStateChanged(t,a)}function Fr(r,t,a,n){return Ta(r).onAuthStateChanged(t,a,n)}function Zr(r){return Ta(r).signOut()}const Ip="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(t,a){this.storageRetriever=t,this.type=a}_isAvailable(){try{return this.storage?(this.storage.setItem(Ip,"1"),this.storage.removeItem(Ip),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,a){return this.storage.setItem(t,JSON.stringify(a)),Promise.resolve()}_get(t){const a=this.storage.getItem(t);return Promise.resolve(a?JSON.parse(a):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=1e3,dO=10;class e6 extends ZC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,a)=>this.onStorageEvent(t,a),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HC(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const a of Object.keys(this.listeners)){const n=this.storage.getItem(a),i=this.localCache[a];n!==i&&t(a,i,n)}}onStorageEvent(t,a=!1){if(!t.key){this.forAllChangedKeys((o,u,m)=>{this.notifyListeners(o,m)});return}const n=t.key;a?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(n);!a&&this.localCache[n]===o||this.notifyListeners(n,o)},c=this.storage.getItem(n);kF()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,dO):i()}notifyListeners(t,a){this.localCache[t]=a;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(a&&JSON.parse(a))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,a,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:a,newValue:n}),!0)})},cO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,a){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(a)}_removeListener(t,a){this.listeners[t]&&(this.listeners[t].delete(a),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,a){await super._set(t,a),this.localCache[t]=JSON.stringify(a)}async _get(t){const a=await super._get(t);return this.localCache[t]=JSON.stringify(a),a}async _remove(t){await super._remove(t),delete this.localCache[t]}}e6.type="LOCAL";const uO=e6;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6 extends ZC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,a){}_removeListener(t,a){}}t6.type="SESSION";const r6=t6;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(a){return{fulfilled:!1,reason:a}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const a=this.receivers.find(i=>i.isListeningto(t));if(a)return a;const n=new Dx(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const a=t,{eventId:n,eventType:i,data:c}=a.data,o=this.handlersMap[i];if(!o?.size)return;a.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const u=Array.from(o).map(async x=>x(a.origin,c)),m=await hO(u);a.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:m})}_subscribe(t,a){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(a)}_unsubscribe(t,a){this.handlersMap[t]&&a&&this.handlersMap[t].delete(a),(!a||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(r="",t=10){let a="";for(let n=0;n<t;n++)a+=Math.floor(Math.random()*10);return r+a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,a,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let c,o;return new Promise((u,m)=>{const x=kv("",20);i.port1.start();const g=setTimeout(()=>{m(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(k){const S=k;if(S.data.eventId===x)switch(S.data.status){case"ack":clearTimeout(g),c=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),u(S.data.response);break;default:clearTimeout(g),clearTimeout(c),m(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:x,data:a},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(){return window}function pO(r){Ri().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(){return typeof Ri().WorkerGlobalScope<"u"&&typeof Ri().importScripts=="function"}async function xO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gO(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function fO(){return a6()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6="firebaseLocalStorageDb",bO=1,$p="firebaseLocalStorage",n6="fbase_key";class nh{constructor(t){this.request=t}toPromise(){return new Promise((t,a)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{a(this.request.error)})})}}function Ax(r,t){return r.transaction([$p],t?"readwrite":"readonly").objectStore($p)}function yO(){const r=indexedDB.deleteDatabase(s6);return new nh(r).toPromise()}function Ob(){const r=indexedDB.open(s6,bO);return new Promise((t,a)=>{r.addEventListener("error",()=>{a(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore($p,{keyPath:n6})}catch(i){a(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains($p)?t(n):(n.close(),await yO(),t(await Ob()))})})}async function C2(r,t,a){const n=Ax(r,!0).put({[n6]:t,value:a});return new nh(n).toPromise()}async function vO(r,t){const a=Ax(r,!1).get(t),n=await new nh(a).toPromise();return n===void 0?null:n.value}function T2(r,t){const a=Ax(r,!0).delete(t);return new nh(a).toPromise()}const wO=800,kO=3;class i6{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ob(),this.db)}async _withRetries(t){let a=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(a++>kO)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return a6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dx._getInstance(fO()),this.receiver._subscribe("keyChanged",async(t,a)=>({keyProcessed:(await this._poll()).includes(a.key)})),this.receiver._subscribe("ping",async(t,a)=>["keyChanged"])}async initializeSender(){var t,a;if(this.activeServiceWorker=await xO(),!this.activeServiceWorker)return;this.sender=new mO(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((t=n[0])===null||t===void 0)&&t.fulfilled&&!((a=n[0])===null||a===void 0)&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||gO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Ob();return await C2(t,Ip,"1"),await T2(t,Ip),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,a){return this._withPendingWrite(async()=>(await this._withRetries(n=>C2(n,t,a)),this.localCache[t]=a,this.notifyServiceWorker(t)))}async _get(t){const a=await this._withRetries(n=>vO(n,t));return this.localCache[t]=a,a}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(a=>T2(a,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const c=Ax(i,!1).getAll();return new nh(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const a=[],n=new Set;if(t.length!==0)for(const{fbase_key:i,value:c}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(c)&&(this.notifyListeners(i,c),a.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),a.push(i));return a}notifyListeners(t,a){this.localCache[t]=a;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(a)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,a){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(a)}_removeListener(t,a){this.listeners[t]&&(this.listeners[t].delete(a),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}i6.type="LOCAL";const NO=i6;new rh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(r,t){return t?oo(t):(Tr(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv extends yv{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ed(t,this._buildIdpRequest())}_linkToIdToken(t,a){return Ed(t,this._buildIdpRequest(a))}_getReauthenticationResolver(t){return Ed(t,this._buildIdpRequest())}_buildIdpRequest(t){const a={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(a.idToken=t),a}}function CO(r){return XC(r.auth,new Nv(r),r.bypassAuthState)}function TO(r){const{auth:t,user:a}=r;return Tr(a,t,"internal-error"),ZF(a,new Nv(r),r.bypassAuthState)}async function SO(r){const{auth:t,user:a}=r;return Tr(a,t,"internal-error"),JF(a,new Nv(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(t,a,n,i,c=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(a)?a:[a]}execute(){return new Promise(async(t,a)=>{this.pendingPromise={resolve:t,reject:a};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:a,sessionId:n,postBody:i,tenantId:c,error:o,type:u}=t;if(o){this.reject(o);return}const m={auth:this.auth,requestUri:a,sessionId:n,tenantId:c||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(m))}catch(x){this.reject(x)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return CO;case"linkViaPopup":case"linkViaRedirect":return SO;case"reauthViaPopup":case"reauthViaRedirect":return TO;default:fi(this.auth,"internal-error")}}resolve(t){vo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){vo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=new rh(2e3,1e4);class bd extends o6{constructor(t,a,n,i,c){super(t,a,i,c),this.provider=n,this.authWindow=null,this.pollId=null,bd.currentPopupAction&&bd.currentPopupAction.cancel(),bd.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Tr(t,this.auth,"internal-error"),t}async onExecution(){vo(this.filter.length===1,"Popup operations only handle one event");const t=kv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(a=>{this.reject(a)}),this.resolver._isIframeWebStorageSupported(this.auth,a=>{a||this.reject(Ai(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ai(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bd.currentPopupAction=null}pollUserCancellation(){const t=()=>{var a,n;if(!((n=(a=this.authWindow)===null||a===void 0?void 0:a.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ai(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,EO.get())};t()}}bd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O="pendingRedirect",rp=new Map;class PO extends o6{constructor(t,a,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],a,void 0,n),this.eventId=null}async execute(){let t=rp.get(this.auth._key());if(!t){try{const n=await IO(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(a){t=()=>Promise.reject(a)}rp.set(this.auth._key(),t)}return this.bypassAuthState||rp.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const a=await this.auth._redirectUserForId(t.eventId);if(a)return this.user=a,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IO(r,t){const a=AO(t),n=DO(r);if(!await n._isAvailable())return!1;const i=await n._get(a)==="true";return await n._remove(a),i}function $O(r,t){rp.set(r._key(),t)}function DO(r){return oo(r._redirectPersistence)}function AO(r){return tp(_O,r.config.apiKey,r.name)}async function RO(r,t,a=!1){if(jn(r.app))return Promise.reject(uo(r));const n=_l(r),i=jO(n,t),o=await new PO(n,i,a).execute();return o&&!a&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=600*1e3;class FO{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let a=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(a=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!OO(t)||(this.hasHandledPotentialRedirect=!0,a||(this.queuedRedirectEvent=t,a=!0)),a}sendToConsumer(t,a){var n;if(t.error&&!l6(t)){const i=((n=t.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";a.onError(Ai(this.auth,i))}else a.onAuthEvent(t)}isEventForConsumer(t,a){const n=a.eventId===null||!!t.eventId&&t.eventId===a.eventId;return a.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=MO&&this.cachedEventUids.clear(),this.cachedEventUids.has(S2(t))}saveEventToCache(t){this.cachedEventUids.add(S2(t)),this.lastProcessedEventTime=Date.now()}}function S2(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function l6({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function OO(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return l6(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LO(r,t={}){return bi(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zO=/^https?/;async function VO(r){if(r.config.emulator)return;const{authorizedDomains:t}=await LO(r);for(const a of t)try{if(UO(a))return}catch{}fi(r,"unauthorized-domain")}function UO(r){const t=Mb(),{protocol:a,hostname:n}=new URL(t);if(r.startsWith("chrome-extension://")){const o=new URL(r);return o.hostname===""&&n===""?a==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):a==="chrome-extension:"&&o.hostname===n}if(!zO.test(a))return!1;if(BO.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new rh(3e4,6e4);function E2(){const r=Ri().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let a=0;a<r.CP.length;a++)r.CP[a]=null}}function qO(r){return new Promise((t,a)=>{var n,i,c;function o(){E2(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{E2(),a(Ai(r,"network-request-failed"))},timeout:HO.get()})}if(!((i=(n=Ri().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((c=Ri().gapi)===null||c===void 0)&&c.load)o();else{const u=IF("iframefcb");return Ri()[u]=()=>{gapi.load?o():a(Ai(r,"network-request-failed"))},WC(`${PF()}?onload=${u}`).catch(m=>a(m))}}).catch(t=>{throw ap=null,t})}let ap=null;function WO(r){return ap=ap||qO(r),ap}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=new rh(5e3,15e3),KO="__/auth/iframe",YO="emulator/auth/iframe",QO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JO(r){const t=r.config;Tr(t.authDomain,r,"auth-domain-config-required");const a=t.emulator?gv(t,YO):`https://${r.config.authDomain}/${KO}`,n={apiKey:t.apiKey,appName:r.name,v:kc},i=XO.get(r.config.apiHost);i&&(n.eid=i);const c=r._getFrameworks();return c.length&&(n.fw=c.join(",")),`${a}?${qu(n).slice(1)}`}async function ZO(r){const t=await WO(r),a=Ri().gapi;return Tr(a,r,"internal-error"),t.open({where:document.body,url:JO(r),messageHandlersFilter:a.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QO,dontclear:!0},n=>new Promise(async(i,c)=>{await n.restyle({setHideOnLeave:!1});const o=Ai(r,"network-request-failed"),u=Ri().setTimeout(()=>{c(o)},GO.get());function m(){Ri().clearTimeout(u),i(n)}n.ping(m).then(m,()=>{c(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tL=500,rL=600,aL="_blank",sL="http://localhost";class _2{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nL(r,t,a,n=tL,i=rL){const c=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const m=Object.assign(Object.assign({},eL),{width:n.toString(),height:i.toString(),top:c,left:o}),x=zs().toLowerCase();a&&(u=LC(x)?aL:a),FC(x)&&(t=t||sL,m.scrollbars="yes");const g=Object.entries(m).reduce((S,[_,I])=>`${S}${_}=${I},`,"");if(wF(x)&&u!=="_self")return iL(t||"",u),new _2(null);const k=window.open(t||"",u,g);Tr(k,r,"popup-blocked");try{k.focus()}catch{}return new _2(k)}function iL(r,t){const a=document.createElement("a");a.href=r,a.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),a.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL="__/auth/handler",lL="emulator/auth/handler",cL=encodeURIComponent("fac");async function P2(r,t,a,n,i,c){Tr(r.config.authDomain,r,"auth-domain-config-required"),Tr(r.config.apiKey,r,"invalid-api-key");const o={apiKey:r.config.apiKey,appName:r.name,authType:a,redirectUrl:n,v:kc,eventId:i};if(t instanceof YC){t.setDefaultLanguage(r.languageCode),o.providerId=t.providerId||"",uD(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[g,k]of Object.entries({}))o[g]=k}if(t instanceof sh){const g=t.getScopes().filter(k=>k!=="");g.length>0&&(o.scopes=g.join(","))}r.tenantId&&(o.tid=r.tenantId);const u=o;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const m=await r._getAppCheckToken(),x=m?`#${cL}=${encodeURIComponent(m)}`:"";return`${dL(r)}?${qu(u).slice(1)}${x}`}function dL({config:r}){return r.emulator?gv(r,lL):`https://${r.authDomain}/${oL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="webStorageSupport";class uL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=r6,this._completeRedirectFn=RO,this._overrideRedirectResult=$O}async _openPopup(t,a,n,i){var c;vo((c=this.eventManagers[t._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await P2(t,a,n,Mb(),i);return nL(t,o,kv())}async _openRedirect(t,a,n,i){await this._originValidation(t);const c=await P2(t,a,n,Mb(),i);return pO(c),new Promise(()=>{})}_initialize(t){const a=t._key();if(this.eventManagers[a]){const{manager:i,promise:c}=this.eventManagers[a];return i?Promise.resolve(i):(vo(c,"If manager is not set, promise should be"),c)}const n=this.initAndGetManager(t);return this.eventManagers[a]={promise:n},n.catch(()=>{delete this.eventManagers[a]}),n}async initAndGetManager(t){const a=await ZO(t),n=new FO(t);return a.register("authEvent",i=>(Tr(i?.authEvent,t,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=a,n}_isIframeWebStorageSupported(t,a){this.iframes[t._key()].send(Of,{type:Of},i=>{var c;const o=(c=i?.[0])===null||c===void 0?void 0:c[Of];o!==void 0&&a(!!o),fi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const a=t._key();return this.originValidationPromises[a]||(this.originValidationPromises[a]=VO(t)),this.originValidationPromises[a]}get _shouldInitProactively(){return HC()||OC()||bv()}}const hL=uL;var I2="@firebase/auth",$2="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const a=this.auth.onIdTokenChanged(n=>{t(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,a),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const a=this.internalListeners.get(t);a&&(this.internalListeners.delete(t),a(),this.updateProactiveRefresh())}assertAuthConfigured(){Tr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xL(r){xi(new Wn("auth",(t,{options:a})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=n.options;Tr(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const m={apiKey:o,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qC(r)},x=new SF(n,i,c,m);return FF(x,a),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,a,n)=>{t.getProvider("auth-internal").initialize()})),xi(new Wn("auth-internal",t=>{const a=_l(t.getProvider("auth").getImmediate());return(n=>new mL(n))(a)},"PRIVATE").setInstantiationMode("EXPLICIT")),ln(I2,$2,pL(r)),ln(I2,$2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=300,fL=f3("authIdTokenMaxAge")||gL;let D2=null;const bL=r=>async t=>{const a=t&&await t.getIdTokenResult(),n=a&&(new Date().getTime()-Date.parse(a.issuedAtTime))/1e3;if(n&&n>fL)return;const i=a?.token;D2!==i&&(D2=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jv(r=dx()){const t=Tl(r,"auth");if(t.isInitialized())return t.getImmediate();const a=MF(r,{popupRedirectResolver:hL,persistence:[NO,uO,r6]}),n=f3("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(n,location.origin);if(location.origin===c.origin){const o=bL(c.toString());lO(a,o,()=>o(a.currentUser)),oO(a,u=>o(u))}}const i=p3("auth");return i&&OF(a,`http://${i}`),a}function yL(){var r,t;return(t=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&t!==void 0?t:document}EF({loadJS(r){return new Promise((t,a)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=t,n.onerror=i=>{const c=Ai("internal-error");c.customData=i,a(c)},n.type="text/javascript",n.charset="UTF-8",yL().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xL("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6="firebasestorage.googleapis.com",vL="storageBucket",wL=120*1e3,kL=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Gn{constructor(t,a,n=0){super(Lf(t),`Firebase Storage: ${a} (${Lf(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Lf(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vi;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vi||(Vi={}));function Lf(r){return"storage/"+r}function NL(){const r="An unknown error occurred, please check the error payload for server response.";return new qi(Vi.UNKNOWN,r)}function jL(){return new qi(Vi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function CL(){return new qi(Vi.CANCELED,"User canceled the upload/download.")}function TL(r){return new qi(Vi.INVALID_URL,"Invalid URL '"+r+"'.")}function SL(r){return new qi(Vi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function A2(r){return new qi(Vi.INVALID_ARGUMENT,r)}function d6(){return new qi(Vi.APP_DELETED,"The Firebase app was deleted.")}function EL(r){return new qi(Vi.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(t,a){this.bucket=t,this.path_=a}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,a){let n;try{n=hi.makeFromUrl(t,a)}catch{return new hi(t,"")}if(n.path==="")return n;throw SL(t)}static makeFromUrl(t,a){let n=null;const i="([A-Za-z0-9.\\-_]+)";function c(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}const o="(/(.*))?$",u=new RegExp("^gs://"+i+o,"i"),m={bucket:1,path:3};function x(te){te.path_=decodeURIComponent(te.path)}const g="v[A-Za-z0-9_]+",k=a.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",_=new RegExp(`^https?://${k}/${g}/b/${i}/o${S}`,"i"),I={bucket:1,path:3},P=a===c6?"(?:storage.googleapis.com|storage.cloud.google.com)":a,b="([^?#]*)",B=new RegExp(`^https?://${P}/${i}/${b}`,"i"),O=[{regex:u,indices:m,postModify:c},{regex:_,indices:I,postModify:x},{regex:B,indices:{bucket:1,path:2},postModify:x}];for(let te=0;te<O.length;te++){const ne=O[te],be=ne.regex.exec(t);if(be){const H=be[ne.indices.bucket];let z=be[ne.indices.path];z||(z=""),n=new hi(H,z),ne.postModify(n);break}}if(n==null)throw TL(t);return n}}class _L{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(r,t,a){let n=1,i=null,c=null,o=!1,u=0;function m(){return u===2}let x=!1;function g(...b){x||(x=!0,t.apply(null,b))}function k(b){i=setTimeout(()=>{i=null,r(_,m())},b)}function S(){c&&clearTimeout(c)}function _(b,...B){if(x){S();return}if(b){S(),g.call(null,b,...B);return}if(m()||o){S(),g.call(null,b,...B);return}n<64&&(n*=2);let O;u===1?(u=2,O=0):O=(n+Math.random())*1e3,k(O)}let I=!1;function P(b){I||(I=!0,S(),!x&&(i!==null?(b||(u=2),clearTimeout(i),k(0)):b||(u=1)))}return k(0),c=setTimeout(()=>{o=!0,P(!0)},a),P}function IL(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(r){return r!==void 0}function R2(r,t,a,n){if(n<t)throw A2(`Invalid value for '${r}'. Expected ${t} or greater.`);if(n>a)throw A2(`Invalid value for '${r}'. Expected ${a} or less.`)}function DL(r){const t=encodeURIComponent;let a="?";for(const n in r)if(r.hasOwnProperty(n)){const i=t(n)+"="+t(r[n]);a=a+i+"&"}return a=a.slice(0,-1),a}var Dp;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Dp||(Dp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(r,t){const a=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,c=t.indexOf(r)!==-1;return a||i||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(t,a,n,i,c,o,u,m,x,g,k,S=!0){this.url_=t,this.method_=a,this.headers_=n,this.body_=i,this.successCodes_=c,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=m,this.timeout_=x,this.progressCallback_=g,this.connectionFactory_=k,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,I)=>{this.resolve_=_,this.reject_=I,this.start_()})}start_(){const t=(n,i)=>{if(i){n(!1,new Dm(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const o=u=>{const m=u.loaded,x=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,x)};this.progressCallback_!==null&&c.addUploadProgressListener(o),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(o),this.pendingConnection_=null;const u=c.getErrorCode()===Dp.NO_ERROR,m=c.getStatus();if(!u||AL(m,this.additionalRetryCodes_)&&this.retry){const g=c.getErrorCode()===Dp.ABORT;n(!1,new Dm(!1,null,g));return}const x=this.successCodes_.indexOf(m)!==-1;n(!0,new Dm(x,c))})},a=(n,i)=>{const c=this.resolve_,o=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(u,u.getResponse());$L(m)?c(m):c()}catch(m){o(m)}else if(u!==null){const m=NL();m.serverResponse=u.getErrorText(),this.errorCallback_?o(this.errorCallback_(u,m)):o(m)}else if(i.canceled){const m=this.appDelete_?d6():CL();o(m)}else{const m=jL();o(m)}};this.canceled_?a(!1,new Dm(!1,null,!0)):this.backoffId_=PL(t,a,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&IL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Dm{constructor(t,a,n){this.wasSuccessCode=t,this.connection=a,this.canceled=!!n}}function ML(r,t){t!==null&&t.length>0&&(r.Authorization="Firebase "+t)}function FL(r,t){r["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function OL(r,t){t&&(r["X-Firebase-GMPID"]=t)}function LL(r,t){t!==null&&(r["X-Firebase-AppCheck"]=t)}function BL(r,t,a,n,i,c,o=!0){const u=DL(r.urlParams),m=r.url+u,x=Object.assign({},r.headers);return OL(x,t),ML(x,a),FL(x,c),LL(x,n),new RL(m,r.method,x,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(r){if(r.length===0)return null;const t=r.lastIndexOf("/");return t===-1?"":r.slice(0,t)}function VL(r){const t=r.lastIndexOf("/",r.length-2);return t===-1?r:r.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(t,a){this._service=t,a instanceof hi?this._location=a:this._location=hi.makeFromUrl(a,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,a){return new Ap(t,a)}get root(){const t=new hi(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VL(this._location.path)}get storage(){return this._service}get parent(){const t=zL(this._location.path);if(t===null)return null;const a=new hi(this._location.bucket,t);return new Ap(this._service,a)}_throwIfRoot(t){if(this._location.path==="")throw EL(t)}}function M2(r,t){const a=t?.[vL];return a==null?null:hi.makeFromBucketSpec(a,r)}function UL(r,t,a,n={}){r.host=`${t}:${a}`,r._protocol="http";const{mockUserToken:i}=n;i&&(r._overrideAuthToken=typeof i=="string"?i:b3(i,r.app.options.projectId))}class HL{constructor(t,a,n,i,c){this.app=t,this._authProvider=a,this._appCheckProvider=n,this._url=i,this._firebaseVersion=c,this._bucket=null,this._host=c6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=wL,this._maxUploadRetryTime=kL,this._requests=new Set,i!=null?this._bucket=hi.makeFromBucketSpec(i,this._host):this._bucket=M2(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=hi.makeFromBucketSpec(this._url,t):this._bucket=M2(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){R2("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){R2("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const a=await t.getToken();if(a!==null)return a.accessToken}return null}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Ap(this,t)}_makeRequest(t,a,n,i,c=!0){if(this._deleted)return new _L(d6());{const o=BL(t,this._appId,n,i,a,this._firebaseVersion,c);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,a){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,a,n,i).getPromise()}}const F2="@firebase/storage",O2="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6="storage";function qL(r=dx(),t){r=Ta(r);const n=Tl(r,u6).getImmediate({identifier:t}),i=x3("storage");return i&&WL(n,...i),n}function WL(r,t,a,n={}){UL(r,t,a,n)}function GL(r,{instanceIdentifier:t}){const a=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new HL(a,n,i,t,kc)}function KL(){xi(new Wn(u6,GL,"PUBLIC").setMultipleInstances(!0)),ln(F2,O2,""),ln(F2,O2,"esm2017")}KL();const YL={apiKey:"AIzaSyDYacL_WIzZUSP-Tjl3794P_jHocMDqN9g",authDomain:"blackkstreaming-55f0e.firebaseapp.com",projectId:"blackkstreaming-55f0e",storageBucket:"blackkstreaming-55f0e.firebasestorage.app",messagingSenderId:"998157647233",appId:"1:998157647233:web:3e5b8128a0275ae4553c80",measurementId:"G-GFM50WNMSP"},ih=C3(YL);U8(ih);const M=VM(ih);qL(ih);const Xt=jv(ih),Cv=p.createContext({});function Tv(r){const t=p.useRef(null);return t.current===null&&(t.current=r()),t.current}const Sv=typeof window<"u",h6=Sv?p.useLayoutEffect:p.useEffect,Rx=p.createContext(null);function Ev(r,t){r.indexOf(t)===-1&&r.push(t)}function _v(r,t){const a=r.indexOf(t);a>-1&&r.splice(a,1)}const wo=(r,t,a)=>a>t?t:a<r?r:a;let Pv=()=>{};const ko={},m6=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function p6(r){return typeof r=="object"&&r!==null}const x6=r=>/^0[^.\s]+$/u.test(r);function Iv(r){let t;return()=>(t===void 0&&(t=r()),t)}const Hn=r=>r,QL=(r,t)=>a=>t(r(a)),oh=(...r)=>r.reduce(QL),Tu=(r,t,a)=>{const n=t-r;return n===0?1:(a-r)/n};class $v{constructor(){this.subscriptions=[]}add(t){return Ev(this.subscriptions,t),()=>_v(this.subscriptions,t)}notify(t,a,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,a,n);else for(let c=0;c<i;c++){const o=this.subscriptions[c];o&&o(t,a,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Mi=r=>r*1e3,Fi=r=>r/1e3;function g6(r,t){return t?r*(1e3/t):0}const f6=(r,t,a)=>(((1-3*a+3*t)*r+(3*a-6*t))*r+3*t)*r,XL=1e-7,JL=12;function ZL(r,t,a,n,i){let c,o,u=0;do o=t+(a-t)/2,c=f6(o,n,i)-r,c>0?a=o:t=o;while(Math.abs(c)>XL&&++u<JL);return o}function lh(r,t,a,n){if(r===t&&a===n)return Hn;const i=c=>ZL(c,0,1,r,a);return c=>c===0||c===1?c:f6(i(c),t,n)}const b6=r=>t=>t<=.5?r(2*t)/2:(2-r(2*(1-t)))/2,y6=r=>t=>1-r(1-t),v6=lh(.33,1.53,.69,.99),Dv=y6(v6),w6=b6(Dv),k6=r=>(r*=2)<1?.5*Dv(r):.5*(2-Math.pow(2,-10*(r-1))),Av=r=>1-Math.sin(Math.acos(r)),N6=y6(Av),j6=b6(Av),eB=lh(.42,0,1,1),tB=lh(0,0,.58,1),C6=lh(.42,0,.58,1),rB=r=>Array.isArray(r)&&typeof r[0]!="number",T6=r=>Array.isArray(r)&&typeof r[0]=="number",aB={linear:Hn,easeIn:eB,easeInOut:C6,easeOut:tB,circIn:Av,circInOut:j6,circOut:N6,backIn:Dv,backInOut:w6,backOut:v6,anticipate:k6},sB=r=>typeof r=="string",L2=r=>{if(T6(r)){Pv(r.length===4);const[t,a,n,i]=r;return lh(t,a,n,i)}else if(sB(r))return aB[r];return r},Am=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],B2={value:null};function nB(r,t){let a=new Set,n=new Set,i=!1,c=!1;const o=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},m=0;function x(k){o.has(k)&&(g.schedule(k),r()),m++,k(u)}const g={schedule:(k,S=!1,_=!1)=>{const P=_&&i?a:n;return S&&o.add(k),P.has(k)||P.add(k),k},cancel:k=>{n.delete(k),o.delete(k)},process:k=>{if(u=k,i){c=!0;return}i=!0,[a,n]=[n,a],a.forEach(x),t&&B2.value&&B2.value.frameloop[t].push(m),m=0,a.clear(),i=!1,c&&(c=!1,g.process(k))}};return g}const iB=40;function S6(r,t){let a=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},c=()=>a=!0,o=Am.reduce((O,te)=>(O[te]=nB(c,t?te:void 0),O),{}),{setup:u,read:m,resolveKeyframes:x,preUpdate:g,update:k,preRender:S,render:_,postRender:I}=o,P=()=>{const O=ko.useManualTiming?i.timestamp:performance.now();a=!1,ko.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(O-i.timestamp,iB),1)),i.timestamp=O,i.isProcessing=!0,u.process(i),m.process(i),x.process(i),g.process(i),k.process(i),S.process(i),_.process(i),I.process(i),i.isProcessing=!1,a&&t&&(n=!1,r(P))},b=()=>{a=!0,n=!0,i.isProcessing||r(P)};return{schedule:Am.reduce((O,te)=>{const ne=o[te];return O[te]=(be,H=!1,z=!1)=>(a||b(),ne.schedule(be,H,z)),O},{}),cancel:O=>{for(let te=0;te<Am.length;te++)o[Am[te]].cancel(O)},state:i,steps:o}}const{schedule:Fa,cancel:wl,state:vs,steps:Bf}=S6(typeof requestAnimationFrame<"u"?requestAnimationFrame:Hn,!0);let sp;function oB(){sp=void 0}const on={now:()=>(sp===void 0&&on.set(vs.isProcessing||ko.useManualTiming?vs.timestamp:performance.now()),sp),set:r=>{sp=r,queueMicrotask(oB)}},E6=r=>t=>typeof t=="string"&&t.startsWith(r),Rv=E6("--"),lB=E6("var(--"),Mv=r=>lB(r)?cB.test(r.split("/*")[0].trim()):!1,cB=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Jd={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Su={...Jd,transform:r=>wo(0,1,r)},Rm={...Jd,default:1},au=r=>Math.round(r*1e5)/1e5,Fv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function dB(r){return r==null}const uB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ov=(r,t)=>a=>!!(typeof a=="string"&&uB.test(a)&&a.startsWith(r)||t&&!dB(a)&&Object.prototype.hasOwnProperty.call(a,t)),_6=(r,t,a)=>n=>{if(typeof n!="string")return n;const[i,c,o,u]=n.match(Fv);return{[r]:parseFloat(i),[t]:parseFloat(c),[a]:parseFloat(o),alpha:u!==void 0?parseFloat(u):1}},hB=r=>wo(0,255,r),zf={...Jd,transform:r=>Math.round(hB(r))},rc={test:Ov("rgb","red"),parse:_6("red","green","blue"),transform:({red:r,green:t,blue:a,alpha:n=1})=>"rgba("+zf.transform(r)+", "+zf.transform(t)+", "+zf.transform(a)+", "+au(Su.transform(n))+")"};function mB(r){let t="",a="",n="",i="";return r.length>5?(t=r.substring(1,3),a=r.substring(3,5),n=r.substring(5,7),i=r.substring(7,9)):(t=r.substring(1,2),a=r.substring(2,3),n=r.substring(3,4),i=r.substring(4,5),t+=t,a+=a,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(a,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Lb={test:Ov("#"),parse:mB,transform:rc.transform},ch=r=>({test:t=>typeof t=="string"&&t.endsWith(r)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${r}`}),el=ch("deg"),Oi=ch("%"),Er=ch("px"),pB=ch("vh"),xB=ch("vw"),z2={...Oi,parse:r=>Oi.parse(r)/100,transform:r=>Oi.transform(r*100)},yd={test:Ov("hsl","hue"),parse:_6("hue","saturation","lightness"),transform:({hue:r,saturation:t,lightness:a,alpha:n=1})=>"hsla("+Math.round(r)+", "+Oi.transform(au(t))+", "+Oi.transform(au(a))+", "+au(Su.transform(n))+")"},Ms={test:r=>rc.test(r)||Lb.test(r)||yd.test(r),parse:r=>rc.test(r)?rc.parse(r):yd.test(r)?yd.parse(r):Lb.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?rc.transform(r):yd.transform(r)},gB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function fB(r){return isNaN(r)&&typeof r=="string"&&(r.match(Fv)?.length||0)+(r.match(gB)?.length||0)>0}const P6="number",I6="color",bB="var",yB="var(",V2="${}",vB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Eu(r){const t=r.toString(),a=[],n={color:[],number:[],var:[]},i=[];let c=0;const u=t.replace(vB,m=>(Ms.test(m)?(n.color.push(c),i.push(I6),a.push(Ms.parse(m))):m.startsWith(yB)?(n.var.push(c),i.push(bB),a.push(m)):(n.number.push(c),i.push(P6),a.push(parseFloat(m))),++c,V2)).split(V2);return{values:a,split:u,indexes:n,types:i}}function $6(r){return Eu(r).values}function D6(r){const{split:t,types:a}=Eu(r),n=t.length;return i=>{let c="";for(let o=0;o<n;o++)if(c+=t[o],i[o]!==void 0){const u=a[o];u===P6?c+=au(i[o]):u===I6?c+=Ms.transform(i[o]):c+=i[o]}return c}}const wB=r=>typeof r=="number"?0:r;function kB(r){const t=$6(r);return D6(r)(t.map(wB))}const kl={test:fB,parse:$6,createTransformer:D6,getAnimatableNone:kB};function Vf(r,t,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?r+(t-r)*6*a:a<1/2?t:a<2/3?r+(t-r)*(2/3-a)*6:r}function NB({hue:r,saturation:t,lightness:a,alpha:n}){r/=360,t/=100,a/=100;let i=0,c=0,o=0;if(!t)i=c=o=a;else{const u=a<.5?a*(1+t):a+t-a*t,m=2*a-u;i=Vf(m,u,r+1/3),c=Vf(m,u,r),o=Vf(m,u,r-1/3)}return{red:Math.round(i*255),green:Math.round(c*255),blue:Math.round(o*255),alpha:n}}function Rp(r,t){return a=>a>0?t:r}const Ra=(r,t,a)=>r+(t-r)*a,Uf=(r,t,a)=>{const n=r*r,i=a*(t*t-n)+n;return i<0?0:Math.sqrt(i)},jB=[Lb,rc,yd],CB=r=>jB.find(t=>t.test(r));function U2(r){const t=CB(r);if(!t)return!1;let a=t.parse(r);return t===yd&&(a=NB(a)),a}const H2=(r,t)=>{const a=U2(r),n=U2(t);if(!a||!n)return Rp(r,t);const i={...a};return c=>(i.red=Uf(a.red,n.red,c),i.green=Uf(a.green,n.green,c),i.blue=Uf(a.blue,n.blue,c),i.alpha=Ra(a.alpha,n.alpha,c),rc.transform(i))},Bb=new Set(["none","hidden"]);function TB(r,t){return Bb.has(r)?a=>a<=0?r:t:a=>a>=1?t:r}function SB(r,t){return a=>Ra(r,t,a)}function Lv(r){return typeof r=="number"?SB:typeof r=="string"?Mv(r)?Rp:Ms.test(r)?H2:PB:Array.isArray(r)?A6:typeof r=="object"?Ms.test(r)?H2:EB:Rp}function A6(r,t){const a=[...r],n=a.length,i=r.map((c,o)=>Lv(c)(c,t[o]));return c=>{for(let o=0;o<n;o++)a[o]=i[o](c);return a}}function EB(r,t){const a={...r,...t},n={};for(const i in a)r[i]!==void 0&&t[i]!==void 0&&(n[i]=Lv(r[i])(r[i],t[i]));return i=>{for(const c in n)a[c]=n[c](i);return a}}function _B(r,t){const a=[],n={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const c=t.types[i],o=r.indexes[c][n[c]],u=r.values[o]??0;a[i]=u,n[c]++}return a}const PB=(r,t)=>{const a=kl.createTransformer(t),n=Eu(r),i=Eu(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?Bb.has(r)&&!i.values.length||Bb.has(t)&&!n.values.length?TB(r,t):oh(A6(_B(n,i),i.values),a):Rp(r,t)};function R6(r,t,a){return typeof r=="number"&&typeof t=="number"&&typeof a=="number"?Ra(r,t,a):Lv(r)(r,t)}const IB=r=>{const t=({timestamp:a})=>r(a);return{start:(a=!0)=>Fa.update(t,a),stop:()=>wl(t),now:()=>vs.isProcessing?vs.timestamp:on.now()}},M6=(r,t,a=10)=>{let n="";const i=Math.max(Math.round(t/a),2);for(let c=0;c<i;c++)n+=r(c/(i-1))+", ";return`linear(${n.substring(0,n.length-2)})`},Mp=2e4;function Bv(r){let t=0;const a=50;let n=r.next(t);for(;!n.done&&t<Mp;)t+=a,n=r.next(t);return t>=Mp?1/0:t}function $B(r,t=100,a){const n=a({...r,keyframes:[0,t]}),i=Math.min(Bv(n),Mp);return{type:"keyframes",ease:c=>n.next(i*c).value/t,duration:Fi(i)}}const DB=5;function F6(r,t,a){const n=Math.max(t-DB,0);return g6(a-r(n),t-n)}const Ba={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Hf=.001;function AB({duration:r=Ba.duration,bounce:t=Ba.bounce,velocity:a=Ba.velocity,mass:n=Ba.mass}){let i,c,o=1-t;o=wo(Ba.minDamping,Ba.maxDamping,o),r=wo(Ba.minDuration,Ba.maxDuration,Fi(r)),o<1?(i=x=>{const g=x*o,k=g*r,S=g-a,_=zb(x,o),I=Math.exp(-k);return Hf-S/_*I},c=x=>{const k=x*o*r,S=k*a+a,_=Math.pow(o,2)*Math.pow(x,2)*r,I=Math.exp(-k),P=zb(Math.pow(x,2),o);return(-i(x)+Hf>0?-1:1)*((S-_)*I)/P}):(i=x=>{const g=Math.exp(-x*r),k=(x-a)*r+1;return-Hf+g*k},c=x=>{const g=Math.exp(-x*r),k=(a-x)*(r*r);return g*k});const u=5/r,m=MB(i,c,u);if(r=Mi(r),isNaN(m))return{stiffness:Ba.stiffness,damping:Ba.damping,duration:r};{const x=Math.pow(m,2)*n;return{stiffness:x,damping:o*2*Math.sqrt(n*x),duration:r}}}const RB=12;function MB(r,t,a){let n=a;for(let i=1;i<RB;i++)n=n-r(n)/t(n);return n}function zb(r,t){return r*Math.sqrt(1-t*t)}const FB=["duration","bounce"],OB=["stiffness","damping","mass"];function q2(r,t){return t.some(a=>r[a]!==void 0)}function LB(r){let t={velocity:Ba.velocity,stiffness:Ba.stiffness,damping:Ba.damping,mass:Ba.mass,isResolvedFromDuration:!1,...r};if(!q2(r,OB)&&q2(r,FB))if(r.visualDuration){const a=r.visualDuration,n=2*Math.PI/(a*1.2),i=n*n,c=2*wo(.05,1,1-(r.bounce||0))*Math.sqrt(i);t={...t,mass:Ba.mass,stiffness:i,damping:c}}else{const a=AB(r);t={...t,...a,mass:Ba.mass},t.isResolvedFromDuration=!0}return t}function Fp(r=Ba.visualDuration,t=Ba.bounce){const a=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:t}:r;let{restSpeed:n,restDelta:i}=a;const c=a.keyframes[0],o=a.keyframes[a.keyframes.length-1],u={done:!1,value:c},{stiffness:m,damping:x,mass:g,duration:k,velocity:S,isResolvedFromDuration:_}=LB({...a,velocity:-Fi(a.velocity||0)}),I=S||0,P=x/(2*Math.sqrt(m*g)),b=o-c,B=Fi(Math.sqrt(m/g)),L=Math.abs(b)<5;n||(n=L?Ba.restSpeed.granular:Ba.restSpeed.default),i||(i=L?Ba.restDelta.granular:Ba.restDelta.default);let O;if(P<1){const ne=zb(B,P);O=be=>{const H=Math.exp(-P*B*be);return o-H*((I+P*B*b)/ne*Math.sin(ne*be)+b*Math.cos(ne*be))}}else if(P===1)O=ne=>o-Math.exp(-B*ne)*(b+(I+B*b)*ne);else{const ne=B*Math.sqrt(P*P-1);O=be=>{const H=Math.exp(-P*B*be),z=Math.min(ne*be,300);return o-H*((I+P*B*b)*Math.sinh(z)+ne*b*Math.cosh(z))/ne}}const te={calculatedDuration:_&&k||null,next:ne=>{const be=O(ne);if(_)u.done=ne>=k;else{let H=ne===0?I:0;P<1&&(H=ne===0?Mi(I):F6(O,ne,be));const z=Math.abs(H)<=n,F=Math.abs(o-be)<=i;u.done=z&&F}return u.value=u.done?o:be,u},toString:()=>{const ne=Math.min(Bv(te),Mp),be=M6(H=>te.next(ne*H).value,ne,30);return ne+"ms "+be},toTransition:()=>{}};return te}Fp.applyToOptions=r=>{const t=$B(r,100,Fp);return r.ease=t.ease,r.duration=Mi(t.duration),r.type="keyframes",r};function Vb({keyframes:r,velocity:t=0,power:a=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:c=500,modifyTarget:o,min:u,max:m,restDelta:x=.5,restSpeed:g}){const k=r[0],S={done:!1,value:k},_=z=>u!==void 0&&z<u||m!==void 0&&z>m,I=z=>u===void 0?m:m===void 0||Math.abs(u-z)<Math.abs(m-z)?u:m;let P=a*t;const b=k+P,B=o===void 0?b:o(b);B!==b&&(P=B-k);const L=z=>-P*Math.exp(-z/n),O=z=>B+L(z),te=z=>{const F=L(z),v=O(z);S.done=Math.abs(F)<=x,S.value=S.done?B:v};let ne,be;const H=z=>{_(S.value)&&(ne=z,be=Fp({keyframes:[S.value,I(S.value)],velocity:F6(O,z,S.value),damping:i,stiffness:c,restDelta:x,restSpeed:g}))};return H(0),{calculatedDuration:null,next:z=>{let F=!1;return!be&&ne===void 0&&(F=!0,te(z),H(z)),ne!==void 0&&z>=ne?be.next(z-ne):(!F&&te(z),S)}}}function BB(r,t,a){const n=[],i=a||ko.mix||R6,c=r.length-1;for(let o=0;o<c;o++){let u=i(r[o],r[o+1]);if(t){const m=Array.isArray(t)?t[o]||Hn:t;u=oh(m,u)}n.push(u)}return n}function zB(r,t,{clamp:a=!0,ease:n,mixer:i}={}){const c=r.length;if(Pv(c===t.length),c===1)return()=>t[0];if(c===2&&t[0]===t[1])return()=>t[1];const o=r[0]===r[1];r[0]>r[c-1]&&(r=[...r].reverse(),t=[...t].reverse());const u=BB(t,n,i),m=u.length,x=g=>{if(o&&g<r[0])return t[0];let k=0;if(m>1)for(;k<r.length-2&&!(g<r[k+1]);k++);const S=Tu(r[k],r[k+1],g);return u[k](S)};return a?g=>x(wo(r[0],r[c-1],g)):x}function VB(r,t){const a=r[r.length-1];for(let n=1;n<=t;n++){const i=Tu(0,t,n);r.push(Ra(a,1,i))}}function UB(r){const t=[0];return VB(t,r.length-1),t}function HB(r,t){return r.map(a=>a*t)}function qB(r,t){return r.map(()=>t||C6).splice(0,r.length-1)}function su({duration:r=300,keyframes:t,times:a,ease:n="easeInOut"}){const i=rB(n)?n.map(L2):L2(n),c={done:!1,value:t[0]},o=HB(a&&a.length===t.length?a:UB(t),r),u=zB(o,t,{ease:Array.isArray(i)?i:qB(t,i)});return{calculatedDuration:r,next:m=>(c.value=u(m),c.done=m>=r,c)}}const WB=r=>r!==null;function zv(r,{repeat:t,repeatType:a="loop"},n,i=1){const c=r.filter(WB),u=i<0||t&&a!=="loop"&&t%2===1?0:c.length-1;return!u||n===void 0?c[u]:n}const GB={decay:Vb,inertia:Vb,tween:su,keyframes:su,spring:Fp};function O6(r){typeof r.type=="string"&&(r.type=GB[r.type])}class Vv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,a){return this.finished.then(t,a)}}const KB=r=>r/100;class Uv extends Vv{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(a=!0)=>{if(a){const{motionValue:n}=this.options;n&&n.updatedAt!==on.now()&&this.tick(on.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;O6(t);const{type:a=su,repeat:n=0,repeatDelay:i=0,repeatType:c,velocity:o=0}=t;let{keyframes:u}=t;const m=a||su;m!==su&&typeof u[0]!="number"&&(this.mixKeyframes=oh(KB,R6(u[0],u[1])),u=[0,100]);const x=m({...t,keyframes:u});c==="mirror"&&(this.mirroredGenerator=m({...t,keyframes:[...u].reverse(),velocity:-o})),x.calculatedDuration===null&&(x.calculatedDuration=Bv(x));const{calculatedDuration:g}=x;this.calculatedDuration=g,this.resolvedDuration=g+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=x}updateTime(t){const a=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(t,a=!1){const{generator:n,totalDuration:i,mixKeyframes:c,mirroredGenerator:o,resolvedDuration:u,calculatedDuration:m}=this;if(this.startTime===null)return n.next(0);const{delay:x=0,keyframes:g,repeat:k,repeatType:S,repeatDelay:_,type:I,onUpdate:P,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),a?this.currentTime=t:this.updateTime(t);const B=this.currentTime-x*(this.playbackSpeed>=0?1:-1),L=this.playbackSpeed>=0?B<0:B>i;this.currentTime=Math.max(B,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let O=this.currentTime,te=n;if(k){const z=Math.min(this.currentTime,i)/u;let F=Math.floor(z),v=z%1;!v&&z>=1&&(v=1),v===1&&F--,F=Math.min(F,k+1),!!(F%2)&&(S==="reverse"?(v=1-v,_&&(v-=_/u)):S==="mirror"&&(te=o)),O=wo(0,1,v)*u}const ne=L?{done:!1,value:g[0]}:te.next(O);c&&(ne.value=c(ne.value));let{done:be}=ne;!L&&m!==null&&(be=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&be);return H&&I!==Vb&&(ne.value=zv(g,this.options,b,this.speed)),P&&P(ne.value),H&&this.finish(),ne}then(t,a){return this.finished.then(t,a)}get duration(){return Fi(this.calculatedDuration)}get time(){return Fi(this.currentTime)}set time(t){t=Mi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(on.now());const a=this.playbackSpeed!==t;this.playbackSpeed=t,a&&(this.time=Fi(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=IB,startTime:a}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=a??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(on.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function YB(r){for(let t=1;t<r.length;t++)r[t]??(r[t]=r[t-1])}const ac=r=>r*180/Math.PI,Ub=r=>{const t=ac(Math.atan2(r[1],r[0]));return Hb(t)},QB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:Ub,rotateZ:Ub,skewX:r=>ac(Math.atan(r[1])),skewY:r=>ac(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},Hb=r=>(r=r%360,r<0&&(r+=360),r),W2=Ub,G2=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),K2=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),XB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:G2,scaleY:K2,scale:r=>(G2(r)+K2(r))/2,rotateX:r=>Hb(ac(Math.atan2(r[6],r[5]))),rotateY:r=>Hb(ac(Math.atan2(-r[2],r[0]))),rotateZ:W2,rotate:W2,skewX:r=>ac(Math.atan(r[4])),skewY:r=>ac(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function qb(r){return r.includes("scale")?1:0}function Wb(r,t){if(!r||r==="none")return qb(t);const a=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(a)n=XB,i=a;else{const u=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=QB,i=u}if(!i)return qb(t);const c=n[t],o=i[1].split(",").map(ZB);return typeof c=="function"?c(o):o[c]}const JB=(r,t)=>{const{transform:a="none"}=getComputedStyle(r);return Wb(a,t)};function ZB(r){return parseFloat(r.trim())}const Zd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],e0=new Set(Zd),Y2=r=>r===Jd||r===Er,ez=new Set(["x","y","z"]),tz=Zd.filter(r=>!ez.has(r));function rz(r){const t=[];return tz.forEach(a=>{const n=r.getValue(a);n!==void 0&&(t.push([a,n.get()]),n.set(a.startsWith("scale")?1:0))}),t}const nc={width:({x:r},{paddingLeft:t="0",paddingRight:a="0"})=>r.max-r.min-parseFloat(t)-parseFloat(a),height:({y:r},{paddingTop:t="0",paddingBottom:a="0"})=>r.max-r.min-parseFloat(t)-parseFloat(a),top:(r,{top:t})=>parseFloat(t),left:(r,{left:t})=>parseFloat(t),bottom:({y:r},{top:t})=>parseFloat(t)+(r.max-r.min),right:({x:r},{left:t})=>parseFloat(t)+(r.max-r.min),x:(r,{transform:t})=>Wb(t,"x"),y:(r,{transform:t})=>Wb(t,"y")};nc.translateX=nc.x;nc.translateY=nc.y;const ic=new Set;let Gb=!1,Kb=!1,Yb=!1;function L6(){if(Kb){const r=Array.from(ic).filter(n=>n.needsMeasurement),t=new Set(r.map(n=>n.element)),a=new Map;t.forEach(n=>{const i=rz(n);i.length&&(a.set(n,i),n.render())}),r.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const i=a.get(n);i&&i.forEach(([c,o])=>{n.getValue(c)?.set(o)})}),r.forEach(n=>n.measureEndState()),r.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Kb=!1,Gb=!1,ic.forEach(r=>r.complete(Yb)),ic.clear()}function B6(){ic.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(Kb=!0)})}function az(){Yb=!0,B6(),L6(),Yb=!1}class Hv{constructor(t,a,n,i,c,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=a,this.name=n,this.motionValue=i,this.element=c,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ic.add(this),Gb||(Gb=!0,Fa.read(B6),Fa.resolveKeyframes(L6))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:a,element:n,motionValue:i}=this;if(t[0]===null){const c=i?.get(),o=t[t.length-1];if(c!==void 0)t[0]=c;else if(n&&a){const u=n.readValue(a,o);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=o),i&&c===void 0&&i.set(t[0])}YB(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ic.delete(this)}cancel(){this.state==="scheduled"&&(ic.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sz=r=>r.startsWith("--");function nz(r,t,a){sz(t)?r.style.setProperty(t,a):r.style[t]=a}const iz=Iv(()=>window.ScrollTimeline!==void 0),oz={};function lz(r,t){const a=Iv(r);return()=>oz[t]??a()}const z6=lz(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),G0=([r,t,a,n])=>`cubic-bezier(${r}, ${t}, ${a}, ${n})`,Q2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:G0([0,.65,.55,1]),circOut:G0([.55,0,1,.45]),backIn:G0([.31,.01,.66,-.59]),backOut:G0([.33,1.53,.69,.99])};function V6(r,t){if(r)return typeof r=="function"?z6()?M6(r,t):"ease-out":T6(r)?G0(r):Array.isArray(r)?r.map(a=>V6(a,t)||Q2.easeOut):Q2[r]}function cz(r,t,a,{delay:n=0,duration:i=300,repeat:c=0,repeatType:o="loop",ease:u="easeOut",times:m}={},x=void 0){const g={[t]:a};m&&(g.offset=m);const k=V6(u,i);Array.isArray(k)&&(g.easing=k);const S={delay:n,duration:i,easing:Array.isArray(k)?"linear":k,fill:"both",iterations:c+1,direction:o==="reverse"?"alternate":"normal"};return x&&(S.pseudoElement=x),r.animate(g,S)}function U6(r){return typeof r=="function"&&"applyToOptions"in r}function dz({type:r,...t}){return U6(r)&&z6()?r.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class uz extends Vv{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:a,name:n,keyframes:i,pseudoElement:c,allowFlatten:o=!1,finalKeyframe:u,onComplete:m}=t;this.isPseudoElement=!!c,this.allowFlatten=o,this.options=t,Pv(typeof t.type!="string");const x=dz(t);this.animation=cz(a,n,i,x,c),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const g=zv(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(g):nz(a,n,g),this.animation.cancel()}m?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Fi(Number(t))}get time(){return Fi(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Mi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:a}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&iz()?(this.animation.timeline=t,Hn):a(this)}}const H6={anticipate:k6,backInOut:w6,circInOut:j6};function hz(r){return r in H6}function mz(r){typeof r.ease=="string"&&hz(r.ease)&&(r.ease=H6[r.ease])}const X2=10;class pz extends uz{constructor(t){mz(t),O6(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:a,onUpdate:n,onComplete:i,element:c,...o}=this.options;if(!a)return;if(t!==void 0){a.set(t);return}const u=new Uv({...o,autoplay:!1}),m=Mi(this.finishedTime??this.time);a.setWithVelocity(u.sample(m-X2).value,u.sample(m).value,X2),u.stop()}}const J2=(r,t)=>t==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(kl.test(r)||r==="0")&&!r.startsWith("url("));function xz(r){const t=r[0];if(r.length===1)return!0;for(let a=0;a<r.length;a++)if(r[a]!==t)return!0}function gz(r,t,a,n){const i=r[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const c=r[r.length-1],o=J2(i,t),u=J2(c,t);return!o||!u?!1:xz(r)||(a==="spring"||U6(a))&&n}function qv(r){return p6(r)&&"offsetHeight"in r}const fz=new Set(["opacity","clipPath","filter","transform"]),bz=Iv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function yz(r){const{motionValue:t,name:a,repeatDelay:n,repeatType:i,damping:c,type:o}=r;if(!qv(t?.owner?.current))return!1;const{onUpdate:u,transformTemplate:m}=t.owner.getProps();return bz()&&a&&fz.has(a)&&(a!=="transform"||!m)&&!u&&!n&&i!=="mirror"&&c!==0&&o!=="inertia"}const vz=40;class wz extends Vv{constructor({autoplay:t=!0,delay:a=0,type:n="keyframes",repeat:i=0,repeatDelay:c=0,repeatType:o="loop",keyframes:u,name:m,motionValue:x,element:g,...k}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=on.now();const S={autoplay:t,delay:a,type:n,repeat:i,repeatDelay:c,repeatType:o,name:m,motionValue:x,element:g,...k},_=g?.KeyframeResolver||Hv;this.keyframeResolver=new _(u,(I,P,b)=>this.onKeyframesResolved(I,P,S,!b),m,x,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,a,n,i){this.keyframeResolver=void 0;const{name:c,type:o,velocity:u,delay:m,isHandoff:x,onUpdate:g}=n;this.resolvedAt=on.now(),gz(t,c,o,u)||((ko.instantAnimations||!m)&&g?.(zv(t,n,a)),t[0]=t[t.length-1],n.duration=0,n.repeat=0);const S={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>vz?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...n,keyframes:t},_=!x&&yz(S)?new pz({...S,element:S.motionValue.owner.current}):new Uv(S);_.finished.then(()=>this.notifyFinished()).catch(Hn),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(t,a){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),az()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const kz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Nz(r){const t=kz.exec(r);if(!t)return[,];const[,a,n,i]=t;return[`--${a??n}`,i]}function q6(r,t,a=1){const[n,i]=Nz(r);if(!n)return;const c=window.getComputedStyle(t).getPropertyValue(n);if(c){const o=c.trim();return m6(o)?parseFloat(o):o}return Mv(i)?q6(i,t,a+1):i}function Wv(r,t){return r?.[t]??r?.default??r}const W6=new Set(["width","height","top","left","right","bottom",...Zd]),jz={test:r=>r==="auto",parse:r=>r},G6=r=>t=>t.test(r),K6=[Jd,Er,Oi,el,xB,pB,jz],Z2=r=>K6.find(G6(r));function Cz(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||x6(r):!0}const Tz=new Set(["brightness","contrast","saturate","opacity"]);function Sz(r){const[t,a]=r.slice(0,-1).split("(");if(t==="drop-shadow")return r;const[n]=a.match(Fv)||[];if(!n)return r;const i=a.replace(n,"");let c=Tz.has(t)?1:0;return n!==a&&(c*=100),t+"("+c+i+")"}const Ez=/\b([a-z-]*)\(.*?\)/gu,Qb={...kl,getAnimatableNone:r=>{const t=r.match(Ez);return t?t.map(Sz).join(" "):r}},ej={...Jd,transform:Math.round},_z={rotate:el,rotateX:el,rotateY:el,rotateZ:el,scale:Rm,scaleX:Rm,scaleY:Rm,scaleZ:Rm,skew:el,skewX:el,skewY:el,distance:Er,translateX:Er,translateY:Er,translateZ:Er,x:Er,y:Er,z:Er,perspective:Er,transformPerspective:Er,opacity:Su,originX:z2,originY:z2,originZ:Er},Gv={borderWidth:Er,borderTopWidth:Er,borderRightWidth:Er,borderBottomWidth:Er,borderLeftWidth:Er,borderRadius:Er,radius:Er,borderTopLeftRadius:Er,borderTopRightRadius:Er,borderBottomRightRadius:Er,borderBottomLeftRadius:Er,width:Er,maxWidth:Er,height:Er,maxHeight:Er,top:Er,right:Er,bottom:Er,left:Er,padding:Er,paddingTop:Er,paddingRight:Er,paddingBottom:Er,paddingLeft:Er,margin:Er,marginTop:Er,marginRight:Er,marginBottom:Er,marginLeft:Er,backgroundPositionX:Er,backgroundPositionY:Er,..._z,zIndex:ej,fillOpacity:Su,strokeOpacity:Su,numOctaves:ej},Pz={...Gv,color:Ms,backgroundColor:Ms,outlineColor:Ms,fill:Ms,stroke:Ms,borderColor:Ms,borderTopColor:Ms,borderRightColor:Ms,borderBottomColor:Ms,borderLeftColor:Ms,filter:Qb,WebkitFilter:Qb},Y6=r=>Pz[r];function Q6(r,t){let a=Y6(r);return a!==Qb&&(a=kl),a.getAnimatableNone?a.getAnimatableNone(t):void 0}const Iz=new Set(["auto","none","0"]);function $z(r,t,a){let n=0,i;for(;n<r.length&&!i;){const c=r[n];typeof c=="string"&&!Iz.has(c)&&Eu(c).values.length&&(i=r[n]),n++}if(i&&a)for(const c of t)r[c]=Q6(a,i)}class Dz extends Hv{constructor(t,a,n,i,c){super(t,a,n,i,c,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:a,name:n}=this;if(!a||!a.current)return;super.readKeyframes();for(let m=0;m<t.length;m++){let x=t[m];if(typeof x=="string"&&(x=x.trim(),Mv(x))){const g=q6(x,a.current);g!==void 0&&(t[m]=g),m===t.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!W6.has(n)||t.length!==2)return;const[i,c]=t,o=Z2(i),u=Z2(c);if(o!==u)if(Y2(o)&&Y2(u))for(let m=0;m<t.length;m++){const x=t[m];typeof x=="string"&&(t[m]=parseFloat(x))}else nc[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:a}=this,n=[];for(let i=0;i<t.length;i++)(t[i]===null||Cz(t[i]))&&n.push(i);n.length&&$z(t,n,a)}measureInitialState(){const{element:t,unresolvedKeyframes:a,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=nc[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a[0]=this.measuredOrigin;const i=a[a.length-1];i!==void 0&&t.getValue(n,i).jump(i,!1)}measureEndState(){const{element:t,name:a,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const i=t.getValue(a);i&&i.jump(this.measuredOrigin,!1);const c=n.length-1,o=n[c];n[c]=nc[a](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,m])=>{t.getValue(u).set(m)}),this.resolveNoneKeyframes()}}function Az(r,t,a){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let n=document;const i=a?.[r]??n.querySelectorAll(r);return i?Array.from(i):[]}return Array.from(r)}const tj=30,Rz=r=>!isNaN(parseFloat(r));class Mz{constructor(t,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const c=on.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty();i&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=a.owner}setCurrent(t){this.current=t,this.updatedAt=on.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Rz(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,a){this.events[t]||(this.events[t]=new $v);const n=this.events[t].add(a);return t==="change"?()=>{n(),Fa.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,a){this.passiveEffect=t,this.stopPassiveEffect=a}set(t,a=!0){!a||!this.passiveEffect?this.updateAndNotify(t,a):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,a,n){this.set(a),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,a=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=on.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>tj)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,tj);return g6(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(t){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=t(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ld(r,t){return new Mz(r,t)}const X6=(r,t)=>t&&typeof r=="number"?t.transform(r):r,{schedule:Kv}=S6(queueMicrotask,!1),ci={x:!1,y:!1};function J6(){return ci.x||ci.y}function Fz(r){return r==="x"||r==="y"?ci[r]?null:(ci[r]=!0,()=>{ci[r]=!1}):ci.x||ci.y?null:(ci.x=ci.y=!0,()=>{ci.x=ci.y=!1})}function Z6(r,t){const a=Az(r),n=new AbortController,i={passive:!0,...t,signal:n.signal};return[a,i,()=>n.abort()]}function rj(r){return!(r.pointerType==="touch"||J6())}function Oz(r,t,a={}){const[n,i,c]=Z6(r,a),o=u=>{if(!rj(u))return;const{target:m}=u,x=t(m,u);if(typeof x!="function"||!m)return;const g=k=>{rj(k)&&(x(k),m.removeEventListener("pointerleave",g))};m.addEventListener("pointerleave",g,i)};return n.forEach(u=>{u.addEventListener("pointerenter",o,i)}),c}const eT=(r,t)=>t?r===t?!0:eT(r,t.parentElement):!1,Yv=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,Lz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Bz(r){return Lz.has(r.tagName)||r.tabIndex!==-1}const np=new WeakSet;function aj(r){return t=>{t.key==="Enter"&&r(t)}}function qf(r,t){r.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const zz=(r,t)=>{const a=r.currentTarget;if(!a)return;const n=aj(()=>{if(np.has(a))return;qf(a,"down");const i=aj(()=>{qf(a,"up")}),c=()=>qf(a,"cancel");a.addEventListener("keyup",i,t),a.addEventListener("blur",c,t)});a.addEventListener("keydown",n,t),a.addEventListener("blur",()=>a.removeEventListener("keydown",n),t)};function sj(r){return Yv(r)&&!J6()}function Vz(r,t,a={}){const[n,i,c]=Z6(r,a),o=u=>{const m=u.currentTarget;if(!sj(u))return;np.add(m);const x=t(m,u),g=(_,I)=>{window.removeEventListener("pointerup",k),window.removeEventListener("pointercancel",S),np.has(m)&&np.delete(m),sj(_)&&typeof x=="function"&&x(_,{success:I})},k=_=>{g(_,m===window||m===document||a.useGlobalTarget||eT(m,_.target))},S=_=>{g(_,!1)};window.addEventListener("pointerup",k,i),window.addEventListener("pointercancel",S,i)};return n.forEach(u=>{(a.useGlobalTarget?window:u).addEventListener("pointerdown",o,i),qv(u)&&(u.addEventListener("focus",x=>zz(x,i)),!Bz(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),c}function tT(r){return p6(r)&&"ownerSVGElement"in r}function Uz(r){return tT(r)&&r.tagName==="svg"}const Os=r=>!!(r&&r.getVelocity),Hz=[...K6,Ms,kl],qz=r=>Hz.find(G6(r)),Qv=p.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class Wz extends p.Component{getSnapshotBeforeUpdate(t){const a=this.props.childRef.current;if(a&&t.isPresent&&!this.props.isPresent){const n=a.offsetParent,i=qv(n)&&n.offsetWidth||0,c=this.props.sizeRef.current;c.height=a.offsetHeight||0,c.width=a.offsetWidth||0,c.top=a.offsetTop,c.left=a.offsetLeft,c.right=i-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Gz({children:r,isPresent:t,anchorX:a}){const n=p.useId(),i=p.useRef(null),c=p.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=p.useContext(Qv);return p.useInsertionEffect(()=>{const{width:u,height:m,top:x,left:g,right:k}=c.current;if(t||!i.current||!u||!m)return;const S=a==="left"?`left: ${g}`:`right: ${k}`;i.current.dataset.motionPopId=n;const _=document.createElement("style");return o&&(_.nonce=o),document.head.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${m}px !important;
            ${S}px !important;
            top: ${x}px !important;
          }
        `),()=>{document.head.contains(_)&&document.head.removeChild(_)}},[t]),e.jsx(Wz,{isPresent:t,childRef:i,sizeRef:c,children:p.cloneElement(r,{ref:i})})}const Kz=({children:r,initial:t,isPresent:a,onExitComplete:n,custom:i,presenceAffectsLayout:c,mode:o,anchorX:u})=>{const m=Tv(Yz),x=p.useId();let g=!0,k=p.useMemo(()=>(g=!1,{id:x,initial:t,isPresent:a,custom:i,onExitComplete:S=>{m.set(S,!0);for(const _ of m.values())if(!_)return;n&&n()},register:S=>(m.set(S,!1),()=>m.delete(S))}),[a,m,n]);return c&&g&&(k={...k}),p.useMemo(()=>{m.forEach((S,_)=>m.set(_,!1))},[a]),p.useEffect(()=>{!a&&!m.size&&n&&n()},[a]),o==="popLayout"&&(r=e.jsx(Gz,{isPresent:a,anchorX:u,children:r})),e.jsx(Rx.Provider,{value:k,children:r})};function Yz(){return new Map}function rT(r=!0){const t=p.useContext(Rx);if(t===null)return[!0,null];const{isPresent:a,onExitComplete:n,register:i}=t,c=p.useId();p.useEffect(()=>{if(r)return i(c)},[r]);const o=p.useCallback(()=>r&&n&&n(c),[c,n,r]);return!a&&n?[!1,o]:[!0]}const Mm=r=>r.key||"";function nj(r){const t=[];return p.Children.forEach(r,a=>{p.isValidElement(a)&&t.push(a)}),t}const ve=({children:r,custom:t,initial:a=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:c="sync",propagate:o=!1,anchorX:u="left"})=>{const[m,x]=rT(o),g=p.useMemo(()=>nj(r),[r]),k=o&&!m?[]:g.map(Mm),S=p.useRef(!0),_=p.useRef(g),I=Tv(()=>new Map),[P,b]=p.useState(g),[B,L]=p.useState(g);h6(()=>{S.current=!1,_.current=g;for(let ne=0;ne<B.length;ne++){const be=Mm(B[ne]);k.includes(be)?I.delete(be):I.get(be)!==!0&&I.set(be,!1)}},[B,k.length,k.join("-")]);const O=[];if(g!==P){let ne=[...g];for(let be=0;be<B.length;be++){const H=B[be],z=Mm(H);k.includes(z)||(ne.splice(be,0,H),O.push(H))}return c==="wait"&&O.length&&(ne=O),L(nj(ne)),b(g),null}const{forceRender:te}=p.useContext(Cv);return e.jsx(e.Fragment,{children:B.map(ne=>{const be=Mm(ne),H=o&&!m?!1:g===B||k.includes(be),z=()=>{if(I.has(be))I.set(be,!0);else return;let F=!0;I.forEach(v=>{v||(F=!1)}),F&&(te?.(),L(_.current),o&&x?.(),n&&n())};return e.jsx(Kz,{isPresent:H,initial:!S.current||a?void 0:!1,custom:t,presenceAffectsLayout:i,mode:c,onExitComplete:H?void 0:z,anchorX:u,children:ne},be)})})},aT=p.createContext({strict:!1}),ij={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bd={};for(const r in ij)Bd[r]={isEnabled:t=>ij[r].some(a=>!!t[a])};function Qz(r){for(const t in r)Bd[t]={...Bd[t],...r[t]}}const Xz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Op(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||Xz.has(r)}let sT=r=>!Op(r);function Jz(r){r&&(sT=t=>t.startsWith("on")?!Op(t):r(t))}try{Jz(require("@emotion/is-prop-valid").default)}catch{}function Zz(r,t,a){const n={};for(const i in r)i==="values"&&typeof r.values=="object"||(sT(i)||a===!0&&Op(i)||!t&&!Op(i)||r.draggable&&i.startsWith("onDrag"))&&(n[i]=r[i]);return n}function eV(r){if(typeof Proxy>"u")return r;const t=new Map,a=(...n)=>r(...n);return new Proxy(a,{get:(n,i)=>i==="create"?r:(t.has(i)||t.set(i,r(i)),t.get(i))})}const Mx=p.createContext({});function Fx(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function _u(r){return typeof r=="string"||Array.isArray(r)}const Xv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Jv=["initial",...Xv];function Ox(r){return Fx(r.animate)||Jv.some(t=>_u(r[t]))}function nT(r){return!!(Ox(r)||r.variants)}function tV(r,t){if(Ox(r)){const{initial:a,animate:n}=r;return{initial:a===!1||_u(a)?a:void 0,animate:_u(n)?n:void 0}}return r.inherit!==!1?t:{}}function rV(r){const{initial:t,animate:a}=tV(r,p.useContext(Mx));return p.useMemo(()=>({initial:t,animate:a}),[oj(t),oj(a)])}function oj(r){return Array.isArray(r)?r.join(" "):r}const aV=Symbol.for("motionComponentSymbol");function vd(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function sV(r,t,a){return p.useCallback(n=>{n&&r.onMount&&r.onMount(n),t&&(n?t.mount(n):t.unmount()),a&&(typeof a=="function"?a(n):vd(a)&&(a.current=n))},[t])}const Zv=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nV="framerAppearId",iT="data-"+Zv(nV),oT=p.createContext({});function iV(r,t,a,n,i){const{visualElement:c}=p.useContext(Mx),o=p.useContext(aT),u=p.useContext(Rx),m=p.useContext(Qv).reducedMotion,x=p.useRef(null);n=n||o.renderer,!x.current&&n&&(x.current=n(r,{visualState:t,parent:c,props:a,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:m}));const g=x.current,k=p.useContext(oT);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&oV(x.current,a,i,k);const S=p.useRef(!1);p.useInsertionEffect(()=>{g&&S.current&&g.update(a,u)});const _=a[iT],I=p.useRef(!!_&&!window.MotionHandoffIsComplete?.(_)&&window.MotionHasOptimisedAnimation?.(_));return h6(()=>{g&&(S.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),Kv.render(g.render),I.current&&g.animationState&&g.animationState.animateChanges())}),p.useEffect(()=>{g&&(!I.current&&g.animationState&&g.animationState.animateChanges(),I.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(_)}),I.current=!1))}),g}function oV(r,t,a,n){const{layoutId:i,layout:c,drag:o,dragConstraints:u,layoutScroll:m,layoutRoot:x,layoutCrossfade:g}=t;r.projection=new a(r.latestValues,t["data-framer-portal-id"]?void 0:lT(r.parent)),r.projection.setOptions({layoutId:i,layout:c,alwaysMeasureLayout:!!o||u&&vd(u),visualElement:r,animationType:typeof c=="string"?c:"both",initialPromotionConfig:n,crossfade:g,layoutScroll:m,layoutRoot:x})}function lT(r){if(r)return r.options.allowProjection!==!1?r.projection:lT(r.parent)}function lV({preloadedFeatures:r,createVisualElement:t,useRender:a,useVisualState:n,Component:i}){r&&Qz(r);function c(u,m){let x;const g={...p.useContext(Qv),...u,layoutId:cV(u)},{isStatic:k}=g,S=rV(u),_=n(u,k);if(!k&&Sv){dV();const I=uV(g);x=I.MeasureLayout,S.visualElement=iV(i,_,g,t,I.ProjectionNode)}return e.jsxs(Mx.Provider,{value:S,children:[x&&S.visualElement?e.jsx(x,{visualElement:S.visualElement,...g}):null,a(i,u,sV(_,S.visualElement,m),_,k,S.visualElement)]})}c.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const o=p.forwardRef(c);return o[aV]=i,o}function cV({layoutId:r}){const t=p.useContext(Cv).id;return t&&r!==void 0?t+"-"+r:r}function dV(r,t){p.useContext(aT).strict}function uV(r){const{drag:t,layout:a}=Bd;if(!t&&!a)return{};const n={...t,...a};return{MeasureLayout:t?.isEnabled(r)||a?.isEnabled(r)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const Pu={};function hV(r){for(const t in r)Pu[t]=r[t],Rv(t)&&(Pu[t].isCSSVariable=!0)}function cT(r,{layout:t,layoutId:a}){return e0.has(r)||r.startsWith("origin")||(t||a!==void 0)&&(!!Pu[r]||r==="opacity")}const mV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},pV=Zd.length;function xV(r,t,a){let n="",i=!0;for(let c=0;c<pV;c++){const o=Zd[c],u=r[o];if(u===void 0)continue;let m=!0;if(typeof u=="number"?m=u===(o.startsWith("scale")?1:0):m=parseFloat(u)===0,!m||a){const x=X6(u,Gv[o]);if(!m){i=!1;const g=mV[o]||o;n+=`${g}(${x}) `}a&&(t[o]=x)}}return n=n.trim(),a?n=a(t,i?"":n):i&&(n="none"),n}function ew(r,t,a){const{style:n,vars:i,transformOrigin:c}=r;let o=!1,u=!1;for(const m in t){const x=t[m];if(e0.has(m)){o=!0;continue}else if(Rv(m)){i[m]=x;continue}else{const g=X6(x,Gv[m]);m.startsWith("origin")?(u=!0,c[m]=g):n[m]=g}}if(t.transform||(o||a?n.transform=xV(t,r.transform,a):n.transform&&(n.transform="none")),u){const{originX:m="50%",originY:x="50%",originZ:g=0}=c;n.transformOrigin=`${m} ${x} ${g}`}}const tw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function dT(r,t,a){for(const n in t)!Os(t[n])&&!cT(n,a)&&(r[n]=t[n])}function gV({transformTemplate:r},t){return p.useMemo(()=>{const a=tw();return ew(a,t,r),Object.assign({},a.vars,a.style)},[t])}function fV(r,t){const a=r.style||{},n={};return dT(n,a,r),Object.assign(n,gV(r,t)),n}function bV(r,t){const a={},n=fV(r,t);return r.drag&&r.dragListener!==!1&&(a.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(a.tabIndex=0),a.style=n,a}const yV={offset:"stroke-dashoffset",array:"stroke-dasharray"},vV={offset:"strokeDashoffset",array:"strokeDasharray"};function wV(r,t,a=1,n=0,i=!0){r.pathLength=1;const c=i?yV:vV;r[c.offset]=Er.transform(-n);const o=Er.transform(t),u=Er.transform(a);r[c.array]=`${o} ${u}`}function uT(r,{attrX:t,attrY:a,attrScale:n,pathLength:i,pathSpacing:c=1,pathOffset:o=0,...u},m,x,g){if(ew(r,u,x),m){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:k,style:S}=r;k.transform&&(S.transform=k.transform,delete k.transform),(S.transform||k.transformOrigin)&&(S.transformOrigin=k.transformOrigin??"50% 50%",delete k.transformOrigin),S.transform&&(S.transformBox=g?.transformBox??"fill-box",delete k.transformBox),t!==void 0&&(k.x=t),a!==void 0&&(k.y=a),n!==void 0&&(k.scale=n),i!==void 0&&wV(k,i,c,o,!1)}const hT=()=>({...tw(),attrs:{}}),mT=r=>typeof r=="string"&&r.toLowerCase()==="svg";function kV(r,t,a,n){const i=p.useMemo(()=>{const c=hT();return uT(c,t,mT(n),r.transformTemplate,r.style),{...c.attrs,style:{...c.style}}},[t]);if(r.style){const c={};dT(c,r.style,r),i.style={...c,...i.style}}return i}const NV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rw(r){return typeof r!="string"||r.includes("-")?!1:!!(NV.indexOf(r)>-1||/[A-Z]/u.test(r))}function jV(r=!1){return(a,n,i,{latestValues:c},o)=>{const m=(rw(a)?kV:bV)(n,c,o,a),x=Zz(n,typeof a=="string",r),g=a!==p.Fragment?{...x,...m,ref:i}:{},{children:k}=n,S=p.useMemo(()=>Os(k)?k.get():k,[k]);return p.createElement(a,{...g,children:S})}}function lj(r){const t=[{},{}];return r?.values.forEach((a,n)=>{t[0][n]=a.get(),t[1][n]=a.getVelocity()}),t}function aw(r,t,a,n){if(typeof t=="function"){const[i,c]=lj(n);t=t(a!==void 0?a:r.custom,i,c)}if(typeof t=="string"&&(t=r.variants&&r.variants[t]),typeof t=="function"){const[i,c]=lj(n);t=t(a!==void 0?a:r.custom,i,c)}return t}function ip(r){return Os(r)?r.get():r}function CV({scrapeMotionValuesFromProps:r,createRenderState:t},a,n,i){return{latestValues:TV(a,n,i,r),renderState:t()}}const pT=r=>(t,a)=>{const n=p.useContext(Mx),i=p.useContext(Rx),c=()=>CV(r,t,n,i);return a?c():Tv(c)};function TV(r,t,a,n){const i={},c=n(r,{});for(const S in c)i[S]=ip(c[S]);let{initial:o,animate:u}=r;const m=Ox(r),x=nT(r);t&&x&&!m&&r.inherit!==!1&&(o===void 0&&(o=t.initial),u===void 0&&(u=t.animate));let g=a?a.initial===!1:!1;g=g||o===!1;const k=g?u:o;if(k&&typeof k!="boolean"&&!Fx(k)){const S=Array.isArray(k)?k:[k];for(let _=0;_<S.length;_++){const I=aw(r,S[_]);if(I){const{transitionEnd:P,transition:b,...B}=I;for(const L in B){let O=B[L];if(Array.isArray(O)){const te=g?O.length-1:0;O=O[te]}O!==null&&(i[L]=O)}for(const L in P)i[L]=P[L]}}}return i}function sw(r,t,a){const{style:n}=r,i={};for(const c in n)(Os(n[c])||t.style&&Os(t.style[c])||cT(c,r)||a?.getValue(c)?.liveStyle!==void 0)&&(i[c]=n[c]);return i}const SV={useVisualState:pT({scrapeMotionValuesFromProps:sw,createRenderState:tw})};function xT(r,t,a){const n=sw(r,t,a);for(const i in r)if(Os(r[i])||Os(t[i])){const c=Zd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[c]=r[i]}return n}const EV={useVisualState:pT({scrapeMotionValuesFromProps:xT,createRenderState:hT})};function _V(r,t){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...rw(n)?EV:SV,preloadedFeatures:r,useRender:jV(i),createVisualElement:t,Component:n};return lV(o)}}function Iu(r,t,a){const n=r.getProps();return aw(n,t,a!==void 0?a:n.custom,r)}const Xb=r=>Array.isArray(r);function PV(r,t,a){r.hasValue(t)?r.getValue(t).set(a):r.addValue(t,Ld(a))}function IV(r){return Xb(r)?r[r.length-1]||0:r}function $V(r,t){const a=Iu(r,t);let{transitionEnd:n={},transition:i={},...c}=a||{};c={...c,...n};for(const o in c){const u=IV(c[o]);PV(r,o,u)}}function DV(r){return!!(Os(r)&&r.add)}function Jb(r,t){const a=r.getValue("willChange");if(DV(a))return a.add(t);if(!a&&ko.WillChange){const n=new ko.WillChange("auto");r.addValue("willChange",n),n.add(t)}}function gT(r){return r.props[iT]}const AV=r=>r!==null;function RV(r,{repeat:t,repeatType:a="loop"},n){const i=r.filter(AV),c=t&&a!=="loop"&&t%2===1?0:i.length-1;return i[c]}const MV={type:"spring",stiffness:500,damping:25,restSpeed:10},FV=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),OV={type:"keyframes",duration:.8},LV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},BV=(r,{keyframes:t})=>t.length>2?OV:e0.has(r)?r.startsWith("scale")?FV(t[1]):MV:LV;function zV({when:r,delay:t,delayChildren:a,staggerChildren:n,staggerDirection:i,repeat:c,repeatType:o,repeatDelay:u,from:m,elapsed:x,...g}){return!!Object.keys(g).length}const nw=(r,t,a,n={},i,c)=>o=>{const u=Wv(n,r)||{},m=u.delay||n.delay||0;let{elapsed:x=0}=n;x=x-Mi(m);const g={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-x,onUpdate:S=>{t.set(S),u.onUpdate&&u.onUpdate(S)},onComplete:()=>{o(),u.onComplete&&u.onComplete()},name:r,motionValue:t,element:c?void 0:i};zV(u)||Object.assign(g,BV(r,g)),g.duration&&(g.duration=Mi(g.duration)),g.repeatDelay&&(g.repeatDelay=Mi(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let k=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(k=!0)),(ko.instantAnimations||ko.skipAnimations)&&(k=!0,g.duration=0,g.delay=0),g.allowFlatten=!u.type&&!u.ease,k&&!c&&t.get()!==void 0){const S=RV(g.keyframes,u);if(S!==void 0){Fa.update(()=>{g.onUpdate(S),g.onComplete()});return}}return u.isSync?new Uv(g):new wz(g)};function VV({protectedKeys:r,needsAnimating:t},a){const n=r.hasOwnProperty(a)&&t[a]!==!0;return t[a]=!1,n}function fT(r,t,{delay:a=0,transitionOverride:n,type:i}={}){let{transition:c=r.getDefaultTransition(),transitionEnd:o,...u}=t;n&&(c=n);const m=[],x=i&&r.animationState&&r.animationState.getState()[i];for(const g in u){const k=r.getValue(g,r.latestValues[g]??null),S=u[g];if(S===void 0||x&&VV(x,g))continue;const _={delay:a,...Wv(c||{},g)},I=k.get();if(I!==void 0&&!k.isAnimating&&!Array.isArray(S)&&S===I&&!_.velocity)continue;let P=!1;if(window.MotionHandoffAnimation){const B=gT(r);if(B){const L=window.MotionHandoffAnimation(B,g,Fa);L!==null&&(_.startTime=L,P=!0)}}Jb(r,g),k.start(nw(g,k,S,r.shouldReduceMotion&&W6.has(g)?{type:!1}:_,r,P));const b=k.animation;b&&m.push(b)}return o&&Promise.all(m).then(()=>{Fa.update(()=>{o&&$V(r,o)})}),m}function Zb(r,t,a={}){const n=Iu(r,t,a.type==="exit"?r.presenceContext?.custom:void 0);let{transition:i=r.getDefaultTransition()||{}}=n||{};a.transitionOverride&&(i=a.transitionOverride);const c=n?()=>Promise.all(fT(r,n,a)):()=>Promise.resolve(),o=r.variantChildren&&r.variantChildren.size?(m=0)=>{const{delayChildren:x=0,staggerChildren:g,staggerDirection:k}=i;return UV(r,t,x+m,g,k,a)}:()=>Promise.resolve(),{when:u}=i;if(u){const[m,x]=u==="beforeChildren"?[c,o]:[o,c];return m().then(()=>x())}else return Promise.all([c(),o(a.delay)])}function UV(r,t,a=0,n=0,i=1,c){const o=[],u=(r.variantChildren.size-1)*n,m=i===1?(x=0)=>x*n:(x=0)=>u-x*n;return Array.from(r.variantChildren).sort(HV).forEach((x,g)=>{x.notify("AnimationStart",t),o.push(Zb(x,t,{...c,delay:a+m(g)}).then(()=>x.notify("AnimationComplete",t)))}),Promise.all(o)}function HV(r,t){return r.sortNodePosition(t)}function qV(r,t,a={}){r.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(c=>Zb(r,c,a));n=Promise.all(i)}else if(typeof t=="string")n=Zb(r,t,a);else{const i=typeof t=="function"?Iu(r,t,a.custom):t;n=Promise.all(fT(r,i,a))}return n.then(()=>{r.notify("AnimationComplete",t)})}function bT(r,t){if(!Array.isArray(t))return!1;const a=t.length;if(a!==r.length)return!1;for(let n=0;n<a;n++)if(t[n]!==r[n])return!1;return!0}const WV=Jv.length;function yT(r){if(!r)return;if(!r.isControllingVariants){const a=r.parent?yT(r.parent)||{}:{};return r.props.initial!==void 0&&(a.initial=r.props.initial),a}const t={};for(let a=0;a<WV;a++){const n=Jv[a],i=r.props[n];(_u(i)||i===!1)&&(t[n]=i)}return t}const GV=[...Xv].reverse(),KV=Xv.length;function YV(r){return t=>Promise.all(t.map(({animation:a,options:n})=>qV(r,a,n)))}function QV(r){let t=YV(r),a=cj(),n=!0;const i=m=>(x,g)=>{const k=Iu(r,g,m==="exit"?r.presenceContext?.custom:void 0);if(k){const{transition:S,transitionEnd:_,...I}=k;x={...x,...I,..._}}return x};function c(m){t=m(r)}function o(m){const{props:x}=r,g=yT(r.parent)||{},k=[],S=new Set;let _={},I=1/0;for(let b=0;b<KV;b++){const B=GV[b],L=a[B],O=x[B]!==void 0?x[B]:g[B],te=_u(O),ne=B===m?L.isActive:null;ne===!1&&(I=b);let be=O===g[B]&&O!==x[B]&&te;if(be&&n&&r.manuallyAnimateOnMount&&(be=!1),L.protectedKeys={..._},!L.isActive&&ne===null||!O&&!L.prevProp||Fx(O)||typeof O=="boolean")continue;const H=XV(L.prevProp,O);let z=H||B===m&&L.isActive&&!be&&te||b>I&&te,F=!1;const v=Array.isArray(O)?O:[O];let ie=v.reduce(i(B),{});ne===!1&&(ie={});const{prevResolvedValues:X={}}=L,ae={...X,...ie},We=ot=>{z=!0,S.has(ot)&&(F=!0,S.delete(ot)),L.needsAnimating[ot]=!0;const Ee=r.getValue(ot);Ee&&(Ee.liveStyle=!1)};for(const ot in ae){const Ee=ie[ot],Ie=X[ot];if(_.hasOwnProperty(ot))continue;let _e=!1;Xb(Ee)&&Xb(Ie)?_e=!bT(Ee,Ie):_e=Ee!==Ie,_e?Ee!=null?We(ot):S.add(ot):Ee!==void 0&&S.has(ot)?We(ot):L.protectedKeys[ot]=!0}L.prevProp=O,L.prevResolvedValues=ie,L.isActive&&(_={..._,...ie}),n&&r.blockInitialAnimation&&(z=!1),z&&(!(be&&H)||F)&&k.push(...v.map(ot=>({animation:ot,options:{type:B}})))}if(S.size){const b={};if(typeof x.initial!="boolean"){const B=Iu(r,Array.isArray(x.initial)?x.initial[0]:x.initial);B&&B.transition&&(b.transition=B.transition)}S.forEach(B=>{const L=r.getBaseTarget(B),O=r.getValue(B);O&&(O.liveStyle=!0),b[B]=L??null}),k.push({animation:b})}let P=!!k.length;return n&&(x.initial===!1||x.initial===x.animate)&&!r.manuallyAnimateOnMount&&(P=!1),n=!1,P?t(k):Promise.resolve()}function u(m,x){if(a[m].isActive===x)return Promise.resolve();r.variantChildren?.forEach(k=>k.animationState?.setActive(m,x)),a[m].isActive=x;const g=o(m);for(const k in a)a[k].protectedKeys={};return g}return{animateChanges:o,setActive:u,setAnimateFunction:c,getState:()=>a,reset:()=>{a=cj(),n=!0}}}function XV(r,t){return typeof t=="string"?t!==r:Array.isArray(t)?!bT(t,r):!1}function Ql(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function cj(){return{animate:Ql(!0),whileInView:Ql(),whileHover:Ql(),whileTap:Ql(),whileDrag:Ql(),whileFocus:Ql(),exit:Ql()}}class Pl{constructor(t){this.isMounted=!1,this.node=t}update(){}}class JV extends Pl{constructor(t){super(t),t.animationState||(t.animationState=QV(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Fx(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:a}=this.node.prevProps||{};t!==a&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let ZV=0;class eU extends Pl{constructor(){super(...arguments),this.id=ZV++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:a}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);a&&!t&&i.then(()=>{a(this.id)})}mount(){const{register:t,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const tU={animation:{Feature:JV},exit:{Feature:eU}};function $u(r,t,a,n={passive:!0}){return r.addEventListener(t,a,n),()=>r.removeEventListener(t,a)}function dh(r){return{point:{x:r.pageX,y:r.pageY}}}const rU=r=>t=>Yv(t)&&r(t,dh(t));function nu(r,t,a,n){return $u(r,t,rU(a),n)}function vT({top:r,left:t,right:a,bottom:n}){return{x:{min:t,max:a},y:{min:r,max:n}}}function aU({x:r,y:t}){return{top:t.min,right:r.max,bottom:t.max,left:r.min}}function sU(r,t){if(!t)return r;const a=t({x:r.left,y:r.top}),n=t({x:r.right,y:r.bottom});return{top:a.y,left:a.x,bottom:n.y,right:n.x}}const wT=1e-4,nU=1-wT,iU=1+wT,kT=.01,oU=0-kT,lU=0+kT;function Ks(r){return r.max-r.min}function cU(r,t,a){return Math.abs(r-t)<=a}function dj(r,t,a,n=.5){r.origin=n,r.originPoint=Ra(t.min,t.max,r.origin),r.scale=Ks(a)/Ks(t),r.translate=Ra(a.min,a.max,r.origin)-r.originPoint,(r.scale>=nU&&r.scale<=iU||isNaN(r.scale))&&(r.scale=1),(r.translate>=oU&&r.translate<=lU||isNaN(r.translate))&&(r.translate=0)}function iu(r,t,a,n){dj(r.x,t.x,a.x,n?n.originX:void 0),dj(r.y,t.y,a.y,n?n.originY:void 0)}function uj(r,t,a){r.min=a.min+t.min,r.max=r.min+Ks(t)}function dU(r,t,a){uj(r.x,t.x,a.x),uj(r.y,t.y,a.y)}function hj(r,t,a){r.min=t.min-a.min,r.max=r.min+Ks(t)}function ou(r,t,a){hj(r.x,t.x,a.x),hj(r.y,t.y,a.y)}const mj=()=>({translate:0,scale:1,origin:0,originPoint:0}),wd=()=>({x:mj(),y:mj()}),pj=()=>({min:0,max:0}),qa=()=>({x:pj(),y:pj()});function Vn(r){return[r("x"),r("y")]}function Wf(r){return r===void 0||r===1}function ey({scale:r,scaleX:t,scaleY:a}){return!Wf(r)||!Wf(t)||!Wf(a)}function Jl(r){return ey(r)||NT(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function NT(r){return xj(r.x)||xj(r.y)}function xj(r){return r&&r!=="0%"}function Lp(r,t,a){const n=r-a,i=t*n;return a+i}function gj(r,t,a,n,i){return i!==void 0&&(r=Lp(r,i,n)),Lp(r,a,n)+t}function ty(r,t=0,a=1,n,i){r.min=gj(r.min,t,a,n,i),r.max=gj(r.max,t,a,n,i)}function jT(r,{x:t,y:a}){ty(r.x,t.translate,t.scale,t.originPoint),ty(r.y,a.translate,a.scale,a.originPoint)}const fj=.999999999999,bj=1.0000000000001;function uU(r,t,a,n=!1){const i=a.length;if(!i)return;t.x=t.y=1;let c,o;for(let u=0;u<i;u++){c=a[u],o=c.projectionDelta;const{visualElement:m}=c.options;m&&m.props.style&&m.props.style.display==="contents"||(n&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Nd(r,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,jT(r,o)),n&&Jl(c.latestValues)&&Nd(r,c.latestValues))}t.x<bj&&t.x>fj&&(t.x=1),t.y<bj&&t.y>fj&&(t.y=1)}function kd(r,t){r.min=r.min+t,r.max=r.max+t}function yj(r,t,a,n,i=.5){const c=Ra(r.min,r.max,i);ty(r,t,a,c,n)}function Nd(r,t){yj(r.x,t.x,t.scaleX,t.scale,t.originX),yj(r.y,t.y,t.scaleY,t.scale,t.originY)}function CT(r,t){return vT(sU(r.getBoundingClientRect(),t))}function hU(r,t,a){const n=CT(r,a),{scroll:i}=t;return i&&(kd(n.x,i.offset.x),kd(n.y,i.offset.y)),n}const TT=({current:r})=>r?r.ownerDocument.defaultView:null,vj=(r,t)=>Math.abs(r-t);function mU(r,t){const a=vj(r.x,t.x),n=vj(r.y,t.y);return Math.sqrt(a**2+n**2)}class ST{constructor(t,a,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Kf(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,_=mU(k.offset,{x:0,y:0})>=3;if(!S&&!_)return;const{point:I}=k,{timestamp:P}=vs;this.history.push({...I,timestamp:P});const{onStart:b,onMove:B}=this.handlers;S||(b&&b(this.lastMoveEvent,k),this.startEvent=this.lastMoveEvent),B&&B(this.lastMoveEvent,k)},this.handlePointerMove=(k,S)=>{this.lastMoveEvent=k,this.lastMoveEventInfo=Gf(S,this.transformPagePoint),Fa.update(this.updatePoint,!0)},this.handlePointerUp=(k,S)=>{this.end();const{onEnd:_,onSessionEnd:I,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Kf(k.type==="pointercancel"?this.lastMoveEventInfo:Gf(S,this.transformPagePoint),this.history);this.startEvent&&_&&_(k,b),I&&I(k,b)},!Yv(t))return;this.dragSnapToOrigin=c,this.handlers=a,this.transformPagePoint=n,this.contextWindow=i||window;const o=dh(t),u=Gf(o,this.transformPagePoint),{point:m}=u,{timestamp:x}=vs;this.history=[{...m,timestamp:x}];const{onSessionStart:g}=a;g&&g(t,Kf(u,this.history)),this.removeListeners=oh(nu(this.contextWindow,"pointermove",this.handlePointerMove),nu(this.contextWindow,"pointerup",this.handlePointerUp),nu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),wl(this.updatePoint)}}function Gf(r,t){return t?{point:t(r.point)}:r}function wj(r,t){return{x:r.x-t.x,y:r.y-t.y}}function Kf({point:r},t){return{point:r,delta:wj(r,ET(t)),offset:wj(r,pU(t)),velocity:xU(t,.1)}}function pU(r){return r[0]}function ET(r){return r[r.length-1]}function xU(r,t){if(r.length<2)return{x:0,y:0};let a=r.length-1,n=null;const i=ET(r);for(;a>=0&&(n=r[a],!(i.timestamp-n.timestamp>Mi(t)));)a--;if(!n)return{x:0,y:0};const c=Fi(i.timestamp-n.timestamp);if(c===0)return{x:0,y:0};const o={x:(i.x-n.x)/c,y:(i.y-n.y)/c};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function gU(r,{min:t,max:a},n){return t!==void 0&&r<t?r=n?Ra(t,r,n.min):Math.max(r,t):a!==void 0&&r>a&&(r=n?Ra(a,r,n.max):Math.min(r,a)),r}function kj(r,t,a){return{min:t!==void 0?r.min+t:void 0,max:a!==void 0?r.max+a-(r.max-r.min):void 0}}function fU(r,{top:t,left:a,bottom:n,right:i}){return{x:kj(r.x,a,i),y:kj(r.y,t,n)}}function Nj(r,t){let a=t.min-r.min,n=t.max-r.max;return t.max-t.min<r.max-r.min&&([a,n]=[n,a]),{min:a,max:n}}function bU(r,t){return{x:Nj(r.x,t.x),y:Nj(r.y,t.y)}}function yU(r,t){let a=.5;const n=Ks(r),i=Ks(t);return i>n?a=Tu(t.min,t.max-n,r.min):n>i&&(a=Tu(r.min,r.max-i,t.min)),wo(0,1,a)}function vU(r,t){const a={};return t.min!==void 0&&(a.min=t.min-r.min),t.max!==void 0&&(a.max=t.max-r.min),a}const ry=.35;function wU(r=ry){return r===!1?r=0:r===!0&&(r=ry),{x:jj(r,"left","right"),y:jj(r,"top","bottom")}}function jj(r,t,a){return{min:Cj(r,t),max:Cj(r,a)}}function Cj(r,t){return typeof r=="number"?r:r[t]||0}const kU=new WeakMap;class NU{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qa(),this.visualElement=t}start(t,{snapToCursor:a=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=g=>{const{dragSnapToOrigin:k}=this.getProps();k?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(dh(g).point)},c=(g,k)=>{const{drag:S,dragPropagation:_,onDragStart:I}=this.getProps();if(S&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Fz(S),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vn(b=>{let B=this.getAxisMotionValue(b).get()||0;if(Oi.test(B)){const{projection:L}=this.visualElement;if(L&&L.layout){const O=L.layout.layoutBox[b];O&&(B=Ks(O)*(parseFloat(B)/100))}}this.originPoint[b]=B}),I&&Fa.postRender(()=>I(g,k)),Jb(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},o=(g,k)=>{const{dragPropagation:S,dragDirectionLock:_,onDirectionLock:I,onDrag:P}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:b}=k;if(_&&this.currentDirection===null){this.currentDirection=jU(b),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",k.point,b),this.updateAxis("y",k.point,b),this.visualElement.render(),P&&P(g,k)},u=(g,k)=>this.stop(g,k),m=()=>Vn(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:x}=this.getProps();this.panSession=new ST(t,{onSessionStart:i,onStart:c,onMove:o,onSessionEnd:u,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:x,contextWindow:TT(this.visualElement)})}stop(t,a){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=a;this.startAnimation(i);const{onDragEnd:c}=this.getProps();c&&Fa.postRender(()=>c(t,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:a}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(t,a,n){const{drag:i}=this.getProps();if(!n||!Fm(t,i,this.currentDirection))return;const c=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=gU(o,this.constraints[t],this.elastic[t])),c.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:a}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&vd(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=fU(n.layoutBox,t):this.constraints=!1,this.elastic=wU(a),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Vn(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=vU(n.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:a}=this.getProps();if(!t||!vd(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const c=hU(n,i.root,this.visualElement.getTransformPagePoint());let o=bU(i.layout.layoutBox,c);if(a){const u=a(aU(o));this.hasMutatedConstraints=!!u,u&&(o=vT(u))}return o}startAnimation(t){const{drag:a,dragMomentum:n,dragElastic:i,dragTransition:c,dragSnapToOrigin:o,onDragTransitionEnd:u}=this.getProps(),m=this.constraints||{},x=Vn(g=>{if(!Fm(g,a,this.currentDirection))return;let k=m&&m[g]||{};o&&(k={min:0,max:0});const S=i?200:1e6,_=i?40:1e7,I={type:"inertia",velocity:n?t[g]:0,bounceStiffness:S,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...c,...k};return this.startAxisValueAnimation(g,I)});return Promise.all(x).then(u)}startAxisValueAnimation(t,a){const n=this.getAxisMotionValue(t);return Jb(this.visualElement,t),n.start(nw(t,n,0,a,this.visualElement,!1))}stopAnimation(){Vn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Vn(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const a=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[a];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Vn(a=>{const{drag:n}=this.getProps();if(!Fm(a,n,this.currentDirection))return;const{projection:i}=this.visualElement,c=this.getAxisMotionValue(a);if(i&&i.layout){const{min:o,max:u}=i.layout.layoutBox[a];c.set(t[a]-Ra(o,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:a}=this.getProps(),{projection:n}=this.visualElement;if(!vd(a)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Vn(o=>{const u=this.getAxisMotionValue(o);if(u&&this.constraints!==!1){const m=u.get();i[o]=yU({min:m,max:m},this.constraints[o])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Vn(o=>{if(!Fm(o,t,null))return;const u=this.getAxisMotionValue(o),{min:m,max:x}=this.constraints[o];u.set(Ra(m,x,i[o]))})}addListeners(){if(!this.visualElement.current)return;kU.set(this.visualElement,this);const t=this.visualElement.current,a=nu(t,"pointerdown",m=>{const{drag:x,dragListener:g=!0}=this.getProps();x&&g&&this.start(m)}),n=()=>{const{dragConstraints:m}=this.getProps();vd(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,c=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Fa.read(n);const o=$u(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:x})=>{this.isDragging&&x&&(Vn(g=>{const k=this.getAxisMotionValue(g);k&&(this.originPoint[g]+=m[g].translate,k.set(k.get()+m[g].translate))}),this.visualElement.render())}));return()=>{o(),a(),c(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:c=!1,dragElastic:o=ry,dragMomentum:u=!0}=t;return{...t,drag:a,dragDirectionLock:n,dragPropagation:i,dragConstraints:c,dragElastic:o,dragMomentum:u}}}function Fm(r,t,a){return(t===!0||t===r)&&(a===null||a===r)}function jU(r,t=10){let a=null;return Math.abs(r.y)>t?a="y":Math.abs(r.x)>t&&(a="x"),a}class CU extends Pl{constructor(t){super(t),this.removeGroupControls=Hn,this.removeListeners=Hn,this.controls=new NU(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Hn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Tj=r=>(t,a)=>{r&&Fa.postRender(()=>r(t,a))};class TU extends Pl{constructor(){super(...arguments),this.removePointerDownListener=Hn}onPointerDown(t){this.session=new ST(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:TT(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:a,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Tj(t),onStart:Tj(a),onMove:n,onEnd:(c,o)=>{delete this.session,i&&Fa.postRender(()=>i(c,o))}}}mount(){this.removePointerDownListener=nu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const op={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Sj(r,t){return t.max===t.min?0:r/(t.max-t.min)*100}const O0={correct:(r,t)=>{if(!t.target)return r;if(typeof r=="string")if(Er.test(r))r=parseFloat(r);else return r;const a=Sj(r,t.target.x),n=Sj(r,t.target.y);return`${a}% ${n}%`}},SU={correct:(r,{treeScale:t,projectionDelta:a})=>{const n=r,i=kl.parse(r);if(i.length>5)return n;const c=kl.createTransformer(r),o=typeof i[0]!="number"?1:0,u=a.x.scale*t.x,m=a.y.scale*t.y;i[0+o]/=u,i[1+o]/=m;const x=Ra(u,m,.5);return typeof i[2+o]=="number"&&(i[2+o]/=x),typeof i[3+o]=="number"&&(i[3+o]/=x),c(i)}};class EU extends p.Component{componentDidMount(){const{visualElement:t,layoutGroup:a,switchLayoutGroup:n,layoutId:i}=this.props,{projection:c}=t;hV(_U),c&&(a.group&&a.group.add(c),n&&n.register&&i&&n.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),op.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:a,visualElement:n,drag:i,isPresent:c}=this.props,{projection:o}=n;return o&&(o.isPresent=c,i||t.layoutDependency!==a||a===void 0||t.isPresent!==c?o.willUpdate():this.safeToRemove(),t.isPresent!==c&&(c?o.promote():o.relegate()||Fa.postRender(()=>{const u=o.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Kv.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:a,switchLayoutGroup:n}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function _T(r){const[t,a]=rT(),n=p.useContext(Cv);return e.jsx(EU,{...r,layoutGroup:n,switchLayoutGroup:p.useContext(oT),isPresent:t,safeToRemove:a})}const _U={borderRadius:{...O0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:O0,borderTopRightRadius:O0,borderBottomLeftRadius:O0,borderBottomRightRadius:O0,boxShadow:SU};function PU(r,t,a){const n=Os(r)?r:Ld(r);return n.start(nw("",n,t,a)),n.animation}const IU=(r,t)=>r.depth-t.depth;class $U{constructor(){this.children=[],this.isDirty=!1}add(t){Ev(this.children,t),this.isDirty=!0}remove(t){_v(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(IU),this.isDirty=!1,this.children.forEach(t)}}function DU(r,t){const a=on.now(),n=({timestamp:i})=>{const c=i-a;c>=t&&(wl(n),r(c-t))};return Fa.setup(n,!0),()=>wl(n)}const PT=["TopLeft","TopRight","BottomLeft","BottomRight"],AU=PT.length,Ej=r=>typeof r=="string"?parseFloat(r):r,_j=r=>typeof r=="number"||Er.test(r);function RU(r,t,a,n,i,c){i?(r.opacity=Ra(0,a.opacity??1,MU(n)),r.opacityExit=Ra(t.opacity??1,0,FU(n))):c&&(r.opacity=Ra(t.opacity??1,a.opacity??1,n));for(let o=0;o<AU;o++){const u=`border${PT[o]}Radius`;let m=Pj(t,u),x=Pj(a,u);if(m===void 0&&x===void 0)continue;m||(m=0),x||(x=0),m===0||x===0||_j(m)===_j(x)?(r[u]=Math.max(Ra(Ej(m),Ej(x),n),0),(Oi.test(x)||Oi.test(m))&&(r[u]+="%")):r[u]=x}(t.rotate||a.rotate)&&(r.rotate=Ra(t.rotate||0,a.rotate||0,n))}function Pj(r,t){return r[t]!==void 0?r[t]:r.borderRadius}const MU=IT(0,.5,N6),FU=IT(.5,.95,Hn);function IT(r,t,a){return n=>n<r?0:n>t?1:a(Tu(r,t,n))}function Ij(r,t){r.min=t.min,r.max=t.max}function Bn(r,t){Ij(r.x,t.x),Ij(r.y,t.y)}function $j(r,t){r.translate=t.translate,r.scale=t.scale,r.originPoint=t.originPoint,r.origin=t.origin}function Dj(r,t,a,n,i){return r-=t,r=Lp(r,1/a,n),i!==void 0&&(r=Lp(r,1/i,n)),r}function OU(r,t=0,a=1,n=.5,i,c=r,o=r){if(Oi.test(t)&&(t=parseFloat(t),t=Ra(o.min,o.max,t/100)-o.min),typeof t!="number")return;let u=Ra(c.min,c.max,n);r===c&&(u-=t),r.min=Dj(r.min,t,a,u,i),r.max=Dj(r.max,t,a,u,i)}function Aj(r,t,[a,n,i],c,o){OU(r,t[a],t[n],t[i],t.scale,c,o)}const LU=["x","scaleX","originX"],BU=["y","scaleY","originY"];function Rj(r,t,a,n){Aj(r.x,t,LU,a?a.x:void 0,n?n.x:void 0),Aj(r.y,t,BU,a?a.y:void 0,n?n.y:void 0)}function Mj(r){return r.translate===0&&r.scale===1}function $T(r){return Mj(r.x)&&Mj(r.y)}function Fj(r,t){return r.min===t.min&&r.max===t.max}function zU(r,t){return Fj(r.x,t.x)&&Fj(r.y,t.y)}function Oj(r,t){return Math.round(r.min)===Math.round(t.min)&&Math.round(r.max)===Math.round(t.max)}function DT(r,t){return Oj(r.x,t.x)&&Oj(r.y,t.y)}function Lj(r){return Ks(r.x)/Ks(r.y)}function Bj(r,t){return r.translate===t.translate&&r.scale===t.scale&&r.originPoint===t.originPoint}class VU{constructor(){this.members=[]}add(t){Ev(this.members,t),t.scheduleRender()}remove(t){if(_v(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(t){const a=this.members.findIndex(i=>t===i);if(a===0)return!1;let n;for(let i=a;i>=0;i--){const c=this.members[i];if(c.isPresent!==!1){n=c;break}}return n?(this.promote(n),!0):!1}promote(t,a){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,a&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:a,resumingFrom:n}=t;a.onExitComplete&&a.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function UU(r,t,a){let n="";const i=r.x.translate/t.x,c=r.y.translate/t.y,o=a?.z||0;if((i||c||o)&&(n=`translate3d(${i}px, ${c}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),a){const{transformPerspective:x,rotate:g,rotateX:k,rotateY:S,skewX:_,skewY:I}=a;x&&(n=`perspective(${x}px) ${n}`),g&&(n+=`rotate(${g}deg) `),k&&(n+=`rotateX(${k}deg) `),S&&(n+=`rotateY(${S}deg) `),_&&(n+=`skewX(${_}deg) `),I&&(n+=`skewY(${I}deg) `)}const u=r.x.scale*t.x,m=r.y.scale*t.y;return(u!==1||m!==1)&&(n+=`scale(${u}, ${m})`),n||"none"}const Yf=["","X","Y","Z"],HU={visibility:"hidden"},qU=1e3;let WU=0;function Qf(r,t,a,n){const{latestValues:i}=t;i[r]&&(a[r]=i[r],t.setStaticValue(r,0),n&&(n[r]=0))}function AT(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:t}=r.options;if(!t)return;const a=gT(t);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:i,layoutId:c}=r.options;window.MotionCancelOptimisedAnimation(a,"transform",Fa,!(i||c))}const{parent:n}=r;n&&!n.hasCheckedOptimisedAppear&&AT(n)}function RT({attachResizeListener:r,defaultParent:t,measureScroll:a,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},u=t?.()){this.id=WU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(YU),this.nodes.forEach(eH),this.nodes.forEach(tH),this.nodes.forEach(QU)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new $U)}addEventListener(o,u){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new $v),this.eventHandlers.get(o).add(u)}notifyListeners(o,...u){const m=this.eventHandlers.get(o);m&&m.notify(...u)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=tT(o)&&!Uz(o),this.instance=o;const{layoutId:u,layout:m,visualElement:x}=this.options;if(x&&!x.current&&x.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||u)&&(this.isLayoutDirty=!0),r){let g;const k=()=>this.root.updateBlockedByResize=!1;r(o,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=DU(k,250),op.hasAnimatedSinceResize&&(op.hasAnimatedSinceResize=!1,this.nodes.forEach(Vj))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&x&&(u||m)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:k,hasRelativeLayoutChanged:S,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const I=this.options.transition||x.getDefaultTransition()||iH,{onLayoutAnimationStart:P,onLayoutAnimationComplete:b}=x.getProps(),B=!this.targetLayout||!DT(this.targetLayout,_),L=!k&&S;if(this.options.layoutRoot||this.resumeFrom||L||k&&(B||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,L);const O={...Wv(I,"layout"),onPlay:P,onComplete:b};(x.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O)}else k||Vj(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),wl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rH),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&AT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const k=this.path[g];k.shouldResetTransform=!0,k.updateScroll("snapshot"),k.options.layoutRoot&&k.willUpdate(!1)}const{layoutId:u,layout:m}=this.options;if(u===void 0&&!m)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zj);return}this.isUpdating||this.nodes.forEach(JU),this.isUpdating=!1,this.nodes.forEach(ZU),this.nodes.forEach(GU),this.nodes.forEach(KU),this.clearAllSnapshots();const u=on.now();vs.delta=wo(0,1e3/60,u-vs.timestamp),vs.timestamp=u,vs.isProcessing=!0,Bf.update.process(vs),Bf.preRender.process(vs),Bf.render.process(vs),vs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Kv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(XU),this.sharedNodes.forEach(aH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fa.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fa.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ks(this.snapshot.measuredBox.x)&&!Ks(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qa(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(u=!1),u&&this.instance){const m=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:m,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!$T(this.projectionDelta),m=this.getTransformTemplate(),x=m?m(this.latestValues,""):void 0,g=x!==this.prevTransformTemplateValue;o&&this.instance&&(u||Jl(this.latestValues)||g)&&(i(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const u=this.measurePageBox();let m=this.removeElementScroll(u);return o&&(m=this.removeTransform(m)),oH(m),{animationId:this.root.animationId,measuredBox:u,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return qa();const u=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(lH))){const{scroll:x}=this.root;x&&(kd(u.x,x.offset.x),kd(u.y,x.offset.y))}return u}removeElementScroll(o){const u=qa();if(Bn(u,o),this.scroll?.wasRoot)return u;for(let m=0;m<this.path.length;m++){const x=this.path[m],{scroll:g,options:k}=x;x!==this.root&&g&&k.layoutScroll&&(g.wasRoot&&Bn(u,o),kd(u.x,g.offset.x),kd(u.y,g.offset.y))}return u}applyTransform(o,u=!1){const m=qa();Bn(m,o);for(let x=0;x<this.path.length;x++){const g=this.path[x];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Nd(m,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Jl(g.latestValues)&&Nd(m,g.latestValues)}return Jl(this.latestValues)&&Nd(m,this.latestValues),m}removeTransform(o){const u=qa();Bn(u,o);for(let m=0;m<this.path.length;m++){const x=this.path[m];if(!x.instance||!Jl(x.latestValues))continue;ey(x.latestValues)&&x.updateSnapshot();const g=qa(),k=x.measurePageBox();Bn(g,k),Rj(u,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,g)}return Jl(this.latestValues)&&Rj(u,this.latestValues),u}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==u;if(!(o||m&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:k}=this.options;if(!(!this.layout||!(g||k))){if(this.resolvedRelativeTargetAt=vs.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qa(),this.relativeTargetOrigin=qa(),ou(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),Bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qa(),this.targetWithTransforms=qa()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),dU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bn(this.target,this.layout.layoutBox),jT(this.target,this.targetDelta)):Bn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qa(),this.relativeTargetOrigin=qa(),ou(this.relativeTargetOrigin,this.target,S.target),Bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ey(this.parent.latestValues)||NT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),u=!!this.resumingFrom||this!==o;let m=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(m=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===vs.timestamp&&(m=!1),m)return;const{layout:x,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||g))return;Bn(this.layoutCorrected,this.layout.layoutBox);const k=this.treeScale.x,S=this.treeScale.y;uU(this.layoutCorrected,this.treeScale,this.path,u),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=qa());const{target:_}=o;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():($j(this.prevProjectionDelta.x,this.projectionDelta.x),$j(this.prevProjectionDelta.y,this.projectionDelta.y)),iu(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==k||this.treeScale.y!==S||!Bj(this.projectionDelta.x,this.prevProjectionDelta.x)||!Bj(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wd(),this.projectionDelta=wd(),this.projectionDeltaWithTransform=wd()}setAnimationOrigin(o,u=!1){const m=this.snapshot,x=m?m.latestValues:{},g={...this.latestValues},k=wd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const S=qa(),_=m?m.source:void 0,I=this.layout?this.layout.source:void 0,P=_!==I,b=this.getStack(),B=!b||b.members.length<=1,L=!!(P&&!B&&this.options.crossfade===!0&&!this.path.some(nH));this.animationProgress=0;let O;this.mixTargetDelta=te=>{const ne=te/1e3;Uj(k.x,o.x,ne),Uj(k.y,o.y,ne),this.setTargetDelta(k),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ou(S,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sH(this.relativeTarget,this.relativeTargetOrigin,S,ne),O&&zU(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=qa()),Bn(O,this.relativeTarget)),P&&(this.animationValues=g,RU(g,x,this.latestValues,ne,L,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ne},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(!1),this.resumingFrom?.currentAnimation?.stop(!1),this.pendingAnimation&&(wl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fa.update(()=>{op.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ld(0)),this.currentAnimation=PU(this.motionValue,[0,1e3],{...o,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(qU),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:u,target:m,layout:x,latestValues:g}=o;if(!(!u||!m||!x)){if(this!==o&&this.layout&&x&&MT(this.options.animationType,this.layout.layoutBox,x.layoutBox)){m=this.target||qa();const k=Ks(this.layout.layoutBox.x);m.x.min=o.target.x.min,m.x.max=m.x.min+k;const S=Ks(this.layout.layoutBox.y);m.y.min=o.target.y.min,m.y.max=m.y.min+S}Bn(u,m),Nd(u,g),iu(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(o,u){this.sharedNodes.has(o)||this.sharedNodes.set(o,new VU),this.sharedNodes.get(o).add(u);const x=u.options.initialPromotionConfig;u.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(u):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:u,preserveFollowOpacity:m}={}){const x=this.getStack();x&&x.promote(this,m),o&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let u=!1;const{latestValues:m}=o;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(u=!0),!u)return;const x={};m.z&&Qf("z",o,x,this.animationValues);for(let g=0;g<Yf.length;g++)Qf(`rotate${Yf[g]}`,o,x,this.animationValues),Qf(`skew${Yf[g]}`,o,x,this.animationValues);o.render();for(const g in x)o.setStaticValue(g,x[g]),this.animationValues&&(this.animationValues[g]=x[g]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return HU;const u={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=ip(o?.pointerEvents)||"",u.transform=m?m(this.latestValues,""):"none",u;const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=ip(o?.pointerEvents)||""),this.hasProjected&&!Jl(this.latestValues)&&(_.transform=m?m({},""):"none",this.hasProjected=!1),_}const g=x.animationValues||x.latestValues;this.applyTransformsToTarget(),u.transform=UU(this.projectionDeltaWithTransform,this.treeScale,g),m&&(u.transform=m(g,u.transform));const{x:k,y:S}=this.projectionDelta;u.transformOrigin=`${k.origin*100}% ${S.origin*100}% 0`,x.animationValues?u.opacity=x===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=x===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const _ in Pu){if(g[_]===void 0)continue;const{correct:I,applyTo:P,isCSSVariable:b}=Pu[_],B=u.transform==="none"?g[_]:I(g[_],x);if(P){const L=P.length;for(let O=0;O<L;O++)u[P[O]]=B}else b?this.options.visualElement.renderState.vars[_]=B:u[_]=B}return this.options.layoutId&&(u.pointerEvents=x===this?ip(o?.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop(!1)),this.root.nodes.forEach(zj),this.root.sharedNodes.clear()}}}function GU(r){r.updateLayout()}function KU(r){const t=r.resumeFrom?.snapshot||r.snapshot;if(r.isLead()&&r.layout&&t&&r.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:n}=r.layout,{animationType:i}=r.options,c=t.source!==r.layout.source;i==="size"?Vn(g=>{const k=c?t.measuredBox[g]:t.layoutBox[g],S=Ks(k);k.min=a[g].min,k.max=k.min+S}):MT(i,t.layoutBox,a)&&Vn(g=>{const k=c?t.measuredBox[g]:t.layoutBox[g],S=Ks(a[g]);k.max=k.min+S,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[g].max=r.relativeTarget[g].min+S)});const o=wd();iu(o,a,t.layoutBox);const u=wd();c?iu(u,r.applyTransform(n,!0),t.measuredBox):iu(u,a,t.layoutBox);const m=!$T(o);let x=!1;if(!r.resumeFrom){const g=r.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:k,layout:S}=g;if(k&&S){const _=qa();ou(_,t.layoutBox,k.layoutBox);const I=qa();ou(I,a,S.layoutBox),DT(_,I)||(x=!0),g.options.layoutRoot&&(r.relativeTarget=I,r.relativeTargetOrigin=_,r.relativeParent=g)}}}r.notifyListeners("didUpdate",{layout:a,snapshot:t,delta:u,layoutDelta:o,hasLayoutChanged:m,hasRelativeLayoutChanged:x})}else if(r.isLead()){const{onExitComplete:a}=r.options;a&&a()}r.options.transition=void 0}function YU(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function QU(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function XU(r){r.clearSnapshot()}function zj(r){r.clearMeasurements()}function JU(r){r.isLayoutDirty=!1}function ZU(r){const{visualElement:t}=r.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),r.resetTransform()}function Vj(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function eH(r){r.resolveTargetDelta()}function tH(r){r.calcProjection()}function rH(r){r.resetSkewAndRotation()}function aH(r){r.removeLeadSnapshot()}function Uj(r,t,a){r.translate=Ra(t.translate,0,a),r.scale=Ra(t.scale,1,a),r.origin=t.origin,r.originPoint=t.originPoint}function Hj(r,t,a,n){r.min=Ra(t.min,a.min,n),r.max=Ra(t.max,a.max,n)}function sH(r,t,a,n){Hj(r.x,t.x,a.x,n),Hj(r.y,t.y,a.y,n)}function nH(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const iH={duration:.45,ease:[.4,0,.1,1]},qj=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),Wj=qj("applewebkit/")&&!qj("chrome/")?Math.round:Hn;function Gj(r){r.min=Wj(r.min),r.max=Wj(r.max)}function oH(r){Gj(r.x),Gj(r.y)}function MT(r,t,a){return r==="position"||r==="preserve-aspect"&&!cU(Lj(t),Lj(a),.2)}function lH(r){return r!==r.root&&r.scroll?.wasRoot}const cH=RT({attachResizeListener:(r,t)=>$u(r,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xf={current:void 0},FT=RT({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!Xf.current){const r=new cH({});r.mount(window),r.setOptions({layoutScroll:!0}),Xf.current=r}return Xf.current},resetTransform:(r,t)=>{r.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),dH={pan:{Feature:TU},drag:{Feature:CU,ProjectionNode:FT,MeasureLayout:_T}};function Kj(r,t,a){const{props:n}=r;r.animationState&&n.whileHover&&r.animationState.setActive("whileHover",a==="Start");const i="onHover"+a,c=n[i];c&&Fa.postRender(()=>c(t,dh(t)))}class uH extends Pl{mount(){const{current:t}=this.node;t&&(this.unmount=Oz(t,(a,n)=>(Kj(this.node,n,"Start"),i=>Kj(this.node,i,"End"))))}unmount(){}}class hH extends Pl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=oh($u(this.node.current,"focus",()=>this.onFocus()),$u(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Yj(r,t,a){const{props:n}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&n.whileTap&&r.animationState.setActive("whileTap",a==="Start");const i="onTap"+(a==="End"?"":a),c=n[i];c&&Fa.postRender(()=>c(t,dh(t)))}class mH extends Pl{mount(){const{current:t}=this.node;t&&(this.unmount=Vz(t,(a,n)=>(Yj(this.node,n,"Start"),(i,{success:c})=>Yj(this.node,i,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ay=new WeakMap,Jf=new WeakMap,pH=r=>{const t=ay.get(r.target);t&&t(r)},xH=r=>{r.forEach(pH)};function gH({root:r,...t}){const a=r||document;Jf.has(a)||Jf.set(a,{});const n=Jf.get(a),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(xH,{root:r,...t})),n[i]}function fH(r,t,a){const n=gH(t);return ay.set(r,a),n.observe(r),()=>{ay.delete(r),n.unobserve(r)}}const bH={some:0,all:1};class yH extends Pl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:a,margin:n,amount:i="some",once:c}=t,o={root:a?a.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:bH[i]},u=m=>{const{isIntersecting:x}=m;if(this.isInView===x||(this.isInView=x,c&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:g,onViewportLeave:k}=this.node.getProps(),S=x?g:k;S&&S(m)};return fH(this.node.current,o,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:a}=this.node;["amount","margin","root"].some(vH(t,a))&&this.startObserver()}unmount(){}}function vH({viewport:r={}},{viewport:t={}}={}){return a=>r[a]!==t[a]}const wH={inView:{Feature:yH},tap:{Feature:mH},focus:{Feature:hH},hover:{Feature:uH}},kH={layout:{ProjectionNode:FT,MeasureLayout:_T}},sy={current:null},OT={current:!1};function NH(){if(OT.current=!0,!!Sv)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),t=()=>sy.current=r.matches;r.addListener(t),t()}else sy.current=!1}const jH=new WeakMap;function CH(r,t,a){for(const n in t){const i=t[n],c=a[n];if(Os(i))r.addValue(n,i);else if(Os(c))r.addValue(n,Ld(i,{owner:r}));else if(c!==i)if(r.hasValue(n)){const o=r.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=r.getStaticValue(n);r.addValue(n,Ld(o!==void 0?o:i,{owner:r}))}}for(const n in a)t[n]===void 0&&r.removeValue(n);return t}const Qj=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class TH{scrapeMotionValuesFromProps(t,a,n){return{}}constructor({parent:t,props:a,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:c,visualState:o},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Hv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=on.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,Fa.render(this.render,!1,!0))};const{latestValues:m,renderState:x}=o;this.latestValues=m,this.baseTarget={...m},this.initialValues=a.initial?{...m}:{},this.renderState=x,this.parent=t,this.props=a,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!c,this.isControllingVariants=Ox(a),this.isVariantNode=nT(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:g,...k}=this.scrapeMotionValuesFromProps(a,{},this);for(const S in k){const _=k[S];m[S]!==void 0&&Os(_)&&_.set(m[S],!1)}}mount(t){this.current=t,jH.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,n)=>this.bindToMotionValue(n,a)),OT.current||NH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),wl(this.notifyUpdate),wl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const a=this.features[t];a&&(a.unmount(),a.isMounted=!1)}this.current=null}bindToMotionValue(t,a){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=e0.has(t);n&&this.onBindTransform&&this.onBindTransform();const i=a.on("change",u=>{this.latestValues[t]=u,this.props.onUpdate&&Fa.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),c=a.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,a)),this.valueSubscriptions.set(t,()=>{i(),c(),o&&o(),a.owner&&a.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Bd){const a=Bd[t];if(!a)continue;const{isEnabled:n,Feature:i}=a;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const c=this.features[t];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qa()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,a){this.latestValues[t]=a}update(t,a){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let n=0;n<Qj.length;n++){const i=Qj[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const c="on"+i,o=t[c];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=CH(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(t),()=>a.variantChildren.delete(t)}addValue(t,a){const n=this.values.get(t);a!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,a),this.values.set(t,a),this.latestValues[t]=a.get())}removeValue(t){this.values.delete(t);const a=this.valueSubscriptions.get(t);a&&(a(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,a){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&a!==void 0&&(n=Ld(a===null?void 0:a,{owner:this}),this.addValue(t,n)),n}readValue(t,a){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(m6(n)||x6(n))?n=parseFloat(n):!qz(n)&&kl.test(a)&&(n=Q6(t,a)),this.setBaseTarget(t,Os(n)?n.get():n)),Os(n)?n.get():n}setBaseTarget(t,a){this.baseTarget[t]=a}getBaseTarget(t){const{initial:a}=this.props;let n;if(typeof a=="string"||typeof a=="object"){const c=aw(this.props,a,this.presenceContext?.custom);c&&(n=c[t])}if(a&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Os(i)?i:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,a){return this.events[t]||(this.events[t]=new $v),this.events[t].add(a)}notify(t,...a){this.events[t]&&this.events[t].notify(...a)}}class LT extends TH{constructor(){super(...arguments),this.KeyframeResolver=Dz}sortInstanceNodePosition(t,a){return t.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(t,a){return t.style?t.style[a]:void 0}removeValueFromRenderState(t,{vars:a,style:n}){delete a[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Os(t)&&(this.childSubscription=t.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function BT(r,{style:t,vars:a},n,i){Object.assign(r.style,t,i&&i.getProjectionStyles(n));for(const c in a)r.style.setProperty(c,a[c])}function SH(r){return window.getComputedStyle(r)}class EH extends LT{constructor(){super(...arguments),this.type="html",this.renderInstance=BT}readValueFromInstance(t,a){if(e0.has(a))return this.projection?.isProjecting?qb(a):JB(t,a);{const n=SH(t),i=(Rv(a)?n.getPropertyValue(a):n[a])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:a}){return CT(t,a)}build(t,a,n){ew(t,a,n.transformTemplate)}scrapeMotionValuesFromProps(t,a,n){return sw(t,a,n)}}const zT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _H(r,t,a,n){BT(r,t,void 0,n);for(const i in t.attrs)r.setAttribute(zT.has(i)?i:Zv(i),t.attrs[i])}class PH extends LT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qa}getBaseTargetFromProps(t,a){return t[a]}readValueFromInstance(t,a){if(e0.has(a)){const n=Y6(a);return n&&n.default||0}return a=zT.has(a)?a:Zv(a),t.getAttribute(a)}scrapeMotionValuesFromProps(t,a,n){return xT(t,a,n)}build(t,a,n){uT(t,a,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,a,n,i){_H(t,a,n,i)}mount(t){this.isSVGTag=mT(t.tagName),super.mount(t)}}const IH=(r,t)=>rw(r)?new PH(t):new EH(t,{allowProjection:r!==p.Fragment}),$H=_V({...tU,...wH,...dH,...kH},IH),j=eV($H),Xj=(r,t,a,n)=>{r.style.transition=`${t} ${a}ms ${n}`},no=(r,t,a)=>Math.min(Math.max(r,t),a);class DH{constructor(t,a){this.glareAngle=0,this.glareOpacity=0,this.calculateGlareSize=o=>{const{width:u,height:m}=o,x=Math.sqrt(u**2+m**2);return{width:x,height:x}},this.setSize=o=>{const u=this.calculateGlareSize(o);this.glareEl.style.width=`${u.width}px`,this.glareEl.style.height=`${u.height}px`},this.update=(o,u,m,x)=>{this.updateAngle(o,u.glareReverse),this.updateOpacity(o,u,m,x)},this.updateAngle=(o,u)=>{const{xPercentage:m,yPercentage:x}=o,g=180/Math.PI,k=m?Math.atan2(x,-m)*g:0;this.glareAngle=k-(u?180:0)},this.updateOpacity=(o,u,m,x)=>{const{xPercentage:g,yPercentage:k}=o,{glarePosition:S,glareReverse:_,glareMaxOpacity:I}=u,P=m?-1:1,b=x?-1:1,B=_?-1:1;let L=0;switch(S){case"top":L=-g*P*B;break;case"right":L=k*b*B;break;case"bottom":case void 0:L=g*P*B;break;case"left":L=-k*b*B;break;case"all":L=Math.hypot(g,k)}const O=no(L,0,100);this.glareOpacity=O*I/100},this.render=o=>{const{glareColor:u}=o;this.glareEl.style.transform=`rotate(${this.glareAngle}deg) translate(-50%, -50%)`,this.glareEl.style.opacity=this.glareOpacity.toString(),this.glareEl.style.background=`linear-gradient(0deg, rgba(255,255,255,0) 0%, ${u} 100%)`},this.glareWrapperEl=document.createElement("div"),this.glareEl=document.createElement("div"),this.glareWrapperEl.appendChild(this.glareEl),this.glareWrapperEl.className="glare-wrapper",this.glareEl.className="glare";const n={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden",borderRadius:a,WebkitMaskImage:"-webkit-radial-gradient(white, black)",pointerEvents:"none"},i=this.calculateGlareSize(t),c={position:"absolute",top:"50%",left:"50%",transformOrigin:"0% 0%",pointerEvents:"none",width:`${i.width}px`,height:`${i.height}px`};Object.assign(this.glareWrapperEl.style,n),Object.assign(this.glareEl.style,c)}}class AH{constructor(){this.tiltAngleX=0,this.tiltAngleY=0,this.tiltAngleXPercentage=0,this.tiltAngleYPercentage=0,this.update=(t,a)=>{this.updateTilt(t,a),this.updateTiltManualInput(t,a),this.updateTiltReverse(a),this.updateTiltLimits(a)},this.updateTilt=(t,a)=>{const{xPercentage:n,yPercentage:i}=t,{tiltMaxAngleX:c,tiltMaxAngleY:o}=a;this.tiltAngleX=n*c/100,this.tiltAngleY=i*o/100*-1},this.updateTiltManualInput=(t,a)=>{const{tiltAngleXManual:n,tiltAngleYManual:i,tiltMaxAngleX:c,tiltMaxAngleY:o}=a;(n!==null||i!==null)&&(this.tiltAngleX=n!==null?n:0,this.tiltAngleY=i!==null?i:0,t.xPercentage=100*this.tiltAngleX/c,t.yPercentage=100*this.tiltAngleY/o)},this.updateTiltReverse=t=>{const a=t.tiltReverse?-1:1;this.tiltAngleX=a*this.tiltAngleX,this.tiltAngleY=a*this.tiltAngleY},this.updateTiltLimits=t=>{const{tiltAxis:a}=t;this.tiltAngleX=no(this.tiltAngleX,-90,90),this.tiltAngleY=no(this.tiltAngleY,-90,90),a&&(this.tiltAngleX=a==="x"?this.tiltAngleX:0,this.tiltAngleY=a==="y"?this.tiltAngleY:0)},this.updateTiltAnglesPercentage=t=>{const{tiltMaxAngleX:a,tiltMaxAngleY:n}=t;this.tiltAngleXPercentage=this.tiltAngleX/a*100,this.tiltAngleYPercentage=this.tiltAngleY/n*100},this.render=t=>{t.style.transform+=`rotateX(${this.tiltAngleX}deg) rotateY(${this.tiltAngleY}deg) `}}}const RH={scale:1,perspective:1e3,flipVertically:!1,flipHorizontally:!1,reset:!0,transitionEasing:"cubic-bezier(.03,.98,.52,.99)",transitionSpeed:400,trackOnWindow:!1,gyroscope:!1,tiltEnable:!0,tiltReverse:!1,tiltAngleXInitial:0,tiltAngleYInitial:0,tiltMaxAngleX:20,tiltMaxAngleY:20,tiltAxis:void 0,tiltAngleXManual:null,tiltAngleYManual:null,glareEnable:!1,glareMaxOpacity:.7,glareColor:"#ffffff",glarePosition:"bottom",glareReverse:!1,glareBorderRadius:"0"};class VT extends p.PureComponent{constructor(){super(...arguments),this.wrapperEl={node:null,size:{width:0,height:0,left:0,top:0},clientPosition:{x:null,y:null,xPercentage:0,yPercentage:0},updateAnimationId:null,scale:1},this.tilt=null,this.glare=null,this.addDeviceOrientationEventListener=async()=>{if(!window.DeviceOrientationEvent)return;const t=DeviceOrientationEvent.requestPermission;typeof t=="function"?await t()==="granted"&&window.addEventListener("deviceorientation",this.onMove):window.addEventListener("deviceorientation",this.onMove)},this.setSize=()=>{this.setWrapperElSize(),this.glare&&this.glare.setSize(this.wrapperEl.size)},this.mainLoop=t=>{this.wrapperEl.updateAnimationId!==null&&cancelAnimationFrame(this.wrapperEl.updateAnimationId),this.processInput(t),this.update(t.type),this.wrapperEl.updateAnimationId=requestAnimationFrame(this.renderFrame)},this.onEnter=t=>{const{onEnter:a}=this.props;this.setSize(),this.wrapperEl.node.style.willChange="transform",this.setTransitions(),a&&a({event:t})},this.onMove=t=>{this.mainLoop(t),this.emitOnMove(t)},this.onLeave=t=>{const{onLeave:a}=this.props;if(this.setTransitions(),a&&a({event:t}),this.props.reset){const n=new CustomEvent("autoreset");this.onMove(n)}},this.processInput=t=>{const{scale:a}=this.props;switch(t.type){case"mousemove":this.wrapperEl.clientPosition.x=t.pageX,this.wrapperEl.clientPosition.y=t.pageY,this.wrapperEl.scale=a;break;case"touchmove":this.wrapperEl.clientPosition.x=t.touches[0].pageX,this.wrapperEl.clientPosition.y=t.touches[0].pageY,this.wrapperEl.scale=a;break;case"deviceorientation":this.processInputDeviceOrientation(t),this.wrapperEl.scale=a;break;case"autoreset":{const{tiltAngleXInitial:n,tiltAngleYInitial:i,tiltMaxAngleX:c,tiltMaxAngleY:o}=this.props,u=i/o*100;this.wrapperEl.clientPosition.xPercentage=no(n/c*100,-100,100),this.wrapperEl.clientPosition.yPercentage=no(u,-100,100),this.wrapperEl.scale=1;break}}},this.processInputDeviceOrientation=t=>{if(!t.gamma||!t.beta||!this.props.gyroscope)return;const{tiltMaxAngleX:a,tiltMaxAngleY:n}=this.props,i=t.gamma;this.wrapperEl.clientPosition.xPercentage=t.beta/a*100,this.wrapperEl.clientPosition.yPercentage=i/n*100,this.wrapperEl.clientPosition.xPercentage=no(this.wrapperEl.clientPosition.xPercentage,-100,100),this.wrapperEl.clientPosition.yPercentage=no(this.wrapperEl.clientPosition.yPercentage,-100,100)},this.update=t=>{const{tiltEnable:a,flipVertically:n,flipHorizontally:i}=this.props;t!=="autoreset"&&t!=="deviceorientation"&&t!=="propChange"&&this.updateClientInput(),a&&this.tilt.update(this.wrapperEl.clientPosition,this.props),this.updateFlip(),this.tilt.updateTiltAnglesPercentage(this.props),this.glare&&this.glare.update(this.wrapperEl.clientPosition,this.props,n,i)},this.updateClientInput=()=>{const{trackOnWindow:t}=this.props;let a,n;if(t){const{x:i,y:c}=this.wrapperEl.clientPosition;a=c/window.innerHeight*200-100,n=i/window.innerWidth*200-100}else{const{size:{width:i,height:c,left:o,top:u},clientPosition:{x:m,y:x}}=this.wrapperEl;a=(x-u)/c*200-100,n=(m-o)/i*200-100}this.wrapperEl.clientPosition.xPercentage=no(a,-100,100),this.wrapperEl.clientPosition.yPercentage=no(n,-100,100)},this.updateFlip=()=>{const{flipVertically:t,flipHorizontally:a}=this.props;t&&(this.tilt.tiltAngleX+=180,this.tilt.tiltAngleY*=-1),a&&(this.tilt.tiltAngleY+=180)},this.renderFrame=()=>{this.resetWrapperElTransform(),this.renderPerspective(),this.tilt.render(this.wrapperEl.node),this.renderScale(),this.glare&&this.glare.render(this.props)}}componentDidMount(){if(this.tilt=new AH,this.initGlare(),this.setSize(),this.addEventListeners(),typeof CustomEvent>"u")return;const t=new CustomEvent("autoreset");this.mainLoop(t);const a=new CustomEvent("initial");this.emitOnMove(a)}componentWillUnmount(){this.wrapperEl.updateAnimationId!==null&&cancelAnimationFrame(this.wrapperEl.updateAnimationId),this.removeEventListeners()}componentDidUpdate(){const t=new CustomEvent("propChange");this.mainLoop(t),this.emitOnMove(t)}addEventListeners(){const{trackOnWindow:t,gyroscope:a}=this.props;window.addEventListener("resize",this.setSize),t&&(window.addEventListener("mouseenter",this.onEnter),window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseout",this.onLeave),window.addEventListener("touchstart",this.onEnter),window.addEventListener("touchmove",this.onMove),window.addEventListener("touchend",this.onLeave)),a&&this.addDeviceOrientationEventListener()}removeEventListeners(){const{trackOnWindow:t,gyroscope:a}=this.props;window.removeEventListener("resize",this.setSize),t&&(window.removeEventListener("mouseenter",this.onEnter),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseout",this.onLeave),window.removeEventListener("touchstart",this.onEnter),window.removeEventListener("touchmove",this.onMove),window.removeEventListener("touchend",this.onLeave)),a&&window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",this.onMove)}setWrapperElSize(){const t=this.wrapperEl.node.getBoundingClientRect();this.wrapperEl.size.width=this.wrapperEl.node.offsetWidth,this.wrapperEl.size.height=this.wrapperEl.node.offsetHeight,this.wrapperEl.size.left=t.left+window.scrollX,this.wrapperEl.size.top=t.top+window.scrollY}initGlare(){const{glareEnable:t,glareBorderRadius:a}=this.props;t&&(this.glare=new DH(this.wrapperEl.size,a),this.wrapperEl.node.appendChild(this.glare.glareWrapperEl))}emitOnMove(t){const{onMove:a}=this.props;if(!a)return;let n=0,i=0;this.glare&&(n=this.glare.glareAngle,i=this.glare.glareOpacity),a({tiltAngleX:this.tilt.tiltAngleX,tiltAngleY:this.tilt.tiltAngleY,tiltAngleXPercentage:this.tilt.tiltAngleXPercentage,tiltAngleYPercentage:this.tilt.tiltAngleYPercentage,glareAngle:n,glareOpacity:i,event:t})}resetWrapperElTransform(){this.wrapperEl.node.style.transform=""}renderPerspective(){const{perspective:t}=this.props;this.wrapperEl.node.style.transform+=`perspective(${t}px) `}renderScale(){const{scale:t}=this.wrapperEl;this.wrapperEl.node.style.transform+=`scale3d(${t},${t},${t})`}setTransitions(){const{transitionSpeed:t,transitionEasing:a}=this.props;Xj(this.wrapperEl.node,"all",t,a),this.glare&&Xj(this.glare.glareEl,"opacity",t,a)}render(){const{children:t,className:a,style:n}=this.props;return e.jsx("div",{ref:i=>{this.wrapperEl.node=i},onMouseEnter:this.onEnter,onMouseMove:this.onMove,onMouseLeave:this.onLeave,onTouchStart:this.onEnter,onTouchMove:this.onMove,onTouchEnd:this.onLeave,className:a,style:n,children:t})}}VT.defaultProps=RH;var Zf={exports:{}},eb,Jj;function MH(){if(Jj)return eb;Jj=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return eb=r,eb}var tb,Zj;function FH(){if(Zj)return tb;Zj=1;var r=MH();function t(){}function a(){}return a.resetWarningCache=t,tb=function(){function n(o,u,m,x,g,k){if(k!==r){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}n.isRequired=n;function i(){return n}var c={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:a,resetWarningCache:t};return c.PropTypes=c,c},tb}var e5;function OH(){return e5||(e5=1,Zf.exports=FH()()),Zf.exports}var LH=OH();const Q=uy(LH);var UT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},t5=Sn.createContext&&Sn.createContext(UT),BH=["attr","size","title"];function zH(r,t){if(r==null)return{};var a=VH(r,t),n,i;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(i=0;i<c.length;i++)n=c[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(a[n]=r[n])}return a}function VH(r,t){if(r==null)return{};var a={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;a[n]=r[n]}return a}function Bp(){return Bp=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[n]=a[n])}return r},Bp.apply(this,arguments)}function r5(r,t){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),a.push.apply(a,n)}return a}function zp(r){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?r5(Object(a),!0).forEach(function(n){UH(r,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):r5(Object(a)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(a,n))})}return r}function UH(r,t,a){return t=HH(t),t in r?Object.defineProperty(r,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[t]=a,r}function HH(r){var t=qH(r,"string");return typeof t=="symbol"?t:t+""}function qH(r,t){if(typeof r!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var n=a.call(r,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function HT(r){return r&&r.map((t,a)=>Sn.createElement(t.tag,zp({key:a},t.attr),HT(t.child)))}function Qt(r){return t=>Sn.createElement(WH,Bp({attr:zp({},r.attr)},t),HT(r.child))}function WH(r){var t=a=>{var{attr:n,size:i,title:c}=r,o=zH(r,BH),u=i||a.size||"1em",m;return a.className&&(m=a.className),r.className&&(m=(m?m+" ":"")+r.className),Sn.createElement("svg",Bp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,n,o,{className:m,style:zp(zp({color:r.color||a.color},a.style),r.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&Sn.createElement("title",null,c),r.children)};return t5!==void 0?Sn.createElement(t5.Consumer,null,a=>t(a)):t(UT)}function zr(r){return Qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(r)}function Vr(r){return Qt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(r)}function Ur(r){return Qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(r)}function ta(r){return Qt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(r)}function GH(r){return Qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248 248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z"},child:[]}]})(r)}function Lx(r){return Qt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(r)}function nr(r){return Qt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(r)}function KH(r){return Qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(r)}function ca(r){return Qt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"},child:[]}]})(r)}function K0(r){return Qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(r)}function YH(r){return Qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(r)}function QH(r){return Qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(r)}function XH(r){return Qt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(r)}function JH(r){return Qt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(r)}function ZH(r){return Qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(r)}function ho(r){return Qt({attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(r)}function a5(r){return Qt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(r)}function Du(r){return Qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(r)}function gc(r){return Qt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(r)}function qT(r){return Qt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(r)}function WT(r){return Qt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(r)}function iw(r){return Qt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(r)}function ow(r){return Qt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(r)}function Hr(r){return Qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(r)}function eq(r){return Qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(r)}function or(r){return Qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(r)}function ny(r){return Qt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"},child:[]}]})(r)}function zd(r){return Qt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(r)}function dr(r){return Qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(r)}function Ot(r){return Qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(r)}function qr(r){return Qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(r)}function De(r){return Qt({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(r)}function lw(r){return Qt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(r)}function tq(r){return Qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(r)}function cr(r){return Qt({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(r)}function ur(r){return Qt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(r)}function Vd(r){return Qt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(r)}function Vp(r){return Qt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(r)}const Mr="/assets/logo-BfhC8Xaa.png",rq="/assets/brooklyn99-DYJUH8Km.png",aq="/assets/stranger-things-DRcF_wqM.png",sq="/assets/breaking-bad-D1E4kgVP.png",nq="/assets/naruto-DUa7in8u.png",iq="/assets/alice-CeDQ0_3e.png",oq="/assets/netflix-DaHLFMJQ.png",lq="/assets/spotify-bWcpnvLH.png",cq="/assets/disney-CWU7DV5v.png",dq="/assets/max-BIVycyRg.png",uq="/assets/prime-video-DdoTjLXc.png",hq="/assets/vix-DijISFtY.png",mq="/assets/Canva-BX7ku0VE.png",pq="/assets/ChatGPT-B_s2moDj.png",xq="/assets/crunchyroll-CCcWGZHz.png",gq="/assets/redessociales-C9h9bjwL.png",fq="/assets/dgo-BPXOpsxd.png",bq="/assets/ligamax-DG6Hz7Oj.png",yq="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAB4CAYAAADblO/uAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACnFJREFUeNrsnd912zYbh+Gc3FedoPQEVSYINUHUm+bS0gS2JlA8ga0JrF7qyvYElieIMkHYCapvAn+EQEb2sUgR1AsSIJ/nHKU9jkOKIH54/+AFcPby8qIAoNucIXQAhA4ACB0AEDoAIHQAQOgAgNABAKEDAEIHQOgAgNABAKEDAEIHAIQOAAgdABA6ACB0AIQOAAgdABA6AHRX6GdnZ7RiVVZJlP45Tj+D9PM5++k2/fxIPxv1NXqgkeA1UoYYoTcj8En652X6GR75TS36Rfq5TUW/peEAoYchcG29b9JPZPkvk/QzTcW+phEROkL3V+DaNb/L3PRT0GJf0qAIHaH7KfKnCm46YgeEjsjf8CkV+4YGRugIvbsiz2P2TyToEHpdPtCUYtw4ErkmSj9XNDGEadHNvLL+xK9+qq3WJqiMs8mu3zdwp/O0XRK6LRbdf6EbF1dbpwt1fNpJF5AsvBa9eZ6fyhTBuGaZtsWU7o/Q/Rb6KvmmTOGIrSi04KdexqjmmeYN3vF3YnWE7qfQZRJV2mX9y6vsc7PWPGeWtsEtEkDofgl9lQwzkUuIQVuykTdiXyU6BLlp+K5J+vznne7dxks6FLYkCN1HobuxeP6IfZX8VPblrRJ0e159lRzqlKM+lgRLCf2j4+/5pOTdWhMGrJJ2xW4WqkQt3V0nMjeOnitWb2dB6rDeDcgU+XjDR4dCcDmvrMV+n96jzSKSixbf23gXq7tBi/zU5OI86wPbTPSPlPG2ywdHItedxXWBR6SambsuyjvELb63KKtB8J1BNijdpd/3v8wLgs4IvbnpprggceOaSw/e3TiwvjbIBH+f5W4gaKHLxHh2g4qxsE1Z84EnIvscaJ9rqooQHMfo8xaeQ6/9/tTQvSaq2Xnzsli6Scqz3vty5igbhMYl7WQ8sa/RNyQYokVvL3YdZsm/vrjtxhX2KU7Xc9x6INBJN1Omq+f6b0vbERc+WNe9zUz0VRY2uHTbY9XelNrhAc5X9GzI10jPDExLYnZW5AUq9EnLz+Paql949v6G3vcwM61WtLvtFyQYmtCNtRu03vFdZeGNmznx7P2FkpC7LnlfuO+BWXRfRmdXWfiJh+8vDJGYCrkkWK+kA0hm3WOPnku78CPha156+P5CEokWetToYPU2ZzPI2stsbJJ/p54slPko1KADzzpdvKvCkiq79C8J9/q7RYF01ucCYzAsieFt39GX7HrDygNI3TLdw/UiSe0+V3Q9vWrPI4vuo2W5SRvvQagWXjoJpzvWIvtvXoAzr2ndohK3uE9okdTJ4uftP077i34Hs4pHY8Xqfc3I+gRhSl/PSYwee/ji80MUTreYsvG57kijXWcyU1BJtpHEuXK1Ig1sBs37lsqqnSIldF+zv2OBhRSSIp8W7g5jPI86K9LiQPpaUR/xcXCbZxt+EqMfGAl9Rbvwm1pro401nwuKvNwN05Vlq2QdkHhtPaxDSC4zXqv96bTbkkEkP812XNJ373bvoiP78/VB6KdsVCG1+GJpkaR57JzQy5O1Mhbdvm7+YedBFW8Hlsfuyy68gg8CLzGETpmLfVy5Y66SOyWTZEwsXfIuxulXhW3TtsU0oVTR++lM5V6fTmrJd6W5K63GMgPXk2Bsfm3ZmW07vt/VcaatL0usavsYsScH/qYzxTwSrntojTHZffTUm5nbzS1orPbzsHIxo+28qg4vVkmXXPayfQP/8ejbPhzwPCKE/tZShshYud9A4lr1kf3mHDcl/WPt2eaR/3b5lXxU4IpNx7YnvqiQj/kt84iO/Z4OT6bevS+EDjVYdOx5JoLXmnJYZH+Ens9z+lYnL/NsbG9cbMmrlZhKhxPHvIwhQpdHi2D2KxttXsJ9wPH+oeer2yG72uHevnO3otb5gc8VwwgsuiOSd0f/moowvaz0qSNiP8Vtt31+n2PLtTIFQA+NuOqm3FlXMkZIu32hHxaBmVbShQt3gbfppuH4838N3WdmMag0u87bZPlvlJ+bg/RW6MWdRce1q0TPZYe8oODUJJyvHo3Pswh3Fn1mXdLuQ4Qux7EYbZbFVaG68KcmmobC7dltjLs+LjEqi2yQ2hy5TpyFjghdKEYs75ja5VslC9XOQRCni7z52u2+r2GfFxqMoiXBPUSi1t22Y0dHf8OsREoCbM9HgWv8SbesbM2HBf1picjlhe5KkLMA21NiftguZOlW9Z0tRS77NdKWFrp9djWueF0tmnVQIpdx222EvqULi/RJKaLuCt1gI0gb1zQkq/4odB2bZBx7zPlF54WeOOnIJlO67JHb7kvYBPXzBlGXhf7DatSza4xZAC7qpqWdUn70XFbbArGNG3nnh5l0Wei2LmRc+TeNgHxfCdbWBgp9d92LQsY6U7ORUNtfWq9XMAPTF/+Fbp/5/WJ5/W+eu6ltuO3bnmfcy85004c33h/1HM3egHq3oe/KtvTaJPwOiT3fn/Bb4ZZl5r7jbFuzn8os6HJalSdZGbe2sNRxjevPlNyurNJueyIq4GqZ9wcFmusCkeanrzxkIc7m1yBgNsiIBcS1KLj3IPMq5rutxt+GGNWPi/LQdbd1IwfWu8f6O90m/Z0eKg4GzBWbfrE88g7y467us4/+/ysRC3r83rmw41efVkq7JYX+7NR931v1rsfni0rtwA4tr/lLIF+xqeklSdx7qxznW+SEbr9ryLjGPXybbkvENzg01yvbT23K7jXv2kznKz5lXs62hsCn2b9/rnVvc0T3bc3BRb9rfe7eo8smkl69ZhOnR7vspL1QZtkg4cPqtoWjjquX62qLfaH22WCzEsu9JS9yR5vM8I9q3V8nbVeJFtxEmR1mDrnKufV8VO93ol3Wes783DyzGOv1vd8bBnP953f3drzF99nLy8tpFzg7U6++bNHxNmUuqP1IaH8fF2x3I3FHzuaCljEnuL47Nvnl7z9GvsXoqkaMU+/ccTM4tD2HvEDkEAqyQi+eWyxiWHo8Ujlt7gu+rRmTARTxRzhCN9hmoeuVK5r4pq0pphnWHISJQhO6rfte/5BAUzHXdOHIkqw3NCT0xF+h27vv8Yl3nDYYr29UmBtigM+YUt1DQv/XX6EbbKadTnNZ9vOY6wZEPsJlBwdMCn4u1qdlp9f2I5ROsOli/aqJtpHIAo1Voqfcrhy8iNv0+2HJwYU11yWy3w/8jS4C+v1Ufbq16MbqNR/HGjGOBGObdTYIIXKQFvggmzt/EvCKW7Lo+7jje0Wrfi5e8WX2+76okQPQg5RO8P3T+2WgUNerzBfMHCqprXK09K9iLCmL7k7o5qGrVLDpevFzx4kO3ah/quIVS89Z467Fa9ehj0I/JXzcZl7krh+GIXTz4E9HRi822ocuCV2743MJkUsK/UMDj66X8RUJ+RaRQ8eoG4IuM3fdiUfp3qK/d6GjX3Ewa6qhexZd9+/LLEyMVPH08UbtV7IVngngjesOAP6D0AEQOgAgdABA6ACA0AEAoQMAQgcAhA4ACB0AoQMAQgcAhA4ACB0AEDoAIHQAQOgAgNABEDoAIHQAQOgAgNABAKEDAEIHAIQOAAgdAKEjdIDu838BBgAP9Pzi++BqOAAAAABJRU5ErkJggg==",vq="/assets/youtube-CpBI5AmY.png",wq="/assets/deezer-Dzzytvkp.png",kq="/assets/tidal-Dvc8GFJF.png",Nq="/assets/vpn-DwO8ctKm.png",jq="/assets/wintv-DVRyyyXO.png",Cq="/assets/applemusic-oPM8BG1t.png",Tq="/assets/appletv-CnHYjknK.png",Sq="/assets/iptv-DuZZIyup.png",Eq="/assets/flujotv-BuBDxOy2.png",_q="/assets/vikirakuten-N9-l2Szt.png",Pq="/assets/pornhub-CExwxEGA.png",Iq="/assets/paramount-BdllqDdm.png",$q="/assets/licencias-BVJh6MhK.png",Dq="/assets/capcut-CQ2qY_pe.png",Aq="/assets/duolingo-5bYI8P47.png",Rq="/assets/buscapersonas-lxj-Iky8.png",L0=[{src:rq,title:"Brooklyn Nine-Nine",description:"Comedia policial hilarante"},{src:aq,title:"Stranger Things",description:"Misterio y nostalgia ochentera"},{src:sq,title:"Breaking Bad",description:"Un descenso al mundo del crimen"},{src:nq,title:"Naruto",description:"Aventuras ninja épicas"},{src:iq,title:"Alice in Borderland",description:"Juego de supervivencia intenso"}],s5=[{name:"Netflix",logo:oq,route:"/netflix",color:"#E50914"},{name:"Spotify",logo:lq,route:"/spotify",color:"#1DB954"},{name:"Disney+",logo:cq,route:"/disney",color:"#113CCF"},{name:"Max",logo:dq,route:"/max",color:"#002BE7"},{name:"Prime Video",logo:uq,route:"/primevideo",color:"#00A8E1"},{name:"Vix",logo:hq,route:"/vix",color:"#FF2E63"},{name:"Canva",logo:mq,route:"/canva",color:"#00C4B4"},{name:"ChatGPT",logo:pq,route:"/chatgpt",color:"#10A37F"},{name:"Crunchyroll",logo:xq,route:"/crunchyroll",color:"#F47521"},{name:"Redes Sociales",logo:gq,route:"/redessociales",color:"#3B5998"},{name:"Dgo",logo:fq,route:"/dgo",color:"#00A1D6"},{name:"Liga Max",logo:bq,route:"/ligamax",color:"#FFD700"},{name:"Movistar Play",logo:yq,route:"/movistarplay",color:"#005566"},{name:"Youtube",logo:vq,route:"/youtube",color:"#FF0000"},{name:"Deezer",logo:wq,route:"/deezer",color:"#FEAA2D"},{name:"Tidal",logo:kq,route:"/tidal",color:"#000000"},{name:"Vpn",logo:Nq,route:"/vpn",color:"#4CAF50"},{name:"Win Tv",logo:jq,route:"/wintv",color:"#9C27B0"},{name:"Apple Music",logo:Cq,route:"/applemusic",color:"#FA57C1"},{name:"Apple Tv",logo:Tq,route:"/appletv",color:"#000000"},{name:"Iptv",logo:Sq,route:"/iptv",color:"#607D8B"},{name:"Flujo Tv",logo:Eq,route:"/flujotv",color:"#FF5722"},{name:"Viki Rakuten",logo:_q,route:"/vikirakuten",color:"#D81B60"},{name:"Pornhub",logo:Pq,route:"/pornhub",color:"#FF9000"},{name:"Paramount",logo:Iq,route:"/paramount",color:"#0064D2"},{name:"Licencias",logo:$q,route:"/licencias",color:"#795548"},{name:"Cap cut",logo:Dq,route:"/capcut",color:"#00C4B4"},{name:"Duolingo",logo:Aq,route:"/duolingo",color:"#58CC02"},{name:"Busca Personas",logo:Rq,route:"/buscapersonas",color:"#3F51B5"}],Mq=(r,t=5e3)=>{const[a,n]=p.useState(0),[i,c]=p.useState(0),[o,u]=p.useState(!1);p.useEffect(()=>{if(o)return;const k=setInterval(()=>{c(_=>_>=100?0:_+100/(t/100))},100),S=setInterval(()=>{n(_=>(_+1)%r.length),c(0)},t);return()=>{clearInterval(k),clearInterval(S)}},[o,r.length,t]);const m=p.useCallback(k=>{n(k),c(0)},[]),x=p.useCallback(()=>{n(k=>(k-1+r.length)%r.length),c(0)},[r.length]),g=p.useCallback(()=>{n(k=>(k+1)%r.length),c(0)},[r.length]);return{currentIndex:a,progress:i,isPaused:o,setIsPaused:u,goToSlide:m,prevSlide:x,nextSlide:g}},GT=p.memo(({platform:r,theme:t})=>e.jsx(VT,{tiltMaxAngleX:8,tiltMaxAngleY:8,scale:1.03,transitionSpeed:300,children:e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:`${t==="dark"?"bg-gray-900/30 border-gray-700/30":"bg-white/90 border-gray-200/30"} backdrop-blur-xl rounded-xl overflow-hidden shadow-md cursor-pointer hover:shadow-xl hover:border-blue-500/50 transition-all duration-300 relative`,children:e.jsxs(Ve,{to:r.route,title:r.name,className:"block",children:[e.jsx("img",{src:r.logo,alt:r.name,className:`w-full h-24 sm:h-28 lg:h-32 object-contain p-4 ${t==="dark"?"bg-white/95":"bg-gray-50/95"} transition-transform duration-300 hover:scale-105`,loading:"lazy"}),e.jsx("div",{className:"p-3 text-center",style:{background:`linear-gradient(180deg, ${r.color}20, ${r.color}50)`},children:e.jsx("h3",{className:`font-semibold text-sm sm:text-base ${t==="dark"?"text-gray-100":"text-gray-900"} tracking-tight`,children:r.name})})]})})}));GT.propTypes={platform:Q.shape({name:Q.string.isRequired,logo:Q.string.isRequired,route:Q.string.isRequired,color:Q.string.isRequired}).isRequired,theme:Q.string.isRequired};const KT=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});KT.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const YT=()=>{const{currentIndex:r,progress:t,setIsPaused:a,goToSlide:n,prevSlide:i,nextSlide:c}=Mq(L0,5e3),[o,u]=p.useState(""),[m,x]=p.useState(s5),[g,k]=p.useState(null),[S,_]=p.useState(0),[I,P]=p.useState(null),[b,B]=p.useState(!1),[L,O]=p.useState(!1),[te,ne]=p.useState("dark"),[be,H]=p.useState(!1),[z,F]=p.useState(!1),[v,ie]=p.useState([]),X=$r(),ae=p.useRef(null);p.useEffect(()=>{const J=Fr(Xt,de=>{k(de),de?(We(de.uid),ct(de.uid)):(_(0),P(null),ie([]))});return()=>J()},[]);const We=async J=>{try{const de=await sr(se(M,"users",J));if(de.exists()){_(de.data().balance||0),P(de.data().role||"user");const ce=de.data().username||"Usuario";k(he=>({...he,username:ce}))}}catch(de){console.error("Error fetching user data:",de)}},ct=async J=>{try{const de=Fe(ue(M,"users",J,"notifications"),Qr("updatedAt","desc")),he=(await Jt(de)).docs.map(q=>({id:q.id,message:q.data().message||"Sin mensaje",updatedAt:q.data().updatedAt}));ie(he)}catch(de){console.error("Error fetching notifications:",de)}};p.useEffect(()=>{const J=s5.filter(de=>de.name.toLowerCase().includes(o.toLowerCase()));x(J)},[o]),p.useEffect(()=>{const J=()=>{O(window.scrollY>300)};return window.addEventListener("scroll",J),()=>window.removeEventListener("scroll",J)},[]),p.useEffect(()=>{const J=ae.current;let de=0;const ce=q=>{de=q.touches[0].clientX,a(!0)},he=q=>{const l=q.changedTouches[0].clientX;de-l>50&&c(),l-de>50&&i(),setTimeout(()=>a(!1),500)};return J?.addEventListener("touchstart",ce),J?.addEventListener("touchend",he),()=>{J?.removeEventListener("touchstart",ce),J?.removeEventListener("touchend",he)}},[i,c,a]);const ft=p.useCallback(J=>{J.preventDefault(),o.trim()&&X(`/search?q=${encodeURIComponent(o)}`)},[o,X]),ot=p.useCallback(async()=>{try{await Zr(Xt),X("/")}catch(J){console.error("Error signing out:",J)}},[X]),Ee=p.useCallback(()=>{ne(J=>J==="dark"?"light":"dark")},[]),Ie=p.useCallback(J=>J?J.split(" ").map(ce=>ce[0]).join("").slice(0,2).toUpperCase():"U",[]),_e=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),re=p.useCallback(()=>{switch(I){case"admin":return"/dashboard/admin";case"provider":return"/dashboard/provider";default:return"/dashboard/user"}},[I]);return e.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${te==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-100 via-gray-50 to-white text-gray-900"} flex flex-col font-inter relative overflow-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${te==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(25)].map((J,de)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},de))})]}),e.jsxs("header",{className:`${te==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${te==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar plataformas...",value:o,onChange:J=>u(J.target.value),className:`w-full py-2.5 px-5 ${te==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${te==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar plataformas",onKeyDown:J=>J.key==="Enter"&&ft(J)}),e.jsx("button",{onClick:ft,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${te==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Ee,className:`p-2 rounded-full ${te==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${te==="dark"?"claro":"oscuro"}`,children:te==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),g&&e.jsxs("button",{onClick:()=>F(!0),className:`p-2 rounded-full relative ${te==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${v.length} nuevas)`,children:[e.jsx(nr,{size:20}),v.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:v.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>H(!be),"aria-label":"Abrir menú móvil","aria-expanded":be,children:e.jsx(Lx,{size:20,className:te==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:g?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${te==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",S.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>B(!b),className:`flex items-center space-x-2 ${te==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":b,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:g.photoURL?e.jsx("img",{src:g.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):Ie(g.username||g.email)}),e.jsx("span",{className:`text-sm font-semibold ${te==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:g.username||"Usuario"}),e.jsx(ca,{className:`ml-1 ${te==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:b&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${te==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs(Ve,{to:re(),className:`w-full text-left px-4 py-2 text-sm hover:${te==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${te==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:ot,className:`w-full text-left px-4 py-2 text-sm hover:${te==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${te==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${te==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${te==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:be&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${te==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar plataformas...",value:o,onChange:J=>u(J.target.value),className:`w-full py-2.5 px-5 ${te==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${te==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar plataformas",onKeyDown:J=>J.key==="Enter"&&ft(J)}),e.jsx("button",{onClick:ft,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${te==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),g&&e.jsxs("button",{onClick:()=>{F(!0),H(!1)},className:`text-sm flex items-center ${te==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),g?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${te==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",S.toFixed(2)]}),e.jsxs(Ve,{to:re(),className:`text-sm flex items-center ${te==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,onClick:()=>H(!1),role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{ot(),H(!1)},className:`text-sm flex items-center ${te==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${te==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>H(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${te==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>H(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx(KT,{show:z&&!!g,onClose:()=>F(!1),notifications:v,theme:te}),e.jsxs("main",{className:"flex-1 px-4 sm:px-6 lg:px-8 py-10 pt-24 relative z-10",children:[e.jsxs("section",{ref:ae,className:"relative h-64 sm:h-80 md:h-96 lg:h-[600px] mb-12 overflow-hidden rounded-2xl shadow-2xl",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),role:"region","aria-label":"Carrusel de contenido destacado",children:[e.jsx(ve,{initial:!1,children:e.jsx(j.div,{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${L0[r].src})`},initial:{opacity:0,x:300,scale:1.1},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-300,scale:1.1},transition:{duration:.8,ease:"easeInOut"},children:e.jsxs("div",{className:`absolute inset-0 bg-gradient-to-t ${te==="dark"?"from-black/90 via-black/60 to-transparent":"from-white/90 via-white/60 to-transparent"} flex flex-col justify-end p-6 sm:p-8 md:p-10 lg:p-12`,children:[e.jsx(j.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.5},className:`text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold mb-2 bg-clip-text text-transparent bg-gradient-to-r ${te==="dark"?"from-white to-gray-200":"from-gray-900 to-gray-700"} tracking-tight drop-shadow-md`,children:L0[r].title}),e.jsx(j.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},className:`text-sm sm:text-base md:text-lg lg:text-xl max-w-md ${te==="dark"?"text-gray-300":"text-gray-700"} font-medium drop-shadow-sm`,children:L0[r].description})]})},r)}),e.jsx("button",{onClick:i,className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${te==="dark"?"bg-black/50 hover:bg-black/70":"bg-white/50 hover:bg-white/70"} backdrop-blur-lg p-3 rounded-full transition-all duration-300 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,"aria-label":"Diapositiva anterior",children:e.jsx(XH,{size:20})}),e.jsx("button",{onClick:c,className:`absolute right-4 top-1/2 transform -translate-y-1/2 ${te==="dark"?"bg-black/50 hover:bg-black/70":"bg-white/50 hover:bg-white/70"} backdrop-blur-lg p-3 rounded-full transition-all duration-300 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,"aria-label":"Diapositiva siguiente",children:e.jsx(JH,{size:20})}),e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",role:"tablist",children:L0.map((J,de)=>e.jsx("button",{className:`w-2 h-2 sm:w-3 sm:h-3 rounded-full transition-all duration-300 ${r===de?"bg-blue-500 scale-125":te==="dark"?"bg-gray-500/50":"bg-gray-400/50"} focus:outline-none focus:ring-2 focus:ring-blue-500`,onClick:()=>n(de),role:"tab","aria-selected":r===de,"aria-label":`Ir a diapositiva ${de+1}`},de))}),e.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 ${te==="dark"?"bg-gray-800/50":"bg-gray-200/50"}`,children:e.jsx(j.div,{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600",style:{width:`${t}%`},initial:{width:0},animate:{width:`${t}%`},transition:{duration:.1}})})]}),e.jsxs("section",{className:"relative",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold mb-10 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600 tracking-tight",children:"Categorías de Plataformas"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4 sm:gap-6 lg:gap-8",children:m.length>0?m.map((J,de)=>e.jsx(GT,{platform:J,theme:te},de)):e.jsx("p",{className:`col-span-full text-center text-lg ${te==="dark"?"text-gray-400":"text-gray-600"} font-medium`,children:"No se encontraron plataformas."})})]})]}),e.jsx("footer",{className:`${te==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-10 px-4 sm:px-6 lg:px-8 text-center text-sm relative z-10`,children:e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[e.jsxs("p",{className:`${te==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["BlackStreaming - Todos los derechos reservados. Desarrollado por"," ",e.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Saiph"}),"."]}),e.jsxs("div",{className:"flex justify-center space-x-8",children:[e.jsx("a",{href:"https://twitter.com",className:`${te==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Twitter de BlackStreaming",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",className:`${te==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Instagram de BlackStreaming",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",className:`${te==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Facebook de BlackStreaming",children:e.jsx(zr,{size:24})})]})]})}),e.jsx(ve,{children:L&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:_e,className:`fixed bottom-6 left-6 bg-blue-600/90 backdrop-blur-lg p-3 rounded-full hover:bg-blue-700/95 shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 ${te==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Volver al inicio de la página",children:e.jsx(ta,{size:20})})})]})};YT.propTypes={};const Fq=()=>{const[r,t]=p.useState(""),[a,n]=p.useState(""),[i,c]=p.useState(!1),[o,u]=p.useState(""),[m,x]=p.useState(!1),[g,k]=p.useState(()=>localStorage.getItem("theme")||"dark"),S=$r(),_=p.useRef(null);p.useEffect(()=>{localStorage.setItem("theme",g),document.documentElement.classList.toggle("dark",g==="dark")},[g]),p.useEffect(()=>{const O=Xt.onAuthStateChanged(te=>{te&&S("/")});return()=>O()},[S]),p.useEffect(()=>{_.current?.focus()},[]);const I=p.useCallback(()=>r?a?a.length<6?"La contraseña debe tener al menos 6 caracteres":"":"Por favor, ingresa tu contraseña":"Por favor, ingresa tu nombre de usuario o correo electrónico",[r,a]),P=async O=>{try{const te=ue(M,"users"),ne=Fe(te,dt("username","==",O)),be=await Jt(ne);if(!be.empty){const H=be.docs[0].data();return{email:H.email,status:H.status||"active"}}return null}catch(te){return console.error("Error fetching username:",te),null}},b=p.useCallback(async O=>{O.preventDefault();const te=I();if(te){u(te);return}u(""),x(!0);try{let ne=r,be="active";if(r.includes("@")){const H=ue(M,"users"),z=Fe(H,dt("email","==",r)),F=await Jt(z);F.empty||(be=F.docs[0].data().status||"active")}else{const H=await P(r);if(!H){u("Nombre de usuario no encontrado"),x(!1);return}ne=H.email,be=H.status}if(be==="suspended"){u("Esta cuenta está suspendida y no se puede ingresar"),x(!1);return}await aO(Xt,ne,a),t(""),n(""),S("/")}catch(ne){u(ne.code==="auth/wrong-password"?"Contraseña incorrecta":ne.code==="auth/user-not-found"?"Usuario o correo electrónico no encontrado":ne.code==="auth/too-many-requests"?"Demasiados intentos fallidos. Intenta de nuevo más tarde.":"Error al iniciar sesión. Por favor, intenta de nuevo.")}finally{x(!1)}},[r,a,S,I]),B=p.useCallback(()=>{k(O=>O==="dark"?"light":"dark")},[]),L=p.useCallback(()=>{c(O=>!O)},[]);return e.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${g==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-100 via-gray-50 to-white text-gray-900"} flex flex-col items-center justify-between px-4 sm:px-6 lg:px-8 font-inter relative overflow-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${g==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(25)].map((O,te)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},te))})]}),e.jsx("main",{className:"flex-1 flex items-center justify-center w-full py-12 sm:py-16 relative z-10",children:e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`${g==="dark"?"bg-gray-900/30 border-gray-700/30":"bg-white/90 border-gray-200/30"} backdrop-blur-xl rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md`,role:"form","aria-labelledby":"login-title",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${g==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("button",{onClick:B,className:`p-2 rounded-full ${g==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${g==="dark"?"claro":"oscuro"}`,children:g==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})})]}),e.jsx("h2",{id:"login-title",className:"text-2xl sm:text-3xl font-bold mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Iniciar Sesión"}),e.jsx(ve,{children:o&&e.jsx(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${g==="dark"?"bg-red-900/50 border-red-600/50":"bg-red-100/50 border-red-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-red-600 border-l-4`,role:"alert",children:o})}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Vd,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${g==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx(j.input,{ref:_,type:"text",placeholder:"Nombre de usuario o correo electrónico",value:r,onChange:O=>t(O.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${g==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Nombre de usuario o correo electrónico",required:!0,whileFocus:{scale:1.02}})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ow,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${g==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx(j.input,{type:i?"text":"password",placeholder:"Contraseña",value:a,onChange:O=>n(O.target.value),className:`w-full pl-12 pr-12 py-3 rounded-full ${g==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Contraseña",required:!0,whileFocus:{scale:1.02}}),e.jsx("button",{type:"button",onClick:L,className:`absolute right-4 top-1/2 transform -translate-y-1/2 ${g==="dark"?"text-gray-400 hover:text-gray-200":"text-gray-600 hover:text-gray-800"} transition duration-200`,"aria-label":i?"Ocultar contraseña":"Mostrar contraseña",children:i?e.jsx(qT,{size:18}):e.jsx(WT,{size:18})})]}),e.jsxs(j.button,{type:"submit",disabled:m,className:`w-full bg-blue-600/90 backdrop-blur-xl py-3 rounded-full ${m?"opacity-50 cursor-not-allowed":"hover:bg-blue-700/95"} text-sm border ${g==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center justify-center text-white font-semibold`,"aria-label":"Iniciar sesión",whileHover:{scale:m?1:1.05},whileTap:{scale:m?1:.95},children:[m?e.jsxs(j.svg,{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z"})]}):e.jsx(dr,{className:"mr-2"}),m?"Cargando...":"Iniciar Sesión"]})]}),e.jsxs("div",{className:"text-center text-sm mt-6 space-y-3",children:[e.jsxs("p",{className:`${g==="dark"?"text-gray-300":"text-gray-700"}`,children:["¿No tienes una cuenta?"," ",e.jsx(Ve,{to:"/register",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Ir a registrarse",children:"Regístrate aquí"})]}),e.jsxs("p",{className:`${g==="dark"?"text-gray-300":"text-gray-700"}`,children:["¿Olvidaste tu contraseña?"," ",e.jsx(Ve,{to:"/forgot-password",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Recuperar contraseña",children:"Recupérala aquí"})]})]})]})}),e.jsx("footer",{className:`${g==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-10 px-4 sm:px-6 lg:px-8 text-center text-sm relative z-10 w-full`,children:e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[e.jsxs("p",{className:`${g==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["BlackStreaming - Todos los derechos reservados. Desarrollado por"," ",e.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Saiph"}),"."]}),e.jsxs("div",{className:"flex justify-center space-x-8",children:[e.jsx("a",{href:"https://twitter.com",className:`${g==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Twitter de BlackStreaming",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",className:`${g==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Instagram de BlackStreaming",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",className:`${g==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Facebook de BlackStreaming",children:e.jsx(zr,{size:24})})]})]})})]})},Oq=()=>{const[r,t]=p.useState(""),[a,n]=p.useState(""),[i,c]=p.useState(""),[o,u]=p.useState(""),[m,x]=p.useState(""),[g,k]=p.useState(!1),[S,_]=p.useState(""),[I,P]=p.useState(!1),[b,B]=p.useState(()=>localStorage.getItem("theme")||"dark"),L=$r(),O=p.useRef(null);p.useEffect(()=>{localStorage.setItem("theme",b),document.documentElement.classList.toggle("dark",b==="dark")},[b]),p.useEffect(()=>{const z=Xt.onAuthStateChanged(F=>{F&&L("/")});return()=>z()},[L]),p.useEffect(()=>{O.current?.focus()},[]);const te=p.useCallback(async()=>r?/^[a-zA-Z0-9_]{3,20}$/.test(r)?(await sr(se(M,"usernames",r.toLowerCase()))).exists()?"El nombre de usuario ya está en uso":a?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)?i?/^\d{9}$/.test(i)?o?o.length<6?"La contraseña debe tener al menos 6 caracteres":"":"Por favor, ingresa una contraseña":"El número de teléfono debe tener 9 dígitos":"Por favor, ingresa tu número de teléfono":"Correo electrónico inválido":"Por favor, ingresa tu correo electrónico":"El nombre de usuario debe tener entre 3 y 20 caracteres alfanuméricos":"Por favor, ingresa un nombre de usuario",[r,a,i,o]),ne=p.useCallback(async z=>{z.preventDefault();const F=await te();if(F){_(F);return}_(""),P(!0);try{const ie=(await rO(Xt,a,o)).user;await nO(ie,{displayName:r}),await hl(se(M,"users",ie.uid),{username:r.toLowerCase(),email:a.toLowerCase(),phoneNumber:`+51${i}`,referralCode:m||null,balance:0,createdAt:new Date}),await hl(se(M,"usernames",r.toLowerCase()),{email:a.toLowerCase(),uid:ie.uid}),t(""),n(""),c(""),u(""),x(""),L("/")}catch(v){_(v.code==="auth/email-already-in-use"?"El correo electrónico ya está registrado":v.code==="auth/invalid-email"?"Correo electrónico inválido":v.code==="auth/weak-password"?"La contraseña es demasiado débil":"Error al registrarse. Por favor, intenta de nuevo.")}finally{P(!1)}},[r,a,i,o,m,L,te]),be=p.useCallback(()=>{B(z=>z==="dark"?"light":"dark")},[]),H=p.useCallback(()=>{k(z=>!z)},[]);return e.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${b==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-100 via-gray-50 to-white text-gray-900"} flex flex-col items-center justify-between px-4 sm:px-6 lg:px-8 font-inter relative overflow-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${b==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(25)].map((z,F)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},F))})]}),e.jsx("main",{className:"flex-1 flex items-center justify-center w-full py-12 sm:py-16 relative z-10",children:e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`${b==="dark"?"bg-gray-900/30 border-gray-700/30":"bg-white/90 border-gray-200/30"} backdrop-blur-xl rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md`,role:"form","aria-labelledby":"register-title",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${b==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("button",{onClick:be,className:`p-2 rounded-full ${b==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${b==="dark"?"claro":"oscuro"}`,children:b==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})})]}),e.jsx("h2",{id:"register-title",className:"text-2xl sm:text-3xl font-bold mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Registrarse"}),e.jsx(ve,{children:S&&e.jsx(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${b==="dark"?"bg-red-900/50 border-red-600/50":"bg-red-100/50 border-red-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-red-600 border-l-4`,role:"alert",children:S})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Vd,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${b==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx(j.input,{ref:O,type:"text",placeholder:"Elige un nombre de usuario",value:r,onChange:z=>t(z.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${b==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Nombre de usuario",required:!0,whileFocus:{scale:1.02}})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Du,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${b==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx(j.input,{type:"email",placeholder:"Tu correo electrónico",value:a,onChange:z=>n(z.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${b==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Correo electrónico",required:!0,whileFocus:{scale:1.02}})]}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(eq,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${b==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsxs("div",{className:"flex w-full",children:[e.jsx("span",{className:`flex items-center pl-12 pr-3 py-3 rounded-l-full border-r ${b==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} text-sm`,children:"🇵🇪 Perú (+51)"}),e.jsx(j.input,{type:"tel",placeholder:"Tu número de teléfono",value:i,onChange:z=>c(z.target.value.replace(/\D/g,"")),className:`w-full pl-4 pr-4 py-3 rounded-r-full ${b==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Número de teléfono",required:!0,maxLength:9,whileFocus:{scale:1.02}})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ow,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${b==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx(j.input,{type:g?"text":"password",placeholder:"Elige una contraseña",value:o,onChange:z=>u(z.target.value),className:`w-full pl-12 pr-12 py-3 rounded-full ${b==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Contraseña",required:!0,whileFocus:{scale:1.02}}),e.jsx("button",{onClick:H,className:`absolute right-4 top-1/2 transform -translate-y-1/2 ${b==="dark"?"text-gray-400 hover:text-gray-200":"text-gray-600 hover:text-gray-800"} transition duration-200`,"aria-label":g?"Ocultar contraseña":"Mostrar contraseña",children:g?e.jsx(qT,{size:18}):e.jsx(WT,{size:18})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Vd,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${b==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx(j.input,{type:"text",placeholder:"Ingresa un código de referido (si tienes)",value:m,onChange:z=>x(z.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${b==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Código de referido (opcional)",whileFocus:{scale:1.02}})]}),e.jsxs(j.button,{onClick:ne,disabled:I,className:`w-full bg-green-600/90 backdrop-blur-xl py-3 rounded-full ${I?"opacity-50 cursor-not-allowed":"hover:bg-green-700/95"} text-sm border ${b==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center justify-center text-white font-semibold`,"aria-label":"Registrarse",whileHover:{scale:I?1:1.05},whileTap:{scale:I?1:.95},children:[I?e.jsxs(j.svg,{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z"})]}):e.jsx(ur,{className:"mr-2"}),I?"Cargando...":"Registrarse"]})]}),e.jsxs("p",{className:`text-center text-sm mt-6 ${b==="dark"?"text-gray-300":"text-gray-700"}`,children:["¿Ya tienes una cuenta?"," ",e.jsx(Ve,{to:"/login",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Ir a iniciar sesión",children:"Inicia sesión aquí"})]})]})}),e.jsx("footer",{className:`${b==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-10 px-4 sm:px-6 lg:px-8 text-center text-sm relative z-10 w-full`,children:e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[e.jsxs("p",{className:`${b==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["BlackStreaming - Todos los derechos reservados. Desarrollado por"," ",e.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Saiph"}),"."]}),e.jsxs("div",{className:"flex justify-center space-x-8",children:[e.jsx("a",{href:"https://twitter.com",className:`${b==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Twitter de BlackStreaming",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",className:`${b==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Instagram de BlackStreaming",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",className:`${b==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Facebook de BlackStreaming",children:e.jsx(zr,{size:24})})]})]})})]})},Lq=()=>{const[r,t]=p.useState(""),[a,n]=p.useState(""),[i,c]=p.useState(""),[o,u]=p.useState(!1),[m,x]=p.useState(()=>localStorage.getItem("theme")||"dark"),g=$r(),k=p.useRef(null);p.useEffect(()=>{localStorage.setItem("theme",m),document.documentElement.classList.toggle("dark",m==="dark")},[m]),p.useEffect(()=>{const P=Xt.onAuthStateChanged(b=>{b&&g("/")});return()=>P()},[g]),p.useEffect(()=>{k.current?.focus()},[]);const S=p.useCallback(()=>r?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?"":"Correo electrónico inválido":"Por favor, ingresa tu correo electrónico",[r]),_=p.useCallback(async P=>{P.preventDefault();const b=S();if(b){n(b),c("");return}n(""),c(""),u(!0);try{await tO(Xt,r),c("Se ha enviado un enlace de restablecimiento de contraseña a tu correo electrónico."),t("")}catch(B){n(B.code==="auth/user-not-found"?"No se encontró un usuario con este correo electrónico":B.code==="auth/invalid-email"?"Correo electrónico inválido":B.code==="auth/too-many-requests"?"Demasiados intentos. Intenta de nuevo más tarde.":"Error al enviar el enlace de restablecimiento. Por favor, intenta de nuevo.")}finally{u(!1)}},[r,S]),I=p.useCallback(()=>{x(P=>P==="dark"?"light":"dark")},[]);return e.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${m==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-100 via-gray-50 to-white text-gray-900"} flex flex-col items-center justify-between px-4 sm:px-6 lg:px-8 font-inter relative overflow-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${m==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(25)].map((P,b)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},b))})]}),e.jsx("main",{className:"flex-1 flex items-center justify-center w-full py-12 sm:py-16 relative z-10",children:e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`${m==="dark"?"bg-gray-900/30 border-gray-700/30":"bg-white/90 border-gray-200/30"} backdrop-blur-xl rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md`,role:"form","aria-labelledby":"forgot-password-title",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${m==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("button",{onClick:I,className:`p-2 rounded-full ${m==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${m==="dark"?"claro":"oscuro"}`,children:m==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})})]}),e.jsx("h2",{id:"forgot-password-title",className:"text-2xl sm:text-3xl font-bold mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Recuperar Contraseña"}),e.jsxs(ve,{children:[a&&e.jsx(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${m==="dark"?"bg-red-900/50 border-red-600/50":"bg-red-100/50 border-red-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-red-600 border-l-4`,role:"alert",children:a}),i&&e.jsx(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${m==="dark"?"bg-green-900/50 border-green-600/50":"bg-green-100/50 border-green-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-green-600 border-l-4`,role:"alert",children:i})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Du,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${m==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx(j.input,{ref:k,type:"email",placeholder:"Tu correo electrónico",value:r,onChange:P=>t(P.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${m==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Correo electrónico",required:!0,whileFocus:{scale:1.02}})]}),e.jsxs(j.button,{onClick:_,disabled:o,className:`w-full bg-blue-600/90 backdrop-blur-xl py-3 rounded-full ${o?"opacity-50 cursor-not-allowed":"hover:bg-blue-700/95"} text-sm border ${m==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center justify-center text-white font-semibold`,"aria-label":"Enviar enlace de restablecimiento",whileHover:{scale:o?1:1.05},whileTap:{scale:o?1:.95},children:[o?e.jsxs(j.svg,{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z"})]}):e.jsx(Du,{className:"mr-2"}),o?"Cargando...":"Enviar Enlace de Restablecimiento"]})]}),e.jsxs("div",{className:"text-center text-sm mt-6 space-y-3",children:[e.jsxs("p",{className:`${m==="dark"?"text-gray-300":"text-gray-700"}`,children:["¿Ya tienes una cuenta?"," ",e.jsx(Ve,{to:"/login",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Ir a iniciar sesión",children:"Inicia sesión aquí"})]}),e.jsxs("p",{className:`${m==="dark"?"text-gray-300":"text-gray-700"}`,children:["¿No tienes una cuenta?"," ",e.jsx(Ve,{to:"/register",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Ir a registrarse",children:"Regístrate aquí"})]})]})]})}),e.jsx("footer",{className:`${m==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-10 px-4 sm:px-6 lg:px-8 text-center text-sm relative z-10 w-full`,children:e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[e.jsxs("p",{className:`${m==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["BlackStreaming - Todos los derechos reservados. Desarrollado por"," ",e.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Saiph"}),"."]}),e.jsxs("div",{className:"flex justify-center space-x-8",children:[e.jsx("a",{href:"https://twitter.com",className:`${m==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Twitter de BlackStreaming",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",className:`${m==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Instagram de BlackStreaming",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",className:`${m==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Facebook de BlackStreaming",children:e.jsx(zr,{size:24})})]})]})})]})};function fa(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(r)}function Xr(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(r)}function Up(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(r)}function xr(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(r)}function QT(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(r)}function Hp(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(r)}function Bq(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(r)}function ra(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(r)}function zq(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(r)}function n5(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},child:[]}]})(r)}function lo(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(r)}function Vq(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(r)}function XT(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(r)}function Uq(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(r)}function mr(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(r)}function Vt(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"},child:[]},{tag:"line",attr:{x1:"7",y1:"2",x2:"7",y2:"22"},child:[]},{tag:"line",attr:{x1:"17",y1:"2",x2:"17",y2:"22"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"2",y1:"7",x2:"7",y2:"7"},child:[]},{tag:"line",attr:{x1:"2",y1:"17",x2:"7",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"17",x2:"22",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"7",x2:"22",y2:"7"},child:[]}]})(r)}function gr(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(r)}function Hq(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(r)}function ba(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(r)}function fr(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(r)}function Au(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(r)}function qq(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(r)}function da(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(r)}function Cn(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(r)}function ya(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(r)}function vt(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 18V5l12-2v13"},child:[]},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"16",r:"3"},child:[]}]})(r)}function br(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 19l7-7 3 3-7 7-3-3z"},child:[]},{tag:"path",attr:{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"},child:[]},{tag:"path",attr:{d:"M2 2l7.586 7.586"},child:[]},{tag:"circle",attr:{cx:"11",cy:"11",r:"2"},child:[]}]})(r)}function iy(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(r)}function yr(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polygon",attr:{points:"10 8 16 12 10 16 10 8"},child:[]}]})(r)}function i5(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(r)}function JT(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(r)}function Jr(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(r)}function ZT(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(r)}function Br(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(r)}function zt(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(r)}function rb(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(r)}function eS(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(r)}function o5(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(r)}function Pe(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"15",rx:"2",ry:"2"},child:[]},{tag:"polyline",attr:{points:"17 2 12 7 7 2"},child:[]}]})(r)}function tS(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(r)}function va(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(r)}function qn(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(r)}function l5(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(r)}function Ut(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(r)}function Pn(r){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(r)}const Wq=({isOpen:r,message:t,title:a,onClose:n})=>r?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:a}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(Pn,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:n,className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,rS=({isOpen:r,user:t,onClose:a,onSave:n,theme:i="dark"})=>{const c=i==="dark",[o,u]=p.useState(t?.username||""),[m,x]=p.useState(""),g={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,scale:.95,transition:{duration:.2}}},k={hover:{scale:1.05,transition:{duration:.2}},tap:{scale:.95}},S=_=>{if(_.preventDefault(),x(""),!o.trim()){x("El nombre de usuario no puede estar vacío.");return}n(t.id,o.trim())};return r?e.jsx(j.div,{className:`fixed inset-0 ${c?"bg-black/70":"bg-black/50"} flex items-center justify-center z-50 p-4`,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},role:"dialog","aria-modal":"true","aria-labelledby":"edit-profile-title",children:e.jsx(j.div,{className:`rounded-2xl shadow-md w-full max-w-md border ${c?"bg-gray-900/90 border-gray-700/50":"bg-white border-gray-300"}`,variants:g,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{id:"edit-profile-title",className:"text-xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Editar Perfil"}),e.jsx(j.button,{onClick:a,className:`${c?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,variants:k,whileHover:"hover",whileTap:"tap","aria-label":"Cerrar modal",children:e.jsx(Pn,{size:20})})]}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block mb-2 font-semibold ${c?"text-gray-300":"text-gray-700"}`,children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:o,onChange:_=>u(_.target.value),className:`w-full px-4 py-2 rounded-xl ${c?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300`,required:!0,"aria-label":"Nombre de usuario"}),m&&e.jsx("p",{className:`text-sm mt-2 ${c?"text-red-400":"text-red-600"}`,children:m})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(j.button,{type:"button",onClick:a,className:`px-4 py-2 rounded-xl font-medium transition-all duration-300 ${c?"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-400":"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:k,whileHover:"hover",whileTap:"tap","aria-label":"Cancelar edición",children:"Cancelar"}),e.jsx(j.button,{type:"submit",className:`px-4 py-2 rounded-xl font-medium transition-all duration-300 ${c?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:k,whileHover:"hover",whileTap:"tap","aria-label":"Guardar perfil",children:"Guardar"})]})]})]})})}):null};rS.propTypes={isOpen:Q.bool.isRequired,user:Q.shape({id:Q.string.isRequired,username:Q.string.isRequired}).isRequired,onClose:Q.func.isRequired,onSave:Q.func.isRequired,theme:Q.oneOf(["light","dark"]).isRequired};const aS=({isOpen:r,provider:t,onClose:a,onRate:n,theme:i="dark"})=>{const c=i==="dark",[o,u]=p.useState(0),[m,x]=p.useState(""),g={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,scale:.95,transition:{duration:.2}}},k={hover:{scale:1.05,transition:{duration:.2}},tap:{scale:.95}},S=_=>{if(_.preventDefault(),x(""),o<1||o>5){x("Por favor, selecciona una calificación entre 1 y 5 estrellas.");return}n(t.id,o),u(0)};return r?e.jsx(j.div,{className:`fixed inset-0 ${c?"bg-black/70":"bg-black/50"} flex items-center justify-center z-50 p-4`,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},role:"dialog","aria-modal":"true","aria-labelledby":"rate-provider-title",children:e.jsx(j.div,{className:`rounded-2xl shadow-md w-full max-w-md border ${c?"bg-gray-900/90 border-gray-700/50":"bg-white border-gray-300"}`,variants:g,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{id:"rate-provider-title",className:"text-xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Calificar Proveedor"}),e.jsx(j.button,{onClick:a,className:`${c?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,variants:k,whileHover:"hover",whileTap:"tap","aria-label":"Cerrar modal",children:e.jsx(Pn,{size:20})})]}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:`block mb-2 font-semibold ${c?"text-gray-300":"text-gray-700"}`,children:["Proveedor: ",t.name]}),e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(_=>e.jsx(j.div,{variants:k,whileHover:"hover",whileTap:"tap",children:e.jsx(zt,{size:24,className:`cursor-pointer ${_<=o?c?"text-yellow-400 fill-current":"text-yellow-600 fill-current":c?"text-gray-400":"text-gray-600"}`,onClick:()=>u(_),"aria-label":`Calificar con ${_} estrella${_>1?"s":""}`})},_))}),m&&e.jsx("p",{className:`text-sm mt-2 ${c?"text-red-400":"text-red-600"}`,children:m})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(j.button,{type:"button",onClick:a,className:`px-4 py-2 rounded-xl font-medium transition-all duration-300 ${c?"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-400":"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:k,whileHover:"hover",whileTap:"tap","aria-label":"Cancelar calificación",children:"Cancelar"}),e.jsx(j.button,{type:"submit",className:`px-4 py-2 rounded-xl font-medium transition-all duration-300 ${c?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:k,whileHover:"hover",whileTap:"tap","aria-label":"Enviar calificación",children:"Enviar Calificación"})]})]})]})})}):null};aS.propTypes={isOpen:Q.bool.isRequired,provider:Q.shape({id:Q.string.isRequired,name:Q.string.isRequired}).isRequired,onClose:Q.func.isRequired,onRate:Q.func.isRequired,theme:Q.oneOf(["light","dark"]).isRequired};const Gq=({userName:r,email:t,balance:a,orders:n,notifications:i,setActivePage:c,formatDate:o,theme:u="dark"})=>{const m=u==="dark",x={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}};return e.jsxs(j.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${m?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("h2",{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-6 bg-clip-text text-transparent bg-gradient-to-r ${m?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:["Bienvenido, ",e.jsx("span",{className:"text-red-400",children:r.username})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(j.div,{className:`rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${m?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:x,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("h3",{className:`text-lg font-semibold mb-3 ${m?"text-blue-400":"text-blue-600"}`,children:"Información de cuenta"}),e.jsxs("div",{className:`space-y-3 ${m?"text-gray-300":"text-gray-700"}`,children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(qn,{className:`mr-2 ${m?"text-blue-400":"text-blue-600"}`,size:18}),e.jsx("span",{children:r.username})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Cn,{className:`mr-2 ${m?"text-blue-400":"text-blue-600"}`,size:18}),e.jsx("span",{children:t})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(iy,{className:`mr-2 ${m?"text-blue-400":"text-blue-600"}`,size:18}),e.jsx("span",{children:r.phone||"No especificado"})]})]})]}),e.jsxs(j.div,{className:`rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${m?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:x,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("h3",{className:`text-lg font-semibold mb-3 ${m?"text-blue-400":"text-blue-600"}`,children:"Saldo disponible"}),e.jsxs("p",{className:`text-3xl font-bold ${m?"text-white":"text-gray-900"}`,children:["S/ ",a.toFixed(2)]}),e.jsx(j.button,{onClick:()=>c("recargar"),className:`mt-4 px-4 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${m?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Recargar"})]}),e.jsxs(j.div,{className:`rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${m?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:x,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("h3",{className:`text-lg font-semibold mb-3 ${m?"text-blue-400":"text-blue-600"}`,children:"Pedidos activos"}),e.jsx("p",{className:`text-3xl font-bold ${m?"text-white":"text-gray-900"}`,children:n.filter(g=>new Date(g.endDate)>new Date&&g.status==="completed").length}),e.jsx(j.button,{onClick:()=>c("pedidos"),className:`mt-4 px-4 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${m?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Ver pedidos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs(j.div,{className:`rounded-2xl p-4 shadow-xl border backdrop-blur-sm ${m?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:x,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("h3",{className:`text-lg font-semibold mb-3 ${m?"text-white":"text-gray-900"}`,children:"Pedidos recientes"}),n.length>0?n.slice(0,3).map(g=>{const k=new Date(g.endDate)>new Date&&g.status==="completed",S=g.status==="pending";return e.jsxs(j.div,{className:`border-b py-3 last:border-0 hover:rounded-xl hover:px-2 transition-all duration-300 ${m?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,whileHover:{backgroundColor:m?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.5)"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`font-medium ${m?"text-white":"text-gray-900"}`,children:g.productName||"Producto sin nombre"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${g.status==="pending"?m?"bg-yellow-900/80 text-yellow-400":"bg-yellow-500/20 text-yellow-600":k?m?"bg-green-900/80 text-green-400":"bg-green-500/20 text-green-600":m?"bg-red-900/80 text-red-400":"bg-red-500/20 text-red-600"}`,children:S?"A pedido":k?"Activo":"Expirado"})]}),e.jsxs("p",{className:`text-sm ${m?"text-gray-400":"text-gray-600"}`,children:["Vence: ",o(g.endDate)]})]},g.id)}):e.jsx("p",{className:`py-2 ${m?"text-gray-400":"text-gray-500"}`,children:"No tienes pedidos recientes"}),n.length>3&&e.jsx(j.button,{onClick:()=>c("pedidos"),className:`w-full mt-3 text-center text-sm transition-all duration-300 ${m?"text-blue-400 hover:underline":"text-blue-600 hover:underline"}`,whileHover:{scale:1.05},children:"Ver todos los pedidos"})]}),e.jsxs(j.div,{className:`rounded-2xl p-4 shadow-xl border backdrop-blur-sm ${m?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:x,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("h3",{className:`text-lg font-semibold mb-3 ${m?"text-white":"text-gray-900"}`,children:"Notificaciones"}),i.length>0?i.map(g=>e.jsxs(j.div,{className:`border-b py-3 last:border-0 hover:rounded-xl hover:px-2 transition-all duration-300 ${m?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,whileHover:{backgroundColor:m?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.5)"},children:[e.jsx("p",{className:`${m?"text-gray-300":"text-gray-700"}`,children:g.message}),e.jsx("p",{className:`text-xs mt-1 ${m?"text-gray-400":"text-gray-500"}`,children:o(g.updatedAt?.toDate?.()||new Date)})]},g.id)):e.jsx("p",{className:`py-2 ${m?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})]}),e.jsxs(j.div,{className:`rounded-2xl p-4 sm:p-6 shadow-xl border backdrop-blur-sm ${m?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:x,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${m?"text-white":"text-gray-900"}`,children:"Únete a nuestros grupos"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[{href:"https://chat.whatsapp.com/IG8v1E00lAD6RIOo7ZB5Kv",icon:"https://cdn.jsdelivr.net/npm/simple-icons@v13/icons/whatsapp.svg",title:"Avisos",subtitle:"Grupo de WhatsApp"},{href:"https://chat.whatsapp.com/Gs6kTW4DBTi7dEMhnZV1yb",icon:"https://cdn.jsdelivr.net/npm/simple-icons@v13/icons/whatsapp.svg",title:"General",subtitle:"Grupo de WhatsApp"},{href:"https://chat.whatsapp.com/BqCOR6w8002695hbYXf5KA",icon:"https://cdn.jsdelivr.net/npm/simple-icons@v13/icons/whatsapp.svg",title:"Publicidad",subtitle:"Grupo de WhatsApp"}].map((g,k)=>e.jsxs(j.a,{href:g.href,target:"_blank",rel:"noopener noreferrer",className:`flex items-center p-4 rounded-xl transition-all duration-300 border ${m?"bg-gray-700/50 hover:bg-gray-600/50 border-gray-600/50":"bg-gray-200/50 hover:bg-gray-300/50 border-gray-300/50"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("img",{src:g.icon,alt:`${g.title} Logo`,className:"w-8 h-8 mr-3",loading:"lazy"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${m?"text-white":"text-gray-900"}`,children:g.title}),e.jsx("p",{className:`text-sm ${m?"text-gray-300":"text-gray-600"}`,children:g.subtitle})]})]},k))})]})]})},sS=({notifications:r,formatDate:t,theme:a="dark"})=>{const n=a==="dark",i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}};return e.jsxs(j.div,{className:`p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${n?"bg-gray-900/90 border-gray-700/50":"bg-white border-gray-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},role:"region","aria-labelledby":"notifications-title",children:[e.jsx("h3",{id:"notifications-title",className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-6",children:"Notificaciones"}),r.length>0?e.jsx("div",{className:"space-y-4",children:r.map(c=>e.jsxs(j.div,{className:`border ${n?"border-gray-600/50":"border-gray-300"} rounded-2xl p-4 ${n?"bg-gray-800/50 hover:bg-gray-700/50":"bg-gray-100 hover:bg-gray-200/50"} transition-all duration-300`,variants:i,initial:"hidden",animate:"visible",whileHover:"hover","aria-labelledby":`notification-${c.id}-title`,children:[e.jsx("p",{id:`notification-${c.id}-title`,className:`text-base ${n?"text-gray-300":"text-gray-700"}`,children:c.message}),e.jsx("p",{className:`text-xs ${n?"text-gray-400":"text-gray-600"} mt-2`,children:t(c.updatedAt?.toDate?.()||new Date)})]},c.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Up,{className:`mx-auto text-4xl ${n?"text-gray-400":"text-gray-600"} mb-4`,"aria-hidden":"true"}),e.jsx("h4",{className:`text-lg font-semibold ${n?"text-white":"text-gray-900"}`,children:"No hay notificaciones"}),e.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"No tienes mensajes nuevos"})]})]})};sS.propTypes={notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.oneOfType([Q.instanceOf(Date),Q.shape({toDate:Q.func})])})).isRequired,formatDate:Q.func.isRequired,theme:Q.oneOf(["light","dark"]).isRequired};const Kq="/assets/yape-sz-D-gX92Ca.png",Yq="/assets/binance-sz-CGisVpHF.png",nS=({amount:r,setAmount:t,topUps:a,actionLoading:n,handleTopUpRequest:i,formatDate:c,theme:o="dark"})=>{const u=o==="dark",[m,x]=p.useState("PEN"),[g,k]=p.useState(3.75*1.1),[S,_]=p.useState(!1),[I,P]=p.useState(""),b={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5}}};p.useEffect(()=>{(async()=>{_(!0);try{const z=(await(await fetch("https://api.exchangerate-api.com/v4/latest/USD")).json()).rates.PEN||3.75;k(z*1.1)}catch(be){console.error("Error fetching exchange rate:",be)}finally{_(!1)}})()},[]),p.useEffect(()=>{const ne=parseFloat(I);if(isNaN(ne))t("");else{const be=m==="USD"?ne*g:ne;t(be.toFixed(2))}},[I,m,g,t]);const B=ne=>{const be=ne.target.value;P(be)},L=r&&!isNaN(parseFloat(r))?parseFloat(r).toFixed(2):"0.00",O=parseFloat(I),te=!isNaN(O)&&(m==="PEN"?O>=5:O>=3);return e.jsxs(j.div,{className:"space-y-8 max-w-6xl mx-auto px-4 sm:px-0",variants:b,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"topup-title",children:[e.jsxs("div",{className:`p-6 sm:p-8 rounded-3xl shadow-md border ${u?"bg-gray-900/80 border-gray-700/30":"bg-white border-gray-300"}`,children:[e.jsx("h3",{id:"topup-title",className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-6 text-center",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-lg mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 font-medium ${u?"text-gray-300":"text-gray-700"}`,children:"Moneda"}),e.jsxs("select",{value:m,onChange:ne=>{x(ne.target.value),P("")},className:`w-full px-4 py-3 rounded-xl ${u?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300`,children:[e.jsx("option",{value:"PEN",children:"S/ (PEN)"}),e.jsx("option",{value:"USD",children:"$ (USD)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block mb-2 font-medium ${u?"text-gray-300":"text-gray-700"}`,children:["Monto a recargar (",m==="PEN"?"S/":"$",")"]}),e.jsx("input",{type:"number",value:I,onChange:B,className:`w-full px-4 py-3 rounded-xl ${u?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300`,placeholder:`Mínimo ${m==="PEN"?"S/ 5.00":"$ 3.00"}`,min:m==="PEN"?"5":"3",step:"0.01","aria-label":`Monto a recargar en ${m}`}),m==="USD"&&!isNaN(O)&&e.jsxs("p",{className:`text-sm ${u?"text-gray-400":"text-gray-600"} mt-2`,children:["Equivalente: S/ ",L," (Tasa: 1 USD = ",g.toFixed(2)," PEN)",S&&" (Cargando tasa...)"]})]}),e.jsx(j.button,{onClick:i,disabled:n.topUp||!te,className:`w-full py-3 px-4 rounded-xl font-medium text-lg transition-all duration-300 ${te&&!n.topUp?u?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500":"bg-gray-300 text-gray-500 cursor-not-allowed"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,whileHover:{scale:te&&!n.topUp?1.05:1},whileTap:{scale:te&&!n.topUp?.95:1},"aria-label":"Solicitar recarga",children:n.topUp?e.jsx("div",{className:"animate-spin h-6 w-6 border-3 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"})]}),e.jsx("div",{className:`mt-8 p-6 rounded-2xl border ${u?"bg-gray-800/50 border-gray-700/30":"bg-gray-100 border-gray-300"} max-w-lg mx-auto`,children:e.jsxs(j.div,{className:"animate-fade-in",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsxs("h4",{className:`text-lg font-semibold ${u?"text-blue-400":"text-blue-600"} mb-4 flex items-center`,children:[e.jsx(lo,{className:"mr-2"})," Pago con ",m==="PEN"?"Yape":"Binance"]}),e.jsxs("p",{className:`mb-3 ${u?"text-gray-300":"text-gray-700"}`,children:["Escanea el código QR",m==="PEN"?" o usa Yape con el número:":"."]}),m==="PEN"&&e.jsx("p",{className:`text-xl font-bold ${u?"text-white":"text-gray-900"} mb-3`,children:"📱 940505969"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:`p-4 rounded-xl shadow-md ${u?"bg-white border-4 border-blue-600":"bg-white border border-gray-300"}`,children:e.jsx("img",{src:m==="PEN"?Kq:Yq,alt:`${m==="PEN"?"Yape":"Binance"} QR Code`,className:"w-48 h-48 object-contain",loading:"lazy"})})}),e.jsxs("p",{className:`mb-4 ${u?"text-gray-300":"text-gray-700"}`,children:["Realiza el pago de ",m==="PEN"?`S/ ${L}`:`$ ${O.toFixed(2)}`,". Confirma tu recarga vía WhatsApp."]}),e.jsxs(j.a,{href:`https://wa.me/51940505969?text=${encodeURIComponent(`Hola 😊, he realizado una recarga a través de ${m==="PEN"?"Yape":"Binance"} por ${m==="PEN"?`S/ ${L}`:`$ ${O.toFixed(2)}`}. Por favor, confirma mi pago.`)}`,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center px-6 py-3 rounded-xl font-medium transition-all duration-300 ${u?"bg-green-500 hover:bg-green-600 text-white focus:ring-green-400":"bg-green-500 hover:bg-green-600 text-white focus:ring-green-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Confirmar pago por WhatsApp con ${m==="PEN"?"Yape":"Binance"}`,children:[e.jsx(Cn,{className:"mr-2"})," Confirmar por WhatsApp"]})]})})]}),e.jsxs("div",{className:`p-6 sm:p-8 rounded-3xl shadow-md border ${u?"bg-gray-900/80 border-gray-700/30":"bg-white border-gray-300"}`,children:[e.jsx("h3",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-6 text-center",children:"Historial de recargas"}),a.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:`${u?"bg-gray-800/50":"bg-gray-100"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${u?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Monto"}),e.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${u?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Estado"}),e.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${u?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Fecha"})]})}),e.jsx("tbody",{className:`${u?"bg-gray-800/50":"bg-white"} divide-y ${u?"divide-gray-600/50":"divide-gray-200"}`,children:a.map(ne=>e.jsxs("tr",{className:`${u?"hover:bg-gray-700/50":"hover:bg-gray-100"} transition-all duration-300`,children:[e.jsxs("td",{className:`px-4 py-4 whitespace-nowrap font-medium ${u?"text-white":"text-gray-900"}`,children:["S/ ",ne.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${ne.status==="aprobado"?u?"bg-green-900/80 text-green-400":"bg-green-500/20 text-green-600":ne.status==="pendiente"?u?"bg-yellow-900/80 text-yellow-400":"bg-yellow-500/20 text-yellow-600":u?"bg-red-900/80 text-red-400":"bg-red-500/20 text-red-600"}`,children:ne.status})}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${u?"text-gray-400":"text-gray-600"}`,children:c(ne.date)})]},ne.id))})]})}):e.jsx("p",{className:`text-lg text-center py-8 ${u?"text-gray-400":"text-gray-600"}`,children:"No hay recargas registradas"})]})]})};nS.propTypes={amount:Q.oneOfType([Q.string,Q.number]).isRequired,setAmount:Q.func.isRequired,topUps:Q.arrayOf(Q.shape({id:Q.string.isRequired,amount:Q.oneOfType([Q.string,Q.number]).isRequired,status:Q.string.isRequired,date:Q.oneOfType([Q.instanceOf(Date),Q.string]).isRequired})).isRequired,actionLoading:Q.shape({topUp:Q.bool}).isRequired,handleTopUpRequest:Q.func.isRequired,formatDate:Q.func.isRequired,theme:Q.oneOf(["light","dark"]).isRequired};const iS=({providers:r,openRateProviderModal:t,theme:a="dark"})=>{const n=a==="dark",i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}};return e.jsxs(j.div,{className:`p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${n?"bg-gray-900/90 border-gray-700/50":"bg-white border-gray-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},role:"region","aria-labelledby":"providers-title",children:[e.jsx("h3",{id:"providers-title",className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-6",children:"Proveedores"}),r.length>0?e.jsx("div",{className:"space-y-4",children:r.map(c=>e.jsx(j.div,{className:`border ${n?"border-gray-600/50":"border-gray-300"} rounded-2xl p-4 ${n?"bg-gray-800/50 hover:bg-gray-700/50":"bg-gray-100 hover:bg-gray-200/50"} transition-all duration-300`,variants:i,initial:"hidden",animate:"visible",whileHover:"hover","aria-labelledby":`provider-${c.id}-title`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{id:`provider-${c.id}-title`,className:`font-semibold text-base ${n?"text-gray-300":"text-gray-700"}`,children:c.name}),e.jsxs("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:["Teléfono: ",c.phone]})]}),e.jsxs(j.button,{onClick:()=>t(c),className:`px-4 py-2 rounded-xl font-medium transition-all duration-300 ${n?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 flex items-center gap-1.5`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Calificar al proveedor ${c.name}`,children:[e.jsx(zt,{size:16}),"Calificar"]})]})},c.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qn,{className:`mx-auto text-4xl ${n?"text-gray-400":"text-gray-600"} mb-4`,"aria-hidden":"true"}),e.jsx("h4",{className:`text-lg font-semibold ${n?"text-white":"text-gray-900"}`,children:"No hay proveedores"}),e.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"No has realizado compras con proveedores aún."})]})]})};iS.propTypes={providers:Q.arrayOf(Q.shape({id:Q.string.isRequired,name:Q.string.isRequired,phone:Q.string.isRequired})).isRequired,openRateProviderModal:Q.func.isRequired,theme:Q.oneOf(["light","dark"]).isRequired};const oS=({orders:r,searchQuery:t,setSearchQuery:a,formatDate:n,handleRenewal:i,actionLoading:c,balance:o,theme:u="dark"})=>{const m=u==="dark",x={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},g=p.useMemo(()=>r.filter(k=>(k.productName||"").toLowerCase().includes(t.toLowerCase())||(k.orderId||"").toLowerCase().includes(t.toLowerCase())),[r,t]);return e.jsxs(j.div,{className:`p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${m?"bg-gray-900/90 border-gray-700/50":"bg-white border-gray-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},role:"region","aria-labelledby":"orders-title",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4",children:[e.jsx("h3",{id:"orders-title",className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Mis Pedidos"}),e.jsxs("div",{className:"relative w-full sm:w-64 lg:w-80",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:t,onChange:k=>a(k.target.value),className:`w-full px-4 py-2.5 rounded-full text-sm ${m?"bg-gray-800/50 border-gray-600/50 text-gray-200 placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:outline-none focus:ring-2 focus:ring-blue-400 transition-all duration-300`,"aria-label":"Buscar pedidos por nombre o ID"}),e.jsx(Jr,{className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${m?"text-gray-400":"text-gray-600"}`,size:18})]})]}),g.length>0?g.map(k=>{const S=parseFloat(k.price)||0,_=parseFloat(k.renewalPrice)||S,I=new Date(k.endDate)>new Date&&k.status==="completed",P=k.status==="pending";Math.max(0,k.daysRemaining||0);const b=Math.min(k.timeElapsedPercentage||0,100);let B=m?"bg-green-400":"bg-green-500";b>70&&b<=90?B=m?"bg-yellow-400":"bg-yellow-500":b>90&&(B=m?"bg-red-400":"bg-red-500");const L=P?e.jsx(ra,{className:m?"text-yellow-400":"text-yellow-600",size:18,"aria-label":"Estado: Pendiente"}):I?e.jsx(Hp,{className:m?"text-green-400":"text-green-600",size:18,"aria-label":"Estado: Activo"}):e.jsx(Xr,{className:m?"text-red-400":"text-red-600",size:18,"aria-label":"Estado: Expirado"}),O=P?m?"bg-yellow-900/80 text-yellow-400":"bg-yellow-500/20 text-yellow-600":I?m?"bg-green-900/80 text-green-400":"bg-green-500/20 text-green-600":m?"bg-red-900/80 text-red-400":"bg-red-500/20 text-red-600",te=encodeURIComponent(`*Consulta sobre Pedido - ${k.productName||"Sin nombre"}*

*N° Pedido:* ${k.orderId||"No especificado"}
*Producto:* ${k.productName||"Sin nombre"}
*Precio:* S/ ${S.toFixed(2)}
`+(_?`*Precio de Renovación:* S/ ${_.toFixed(2)}
`:"")+`*Estado:* ${P?"A pedido":I?"Activo":"Expirado"}
*Fecha de Inicio:* ${n(k.startDate)}
*Fecha de Vencimiento:* ${n(k.endDate)}
`+(P?`Hola 😊, he comprado un producto a pedido (${k.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),ne=encodeURIComponent(`😊 Estimado/a ${k.client?.customerName||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${k.productName||"Sin nombre"}.
🔢 Código: ${k.orderId||"No especificado"}
`+(P?"":`📧 Correo: ${k.account?.email||"No especificado"}
🔐 Contraseña: ${k.account?.password||"No especificado"}
👤 Perfil: ${k.account?.profile||"No especificado"}
📌 PIN: ${k.account?.pin||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${n(k.startDate)}
📅 Fecha de vencimiento: ${n(k.endDate)}
🏁 Días contratados: ${k.durationDays||30} días.

`+(P?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${k.termsAndConditions||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),be=k.providerPhone?k.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999",H=k.client?.phone?k.client.phone.replace(/^\+/,"").replace(/\D/g,""):"51999999999";return e.jsxs(j.article,{className:`border ${m?"border-gray-700/50":"border-gray-300"} rounded-2xl overflow-hidden shadow-md mb-6`,variants:x,initial:"hidden",animate:"visible",whileHover:"hover","aria-labelledby":`order-${k.id}-title`,children:[e.jsxs("div",{className:`${m?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} border-b px-4 py-3 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[L,e.jsxs("div",{children:[e.jsx("h4",{id:`order-${k.id}-title`,className:`font-semibold text-lg ${m?"text-white":"text-gray-900"}`,children:k.productName||"Producto sin nombre"}),k.orderId&&e.jsxs("p",{className:`text-sm ${m?"text-gray-400":"text-gray-600"}`,children:["N°: ",k.orderId]})]})]}),e.jsxs("div",{className:"text-right flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:`text-lg font-bold ${m?"text-white":"text-gray-900"}`,children:["S/ ",S.toFixed(2)]}),_!==S&&e.jsxs("p",{className:`text-sm ${m?"text-gray-400":"text-gray-600"}`,children:["Ren: S/ $",_.toFixed(2)]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${O}`,children:P?"A pedido":I?"Activo":"Expirado"})]})]}),e.jsxs("div",{className:`${m?"bg-gray-900/90":"bg-white"} p-4`,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:`w-full ${m?"bg-gray-700/50":"bg-gray-200"} rounded-full h-2.5`,role:"progressbar","aria-valuenow":b,"aria-valuemin":"0","aria-valuemax":"100","aria-label":`Progreso del pedido: ${b.toFixed(0)}% completado`,children:e.jsx("div",{className:`h-2.5 rounded-full ${B}`,style:{width:`${b}%`}})}),e.jsxs("p",{className:`text-sm ${m?"text-gray-400":"text-gray-600"} mt-1 text-right`,children:[b.toFixed(0),"% completado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:`${m?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} border rounded-xl p-3`,children:[e.jsxs("h5",{className:`text-base font-semibold ${m?"text-blue-400":"text-blue-600"} flex items-center mb-2`,children:[e.jsx(qn,{className:"mr-2",size:16})," Cuenta"]}),e.jsx("div",{className:"space-y-2 text-sm",children:P?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Usuario: ",e.jsx("span",{className:m?"text-gray-300":"text-gray-700",children:"Por completar"})]}),e.jsxs("p",{children:["Clave: ",e.jsx("span",{className:m?"text-gray-300":"text-gray-700",children:"Por completar"})]}),e.jsxs("p",{children:["Perfil: ",e.jsx("span",{className:m?"text-gray-300":"text-gray-700",children:"Por completar"})]}),e.jsxs("p",{children:["PIN: ",e.jsx("span",{className:m?"text-gray-300":"text-gray-700",children:"No"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Usuario: ",e.jsx("span",{className:m?"text-gray-300":"text-gray-700",children:k.account?.email||"No especificado"})]}),e.jsxs("p",{children:["Clave: ",e.jsx("span",{className:m?"text-gray-300":"text-gray-700",children:k.account?.password||"No especificado"})]}),e.jsxs("p",{children:["Perfil: ",e.jsx("span",{className:m?"text-gray-300":"text-gray-700",children:k.account?.profile||"No especificado"})]}),e.jsxs("p",{children:["PIN: ",e.jsx("span",{className:m?"text-gray-300":"text-gray-700",children:k.account?.pin||"No especificado"})]})]})})]}),e.jsxs("div",{className:`${m?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} border rounded-xl p-3`,children:[e.jsxs("h5",{className:`text-base font-semibold ${m?"text-blue-400":"text-blue-600"} flex items-center mb-2`,children:[e.jsx(mr,{className:"mr-2",size:16})," Información del Pedido"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:["Inicio: ",e.jsx("span",{className:m?"text-gray-300":"text-gray-700",children:n(k.startDate)})]}),e.jsxs("p",{children:["Vencimiento: ",e.jsx("span",{className:m?"text-gray-300":"text-gray-700",children:n(k.endDate)})]}),e.jsxs("p",{children:["Estado: ",e.jsx("span",{className:m?"text-gray-300":"text-gray-700",children:P?"A pedido":I?"Activo":"Expirado"})]})]})]}),e.jsxs("div",{className:`${m?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} border rounded-xl p-3`,children:[e.jsxs("h5",{className:`text-base font-semibold ${m?"text-blue-400":"text-blue-600"} flex items-center mb-2`,children:[e.jsx(qn,{className:"mr-2",size:16})," Cliente"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:["Nombre: ",e.jsx("span",{className:m?"text-gray-300":"text-gray-700",children:k.client?.customerName||"No especificado"})]}),e.jsxs("p",{children:["Teléfono: ",e.jsx("span",{className:m?"text-gray-300":"text-gray-700",children:k.client?.phone||"No especificado"})]})]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap justify-end gap-3",children:[e.jsxs(j.a,{href:`https://wa.me/51${be}?text=${te}`,target:"_blank",rel:"noopener noreferrer",className:`px-4 py-2 text-white rounded-xl transition-all duration-300 ${m?"bg-green-500 hover:bg-green-600 focus:ring-green-400":"bg-green-500 hover:bg-green-600 focus:ring-green-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 text-sm flex items-center gap-1.5`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Contactar proveedor para el pedido ${k.orderId||k.productName}`,children:[e.jsx(Cn,{size:16})," Contactar proveedor"]}),I&&k.renewable&&e.jsx(j.button,{onClick:()=>i(k),disabled:c[`renew_${k.id}`]||o<_,className:`px-4 py-2 rounded-xl text-sm flex items-center gap-1.5 transition-all duration-300 ${c[`renew_${k.id}`]||o<_?"bg-gray-300 text-gray-500 cursor-not-allowed":m?"bg-blue-500 text-white hover:bg-blue-600 focus:ring-blue-400":"bg-blue-500 text-white hover:bg-blue-600 focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,whileHover:{scale:c[`renew_${k.id}`]||o<_?1:1.05},whileTap:{scale:c[`renew_${k.id}`]||o<_?1:.95},"aria-label":`Renovar pedido ${k.orderId||k.productName} por S/ ${_.toFixed(2)}`,children:c[`renew_${k.id}`]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(JT,{size:16})," Renovar (S/ ",_.toFixed(2),")"]})}),e.jsxs(j.a,{href:`https://wa.me/51${H}?text=${ne}`,target:"_blank",rel:"noopener noreferrer",className:`px-4 py-2 text-white rounded-xl transition-all duration-300 ${m?"bg-blue-500 hover:bg-blue-600 focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 text-sm flex items-center gap-1.5`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Contactar cliente para el pedido ${k.orderId||k.productName}`,children:[e.jsx(Cn,{size:16})," Contactar cliente"]})]})]})]},k.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Br,{className:`mx-auto text-4xl ${m?"text-gray-400":"text-gray-600"} mb-4`,"aria-hidden":"true"}),e.jsx("h4",{className:`text-lg font-semibold ${m?"text-white":"text-gray-900"}`,children:"No hay pedidos"}),e.jsx("p",{className:`text-sm ${m?"text-gray-400":"text-gray-600"}`,children:"Aún no has realizado ningún pedido."})]})]})};oS.propTypes={orders:Q.arrayOf(Q.shape({id:Q.string.isRequired,productName:Q.string,orderId:Q.string,price:Q.oneOfType([Q.string,Q.number]),renewalPrice:Q.oneOfType([Q.string,Q.number]),status:Q.string,startDate:Q.oneOfType([Q.string,Q.instanceOf(Date)]),endDate:Q.oneOfType([Q.string,Q.instanceOf(Date)]),daysRemaining:Q.number,timeElapsedPercentage:Q.number,account:Q.shape({email:Q.string,password:Q.string,profile:Q.string,pin:Q.string}),client:Q.shape({customerName:Q.string,phone:Q.string}),providerPhone:Q.string,renewable:Q.bool,termsAndConditions:Q.string})).isRequired,searchQuery:Q.string.isRequired,setSearchQuery:Q.func.isRequired,formatDate:Q.func.isRequired,handleRenewal:Q.func.isRequired,actionLoading:Q.object.isRequired,balance:Q.number.isRequired,theme:Q.oneOf(["light","dark"]).isRequired};const lS=({userName:r,email:t,actionLoading:a,handleUpdatePassword:n,openEditProfileModal:i,handleLogout:c,theme:o="dark"})=>{const u=o==="dark",m={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5}}},x={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},g={hover:{scale:1.05,transition:{duration:.2}},tap:{scale:.95}};return e.jsxs(j.div,{className:`p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${u?"bg-gray-900/90 border-gray-700/50":"bg-white border-gray-300"}`,variants:m,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"settings-title",children:[e.jsx("h3",{id:"settings-title",className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-6",children:"Configuración"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j.div,{className:`p-4 rounded-2xl border ${u?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} shadow-md hover:bg-gray-200/50 transition-all duration-300`,variants:x,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h4",{className:`text-lg font-semibold ${u?"text-blue-400":"text-blue-600"} mb-3 flex items-center`,children:[e.jsx(qn,{className:"mr-2"})," Perfil"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(qn,{className:`mr-2 ${u?"text-blue-400":"text-gray-600"}`}),"Nombre: ",e.jsx("span",{className:u?"text-gray-300":"text-gray-700",children:r.username})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(qq,{className:`mr-2 ${u?"text-blue-400":"text-gray-600"}`}),"Correo: ",e.jsx("span",{className:u?"text-gray-300":"text-gray-700",children:t})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(iy,{className:`mr-2 ${u?"text-blue-400":"text-gray-600"}`}),"Teléfono: ",e.jsx("span",{className:u?"text-gray-300":"text-gray-700",children:r.phone||"No especificado"})]})]}),e.jsx(j.button,{onClick:()=>i({id:r.id,username:r.username}),className:`mt-4 px-4 py-2 rounded-xl font-medium transition-all duration-300 ${u?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:g,whileHover:"hover",whileTap:"tap","aria-label":"Editar perfil",children:"Editar Perfil"})]}),e.jsxs(j.div,{className:`p-4 rounded-2xl border ${u?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} shadow-md hover:bg-gray-200/50 transition-all duration-300`,variants:x,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h4",{className:`text-lg font-semibold ${u?"text-blue-400":"text-blue-600"} mb-3 flex items-center`,children:[e.jsx(iy,{className:"mr-2"})," Seguridad"]}),e.jsxs("form",{onSubmit:n,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-1 font-medium ${u?"text-gray-300":"text-gray-700"}`,children:"Nueva Contraseña"}),e.jsx("input",{type:"password",name:"password",className:`w-full px-3 py-2 rounded-xl ${u?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300`,placeholder:"Ingrese nueva contraseña","aria-label":"Nueva contraseña"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-1 font-medium ${u?"text-gray-300":"text-gray-700"}`,children:"Nuevo Teléfono"}),e.jsx("input",{type:"tel",name:"phone",className:`w-full px-3 py-2 rounded-xl ${u?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300`,placeholder:"Ingrese nuevo teléfono","aria-label":"Nuevo teléfono"})]}),e.jsx(j.button,{type:"submit",disabled:a.password,className:`w-full py-2 rounded-xl font-medium transition-all duration-300 ${a.password?"bg-gray-300 text-gray-500 cursor-not-allowed":u?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:g,whileHover:a.password?{}:"hover",whileTap:a.password?{}:"tap","aria-label":"Guardar cambios de seguridad",children:a.password?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar Cambios"})]})]}),e.jsxs(j.div,{className:`p-4 rounded-2xl border ${u?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} shadow-md hover:bg-gray-200/50 transition-all duration-300`,variants:x,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h4",{className:`text-lg font-semibold ${u?"text-blue-400":"text-blue-600"} mb-3 flex items-center`,children:[e.jsx(Au,{className:"mr-2"})," Sesión"]}),e.jsxs(j.button,{onClick:c,className:`w-full py-2 flex items-center justify-center gap-2 rounded-xl font-medium transition-all duration-300 ${u?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:g,whileHover:"hover",whileTap:"tap","aria-label":"Cerrar sesión",children:[e.jsx(Au,{size:16}),"Cerrar Sesión"]})]})]})]})};lS.propTypes={userName:Q.shape({id:Q.string.isRequired,username:Q.string.isRequired,phone:Q.string}).isRequired,email:Q.string.isRequired,actionLoading:Q.shape({password:Q.bool}).isRequired,handleUpdatePassword:Q.func.isRequired,openEditProfileModal:Q.func.isRequired,handleLogout:Q.func.isRequired,theme:Q.oneOf(["light","dark"]).isRequired};const Qq=Sn.memo(({show:r,onClose:t,title:a,message:n,theme:i})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${i==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${i==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:c=>c.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${i==="dark"?"text-white":"text-gray-900"}`,children:a}),e.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:n})]})})}));Qq.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,title:Q.string.isRequired,message:Q.string.isRequired,theme:Q.string.isRequired};const cS=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState(""),[i,c]=p.useState([]),[o,u]=p.useState({username:"",phone:""}),[m,x]=p.useState(""),[g,k]=p.useState(0),[S,_]=p.useState(null),[I,P]=p.useState("inicio"),[b,B]=p.useState([]),[L,O]=p.useState({}),[te,ne]=p.useState([]),[be,H]=p.useState(!0),[z,F]=p.useState({}),[v,ie]=p.useState(null),[X,ae]=p.useState({isOpen:!1,message:"",title:""}),[We,ct]=p.useState({isOpen:!1,user:null}),[ft,ot]=p.useState({isOpen:!1,provider:null}),[Ee,Ie]=p.useState(""),[_e,re]=p.useState([]),[J,de]=p.useState("dark"),[ce,he]=p.useState(!1),[q,l]=p.useState(!1),Xe=$r(),qe=p.useCallback(()=>{de($e=>$e==="dark"?"light":"dark")},[]),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),Oe=p.useCallback(($e,s)=>{ae({isOpen:!0,title:$e,message:s})},[]),kt=p.useCallback(()=>{ae({isOpen:!1,message:"",title:""})},[]),Lt=p.useCallback($e=>{ct({isOpen:!0,user:$e})},[]),jt=p.useCallback(()=>{ct({isOpen:!1,user:null})},[]),Wt=p.useCallback($e=>{ot({isOpen:!0,provider:$e})},[]),Tt=p.useCallback(()=>{ot({isOpen:!1,provider:null})},[]),tt=p.useCallback($e=>{if(!$e)return"No especificada";try{const s=$e instanceof Date?$e:new Date($e);return isNaN(s.getTime())?"Fecha inválida":s.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},[]),yt=p.useCallback(async($e,s)=>{try{F(y=>({...y,profile:!0}));const E=se(M,"users",$e);await Ga(E,{username:s,updatedAt:mt()}),u(y=>({...y,username:s})),Oe("Éxito","Perfil actualizado exitosamente"),jt()}catch(E){console.error("Error al actualizar perfil:",E),Oe("Error",E.message||"Error al actualizar el perfil")}finally{F(E=>({...E,profile:!1}))}},[Oe,jt]),Ue=p.useCallback(async($e,s)=>{try{F(E=>({...E,[`rate_${$e}`]:!0})),await ml(ue(M,"ratings"),{userId:S,providerId:$e,rating:s,ratedAt:mt()}),Oe("Éxito","Calificación enviada exitosamente"),Tt()}catch(E){console.error("Error al calificar proveedor:",E),Oe("Error",E.message||"Error al enviar la calificación")}finally{F(E=>({...E,[`rate_${$e}`]:!1}))}},[S,Oe,Tt]),lt=p.useCallback(async $e=>{try{F(Y=>({...Y,[`renew_${$e.id}`]:!0}));const s=parseFloat($e.renewalPrice)||parseFloat($e.price)||0;if(g<s){Oe("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const E=parseInt($e.durationDays)||30,y=ja.now(),R=y.toDate(),V=R,ee=new Date(V.getTime()+E*24*60*60*1e3),fe=ja.fromDate(ee),ge=se(M,"sales",$e.id);await Ga(ge,{startDate:y,endDate:fe,renewedAt:y,status:"completed",updatedAt:mt()});const A=se(M,"users",S);await Ga(A,{balance:g-s}),k(Y=>Y-s),B(Y=>Y.map(U=>U.id===$e.id?{...U,startDate:V,endDate:ee,renewedAt:R,status:"completed",daysRemaining:E,totalDays:E,timeElapsedPercentage:0}:U)),Oe("Éxito",`¡Pedido renovado exitosamente! Nueva fecha de vencimiento: ${tt(ee)}`)}catch(s){console.error("Error al renovar el pedido:",s),Oe("Error","Error al renovar el pedido: "+s.message)}finally{F(s=>({...s,[`renew_${$e.id}`]:!1}))}},[g,S,Oe,tt]);p.useEffect(()=>{(async()=>{try{const s=Fe(ue(M,"products")),E=await Jt(s),y={};E.forEach(R=>{y[R.id]=R.data()}),O(y)}catch(s){console.error("Error fetching products:",s),ie("Error al cargar productos: "+s.message)}})()},[]),p.useEffect(()=>{const $e=it(se(M,"notifications","adminMessage"),s=>{if(s.exists()){const E=s.data();E.roles&&E.roles.includes("user")?ne([{id:s.id,...E,timestamp:E.updatedAt?.toDate()}]):ne([])}else ne([])},s=>{console.error("Error in notifications listener:",s),ie("Error al cargar notificaciones: "+s.message)});return()=>$e()},[]),p.useEffect(()=>{if(!S)return;(async()=>{try{const s=Fe(ue(M,"sales"),dt("customerId","==",S)),E=await Jt(s),y=new Set,R=[];E.forEach(V=>{const ee=V.data();ee.providerId&&!y.has(ee.providerId)&&(y.add(ee.providerId),R.push({id:ee.providerId,name:ee.provider||"Proveedor desconocido",phone:ee.providerPhone||"No especificado"}))}),re(R)}catch(s){console.error("Error fetching providers:",s),ie("Error al cargar proveedores: "+s.message)}})()},[S]);const Te=p.useCallback(async()=>{try{await Zr(Xt),Xe("/")}catch($e){console.error("Error al cerrar sesión:",$e),Oe("Error",$e.message||"Error al cerrar sesión")}},[Xe,Oe]);p.useEffect(()=>{const $e=Fr(Xt,s=>{s?(_(s.uid),x(s.email||"No especificado"),H(!1)):Xe("/login")});return()=>$e()},[Xe]),p.useEffect(()=>{if(!S)return;const $e=se(M,"users",S),s=it($e,E=>{if(E.exists()){const y=E.data();u({username:y.username||"Usuario",phone:y.phone||""}),x(y.email||"No especificado"),k(Number(y.balance)||0)}else ie("Usuario no encontrado")},E=>{console.error("Error in user data listener:",E),ie("Error al cargar datos del usuario: "+E.message)});return()=>s()},[S]),p.useEffect(()=>{if(!S)return;const $e=Fe(ue(M,"sales"),dt("customerId","==",S)),s=it($e,async y=>{if(y.empty){B([]),H(!1);return}const R=new Date,V=7200*60*1e3;for(const fe of y.docs){const A=fe.data().endDate?.toDate?.()||new Date;if(A<R&&R.getTime()-A.getTime()>V)try{await sc(se(M,"sales",fe.id)),console.log(`Deleted expired order: ${fe.id}`)}catch(Y){console.error(`Error deleting order ${fe.id}:`,Y)}}const ee=y.docs.map(fe=>{const ge=fe.data(),Y=ge.saleDate?.toDate?.()||ge.createdAt?.toDate?.()||new Date;let U=ge.startDate?.toDate?.(),N=U||Y,C=!1;U||(C=!0);const K=ge.durationDays||30;let we;ge.endDate?we=ge.endDate.toDate?ge.endDate.toDate():new Date(ge.endDate):(we=new Date(N.getTime()+K*24*60*60*1e3),C=!0),C&&Ga(se(M,"sales",fe.id),{startDate:U||ja.fromDate(Y),endDate:ja.fromDate(we),durationDays:K}).catch(He=>{console.error("Error al actualizar startDate/endDate en Firestore:",He)});const je=we.getTime()-N.getTime(),Me=R.getTime()-N.getTime(),Ye=we.getTime()-R.getTime(),Be=Math.ceil(je/(1e3*60*60*24)),Se=Math.max(0,Math.ceil(Ye/(1e3*60*60*24))),_t=Math.ceil(Me/(1e3*60*60*24)),At=Be>0?_t/Be*100:100,Le=L[ge.providerId]?.terms||"No se especificaron términos y condiciones.";return{id:fe.id,productName:ge.productName||"Producto sin nombre",category:ge.type||"netflix",price:parseFloat(ge.price)||0,renewalPrice:parseFloat(ge.renewalPrice)||0,provider:ge.provider||"No especificado",providerId:ge.providerId||"",providerPhone:ge.providerPhone||ge.providerWhatsapp||"51999999999",status:ge.status||"completed",saleDate:Y,startDate:N,endDate:we,durationDays:K,daysRemaining:Se,totalDays:Be,timeElapsedPercentage:At,account:{email:ge.accountDetails?.email||"No especificado",password:ge.accountDetails?.password||"No especificado",profile:ge.accountDetails?.profile||"No especificado",pin:ge.accountDetails?.pin||"No especificado"},client:{customerName:ge.customerName||"Cliente desconocido",email:ge.customerEmail||"No especificado",phone:ge.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BLK-${fe.id.slice(0,8).toUpperCase()}`,termsAndConditions:Le,renewable:ge.renewable!==void 0?ge.renewable:!0}}).filter(fe=>{const ge=new Date(fe.endDate);return!(ge<R&&R.getTime()-ge.getTime()>V)});B(ee),H(!1)},y=>{console.error("Error al obtener pedidos:",y),ie("Error al cargar pedidos: "+y.message),H(!1)}),E=setInterval(()=>{const y=new Date,R=7200*60*1e3;B(V=>V.map(ee=>{const fe=new Date(ee.endDate).getTime()-new Date(ee.startDate).getTime(),ge=y.getTime()-new Date(ee.startDate).getTime(),A=new Date(ee.endDate).getTime()-y.getTime(),Y=Math.ceil(fe/(1e3*60*60*24)),U=Math.max(0,Math.ceil(A/(1e3*60*60*24))),N=Math.ceil(ge/(1e3*60*60*24)),C=Y>0?N/Y*100:100;return{...ee,daysRemaining:U,totalDays:Y,timeElapsedPercentage:C}}).filter(ee=>{const fe=new Date(ee.endDate);return!(fe<y&&y.getTime()-fe.getTime()>R)}))},6e4);return()=>{s(),clearInterval(E)}},[S,L]),p.useEffect(()=>{if(!S)return;const $e=Fe(ue(M,"pendingTopUps"),dt("userId","==",S)),s=it($e,E=>{const y=E.docs.map(R=>({id:R.id,...R.data(),date:R.data().requestedAt?.toDate?.()||new Date,amount:parseFloat(R.data().amount)||0}));c(y)},E=>{console.error("Error al obtener recargas:",E),ie("Error al cargar recargas: "+E.message)});return()=>s()},[S]);const Ze=p.useCallback(async()=>{try{if(F(s=>({...s,topUp:!0})),!a||isNaN(a)){Oe("Error","Ingrese un monto válido");return}const $e=parseFloat(a);if($e<10){Oe("Error","El monto mínimo de recarga es S/ 10.00");return}await ml(ue(M,"pendingTopUps"),{userId:S,username:o.username,amount:$e,status:"pendiente",requestedAt:mt()}),n(""),Oe("Éxito","Solicitud de recarga enviada correctamente")}catch($e){console.error("Error al solicitar recarga:",$e),Oe("Error",$e.message||"Error al enviar solicitud de recarga")}finally{F($e=>({...$e,topUp:!1}))}},[a,S,o.username,Oe]),st=p.useCallback(async $e=>{$e.preventDefault();try{F(ee=>({...ee,password:!0}));const s=$e.target.password.value,E=$e.target.phone.value,y=Xt.currentUser,R=se(M,"users",S),V={};if(s){if(s.length<6){Oe("Error","La contraseña debe tener al menos 6 caracteres");return}await wv(y,s),V.updatedAt=mt()}E&&(V.phone=E,V.updatedAt=mt()),Object.keys(V).length>0&&await Ga(R,V),u(ee=>({...ee,phone:E||ee.phone})),Oe("Éxito","Cambios guardados correctamente"),$e.target.reset()}catch(s){console.error("Error al actualizar los datos:",s),Oe("Error",s.message||"Error al guardar los cambios")}finally{F(s=>({...s,password:!1}))}},[S,Oe]);p.useEffect(()=>{const $e=()=>{he(window.scrollY>300)};return window.addEventListener("scroll",$e),()=>window.removeEventListener("scroll",$e)},[]);const pt=p.useCallback(()=>be?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):v?e.jsxs("div",{className:`bg-${J==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${J==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsx(gc,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:`text-xl font-bold ${J==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Error"}),e.jsx("p",{className:`text-base ${J==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:v}),e.jsx("button",{onClick:()=>ie(null),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Aceptar"})]}):e.jsx("div",{className:`bg-${J==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${J==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:(()=>{switch(I){case"inicio":return e.jsx(Gq,{userName:o,email:m,balance:g,orders:b,notifications:te,setActivePage:P,formatDate:tt});case"notificaciones":return e.jsx(sS,{notifications:te,formatDate:tt});case"recargar":return e.jsx(nS,{amount:a,setAmount:n,topUps:i,actionLoading:z,handleTopUpRequest:Ze,formatDate:tt,showModal:Oe});case"proveedores":return e.jsx(iS,{providers:_e,openRateProviderModal:Wt});case"pedidos":return e.jsx(oS,{orders:b,searchQuery:Ee,setSearchQuery:Ie,formatDate:tt,handleRenewal:lt,actionLoading:z});case"configuracion":return e.jsx(lS,{userName:o,email:m,actionLoading:z,handleUpdatePassword:st,openEditProfileModal:Lt,handleLogout:Te});default:return e.jsxs("div",{className:`bg-${J==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${J==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsx(gc,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:`text-xl font-bold ${J==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Sección no encontrada"}),e.jsx("p",{className:`text-base ${J==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>P("inicio"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Volver al inicio"})]})}})()}),[be,v,J,I,o,m,g,b,te,P,tt,a,n,i,z,Ze,Oe,_e,Wt,Ee,Ie,lt,st,Lt,Te]);return e.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${J==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-50 to-gray-50 text-gray-900"} font-inter relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${J==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map(($e,s)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},s))})]}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${J==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r overflow-y-auto lg:shadow-md`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{Xe("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${J==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.username.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${J==="dark"?"text-white":"text-gray-900"}`,children:o.username}),e.jsx("p",{className:`text-xs ${J==="dark"?"text-gray-400":"text-gray-600"}`,children:"Usuario"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:iw},{id:"notificaciones",label:"Notificaciones",icon:nr},{id:"recargar",label:"Recargar saldo",icon:ho},{id:"pedidos",label:"Mis pedidos",icon:zd},{id:"proveedores",label:"Proveedores",icon:Vd},{id:"configuracion",label:"Configuración",icon:cr}].map($e=>e.jsxs("button",{onClick:()=>{P($e.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${I===$e.id?"bg-blue-100 text-blue-600 border border-blue-300":J==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":I===$e.id?"page":void 0,children:[e.jsx($e.icon,{className:"text-lg"}),e.jsx("span",{children:$e.label})]},$e.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{Te(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${J==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsxs("header",{className:`${J==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md py-4 px-4 sm:px-6 lg:px-8 flex items-center justify-between shadow-md fixed top-0 left-0 right-0 z-50 lg:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"BlackStreaming logo",className:`h-10 w-10 rounded-full border ${J==="dark"?"border-gray-700/50":"border-gray-300"} shadow-sm lg:hidden`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-lg",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:Ee,onChange:$e=>Ie($e.target.value),className:`w-full py-2.5 px-5 ${J==="dark"?"bg-gray-800/50 border-gray-600/50 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-md`,"aria-label":"Search orders",onKeyDown:$e=>$e.key==="Enter"&&P("pedidos")}),e.jsx("button",{onClick:()=>P("pedidos"),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${J==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Search",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-4 relative",children:[e.jsx("button",{onClick:qe,className:`p-2 rounded-full ${J==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Switch to ${J==="dark"?"light":"dark"} theme`,children:J==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),e.jsxs("button",{onClick:()=>l(!0),className:`p-2 rounded-full relative ${J==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Notifications (${te.length} new)`,children:[e.jsx(nr,{size:20}),te.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:te.length})]}),e.jsx("button",{className:`lg:hidden p-2 rounded-full ${J==="dark"?"hover:bg-gray-700/50":"hover:bg-gray-100"} transition-all duration-300`,onClick:()=>t(!r),"aria-label":"Toggle mobile menu","aria-expanded":r,children:e.jsx(Lx,{size:20,className:J==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:e.jsx("div",{className:"relative",children:e.jsxs("button",{className:`flex items-center space-x-2 ${J==="dark"?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-md transition-all duration-300`,"aria-label":"User menu",children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.username.charAt(0).toUpperCase()}),e.jsx("span",{className:`text-sm font-semibold ${J==="dark"?"text-gray-200":"text-gray-800"}`,children:o.username})]})})})]})]}),e.jsx(ve,{children:q&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>l(!1),role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 lg:max-w-lg ${J==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${J==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:$e=>$e.stopPropagation(),children:[e.jsx("button",{onClick:()=>l(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notifications",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-xl font-bold mb-4 ${J==="dark"?"text-white":"text-gray-900"}`,children:"Notificaciones"}),te.length>0?te.map($e=>e.jsxs("div",{className:`p-4 mb-2 rounded-md ${J==="dark"?"bg-gray-800/50":"bg-gray-100/80"} border-l-4 ${J==="dark"?"border-blue-500/50":"border-blue-300/50"}`,children:[e.jsx("h3",{className:`font-semibold ${J==="dark"?"text-gray-200":"text-gray-800"}`,children:$e.title||"Nueva Notificación"}),e.jsx("p",{className:`text-sm ${J==="dark"?"text-gray-300":"text-gray-700"} mt-1`,children:$e.message}),$e.roles&&$e.roles.length>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Roles: ",$e.roles.join(", ")]}),$e.timestamp&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:tt($e.timestamp)})]},$e.id)):e.jsx("p",{className:`text-center ${J==="dark"?"text-gray-400":"text-gray-600"} mt-4`,children:"No hay notificaciones."})]})})}),e.jsx("main",{className:"lg:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start",children:pt()}),e.jsxs("footer",{className:`${J==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md px-4 sm:px-6 lg:px-8 py-12 text-center relative z-10 lg:ml-64 max-w-6xl mx-auto rounded-2xl border ${J==="dark"?"border-gray-700/50":"border-gray-300"} mt-8 shadow-md`,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-4",children:"BlackStreaming"}),e.jsxs("p",{className:`text-base sm:text-lg ${J==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["Todos los derechos reservados. Desarrollado por"," ",e.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Saiph"}),"."]}),e.jsxs("div",{className:"flex justify-center space-x-6 sm:space-x-8 mb-6",children:[e.jsx("a",{href:"https://twitter.com",className:`${J==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Twitter",children:e.jsx(Ur,{size:28})}),e.jsx("a",{href:"https://instagram.com",className:`${J==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Instagram",children:e.jsx(Vr,{size:28})}),e.jsx("a",{href:"https://facebook.com",className:`${J==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Facebook",children:e.jsx(zr,{size:28})})]}),e.jsxs("div",{className:"flex justify-center space-x-4 sm:space-x-6",children:[e.jsx("a",{href:"#",className:`text-sm ${J==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Privacy Policy",children:"Política de Privacidad"}),e.jsx("a",{href:"#",className:`text-sm ${J==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Terms of Service",children:"Términos de Servicio"}),e.jsx("a",{href:"#",className:`text-sm ${J==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Contact Us",children:"Contáctanos"})]})]}),e.jsxs("p",{className:`text-sm ${J==="dark"?"text-gray-500":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Hecho con pasión."]})]}),e.jsx(ve,{children:ce&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:"fixed bottom-6 right-6 bg-blue-600/90 backdrop-blur-md p-3 rounded-full hover:bg-blue-700/95 shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 lg:bottom-8 lg:right-8","aria-label":"Back to top",children:e.jsx(ta,{size:20})})}),e.jsx(Wq,{isOpen:X.isOpen,title:X.title,message:X.message,onClose:kt}),e.jsx(rS,{isOpen:We.isOpen,user:We.user,onClose:jt,onSave:yt}),e.jsx(aS,{isOpen:ft.isOpen,provider:ft.provider,onClose:Tt,onRate:Ue}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden",onClick:()=>t(!1),"aria-hidden":"true"})]})};cS.propTypes={};const Xq=({isOpen:r,message:t,title:a,onClose:n})=>r?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:a}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(Pn,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:n,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,Jq=({isOpen:r,user:t,onClose:a,onSave:n})=>{const[i,c]=p.useState(t?.username||""),[o,u]=p.useState(""),m=x=>{if(x.preventDefault(),u(""),!i.trim()){u("El nombre de usuario no puede estar vacío.");return}n(t.id,i.trim())};return r?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Perfil"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(Pn,{size:20})})]}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:x=>c(x.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},Zq=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState("inicio"),[i,c]=p.useState(""),[o,u]=p.useState(""),[m,x]=p.useState(""),[g,k]=p.useState([]),[S,_]=p.useState(0),[I,P]=p.useState(0),[b,B]=p.useState(null),[L,O]=p.useState(!0),[te,ne]=p.useState({}),[be,H]=p.useState(null),[z,F]=p.useState([]),[v,ie]=p.useState(!1),[X,ae]=p.useState(""),[We,ct]=p.useState(""),[ft,ot]=p.useState([]),[Ee,Ie]=p.useState([]),[_e,re]=p.useState({}),[J,de]=p.useState([]),[ce,he]=p.useState({isOpen:!1,message:"",title:""}),[q,l]=p.useState({isOpen:!1,user:null}),Xe=$r(),qe=(Te,Ze)=>{he({isOpen:!0,title:Te,message:Ze})},Ae=()=>{he({isOpen:!1,message:"",title:""})},Oe=Te=>{l({isOpen:!0,user:Te})},kt=()=>{l({isOpen:!1,user:null})},Lt=async(Te,Ze)=>{try{ne($e=>({...$e,profile:!0}));const st=se(M,"users",Te),pt=se(M,"affiliates",Te);await Ga(st,{username:Ze,updatedAt:mt()}),await Ga(pt,{username:Ze,updatedAt:mt()}),c(Ze),qe("Éxito","Perfil actualizado exitosamente"),kt()}catch(st){console.error("Error al actualizar perfil:",st),qe("Error",st.message||"Error al actualizar el perfil")}finally{ne(st=>({...st,profile:!1}))}};p.useEffect(()=>{const Te=Fr(Xt,Ze=>{Ze?(B(Ze.uid),u(Ze.email||"No especificado"),O(!1)):Xe("/login")});return()=>Te()},[Xe]),p.useEffect(()=>{(async()=>{try{const Ze=Fe(ue(M,"products")),st=await Jt(Ze),pt={};st.forEach($e=>{pt[$e.id]=$e.data()}),re(pt)}catch(Ze){console.error("Error fetching products:",Ze),H("Error al cargar productos")}})()},[]),p.useEffect(()=>{it(se(M,"notifications","adminMessage"),st=>{if(st.exists()){const pt=st.data();pt.roles&&pt.roles.includes("affiliate")?de([{id:st.id,...pt}]):de([])}else de([])})},[]),p.useEffect(()=>{(async()=>{if(b)try{const Ze=se(M,"users",b),st=await sr(Ze);if(st.exists()){const s=st.data();c(s.username||"Usuario"),P(Number(s.balance)||0)}const pt=se(M,"affiliates",b),$e=await sr(pt);if($e.exists()){const s=$e.data();x(s.affiliateCode||""),_(Number(s.earnings)||0)}else{const s=`AFF-${Math.random().toString(36).substring(2,8).toUpperCase()}`;await hl(pt,{username:i||"Nuevo Afiliado",email:o,affiliateCode:s,earnings:0,createdAt:mt(),updatedAt:mt()}),x(s)}}catch(Ze){console.error("Error al manejar datos:",Ze),H("Error al cargar datos")}finally{O(!1)}})()},[b,o,i]),p.useEffect(()=>{if(!b)return;(()=>{const Ze=Fe(ue(M,"pendingTopUps"),dt("userId","==",b));return it(Ze,pt=>{const $e=pt.docs.map(s=>({id:s.id,...s.data(),date:s.data().requestedAt?.toDate?.()||new Date,amount:parseFloat(s.data().amount)||0}));ot($e)},pt=>{console.error("Error al obtener recargas:",pt),H("Error al cargar recargas")})})()},[b]),p.useEffect(()=>{if(!m)return;const Te=Fe(ue(M,"users"),dt("referrerCode","==",m),Qr("createdAt","desc"),la(5)),Ze=it(Te,st=>{const pt=st.docs.map($e=>({id:$e.id,...$e.data(),joinDate:$e.data().createdAt?.toDate()||new Date}));F(pt)});return()=>Ze()},[m]),p.useEffect(()=>{if(!m)return;const Te=Fe(ue(M,"users"),dt("referrerCode","==",m)),Ze=it(Te,st=>{const pt=st.docs.map($e=>({id:$e.id,...$e.data(),joinDate:$e.data().createdAt?.toDate()||new Date}));k(pt)});return()=>Ze()},[m]),p.useEffect(()=>{if(!b)return;(()=>{const Ze=Fe(ue(M,"sales"),dt("customerId","==",b)),st=it(Ze,$e=>{if($e.empty){Ie([]),O(!1);return}const s=$e.docs.map(E=>{const y=E.data(),V=y.saleDate?.toDate?.()||y.createdAt?.toDate?.()||new Date;let ee=y.startDate?.toDate?.(),fe=ee||V,ge=!1;ee||(ge=!0);const A=y.durationDays||30;let Y;y.endDate?Y=new Date(y.endDate):(Y=new Date(fe.getTime()+A*24*60*60*1e3),ge=!0),ge&&Ga(se(M,"sales",E.id),{startDate:ee||ja.fromDate(V),endDate:Y.toISOString(),durationDays:A}).catch(Se=>{console.error("Error al actualizar startDate/endDate en Firestore:",Se)});const U=new Date,N=Y.getTime()-fe.getTime(),C=U.getTime()-fe.getTime(),K=Y.getTime()-U.getTime(),we=Math.ceil(N/(1e3*60*60*24)),je=Math.max(0,Math.ceil(K/(1e3*60*60*24))),Me=Math.ceil(C/(1e3*60*60*24)),Ye=we>0?Me/we*100:100,Be=_e[y.providerId]?.terms||"No se especificaron términos y condiciones.";return{id:E.id,productName:y.productName||"Producto sin nombre",category:y.type||"netflix",price:parseFloat(y.price)||0,provider:y.provider||"No especificado",providerId:y.providerId||"",providerPhone:y.providerPhone||y.providerWhatsapp||"51999999999",status:y.status||"completed",saleDate:V,startDate:fe,endDate:Y,durationDays:A,daysRemaining:je,totalDays:we,timeElapsedPercentage:Ye,account:{email:y.accountDetails?.email||"No especificado",password:y.accountDetails?.password||"No especificado",profile:y.accountDetails?.profile||"No especificado",pin:y.accountDetails?.pin||"No especificado"},client:{name:y.customerName||"Cliente desconocido",email:y.customerEmail||"No especificado",phone:y.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BS-${E.id.slice(0,8).toUpperCase()}`,termsAndConditions:Be,renewable:y.renewable!==void 0?y.renewable:!0}});Ie(s),O(!1)},$e=>{console.error("Error al obtener pedidos:",$e),H("Error al cargar pedidos: "+$e.message),O(!1)}),pt=setInterval(()=>{Ie($e=>$e.map(s=>{const E=new Date,y=new Date(s.endDate).getTime()-new Date(s.startDate).getTime(),R=E.getTime()-new Date(s.startDate).getTime(),V=new Date(s.endDate).getTime()-E.getTime(),ee=Math.ceil(y/(1e3*60*60*24)),fe=Math.max(0,Math.ceil(V/(1e3*60*60*24))),ge=Math.ceil(R/(1e3*60*60*24)),A=ee>0?ge/ee*100:100;return{...s,daysRemaining:fe,totalDays:ee,timeElapsedPercentage:A}}))},6e4);return()=>{st(),clearInterval(pt)}})()},[b,_e]);const jt=async()=>{try{if(ne(Ze=>({...Ze,topUp:!0})),!We||isNaN(We)){qe("Error","Ingrese un monto válido");return}const Te=parseFloat(We);if(Te<10){qe("Error","El monto mínimo de recarga es S/ 10.00");return}await ml(ue(M,"pendingTopUps"),{userId:b,username:i,amount:Te,status:"pendiente",requestedAt:mt(),processed:!1}),ct(""),qe("Éxito","Solicitud de recarga enviada correctamente")}catch(Te){console.error("Error al solicitar recarga:",Te),qe("Error",Te.message||"Error al enviar solicitud de recarga")}finally{ne(Te=>({...Te,topUp:!1}))}},Wt=async Te=>{try{ne(ee=>({...ee,[`renew_${Te.id}`]:!0}));const Ze=parseFloat(Te.price)||0;if(I<Ze){qe("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const st=parseInt(Te.durationDays)||30,pt=ja.now(),$e=pt.toDate(),s=new Date($e.getTime()+st*24*60*60*1e3),E=s.toISOString(),y={customerId:b,customerName:Te.client?.name||"Cliente desconocido",customerEmail:Te.client?.email||o,phoneNumber:Te.client?.phone||"No especificado",productName:Te.productName||"Producto sin nombre",type:Te.category||"netflix",price:Ze,accountDetails:{email:Te.account?.email||"No especificado",password:Te.account?.password||"No especificado",profile:Te.account?.profile||"No especificado",pin:Te.account?.pin||"No especificado"},provider:Te.provider||"Proveedor desconocido",providerId:Te.providerId||"",providerPhone:Te.providerPhone||Te.providerWhatsapp||"51999999999",status:"completed",createdAt:pt,saleDate:pt,startDate:pt,endDate:E,durationDays:st,renewedAt:pt,renewable:Te.renewable!==void 0?Te.renewable:!0},R=await ml(ue(M,"sales"),y),V=se(M,"users",b);await Ga(V,{balance:I-Ze}),P(ee=>ee-Ze),Ie(ee=>[...ee,{...y,id:R.id,saleDate:$e,startDate:$e,endDate:s,account:y.accountDetails,client:{name:y.customerName,email:y.customerEmail,phone:y.phoneNumber},orderId:`BS-${R.id.slice(0,8).toUpperCase()}`,renewable:y.renewable,daysRemaining:st,totalDays:st,timeElapsedPercentage:0,termsAndConditions:_e[y.providerId]?.terms||"No se especificaron términos y condiciones."}]),qe("Éxito","¡Pedido renovado exitosamente!")}catch(Ze){console.error("Error al renovar el pedido:",Ze),qe("Error","Error al renovar el pedido: "+Ze.message)}finally{ne(Ze=>({...Ze,[`renew_${Te.id}`]:!1}))}},Tt=()=>{m&&(navigator.clipboard.writeText(m),ie(!0),setTimeout(()=>ie(!1),2e3))},tt=Te=>{if(!Te)return"No especificada";try{const Ze=Te instanceof Date?Te:new Date(Te);return isNaN(Ze.getTime())?"Fecha inválida":Ze.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},yt=async()=>{try{await Zr(Xt),Xe("/")}catch(Te){console.error("Error al cerrar sesión:",Te),qe("Error",Te.message||"Error al cerrar sesión")}},Ue=async Te=>{Te.preventDefault();try{ne(pt=>({...pt,password:!0}));const Ze=Te.target.password.value;if(!Ze){qe("Error","Por favor, ingrese una nueva contraseña");return}if(Ze.length<6){qe("Error","La contraseña debe tener al menos 6 caracteres");return}const st=Xt.currentUser;st&&(await wv(st,Ze),qe("Éxito","Contraseña actualizada correctamente"),Te.target.reset())}catch(Ze){console.error("Error al actualizar la contraseña:",Ze),qe("Error",Ze.message||"Error al actualizar la contraseña")}finally{ne(Ze=>({...Ze,password:!1}))}},lt=()=>{if(L)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(be)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Xr,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:be}),e.jsx("button",{onClick:()=>H(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(a){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(qn,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:i})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Cn,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Saldo disponible"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",I.toFixed(2)]}),e.jsx("button",{onClick:()=>n("recargas"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Recargar"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",S.toFixed(2)]}),e.jsx("button",{onClick:()=>n("ganancias"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Ver ganancias"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Tu código de afiliado"}),e.jsxs("button",{onClick:Tt,disabled:!m,className:`flex items-center gap-2 px-3 py-1 rounded-xl transition-all duration-300 ${m?"bg-cyan-900/80 text-cyan-400 hover:bg-cyan-800/80":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(zq,{size:16}),v?"¡Copiado!":"Copiar"]})]}),e.jsx("div",{className:"bg-gray-800/50 p-4 rounded-xl mb-6 border border-gray-600/50",children:e.jsx("p",{className:"text-2xl font-bold text-center tracking-wider text-white",children:m||"Generando código..."})}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Comparte este código con tus amigos para que se registren y ganes comisiones por sus compras."}),e.jsxs("div",{className:"bg-cyan-900/30 p-4 rounded-xl border border-cyan-800/50",children:[e.jsx("h4",{className:"font-medium text-cyan-400 mb-2",children:"Enlace de afiliado:"}),e.jsx("p",{className:"text-sm bg-gray-800/50 p-2 rounded-xl border border-gray-600/50 overflow-x-auto text-gray-300",children:m?`https://blackkstreaming.com/register?ref=${m}`:"Generando enlace..."})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Referidos recientes"}),z.length>0?z.map(Te=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:Te.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-900/80 text-green-400",children:"Activo"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Unido: ",tt(Te.joinDate)]})]},Te.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes referidos recientes"}),z.length>0&&e.jsx("button",{onClick:()=>n("referidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los referidos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),Ee.length>0?Ee.slice(0,3).map(Te=>{const Ze=new Date(Te.endDate)>new Date&&Te.status==="completed",st=Te.status==="pending";return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:Te.productName}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${st?"bg-yellow-900/80 text-yellow-400":Ze?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:st?"A pedido":Ze?"Activo":"Expirado"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",tt(Te.endDate)]})]},Te.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),Ee.length>3&&e.jsx("button",{onClick:()=>n("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Notificaciones"}),J.length>0?J.map(Te=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsx("p",{className:"text-gray-300",children:Te.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:tt(Te.updatedAt)})]},Te.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay notificaciones"})]})]})]});case"notificaciones":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Notificaciones"}),J.length>0?e.jsx("div",{className:"space-y-4",children:J.map(Te=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("p",{className:"text-gray-300",children:Te.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:tt(Te.updatedAt)})]},Te.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Up,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-400",children:"No tienes mensajes nuevos"})]})]});case"recargas":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),e.jsx("input",{type:"number",value:We,onChange:Te=>ct(Te.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),e.jsx("button",{onClick:jt,disabled:te.topUp||!We||parseFloat(We)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${We&&parseFloat(We)>=10&&!te.topUp?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:te.topUp?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"}),e.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(lo,{className:"mr-2"})," ¿Cómo realizar tu recarga?"]}),e.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",e.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al número:"]}),e.jsx("p",{className:"text-xl font-bold text-white mb-2",children:"📱 931757531"}),e.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contáctanos vía WhatsApp al mismo número para confirmar tu recarga."}),e.jsxs("a",{href:`https://wa.me/51931757531?text=${encodeURIComponent("Hola 😊, he realizado una recarga a través de Yape. Por favor, confirma mi pago.")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[e.jsx(Cn,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de recargas"}),ft.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acción"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:ft.map(Te=>{const Ze=encodeURIComponent(`Hola, he pedido una recarga de S/ ${Te.amount?.toFixed(2)||"0.00"} con el nombre ${i}. Adjunto la captura de mi pago, por favor.`);return e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",Te.amount?.toFixed(2)||"0.00"]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Te.status==="aprobado"?"bg-green-900/80 text-green-400":Te.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:Te.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:tt(Te.date)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:Te.status==="pendiente"?e.jsxs("a",{href:`https://wa.me/51940505969?text=${Ze}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 text-sm",children:[e.jsx(Cn,{className:"mr-2"})," Enviar captura"]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"—"})})]},Te.id)})})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(lo,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay recargas registradas"})]})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:X,onChange:Te=>ae(Te.target.value)}),e.jsx(Jr,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),Ee.length>0?e.jsx("div",{className:"space-y-6",children:Ee.filter(Te=>(Te.productName||"").toLowerCase().includes(X.toLowerCase())||(Te.orderId||"").toLowerCase().includes(X.toLowerCase())).map(Te=>{const Ze=parseFloat(Te.price)||0,st=new Date(Te.endDate)>new Date&&Te.status==="completed",pt=Te.status==="pending",$e=Te.daysRemaining||0,s=Te.timeElapsedPercentage||0;let E="bg-green-400";s>70&&s<=90?E="bg-yellow-400":s>90&&(E="bg-red-400");const y=pt?e.jsx(ra,{className:"text-yellow-400"}):st?e.jsx(Hp,{className:"text-green-400"}):e.jsx(Xr,{className:"text-red-400"}),R=encodeURIComponent(`*Consulta sobre Pedido - ${Te.productName||"Sin nombre"}*

*N° Pedido:* ${Te.orderId||"No especificado"}
*Producto:* ${Te.productName||"No especificado"}
*Precio:* S/ ${Ze.toFixed(2)}
*Estado:* ${pt?"A pedido":st?"Activo":"Expirado"}
*Fecha de Inicio:* ${tt(Te.startDate)}
*Fecha de Vencimiento:* ${tt(Te.endDate)}

`+(pt?`Hola 😊, he comprado un producto a pedido (${Te.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),V=encodeURIComponent(`😊 Estimado/a ${Te.client?.name||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${Te.productName||"Sin nombre"}.
🔢 Código: ${Te.orderId||"No especificado"}
`+(pt?"":`📧 Correo: ${Te.account?.email||"No especificado"}
🔐 Contraseña: ${Te.account?.password||"No especificado"}
👤 Perfil: ${Te.account?.profile||"No especificado"}
📌 PIN: ${Te.account?.pin||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${tt(Te.startDate)}
📅 Fecha de vencimiento: ${tt(Te.endDate)}
🏁 Días contratados: ${Te.durationDays||30} días.

`+(pt?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${Te.termsAndConditions||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),ee=Te.providerPhone?Te.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[y,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:Te.productName||"Producto sin nombre"}),Te.orderId&&e.jsxs("p",{className:"text-xs text-gray-400",children:["N° Pedido: ",Te.orderId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",Ze.toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${pt?"text-yellow-400":E.replace("bg-","text-")}`,children:pt?"Pendiente de activación":`${$e} día${$e===1?"":"s"} restante${$e===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${E}`,style:{width:`${Math.min(s,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[s.toFixed(0),"% completado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(qn,{className:"mr-2"})," Detalles de la Cuenta"]}),e.jsx("div",{className:"space-y-2 text-gray-300",children:pt?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Usuario:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white break-all",children:Te.account?.email||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white break-all",children:Te.account?.password||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:Te.account?.profile||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:Te.account?.pin||"No especificado"})]})]})})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(mr,{className:"mr-2"})," Información del Pedido"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"block text-white",children:Te.provider||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono del Proveedor:"}),e.jsx("span",{className:"block text-white",children:Te.providerPhone||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Estado:"}),e.jsx("span",{className:`block px-2 py-1 text-xs rounded-full ${pt?"bg-yellow-900/80 text-yellow-400":st?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:pt?"A pedido":st?"Activo":"Expirado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Método de Pago:"}),e.jsx("span",{className:"block text-white",children:"BlackStreaming"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de inicio:"}),e.jsx("span",{className:"block text-white",children:tt(Te.startDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de vencimiento:"}),e.jsx("span",{className:"block text-white",children:tt(Te.endDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Días restantes:"}),e.jsx("span",{className:`block ${E.replace("bg-","text-")}`,children:$e})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(qn,{className:"mr-2"})," Información del Cliente"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Nombre:"}),e.jsx("span",{className:"block text-white",children:Te.client?.name||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono:"}),e.jsx("span",{className:"block text-white",children:Te.client?.phone||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white",children:Te.client?.email||"No especificado"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("a",{href:`https://wa.me/51${ee}?text=${R}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Cn,{size:18})," Contactar Proveedor"]}),Te.renewable&&e.jsx("button",{onClick:()=>Wt(Te),disabled:te[`renew_${Te.id}`],className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${te[`renew_${Te.id}`]?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:te[`renew_${Te.id}`]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(JT,{size:18})," Renovar Pedido"]})}),Te.client?.phone&&e.jsxs("a",{href:`https://wa.me/${Te.client.phone.replace(/^\+/,"")}?text=${V}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Cn,{size:18})," Contactar Cliente"]})]})]})]},Te.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Br,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Realiza tu primer pedido en nuestra tienda"})]})]});case"referidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Todos tus referidos (",g.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar referidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:X,onChange:Te=>ae(Te.target.value)}),e.jsx(Jr,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),g.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha de registro"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:g.filter(Te=>{const Ze=Te.username||"",st=Te.email||"";return Ze.toLowerCase().includes(X.toLowerCase())||st.toLowerCase().includes(X.toLowerCase())}).map(Te=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:Te.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:Te.email||"Sin email"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:Te.joinDate?tt(Te.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/80 text-green-400",children:Te.status||"Activo"})})]},Te.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(l5,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes referidos aún"}),e.jsx("p",{className:"text-gray-400",children:"Comparte tu código de afiliado para empezar a ganar comisiones"})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Reporte de ganancias"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias hoy"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde ayer"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias esta semana"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde la semana pasada"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",S.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[g.length," referidos"]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx(o5,{className:"mr-2 text-cyan-400"})," Historial de comisiones"]}),g.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-800/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Referido"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Origen"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-700/50 divide-y divide-gray-600/50",children:g.map(Te=>e.jsxs("tr",{className:"hover:bg-gray-600/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:Te.username||"Usuario sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:Te.joinDate?tt(Te.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:"S/ 0.00"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:"Registro"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-900/80 text-yellow-400",children:"Pendiente"})})]},Te.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(lo,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay comisiones registradas"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gana comisiones cuando tus referidos realicen compras"})]})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:Ue,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:i,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:()=>Oe({id:b,username:i}),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300",title:"Editar Nombre",children:e.jsx(Uq,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:o,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{type:"submit",disabled:te.password,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-cyan-800",children:te.password?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:yt,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(Au,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Xr,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>n("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!r),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(da,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(Pn,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:"Afiliador"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Hq},{id:"notificaciones",label:"Notificaciones",icon:Up},{id:"recargas",label:"Recargas",icon:lo},{id:"pedidos",label:"Pedidos",icon:Br},{id:"referidos",label:"Referidos",icon:l5},{id:"ganancias",label:"Ganancias",icon:o5},{id:"configuracion",label:"Configuración",icon:ZT}].map(Te=>e.jsxs("button",{onClick:()=>{n(Te.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${a===Te.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(Te.icon,{className:"text-lg"}),e.jsx("span",{children:Te.label})]},Te.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:yt,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(Au,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:lt()}),e.jsx(Xq,{isOpen:ce.isOpen,title:ce.title,message:ce.message,onClose:Ae}),e.jsx(Jq,{isOpen:q.isOpen,user:q.user,onClose:kt,onSave:Lt}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},eW=({isOpen:r,message:t,title:a,onClose:n})=>r?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:a}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(Pn,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:n,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,tW=({username:r="Usuario",products:t=[],orders:a=[],providerBalance:n=0,balanceLoading:i=!1,totalStock:c=0,totalEarnings:o=0,isAdmin:u=!1,email:m="",notifications:x=[],setActiveSection:g=()=>{},formatDate:k=_=>new Date(_).toLocaleDateString(),theme:S="dark"})=>{const _=S==="dark",I={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}};return e.jsxs(j.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${_?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("h2",{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-6 bg-clip-text text-transparent bg-gradient-to-r ${_?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:["Bienvenido, ",e.jsx("span",{className:"text-red-400",children:r})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(j.div,{className:`rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${_?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:I,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h3",{className:`text-lg font-semibold mb-3 ${_?"text-blue-400":"text-blue-600"} flex items-center`,children:[e.jsx(QT,{className:"mr-2"})," Inventario"]}),e.jsx("p",{className:`text-3xl font-bold ${_?"text-white":"text-gray-900"}`,children:t.length}),e.jsx("p",{className:`text-sm ${_?"text-gray-400":"text-gray-600"}`,children:"Productos registrados"}),e.jsxs("p",{className:`text-sm ${_?"text-gray-400":"text-gray-600"}`,children:["Stock total: ",c]}),e.jsx(j.button,{onClick:()=>g("inventario"),className:`mt-4 px-4 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${_?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Ver inventario"})]}),e.jsxs(j.div,{className:`rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${_?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:I,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h3",{className:`text-lg font-semibold mb-3 ${_?"text-blue-400":"text-blue-600"} flex items-center`,children:[e.jsx(lo,{className:"mr-2"})," Ganancias"]}),i?e.jsx("div",{className:`animate-pulse ${_?"text-gray-400":"text-gray-600"}`,children:"Cargando..."}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-3xl font-bold ${_?"text-white":"text-gray-900"}`,children:["S/ ",o.toFixed(2)]}),e.jsxs("p",{className:`text-sm ${_?"text-gray-400":"text-gray-600"}`,children:[a.length," ventas realizadas"]}),e.jsxs("p",{className:`text-sm ${_?"text-gray-400":"text-gray-600"}`,children:["Disponible: S/ ",n.toFixed(2)]})]}),e.jsx(j.button,{onClick:()=>g("ganancias"),className:`mt-4 px-4 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${_?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Ver ganancias"})]}),e.jsxs(j.div,{className:`rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${_?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:I,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h3",{className:`text-lg font-semibold mb-3 ${_?"text-blue-400":"text-blue-600"} flex items-center`,children:[e.jsx(qn,{className:"mr-2"})," Mi Cuenta"]}),e.jsxs("div",{className:`space-y-3 ${_?"text-gray-300":"text-gray-700"}`,children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(qn,{className:`mr-2 ${_?"text-blue-400":"text-blue-600"}`,size:18}),e.jsx("span",{children:r})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Cn,{className:`mr-2 ${_?"text-blue-400":"text-blue-600"}`,size:18}),e.jsx("span",{children:m})]}),e.jsx("p",{className:`text-xs px-2 py-1 rounded-full inline-block border ${_?"bg-gray-900/80 text-blue-400 border-gray-700/50":"bg-gray-200/80 text-blue-600 border-gray-300/50"}`,children:u?"Administrador":"Proveedor"})]}),e.jsx(j.button,{onClick:()=>g("configuracion"),className:`mt-4 px-4 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${_?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Editar perfil"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs(j.div,{className:`rounded-2xl p-4 shadow-xl border backdrop-blur-sm ${_?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:I,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h3",{className:`text-lg font-semibold mb-3 ${_?"text-white":"text-gray-900"} flex items-center`,children:[e.jsx(Br,{className:"mr-2"})," Pedidos recientes"]}),a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Br,{className:`mx-auto text-4xl ${_?"text-gray-400":"text-gray-500"}`}),e.jsx("h4",{className:`text-lg font-medium ${_?"text-gray-300":"text-gray-700"}`,children:"No hay pedidos recientes"}),e.jsx("p",{className:`text-sm ${_?"text-gray-400":"text-gray-600"}`,children:"Tus pedidos aparecerán aquí"})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:`${_?"bg-gray-900/80":"bg-gray-200/80"} backdrop-blur-sm`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${_?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Producto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${_?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Comprador"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${_?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Monto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${_?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Estado"})]})}),e.jsx("tbody",{className:`${_?"bg-gray-800/70":"bg-gray-100/70"} divide-y divide-gray-700/50`,children:a.slice(0,3).map((P,b)=>{const B=new Date(P.endDate)>new Date&&P.status==="completed",L=P.status==="pending";return e.jsxs(j.tr,{className:`${_?"hover:bg-gray-700/50":"hover:bg-gray-200/50"} transition-all duration-300`,whileHover:{backgroundColor:_?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.5)"},children:[e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm font-medium ${_?"text-white":"text-gray-900"} truncate max-w-xs`,children:P.productName}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${_?"text-gray-300":"text-gray-700"}`,children:P.buyer}),e.jsxs("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${_?"text-gray-300":"text-gray-700"}`,children:["S/ ",(P.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${L?_?"bg-yellow-900/80 text-yellow-400 border border-yellow-500/50":"bg-yellow-500/20 text-yellow-600 border border-yellow-500/50":B?_?"bg-green-900/80 text-green-400 border border-green-500/50":"bg-green-500/20 text-green-600 border border-green-500/50":_?"bg-red-900/80 text-red-400 border border-red-500/50":"bg-red-500/20 text-red-600 border border-red-500/50"}`,children:L?"A pedido":B?"Activo":"Expirado"})})]},b)})})]}),a.length>3&&e.jsx(j.button,{onClick:()=>g("pedidos"),className:`w-full mt-3 text-center text-sm transition-all duration-300 ${_?"text-blue-400 hover:underline":"text-blue-600 hover:underline"}`,whileHover:{scale:1.05},children:"Ver todos los pedidos"})]})]}),e.jsxs(j.div,{className:`rounded-2xl p-4 shadow-xl border backdrop-blur-sm ${_?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:I,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h3",{className:`text-lg font-semibold mb-3 ${_?"text-white":"text-gray-900"} flex items-center`,children:[e.jsx(Cn,{className:"mr-2"})," Notificaciones"]}),x.length>0?x.map(P=>e.jsxs(j.div,{className:`border-b py-3 last:border-0 hover:rounded-xl hover:px-2 transition-all duration-300 ${_?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,whileHover:{backgroundColor:_?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.5)"},children:[e.jsx("p",{className:`${_?"text-gray-300":"text-gray-700"}`,children:P.message}),e.jsx("p",{className:`text-xs mt-1 ${_?"text-gray-400":"text-gray-500"}`,children:k(P.updatedAt?.toDate?.()||new Date)})]},P.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Cn,{className:`mx-auto text-4xl ${_?"text-gray-400":"text-gray-500"}`}),e.jsx("h4",{className:`text-lg font-medium ${_?"text-gray-300":"text-gray-700"}`,children:"No hay notificaciones"}),e.jsx("p",{className:`text-sm ${_?"text-gray-400":"text-gray-600"}`,children:"Tus notificaciones aparecerán aquí"})]})]})]})]})},rW=({products:r,setActiveSection:t,handleEdit:a,handleDelete:n,getCategoryDisplayName:i,totalStock:c,theme:o="dark"})=>{const u=o==="dark",m={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},x={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:u?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.5)"}};return e.jsxs(j.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${u?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${u?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Inventario"}),e.jsxs(j.button,{onClick:()=>t("subirProducto"),className:`px-4 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${u?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 flex items-center w-full md:w-auto justify-center`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(i5,{className:"mr-2"})," Nuevo Producto"]})]}),r.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:`${u?"bg-gray-900/80":"bg-gray-200/80"} backdrop-blur-sm`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${u?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Producto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${u?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Precio"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${u?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Stock"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${u?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Estado"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${u?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Acciones"})]})}),e.jsx("tbody",{className:`${u?"bg-gray-800/70":"bg-gray-100/70"} divide-y divide-gray-700/50`,children:r.map(g=>e.jsxs(j.tr,{className:`${u?"hover:bg-gray-700/50":"hover:bg-gray-200/50"} transition-all duration-300`,variants:x,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[g.image&&e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:g.image,alt:g.name,loading:"lazy"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:`text-sm font-medium ${u?"text-white":"text-gray-900"} truncate max-w-xs`,children:g.name}),e.jsx("div",{className:`text-xs ${u?"text-gray-400":"text-gray-600"}`,children:i(g.category)})]})]})}),e.jsxs("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${u?"text-gray-300":"text-gray-700"}`,children:["S/ ",(parseFloat(g.price)||0).toFixed(2)]}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${u?"text-gray-300":"text-gray-700"}`,children:g.stock||0}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${g.status==="En stock"?u?"bg-green-900/80 text-green-400 border border-green-500/50":"bg-green-500/20 text-green-600 border border-green-500/50":g.status==="A pedido"?u?"bg-yellow-900/80 text-yellow-400 border border-yellow-500/50":"bg-yellow-500/20 text-yellow-600 border border-yellow-500/50":u?"bg-red-900/80 text-red-400 border border-red-500/50":"bg-red-500/20 text-red-600 border border-red-500/50"}`,children:g.status})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx(j.button,{onClick:()=>a(g),className:`${u?"text-blue-400 hover:text-blue-500":"text-blue-600 hover:text-blue-700"} mr-3`,title:"Editar",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(XT,{})}),e.jsx(j.button,{onClick:()=>n(g.id),className:`${u?"text-red-400 hover:text-red-500":"text-red-600 hover:text-red-700"}`,title:"Eliminar",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(eS,{})})]})]},g.id))})]})}):e.jsxs(j.div,{className:`text-center py-12 ${u?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"} rounded-2xl border shadow-xl backdrop-blur-sm`,variants:m,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx(QT,{className:`mx-auto text-4xl ${u?"text-gray-400":"text-gray-500"} mb-3`}),e.jsx("h4",{className:`text-lg font-medium ${u?"text-gray-300":"text-gray-700"}`,children:"No tienes productos registrados"}),e.jsx("p",{className:`text-sm ${u?"text-gray-400":"text-gray-600"} mb-4`,children:"Agrega tu primer producto para comenzar"}),e.jsxs(j.button,{onClick:()=>t("subirProducto"),className:`px-4 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${u?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 flex items-center mx-auto`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(i5,{className:"mr-2"})," Agregar Producto"]})]})]})},aW=({soldAccounts:r,formatDate:t,theme:a="dark"})=>{const n=a==="dark",i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},c={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:n?"rgba(239, 68, 68, 0.2)":"rgba(239, 68, 68, 0.1)",transition:{duration:.2}}};return e.jsxs(j.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${n?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,variants:i,initial:"hidden",animate:"visible",children:[e.jsxs("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight mb-6 flex items-center bg-clip-text text-transparent bg-gradient-to-r ${n?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:[e.jsx(n5,{className:"mr-2"})," Cuentas Vendidas"]}),r.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:`backdrop-blur-sm ${n?"bg-gray-900/80":"bg-gray-200/80"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Producto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Email"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Perfil"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Fecha de Venta"})]})}),e.jsx("tbody",{className:`divide-y divide-gray-700/50 ${n?"bg-gray-800/70":"bg-gray-100/70"}`,children:r.map((o,u)=>e.jsxs(j.tr,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-white":"text-gray-900"}`,children:o.productName}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-gray-300":"text-gray-600"}`,children:o.email}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-gray-300":"text-gray-600"}`,children:o.profile||"N/A"}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-gray-300":"text-gray-600"}`,children:t(o.saleDate)})]},u))})]})}):e.jsxs(j.div,{className:"text-center py-12",variants:i,initial:"hidden",animate:"visible",children:[e.jsx(n5,{className:`mx-auto text-4xl ${n?"text-gray-400":"text-gray-500"} mb-3`}),e.jsx("h4",{className:`text-lg font-medium ${n?"text-gray-300":"text-gray-700"}`,children:"No hay cuentas vendidas"}),e.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"Las cuentas vendidas aparecerán aquí"})]})]})},sW=({product:r,setProduct:t,handleChange:a,handleFileChange:n,handleStockChange:i,handleAccountFieldChange:c,handleSubmit:o,setActiveSection:u,theme:m="dark"})=>{const x=m==="dark",g={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}};return e.jsxs(j.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-4xl mx-auto border ${x?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h2",{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-6 bg-clip-text text-transparent bg-gradient-to-r ${x?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Subir Nuevo Producto"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(j.div,{className:`col-span-1 rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${x?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:g,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${x?"text-gray-300":"text-gray-700"}`,children:"Imagen del producto"}),e.jsx("div",{className:`mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-xl ${x?"bg-gray-900/80 border-gray-700/50":"bg-gray-200/80 border-gray-300/50"}`,children:r.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain",loading:"lazy"}),e.jsx(j.button,{type:"button",onClick:()=>t({...r,image:""}),className:`absolute top-0 right-0 ${x?"bg-blue-500":"bg-blue-600"} text-white rounded-full p-1 shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(Pn,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx(tS,{className:`mx-auto h-12 w-12 ${x?"text-gray-400":"text-gray-500"}`}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"file-upload",className:`relative cursor-pointer rounded-xl font-medium ${x?"bg-gray-900/50 text-blue-400 hover:text-blue-500":"bg-gray-200/50 text-blue-600 hover:text-blue-700"} focus-within:outline-none`,children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:k=>n(k),accept:"image/*"})]})}),e.jsx("p",{className:`text-xs ${x?"text-gray-500":"text-gray-600"}`,children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs(j.div,{className:`col-span-1 space-y-4 rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${x?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:g,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${x?"text-gray-300":"text-gray-700"}`,children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:a,className:`w-full px-4 py-2 rounded-xl ${x?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${x?"text-gray-300":"text-gray-700"}`,children:"Categoría*"}),e.jsxs("select",{name:"category",value:r.category,onChange:a,className:`w-full px-4 py-2 rounded-xl ${x?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all`,children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${x?"text-gray-300":"text-gray-700"}`,children:"Tipo de cuenta*"}),e.jsxs("select",{name:"accountType",value:r.accountType,onChange:a,className:`w-full px-4 py-2 rounded-xl ${x?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all`,children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${x?"text-gray-300":"text-gray-700"}`,children:"Estado*"}),e.jsxs("select",{name:"status",value:r.status,onChange:a,className:`w-full px-4 py-2 rounded-xl ${x?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all`,children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"}),e.jsx("option",{value:"Agotado",children:"Agotado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${x?"text-gray-300":"text-gray-700"}`,children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:r.status==="Agotado"?0:r.stock,onChange:i,className:`w-full px-4 py-2 rounded-xl ${x?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all ${r.status==="Agotado"?"opacity-50 cursor-not-allowed":""}`,min:"0",required:!0,disabled:r.status==="Agotado"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${x?"text-gray-300":"text-gray-700"}`,children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:r.price,onChange:a,className:`w-full px-4 py-2 rounded-xl ${x?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"renewal",checked:r.renewal,onChange:a,className:`h-4 w-4 ${x?"text-blue-400 focus:ring-blue-400 border-gray-600/50":"text-blue-600 focus:ring-blue-600 border-gray-300/50"} rounded`}),e.jsx("label",{className:`ml-2 ${x?"text-gray-300":"text-gray-700"}`,children:"¿Tiene renovación?"})]})]}),r.renewal&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${x?"text-gray-300":"text-gray-700"}`,children:"Precio de renovación (S/)*"}),e.jsx("input",{type:"number",name:"renewalPrice",value:r.renewalPrice,onChange:a,className:`w-full px-4 py-2 rounded-xl ${x?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${x?"text-gray-300":"text-gray-700"}`,children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:r.duration,onChange:a,className:`w-full px-4 py-2 rounded-xl ${x?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-gray-300 mb-2 ${x?"text-gray-300":"text-gray-700"}`,children:["Teléfono de contacto ",r.status==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:r.providerPhone,onChange:a,className:`w-full px-4 py-2 rounded-xl ${x?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: +51 987654321",required:r.status==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${x?"text-gray-300":"text-gray-700"}`,children:"URL del producto (opcional)"}),e.jsx("input",{type:"url",name:"productUrl",value:r.productUrl||"",onChange:a,className:`w-full px-4 py-2 rounded-xl ${x?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: https://www.ejemplo.com/producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${x?"text-gray-300":"text-gray-700"}`,children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:r.details,onChange:a,rows:"3",className:`w-full px-4 py-2 rounded-xl ${x?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${x?"text-gray-300":"text-gray-700"}`,children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:r.terms,onChange:a,rows:"3",className:`w-full px-4 py-2 rounded-xl ${x?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Especifica los términos y condiciones de uso"})]}),r.status==="En stock"&&e.jsxs(j.div,{className:`rounded-2xl p-4 shadow-xl border backdrop-blur-sm ${x?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:g,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${x?"text-white":"text-gray-900"}`,children:"Cuentas asociadas*"}),e.jsx("p",{className:`text-xs mb-3 ${x?"text-gray-400":"text-gray-600"}`,children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:r.accounts.map((k,S)=>e.jsxs(j.div,{className:`border rounded-xl p-4 ${x?"bg-gray-900/70 border-gray-700/50":"bg-gray-200/70 border-gray-300/50"} backdrop-blur-sm`,variants:g,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h4",{className:`text-sm font-medium ${x?"text-white":"text-gray-900"} mb-3`,children:["Cuenta ",S+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${x?"text-gray-400":"text-gray-600"} mb-1`,children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:k.email,onChange:_=>c(S,"email",_.target.value),className:`w-full px-3 py-2 rounded-xl ${x?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${x?"text-gray-400":"text-gray-600"} mb-1`,children:"Contraseña*"}),e.jsx("input",{type:"text",value:k.password,onChange:_=>c(S,"password",_.target.value),className:`w-full px-3 py-2 rounded-xl ${x?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${x?"text-gray-400":"text-gray-600"} mb-1`,children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:k.profile,onChange:_=>c(S,"profile",_.target.value),className:`w-full px-3 py-2 rounded-xl ${x?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm`,placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${x?"text-gray-400":"text-gray-600"} mb-1`,children:"PIN (opcional)"}),e.jsx("input",{type:"text",value:k.pin,onChange:_=>c(S,"pin",_.target.value),className:`w-full px-3 py-2 rounded-xl ${x?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm`,placeholder:"Ej: 1234"})]})]})]},S))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx(j.button,{onClick:()=>u("inventario"),className:`px-4 py-2 rounded-xl transition-all duration-300 ${x?"bg-gray-900/70 text-gray-300 hover:bg-gray-700/50":"bg-gray-200/70 text-gray-700 hover:bg-gray-300/50"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Cancelar"}),e.jsx(j.button,{onClick:o,className:`px-6 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${x?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Subir Producto"})]})]})]})},nW=({orders:r,totalEarnings:t,providerBalance:a,balanceLoading:n,getCategoryDisplayName:i,formatDate:c,theme:o="dark"})=>{const u=o==="dark",m={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},x={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},g={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:u?"rgba(239, 68, 68, 0.2)":"rgba(239, 68, 68, 0.1)",transition:{duration:.2}}};return e.jsxs(j.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${u?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,variants:m,initial:"hidden",animate:"visible",children:[e.jsxs("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight mb-6 flex items-center bg-clip-text text-transparent bg-gradient-to-r ${u?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:[e.jsx(lo,{className:"mr-2"})," Ganancias"]}),e.jsx(j.div,{className:`rounded-2xl p-4 mb-6 border shadow-xl backdrop-blur-sm ${u?"bg-gray-900/80 border-gray-700/50":"bg-gray-100/80 border-gray-200/50"}`,variants:x,initial:"hidden",animate:"visible",whileHover:"hover",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`text-lg font-medium ${u?"text-white":"text-gray-900"} mb-1`,children:"Ganancias totales"}),e.jsxs("p",{className:`text-sm ${u?"text-gray-400":"text-gray-600"}`,children:[r.length," ventas realizadas"]}),n?e.jsx("p",{className:`text-sm ${u?"text-gray-400":"text-gray-600"}`,children:"Disponible: Cargando..."}):e.jsxs("p",{className:`text-sm ${u?"text-gray-400":"text-gray-600"}`,children:["Disponible: S/ ",(a||0).toFixed(2)]})]}),e.jsxs("div",{className:`text-3xl font-bold ${u?"text-white":"text-gray-900"} mt-2 md:mt-0`,children:["S/ ",t.toFixed(2)]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:`backdrop-blur-sm ${u?"bg-gray-900/80":"bg-gray-200/80"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${u?"text-gray-300":"text-gray-700"}`,children:"Producto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${u?"text-gray-300":"text-gray-700"}`,children:"Categoría"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${u?"text-gray-300":"text-gray-700"}`,children:"Comprador"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${u?"text-gray-300":"text-gray-700"}`,children:"Contacto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${u?"text-gray-300":"text-gray-700"}`,children:"Fecha"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${u?"text-gray-300":"text-gray-700"}`,children:"Monto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${u?"text-gray-300":"text-gray-700"}`,children:"Estado"})]})}),e.jsx("tbody",{className:`divide-y divide-gray-700/50 ${u?"bg-gray-800/70":"bg-gray-100/70"}`,children:r.map((k,S)=>e.jsxs(j.tr,{variants:g,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${u?"text-white":"text-gray-900"}`,children:k.productName}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${u?"text-gray-300":"text-gray-600"}`,children:i(k.category)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[e.jsx("div",{className:`text-sm ${u?"text-white":"text-gray-900"}`,children:k.buyer}),e.jsx("div",{className:`text-xs ${u?"text-gray-400":"text-gray-600"}`,children:k.buyerEmail})]}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${u?"text-gray-300":"text-gray-600"}`,children:k.buyerPhone}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${u?"text-gray-300":"text-gray-600"}`,children:c(k.saleDate)}),e.jsxs("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${u?"text-white":"text-gray-900"}`,children:["S/ ",(k.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${u?"bg-blue-500/20 text-blue-400 border-blue-500/50":"bg-blue-600/20 text-blue-600 border-blue-600/50"}`,children:"Completado"})})]},S))})]})}),r.length===0&&e.jsxs(j.div,{className:"text-center py-12",variants:m,initial:"hidden",animate:"visible",children:[e.jsx(lo,{className:`mx-auto text-4xl ${u?"text-gray-400":"text-gray-500"} mb-3`}),e.jsx("h4",{className:`text-lg font-medium ${u?"text-gray-300":"text-gray-700"}`,children:"No hay ventas registradas"}),e.jsx("p",{className:`text-sm ${u?"text-gray-400":"text-gray-600"}`,children:"Tus ventas aparecerán aquí."})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var qp={};qp.version="0.18.5";var dS=1252,iW=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],uS=function(r){iW.indexOf(r)!=-1&&(dS=r)};function oW(){uS(1252)}var Ru=function(r){uS(r)};function lW(){Ru(1200),oW()}var Om=function(t){return String.fromCharCode(t)},c5=function(t){return String.fromCharCode(t)},Wp,il="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Mu(r){for(var t="",a=0,n=0,i=0,c=0,o=0,u=0,m=0,x=0;x<r.length;)a=r.charCodeAt(x++),c=a>>2,n=r.charCodeAt(x++),o=(a&3)<<4|n>>4,i=r.charCodeAt(x++),u=(n&15)<<2|i>>6,m=i&63,isNaN(n)?u=m=64:isNaN(i)&&(m=64),t+=il.charAt(c)+il.charAt(o)+il.charAt(u)+il.charAt(m);return t}function No(r){var t="",a=0,n=0,i=0,c=0,o=0,u=0,m=0;r=r.replace(/[^\w\+\/\=]/g,"");for(var x=0;x<r.length;)c=il.indexOf(r.charAt(x++)),o=il.indexOf(r.charAt(x++)),a=c<<2|o>>4,t+=String.fromCharCode(a),u=il.indexOf(r.charAt(x++)),n=(o&15)<<4|u>>2,u!==64&&(t+=String.fromCharCode(n)),m=il.indexOf(r.charAt(x++)),i=(u&3)<<6|m,m!==64&&(t+=String.fromCharCode(i));return t}var oa=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Eo=(function(){if(typeof Buffer<"u"){var r=!Buffer.from;if(!r)try{Buffer.from("foo","utf8")}catch{r=!0}return r?function(t,a){return a?new Buffer(t,a):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function fc(r){return oa?Buffer.alloc?Buffer.alloc(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}function d5(r){return oa?Buffer.allocUnsafe?Buffer.allocUnsafe(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}var di=function(t){return oa?Eo(t,"binary"):t.split("").map(function(a){return a.charCodeAt(0)&255})};function Bx(r){if(typeof ArrayBuffer>"u")return di(r);for(var t=new ArrayBuffer(r.length),a=new Uint8Array(t),n=0;n!=r.length;++n)a[n]=r.charCodeAt(n)&255;return t}function uh(r){if(Array.isArray(r))return r.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],a=0;a<r.length;++a)t[a]=String.fromCharCode(r[a]);return t.join("")}function cW(r){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(r)}var Cs=oa?function(r){return Buffer.concat(r.map(function(t){return Buffer.isBuffer(t)?t:Eo(t)}))}:function(r){if(typeof Uint8Array<"u"){var t=0,a=0;for(t=0;t<r.length;++t)a+=r[t].length;var n=new Uint8Array(a),i=0;for(t=0,a=0;t<r.length;a+=i,++t)if(i=r[t].length,r[t]instanceof Uint8Array)n.set(r[t],a);else{if(typeof r[t]=="string")throw"wtf";n.set(new Uint8Array(r[t]),a)}return n}return[].concat.apply([],r.map(function(c){return Array.isArray(c)?c:[].slice.call(c)}))};function dW(r){for(var t=[],a=0,n=r.length+250,i=fc(r.length+255),c=0;c<r.length;++c){var o=r.charCodeAt(c);if(o<128)i[a++]=o;else if(o<2048)i[a++]=192|o>>6&31,i[a++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var u=r.charCodeAt(++c)&1023;i[a++]=240|o>>8&7,i[a++]=128|o>>2&63,i[a++]=128|u>>6&15|(o&3)<<4,i[a++]=128|u&63}else i[a++]=224|o>>12&15,i[a++]=128|o>>6&63,i[a++]=128|o&63;a>n&&(t.push(i.slice(0,a)),a=0,i=fc(65535),n=65530)}return t.push(i.slice(0,a)),Cs(t)}var lu=/\u0000/g,Lm=/[\u0001-\u0006]/g;function _d(r){for(var t="",a=r.length-1;a>=0;)t+=r.charAt(a--);return t}function mi(r,t){var a=""+r;return a.length>=t?a:za("0",t-a.length)+a}function cw(r,t){var a=""+r;return a.length>=t?a:za(" ",t-a.length)+a}function Gp(r,t){var a=""+r;return a.length>=t?a:a+za(" ",t-a.length)}function uW(r,t){var a=""+Math.round(r);return a.length>=t?a:za("0",t-a.length)+a}function hW(r,t){var a=""+r;return a.length>=t?a:za("0",t-a.length)+a}var u5=Math.pow(2,32);function cd(r,t){if(r>u5||r<-u5)return uW(r,t);var a=Math.round(r);return hW(a,t)}function Kp(r,t){return t=t||0,r.length>=7+t&&(r.charCodeAt(t)|32)===103&&(r.charCodeAt(t+1)|32)===101&&(r.charCodeAt(t+2)|32)===110&&(r.charCodeAt(t+3)|32)===101&&(r.charCodeAt(t+4)|32)===114&&(r.charCodeAt(t+5)|32)===97&&(r.charCodeAt(t+6)|32)===108}var h5=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],ab=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function mW(r){return r||(r={}),r[0]="General",r[1]="0",r[2]="0.00",r[3]="#,##0",r[4]="#,##0.00",r[9]="0%",r[10]="0.00%",r[11]="0.00E+00",r[12]="# ?/?",r[13]="# ??/??",r[14]="m/d/yy",r[15]="d-mmm-yy",r[16]="d-mmm",r[17]="mmm-yy",r[18]="h:mm AM/PM",r[19]="h:mm:ss AM/PM",r[20]="h:mm",r[21]="h:mm:ss",r[22]="m/d/yy h:mm",r[37]="#,##0 ;(#,##0)",r[38]="#,##0 ;[Red](#,##0)",r[39]="#,##0.00;(#,##0.00)",r[40]="#,##0.00;[Red](#,##0.00)",r[45]="mm:ss",r[46]="[h]:mm:ss",r[47]="mmss.0",r[48]="##0.0E+0",r[49]="@",r[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',r}var Va={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},m5={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},pW={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Yp(r,t,a){for(var n=r<0?-1:1,i=r*n,c=0,o=1,u=0,m=1,x=0,g=0,k=Math.floor(i);x<t&&(k=Math.floor(i),u=k*o+c,g=k*x+m,!(i-k<5e-8));)i=1/(i-k),c=o,o=u,m=x,x=g;if(g>t&&(x>t?(g=m,u=c):(g=x,u=o)),!a)return[0,n*u,g];var S=Math.floor(n*u/g);return[S,n*u-S*g,g]}function Bm(r,t,a){if(r>2958465||r<0)return null;var n=r|0,i=Math.floor(86400*(r-n)),c=0,o=[],u={D:n,T:i,u:86400*(r-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(u.u)<1e-6&&(u.u=0),t&&t.date1904&&(n+=1462),u.u>.9999&&(u.u=0,++i==86400&&(u.T=i=0,++n,++u.D)),n===60)o=a?[1317,10,29]:[1900,2,29],c=3;else if(n===0)o=a?[1317,8,29]:[1900,1,0],c=6;else{n>60&&--n;var m=new Date(1900,0,1);m.setDate(m.getDate()+n-1),o=[m.getFullYear(),m.getMonth()+1,m.getDate()],c=m.getDay(),n<60&&(c=(c+6)%7),a&&(c=wW(m,o))}return u.y=o[0],u.m=o[1],u.d=o[2],u.S=i%60,i=Math.floor(i/60),u.M=i%60,i=Math.floor(i/60),u.H=i,u.q=c,u}var hS=new Date(1899,11,31,0,0,0),xW=hS.getTime(),gW=new Date(1900,2,1,0,0,0);function mS(r,t){var a=r.getTime();return t?a-=1461*24*60*60*1e3:r>=gW&&(a+=1440*60*1e3),(a-(xW+(r.getTimezoneOffset()-hS.getTimezoneOffset())*6e4))/(1440*60*1e3)}function dw(r){return r.indexOf(".")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function fW(r){return r.indexOf("E")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function bW(r){var t=r<0?12:11,a=dw(r.toFixed(12));return a.length<=t||(a=r.toPrecision(10),a.length<=t)?a:r.toExponential(5)}function yW(r){var t=dw(r.toFixed(11));return t.length>(r<0?12:11)||t==="0"||t==="-0"?r.toPrecision(6):t}function vW(r){var t=Math.floor(Math.log(Math.abs(r))*Math.LOG10E),a;return t>=-4&&t<=-1?a=r.toPrecision(10+t):Math.abs(t)<=9?a=bW(r):t===10?a=r.toFixed(10).substr(0,12):a=yW(r),dw(fW(a.toUpperCase()))}function oy(r,t){switch(typeof r){case"string":return r;case"boolean":return r?"TRUE":"FALSE";case"number":return(r|0)===r?r.toString(10):vW(r);case"undefined":return"";case"object":if(r==null)return"";if(r instanceof Date)return Nl(14,mS(r,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+r)}function wW(r,t){t[0]-=581;var a=r.getDay();return r<60&&(a=(a+6)%7),a}function kW(r,t,a,n){var i="",c=0,o=0,u=a.y,m,x=0;switch(r){case 98:u=a.y+543;case 121:switch(t.length){case 1:case 2:m=u%100,x=2;break;default:m=u%1e4,x=4;break}break;case 109:switch(t.length){case 1:case 2:m=a.m,x=t.length;break;case 3:return ab[a.m-1][1];case 5:return ab[a.m-1][0];default:return ab[a.m-1][2]}break;case 100:switch(t.length){case 1:case 2:m=a.d,x=t.length;break;case 3:return h5[a.q][0];default:return h5[a.q][1]}break;case 104:switch(t.length){case 1:case 2:m=1+(a.H+11)%12,x=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:m=a.H,x=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:m=a.M,x=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return a.u===0&&(t=="s"||t=="ss")?mi(a.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,c=Math.round(o*(a.S+a.u)),c>=60*o&&(c=0),t==="s"?c===0?"0":""+c/o:(i=mi(c,2+n),t==="ss"?i.substr(0,2):"."+i.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":m=a.D*24+a.H;break;case"[m]":case"[mm]":m=(a.D*24+a.H)*60+a.M;break;case"[s]":case"[ss]":m=((a.D*24+a.H)*60+a.M)*60+Math.round(a.S+a.u);break;default:throw"bad abstime format: "+t}x=t.length===3?1:2;break;case 101:m=u,x=1;break}var g=x>0?mi(m,x):"";return g}function ol(r){var t=3;if(r.length<=t)return r;for(var a=r.length%t,n=r.substr(0,a);a!=r.length;a+=t)n+=(n.length>0?",":"")+r.substr(a,t);return n}var pS=/%/g;function NW(r,t,a){var n=t.replace(pS,""),i=t.length-n.length;return mo(r,n,a*Math.pow(10,2*i))+za("%",i)}function jW(r,t,a){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return mo(r,t.substr(0,n),a/Math.pow(10,3*(t.length-n)))}function xS(r,t){var a,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+xS(r,-t);var i=r.indexOf(".");i===-1&&(i=r.indexOf("E"));var c=Math.floor(Math.log(t)*Math.LOG10E)%i;if(c<0&&(c+=i),a=(t/Math.pow(10,c)).toPrecision(n+1+(i+c)%i),a.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(o-a.length+c):a+="E+"+(o-c);a.substr(0,2)==="0.";)a=a.charAt(0)+a.substr(2,i)+"."+a.substr(2+i),a=a.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(u,m,x,g){return m+x+g.substr(0,(i+c)%i)+"."+g.substr(c)+"E"})}else a=t.toExponential(n);return r.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),r.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}var gS=/# (\?+)( ?)\/( ?)(\d+)/;function CW(r,t,a){var n=parseInt(r[4],10),i=Math.round(t*n),c=Math.floor(i/n),o=i-c*n,u=n;return a+(c===0?"":""+c)+" "+(o===0?za(" ",r[1].length+1+r[4].length):cw(o,r[1].length)+r[2]+"/"+r[3]+mi(u,r[4].length))}function TW(r,t,a){return a+(t===0?"":""+t)+za(" ",r[1].length+2+r[4].length)}var fS=/^#*0*\.([0#]+)/,bS=/\).*[0#]/,yS=/\(###\) ###\\?-####/;function qs(r){for(var t="",a,n=0;n!=r.length;++n)switch(a=r.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(a)}return t}function p5(r,t){var a=Math.pow(10,t);return""+Math.round(r*a)/a}function x5(r,t){var a=r-Math.floor(r),n=Math.pow(10,t);return t<(""+Math.round(a*n)).length?0:Math.round(a*n)}function SW(r,t){return t<(""+Math.round((r-Math.floor(r))*Math.pow(10,t))).length?1:0}function EW(r){return r<2147483647&&r>-2147483648?""+(r>=0?r|0:r-1|0):""+Math.floor(r)}function zn(r,t,a){if(r.charCodeAt(0)===40&&!t.match(bS)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?zn("n",n,a):"("+zn("n",n,-a)+")"}if(t.charCodeAt(t.length-1)===44)return jW(r,t,a);if(t.indexOf("%")!==-1)return NW(r,t,a);if(t.indexOf("E")!==-1)return xS(t,a);if(t.charCodeAt(0)===36)return"$"+zn(r,t.substr(t.charAt(1)==" "?2:1),a);var i,c,o,u,m=Math.abs(a),x=a<0?"-":"";if(t.match(/^00+$/))return x+cd(m,t.length);if(t.match(/^[#?]+$/))return i=cd(a,0),i==="0"&&(i=""),i.length>t.length?i:qs(t.substr(0,t.length-i.length))+i;if(c=t.match(gS))return CW(c,m,x);if(t.match(/^#+0+$/))return x+cd(m,t.length-t.indexOf("0"));if(c=t.match(fS))return i=p5(a,c[1].length).replace(/^([^\.]+)$/,"$1."+qs(c[1])).replace(/\.$/,"."+qs(c[1])).replace(/\.(\d*)$/,function(I,P){return"."+P+za("0",qs(c[1]).length-P.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),c=t.match(/^(0*)\.(#*)$/))return x+p5(m,c[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=t.match(/^#{1,3},##0(\.?)$/))return x+ol(cd(m,0));if(c=t.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+zn(r,t,-a):ol(""+(Math.floor(a)+SW(a,c[1].length)))+"."+mi(x5(a,c[1].length),c[1].length);if(c=t.match(/^#,#*,#0/))return zn(r,t.replace(/^#,#*,/,""),a);if(c=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=_d(zn(r,t.replace(/[\\-]/g,""),a)),o=0,_d(_d(t.replace(/\\/g,"")).replace(/[0#]/g,function(I){return o<i.length?i.charAt(o++):I==="0"?"0":""}));if(t.match(yS))return i=zn(r,"##########",a),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var g="";if(c=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(c[4].length,7),u=Yp(m,Math.pow(10,o)-1,!1),i=""+x,g=mo("n",c[1],u[1]),g.charAt(g.length-1)==" "&&(g=g.substr(0,g.length-1)+"0"),i+=g+c[2]+"/"+c[3],g=Gp(u[2],o),g.length<c[4].length&&(g=qs(c[4].substr(c[4].length-g.length))+g),i+=g,i;if(c=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(c[1].length,c[4].length),7),u=Yp(m,Math.pow(10,o)-1,!0),x+(u[0]||(u[1]?"":"0"))+" "+(u[1]?cw(u[1],o)+c[2]+"/"+c[3]+Gp(u[2],o):za(" ",2*o+1+c[2].length+c[3].length));if(c=t.match(/^[#0?]+$/))return i=cd(a,0),t.length<=i.length?i:qs(t.substr(0,t.length-i.length))+i;if(c=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+a.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var k=t.indexOf(".")-o,S=t.length-i.length-k;return qs(t.substr(0,k)+i+t.substr(t.length-S))}if(c=t.match(/^00,000\.([#0]*0)$/))return o=x5(a,c[1].length),a<0?"-"+zn(r,t,-a):ol(EW(a)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(I){return"00,"+(I.length<3?mi(0,3-I.length):"")+I})+"."+mi(o,c[1].length);switch(t){case"###,##0.00":return zn(r,"#,##0.00",a);case"###,###":case"##,###":case"#,###":var _=ol(cd(m,0));return _!=="0"?x+_:"";case"###,###.00":return zn(r,"###,##0.00",a).replace(/^0\./,".");case"#,###.00":return zn(r,"#,##0.00",a).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function _W(r,t,a){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return mo(r,t.substr(0,n),a/Math.pow(10,3*(t.length-n)))}function PW(r,t,a){var n=t.replace(pS,""),i=t.length-n.length;return mo(r,n,a*Math.pow(10,2*i))+za("%",i)}function vS(r,t){var a,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+vS(r,-t);var i=r.indexOf(".");i===-1&&(i=r.indexOf("E"));var c=Math.floor(Math.log(t)*Math.LOG10E)%i;if(c<0&&(c+=i),a=(t/Math.pow(10,c)).toPrecision(n+1+(i+c)%i),!a.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(o-a.length+c):a+="E+"+(o-c),a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(u,m,x,g){return m+x+g.substr(0,(i+c)%i)+"."+g.substr(c)+"E"})}else a=t.toExponential(n);return r.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),r.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}function _i(r,t,a){if(r.charCodeAt(0)===40&&!t.match(bS)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?_i("n",n,a):"("+_i("n",n,-a)+")"}if(t.charCodeAt(t.length-1)===44)return _W(r,t,a);if(t.indexOf("%")!==-1)return PW(r,t,a);if(t.indexOf("E")!==-1)return vS(t,a);if(t.charCodeAt(0)===36)return"$"+_i(r,t.substr(t.charAt(1)==" "?2:1),a);var i,c,o,u,m=Math.abs(a),x=a<0?"-":"";if(t.match(/^00+$/))return x+mi(m,t.length);if(t.match(/^[#?]+$/))return i=""+a,a===0&&(i=""),i.length>t.length?i:qs(t.substr(0,t.length-i.length))+i;if(c=t.match(gS))return TW(c,m,x);if(t.match(/^#+0+$/))return x+mi(m,t.length-t.indexOf("0"));if(c=t.match(fS))return i=(""+a).replace(/^([^\.]+)$/,"$1."+qs(c[1])).replace(/\.$/,"."+qs(c[1])),i=i.replace(/\.(\d*)$/,function(I,P){return"."+P+za("0",qs(c[1]).length-P.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),c=t.match(/^(0*)\.(#*)$/))return x+(""+m).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=t.match(/^#{1,3},##0(\.?)$/))return x+ol(""+m);if(c=t.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+_i(r,t,-a):ol(""+a)+"."+za("0",c[1].length);if(c=t.match(/^#,#*,#0/))return _i(r,t.replace(/^#,#*,/,""),a);if(c=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=_d(_i(r,t.replace(/[\\-]/g,""),a)),o=0,_d(_d(t.replace(/\\/g,"")).replace(/[0#]/g,function(I){return o<i.length?i.charAt(o++):I==="0"?"0":""}));if(t.match(yS))return i=_i(r,"##########",a),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var g="";if(c=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(c[4].length,7),u=Yp(m,Math.pow(10,o)-1,!1),i=""+x,g=mo("n",c[1],u[1]),g.charAt(g.length-1)==" "&&(g=g.substr(0,g.length-1)+"0"),i+=g+c[2]+"/"+c[3],g=Gp(u[2],o),g.length<c[4].length&&(g=qs(c[4].substr(c[4].length-g.length))+g),i+=g,i;if(c=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(c[1].length,c[4].length),7),u=Yp(m,Math.pow(10,o)-1,!0),x+(u[0]||(u[1]?"":"0"))+" "+(u[1]?cw(u[1],o)+c[2]+"/"+c[3]+Gp(u[2],o):za(" ",2*o+1+c[2].length+c[3].length));if(c=t.match(/^[#0?]+$/))return i=""+a,t.length<=i.length?i:qs(t.substr(0,t.length-i.length))+i;if(c=t.match(/^([#0]+)\.([#0]+)$/)){i=""+a.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var k=t.indexOf(".")-o,S=t.length-i.length-k;return qs(t.substr(0,k)+i+t.substr(t.length-S))}if(c=t.match(/^00,000\.([#0]*0)$/))return a<0?"-"+_i(r,t,-a):ol(""+a).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(I){return"00,"+(I.length<3?mi(0,3-I.length):"")+I})+"."+mi(0,c[1].length);switch(t){case"###,###":case"##,###":case"#,###":var _=ol(""+m);return _!=="0"?x+_:"";default:if(t.match(/\.[0#?]*$/))return _i(r,t.slice(0,t.lastIndexOf(".")),a)+qs(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function mo(r,t,a){return(a|0)===a?_i(r,t,a):zn(r,t,a)}function IW(r){for(var t=[],a=!1,n=0,i=0;n<r.length;++n)switch(r.charCodeAt(n)){case 34:a=!a;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=r.substr(i,n-i),i=n+1}if(t[t.length]=r.substr(i),a===!0)throw new Error("Format |"+r+"| unterminated string ");return t}var wS=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function kS(r){for(var t=0,a="",n="";t<r.length;)switch(a=r.charAt(t)){case"G":Kp(r,t)&&(t+=6),t++;break;case'"':for(;r.charCodeAt(++t)!==34&&t<r.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(r.charAt(t+1)==="1"||r.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(r.substr(t,3).toUpperCase()==="A/P"||r.substr(t,5).toUpperCase()==="AM/PM"||r.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=a;r.charAt(t++)!=="]"&&t<r.length;)n+=r.charAt(t);if(n.match(wS))return!0;break;case".":case"0":case"#":for(;t<r.length&&("0#?.,E+-%".indexOf(a=r.charAt(++t))>-1||a=="\\"&&r.charAt(t+1)=="-"&&"0#".indexOf(r.charAt(t+2))>-1););break;case"?":for(;r.charAt(++t)===a;);break;case"*":++t,(r.charAt(t)==" "||r.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<r.length&&"0123456789".indexOf(r.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function $W(r,t,a,n){for(var i=[],c="",o=0,u="",m="t",x,g,k,S="H";o<r.length;)switch(u=r.charAt(o)){case"G":if(!Kp(r,o))throw new Error("unrecognized character "+u+" in "+r);i[i.length]={t:"G",v:"General"},o+=7;break;case'"':for(c="";(k=r.charCodeAt(++o))!==34&&o<r.length;)c+=String.fromCharCode(k);i[i.length]={t:"t",v:c},++o;break;case"\\":var _=r.charAt(++o),I=_==="("||_===")"?_:"t";i[i.length]={t:I,v:_},++o;break;case"_":i[i.length]={t:"t",v:" "},o+=2;break;case"@":i[i.length]={t:"T",v:t},++o;break;case"B":case"b":if(r.charAt(o+1)==="1"||r.charAt(o+1)==="2"){if(x==null&&(x=Bm(t,a,r.charAt(o+1)==="2"),x==null))return"";i[i.length]={t:"X",v:r.substr(o,2)},m=u,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||x==null&&(x=Bm(t,a),x==null))return"";for(c=u;++o<r.length&&r.charAt(o).toLowerCase()===u;)c+=u;u==="m"&&m.toLowerCase()==="h"&&(u="M"),u==="h"&&(u=S),i[i.length]={t:u,v:c},m=u;break;case"A":case"a":case"上":var P={t:u,v:u};if(x==null&&(x=Bm(t,a)),r.substr(o,3).toUpperCase()==="A/P"?(x!=null&&(P.v=x.H>=12?"P":"A"),P.t="T",S="h",o+=3):r.substr(o,5).toUpperCase()==="AM/PM"?(x!=null&&(P.v=x.H>=12?"PM":"AM"),P.t="T",o+=5,S="h"):r.substr(o,5).toUpperCase()==="上午/下午"?(x!=null&&(P.v=x.H>=12?"下午":"上午"),P.t="T",o+=5,S="h"):(P.t="t",++o),x==null&&P.t==="T")return"";i[i.length]=P,m=u;break;case"[":for(c=u;r.charAt(o++)!=="]"&&o<r.length;)c+=r.charAt(o);if(c.slice(-1)!=="]")throw'unterminated "[" block: |'+c+"|";if(c.match(wS)){if(x==null&&(x=Bm(t,a),x==null))return"";i[i.length]={t:"Z",v:c.toLowerCase()},m=c.charAt(1)}else c.indexOf("$")>-1&&(c=(c.match(/\$([^-\[\]]*)/)||[])[1]||"$",kS(r)||(i[i.length]={t:"t",v:c}));break;case".":if(x!=null){for(c=u;++o<r.length&&(u=r.charAt(o))==="0";)c+=u;i[i.length]={t:"s",v:c};break}case"0":case"#":for(c=u;++o<r.length&&"0#?.,E+-%".indexOf(u=r.charAt(o))>-1;)c+=u;i[i.length]={t:"n",v:c};break;case"?":for(c=u;r.charAt(++o)===u;)c+=u;i[i.length]={t:u,v:c},m=u;break;case"*":++o,(r.charAt(o)==" "||r.charAt(o)=="*")&&++o;break;case"(":case")":i[i.length]={t:n===1?"t":u,v:u},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(c=u;o<r.length&&"0123456789".indexOf(r.charAt(++o))>-1;)c+=r.charAt(o);i[i.length]={t:"D",v:c};break;case" ":i[i.length]={t:u,v:u},++o;break;case"$":i[i.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(u)===-1)throw new Error("unrecognized character "+u+" in "+r);i[i.length]={t:"t",v:u},++o;break}var b=0,B=0,L;for(o=i.length-1,m="t";o>=0;--o)switch(i[o].t){case"h":case"H":i[o].t=S,m="h",b<1&&(b=1);break;case"s":(L=i[o].v.match(/\.0+$/))&&(B=Math.max(B,L[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":m=i[o].t;break;case"m":m==="s"&&(i[o].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&i[o].v.match(/[Hh]/)&&(b=1),b<2&&i[o].v.match(/[Mm]/)&&(b=2),b<3&&i[o].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:x.u>=.5&&(x.u=0,++x.S),x.S>=60&&(x.S=0,++x.M),x.M>=60&&(x.M=0,++x.H);break;case 2:x.u>=.5&&(x.u=0,++x.S),x.S>=60&&(x.S=0,++x.M);break}var O="",te;for(o=0;o<i.length;++o)switch(i[o].t){case"t":case"T":case" ":case"D":break;case"X":i[o].v="",i[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[o].v=kW(i[o].t.charCodeAt(0),i[o].v,x,B),i[o].t="t";break;case"n":case"?":for(te=o+1;i[te]!=null&&((u=i[te].t)==="?"||u==="D"||(u===" "||u==="t")&&i[te+1]!=null&&(i[te+1].t==="?"||i[te+1].t==="t"&&i[te+1].v==="/")||i[o].t==="("&&(u===" "||u==="n"||u===")")||u==="t"&&(i[te].v==="/"||i[te].v===" "&&i[te+1]!=null&&i[te+1].t=="?"));)i[o].v+=i[te].v,i[te]={v:"",t:";"},++te;O+=i[o].v,o=te-1;break;case"G":i[o].t="t",i[o].v=oy(t,a);break}var ne="",be,H;if(O.length>0){O.charCodeAt(0)==40?(be=t<0&&O.charCodeAt(0)===45?-t:t,H=mo("n",O,be)):(be=t<0&&n>1?-t:t,H=mo("n",O,be),be<0&&i[0]&&i[0].t=="t"&&(H=H.substr(1),i[0].v="-"+i[0].v)),te=H.length-1;var z=i.length;for(o=0;o<i.length;++o)if(i[o]!=null&&i[o].t!="t"&&i[o].v.indexOf(".")>-1){z=o;break}var F=i.length;if(z===i.length&&H.indexOf("E")===-1){for(o=i.length-1;o>=0;--o)i[o]==null||"n?".indexOf(i[o].t)===-1||(te>=i[o].v.length-1?(te-=i[o].v.length,i[o].v=H.substr(te+1,i[o].v.length)):te<0?i[o].v="":(i[o].v=H.substr(0,te+1),te=-1),i[o].t="t",F=o);te>=0&&F<i.length&&(i[F].v=H.substr(0,te+1)+i[F].v)}else if(z!==i.length&&H.indexOf("E")===-1){for(te=H.indexOf(".")-1,o=z;o>=0;--o)if(!(i[o]==null||"n?".indexOf(i[o].t)===-1)){for(g=i[o].v.indexOf(".")>-1&&o===z?i[o].v.indexOf(".")-1:i[o].v.length-1,ne=i[o].v.substr(g+1);g>=0;--g)te>=0&&(i[o].v.charAt(g)==="0"||i[o].v.charAt(g)==="#")&&(ne=H.charAt(te--)+ne);i[o].v=ne,i[o].t="t",F=o}for(te>=0&&F<i.length&&(i[F].v=H.substr(0,te+1)+i[F].v),te=H.indexOf(".")+1,o=z;o<i.length;++o)if(!(i[o]==null||"n?(".indexOf(i[o].t)===-1&&o!==z)){for(g=i[o].v.indexOf(".")>-1&&o===z?i[o].v.indexOf(".")+1:0,ne=i[o].v.substr(0,g);g<i[o].v.length;++g)te<H.length&&(ne+=H.charAt(te++));i[o].v=ne,i[o].t="t",F=o}}}for(o=0;o<i.length;++o)i[o]!=null&&"n?".indexOf(i[o].t)>-1&&(be=n>1&&t<0&&o>0&&i[o-1].v==="-"?-t:t,i[o].v=mo(i[o].t,i[o].v,be),i[o].t="t");var v="";for(o=0;o!==i.length;++o)i[o]!=null&&(v+=i[o].v);return v}var g5=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function f5(r,t){if(t==null)return!1;var a=parseFloat(t[2]);switch(t[1]){case"=":if(r==a)return!0;break;case">":if(r>a)return!0;break;case"<":if(r<a)return!0;break;case"<>":if(r!=a)return!0;break;case">=":if(r>=a)return!0;break;case"<=":if(r<=a)return!0;break}return!1}function DW(r,t){var a=IW(r),n=a.length,i=a[n-1].indexOf("@");if(n<4&&i>-1&&--n,a.length>4)throw new Error("cannot find right format for |"+a.join("|")+"|");if(typeof t!="number")return[4,a.length===4||i>-1?a[a.length-1]:"@"];switch(a.length){case 1:a=i>-1?["General","General","General",a[0]]:[a[0],a[0],a[0],"@"];break;case 2:a=i>-1?[a[0],a[0],a[0],a[1]]:[a[0],a[1],a[0],"@"];break;case 3:a=i>-1?[a[0],a[1],a[0],a[2]]:[a[0],a[1],a[2],"@"];break}var c=t>0?a[0]:t<0?a[1]:a[2];if(a[0].indexOf("[")===-1&&a[1].indexOf("[")===-1)return[n,c];if(a[0].match(/\[[=<>]/)!=null||a[1].match(/\[[=<>]/)!=null){var o=a[0].match(g5),u=a[1].match(g5);return f5(t,o)?[n,a[0]]:f5(t,u)?[n,a[1]]:[n,a[o!=null&&u!=null?2:1]]}return[n,c]}function Nl(r,t,a){a==null&&(a={});var n="";switch(typeof r){case"string":r=="m/d/yy"&&a.dateNF?n=a.dateNF:n=r;break;case"number":r==14&&a.dateNF?n=a.dateNF:n=(a.table!=null?a.table:Va)[r],n==null&&(n=a.table&&a.table[m5[r]]||Va[m5[r]]),n==null&&(n=pW[r]||"General");break}if(Kp(n,0))return oy(t,a);t instanceof Date&&(t=mS(t,a.date1904));var i=DW(n,t);if(Kp(i[1]))return oy(t,a);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return $W(i[1],t,a,i[0])}function NS(r,t){if(typeof t!="number"){t=+t||-1;for(var a=0;a<392;++a){if(Va[a]==null){t<0&&(t=a);continue}if(Va[a]==r){t=a;break}}t<0&&(t=391)}return Va[t]=r,t}function zx(r){for(var t=0;t!=392;++t)r[t]!==void 0&&NS(r[t],t)}function Vx(){Va=mW()}var jS=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function AW(r){var t=typeof r=="number"?Va[r]:r;return t=t.replace(jS,"(\\d+)"),new RegExp("^"+t+"$")}function RW(r,t,a){var n=-1,i=-1,c=-1,o=-1,u=-1,m=-1;(t.match(jS)||[]).forEach(function(k,S){var _=parseInt(a[S+1],10);switch(k.toLowerCase().charAt(0)){case"y":n=_;break;case"d":c=_;break;case"h":o=_;break;case"s":m=_;break;case"m":o>=0?u=_:i=_;break}}),m>=0&&u==-1&&i>=0&&(u=i,i=-1);var x=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(c>=1?c:1)).slice(-2);x.length==7&&(x="0"+x),x.length==8&&(x="20"+x);var g=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2)+":"+("00"+(m>=0?m:0)).slice(-2);return o==-1&&u==-1&&m==-1?x:n==-1&&i==-1&&c==-1?g:x+"T"+g}var MW=(function(){var r={};r.version="1.2.0";function t(){for(var H=0,z=new Array(256),F=0;F!=256;++F)H=F,H=H&1?-306674912^H>>>1:H>>>1,H=H&1?-306674912^H>>>1:H>>>1,H=H&1?-306674912^H>>>1:H>>>1,H=H&1?-306674912^H>>>1:H>>>1,H=H&1?-306674912^H>>>1:H>>>1,H=H&1?-306674912^H>>>1:H>>>1,H=H&1?-306674912^H>>>1:H>>>1,H=H&1?-306674912^H>>>1:H>>>1,z[F]=H;return typeof Int32Array<"u"?new Int32Array(z):z}var a=t();function n(H){var z=0,F=0,v=0,ie=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(v=0;v!=256;++v)ie[v]=H[v];for(v=0;v!=256;++v)for(F=H[v],z=256+v;z<4096;z+=256)F=ie[z]=F>>>8^H[F&255];var X=[];for(v=1;v!=16;++v)X[v-1]=typeof Int32Array<"u"?ie.subarray(v*256,v*256+256):ie.slice(v*256,v*256+256);return X}var i=n(a),c=i[0],o=i[1],u=i[2],m=i[3],x=i[4],g=i[5],k=i[6],S=i[7],_=i[8],I=i[9],P=i[10],b=i[11],B=i[12],L=i[13],O=i[14];function te(H,z){for(var F=z^-1,v=0,ie=H.length;v<ie;)F=F>>>8^a[(F^H.charCodeAt(v++))&255];return~F}function ne(H,z){for(var F=z^-1,v=H.length-15,ie=0;ie<v;)F=O[H[ie++]^F&255]^L[H[ie++]^F>>8&255]^B[H[ie++]^F>>16&255]^b[H[ie++]^F>>>24]^P[H[ie++]]^I[H[ie++]]^_[H[ie++]]^S[H[ie++]]^k[H[ie++]]^g[H[ie++]]^x[H[ie++]]^m[H[ie++]]^u[H[ie++]]^o[H[ie++]]^c[H[ie++]]^a[H[ie++]];for(v+=15;ie<v;)F=F>>>8^a[(F^H[ie++])&255];return~F}function be(H,z){for(var F=z^-1,v=0,ie=H.length,X=0,ae=0;v<ie;)X=H.charCodeAt(v++),X<128?F=F>>>8^a[(F^X)&255]:X<2048?(F=F>>>8^a[(F^(192|X>>6&31))&255],F=F>>>8^a[(F^(128|X&63))&255]):X>=55296&&X<57344?(X=(X&1023)+64,ae=H.charCodeAt(v++)&1023,F=F>>>8^a[(F^(240|X>>8&7))&255],F=F>>>8^a[(F^(128|X>>2&63))&255],F=F>>>8^a[(F^(128|ae>>6&15|(X&3)<<4))&255],F=F>>>8^a[(F^(128|ae&63))&255]):(F=F>>>8^a[(F^(224|X>>12&15))&255],F=F>>>8^a[(F^(128|X>>6&63))&255],F=F>>>8^a[(F^(128|X&63))&255]);return~F}return r.table=a,r.bstr=te,r.buf=ne,r.str=be,r})(),wa=(function(){var t={};t.version="1.2.1";function a(le,ye){for(var pe=le.split("/"),xe=ye.split("/"),ke=0,Ne=0,Ge=Math.min(pe.length,xe.length);ke<Ge;++ke){if(Ne=pe[ke].length-xe[ke].length)return Ne;if(pe[ke]!=xe[ke])return pe[ke]<xe[ke]?-1:1}return pe.length-xe.length}function n(le){if(le.charAt(le.length-1)=="/")return le.slice(0,-1).indexOf("/")===-1?le:n(le.slice(0,-1));var ye=le.lastIndexOf("/");return ye===-1?le:le.slice(0,ye+1)}function i(le){if(le.charAt(le.length-1)=="/")return i(le.slice(0,-1));var ye=le.lastIndexOf("/");return ye===-1?le:le.slice(ye+1)}function c(le,ye){typeof ye=="string"&&(ye=new Date(ye));var pe=ye.getHours();pe=pe<<6|ye.getMinutes(),pe=pe<<5|ye.getSeconds()>>>1,le.write_shift(2,pe);var xe=ye.getFullYear()-1980;xe=xe<<4|ye.getMonth()+1,xe=xe<<5|ye.getDate(),le.write_shift(2,xe)}function o(le){var ye=le.read_shift(2)&65535,pe=le.read_shift(2)&65535,xe=new Date,ke=pe&31;pe>>>=5;var Ne=pe&15;pe>>>=4,xe.setMilliseconds(0),xe.setFullYear(pe+1980),xe.setMonth(Ne-1),xe.setDate(ke);var Ge=ye&31;ye>>>=5;var ut=ye&63;return ye>>>=6,xe.setHours(ye),xe.setMinutes(ut),xe.setSeconds(Ge<<1),xe}function u(le){wn(le,0);for(var ye={},pe=0;le.l<=le.length-4;){var xe=le.read_shift(2),ke=le.read_shift(2),Ne=le.l+ke,Ge={};switch(xe){case 21589:pe=le.read_shift(1),pe&1&&(Ge.mtime=le.read_shift(4)),ke>5&&(pe&2&&(Ge.atime=le.read_shift(4)),pe&4&&(Ge.ctime=le.read_shift(4))),Ge.mtime&&(Ge.mt=new Date(Ge.mtime*1e3));break}le.l=Ne,ye[xe]=Ge}return ye}var m;function x(){return m||(m={})}function g(le,ye){if(le[0]==80&&le[1]==75)return we(le,ye);if((le[0]|32)==109&&(le[1]|32)==105)return He(le,ye);if(le.length<512)throw new Error("CFB file size "+le.length+" < 512");var pe=3,xe=512,ke=0,Ne=0,Ge=0,ut=0,Je=0,et=[],at=le.slice(0,512);wn(at,0);var St=k(at);switch(pe=St[0],pe){case 3:xe=512;break;case 4:xe=4096;break;case 0:if(St[1]==0)return we(le,ye);default:throw new Error("Major Version: Expected 3 or 4 saw "+pe)}xe!==512&&(at=le.slice(0,xe),wn(at,28));var qt=le.slice(0,xe);S(at,pe);var Zt=at.read_shift(4,"i");if(pe===3&&Zt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Zt);at.l+=4,Ge=at.read_shift(4,"i"),at.l+=4,at.chk("00100000","Mini Stream Cutoff Size: "),ut=at.read_shift(4,"i"),ke=at.read_shift(4,"i"),Je=at.read_shift(4,"i"),Ne=at.read_shift(4,"i");for(var Ft=-1,Dt=0;Dt<109&&(Ft=at.read_shift(4,"i"),!(Ft<0));++Dt)et[Dt]=Ft;var Sr=_(le,xe);b(Je,Ne,Sr,xe,et);var ia=L(Sr,Ge,et,xe);ia[Ge].name="!Directory",ke>0&&ut!==ae&&(ia[ut].name="!MiniFAT"),ia[et[0]].name="!FAT",ia.fat_addrs=et,ia.ssz=xe;var aa={},ua=[],Yn=[],yi=[];O(Ge,ia,Sr,ua,ke,aa,Yn,ut),I(Yn,yi,ua),ua.shift();var mn={FileIndex:Yn,FullPaths:yi};return ye&&ye.raw&&(mn.raw={header:qt,sectors:Sr}),mn}function k(le){if(le[le.l]==80&&le[le.l+1]==75)return[0,0];le.chk(We,"Header Signature: "),le.l+=16;var ye=le.read_shift(2,"u");return[le.read_shift(2,"u"),ye]}function S(le,ye){var pe=9;switch(le.l+=2,pe=le.read_shift(2)){case 9:if(ye!=3)throw new Error("Sector Shift: Expected 9 saw "+pe);break;case 12:if(ye!=4)throw new Error("Sector Shift: Expected 12 saw "+pe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+pe)}le.chk("0600","Mini Sector Shift: "),le.chk("000000000000","Reserved: ")}function _(le,ye){for(var pe=Math.ceil(le.length/ye)-1,xe=[],ke=1;ke<pe;++ke)xe[ke-1]=le.slice(ke*ye,(ke+1)*ye);return xe[pe-1]=le.slice(pe*ye),xe}function I(le,ye,pe){for(var xe=0,ke=0,Ne=0,Ge=0,ut=0,Je=pe.length,et=[],at=[];xe<Je;++xe)et[xe]=at[xe]=xe,ye[xe]=pe[xe];for(;ut<at.length;++ut)xe=at[ut],ke=le[xe].L,Ne=le[xe].R,Ge=le[xe].C,et[xe]===xe&&(ke!==-1&&et[ke]!==ke&&(et[xe]=et[ke]),Ne!==-1&&et[Ne]!==Ne&&(et[xe]=et[Ne])),Ge!==-1&&(et[Ge]=xe),ke!==-1&&xe!=et[xe]&&(et[ke]=et[xe],at.lastIndexOf(ke)<ut&&at.push(ke)),Ne!==-1&&xe!=et[xe]&&(et[Ne]=et[xe],at.lastIndexOf(Ne)<ut&&at.push(Ne));for(xe=1;xe<Je;++xe)et[xe]===xe&&(Ne!==-1&&et[Ne]!==Ne?et[xe]=et[Ne]:ke!==-1&&et[ke]!==ke&&(et[xe]=et[ke]));for(xe=1;xe<Je;++xe)if(le[xe].type!==0){if(ut=xe,ut!=et[ut])do ut=et[ut],ye[xe]=ye[ut]+"/"+ye[xe];while(ut!==0&&et[ut]!==-1&&ut!=et[ut]);et[xe]=-1}for(ye[0]+="/",xe=1;xe<Je;++xe)le[xe].type!==2&&(ye[xe]+="/")}function P(le,ye,pe){for(var xe=le.start,ke=le.size,Ne=[],Ge=xe;pe&&ke>0&&Ge>=0;)Ne.push(ye.slice(Ge*X,Ge*X+X)),ke-=X,Ge=Zl(pe,Ge*4);return Ne.length===0?xt(0):Cs(Ne).slice(0,le.size)}function b(le,ye,pe,xe,ke){var Ne=ae;if(le===ae){if(ye!==0)throw new Error("DIFAT chain shorter than expected")}else if(le!==-1){var Ge=pe[le],ut=(xe>>>2)-1;if(!Ge)return;for(var Je=0;Je<ut&&(Ne=Zl(Ge,Je*4))!==ae;++Je)ke.push(Ne);b(Zl(Ge,xe-4),ye-1,pe,xe,ke)}}function B(le,ye,pe,xe,ke){var Ne=[],Ge=[];ke||(ke=[]);var ut=xe-1,Je=0,et=0;for(Je=ye;Je>=0;){ke[Je]=!0,Ne[Ne.length]=Je,Ge.push(le[Je]);var at=pe[Math.floor(Je*4/xe)];if(et=Je*4&ut,xe<4+et)throw new Error("FAT boundary crossed: "+Je+" 4 "+xe);if(!le[at])break;Je=Zl(le[at],et)}return{nodes:Ne,data:C5([Ge])}}function L(le,ye,pe,xe){var ke=le.length,Ne=[],Ge=[],ut=[],Je=[],et=xe-1,at=0,St=0,qt=0,Zt=0;for(at=0;at<ke;++at)if(ut=[],qt=at+ye,qt>=ke&&(qt-=ke),!Ge[qt]){Je=[];var Ft=[];for(St=qt;St>=0;){Ft[St]=!0,Ge[St]=!0,ut[ut.length]=St,Je.push(le[St]);var Dt=pe[Math.floor(St*4/xe)];if(Zt=St*4&et,xe<4+Zt)throw new Error("FAT boundary crossed: "+St+" 4 "+xe);if(!le[Dt]||(St=Zl(le[Dt],Zt),Ft[St]))break}Ne[qt]={nodes:ut,data:C5([Je])}}return Ne}function O(le,ye,pe,xe,ke,Ne,Ge,ut){for(var Je=0,et=xe.length?2:0,at=ye[le].data,St=0,qt=0,Zt;St<at.length;St+=128){var Ft=at.slice(St,St+128);wn(Ft,64),qt=Ft.read_shift(2),Zt=xw(Ft,0,qt-et),xe.push(Zt);var Dt={name:Zt,type:Ft.read_shift(1),color:Ft.read_shift(1),L:Ft.read_shift(4,"i"),R:Ft.read_shift(4,"i"),C:Ft.read_shift(4,"i"),clsid:Ft.read_shift(16),state:Ft.read_shift(4,"i"),start:0,size:0},Sr=Ft.read_shift(2)+Ft.read_shift(2)+Ft.read_shift(2)+Ft.read_shift(2);Sr!==0&&(Dt.ct=te(Ft,Ft.l-8));var ia=Ft.read_shift(2)+Ft.read_shift(2)+Ft.read_shift(2)+Ft.read_shift(2);ia!==0&&(Dt.mt=te(Ft,Ft.l-8)),Dt.start=Ft.read_shift(4,"i"),Dt.size=Ft.read_shift(4,"i"),Dt.size<0&&Dt.start<0&&(Dt.size=Dt.type=0,Dt.start=ae,Dt.name=""),Dt.type===5?(Je=Dt.start,ke>0&&Je!==ae&&(ye[Je].name="!StreamData")):Dt.size>=4096?(Dt.storage="fat",ye[Dt.start]===void 0&&(ye[Dt.start]=B(pe,Dt.start,ye.fat_addrs,ye.ssz)),ye[Dt.start].name=Dt.name,Dt.content=ye[Dt.start].data.slice(0,Dt.size)):(Dt.storage="minifat",Dt.size<0?Dt.size=0:Je!==ae&&Dt.start!==ae&&ye[Je]&&(Dt.content=P(Dt,ye[Je].data,(ye[ut]||{}).data))),Dt.content&&wn(Dt.content,0),Ne[Zt]=Dt,Ge.push(Dt)}}function te(le,ye){return new Date((Nn(le,ye+4)/1e7*Math.pow(2,32)+Nn(le,ye)/1e7-11644473600)*1e3)}function ne(le,ye){return x(),g(m.readFileSync(le),ye)}function be(le,ye){var pe=ye&&ye.type;switch(pe||oa&&Buffer.isBuffer(le)&&(pe="buffer"),pe||"base64"){case"file":return ne(le,ye);case"base64":return g(di(No(le)),ye);case"binary":return g(di(le),ye)}return g(le,ye)}function H(le,ye){var pe=ye||{},xe=pe.root||"Root Entry";if(le.FullPaths||(le.FullPaths=[]),le.FileIndex||(le.FileIndex=[]),le.FullPaths.length!==le.FileIndex.length)throw new Error("inconsistent CFB structure");le.FullPaths.length===0&&(le.FullPaths[0]=xe+"/",le.FileIndex[0]={name:xe,type:5}),pe.CLSID&&(le.FileIndex[0].clsid=pe.CLSID),z(le)}function z(le){var ye="Sh33tJ5";if(!wa.find(le,"/"+ye)){var pe=xt(4);pe[0]=55,pe[1]=pe[3]=50,pe[2]=54,le.FileIndex.push({name:ye,type:2,content:pe,size:4,L:69,R:69,C:69}),le.FullPaths.push(le.FullPaths[0]+ye),F(le)}}function F(le,ye){H(le);for(var pe=!1,xe=!1,ke=le.FullPaths.length-1;ke>=0;--ke){var Ne=le.FileIndex[ke];switch(Ne.type){case 0:xe?pe=!0:(le.FileIndex.pop(),le.FullPaths.pop());break;case 1:case 2:case 5:xe=!0,isNaN(Ne.R*Ne.L*Ne.C)&&(pe=!0),Ne.R>-1&&Ne.L>-1&&Ne.R==Ne.L&&(pe=!0);break;default:pe=!0;break}}if(!(!pe&&!ye)){var Ge=new Date(1987,1,19),ut=0,Je=Object.create?Object.create(null):{},et=[];for(ke=0;ke<le.FullPaths.length;++ke)Je[le.FullPaths[ke]]=!0,le.FileIndex[ke].type!==0&&et.push([le.FullPaths[ke],le.FileIndex[ke]]);for(ke=0;ke<et.length;++ke){var at=n(et[ke][0]);xe=Je[at],xe||(et.push([at,{name:i(at).replace("/",""),type:1,clsid:ft,ct:Ge,mt:Ge,content:null}]),Je[at]=!0)}for(et.sort(function(Zt,Ft){return a(Zt[0],Ft[0])}),le.FullPaths=[],le.FileIndex=[],ke=0;ke<et.length;++ke)le.FullPaths[ke]=et[ke][0],le.FileIndex[ke]=et[ke][1];for(ke=0;ke<et.length;++ke){var St=le.FileIndex[ke],qt=le.FullPaths[ke];if(St.name=i(qt).replace("/",""),St.L=St.R=St.C=-(St.color=1),St.size=St.content?St.content.length:0,St.start=0,St.clsid=St.clsid||ft,ke===0)St.C=et.length>1?1:-1,St.size=0,St.type=5;else if(qt.slice(-1)=="/"){for(ut=ke+1;ut<et.length&&n(le.FullPaths[ut])!=qt;++ut);for(St.C=ut>=et.length?-1:ut,ut=ke+1;ut<et.length&&n(le.FullPaths[ut])!=n(qt);++ut);St.R=ut>=et.length?-1:ut,St.type=1}else n(le.FullPaths[ke+1]||"")==n(qt)&&(St.R=ke+1),St.type=2}}}function v(le,ye){var pe=ye||{};if(pe.fileType=="mad")return Pt(le,pe);switch(F(le),pe.fileType){case"zip":return Me(le,pe)}var xe=(function(Zt){for(var Ft=0,Dt=0,Sr=0;Sr<Zt.FileIndex.length;++Sr){var ia=Zt.FileIndex[Sr];if(ia.content){var aa=ia.content.length;aa>0&&(aa<4096?Ft+=aa+63>>6:Dt+=aa+511>>9)}}for(var ua=Zt.FullPaths.length+3>>2,Yn=Ft+7>>3,yi=Ft+127>>7,mn=Yn+Dt+ua+yi,Ua=mn+127>>7,_o=Ua<=109?0:Math.ceil((Ua-109)/127);mn+Ua+_o+127>>7>Ua;)_o=++Ua<=109?0:Math.ceil((Ua-109)/127);var Sa=[1,_o,Ua,yi,ua,Dt,Ft,0];return Zt.FileIndex[0].size=Ft<<6,Sa[7]=(Zt.FileIndex[0].start=Sa[0]+Sa[1]+Sa[2]+Sa[3]+Sa[4]+Sa[5])+(Sa[6]+7>>3),Sa})(le),ke=xt(xe[7]<<9),Ne=0,Ge=0;{for(Ne=0;Ne<8;++Ne)ke.write_shift(1,ct[Ne]);for(Ne=0;Ne<8;++Ne)ke.write_shift(2,0);for(ke.write_shift(2,62),ke.write_shift(2,3),ke.write_shift(2,65534),ke.write_shift(2,9),ke.write_shift(2,6),Ne=0;Ne<3;++Ne)ke.write_shift(2,0);for(ke.write_shift(4,0),ke.write_shift(4,xe[2]),ke.write_shift(4,xe[0]+xe[1]+xe[2]+xe[3]-1),ke.write_shift(4,0),ke.write_shift(4,4096),ke.write_shift(4,xe[3]?xe[0]+xe[1]+xe[2]-1:ae),ke.write_shift(4,xe[3]),ke.write_shift(-4,xe[1]?xe[0]-1:ae),ke.write_shift(4,xe[1]),Ne=0;Ne<109;++Ne)ke.write_shift(-4,Ne<xe[2]?xe[1]+Ne:-1)}if(xe[1])for(Ge=0;Ge<xe[1];++Ge){for(;Ne<236+Ge*127;++Ne)ke.write_shift(-4,Ne<xe[2]?xe[1]+Ne:-1);ke.write_shift(-4,Ge===xe[1]-1?ae:Ge+1)}var ut=function(Zt){for(Ge+=Zt;Ne<Ge-1;++Ne)ke.write_shift(-4,Ne+1);Zt&&(++Ne,ke.write_shift(-4,ae))};for(Ge=Ne=0,Ge+=xe[1];Ne<Ge;++Ne)ke.write_shift(-4,ot.DIFSECT);for(Ge+=xe[2];Ne<Ge;++Ne)ke.write_shift(-4,ot.FATSECT);ut(xe[3]),ut(xe[4]);for(var Je=0,et=0,at=le.FileIndex[0];Je<le.FileIndex.length;++Je)at=le.FileIndex[Je],at.content&&(et=at.content.length,!(et<4096)&&(at.start=Ge,ut(et+511>>9)));for(ut(xe[6]+7>>3);ke.l&511;)ke.write_shift(-4,ot.ENDOFCHAIN);for(Ge=Ne=0,Je=0;Je<le.FileIndex.length;++Je)at=le.FileIndex[Je],at.content&&(et=at.content.length,!(!et||et>=4096)&&(at.start=Ge,ut(et+63>>6)));for(;ke.l&511;)ke.write_shift(-4,ot.ENDOFCHAIN);for(Ne=0;Ne<xe[4]<<2;++Ne){var St=le.FullPaths[Ne];if(!St||St.length===0){for(Je=0;Je<17;++Je)ke.write_shift(4,0);for(Je=0;Je<3;++Je)ke.write_shift(4,-1);for(Je=0;Je<12;++Je)ke.write_shift(4,0);continue}at=le.FileIndex[Ne],Ne===0&&(at.start=at.size?at.start-1:ae);var qt=Ne===0&&pe.root||at.name;if(et=2*(qt.length+1),ke.write_shift(64,qt,"utf16le"),ke.write_shift(2,et),ke.write_shift(1,at.type),ke.write_shift(1,at.color),ke.write_shift(-4,at.L),ke.write_shift(-4,at.R),ke.write_shift(-4,at.C),at.clsid)ke.write_shift(16,at.clsid,"hex");else for(Je=0;Je<4;++Je)ke.write_shift(4,0);ke.write_shift(4,at.state||0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,at.start),ke.write_shift(4,at.size),ke.write_shift(4,0)}for(Ne=1;Ne<le.FileIndex.length;++Ne)if(at=le.FileIndex[Ne],at.size>=4096)if(ke.l=at.start+1<<9,oa&&Buffer.isBuffer(at.content))at.content.copy(ke,ke.l,0,at.size),ke.l+=at.size+511&-512;else{for(Je=0;Je<at.size;++Je)ke.write_shift(1,at.content[Je]);for(;Je&511;++Je)ke.write_shift(1,0)}for(Ne=1;Ne<le.FileIndex.length;++Ne)if(at=le.FileIndex[Ne],at.size>0&&at.size<4096)if(oa&&Buffer.isBuffer(at.content))at.content.copy(ke,ke.l,0,at.size),ke.l+=at.size+63&-64;else{for(Je=0;Je<at.size;++Je)ke.write_shift(1,at.content[Je]);for(;Je&63;++Je)ke.write_shift(1,0)}if(oa)ke.l=ke.length;else for(;ke.l<ke.length;)ke.write_shift(1,0);return ke}function ie(le,ye){var pe=le.FullPaths.map(function(Je){return Je.toUpperCase()}),xe=pe.map(function(Je){var et=Je.split("/");return et[et.length-(Je.slice(-1)=="/"?2:1)]}),ke=!1;ye.charCodeAt(0)===47?(ke=!0,ye=pe[0].slice(0,-1)+ye):ke=ye.indexOf("/")!==-1;var Ne=ye.toUpperCase(),Ge=ke===!0?pe.indexOf(Ne):xe.indexOf(Ne);if(Ge!==-1)return le.FileIndex[Ge];var ut=!Ne.match(Lm);for(Ne=Ne.replace(lu,""),ut&&(Ne=Ne.replace(Lm,"!")),Ge=0;Ge<pe.length;++Ge)if((ut?pe[Ge].replace(Lm,"!"):pe[Ge]).replace(lu,"")==Ne||(ut?xe[Ge].replace(Lm,"!"):xe[Ge]).replace(lu,"")==Ne)return le.FileIndex[Ge];return null}var X=64,ae=-2,We="d0cf11e0a1b11ae1",ct=[208,207,17,224,161,177,26,225],ft="00000000000000000000000000000000",ot={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:ae,FREESECT:-1,HEADER_SIGNATURE:We,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ft,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Ee(le,ye,pe){x();var xe=v(le,pe);m.writeFileSync(ye,xe)}function Ie(le){for(var ye=new Array(le.length),pe=0;pe<le.length;++pe)ye[pe]=String.fromCharCode(le[pe]);return ye.join("")}function _e(le,ye){var pe=v(le,ye);switch(ye&&ye.type||"buffer"){case"file":return x(),m.writeFileSync(ye.filename,pe),pe;case"binary":return typeof pe=="string"?pe:Ie(pe);case"base64":return Mu(typeof pe=="string"?pe:Ie(pe));case"buffer":if(oa)return Buffer.isBuffer(pe)?pe:Eo(pe);case"array":return typeof pe=="string"?di(pe):pe}return pe}var re;function J(le){try{var ye=le.InflateRaw,pe=new ye;if(pe._processChunk(new Uint8Array([3,0]),pe._finishFlushFlag),pe.bytesRead)re=le;else throw new Error("zlib does not expose bytesRead")}catch(xe){console.error("cannot use native zlib: "+(xe.message||xe))}}function de(le,ye){if(!re)return C(le,ye);var pe=re.InflateRaw,xe=new pe,ke=xe._processChunk(le.slice(le.l),xe._finishFlushFlag);return le.l+=xe.bytesRead,ke}function ce(le){return re?re.deflateRawSync(le):V(le)}var he=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Xe(le){var ye=(le<<1|le<<11)&139536|(le<<5|le<<15)&558144;return(ye>>16|ye>>8|ye)&255}for(var qe=typeof Uint8Array<"u",Ae=qe?new Uint8Array(256):[],Oe=0;Oe<256;++Oe)Ae[Oe]=Xe(Oe);function kt(le,ye){var pe=Ae[le&255];return ye<=8?pe>>>8-ye:(pe=pe<<8|Ae[le>>8&255],ye<=16?pe>>>16-ye:(pe=pe<<8|Ae[le>>16&255],pe>>>24-ye))}function Lt(le,ye){var pe=ye&7,xe=ye>>>3;return(le[xe]|(pe<=6?0:le[xe+1]<<8))>>>pe&3}function jt(le,ye){var pe=ye&7,xe=ye>>>3;return(le[xe]|(pe<=5?0:le[xe+1]<<8))>>>pe&7}function Wt(le,ye){var pe=ye&7,xe=ye>>>3;return(le[xe]|(pe<=4?0:le[xe+1]<<8))>>>pe&15}function Tt(le,ye){var pe=ye&7,xe=ye>>>3;return(le[xe]|(pe<=3?0:le[xe+1]<<8))>>>pe&31}function tt(le,ye){var pe=ye&7,xe=ye>>>3;return(le[xe]|(pe<=1?0:le[xe+1]<<8))>>>pe&127}function yt(le,ye,pe){var xe=ye&7,ke=ye>>>3,Ne=(1<<pe)-1,Ge=le[ke]>>>xe;return pe<8-xe||(Ge|=le[ke+1]<<8-xe,pe<16-xe)||(Ge|=le[ke+2]<<16-xe,pe<24-xe)||(Ge|=le[ke+3]<<24-xe),Ge&Ne}function Ue(le,ye,pe){var xe=ye&7,ke=ye>>>3;return xe<=5?le[ke]|=(pe&7)<<xe:(le[ke]|=pe<<xe&255,le[ke+1]=(pe&7)>>8-xe),ye+3}function lt(le,ye,pe){var xe=ye&7,ke=ye>>>3;return pe=(pe&1)<<xe,le[ke]|=pe,ye+1}function Te(le,ye,pe){var xe=ye&7,ke=ye>>>3;return pe<<=xe,le[ke]|=pe&255,pe>>>=8,le[ke+1]=pe,ye+8}function Ze(le,ye,pe){var xe=ye&7,ke=ye>>>3;return pe<<=xe,le[ke]|=pe&255,pe>>>=8,le[ke+1]=pe&255,le[ke+2]=pe>>>8,ye+16}function st(le,ye){var pe=le.length,xe=2*pe>ye?2*pe:ye+5,ke=0;if(pe>=ye)return le;if(oa){var Ne=d5(xe);if(le.copy)le.copy(Ne);else for(;ke<le.length;++ke)Ne[ke]=le[ke];return Ne}else if(qe){var Ge=new Uint8Array(xe);if(Ge.set)Ge.set(le);else for(;ke<pe;++ke)Ge[ke]=le[ke];return Ge}return le.length=xe,le}function pt(le){for(var ye=new Array(le),pe=0;pe<le;++pe)ye[pe]=0;return ye}function $e(le,ye,pe){var xe=1,ke=0,Ne=0,Ge=0,ut=0,Je=le.length,et=qe?new Uint16Array(32):pt(32);for(Ne=0;Ne<32;++Ne)et[Ne]=0;for(Ne=Je;Ne<pe;++Ne)le[Ne]=0;Je=le.length;var at=qe?new Uint16Array(Je):pt(Je);for(Ne=0;Ne<Je;++Ne)et[ke=le[Ne]]++,xe<ke&&(xe=ke),at[Ne]=0;for(et[0]=0,Ne=1;Ne<=xe;++Ne)et[Ne+16]=ut=ut+et[Ne-1]<<1;for(Ne=0;Ne<Je;++Ne)ut=le[Ne],ut!=0&&(at[Ne]=et[ut+16]++);var St=0;for(Ne=0;Ne<Je;++Ne)if(St=le[Ne],St!=0)for(ut=kt(at[Ne],xe)>>xe-St,Ge=(1<<xe+4-St)-1;Ge>=0;--Ge)ye[ut|Ge<<St]=St&15|Ne<<4;return xe}var s=qe?new Uint16Array(512):pt(512),E=qe?new Uint16Array(32):pt(32);if(!qe){for(var y=0;y<512;++y)s[y]=0;for(y=0;y<32;++y)E[y]=0}(function(){for(var le=[],ye=0;ye<32;ye++)le.push(5);$e(le,E,32);var pe=[];for(ye=0;ye<=143;ye++)pe.push(8);for(;ye<=255;ye++)pe.push(9);for(;ye<=279;ye++)pe.push(7);for(;ye<=287;ye++)pe.push(8);$e(pe,s,288)})();var R=(function(){for(var ye=qe?new Uint8Array(32768):[],pe=0,xe=0;pe<l.length-1;++pe)for(;xe<l[pe+1];++xe)ye[xe]=pe;for(;xe<32768;++xe)ye[xe]=29;var ke=qe?new Uint8Array(259):[];for(pe=0,xe=0;pe<q.length-1;++pe)for(;xe<q[pe+1];++xe)ke[xe]=pe;function Ne(ut,Je){for(var et=0;et<ut.length;){var at=Math.min(65535,ut.length-et),St=et+at==ut.length;for(Je.write_shift(1,+St),Je.write_shift(2,at),Je.write_shift(2,~at&65535);at-- >0;)Je[Je.l++]=ut[et++]}return Je.l}function Ge(ut,Je){for(var et=0,at=0,St=qe?new Uint16Array(32768):[];at<ut.length;){var qt=Math.min(65535,ut.length-at);if(qt<10){for(et=Ue(Je,et,+(at+qt==ut.length)),et&7&&(et+=8-(et&7)),Je.l=et/8|0,Je.write_shift(2,qt),Je.write_shift(2,~qt&65535);qt-- >0;)Je[Je.l++]=ut[at++];et=Je.l*8;continue}et=Ue(Je,et,+(at+qt==ut.length)+2);for(var Zt=0;qt-- >0;){var Ft=ut[at];Zt=(Zt<<5^Ft)&32767;var Dt=-1,Sr=0;if((Dt=St[Zt])&&(Dt|=at&-32768,Dt>at&&(Dt-=32768),Dt<at))for(;ut[Dt+Sr]==ut[at+Sr]&&Sr<250;)++Sr;if(Sr>2){Ft=ke[Sr],Ft<=22?et=Te(Je,et,Ae[Ft+1]>>1)-1:(Te(Je,et,3),et+=5,Te(Je,et,Ae[Ft-23]>>5),et+=3);var ia=Ft<8?0:Ft-4>>2;ia>0&&(Ze(Je,et,Sr-q[Ft]),et+=ia),Ft=ye[at-Dt],et=Te(Je,et,Ae[Ft]>>3),et-=3;var aa=Ft<4?0:Ft-2>>1;aa>0&&(Ze(Je,et,at-Dt-l[Ft]),et+=aa);for(var ua=0;ua<Sr;++ua)St[Zt]=at&32767,Zt=(Zt<<5^ut[at])&32767,++at;qt-=Sr-1}else Ft<=143?Ft=Ft+48:et=lt(Je,et,1),et=Te(Je,et,Ae[Ft]),St[Zt]=at&32767,++at}et=Te(Je,et,0)-1}return Je.l=(et+7)/8|0,Je.l}return function(Je,et){return Je.length<8?Ne(Je,et):Ge(Je,et)}})();function V(le){var ye=xt(50+Math.floor(le.length*1.1)),pe=R(le,ye);return ye.slice(0,pe)}var ee=qe?new Uint16Array(32768):pt(32768),fe=qe?new Uint16Array(32768):pt(32768),ge=qe?new Uint16Array(128):pt(128),A=1,Y=1;function U(le,ye){var pe=Tt(le,ye)+257;ye+=5;var xe=Tt(le,ye)+1;ye+=5;var ke=Wt(le,ye)+4;ye+=4;for(var Ne=0,Ge=qe?new Uint8Array(19):pt(19),ut=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Je=1,et=qe?new Uint8Array(8):pt(8),at=qe?new Uint8Array(8):pt(8),St=Ge.length,qt=0;qt<ke;++qt)Ge[he[qt]]=Ne=jt(le,ye),Je<Ne&&(Je=Ne),et[Ne]++,ye+=3;var Zt=0;for(et[0]=0,qt=1;qt<=Je;++qt)at[qt]=Zt=Zt+et[qt-1]<<1;for(qt=0;qt<St;++qt)(Zt=Ge[qt])!=0&&(ut[qt]=at[Zt]++);var Ft=0;for(qt=0;qt<St;++qt)if(Ft=Ge[qt],Ft!=0){Zt=Ae[ut[qt]]>>8-Ft;for(var Dt=(1<<7-Ft)-1;Dt>=0;--Dt)ge[Zt|Dt<<Ft]=Ft&7|qt<<3}var Sr=[];for(Je=1;Sr.length<pe+xe;)switch(Zt=ge[tt(le,ye)],ye+=Zt&7,Zt>>>=3){case 16:for(Ne=3+Lt(le,ye),ye+=2,Zt=Sr[Sr.length-1];Ne-- >0;)Sr.push(Zt);break;case 17:for(Ne=3+jt(le,ye),ye+=3;Ne-- >0;)Sr.push(0);break;case 18:for(Ne=11+tt(le,ye),ye+=7;Ne-- >0;)Sr.push(0);break;default:Sr.push(Zt),Je<Zt&&(Je=Zt);break}var ia=Sr.slice(0,pe),aa=Sr.slice(pe);for(qt=pe;qt<286;++qt)ia[qt]=0;for(qt=xe;qt<30;++qt)aa[qt]=0;return A=$e(ia,ee,286),Y=$e(aa,fe,30),ye}function N(le,ye){if(le[0]==3&&!(le[1]&3))return[fc(ye),2];for(var pe=0,xe=0,ke=d5(ye||1<<18),Ne=0,Ge=ke.length>>>0,ut=0,Je=0;(xe&1)==0;){if(xe=jt(le,pe),pe+=3,xe>>>1)xe>>1==1?(ut=9,Je=5):(pe=U(le,pe),ut=A,Je=Y);else{pe&7&&(pe+=8-(pe&7));var et=le[pe>>>3]|le[(pe>>>3)+1]<<8;if(pe+=32,et>0)for(!ye&&Ge<Ne+et&&(ke=st(ke,Ne+et),Ge=ke.length);et-- >0;)ke[Ne++]=le[pe>>>3],pe+=8;continue}for(;;){!ye&&Ge<Ne+32767&&(ke=st(ke,Ne+32767),Ge=ke.length);var at=yt(le,pe,ut),St=xe>>>1==1?s[at]:ee[at];if(pe+=St&15,St>>>=4,(St>>>8&255)===0)ke[Ne++]=St;else{if(St==256)break;St-=257;var qt=St<8?0:St-4>>2;qt>5&&(qt=0);var Zt=Ne+q[St];qt>0&&(Zt+=yt(le,pe,qt),pe+=qt),at=yt(le,pe,Je),St=xe>>>1==1?E[at]:fe[at],pe+=St&15,St>>>=4;var Ft=St<4?0:St-2>>1,Dt=l[St];for(Ft>0&&(Dt+=yt(le,pe,Ft),pe+=Ft),!ye&&Ge<Zt&&(ke=st(ke,Zt+100),Ge=ke.length);Ne<Zt;)ke[Ne]=ke[Ne-Dt],++Ne}}}return ye?[ke,pe+7>>>3]:[ke.slice(0,Ne),pe+7>>>3]}function C(le,ye){var pe=le.slice(le.l||0),xe=N(pe,ye);return le.l+=xe[1],xe[0]}function K(le,ye){if(le)typeof console<"u"&&console.error(ye);else throw new Error(ye)}function we(le,ye){var pe=le;wn(pe,0);var xe=[],ke=[],Ne={FileIndex:xe,FullPaths:ke};H(Ne,{root:ye.root});for(var Ge=pe.length-4;(pe[Ge]!=80||pe[Ge+1]!=75||pe[Ge+2]!=5||pe[Ge+3]!=6)&&Ge>=0;)--Ge;pe.l=Ge+4,pe.l+=4;var ut=pe.read_shift(2);pe.l+=6;var Je=pe.read_shift(4);for(pe.l=Je,Ge=0;Ge<ut;++Ge){pe.l+=20;var et=pe.read_shift(4),at=pe.read_shift(4),St=pe.read_shift(2),qt=pe.read_shift(2),Zt=pe.read_shift(2);pe.l+=8;var Ft=pe.read_shift(4),Dt=u(pe.slice(pe.l+St,pe.l+St+qt));pe.l+=St+qt+Zt;var Sr=pe.l;pe.l=Ft+4,je(pe,et,at,Ne,Dt),pe.l=Sr}return Ne}function je(le,ye,pe,xe,ke){le.l+=2;var Ne=le.read_shift(2),Ge=le.read_shift(2),ut=o(le);if(Ne&8257)throw new Error("Unsupported ZIP encryption");for(var Je=le.read_shift(4),et=le.read_shift(4),at=le.read_shift(4),St=le.read_shift(2),qt=le.read_shift(2),Zt="",Ft=0;Ft<St;++Ft)Zt+=String.fromCharCode(le[le.l++]);if(qt){var Dt=u(le.slice(le.l,le.l+qt));(Dt[21589]||{}).mt&&(ut=Dt[21589].mt),((ke||{})[21589]||{}).mt&&(ut=ke[21589].mt)}le.l+=qt;var Sr=le.slice(le.l,le.l+et);switch(Ge){case 8:Sr=de(le,at);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ge)}var ia=!1;Ne&8&&(Je=le.read_shift(4),Je==134695760&&(Je=le.read_shift(4),ia=!0),et=le.read_shift(4),at=le.read_shift(4)),et!=ye&&K(ia,"Bad compressed size: "+ye+" != "+et),at!=pe&&K(ia,"Bad uncompressed size: "+pe+" != "+at),Rt(xe,Zt,Sr,{unsafe:!0,mt:ut})}function Me(le,ye){var pe=ye||{},xe=[],ke=[],Ne=xt(1),Ge=pe.compression?8:0,ut=0,Je=0,et=0,at=0,St=0,qt=le.FullPaths[0],Zt=qt,Ft=le.FileIndex[0],Dt=[],Sr=0;for(Je=1;Je<le.FullPaths.length;++Je)if(Zt=le.FullPaths[Je].slice(qt.length),Ft=le.FileIndex[Je],!(!Ft.size||!Ft.content||Zt=="Sh33tJ5")){var ia=at,aa=xt(Zt.length);for(et=0;et<Zt.length;++et)aa.write_shift(1,Zt.charCodeAt(et)&127);aa=aa.slice(0,aa.l),Dt[St]=MW.buf(Ft.content,0);var ua=Ft.content;Ge==8&&(ua=ce(ua)),Ne=xt(30),Ne.write_shift(4,67324752),Ne.write_shift(2,20),Ne.write_shift(2,ut),Ne.write_shift(2,Ge),Ft.mt?c(Ne,Ft.mt):Ne.write_shift(4,0),Ne.write_shift(-4,Dt[St]),Ne.write_shift(4,ua.length),Ne.write_shift(4,Ft.content.length),Ne.write_shift(2,aa.length),Ne.write_shift(2,0),at+=Ne.length,xe.push(Ne),at+=aa.length,xe.push(aa),at+=ua.length,xe.push(ua),Ne=xt(46),Ne.write_shift(4,33639248),Ne.write_shift(2,0),Ne.write_shift(2,20),Ne.write_shift(2,ut),Ne.write_shift(2,Ge),Ne.write_shift(4,0),Ne.write_shift(-4,Dt[St]),Ne.write_shift(4,ua.length),Ne.write_shift(4,Ft.content.length),Ne.write_shift(2,aa.length),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(4,0),Ne.write_shift(4,ia),Sr+=Ne.l,ke.push(Ne),Sr+=aa.length,ke.push(aa),++St}return Ne=xt(22),Ne.write_shift(4,101010256),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(2,St),Ne.write_shift(2,St),Ne.write_shift(4,Sr),Ne.write_shift(4,at),Ne.write_shift(2,0),Cs([Cs(xe),Cs(ke),Ne])}var Ye={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Be(le,ye){if(le.ctype)return le.ctype;var pe=le.name||"",xe=pe.match(/\.([^\.]+)$/);return xe&&Ye[xe[1]]||ye&&(xe=(pe=ye).match(/[\.\\]([^\.\\])+$/),xe&&Ye[xe[1]])?Ye[xe[1]]:"application/octet-stream"}function Se(le){for(var ye=Mu(le),pe=[],xe=0;xe<ye.length;xe+=76)pe.push(ye.slice(xe,xe+76));return pe.join(`\r
`)+`\r
`}function _t(le){var ye=le.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(et){var at=et.charCodeAt(0).toString(16).toUpperCase();return"="+(at.length==1?"0"+at:at)});ye=ye.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ye.charAt(0)==`
`&&(ye="=0D"+ye.slice(1)),ye=ye.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var pe=[],xe=ye.split(`\r
`),ke=0;ke<xe.length;++ke){var Ne=xe[ke];if(Ne.length==0){pe.push("");continue}for(var Ge=0;Ge<Ne.length;){var ut=76,Je=Ne.slice(Ge,Ge+ut);Je.charAt(ut-1)=="="?ut--:Je.charAt(ut-2)=="="?ut-=2:Je.charAt(ut-3)=="="&&(ut-=3),Je=Ne.slice(Ge,Ge+ut),Ge+=ut,Ge<Ne.length&&(Je+="="),pe.push(Je)}}return pe.join(`\r
`)}function At(le){for(var ye=[],pe=0;pe<le.length;++pe){for(var xe=le[pe];pe<=le.length&&xe.charAt(xe.length-1)=="=";)xe=xe.slice(0,xe.length-1)+le[++pe];ye.push(xe)}for(var ke=0;ke<ye.length;++ke)ye[ke]=ye[ke].replace(/[=][0-9A-Fa-f]{2}/g,function(Ne){return String.fromCharCode(parseInt(Ne.slice(1),16))});return di(ye.join(`\r
`))}function Le(le,ye,pe){for(var xe="",ke="",Ne="",Ge,ut=0;ut<10;++ut){var Je=ye[ut];if(!Je||Je.match(/^\s*$/))break;var et=Je.match(/^(.*?):\s*([^\s].*)$/);if(et)switch(et[1].toLowerCase()){case"content-location":xe=et[2].trim();break;case"content-type":Ne=et[2].trim();break;case"content-transfer-encoding":ke=et[2].trim();break}}switch(++ut,ke.toLowerCase()){case"base64":Ge=di(No(ye.slice(ut).join("")));break;case"quoted-printable":Ge=At(ye.slice(ut));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ke)}var at=Rt(le,xe.slice(pe.length),Ge,{unsafe:!0});Ne&&(at.ctype=Ne)}function He(le,ye){if(Ie(le.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var pe=ye&&ye.root||"",xe=(oa&&Buffer.isBuffer(le)?le.toString("binary"):Ie(le)).split(`\r
`),ke=0,Ne="";for(ke=0;ke<xe.length;++ke)if(Ne=xe[ke],!!/^Content-Location:/i.test(Ne)&&(Ne=Ne.slice(Ne.indexOf("file")),pe||(pe=Ne.slice(0,Ne.lastIndexOf("/")+1)),Ne.slice(0,pe.length)!=pe))for(;pe.length>0&&(pe=pe.slice(0,pe.length-1),pe=pe.slice(0,pe.lastIndexOf("/")+1),Ne.slice(0,pe.length)!=pe););var Ge=(xe[1]||"").match(/boundary="(.*?)"/);if(!Ge)throw new Error("MAD cannot find boundary");var ut="--"+(Ge[1]||""),Je=[],et=[],at={FileIndex:Je,FullPaths:et};H(at);var St,qt=0;for(ke=0;ke<xe.length;++ke){var Zt=xe[ke];Zt!==ut&&Zt!==ut+"--"||(qt++&&Le(at,xe.slice(St,ke),pe),St=ke)}return at}function Pt(le,ye){var pe=ye||{},xe=pe.boundary||"SheetJS";xe="------="+xe;for(var ke=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+xe.slice(2)+'"',"","",""],Ne=le.FullPaths[0],Ge=Ne,ut=le.FileIndex[0],Je=1;Je<le.FullPaths.length;++Je)if(Ge=le.FullPaths[Je].slice(Ne.length),ut=le.FileIndex[Je],!(!ut.size||!ut.content||Ge=="Sh33tJ5")){Ge=Ge.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Sr){return"_x"+Sr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Sr){return"_u"+Sr.charCodeAt(0).toString(16)+"_"});for(var et=ut.content,at=oa&&Buffer.isBuffer(et)?et.toString("binary"):Ie(et),St=0,qt=Math.min(1024,at.length),Zt=0,Ft=0;Ft<=qt;++Ft)(Zt=at.charCodeAt(Ft))>=32&&Zt<128&&++St;var Dt=St>=qt*4/5;ke.push(xe),ke.push("Content-Location: "+(pe.root||"file:///C:/SheetJS/")+Ge),ke.push("Content-Transfer-Encoding: "+(Dt?"quoted-printable":"base64")),ke.push("Content-Type: "+Be(ut,Ge)),ke.push(""),ke.push(Dt?_t(at):Se(at))}return ke.push(xe+`--\r
`),ke.join(`\r
`)}function gt(le){var ye={};return H(ye,le),ye}function Rt(le,ye,pe,xe){var ke=xe&&xe.unsafe;ke||H(le);var Ne=!ke&&wa.find(le,ye);if(!Ne){var Ge=le.FullPaths[0];ye.slice(0,Ge.length)==Ge?Ge=ye:(Ge.slice(-1)!="/"&&(Ge+="/"),Ge=(Ge+ye).replace("//","/")),Ne={name:i(ye),type:2},le.FileIndex.push(Ne),le.FullPaths.push(Ge),ke||wa.utils.cfb_gc(le)}return Ne.content=pe,Ne.size=pe?pe.length:0,xe&&(xe.CLSID&&(Ne.clsid=xe.CLSID),xe.mt&&(Ne.mt=xe.mt),xe.ct&&(Ne.ct=xe.ct)),Ne}function Nt(le,ye){H(le);var pe=wa.find(le,ye);if(pe){for(var xe=0;xe<le.FileIndex.length;++xe)if(le.FileIndex[xe]==pe)return le.FileIndex.splice(xe,1),le.FullPaths.splice(xe,1),!0}return!1}function Ht(le,ye,pe){H(le);var xe=wa.find(le,ye);if(xe){for(var ke=0;ke<le.FileIndex.length;++ke)if(le.FileIndex[ke]==xe)return le.FileIndex[ke].name=i(pe),le.FullPaths[ke]=pe,!0}return!1}function It(le){F(le,!0)}return t.find=ie,t.read=be,t.parse=g,t.write=_e,t.writeFile=Ee,t.utils={cfb_new:gt,cfb_add:Rt,cfb_del:Nt,cfb_mov:Ht,cfb_gc:It,ReadShift:du,CheckField:VS,prep_blob:wn,bconcat:Cs,use_zlib:J,_deflateRaw:V,_inflateRaw:C,consts:ot},t})();function FW(r){return typeof r=="string"?Bx(r):Array.isArray(r)?cW(r):r}function hh(r,t,a){if(typeof Deno<"u"){if(a&&typeof t=="string")switch(a){case"utf8":t=new TextEncoder(a).encode(t);break;case"binary":t=Bx(t);break;default:throw new Error("Unsupported encoding "+a)}return Deno.writeFileSync(r,t)}var n=a=="utf8"?Ou(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,r);if(typeof Blob<"u"){var i=new Blob([FW(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,r);if(typeof saveAs<"u")return saveAs(i,r);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var c=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),chrome.downloads.download({url:c,filename:r,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=r,o.href=c,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),c}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var u=File(r);return u.open("w"),u.encoding="binary",Array.isArray(t)&&(t=uh(t)),u.write(t),u.close(),t}catch(m){if(!m.message||!m.message.match(/onstruct/))throw m}throw new Error("cannot save file "+r)}function Ps(r){for(var t=Object.keys(r),a=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(r,t[n])&&a.push(t[n]);return a}function b5(r,t){for(var a=[],n=Ps(r),i=0;i!==n.length;++i)a[r[n[i]][t]]==null&&(a[r[n[i]][t]]=n[i]);return a}function uw(r){for(var t=[],a=Ps(r),n=0;n!==a.length;++n)t[r[a[n]]]=a[n];return t}function Ux(r){for(var t=[],a=Ps(r),n=0;n!==a.length;++n)t[r[a[n]]]=parseInt(a[n],10);return t}function OW(r){for(var t=[],a=Ps(r),n=0;n!==a.length;++n)t[r[a[n]]]==null&&(t[r[a[n]]]=[]),t[r[a[n]]].push(a[n]);return t}var Qp=new Date(1899,11,30,0,0,0);function un(r,t){var a=r.getTime(),n=Qp.getTime()+(r.getTimezoneOffset()-Qp.getTimezoneOffset())*6e4;return(a-n)/(1440*60*1e3)}var CS=new Date,LW=Qp.getTime()+(CS.getTimezoneOffset()-Qp.getTimezoneOffset())*6e4,y5=CS.getTimezoneOffset();function TS(r){var t=new Date;return t.setTime(r*24*60*60*1e3+LW),t.getTimezoneOffset()!==y5&&t.setTime(t.getTime()+(t.getTimezoneOffset()-y5)*6e4),t}var v5=new Date("2017-02-19T19:06:09.000Z"),SS=isNaN(v5.getFullYear())?new Date("2/19/17"):v5,BW=SS.getFullYear()==2017;function Qs(r,t){var a=new Date(r);if(BW)return t>0?a.setTime(a.getTime()+a.getTimezoneOffset()*60*1e3):t<0&&a.setTime(a.getTime()-a.getTimezoneOffset()*60*1e3),a;if(r instanceof Date)return r;if(SS.getFullYear()==1917&&!isNaN(a.getFullYear())){var n=a.getFullYear();return r.indexOf(""+n)>-1||a.setFullYear(a.getFullYear()+100),a}var i=r.match(/\d+/g)||["2017","2","19","0","0","0"],c=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return r.indexOf("Z")>-1&&(c=new Date(c.getTime()-c.getTimezoneOffset()*60*1e3)),c}function Hx(r,t){if(oa&&Buffer.isBuffer(r))return r.toString("binary");if(typeof TextDecoder<"u")try{var a={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(r)&&(r=new Uint8Array(r)),new TextDecoder("latin1").decode(r).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(c){return a[c]||c})}catch{}for(var n=[],i=0;i!=r.length;++i)n.push(String.fromCharCode(r[i]));return n.join("")}function hn(r){if(typeof JSON<"u"&&!Array.isArray(r))return JSON.parse(JSON.stringify(r));if(typeof r!="object"||r==null)return r;if(r instanceof Date)return new Date(r.getTime());var t={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=hn(r[a]));return t}function za(r,t){for(var a="";a.length<t;)a+=r;return a}function po(r){var t=Number(r);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(r))return t;var a=1,n=r.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return a*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,c){return a=-a,c}),!isNaN(t=Number(n)))?t/a:t}var zW=["january","february","march","april","may","june","july","august","september","october","november","december"];function Fu(r){var t=new Date(r),a=new Date(NaN),n=t.getYear(),i=t.getMonth(),c=t.getDate();if(isNaN(c))return a;var o=r.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&zW.indexOf(o)==-1)return a}else if(o.match(/[a-z]/))return a;return n<0||n>8099?a:(i>0||c>1)&&n!=101?t:r.match(/[^-0-9:,\/\\]/)?a:t}function Ir(r,t,a){if(r.FullPaths){if(typeof a=="string"){var n;return oa?n=Eo(a):n=dW(a),wa.utils.cfb_add(r,t,n)}wa.utils.cfb_add(r,t,a)}else r.file(t,a)}function hw(){return wa.utils.cfb_new()}var es=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,VW={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},mw=uw(VW),pw=/[&<>'"]/g,UW=/[\u0000-\u0008\u000b-\u001f]/g;function xa(r){var t=r+"";return t.replace(pw,function(a){return mw[a]}).replace(UW,function(a){return"_x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+"_"})}function w5(r){return xa(r).replace(/ /g,"_x0020_")}var ES=/[\u0000-\u001f]/g;function HW(r){var t=r+"";return t.replace(pw,function(a){return mw[a]}).replace(/\n/g,"<br/>").replace(ES,function(a){return"&#x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+";"})}function qW(r){var t=r+"";return t.replace(pw,function(a){return mw[a]}).replace(ES,function(a){return"&#x"+a.charCodeAt(0).toString(16).toUpperCase()+";"})}function WW(r){return r.replace(/(\r\n|[\r\n])/g,"&#10;")}function GW(r){switch(r){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function sb(r){for(var t="",a=0,n=0,i=0,c=0,o=0,u=0;a<r.length;){if(n=r.charCodeAt(a++),n<128){t+=String.fromCharCode(n);continue}if(i=r.charCodeAt(a++),n>191&&n<224){o=(n&31)<<6,o|=i&63,t+=String.fromCharCode(o);continue}if(c=r.charCodeAt(a++),n<240){t+=String.fromCharCode((n&15)<<12|(i&63)<<6|c&63);continue}o=r.charCodeAt(a++),u=((n&7)<<18|(i&63)<<12|(c&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(u>>>10&1023)),t+=String.fromCharCode(56320+(u&1023))}return t}function k5(r){var t=fc(2*r.length),a,n,i=1,c=0,o=0,u;for(n=0;n<r.length;n+=i)i=1,(u=r.charCodeAt(n))<128?a=u:u<224?(a=(u&31)*64+(r.charCodeAt(n+1)&63),i=2):u<240?(a=(u&15)*4096+(r.charCodeAt(n+1)&63)*64+(r.charCodeAt(n+2)&63),i=3):(i=4,a=(u&7)*262144+(r.charCodeAt(n+1)&63)*4096+(r.charCodeAt(n+2)&63)*64+(r.charCodeAt(n+3)&63),a-=65536,o=55296+(a>>>10&1023),a=56320+(a&1023)),o!==0&&(t[c++]=o&255,t[c++]=o>>>8,o=0),t[c++]=a%256,t[c++]=a>>>8;return t.slice(0,c).toString("ucs2")}function N5(r){return Eo(r,"binary").toString("utf8")}var zm="foo bar bazâð£",cu=oa&&(N5(zm)==sb(zm)&&N5||k5(zm)==sb(zm)&&k5)||sb,Ou=oa?function(r){return Eo(r,"utf8").toString("binary")}:function(r){for(var t=[],a=0,n=0,i=0;a<r.length;)switch(n=r.charCodeAt(a++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=r.charCodeAt(a++)-56320+(n<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(i&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},KW=(function(){var r=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(a){for(var n=a.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<r.length;++i)n=n.replace(r[i][0],r[i][1]);return n}})(),_S=/(^\s|\s$|\n)/;function Ts(r,t){return"<"+r+(t.match(_S)?' xml:space="preserve"':"")+">"+t+"</"+r+">"}function Lu(r){return Ps(r).map(function(t){return" "+t+'="'+r[t]+'"'}).join("")}function Gt(r,t,a){return"<"+r+(a!=null?Lu(a):"")+(t!=null?(t.match(_S)?' xml:space="preserve"':"")+">"+t+"</"+r:"/")+">"}function ly(r,t){try{return r.toISOString().replace(/\.\d*/,"")}catch(a){if(t)throw a}return""}function YW(r,t){switch(typeof r){case"string":var a=Gt("vt:lpwstr",xa(r));return a=a.replace(/&quot;/g,"_x0022_"),a;case"number":return Gt((r|0)==r?"vt:i4":"vt:r8",xa(String(r)));case"boolean":return Gt("vt:bool",r?"true":"false")}if(r instanceof Date)return Gt("vt:filetime",ly(r));throw new Error("Unable to serialize "+r)}var hs={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},t0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],kn={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function QW(r,t){for(var a=1-2*(r[t+7]>>>7),n=((r[t+7]&127)<<4)+(r[t+6]>>>4&15),i=r[t+6]&15,c=5;c>=0;--c)i=i*256+r[t+c];return n==2047?i==0?a*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),a*Math.pow(2,n-52)*i)}function XW(r,t,a){var n=(t<0||1/t==-1/0?1:0)<<7,i=0,c=0,o=n?-t:t;isFinite(o)?o==0?i=c=0:(i=Math.floor(Math.log(o)/Math.LN2),c=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(c)||c<Math.pow(2,52))?i=-1022:(c-=Math.pow(2,52),i+=1023)):(i=2047,c=isNaN(t)?26985:0);for(var u=0;u<=5;++u,c/=256)r[a+u]=c&255;r[a+6]=(i&15)<<4|c&15,r[a+7]=i>>4|n}var j5=function(r){for(var t=[],a=10240,n=0;n<r[0].length;++n)if(r[0][n])for(var i=0,c=r[0][n].length;i<c;i+=a)t.push.apply(t,r[0][n].slice(i,i+a));return t},C5=oa?function(r){return r[0].length>0&&Buffer.isBuffer(r[0][0])?Buffer.concat(r[0].map(function(t){return Buffer.isBuffer(t)?t:Eo(t)})):j5(r)}:j5,T5=function(r,t,a){for(var n=[],i=t;i<a;i+=2)n.push(String.fromCharCode(Y0(r,i)));return n.join("").replace(lu,"")},xw=oa?function(r,t,a){return Buffer.isBuffer(r)?r.toString("utf16le",t,a).replace(lu,""):T5(r,t,a)}:T5,S5=function(r,t,a){for(var n=[],i=t;i<t+a;++i)n.push(("0"+r[i].toString(16)).slice(-2));return n.join("")},PS=oa?function(r,t,a){return Buffer.isBuffer(r)?r.toString("hex",t,t+a):S5(r,t,a)}:S5,E5=function(r,t,a){for(var n=[],i=t;i<a;i++)n.push(String.fromCharCode(gd(r,i)));return n.join("")},mh=oa?function(t,a,n){return Buffer.isBuffer(t)?t.toString("utf8",a,n):E5(t,a,n)}:E5,IS=function(r,t){var a=Nn(r,t);return a>0?mh(r,t+4,t+4+a-1):""},$S=IS,DS=function(r,t){var a=Nn(r,t);return a>0?mh(r,t+4,t+4+a-1):""},AS=DS,RS=function(r,t){var a=2*Nn(r,t);return a>0?mh(r,t+4,t+4+a-1):""},MS=RS,FS=function(t,a){var n=Nn(t,a);return n>0?xw(t,a+4,a+4+n):""},OS=FS,LS=function(r,t){var a=Nn(r,t);return a>0?mh(r,t+4,t+4+a):""},BS=LS,zS=function(r,t){return QW(r,t)},Xp=zS,gw=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};oa&&($S=function(t,a){if(!Buffer.isBuffer(t))return IS(t,a);var n=t.readUInt32LE(a);return n>0?t.toString("utf8",a+4,a+4+n-1):""},AS=function(t,a){if(!Buffer.isBuffer(t))return DS(t,a);var n=t.readUInt32LE(a);return n>0?t.toString("utf8",a+4,a+4+n-1):""},MS=function(t,a){if(!Buffer.isBuffer(t))return RS(t,a);var n=2*t.readUInt32LE(a);return t.toString("utf16le",a+4,a+4+n-1)},OS=function(t,a){if(!Buffer.isBuffer(t))return FS(t,a);var n=t.readUInt32LE(a);return t.toString("utf16le",a+4,a+4+n)},BS=function(t,a){if(!Buffer.isBuffer(t))return LS(t,a);var n=t.readUInt32LE(a);return t.toString("utf8",a+4,a+4+n)},Xp=function(t,a){return Buffer.isBuffer(t)?t.readDoubleLE(a):zS(t,a)},gw=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var gd=function(r,t){return r[t]},Y0=function(r,t){return r[t+1]*256+r[t]},JW=function(r,t){var a=r[t+1]*256+r[t];return a<32768?a:(65535-a+1)*-1},Nn=function(r,t){return r[t+3]*(1<<24)+(r[t+2]<<16)+(r[t+1]<<8)+r[t]},Zl=function(r,t){return r[t+3]<<24|r[t+2]<<16|r[t+1]<<8|r[t]},ZW=function(r,t){return r[t]<<24|r[t+1]<<16|r[t+2]<<8|r[t+3]};function du(r,t){var a="",n,i,c=[],o,u,m,x;switch(t){case"dbcs":if(x=this.l,oa&&Buffer.isBuffer(this))a=this.slice(this.l,this.l+2*r).toString("utf16le");else for(m=0;m<r;++m)a+=String.fromCharCode(Y0(this,x)),x+=2;r*=2;break;case"utf8":a=mh(this,this.l,this.l+r);break;case"utf16le":r*=2,a=xw(this,this.l,this.l+r);break;case"wstr":return du.call(this,r,"dbcs");case"lpstr-ansi":a=$S(this,this.l),r=4+Nn(this,this.l);break;case"lpstr-cp":a=AS(this,this.l),r=4+Nn(this,this.l);break;case"lpwstr":a=MS(this,this.l),r=4+2*Nn(this,this.l);break;case"lpp4":r=4+Nn(this,this.l),a=OS(this,this.l),r&2&&(r+=2);break;case"8lpp4":r=4+Nn(this,this.l),a=BS(this,this.l),r&3&&(r+=4-(r&3));break;case"cstr":for(r=0,a="";(o=gd(this,this.l+r++))!==0;)c.push(Om(o));a=c.join("");break;case"_wstr":for(r=0,a="";(o=Y0(this,this.l+r))!==0;)c.push(Om(o)),r+=2;r+=2,a=c.join("");break;case"dbcs-cont":for(a="",x=this.l,m=0;m<r;++m){if(this.lens&&this.lens.indexOf(x)!==-1)return o=gd(this,x),this.l=x+1,u=du.call(this,r-m,o?"dbcs-cont":"sbcs-cont"),c.join("")+u;c.push(Om(Y0(this,x))),x+=2}a=c.join(""),r*=2;break;case"cpstr":case"sbcs-cont":for(a="",x=this.l,m=0;m!=r;++m){if(this.lens&&this.lens.indexOf(x)!==-1)return o=gd(this,x),this.l=x+1,u=du.call(this,r-m,o?"dbcs-cont":"sbcs-cont"),c.join("")+u;c.push(Om(gd(this,x))),x+=1}a=c.join("");break;default:switch(r){case 1:return n=gd(this,this.l),this.l++,n;case 2:return n=(t==="i"?JW:Y0)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(r>0?Zl:ZW)(this,this.l),this.l+=4,n):(i=Nn(this,this.l),this.l+=4,i);case 8:case-8:if(t==="f")return r==8?i=Xp(this,this.l):i=Xp([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;r=8;case 16:a=PS(this,this.l,r);break}}return this.l+=r,a}var eG=function(r,t,a){r[a]=t&255,r[a+1]=t>>>8&255,r[a+2]=t>>>16&255,r[a+3]=t>>>24&255},tG=function(r,t,a){r[a]=t&255,r[a+1]=t>>8&255,r[a+2]=t>>16&255,r[a+3]=t>>24&255},rG=function(r,t,a){r[a]=t&255,r[a+1]=t>>>8&255};function aG(r,t,a){var n=0,i=0;if(a==="dbcs"){for(i=0;i!=t.length;++i)rG(this,t.charCodeAt(i),this.l+2*i);n=2*t.length}else if(a==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=t.charCodeAt(i)&255;n=t.length}else if(a==="hex"){for(;i<r;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}else if(a==="utf16le"){var c=Math.min(this.l+r,this.length);for(i=0;i<Math.min(t.length,r);++i){var o=t.charCodeAt(i);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<c;)this[this.l++]=0;return this}else switch(r){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,eG(this,t,this.l);break;case 8:if(n=8,a==="f"){XW(this,t,this.l);break}case 16:break;case-4:n=4,tG(this,t,this.l);break}return this.l+=n,this}function VS(r,t){var a=PS(this,this.l,r.length>>1);if(a!==r)throw new Error(t+"Expected "+r+" saw "+a);this.l+=r.length>>1}function wn(r,t){r.l=t,r.read_shift=du,r.chk=VS,r.write_shift=aG}function Ui(r,t){r.l+=t}function xt(r){var t=fc(r);return wn(t,0),t}function dn(){var r=[],t=oa?256:2048,a=function(x){var g=xt(x);return wn(g,0),g},n=a(t),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&r.push(n),n=null)},c=function(x){return n&&x<n.length-n.l?n:(i(),n=a(Math.max(x+1,t)))},o=function(){return i(),Cs(r)},u=function(x){i(),n=x,n.l==null&&(n.l=n.length),c(t)};return{next:c,push:u,end:o,_bufs:r}}function Ct(r,t,a,n){var i=+t,c;if(!isNaN(i)){n||(n=QJ[i].p||(a||[]).length||0),c=1+(i>=128?1:0)+1,n>=128&&++c,n>=16384&&++c,n>=2097152&&++c;var o=r.next(c);i<=127?o.write_shift(1,i):(o.write_shift(1,(i&127)+128),o.write_shift(1,i>>7));for(var u=0;u!=4;++u)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&gw(a)&&r.push(a)}}function uu(r,t,a){var n=hn(r);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!a||a.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function _5(r,t,a){var n=hn(r);return n.s=uu(n.s,t.s,a),n.e=uu(n.e,t.s,a),n}function hu(r,t){if(r.cRel&&r.c<0)for(r=hn(r);r.c<0;)r.c+=t>8?16384:256;if(r.rRel&&r.r<0)for(r=hn(r);r.r<0;)r.r+=t>8?1048576:t>5?65536:16384;var a=ga(r);return!r.cRel&&r.cRel!=null&&(a=iG(a)),!r.rRel&&r.rRel!=null&&(a=sG(a)),a}function nb(r,t){return r.s.r==0&&!r.s.rRel&&r.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!r.e.rRel?(r.s.cRel?"":"$")+Ls(r.s.c)+":"+(r.e.cRel?"":"$")+Ls(r.e.c):r.s.c==0&&!r.s.cRel&&r.e.c==(t.biff>=12?16383:255)&&!r.e.cRel?(r.s.rRel?"":"$")+Es(r.s.r)+":"+(r.e.rRel?"":"$")+Es(r.e.r):hu(r.s,t.biff)+":"+hu(r.e,t.biff)}function fw(r){return parseInt(nG(r),10)-1}function Es(r){return""+(r+1)}function sG(r){return r.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function nG(r){return r.replace(/\$(\d+)$/,"$1")}function bw(r){for(var t=oG(r),a=0,n=0;n!==t.length;++n)a=26*a+t.charCodeAt(n)-64;return a-1}function Ls(r){if(r<0)throw new Error("invalid column "+r);var t="";for(++r;r;r=Math.floor((r-1)/26))t=String.fromCharCode((r-1)%26+65)+t;return t}function iG(r){return r.replace(/^([A-Z])/,"$$$1")}function oG(r){return r.replace(/^\$([A-Z])/,"$1")}function lG(r){return r.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ms(r){for(var t=0,a=0,n=0;n<r.length;++n){var i=r.charCodeAt(n);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(a=26*a+(i-64))}return{c:a-1,r:t-1}}function ga(r){for(var t=r.c+1,a="";t;t=(t-1)/26|0)a=String.fromCharCode((t-1)%26+65)+a;return a+(r.r+1)}function In(r){var t=r.indexOf(":");return t==-1?{s:ms(r),e:ms(r)}:{s:ms(r.slice(0,t)),e:ms(r.slice(t+1))}}function Za(r,t){return typeof t>"u"||typeof t=="number"?Za(r.s,r.e):(typeof r!="string"&&(r=ga(r)),typeof t!="string"&&(t=ga(t)),r==t?r:r+":"+t)}function Pa(r){var t={s:{c:0,r:0},e:{c:0,r:0}},a=0,n=0,i=0,c=r.length;for(a=0;n<c&&!((i=r.charCodeAt(n)-64)<1||i>26);++n)a=26*a+i;for(t.s.c=--a,a=0;n<c&&!((i=r.charCodeAt(n)-48)<0||i>9);++n)a=10*a+i;if(t.s.r=--a,n===c||i!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,a=0;n!=c&&!((i=r.charCodeAt(n)-64)<1||i>26);++n)a=26*a+i;for(t.e.c=--a,a=0;n!=c&&!((i=r.charCodeAt(n)-48)<0||i>9);++n)a=10*a+i;return t.e.r=--a,t}function P5(r,t){var a=r.t=="d"&&t instanceof Date;if(r.z!=null)try{return r.w=Nl(r.z,a?un(t):t)}catch{}try{return r.w=Nl((r.XF||{}).numFmtId||(a?14:0),a?un(t):t)}catch{return""+t}}function jo(r,t,a){return r==null||r.t==null||r.t=="z"?"":r.w!==void 0?r.w:(r.t=="d"&&!r.z&&a&&a.dateNF&&(r.z=a.dateNF),r.t=="e"?ph[r.v]||r.v:t==null?P5(r,r.v):P5(r,t))}function Cc(r,t){var a=t&&t.sheet?t.sheet:"Sheet1",n={};return n[a]=r,{SheetNames:[a],Sheets:n}}function US(r,t,a){var n=a||{},i=r?Array.isArray(r):n.dense,c=r||(i?[]:{}),o=0,u=0;if(c&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var m=typeof n.origin=="string"?ms(n.origin):n.origin;o=m.r,u=m.c}c["!ref"]||(c["!ref"]="A1:A1")}var x={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(c["!ref"]){var g=Pa(c["!ref"]);x.s.c=g.s.c,x.s.r=g.s.r,x.e.c=Math.max(x.e.c,g.e.c),x.e.r=Math.max(x.e.r,g.e.r),o==-1&&(x.e.r=o=g.e.r+1)}for(var k=0;k!=t.length;++k)if(t[k]){if(!Array.isArray(t[k]))throw new Error("aoa_to_sheet expects an array of arrays");for(var S=0;S!=t[k].length;++S)if(!(typeof t[k][S]>"u")){var _={v:t[k][S]},I=o+k,P=u+S;if(x.s.r>I&&(x.s.r=I),x.s.c>P&&(x.s.c=P),x.e.r<I&&(x.e.r=I),x.e.c<P&&(x.e.c=P),t[k][S]&&typeof t[k][S]=="object"&&!Array.isArray(t[k][S])&&!(t[k][S]instanceof Date))_=t[k][S];else if(Array.isArray(_.v)&&(_.f=t[k][S][1],_.v=_.v[0]),_.v===null)if(_.f)_.t="n";else if(n.nullError)_.t="e",_.v=0;else if(n.sheetStubs)_.t="z";else continue;else typeof _.v=="number"?_.t="n":typeof _.v=="boolean"?_.t="b":_.v instanceof Date?(_.z=n.dateNF||Va[14],n.cellDates?(_.t="d",_.w=Nl(_.z,un(_.v))):(_.t="n",_.v=un(_.v),_.w=Nl(_.z,_.v))):_.t="s";if(i)c[I]||(c[I]=[]),c[I][P]&&c[I][P].z&&(_.z=c[I][P].z),c[I][P]=_;else{var b=ga({c:P,r:I});c[b]&&c[b].z&&(_.z=c[b].z),c[b]=_}}}return x.s.c<1e7&&(c["!ref"]=Za(x)),c}function r0(r,t){return US(null,r,t)}function cG(r){return r.read_shift(4,"i")}function pi(r,t){return t||(t=xt(4)),t.write_shift(4,r),t}function Bs(r){var t=r.read_shift(4);return t===0?"":r.read_shift(t,"dbcs")}function ps(r,t){var a=!1;return t==null&&(a=!0,t=xt(4+2*r.length)),t.write_shift(4,r.length),r.length>0&&t.write_shift(0,r,"dbcs"),a?t.slice(0,t.l):t}function dG(r){return{ich:r.read_shift(2),ifnt:r.read_shift(2)}}function uG(r,t){return t||(t=xt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function yw(r,t){var a=r.l,n=r.read_shift(1),i=Bs(r),c=[],o={t:i,h:i};if((n&1)!==0){for(var u=r.read_shift(4),m=0;m!=u;++m)c.push(dG(r));o.r=c}else o.r=[{ich:0,ifnt:0}];return r.l=a+t,o}function hG(r,t){var a=!1;return t==null&&(a=!0,t=xt(15+4*r.t.length)),t.write_shift(1,0),ps(r.t,t),a?t.slice(0,t.l):t}var mG=yw;function pG(r,t){var a=!1;return t==null&&(a=!0,t=xt(23+4*r.t.length)),t.write_shift(1,1),ps(r.t,t),t.write_shift(4,1),uG({},t),a?t.slice(0,t.l):t}function Kn(r){var t=r.read_shift(4),a=r.read_shift(2);return a+=r.read_shift(1)<<16,r.l++,{c:t,iStyleRef:a}}function Tc(r,t){return t==null&&(t=xt(8)),t.write_shift(-4,r.c),t.write_shift(3,r.iStyleRef||r.s),t.write_shift(1,0),t}function Sc(r){var t=r.read_shift(2);return t+=r.read_shift(1)<<16,r.l++,{c:-1,iStyleRef:t}}function Ec(r,t){return t==null&&(t=xt(4)),t.write_shift(3,r.iStyleRef||r.s),t.write_shift(1,0),t}var xG=Bs,HS=ps;function vw(r){var t=r.read_shift(4);return t===0||t===4294967295?"":r.read_shift(t,"dbcs")}function Jp(r,t){var a=!1;return t==null&&(a=!0,t=xt(127)),t.write_shift(4,r.length>0?r.length:4294967295),r.length>0&&t.write_shift(0,r,"dbcs"),a?t.slice(0,t.l):t}var gG=Bs,cy=vw,ww=Jp;function qS(r){var t=r.slice(r.l,r.l+4),a=t[0]&1,n=t[0]&2;r.l+=4;var i=n===0?Xp([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Zl(t,0)>>2;return a?i/100:i}function WS(r,t){t==null&&(t=xt(4));var a=0,n=0,i=r*100;if(r==(r|0)&&r>=-536870912&&r<1<<29?n=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(n=1,a=1),n)t.write_shift(-4,((a?i:r)<<2)+(a+2));else throw new Error("unsupported RkNumber "+r)}function GS(r){var t={s:{},e:{}};return t.s.r=r.read_shift(4),t.e.r=r.read_shift(4),t.s.c=r.read_shift(4),t.e.c=r.read_shift(4),t}function fG(r,t){return t||(t=xt(16)),t.write_shift(4,r.s.r),t.write_shift(4,r.e.r),t.write_shift(4,r.s.c),t.write_shift(4,r.e.c),t}var _c=GS,a0=fG;function s0(r){if(r.length-r.l<8)throw"XLS Xnum Buffer underflow";return r.read_shift(8,"f")}function bc(r,t){return(t||xt(8)).write_shift(8,r,"f")}function bG(r){var t={},a=r.read_shift(1),n=a>>>1,i=r.read_shift(1),c=r.read_shift(2,"i"),o=r.read_shift(1),u=r.read_shift(1),m=r.read_shift(1);switch(r.l++,n){case 0:t.auto=1;break;case 1:t.index=i;var x=SG[i];x&&(t.rgb=z5(x));break;case 2:t.rgb=z5([o,u,m]);break;case 3:t.theme=i;break}return c!=0&&(t.tint=c>0?c/32767:c/32768),t}function Zp(r,t){if(t||(t=xt(8)),!r||r.auto)return t.write_shift(4,0),t.write_shift(4,0),t;r.index!=null?(t.write_shift(1,2),t.write_shift(1,r.index)):r.theme!=null?(t.write_shift(1,6),t.write_shift(1,r.theme)):(t.write_shift(1,5),t.write_shift(1,0));var a=r.tint||0;if(a>0?a*=32767:a<0&&(a*=32768),t.write_shift(2,a),!r.rgb||r.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=r.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function yG(r){var t=r.read_shift(1);r.l++;var a={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return a}function vG(r,t){t||(t=xt(2));var a=(r.italic?2:0)|(r.strike?8:0)|(r.outline?16:0)|(r.shadow?32:0)|(r.condense?64:0)|(r.extend?128:0);return t.write_shift(1,a),t.write_shift(1,0),t}var KS=2,vn=3,Vm=11,ex=19,Um=64,wG=65,kG=71,NG=4108,jG=4126,ws=80,I5={1:{n:"CodePage",t:KS},2:{n:"Category",t:ws},3:{n:"PresentationFormat",t:ws},4:{n:"ByteCount",t:vn},5:{n:"LineCount",t:vn},6:{n:"ParagraphCount",t:vn},7:{n:"SlideCount",t:vn},8:{n:"NoteCount",t:vn},9:{n:"HiddenCount",t:vn},10:{n:"MultimediaClipCount",t:vn},11:{n:"ScaleCrop",t:Vm},12:{n:"HeadingPairs",t:NG},13:{n:"TitlesOfParts",t:jG},14:{n:"Manager",t:ws},15:{n:"Company",t:ws},16:{n:"LinksUpToDate",t:Vm},17:{n:"CharacterCount",t:vn},19:{n:"SharedDoc",t:Vm},22:{n:"HyperlinksChanged",t:Vm},23:{n:"AppVersion",t:vn,p:"version"},24:{n:"DigSig",t:wG},26:{n:"ContentType",t:ws},27:{n:"ContentStatus",t:ws},28:{n:"Language",t:ws},29:{n:"Version",t:ws},255:{},2147483648:{n:"Locale",t:ex},2147483651:{n:"Behavior",t:ex},1919054434:{}},$5={1:{n:"CodePage",t:KS},2:{n:"Title",t:ws},3:{n:"Subject",t:ws},4:{n:"Author",t:ws},5:{n:"Keywords",t:ws},6:{n:"Comments",t:ws},7:{n:"Template",t:ws},8:{n:"LastAuthor",t:ws},9:{n:"RevNumber",t:ws},10:{n:"EditTime",t:Um},11:{n:"LastPrinted",t:Um},12:{n:"CreatedDate",t:Um},13:{n:"ModifiedDate",t:Um},14:{n:"PageCount",t:vn},15:{n:"WordCount",t:vn},16:{n:"CharCount",t:vn},17:{n:"Thumbnail",t:kG},18:{n:"Application",t:ws},19:{n:"DocSecurity",t:vn},255:{},2147483648:{n:"Locale",t:ex},2147483651:{n:"Behavior",t:ex},1919054434:{}};function CG(r){return r.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var TG=CG([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),SG=hn(TG),ph={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},EG={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Hm={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function YS(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function QS(r,t){var a=OW(EG),n=[],i;n[n.length]=es,n[n.length]=Gt("Types",null,{xmlns:hs.CT,"xmlns:xsd":hs.xsd,"xmlns:xsi":hs.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(m){return Gt("Default",null,{Extension:m[0],ContentType:m[1]})}));var c=function(m){r[m]&&r[m].length>0&&(i=r[m][0],n[n.length]=Gt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:Hm[m][t.bookType]||Hm[m].xlsx}))},o=function(m){(r[m]||[]).forEach(function(x){n[n.length]=Gt("Override",null,{PartName:(x[0]=="/"?"":"/")+x,ContentType:Hm[m][t.bookType]||Hm[m].xlsx})})},u=function(m){(r[m]||[]).forEach(function(x){n[n.length]=Gt("Override",null,{PartName:(x[0]=="/"?"":"/")+x,ContentType:a[m][0]})})};return c("workbooks"),o("sheets"),o("charts"),u("themes"),["strs","styles"].forEach(c),["coreprops","extprops","custprops"].forEach(u),u("vba"),u("comments"),u("threadedcomments"),u("drawings"),o("metadata"),u("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var na={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function XS(r){var t=r.lastIndexOf("/");return r.slice(0,t+1)+"_rels/"+r.slice(t+1)+".rels"}function Pd(r){var t=[es,Gt("Relationships",null,{xmlns:hs.RELS})];return Ps(r["!id"]).forEach(function(a){t[t.length]=Gt("Relationship",null,r["!id"][a])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function pa(r,t,a,n,i,c){if(i||(i={}),r["!id"]||(r["!id"]={}),r["!idx"]||(r["!idx"]=1),t<0)for(t=r["!idx"];r["!id"]["rId"+t];++t);if(r["!idx"]=t+1,i.Id="rId"+t,i.Type=n,i.Target=a,[na.HLINK,na.XPATH,na.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),r["!id"][i.Id])throw new Error("Cannot rewrite rId "+t);return r["!id"][i.Id]=i,r[("/"+i.Target).replace("//","/")]=i,t}function _G(r){var t=[es];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var a=0;a<r.length;++a)t.push('  <manifest:file-entry manifest:full-path="'+r[a][0]+'" manifest:media-type="'+r[a][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function D5(r,t,a){return['  <rdf:Description rdf:about="'+r+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(a||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function PG(r,t){return['  <rdf:Description rdf:about="'+r+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function IG(r){var t=[es];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var a=0;a!=r.length;++a)t.push(D5(r[a][0],r[a][1])),t.push(PG("",r[a][0]));return t.push(D5("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function JS(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+qp.version+"</meta:generator></office:meta></office:document-meta>"}var oc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function ib(r,t,a,n,i){i[r]!=null||t==null||t===""||(i[r]=t,t=xa(t),n[n.length]=a?Gt(r,t,a):Ts(r,t))}function ZS(r,t){var a=t||{},n=[es,Gt("cp:coreProperties",null,{"xmlns:cp":hs.CORE_PROPS,"xmlns:dc":hs.dc,"xmlns:dcterms":hs.dcterms,"xmlns:dcmitype":hs.dcmitype,"xmlns:xsi":hs.xsi})],i={};if(!r&&!a.Props)return n.join("");r&&(r.CreatedDate!=null&&ib("dcterms:created",typeof r.CreatedDate=="string"?r.CreatedDate:ly(r.CreatedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),r.ModifiedDate!=null&&ib("dcterms:modified",typeof r.ModifiedDate=="string"?r.ModifiedDate:ly(r.ModifiedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var c=0;c!=oc.length;++c){var o=oc[c],u=a.Props&&a.Props[o[1]]!=null?a.Props[o[1]]:r?r[o[1]]:null;u===!0?u="1":u===!1?u="0":typeof u=="number"&&(u=String(u)),u!=null&&ib(o[0],u,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Id=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],eE=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function tE(r){var t=[],a=Gt;return r||(r={}),r.Application="SheetJS",t[t.length]=es,t[t.length]=Gt("Properties",null,{xmlns:hs.EXT_PROPS,"xmlns:vt":hs.vt}),Id.forEach(function(n){if(r[n[1]]!==void 0){var i;switch(n[2]){case"string":i=xa(String(r[n[1]]));break;case"bool":i=r[n[1]]?"true":"false";break}i!==void 0&&(t[t.length]=a(n[0],i))}}),t[t.length]=a("HeadingPairs",a("vt:vector",a("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+a("vt:variant",a("vt:i4",String(r.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=a("TitlesOfParts",a("vt:vector",r.SheetNames.map(function(n){return"<vt:lpstr>"+xa(n)+"</vt:lpstr>"}).join(""),{size:r.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function rE(r){var t=[es,Gt("Properties",null,{xmlns:hs.CUST_PROPS,"xmlns:vt":hs.vt})];if(!r)return t.join("");var a=1;return Ps(r).forEach(function(i){++a,t[t.length]=Gt("property",YW(r[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:a,name:xa(i)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var A5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function $G(r,t){var a=[];return Ps(A5).map(function(n){for(var i=0;i<oc.length;++i)if(oc[i][1]==n)return oc[i];for(i=0;i<Id.length;++i)if(Id[i][1]==n)return Id[i];throw n}).forEach(function(n){if(r[n[1]]!=null){var i=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:r[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),a.push(Ts(A5[n[1]]||n[1],i))}}),Gt("DocumentProperties",a.join(""),{xmlns:kn.o})}function DG(r,t){var a=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return r&&Ps(r).forEach(function(c){if(Object.prototype.hasOwnProperty.call(r,c)){for(var o=0;o<oc.length;++o)if(c==oc[o][1])return;for(o=0;o<Id.length;++o)if(c==Id[o][1])return;for(o=0;o<a.length;++o)if(c==a[o])return;var u=r[c],m="string";typeof u=="number"?(m="float",u=String(u)):u===!0||u===!1?(m="boolean",u=u?"1":"0"):u=String(u),i.push(Gt(w5(c),u,{"dt:dt":m}))}}),t&&Ps(t).forEach(function(c){if(Object.prototype.hasOwnProperty.call(t,c)&&!(r&&Object.prototype.hasOwnProperty.call(r,c))){var o=t[c],u="string";typeof o=="number"?(u="float",o=String(o)):o===!0||o===!1?(u="boolean",o=o?"1":"0"):o instanceof Date?(u="dateTime.tz",o=o.toISOString()):o=String(o),i.push(Gt(w5(c),o,{"dt:dt":u}))}}),"<"+n+' xmlns="'+kn.o+'">'+i.join("")+"</"+n+">"}function AG(r){var t=typeof r=="string"?new Date(Date.parse(r)):r,a=t.getTime()/1e3+11644473600,n=a%Math.pow(2,32),i=(a-n)/Math.pow(2,32);n*=1e7,i*=1e7;var c=n/Math.pow(2,32)|0;c>0&&(n=n%Math.pow(2,32),i+=c);var o=xt(8);return o.write_shift(4,n),o.write_shift(4,i),o}function R5(r,t){var a=xt(4),n=xt(4);switch(a.write_shift(4,r==80?31:r),r){case 3:n.write_shift(-4,t);break;case 5:n=xt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=AG(t);break;case 31:case 80:for(n=xt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+r+" "+t)}return Cs([a,n])}var aE=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function RG(r){switch(typeof r){case"boolean":return 11;case"number":return(r|0)==r?3:5;case"string":return 31;case"object":if(r instanceof Date)return 64;break}return-1}function M5(r,t,a){var n=xt(8),i=[],c=[],o=8,u=0,m=xt(8),x=xt(8);if(m.write_shift(4,2),m.write_shift(4,1200),x.write_shift(4,1),c.push(m),i.push(x),o+=8+m.length,!t){x=xt(8),x.write_shift(4,0),i.unshift(x);var g=[xt(4)];for(g[0].write_shift(4,r.length),u=0;u<r.length;++u){var k=r[u][0];for(m=xt(8+2*(k.length+1)+(k.length%2?0:2)),m.write_shift(4,u+2),m.write_shift(4,k.length+1),m.write_shift(0,k,"dbcs");m.l!=m.length;)m.write_shift(1,0);g.push(m)}m=Cs(g),c.unshift(m),o+=8+m.length}for(u=0;u<r.length;++u)if(!(t&&!t[r[u][0]])&&!(aE.indexOf(r[u][0])>-1||eE.indexOf(r[u][0])>-1)&&r[u][1]!=null){var S=r[u][1],_=0;if(t){_=+t[r[u][0]];var I=a[_];if(I.p=="version"&&typeof S=="string"){var P=S.split(".");S=(+P[0]<<16)+(+P[1]||0)}m=R5(I.t,S)}else{var b=RG(S);b==-1&&(b=31,S=String(S)),m=R5(b,S)}c.push(m),x=xt(8),x.write_shift(4,t?_:2+u),i.push(x),o+=8+m.length}var B=8*(c.length+1);for(u=0;u<c.length;++u)i[u].write_shift(4,B),B+=c[u].length;return n.write_shift(4,o),n.write_shift(4,c.length),Cs([n].concat(i).concat(c))}function F5(r,t,a,n,i,c){var o=xt(i?68:48),u=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,wa.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,i?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,i?68:48);var m=M5(r,a,n);if(u.push(m),i){var x=M5(i,null,null);o.write_shift(16,c,"hex"),o.write_shift(4,68+m.length),u.push(x)}return Cs(u)}function MG(r,t){t||(t=xt(r));for(var a=0;a<r;++a)t.write_shift(1,0);return t}function FG(r,t){return r.read_shift(t)===1}function Ws(r,t){return t||(t=xt(2)),t.write_shift(2,+!!r),t}function sE(r){return r.read_shift(2,"u")}function Un(r,t){return t||(t=xt(2)),t.write_shift(2,r),t}function nE(r,t,a){return a||(a=xt(2)),a.write_shift(1,t=="e"?+r:+!!r),a.write_shift(1,t=="e"?1:0),a}function iE(r,t,a){var n=r.read_shift(a&&a.biff>=12?2:1),i="sbcs-cont";if(a&&a.biff>=8,!a||a.biff==8){var c=r.read_shift(1);c&&(i="dbcs-cont")}else a.biff==12&&(i="wstr");a.biff>=2&&a.biff<=5&&(i="cpstr");var o=n?r.read_shift(n,i):"";return o}function OG(r){var t=r.t||"",a=xt(3);a.write_shift(2,t.length),a.write_shift(1,1);var n=xt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var i=[a,n];return Cs(i)}function LG(r,t,a){var n;if(a){if(a.biff>=2&&a.biff<=5)return r.read_shift(t,"cpstr");if(a.biff>=12)return r.read_shift(t,"dbcs-cont")}var i=r.read_shift(1);return i===0?n=r.read_shift(t,"sbcs-cont"):n=r.read_shift(t,"dbcs-cont"),n}function BG(r,t,a){var n=r.read_shift(a&&a.biff==2?1:2);return n===0?(r.l++,""):LG(r,n,a)}function zG(r,t,a){if(a.biff>5)return BG(r,t,a);var n=r.read_shift(1);return n===0?(r.l++,""):r.read_shift(n,a.biff<=4||!r.lens?"cpstr":"sbcs-cont")}function oE(r,t,a){return a||(a=xt(3+2*r.length)),a.write_shift(2,r.length),a.write_shift(1,1),a.write_shift(31,r,"utf16le"),a}function O5(r,t){t||(t=xt(6+r.length*2)),t.write_shift(4,1+r.length);for(var a=0;a<r.length;++a)t.write_shift(2,r.charCodeAt(a));return t.write_shift(2,0),t}function VG(r){var t=xt(512),a=0,n=r.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),c=i>-1?31:23;switch(n.charAt(0)){case"#":c=28;break;case".":c&=-3;break}t.write_shift(4,2),t.write_shift(4,c);var o=[8,6815827,6619237,4849780,83];for(a=0;a<o.length;++a)t.write_shift(4,o[a]);if(c==28)n=n.slice(1),O5(n,t);else if(c&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<o.length;++a)t.write_shift(1,parseInt(o[a],16));var u=i>-1?n.slice(0,i):n;for(t.write_shift(4,2*(u.length+1)),a=0;a<u.length;++a)t.write_shift(2,u.charCodeAt(a));t.write_shift(2,0),c&8&&O5(i>-1?n.slice(i+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),a=0;a<o.length;++a)t.write_shift(1,parseInt(o[a],16));for(var m=0;n.slice(m*3,m*3+3)=="../"||n.slice(m*3,m*3+3)=="..\\";)++m;for(t.write_shift(2,m),t.write_shift(4,n.length-3*m+1),a=0;a<n.length-3*m;++a)t.write_shift(1,n.charCodeAt(a+3*m)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),a=0;a<6;++a)t.write_shift(4,0)}return t.slice(0,t.l)}function yc(r,t,a,n){return n||(n=xt(6)),n.write_shift(2,r),n.write_shift(2,t),n.write_shift(2,a||0),n}function UG(r,t,a){var n=a.biff>8?4:2,i=r.read_shift(n),c=r.read_shift(n,"i"),o=r.read_shift(n,"i");return[i,c,o]}function HG(r){var t=r.read_shift(2),a=r.read_shift(2),n=r.read_shift(2),i=r.read_shift(2);return{s:{c:n,r:t},e:{c:i,r:a}}}function lE(r,t){return t||(t=xt(8)),t.write_shift(2,r.s.r),t.write_shift(2,r.e.r),t.write_shift(2,r.s.c),t.write_shift(2,r.e.c),t}function kw(r,t,a){var n=1536,i=16;switch(a.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var c=xt(i);return c.write_shift(2,n),c.write_shift(2,t),i>4&&c.write_shift(2,29282),i>6&&c.write_shift(2,1997),i>8&&(c.write_shift(2,49161),c.write_shift(2,1),c.write_shift(2,1798),c.write_shift(2,0)),c}function qG(r,t){var a=!t||t.biff==8,n=xt(a?112:54);for(n.write_shift(t.biff==8?2:1,7),a&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(a?0:536870912));n.l<n.length;)n.write_shift(1,a?0:32);return n}function WG(r,t){var a=!t||t.biff>=8?2:1,n=xt(8+a*r.name.length);n.write_shift(4,r.pos),n.write_shift(1,r.hs||0),n.write_shift(1,r.dt),n.write_shift(1,r.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(a*r.name.length,r.name,t.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function GG(r,t){var a=xt(8);a.write_shift(4,r.Count),a.write_shift(4,r.Unique);for(var n=[],i=0;i<r.length;++i)n[i]=OG(r[i]);var c=Cs([a].concat(n));return c.parts=[a.length].concat(n.map(function(o){return o.length})),c}function KG(){var r=xt(18);return r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,29280),r.write_shift(2,17600),r.write_shift(2,56),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,1),r.write_shift(2,500),r}function YG(r){var t=xt(18),a=1718;return r&&r.RTL&&(a|=64),t.write_shift(2,a),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function QG(r,t){var a=r.name||"Arial",n=t&&t.biff==5,i=n?15+a.length:16+2*a.length,c=xt(i);return c.write_shift(2,r.sz*20),c.write_shift(4,0),c.write_shift(2,400),c.write_shift(4,0),c.write_shift(2,0),c.write_shift(1,a.length),n||c.write_shift(1,1),c.write_shift((n?1:2)*a.length,a,n?"sbcs":"utf16le"),c}function XG(r,t,a,n){var i=xt(10);return yc(r,t,n,i),i.write_shift(4,a),i}function JG(r,t,a,n,i){var c=!i||i.biff==8,o=xt(8+ +c+(1+c)*a.length);return yc(r,t,n,o),o.write_shift(2,a.length),c&&o.write_shift(1,1),o.write_shift((1+c)*a.length,a,c?"utf16le":"sbcs"),o}function ZG(r,t,a,n){var i=a&&a.biff==5;n||(n=xt(i?3+t.length:5+2*t.length)),n.write_shift(2,r),n.write_shift(i?1:2,t.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*t.length,t,i?"sbcs":"utf16le");var c=n.length>n.l?n.slice(0,n.l):n;return c.l==null&&(c.l=c.length),c}function eK(r,t){var a=t.biff==8||!t.biff?4:2,n=xt(2*a+6);return n.write_shift(a,r.s.r),n.write_shift(a,r.e.r+1),n.write_shift(2,r.s.c),n.write_shift(2,r.e.c+1),n.write_shift(2,0),n}function L5(r,t,a,n){var i=a&&a.biff==5;n||(n=xt(i?16:20)),n.write_shift(2,0),r.style?(n.write_shift(2,r.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,r.numFmtId||0),n.write_shift(2,t<<4));var c=0;return r.numFmtId>0&&i&&(c|=1024),n.write_shift(4,c),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function tK(r){var t=xt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function rK(r,t,a,n,i,c){var o=xt(8);return yc(r,t,n,o),nE(a,c,o),o}function aK(r,t,a,n){var i=xt(14);return yc(r,t,n,i),bc(a,i),i}function sK(r,t,a){if(a.biff<8)return nK(r,t,a);for(var n=[],i=r.l+t,c=r.read_shift(a.biff>8?4:2);c--!==0;)n.push(UG(r,a.biff>8?12:6,a));if(r.l!=i)throw new Error("Bad ExternSheet: "+r.l+" != "+i);return n}function nK(r,t,a){r[r.l+1]==3&&r[r.l]++;var n=iE(r,t,a);return n.charCodeAt(0)==3?n.slice(1):n}function iK(r){var t=xt(2+r.length*8);t.write_shift(2,r.length);for(var a=0;a<r.length;++a)lE(r[a],t);return t}function oK(r){var t=xt(24),a=ms(r[0]);t.write_shift(2,a.r),t.write_shift(2,a.r),t.write_shift(2,a.c),t.write_shift(2,a.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)t.write_shift(1,parseInt(n[i],16));return Cs([t,VG(r[1])])}function lK(r){var t=r[1].Tooltip,a=xt(10+2*(t.length+1));a.write_shift(2,2048);var n=ms(r[0]);a.write_shift(2,n.r),a.write_shift(2,n.r),a.write_shift(2,n.c),a.write_shift(2,n.c);for(var i=0;i<t.length;++i)a.write_shift(2,t.charCodeAt(i));return a.write_shift(2,0),a}function cK(r){return r||(r=xt(4)),r.write_shift(2,1),r.write_shift(2,1),r}function dK(r,t,a){if(!a.cellStyles)return Ui(r,t);var n=a&&a.biff>=12?4:2,i=r.read_shift(n),c=r.read_shift(n),o=r.read_shift(n),u=r.read_shift(n),m=r.read_shift(2);n==2&&(r.l+=2);var x={s:i,e:c,w:o,ixfe:u,flags:m};return(a.biff>=5||!a.biff)&&(x.level=m>>8&7),x}function uK(r,t){var a=xt(12);a.write_shift(2,t),a.write_shift(2,t),a.write_shift(2,r.width*256),a.write_shift(2,0);var n=0;return r.hidden&&(n|=1),a.write_shift(1,n),n=r.level||0,a.write_shift(1,n),a.write_shift(2,0),a}function hK(r){for(var t=xt(2*r),a=0;a<r;++a)t.write_shift(2,a+1);return t}function mK(r,t,a){var n=xt(15);return gh(n,r,t),n.write_shift(8,a,"f"),n}function pK(r,t,a){var n=xt(9);return gh(n,r,t),n.write_shift(2,a),n}var xK=(function(){var r={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=uw({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function a(u,m){var x=[],g=fc(1);switch(m.type){case"base64":g=di(No(u));break;case"binary":g=di(u);break;case"buffer":case"array":g=u;break}wn(g,0);var k=g.read_shift(1),S=!!(k&136),_=!1,I=!1;switch(k){case 2:break;case 3:break;case 48:_=!0,S=!0;break;case 49:_=!0,S=!0;break;case 131:break;case 139:break;case 140:I=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+k.toString(16))}var P=0,b=521;k==2&&(P=g.read_shift(2)),g.l+=3,k!=2&&(P=g.read_shift(4)),P>1048576&&(P=1e6),k!=2&&(b=g.read_shift(2));var B=g.read_shift(2),L=m.codepage||1252;k!=2&&(g.l+=16,g.read_shift(1),g[g.l]!==0&&(L=r[g[g.l]]),g.l+=1,g.l+=2),I&&(g.l+=36);for(var O=[],te={},ne=Math.min(g.length,k==2?521:b-10-(_?264:0)),be=I?32:11;g.l<ne&&g[g.l]!=13;)switch(te={},te.name=Wp.utils.decode(L,g.slice(g.l,g.l+be)).replace(/[\u0000\r\n].*$/g,""),g.l+=be,te.type=String.fromCharCode(g.read_shift(1)),k!=2&&!I&&(te.offset=g.read_shift(4)),te.len=g.read_shift(1),k==2&&(te.offset=g.read_shift(2)),te.dec=g.read_shift(1),te.name.length&&O.push(te),k!=2&&(g.l+=I?13:14),te.type){case"B":(!_||te.len!=8)&&m.WTF&&console.log("Skipping "+te.name+":"+te.type);break;case"G":case"P":m.WTF&&console.log("Skipping "+te.name+":"+te.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+te.type)}if(g[g.l]!==13&&(g.l=b-1),g.read_shift(1)!==13)throw new Error("DBF Terminator not found "+g.l+" "+g[g.l]);g.l=b;var H=0,z=0;for(x[0]=[],z=0;z!=O.length;++z)x[0][z]=O[z].name;for(;P-- >0;){if(g[g.l]===42){g.l+=B;continue}for(++g.l,x[++H]=[],z=0,z=0;z!=O.length;++z){var F=g.slice(g.l,g.l+O[z].len);g.l+=O[z].len,wn(F,0);var v=Wp.utils.decode(L,F);switch(O[z].type){case"C":v.trim().length&&(x[H][z]=v.replace(/\s+$/,""));break;case"D":v.length===8?x[H][z]=new Date(+v.slice(0,4),+v.slice(4,6)-1,+v.slice(6,8)):x[H][z]=v;break;case"F":x[H][z]=parseFloat(v.trim());break;case"+":case"I":x[H][z]=I?F.read_shift(-4,"i")^2147483648:F.read_shift(4,"i");break;case"L":switch(v.trim().toUpperCase()){case"Y":case"T":x[H][z]=!0;break;case"N":case"F":x[H][z]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+v+"|")}break;case"M":if(!S)throw new Error("DBF Unexpected MEMO for type "+k.toString(16));x[H][z]="##MEMO##"+(I?parseInt(v.trim(),10):F.read_shift(4));break;case"N":v=v.replace(/\u0000/g,"").trim(),v&&v!="."&&(x[H][z]=+v||0);break;case"@":x[H][z]=new Date(F.read_shift(-8,"f")-621356832e5);break;case"T":x[H][z]=new Date((F.read_shift(4)-2440588)*864e5+F.read_shift(4));break;case"Y":x[H][z]=F.read_shift(4,"i")/1e4+F.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":x[H][z]=-F.read_shift(-8,"f");break;case"B":if(_&&O[z].len==8){x[H][z]=F.read_shift(8,"f");break}case"G":case"P":F.l+=O[z].len;break;case"0":if(O[z].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+O[z].type)}}}if(k!=2&&g.l<g.length&&g[g.l++]!=26)throw new Error("DBF EOF Marker missing "+(g.l-1)+" of "+g.length+" "+g[g.l-1].toString(16));return m&&m.sheetRows&&(x=x.slice(0,m.sheetRows)),m.DBF=O,x}function n(u,m){var x=m||{};x.dateNF||(x.dateNF="yyyymmdd");var g=r0(a(u,x),x);return g["!cols"]=x.DBF.map(function(k){return{wch:k.len,DBF:k}}),delete x.DBF,g}function i(u,m){try{return Cc(n(u,m),m)}catch(x){if(m&&m.WTF)throw x}return{SheetNames:[],Sheets:{}}}var c={B:8,C:250,L:1,D:8,"?":0,"":0};function o(u,m){var x=m||{};if(+x.codepage>=0&&Ru(+x.codepage),x.type=="string")throw new Error("Cannot write DBF to JS string");var g=dn(),k=nx(u,{header:1,raw:!0,cellDates:!0}),S=k[0],_=k.slice(1),I=u["!cols"]||[],P=0,b=0,B=0,L=1;for(P=0;P<S.length;++P){if(((I[P]||{}).DBF||{}).name){S[P]=I[P].DBF.name,++B;continue}if(S[P]!=null){if(++B,typeof S[P]=="number"&&(S[P]=S[P].toString(10)),typeof S[P]!="string")throw new Error("DBF Invalid column name "+S[P]+" |"+typeof S[P]+"|");if(S.indexOf(S[P])!==P){for(b=0;b<1024;++b)if(S.indexOf(S[P]+"_"+b)==-1){S[P]+="_"+b;break}}}}var O=Pa(u["!ref"]),te=[],ne=[],be=[];for(P=0;P<=O.e.c-O.s.c;++P){var H="",z="",F=0,v=[];for(b=0;b<_.length;++b)_[b][P]!=null&&v.push(_[b][P]);if(v.length==0||S[P]==null){te[P]="?";continue}for(b=0;b<v.length;++b){switch(typeof v[b]){case"number":z="B";break;case"string":z="C";break;case"boolean":z="L";break;case"object":z=v[b]instanceof Date?"D":"C";break;default:z="C"}F=Math.max(F,String(v[b]).length),H=H&&H!=z?"C":z}F>250&&(F=250),z=((I[P]||{}).DBF||{}).type,z=="C"&&I[P].DBF.len>F&&(F=I[P].DBF.len),H=="B"&&z=="N"&&(H="N",be[P]=I[P].DBF.dec,F=I[P].DBF.len),ne[P]=H=="C"||z=="N"?F:c[H]||0,L+=ne[P],te[P]=H}var ie=g.next(32);for(ie.write_shift(4,318902576),ie.write_shift(4,_.length),ie.write_shift(2,296+32*B),ie.write_shift(2,L),P=0;P<4;++P)ie.write_shift(4,0);for(ie.write_shift(4,0|(+t[dS]||3)<<8),P=0,b=0;P<S.length;++P)if(S[P]!=null){var X=g.next(32),ae=(S[P].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);X.write_shift(1,ae,"sbcs"),X.write_shift(1,te[P]=="?"?"C":te[P],"sbcs"),X.write_shift(4,b),X.write_shift(1,ne[P]||c[te[P]]||0),X.write_shift(1,be[P]||0),X.write_shift(1,2),X.write_shift(4,0),X.write_shift(1,0),X.write_shift(4,0),X.write_shift(4,0),b+=ne[P]||c[te[P]]||0}var We=g.next(264);for(We.write_shift(4,13),P=0;P<65;++P)We.write_shift(4,0);for(P=0;P<_.length;++P){var ct=g.next(L);for(ct.write_shift(1,0),b=0;b<S.length;++b)if(S[b]!=null)switch(te[b]){case"L":ct.write_shift(1,_[P][b]==null?63:_[P][b]?84:70);break;case"B":ct.write_shift(8,_[P][b]||0,"f");break;case"N":var ft="0";for(typeof _[P][b]=="number"&&(ft=_[P][b].toFixed(be[b]||0)),B=0;B<ne[b]-ft.length;++B)ct.write_shift(1,32);ct.write_shift(1,ft,"sbcs");break;case"D":_[P][b]?(ct.write_shift(4,("0000"+_[P][b].getFullYear()).slice(-4),"sbcs"),ct.write_shift(2,("00"+(_[P][b].getMonth()+1)).slice(-2),"sbcs"),ct.write_shift(2,("00"+_[P][b].getDate()).slice(-2),"sbcs")):ct.write_shift(8,"00000000","sbcs");break;case"C":var ot=String(_[P][b]!=null?_[P][b]:"").slice(0,ne[b]);for(ct.write_shift(1,ot,"sbcs"),B=0;B<ne[b]-ot.length;++B)ct.write_shift(1,32);break}}return g.next(1).write_shift(1,26),g.end()}return{to_workbook:i,to_sheet:n,from_sheet:o}})(),gK=(function(){var r={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ps(r).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),a=function(S,_){var I=r[_];return typeof I=="number"?c5(I):I},n=function(S,_,I){var P=_.charCodeAt(0)-32<<4|I.charCodeAt(0)-48;return P==59?S:c5(P)};r["|"]=254;function i(S,_){switch(_.type){case"base64":return c(No(S),_);case"binary":return c(S,_);case"buffer":return c(oa&&Buffer.isBuffer(S)?S.toString("binary"):uh(S),_);case"array":return c(Hx(S),_)}throw new Error("Unrecognized type "+_.type)}function c(S,_){var I=S.split(/[\n\r]+/),P=-1,b=-1,B=0,L=0,O=[],te=[],ne=null,be={},H=[],z=[],F=[],v=0,ie;for(+_.codepage>=0&&Ru(+_.codepage);B!==I.length;++B){v=0;var X=I[B].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,a),ae=X.replace(/;;/g,"\0").split(";").map(function(he){return he.replace(/\u0000/g,";")}),We=ae[0],ct;if(X.length>0)switch(We){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":ae[1].charAt(0)=="P"&&te.push(X.slice(3).replace(/;;/g,";"));break;case"C":var ft=!1,ot=!1,Ee=!1,Ie=!1,_e=-1,re=-1;for(L=1;L<ae.length;++L)switch(ae[L].charAt(0)){case"A":break;case"X":b=parseInt(ae[L].slice(1))-1,ot=!0;break;case"Y":for(P=parseInt(ae[L].slice(1))-1,ot||(b=0),ie=O.length;ie<=P;++ie)O[ie]=[];break;case"K":ct=ae[L].slice(1),ct.charAt(0)==='"'?ct=ct.slice(1,ct.length-1):ct==="TRUE"?ct=!0:ct==="FALSE"?ct=!1:isNaN(po(ct))?isNaN(Fu(ct).getDate())||(ct=Qs(ct)):(ct=po(ct),ne!==null&&kS(ne)&&(ct=TS(ct))),ft=!0;break;case"E":Ie=!0;var J=pY(ae[L].slice(1),{r:P,c:b});O[P][b]=[O[P][b],J];break;case"S":Ee=!0,O[P][b]=[O[P][b],"S5S"];break;case"G":break;case"R":_e=parseInt(ae[L].slice(1))-1;break;case"C":re=parseInt(ae[L].slice(1))-1;break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+X)}if(ft&&(O[P][b]&&O[P][b].length==2?O[P][b][0]=ct:O[P][b]=ct,ne=null),Ee){if(Ie)throw new Error("SYLK shared formula cannot have own formula");var de=_e>-1&&O[_e][re];if(!de||!de[1])throw new Error("SYLK shared formula cannot find base");O[P][b][1]=xY(de[1],{r:P-_e,c:b-re})}break;case"F":var ce=0;for(L=1;L<ae.length;++L)switch(ae[L].charAt(0)){case"X":b=parseInt(ae[L].slice(1))-1,++ce;break;case"Y":for(P=parseInt(ae[L].slice(1))-1,ie=O.length;ie<=P;++ie)O[ie]=[];break;case"M":v=parseInt(ae[L].slice(1))/20;break;case"F":break;case"G":break;case"P":ne=te[parseInt(ae[L].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(F=ae[L].slice(1).split(" "),ie=parseInt(F[0],10);ie<=parseInt(F[1],10);++ie)v=parseInt(F[2],10),z[ie-1]=v===0?{hidden:!0}:{wch:v},Nw(z[ie-1]);break;case"C":b=parseInt(ae[L].slice(1))-1,z[b]||(z[b]={});break;case"R":P=parseInt(ae[L].slice(1))-1,H[P]||(H[P]={}),v>0?(H[P].hpt=v,H[P].hpx=mE(v)):v===0&&(H[P].hidden=!0);break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+X)}ce<1&&(ne=null);break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+X)}}return H.length>0&&(be["!rows"]=H),z.length>0&&(be["!cols"]=z),_&&_.sheetRows&&(O=O.slice(0,_.sheetRows)),[O,be]}function o(S,_){var I=i(S,_),P=I[0],b=I[1],B=r0(P,_);return Ps(b).forEach(function(L){B[L]=b[L]}),B}function u(S,_){return Cc(o(S,_),_)}function m(S,_,I,P){var b="C;Y"+(I+1)+";X"+(P+1)+";K";switch(S.t){case"n":b+=S.v||0,S.f&&!S.F&&(b+=";E"+Cw(S.f,{r:I,c:P}));break;case"b":b+=S.v?"TRUE":"FALSE";break;case"e":b+=S.w||S.v;break;case"d":b+='"'+(S.w||S.v)+'"';break;case"s":b+='"'+S.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function x(S,_){_.forEach(function(I,P){var b="F;W"+(P+1)+" "+(P+1)+" ";I.hidden?b+="0":(typeof I.width=="number"&&!I.wpx&&(I.wpx=tx(I.width)),typeof I.wpx=="number"&&!I.wch&&(I.wch=rx(I.wpx)),typeof I.wch=="number"&&(b+=Math.round(I.wch))),b.charAt(b.length-1)!=" "&&S.push(b)})}function g(S,_){_.forEach(function(I,P){var b="F;";I.hidden?b+="M0;":I.hpt?b+="M"+20*I.hpt+";":I.hpx&&(b+="M"+20*ax(I.hpx)+";"),b.length>2&&S.push(b+"R"+(P+1))})}function k(S,_){var I=["ID;PWXL;N;E"],P=[],b=Pa(S["!ref"]),B,L=Array.isArray(S),O=`\r
`;I.push("P;PGeneral"),I.push("F;P0;DG0G8;M255"),S["!cols"]&&x(I,S["!cols"]),S["!rows"]&&g(I,S["!rows"]),I.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var te=b.s.r;te<=b.e.r;++te)for(var ne=b.s.c;ne<=b.e.c;++ne){var be=ga({r:te,c:ne});B=L?(S[te]||[])[ne]:S[be],!(!B||B.v==null&&(!B.f||B.F))&&P.push(m(B,S,te,ne))}return I.join(O)+O+P.join(O)+O+"E"+O}return{to_workbook:u,to_sheet:o,from_sheet:k}})(),fK=(function(){function r(c,o){switch(o.type){case"base64":return t(No(c),o);case"binary":return t(c,o);case"buffer":return t(oa&&Buffer.isBuffer(c)?c.toString("binary"):uh(c),o);case"array":return t(Hx(c),o)}throw new Error("Unrecognized type "+o.type)}function t(c,o){for(var u=c.split(`
`),m=-1,x=-1,g=0,k=[];g!==u.length;++g){if(u[g].trim()==="BOT"){k[++m]=[],x=0;continue}if(!(m<0)){var S=u[g].trim().split(","),_=S[0],I=S[1];++g;for(var P=u[g]||"";(P.match(/["]/g)||[]).length&1&&g<u.length-1;)P+=`
`+u[++g];switch(P=P.trim(),+_){case-1:if(P==="BOT"){k[++m]=[],x=0;continue}else if(P!=="EOD")throw new Error("Unrecognized DIF special command "+P);break;case 0:P==="TRUE"?k[m][x]=!0:P==="FALSE"?k[m][x]=!1:isNaN(po(I))?isNaN(Fu(I).getDate())?k[m][x]=I:k[m][x]=Qs(I):k[m][x]=po(I),++x;break;case 1:P=P.slice(1,P.length-1),P=P.replace(/""/g,'"'),P&&P.match(/^=".*"$/)&&(P=P.slice(2,-1)),k[m][x++]=P!==""?P:null;break}if(P==="EOD")break}}return o&&o.sheetRows&&(k=k.slice(0,o.sheetRows)),k}function a(c,o){return r0(r(c,o),o)}function n(c,o){return Cc(a(c,o),o)}var i=(function(){var c=function(m,x,g,k,S){m.push(x),m.push(g+","+k),m.push('"'+S.replace(/"/g,'""')+'"')},o=function(m,x,g,k){m.push(x+","+g),m.push(x==1?'"'+k.replace(/"/g,'""')+'"':k)};return function(m){var x=[],g=Pa(m["!ref"]),k,S=Array.isArray(m);c(x,"TABLE",0,1,"sheetjs"),c(x,"VECTORS",0,g.e.r-g.s.r+1,""),c(x,"TUPLES",0,g.e.c-g.s.c+1,""),c(x,"DATA",0,0,"");for(var _=g.s.r;_<=g.e.r;++_){o(x,-1,0,"BOT");for(var I=g.s.c;I<=g.e.c;++I){var P=ga({r:_,c:I});if(k=S?(m[_]||[])[I]:m[P],!k){o(x,1,0,"");continue}switch(k.t){case"n":var b=k.w;!b&&k.v!=null&&(b=k.v),b==null?k.f&&!k.F?o(x,1,0,"="+k.f):o(x,1,0,""):o(x,0,b,"V");break;case"b":o(x,0,k.v?1:0,k.v?"TRUE":"FALSE");break;case"s":o(x,1,0,isNaN(k.v)?k.v:'="'+k.v+'"');break;case"d":k.w||(k.w=Nl(k.z||Va[14],un(Qs(k.v)))),o(x,0,k.w,"V");break;default:o(x,1,0,"")}}}o(x,-1,0,"EOD");var B=`\r
`,L=x.join(B);return L}})();return{to_workbook:n,to_sheet:a,from_sheet:i}})(),cE=(function(){function r(k){return k.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(k){return k.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function a(k,S){for(var _=k.split(`
`),I=-1,P=-1,b=0,B=[];b!==_.length;++b){var L=_[b].trim().split(":");if(L[0]==="cell"){var O=ms(L[1]);if(B.length<=O.r)for(I=B.length;I<=O.r;++I)B[I]||(B[I]=[]);switch(I=O.r,P=O.c,L[2]){case"t":B[I][P]=r(L[3]);break;case"v":B[I][P]=+L[3];break;case"vtf":var te=L[L.length-1];case"vtc":switch(L[3]){case"nl":B[I][P]=!!+L[4];break;default:B[I][P]=+L[4];break}L[2]=="vtf"&&(B[I][P]=[B[I][P],te])}}}return S&&S.sheetRows&&(B=B.slice(0,S.sheetRows)),B}function n(k,S){return r0(a(k,S),S)}function i(k,S){return Cc(n(k,S),S)}var c=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,u=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),m="--SocialCalcSpreadsheetControlSave--";function x(k){if(!k||!k["!ref"])return"";for(var S=[],_=[],I,P="",b=In(k["!ref"]),B=Array.isArray(k),L=b.s.r;L<=b.e.r;++L)for(var O=b.s.c;O<=b.e.c;++O)if(P=ga({r:L,c:O}),I=B?(k[L]||[])[O]:k[P],!(!I||I.v==null||I.t==="z")){switch(_=["cell",P,"t"],I.t){case"s":case"str":_.push(t(I.v));break;case"n":I.f?(_[2]="vtf",_[3]="n",_[4]=I.v,_[5]=t(I.f)):(_[2]="v",_[3]=I.v);break;case"b":_[2]="vt"+(I.f?"f":"c"),_[3]="nl",_[4]=I.v?"1":"0",_[5]=t(I.f||(I.v?"TRUE":"FALSE"));break;case"d":var te=un(Qs(I.v));_[2]="vtc",_[3]="nd",_[4]=""+te,_[5]=I.w||Nl(I.z||Va[14],te);break;case"e":continue}S.push(_.join(":"))}return S.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),S.push("valueformat:1:text-wiki"),S.join(`
`)}function g(k){return[c,o,u,o,x(k),m].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:g}})(),bK=(function(){function r(g,k,S,_,I){I.raw?k[S][_]=g:g===""||(g==="TRUE"?k[S][_]=!0:g==="FALSE"?k[S][_]=!1:isNaN(po(g))?isNaN(Fu(g).getDate())?k[S][_]=g:k[S][_]=Qs(g):k[S][_]=po(g))}function t(g,k){var S=k||{},_=[];if(!g||g.length===0)return _;for(var I=g.split(/[\r\n]/),P=I.length-1;P>=0&&I[P].length===0;)--P;for(var b=10,B=0,L=0;L<=P;++L)B=I[L].indexOf(" "),B==-1?B=I[L].length:B++,b=Math.max(b,B);for(L=0;L<=P;++L){_[L]=[];var O=0;for(r(I[L].slice(0,b).trim(),_,L,O,S),O=1;O<=(I[L].length-b)/10+1;++O)r(I[L].slice(b+(O-1)*10,b+O*10).trim(),_,L,O,S)}return S.sheetRows&&(_=_.slice(0,S.sheetRows)),_}var a={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(g){for(var k={},S=!1,_=0,I=0;_<g.length;++_)(I=g.charCodeAt(_))==34?S=!S:!S&&I in a&&(k[I]=(k[I]||0)+1);I=[];for(_ in k)Object.prototype.hasOwnProperty.call(k,_)&&I.push([k[_],_]);if(!I.length){k=n;for(_ in k)Object.prototype.hasOwnProperty.call(k,_)&&I.push([k[_],_])}return I.sort(function(P,b){return P[0]-b[0]||n[P[1]]-n[b[1]]}),a[I.pop()[1]]||44}function c(g,k){var S=k||{},_="",I=S.dense?[]:{},P={s:{c:0,r:0},e:{c:0,r:0}};g.slice(0,4)=="sep="?g.charCodeAt(5)==13&&g.charCodeAt(6)==10?(_=g.charAt(4),g=g.slice(7)):g.charCodeAt(5)==13||g.charCodeAt(5)==10?(_=g.charAt(4),g=g.slice(6)):_=i(g.slice(0,1024)):S&&S.FS?_=S.FS:_=i(g.slice(0,1024));var b=0,B=0,L=0,O=0,te=0,ne=_.charCodeAt(0),be=!1,H=0,z=g.charCodeAt(0);g=g.replace(/\r\n/mg,`
`);var F=S.dateNF!=null?AW(S.dateNF):null;function v(){var ie=g.slice(O,te),X={};if(ie.charAt(0)=='"'&&ie.charAt(ie.length-1)=='"'&&(ie=ie.slice(1,-1).replace(/""/g,'"')),ie.length===0)X.t="z";else if(S.raw)X.t="s",X.v=ie;else if(ie.trim().length===0)X.t="s",X.v=ie;else if(ie.charCodeAt(0)==61)ie.charCodeAt(1)==34&&ie.charCodeAt(ie.length-1)==34?(X.t="s",X.v=ie.slice(2,-1).replace(/""/g,'"')):gY(ie)?(X.t="n",X.f=ie.slice(1)):(X.t="s",X.v=ie);else if(ie=="TRUE")X.t="b",X.v=!0;else if(ie=="FALSE")X.t="b",X.v=!1;else if(!isNaN(L=po(ie)))X.t="n",S.cellText!==!1&&(X.w=ie),X.v=L;else if(!isNaN(Fu(ie).getDate())||F&&ie.match(F)){X.z=S.dateNF||Va[14];var ae=0;F&&ie.match(F)&&(ie=RW(ie,S.dateNF,ie.match(F)||[]),ae=1),S.cellDates?(X.t="d",X.v=Qs(ie,ae)):(X.t="n",X.v=un(Qs(ie,ae))),S.cellText!==!1&&(X.w=Nl(X.z,X.v instanceof Date?un(X.v):X.v)),S.cellNF||delete X.z}else X.t="s",X.v=ie;if(X.t=="z"||(S.dense?(I[b]||(I[b]=[]),I[b][B]=X):I[ga({c:B,r:b})]=X),O=te+1,z=g.charCodeAt(O),P.e.c<B&&(P.e.c=B),P.e.r<b&&(P.e.r=b),H==ne)++B;else if(B=0,++b,S.sheetRows&&S.sheetRows<=b)return!0}e:for(;te<g.length;++te)switch(H=g.charCodeAt(te)){case 34:z===34&&(be=!be);break;case ne:case 10:case 13:if(!be&&v())break e;break}return te-O>0&&v(),I["!ref"]=Za(P),I}function o(g,k){return!(k&&k.PRN)||k.FS||g.slice(0,4)=="sep="||g.indexOf("	")>=0||g.indexOf(",")>=0||g.indexOf(";")>=0?c(g,k):r0(t(g,k),k)}function u(g,k){var S="",_=k.type=="string"?[0,0,0,0]:PZ(g,k);switch(k.type){case"base64":S=No(g);break;case"binary":S=g;break;case"buffer":k.codepage==65001?S=g.toString("utf8"):k.codepage&&typeof Wp<"u"||(S=oa&&Buffer.isBuffer(g)?g.toString("binary"):uh(g));break;case"array":S=Hx(g);break;case"string":S=g;break;default:throw new Error("Unrecognized type "+k.type)}return _[0]==239&&_[1]==187&&_[2]==191?S=cu(S.slice(3)):k.type!="string"&&k.type!="buffer"&&k.codepage==65001?S=cu(S):k.type=="binary"&&typeof Wp<"u",S.slice(0,19)=="socialcalc:version:"?cE.to_sheet(k.type=="string"?S:cu(S),k):o(S,k)}function m(g,k){return Cc(u(g,k),k)}function x(g){for(var k=[],S=Pa(g["!ref"]),_,I=Array.isArray(g),P=S.s.r;P<=S.e.r;++P){for(var b=[],B=S.s.c;B<=S.e.c;++B){var L=ga({r:P,c:B});if(_=I?(g[P]||[])[B]:g[L],!_||_.v==null){b.push("          ");continue}for(var O=(_.w||(jo(_),_.w)||"").slice(0,10);O.length<10;)O+=" ";b.push(O+(B===0?" ":""))}k.push(b.join(""))}return k.join(`
`)}return{to_workbook:m,to_sheet:u,from_sheet:x}})(),B5=(function(){function r(J,de,ce){if(J){wn(J,J.l||0);for(var he=ce.Enum||_e;J.l<J.length;){var q=J.read_shift(2),l=he[q]||he[65535],Xe=J.read_shift(2),qe=J.l+Xe,Ae=l.f&&l.f(J,Xe,ce);if(J.l=qe,de(Ae,l,q))return}}}function t(J,de){switch(de.type){case"base64":return a(di(No(J)),de);case"binary":return a(di(J),de);case"buffer":case"array":return a(J,de)}throw"Unsupported type "+de.type}function a(J,de){if(!J)return J;var ce=de||{},he=ce.dense?[]:{},q="Sheet1",l="",Xe=0,qe={},Ae=[],Oe=[],kt={s:{r:0,c:0},e:{r:0,c:0}},Lt=ce.sheetRows||0;if(J[2]==0&&(J[3]==8||J[3]==9)&&J.length>=16&&J[14]==5&&J[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(J[2]==2)ce.Enum=_e,r(J,function(tt,yt,Ue){switch(Ue){case 0:ce.vers=tt,tt>=4096&&(ce.qpro=!0);break;case 6:kt=tt;break;case 204:tt&&(l=tt);break;case 222:l=tt;break;case 15:case 51:ce.qpro||(tt[1].v=tt[1].v.slice(1));case 13:case 14:case 16:Ue==14&&(tt[2]&112)==112&&(tt[2]&15)>1&&(tt[2]&15)<15&&(tt[1].z=ce.dateNF||Va[14],ce.cellDates&&(tt[1].t="d",tt[1].v=TS(tt[1].v))),ce.qpro&&tt[3]>Xe&&(he["!ref"]=Za(kt),qe[q]=he,Ae.push(q),he=ce.dense?[]:{},kt={s:{r:0,c:0},e:{r:0,c:0}},Xe=tt[3],q=l||"Sheet"+(Xe+1),l="");var lt=ce.dense?(he[tt[0].r]||[])[tt[0].c]:he[ga(tt[0])];if(lt){lt.t=tt[1].t,lt.v=tt[1].v,tt[1].z!=null&&(lt.z=tt[1].z),tt[1].f!=null&&(lt.f=tt[1].f);break}ce.dense?(he[tt[0].r]||(he[tt[0].r]=[]),he[tt[0].r][tt[0].c]=tt[1]):he[ga(tt[0])]=tt[1];break}},ce);else if(J[2]==26||J[2]==14)ce.Enum=re,J[2]==14&&(ce.qpro=!0,J.l=0),r(J,function(tt,yt,Ue){switch(Ue){case 204:q=tt;break;case 22:tt[1].v=tt[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(tt[3]>Xe&&(he["!ref"]=Za(kt),qe[q]=he,Ae.push(q),he=ce.dense?[]:{},kt={s:{r:0,c:0},e:{r:0,c:0}},Xe=tt[3],q="Sheet"+(Xe+1)),Lt>0&&tt[0].r>=Lt)break;ce.dense?(he[tt[0].r]||(he[tt[0].r]=[]),he[tt[0].r][tt[0].c]=tt[1]):he[ga(tt[0])]=tt[1],kt.e.c<tt[0].c&&(kt.e.c=tt[0].c),kt.e.r<tt[0].r&&(kt.e.r=tt[0].r);break;case 27:tt[14e3]&&(Oe[tt[14e3][0]]=tt[14e3][1]);break;case 1537:Oe[tt[0]]=tt[1],tt[0]==Xe&&(q=tt[1]);break}},ce);else throw new Error("Unrecognized LOTUS BOF "+J[2]);if(he["!ref"]=Za(kt),qe[l||q]=he,Ae.push(l||q),!Oe.length)return{SheetNames:Ae,Sheets:qe};for(var jt={},Wt=[],Tt=0;Tt<Oe.length;++Tt)qe[Ae[Tt]]?(Wt.push(Oe[Tt]||Ae[Tt]),jt[Oe[Tt]]=qe[Oe[Tt]]||qe[Ae[Tt]]):(Wt.push(Oe[Tt]),jt[Oe[Tt]]={"!ref":"A1"});return{SheetNames:Wt,Sheets:jt}}function n(J,de){var ce=de||{};if(+ce.codepage>=0&&Ru(+ce.codepage),ce.type=="string")throw new Error("Cannot write WK1 to JS string");var he=dn(),q=Pa(J["!ref"]),l=Array.isArray(J),Xe=[];Kt(he,0,c(1030)),Kt(he,6,m(q));for(var qe=Math.min(q.e.r,8191),Ae=q.s.r;Ae<=qe;++Ae)for(var Oe=Es(Ae),kt=q.s.c;kt<=q.e.c;++kt){Ae===q.s.r&&(Xe[kt]=Ls(kt));var Lt=Xe[kt]+Oe,jt=l?(J[Ae]||[])[kt]:J[Lt];if(!(!jt||jt.t=="z"))if(jt.t=="n")(jt.v|0)==jt.v&&jt.v>=-32768&&jt.v<=32767?Kt(he,13,_(Ae,kt,jt.v)):Kt(he,14,P(Ae,kt,jt.v));else{var Wt=jo(jt);Kt(he,15,k(Ae,kt,Wt.slice(0,239)))}}return Kt(he,1),he.end()}function i(J,de){var ce=de||{};if(+ce.codepage>=0&&Ru(+ce.codepage),ce.type=="string")throw new Error("Cannot write WK3 to JS string");var he=dn();Kt(he,0,o(J));for(var q=0,l=0;q<J.SheetNames.length;++q)(J.Sheets[J.SheetNames[q]]||{})["!ref"]&&Kt(he,27,Ie(J.SheetNames[q],l++));var Xe=0;for(q=0;q<J.SheetNames.length;++q){var qe=J.Sheets[J.SheetNames[q]];if(!(!qe||!qe["!ref"])){for(var Ae=Pa(qe["!ref"]),Oe=Array.isArray(qe),kt=[],Lt=Math.min(Ae.e.r,8191),jt=Ae.s.r;jt<=Lt;++jt)for(var Wt=Es(jt),Tt=Ae.s.c;Tt<=Ae.e.c;++Tt){jt===Ae.s.r&&(kt[Tt]=Ls(Tt));var tt=kt[Tt]+Wt,yt=Oe?(qe[jt]||[])[Tt]:qe[tt];if(!(!yt||yt.t=="z"))if(yt.t=="n")Kt(he,23,v(jt,Tt,Xe,yt.v));else{var Ue=jo(yt);Kt(he,22,H(jt,Tt,Xe,Ue.slice(0,239)))}}++Xe}}return Kt(he,1),he.end()}function c(J){var de=xt(2);return de.write_shift(2,J),de}function o(J){var de=xt(26);de.write_shift(2,4096),de.write_shift(2,4),de.write_shift(4,0);for(var ce=0,he=0,q=0,l=0;l<J.SheetNames.length;++l){var Xe=J.SheetNames[l],qe=J.Sheets[Xe];if(!(!qe||!qe["!ref"])){++q;var Ae=In(qe["!ref"]);ce<Ae.e.r&&(ce=Ae.e.r),he<Ae.e.c&&(he=Ae.e.c)}}return ce>8191&&(ce=8191),de.write_shift(2,ce),de.write_shift(1,q),de.write_shift(1,he),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(1,1),de.write_shift(1,2),de.write_shift(4,0),de.write_shift(4,0),de}function u(J,de,ce){var he={s:{c:0,r:0},e:{c:0,r:0}};return de==8&&ce.qpro?(he.s.c=J.read_shift(1),J.l++,he.s.r=J.read_shift(2),he.e.c=J.read_shift(1),J.l++,he.e.r=J.read_shift(2),he):(he.s.c=J.read_shift(2),he.s.r=J.read_shift(2),de==12&&ce.qpro&&(J.l+=2),he.e.c=J.read_shift(2),he.e.r=J.read_shift(2),de==12&&ce.qpro&&(J.l+=2),he.s.c==65535&&(he.s.c=he.e.c=he.s.r=he.e.r=0),he)}function m(J){var de=xt(8);return de.write_shift(2,J.s.c),de.write_shift(2,J.s.r),de.write_shift(2,J.e.c),de.write_shift(2,J.e.r),de}function x(J,de,ce){var he=[{c:0,r:0},{t:"n",v:0},0,0];return ce.qpro&&ce.vers!=20768?(he[0].c=J.read_shift(1),he[3]=J.read_shift(1),he[0].r=J.read_shift(2),J.l+=2):(he[2]=J.read_shift(1),he[0].c=J.read_shift(2),he[0].r=J.read_shift(2)),he}function g(J,de,ce){var he=J.l+de,q=x(J,de,ce);if(q[1].t="s",ce.vers==20768){J.l++;var l=J.read_shift(1);return q[1].v=J.read_shift(l,"utf8"),q}return ce.qpro&&J.l++,q[1].v=J.read_shift(he-J.l,"cstr"),q}function k(J,de,ce){var he=xt(7+ce.length);he.write_shift(1,255),he.write_shift(2,de),he.write_shift(2,J),he.write_shift(1,39);for(var q=0;q<he.length;++q){var l=ce.charCodeAt(q);he.write_shift(1,l>=128?95:l)}return he.write_shift(1,0),he}function S(J,de,ce){var he=x(J,de,ce);return he[1].v=J.read_shift(2,"i"),he}function _(J,de,ce){var he=xt(7);return he.write_shift(1,255),he.write_shift(2,de),he.write_shift(2,J),he.write_shift(2,ce,"i"),he}function I(J,de,ce){var he=x(J,de,ce);return he[1].v=J.read_shift(8,"f"),he}function P(J,de,ce){var he=xt(13);return he.write_shift(1,255),he.write_shift(2,de),he.write_shift(2,J),he.write_shift(8,ce,"f"),he}function b(J,de,ce){var he=J.l+de,q=x(J,de,ce);if(q[1].v=J.read_shift(8,"f"),ce.qpro)J.l=he;else{var l=J.read_shift(2);te(J.slice(J.l,J.l+l),q),J.l+=l}return q}function B(J,de,ce){var he=de&32768;return de&=-32769,de=(he?J:0)+(de>=8192?de-16384:de),(he?"":"$")+(ce?Ls(de):Es(de))}var L={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},O=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function te(J,de){wn(J,0);for(var ce=[],he=0,q="",l="",Xe="",qe="";J.l<J.length;){var Ae=J[J.l++];switch(Ae){case 0:ce.push(J.read_shift(8,"f"));break;case 1:l=B(de[0].c,J.read_shift(2),!0),q=B(de[0].r,J.read_shift(2),!1),ce.push(l+q);break;case 2:{var Oe=B(de[0].c,J.read_shift(2),!0),kt=B(de[0].r,J.read_shift(2),!1);l=B(de[0].c,J.read_shift(2),!0),q=B(de[0].r,J.read_shift(2),!1),ce.push(Oe+kt+":"+l+q)}break;case 3:if(J.l<J.length){console.error("WK1 premature formula end");return}break;case 4:ce.push("("+ce.pop()+")");break;case 5:ce.push(J.read_shift(2));break;case 6:{for(var Lt="";Ae=J[J.l++];)Lt+=String.fromCharCode(Ae);ce.push('"'+Lt.replace(/"/g,'""')+'"')}break;case 8:ce.push("-"+ce.pop());break;case 23:ce.push("+"+ce.pop());break;case 22:ce.push("NOT("+ce.pop()+")");break;case 20:case 21:qe=ce.pop(),Xe=ce.pop(),ce.push(["AND","OR"][Ae-20]+"("+Xe+","+qe+")");break;default:if(Ae<32&&O[Ae])qe=ce.pop(),Xe=ce.pop(),ce.push(Xe+O[Ae]+qe);else if(L[Ae]){if(he=L[Ae][1],he==69&&(he=J[J.l++]),he>ce.length){console.error("WK1 bad formula parse 0x"+Ae.toString(16)+":|"+ce.join("|")+"|");return}var jt=ce.slice(-he);ce.length-=he,ce.push(L[Ae][0]+"("+jt.join(",")+")")}else return Ae<=7?console.error("WK1 invalid opcode "+Ae.toString(16)):Ae<=24?console.error("WK1 unsupported op "+Ae.toString(16)):Ae<=30?console.error("WK1 invalid opcode "+Ae.toString(16)):Ae<=115?console.error("WK1 unsupported function opcode "+Ae.toString(16)):console.error("WK1 unrecognized opcode "+Ae.toString(16))}}ce.length==1?de[1].f=""+ce[0]:console.error("WK1 bad formula parse |"+ce.join("|")+"|")}function ne(J){var de=[{c:0,r:0},{t:"n",v:0},0];return de[0].r=J.read_shift(2),de[3]=J[J.l++],de[0].c=J[J.l++],de}function be(J,de){var ce=ne(J);return ce[1].t="s",ce[1].v=J.read_shift(de-4,"cstr"),ce}function H(J,de,ce,he){var q=xt(6+he.length);q.write_shift(2,J),q.write_shift(1,ce),q.write_shift(1,de),q.write_shift(1,39);for(var l=0;l<he.length;++l){var Xe=he.charCodeAt(l);q.write_shift(1,Xe>=128?95:Xe)}return q.write_shift(1,0),q}function z(J,de){var ce=ne(J);ce[1].v=J.read_shift(2);var he=ce[1].v>>1;if(ce[1].v&1)switch(he&7){case 0:he=(he>>3)*5e3;break;case 1:he=(he>>3)*500;break;case 2:he=(he>>3)/20;break;case 3:he=(he>>3)/200;break;case 4:he=(he>>3)/2e3;break;case 5:he=(he>>3)/2e4;break;case 6:he=(he>>3)/16;break;case 7:he=(he>>3)/64;break}return ce[1].v=he,ce}function F(J,de){var ce=ne(J),he=J.read_shift(4),q=J.read_shift(4),l=J.read_shift(2);if(l==65535)return he===0&&q===3221225472?(ce[1].t="e",ce[1].v=15):he===0&&q===3489660928?(ce[1].t="e",ce[1].v=42):ce[1].v=0,ce;var Xe=l&32768;return l=(l&32767)-16446,ce[1].v=(1-Xe*2)*(q*Math.pow(2,l+32)+he*Math.pow(2,l)),ce}function v(J,de,ce,he){var q=xt(14);if(q.write_shift(2,J),q.write_shift(1,ce),q.write_shift(1,de),he==0)return q.write_shift(4,0),q.write_shift(4,0),q.write_shift(2,65535),q;var l=0,Xe=0,qe=0,Ae=0;return he<0&&(l=1,he=-he),Xe=Math.log2(he)|0,he/=Math.pow(2,Xe-31),Ae=he>>>0,(Ae&2147483648)==0&&(he/=2,++Xe,Ae=he>>>0),he-=Ae,Ae|=2147483648,Ae>>>=0,he*=Math.pow(2,32),qe=he>>>0,q.write_shift(4,qe),q.write_shift(4,Ae),Xe+=16383+(l?32768:0),q.write_shift(2,Xe),q}function ie(J,de){var ce=F(J);return J.l+=de-14,ce}function X(J,de){var ce=ne(J),he=J.read_shift(4);return ce[1].v=he>>6,ce}function ae(J,de){var ce=ne(J),he=J.read_shift(8,"f");return ce[1].v=he,ce}function We(J,de){var ce=ae(J);return J.l+=de-10,ce}function ct(J,de){return J[J.l+de-1]==0?J.read_shift(de,"cstr"):""}function ft(J,de){var ce=J[J.l++];ce>de-1&&(ce=de-1);for(var he="";he.length<ce;)he+=String.fromCharCode(J[J.l++]);return he}function ot(J,de,ce){if(!(!ce.qpro||de<21)){var he=J.read_shift(1);J.l+=17,J.l+=1,J.l+=2;var q=J.read_shift(de-21,"cstr");return[he,q]}}function Ee(J,de){for(var ce={},he=J.l+de;J.l<he;){var q=J.read_shift(2);if(q==14e3){for(ce[q]=[0,""],ce[q][0]=J.read_shift(2);J[J.l];)ce[q][1]+=String.fromCharCode(J[J.l]),J.l++;J.l++}}return ce}function Ie(J,de){var ce=xt(5+J.length);ce.write_shift(2,14e3),ce.write_shift(2,de);for(var he=0;he<J.length;++he){var q=J.charCodeAt(he);ce[ce.l++]=q>127?95:q}return ce[ce.l++]=0,ce}var _e={0:{n:"BOF",f:sE},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:u},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:S},14:{n:"NUMBER",f:I},15:{n:"LABEL",f:g},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:g},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ct},222:{n:"SHEETNAMELP",f:ft},65535:{n:""}},re={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:be},23:{n:"NUMBER17",f:F},24:{n:"NUMBER18",f:z},25:{n:"FORMULA19",f:ie},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Ee},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:X},38:{n:"??"},39:{n:"NUMBER27",f:ae},40:{n:"FORMULA28",f:We},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ct},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ot},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:t}})(),yK=/^\s|\s$|[\t\n\r]/;function dE(r,t){if(!t.bookSST)return"";var a=[es];a[a.length]=Gt("sst",null,{xmlns:t0[0],count:r.Count,uniqueCount:r.Unique});for(var n=0;n!=r.length;++n)if(r[n]!=null){var i=r[n],c="<si>";i.r?c+=i.r:(c+="<t",i.t||(i.t=""),i.t.match(yK)&&(c+=' xml:space="preserve"'),c+=">"+xa(i.t)+"</t>"),c+="</si>",a[a.length]=c}return a.length>2&&(a[a.length]="</sst>",a[1]=a[1].replace("/>",">")),a.join("")}function vK(r){return[r.read_shift(4),r.read_shift(4)]}function wK(r,t){return t||(t=xt(8)),t.write_shift(4,r.Count),t.write_shift(4,r.Unique),t}var kK=hG;function NK(r){var t=dn();Ct(t,159,wK(r));for(var a=0;a<r.length;++a)Ct(t,19,kK(r[a]));return Ct(t,160),t.end()}function jK(r){for(var t=[],a=r.split(""),n=0;n<a.length;++n)t[n]=a[n].charCodeAt(0);return t}function uE(r){var t=0,a,n=jK(r),i=n.length+1,c,o,u,m,x;for(a=fc(i),a[0]=n.length,c=1;c!=i;++c)a[c]=n[c-1];for(c=i-1;c>=0;--c)o=a[c],u=(t&16384)===0?0:1,m=t<<1&32767,x=u|m,t=x^o;return t^52811}var CK=(function(){function r(i,c){switch(c.type){case"base64":return t(No(i),c);case"binary":return t(i,c);case"buffer":return t(oa&&Buffer.isBuffer(i)?i.toString("binary"):uh(i),c);case"array":return t(Hx(i),c)}throw new Error("Unrecognized type "+c.type)}function t(i,c){var o=c||{},u=o.dense?[]:{},m=i.match(/\\trowd.*?\\row\b/g);if(!m.length)throw new Error("RTF missing table");var x={s:{c:0,r:0},e:{c:0,r:m.length-1}};return m.forEach(function(g,k){Array.isArray(u)&&(u[k]=[]);for(var S=/\\\w+\b/g,_=0,I,P=-1;I=S.exec(g);){switch(I[0]){case"\\cell":var b=g.slice(_,S.lastIndex-I[0].length);if(b[0]==" "&&(b=b.slice(1)),++P,b.length){var B={v:b,t:"s"};Array.isArray(u)?u[k][P]=B:u[ga({r:k,c:P})]=B}break}_=S.lastIndex}P>x.e.c&&(x.e.c=P)}),u["!ref"]=Za(x),u}function a(i,c){return Cc(r(i,c),c)}function n(i){for(var c=["{\\rtf1\\ansi"],o=Pa(i["!ref"]),u,m=Array.isArray(i),x=o.s.r;x<=o.e.r;++x){c.push("\\trowd\\trautofit1");for(var g=o.s.c;g<=o.e.c;++g)c.push("\\cellx"+(g+1));for(c.push("\\pard\\intbl"),g=o.s.c;g<=o.e.c;++g){var k=ga({r:x,c:g});u=m?(i[x]||[])[g]:i[k],!(!u||u.v==null&&(!u.f||u.F))&&(c.push(" "+(u.w||(jo(u),u.w))),c.push("\\cell"))}c.push("\\pard\\intbl\\row")}return c.join("")+"}"}return{to_workbook:a,to_sheet:r,from_sheet:n}})();function z5(r){for(var t=0,a=1;t!=3;++t)a=a*256+(r[t]>255?255:r[t]<0?0:r[t]);return a.toString(16).toUpperCase().slice(1)}var TK=6,xo=TK;function tx(r){return Math.floor((r+Math.round(128/xo)/256)*xo)}function rx(r){return Math.floor((r-5)/xo*100+.5)/100}function dy(r){return Math.round((r*xo+5)/xo*256)/256}function Nw(r){r.width?(r.wpx=tx(r.width),r.wch=rx(r.wpx),r.MDW=xo):r.wpx?(r.wch=rx(r.wpx),r.width=dy(r.wch),r.MDW=xo):typeof r.wch=="number"&&(r.width=dy(r.wch),r.wpx=tx(r.width),r.MDW=xo),r.customWidth&&delete r.customWidth}var SK=96,hE=SK;function ax(r){return r*96/hE}function mE(r){return r*hE/96}function EK(r){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var n=a[0];n<=a[1];++n)r[n]!=null&&(t[t.length]=Gt("numFmt",null,{numFmtId:n,formatCode:xa(r[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Gt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function _K(r){var t=[];return t[t.length]=Gt("cellXfs",null),r.forEach(function(a){t[t.length]=Gt("xf",null,a)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Gt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function pE(r,t){var a=[es,Gt("styleSheet",null,{xmlns:t0[0],"xmlns:vt":hs.vt})],n;return r.SSF&&(n=EK(r.SSF))!=null&&(a[a.length]=n),a[a.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',a[a.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',a[a.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',a[a.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=_K(t.cellXfs))&&(a[a.length]=n),a[a.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',a[a.length]='<dxfs count="0"/>',a[a.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',a.length>2&&(a[a.length]="</styleSheet>",a[1]=a[1].replace("/>",">")),a.join("")}function PK(r,t){var a=r.read_shift(2),n=Bs(r);return[a,n]}function IK(r,t,a){a||(a=xt(6+4*t.length)),a.write_shift(2,r),ps(t,a);var n=a.length>a.l?a.slice(0,a.l):a;return a.l==null&&(a.l=a.length),n}function $K(r,t,a){var n={};n.sz=r.read_shift(2)/20;var i=yG(r);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var c=r.read_shift(2);switch(c===700&&(n.bold=1),r.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=r.read_shift(1);o!=0&&(n.underline=o);var u=r.read_shift(1);u>0&&(n.family=u);var m=r.read_shift(1);switch(m>0&&(n.charset=m),r.l++,n.color=bG(r),r.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Bs(r),n}function DK(r,t){t||(t=xt(153)),t.write_shift(2,r.sz*20),vG(r,t),t.write_shift(2,r.bold?700:400);var a=0;r.vertAlign=="superscript"?a=1:r.vertAlign=="subscript"&&(a=2),t.write_shift(2,a),t.write_shift(1,r.underline||0),t.write_shift(1,r.family||0),t.write_shift(1,r.charset||0),t.write_shift(1,0),Zp(r.color,t);var n=0;return n=2,t.write_shift(1,n),ps(r.name,t),t.length>t.l?t.slice(0,t.l):t}var AK=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],ob,RK=Ui;function V5(r,t){t||(t=xt(84)),ob||(ob=uw(AK));var a=ob[r.patternType];a==null&&(a=40),t.write_shift(4,a);var n=0;if(a!=40)for(Zp({auto:1},t),Zp({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function MK(r,t){var a=r.l+t,n=r.read_shift(2),i=r.read_shift(2);return r.l=a,{ixfe:n,numFmtId:i}}function xE(r,t,a){a||(a=xt(16)),a.write_shift(2,t||0),a.write_shift(2,r.numFmtId||0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(1,0),a.write_shift(1,0);var n=0;return a.write_shift(1,n),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(1,0),a}function B0(r,t){return t||(t=xt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var FK=Ui;function OK(r,t){return t||(t=xt(51)),t.write_shift(1,0),B0(null,t),B0(null,t),B0(null,t),B0(null,t),B0(null,t),t.length>t.l?t.slice(0,t.l):t}function LK(r,t){return t||(t=xt(52)),t.write_shift(4,r.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Jp(r.name||"",t),t.length>t.l?t.slice(0,t.l):t}function BK(r,t,a){var n=xt(2052);return n.write_shift(4,r),Jp(t,n),Jp(a,n),n.length>n.l?n.slice(0,n.l):n}function zK(r,t){if(t){var a=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)t[i]!=null&&++a}),a!=0&&(Ct(r,615,pi(a)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)t[i]!=null&&Ct(r,44,IK(i,t[i]))}),Ct(r,616))}}function VK(r){var t=1;Ct(r,611,pi(t)),Ct(r,43,DK({sz:12,color:{theme:1},name:"Calibri",family:2})),Ct(r,612)}function UK(r){var t=2;Ct(r,603,pi(t)),Ct(r,45,V5({patternType:"none"})),Ct(r,45,V5({patternType:"gray125"})),Ct(r,604)}function HK(r){var t=1;Ct(r,613,pi(t)),Ct(r,46,OK()),Ct(r,614)}function qK(r){var t=1;Ct(r,626,pi(t)),Ct(r,47,xE({numFmtId:0},65535)),Ct(r,627)}function WK(r,t){Ct(r,617,pi(t.length)),t.forEach(function(a){Ct(r,47,xE(a,0))}),Ct(r,618)}function GK(r){var t=1;Ct(r,619,pi(t)),Ct(r,48,LK({xfId:0,name:"Normal"})),Ct(r,620)}function KK(r){var t=0;Ct(r,505,pi(t)),Ct(r,506)}function YK(r){var t=0;Ct(r,508,BK(t,"TableStyleMedium9","PivotStyleMedium4")),Ct(r,509)}function QK(r,t){var a=dn();return Ct(a,278),zK(a,r.SSF),VK(a),UK(a),HK(a),qK(a),WK(a,t.cellXfs),GK(a),KK(a),YK(a),Ct(a,279),a.end()}function gE(r,t){if(t&&t.themeXLSX)return t.themeXLSX;if(r&&typeof r.raw=="string")return r.raw;var a=[es];return a[a.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',a[a.length]="<a:themeElements>",a[a.length]='<a:clrScheme name="Office">',a[a.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',a[a.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',a[a.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',a[a.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',a[a.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',a[a.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',a[a.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',a[a.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',a[a.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',a[a.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',a[a.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',a[a.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',a[a.length]="</a:clrScheme>",a[a.length]='<a:fontScheme name="Office">',a[a.length]="<a:majorFont>",a[a.length]='<a:latin typeface="Cambria"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',a[a.length]='<a:font script="Hang" typeface="맑은 고딕"/>',a[a.length]='<a:font script="Hans" typeface="宋体"/>',a[a.length]='<a:font script="Hant" typeface="新細明體"/>',a[a.length]='<a:font script="Arab" typeface="Times New Roman"/>',a[a.length]='<a:font script="Hebr" typeface="Times New Roman"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="MoolBoran"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Times New Roman"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:majorFont>",a[a.length]="<a:minorFont>",a[a.length]='<a:latin typeface="Calibri"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',a[a.length]='<a:font script="Hang" typeface="맑은 고딕"/>',a[a.length]='<a:font script="Hans" typeface="宋体"/>',a[a.length]='<a:font script="Hant" typeface="新細明體"/>',a[a.length]='<a:font script="Arab" typeface="Arial"/>',a[a.length]='<a:font script="Hebr" typeface="Arial"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="DaunPenh"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Arial"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:minorFont>",a[a.length]="</a:fontScheme>",a[a.length]='<a:fmtScheme name="Office">',a[a.length]="<a:fillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="1"/>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="0"/>',a[a.length]="</a:gradFill>",a[a.length]="</a:fillStyleLst>",a[a.length]="<a:lnStyleLst>",a[a.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]="</a:lnStyleLst>",a[a.length]="<a:effectStyleLst>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',a[a.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',a[a.length]="</a:effectStyle>",a[a.length]="</a:effectStyleLst>",a[a.length]="<a:bgFillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]="</a:bgFillStyleLst>",a[a.length]="</a:fmtScheme>",a[a.length]="</a:themeElements>",a[a.length]="<a:objectDefaults>",a[a.length]="<a:spDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',a[a.length]="</a:spDef>",a[a.length]="<a:lnDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',a[a.length]="</a:lnDef>",a[a.length]="</a:objectDefaults>",a[a.length]="<a:extraClrSchemeLst/>",a[a.length]="</a:theme>",a.join("")}function XK(r,t){return{flags:r.read_shift(4),version:r.read_shift(4),name:Bs(r)}}function JK(r){var t=xt(12+2*r.name.length);return t.write_shift(4,r.flags),t.write_shift(4,r.version),ps(r.name,t),t.slice(0,t.l)}function ZK(r){for(var t=[],a=r.read_shift(4);a-- >0;)t.push([r.read_shift(4),r.read_shift(4)]);return t}function eY(r){var t=xt(4+8*r.length);t.write_shift(4,r.length);for(var a=0;a<r.length;++a)t.write_shift(4,r[a][0]),t.write_shift(4,r[a][1]);return t}function tY(r,t){var a=xt(8+2*t.length);return a.write_shift(4,r),ps(t,a),a.slice(0,a.l)}function rY(r){return r.l+=4,r.read_shift(4)!=0}function aY(r,t){var a=xt(8);return a.write_shift(4,r),a.write_shift(4,1),a}function sY(){var r=dn();return Ct(r,332),Ct(r,334,pi(1)),Ct(r,335,JK({name:"XLDAPR",version:12e4,flags:3496657072})),Ct(r,336),Ct(r,339,tY(1,"XLDAPR")),Ct(r,52),Ct(r,35,pi(514)),Ct(r,4096,pi(0)),Ct(r,4097,Un(1)),Ct(r,36),Ct(r,53),Ct(r,340),Ct(r,337,aY(1)),Ct(r,51,eY([[1,0]])),Ct(r,338),Ct(r,333),r.end()}function fE(){var r=[es];return r.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),r.join("")}function nY(r){var t={};t.i=r.read_shift(4);var a={};a.r=r.read_shift(4),a.c=r.read_shift(4),t.r=ga(a);var n=r.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}var jd=1024;function bE(r,t){for(var a=[21600,21600],n=["m0,0l0",a[1],a[0],a[1],a[0],"0xe"].join(","),i=[Gt("xml",null,{"xmlns:v":kn.v,"xmlns:o":kn.o,"xmlns:x":kn.x,"xmlns:mv":kn.mv}).replace(/\/>/,">"),Gt("o:shapelayout",Gt("o:idmap",null,{"v:ext":"edit",data:r}),{"v:ext":"edit"}),Gt("v:shapetype",[Gt("v:stroke",null,{joinstyle:"miter"}),Gt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:a.join(","),path:n})];jd<r*1e3;)jd+=1e3;return t.forEach(function(c){var o=ms(c[0]),u={color2:"#BEFF82",type:"gradient"};u.type=="gradient"&&(u.angle="-180");var m=u.type=="gradient"?Gt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,x=Gt("v:fill",m,u),g={on:"t",obscured:"t"};++jd,i=i.concat(["<v:shape"+Lu({id:"_x0000_s"+jd,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(c[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",x,Gt("v:shadow",null,g),Gt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ts("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Ts("x:AutoFill","False"),Ts("x:Row",String(o.r)),Ts("x:Column",String(o.c)),c[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function yE(r){var t=[es,Gt("comments",null,{xmlns:t0[0]})],a=[];return t.push("<authors>"),r.forEach(function(n){n[1].forEach(function(i){var c=xa(i.a);a.indexOf(c)==-1&&(a.push(c),t.push("<author>"+c+"</author>")),i.T&&i.ID&&a.indexOf("tc="+i.ID)==-1&&(a.push("tc="+i.ID),t.push("<author>tc="+i.ID+"</author>"))})}),a.length==0&&(a.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),r.forEach(function(n){var i=0,c=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=a.indexOf("tc="+n[1][0].ID):n[1].forEach(function(m){m.a&&(i=a.indexOf(xa(m.a))),c.push(m.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),c.length<=1)t.push(Ts("t",xa(c[0]||"")));else{for(var o=`Comment:
    `+c[0]+`
`,u=1;u<c.length;++u)o+=`Reply:
    `+c[u]+`
`;t.push(Ts("t",xa(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function iY(r,t,a){var n=[es,Gt("ThreadedComments",null,{xmlns:hs.TCMNT}).replace(/[\/]>/,">")];return r.forEach(function(i){var c="";(i[1]||[]).forEach(function(o,u){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var m={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+a.tcid++).slice(-12)+"}"};u==0?c=m.id:m.parentId=c,o.ID=m.id,o.a&&(m.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(Gt("threadedComment",Ts("text",o.t||""),m))})}),n.push("</ThreadedComments>"),n.join("")}function oY(r){var t=[es,Gt("personList",null,{xmlns:hs.TCMNT,"xmlns:x":t0[0]}).replace(/[\/]>/,">")];return r.forEach(function(a,n){t.push(Gt("person",null,{displayName:a,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:a,providerId:"None"}))}),t.push("</personList>"),t.join("")}function lY(r){var t={};t.iauthor=r.read_shift(4);var a=_c(r);return t.rfx=a.s,t.ref=ga(a.s),r.l+=16,t}function cY(r,t){return t==null&&(t=xt(36)),t.write_shift(4,r[1].iauthor),a0(r[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var dY=Bs;function uY(r){return ps(r.slice(0,54))}function hY(r){var t=dn(),a=[];return Ct(t,628),Ct(t,630),r.forEach(function(n){n[1].forEach(function(i){a.indexOf(i.a)>-1||(a.push(i.a.slice(0,54)),Ct(t,632,uY(i.a)))})}),Ct(t,631),Ct(t,633),r.forEach(function(n){n[1].forEach(function(i){i.iauthor=a.indexOf(i.a);var c={s:ms(n[0]),e:ms(n[0])};Ct(t,635,cY([c,i])),i.t&&i.t.length>0&&Ct(t,637,pG(i)),Ct(t,636),delete i.iauthor})}),Ct(t,634),Ct(t,629),t.end()}function mY(r,t){t.FullPaths.forEach(function(a,n){if(n!=0){var i=a.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&wa.utils.cfb_add(r,i,t.FileIndex[n].content)}})}var vE=["xlsb","xlsm","xlam","biff8","xla"],pY=(function(){var r=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function a(n,i,c,o){var u=!1,m=!1;c.length==0?m=!0:c.charAt(0)=="["&&(m=!0,c=c.slice(1,-1)),o.length==0?u=!0:o.charAt(0)=="["&&(u=!0,o=o.slice(1,-1));var x=c.length>0?parseInt(c,10)|0:0,g=o.length>0?parseInt(o,10)|0:0;return u?g+=t.c:--g,m?x+=t.r:--x,i+(u?"":"$")+Ls(g)+(m?"":"$")+Es(x)}return function(i,c){return t=c,i.replace(r,a)}})(),jw=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Cw=(function(){return function(t,a){return t.replace(jw,function(n,i,c,o,u,m){var x=bw(o)-(c?0:a.c),g=fw(m)-(u?0:a.r),k=g==0?"":u?g+1:"["+g+"]",S=x==0?"":c?x+1:"["+x+"]";return i+"R"+k+"C"+S})}})();function xY(r,t){return r.replace(jw,function(a,n,i,c,o,u){return n+(i=="$"?i+c:Ls(bw(c)+t.c))+(o=="$"?o+u:Es(fw(u)+t.r))})}function gY(r){return r.length!=1}function Qa(r){r.l+=1}function jl(r,t){var a=r.read_shift(2);return[a&16383,a>>14&1,a>>15&1]}function wE(r,t,a){var n=2;if(a){if(a.biff>=2&&a.biff<=5)return kE(r);a.biff==12&&(n=4)}var i=r.read_shift(n),c=r.read_shift(n),o=jl(r),u=jl(r);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:c,c:u[0],cRel:u[1],rRel:u[2]}}}function kE(r){var t=jl(r),a=jl(r),n=r.read_shift(1),i=r.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:a[0],c:i,cRel:a[1],rRel:a[2]}}}function fY(r,t,a){if(a.biff<8)return kE(r);var n=r.read_shift(a.biff==12?4:2),i=r.read_shift(a.biff==12?4:2),c=jl(r),o=jl(r);return{s:{r:n,c:c[0],cRel:c[1],rRel:c[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function NE(r,t,a){if(a&&a.biff>=2&&a.biff<=5)return bY(r);var n=r.read_shift(a&&a.biff==12?4:2),i=jl(r);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function bY(r){var t=jl(r),a=r.read_shift(1);return{r:t[0],c:a,cRel:t[1],rRel:t[2]}}function yY(r){var t=r.read_shift(2),a=r.read_shift(2);return{r:t,c:a&255,fQuoted:!!(a&16384),cRel:a>>15,rRel:a>>15}}function vY(r,t,a){var n=a&&a.biff?a.biff:8;if(n>=2&&n<=5)return wY(r);var i=r.read_shift(n>=12?4:2),c=r.read_shift(2),o=(c&16384)>>14,u=(c&32768)>>15;if(c&=16383,u==1)for(;i>524287;)i-=1048576;if(o==1)for(;c>8191;)c=c-16384;return{r:i,c,cRel:o,rRel:u}}function wY(r){var t=r.read_shift(2),a=r.read_shift(1),n=(t&32768)>>15,i=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),i==1&&a>=128&&(a=a-256),{r:t,c:a,cRel:i,rRel:n}}function kY(r,t,a){var n=(r[r.l++]&96)>>5,i=wE(r,a.biff>=2&&a.biff<=5?6:8,a);return[n,i]}function NY(r,t,a){var n=(r[r.l++]&96)>>5,i=r.read_shift(2,"i"),c=8;if(a)switch(a.biff){case 5:r.l+=12,c=6;break;case 12:c=12;break}var o=wE(r,c,a);return[n,i,o]}function jY(r,t,a){var n=(r[r.l++]&96)>>5;return r.l+=a&&a.biff>8?12:a.biff<8?6:8,[n]}function CY(r,t,a){var n=(r[r.l++]&96)>>5,i=r.read_shift(2),c=8;if(a)switch(a.biff){case 5:r.l+=12,c=6;break;case 12:c=12;break}return r.l+=c,[n,i]}function TY(r,t,a){var n=(r[r.l++]&96)>>5,i=fY(r,t-1,a);return[n,i]}function SY(r,t,a){var n=(r[r.l++]&96)>>5;return r.l+=a.biff==2?6:a.biff==12?14:7,[n]}function U5(r){var t=r[r.l+1]&1,a=1;return r.l+=4,[t,a]}function EY(r,t,a){r.l+=2;for(var n=r.read_shift(a&&a.biff==2?1:2),i=[],c=0;c<=n;++c)i.push(r.read_shift(a&&a.biff==2?1:2));return i}function _Y(r,t,a){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(a&&a.biff==2?1:2)]}function PY(r,t,a){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(a&&a.biff==2?1:2)]}function IY(r){var t=r[r.l+1]&255?1:0;return r.l+=2,[t,r.read_shift(2)]}function $Y(r,t,a){var n=r[r.l+1]&255?1:0;return r.l+=a&&a.biff==2?3:4,[n]}function jE(r){var t=r.read_shift(1),a=r.read_shift(1);return[t,a]}function DY(r){return r.read_shift(2),jE(r)}function AY(r){return r.read_shift(2),jE(r)}function RY(r,t,a){var n=(r[r.l]&96)>>5;r.l+=1;var i=NE(r,0,a);return[n,i]}function MY(r,t,a){var n=(r[r.l]&96)>>5;r.l+=1;var i=vY(r,0,a);return[n,i]}function FY(r,t,a){var n=(r[r.l]&96)>>5;r.l+=1;var i=r.read_shift(2);a&&a.biff==5&&(r.l+=12);var c=NE(r,0,a);return[n,i,c]}function OY(r,t,a){var n=(r[r.l]&96)>>5;r.l+=1;var i=r.read_shift(a&&a.biff<=3?1:2);return[OQ[i],SE[i],n]}function LY(r,t,a){var n=r[r.l++],i=r.read_shift(1),c=a&&a.biff<=3?[n==88?-1:0,r.read_shift(1)]:BY(r);return[i,(c[0]===0?SE:FQ)[c[1]]]}function BY(r){return[r[r.l+1]>>7,r.read_shift(2)&32767]}function zY(r,t,a){r.l+=a&&a.biff==2?3:4}function VY(r,t,a){if(r.l++,a&&a.biff==12)return[r.read_shift(4,"i"),0];var n=r.read_shift(2),i=r.read_shift(a&&a.biff==2?1:2);return[n,i]}function UY(r){return r.l++,ph[r.read_shift(1)]}function HY(r){return r.l++,r.read_shift(2)}function qY(r){return r.l++,r.read_shift(1)!==0}function WY(r){return r.l++,s0(r)}function GY(r,t,a){return r.l++,iE(r,t-1,a)}function KY(r,t){var a=[r.read_shift(1)];if(t==12)switch(a[0]){case 2:a[0]=4;break;case 4:a[0]=16;break;case 0:a[0]=1;break;case 1:a[0]=2;break}switch(a[0]){case 4:a[1]=FG(r,1)?"TRUE":"FALSE",t!=12&&(r.l+=7);break;case 37:case 16:a[1]=ph[r[r.l]],r.l+=t==12?4:8;break;case 0:r.l+=8;break;case 1:a[1]=s0(r);break;case 2:a[1]=zG(r,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+a[0])}return a}function YY(r,t,a){for(var n=r.read_shift(a.biff==12?4:2),i=[],c=0;c!=n;++c)i.push((a.biff==12?_c:HG)(r));return i}function QY(r,t,a){var n=0,i=0;a.biff==12?(n=r.read_shift(4),i=r.read_shift(4)):(i=1+r.read_shift(1),n=1+r.read_shift(2)),a.biff>=2&&a.biff<8&&(--n,--i==0&&(i=256));for(var c=0,o=[];c!=n&&(o[c]=[]);++c)for(var u=0;u!=i;++u)o[c][u]=KY(r,a.biff);return o}function XY(r,t,a){var n=r.read_shift(1)>>>5&3,i=!a||a.biff>=8?4:2,c=r.read_shift(i);switch(a.biff){case 2:r.l+=5;break;case 3:case 4:r.l+=8;break;case 5:r.l+=12;break}return[n,0,c]}function JY(r,t,a){if(a.biff==5)return ZY(r);var n=r.read_shift(1)>>>5&3,i=r.read_shift(2),c=r.read_shift(4);return[n,i,c]}function ZY(r){var t=r.read_shift(1)>>>5&3,a=r.read_shift(2,"i");r.l+=8;var n=r.read_shift(2);return r.l+=12,[t,a,n]}function eQ(r,t,a){var n=r.read_shift(1)>>>5&3;r.l+=a&&a.biff==2?3:4;var i=r.read_shift(a&&a.biff==2?1:2);return[n,i]}function tQ(r,t,a){var n=r.read_shift(1)>>>5&3,i=r.read_shift(a&&a.biff==2?1:2);return[n,i]}function rQ(r,t,a){var n=r.read_shift(1)>>>5&3;return r.l+=4,a.biff<8&&r.l--,a.biff==12&&(r.l+=2),[n]}function aQ(r,t,a){var n=(r[r.l++]&96)>>5,i=r.read_shift(2),c=4;if(a)switch(a.biff){case 5:c=15;break;case 12:c=6;break}return r.l+=c,[n,i]}var sQ=Ui,nQ=Ui,iQ=Ui;function xh(r,t,a){return r.l+=2,[yY(r)]}function Tw(r){return r.l+=6,[]}var oQ=xh,lQ=Tw,cQ=Tw,dQ=xh;function CE(r){return r.l+=2,[sE(r),r.read_shift(2)&1]}var uQ=xh,hQ=CE,mQ=Tw,pQ=xh,xQ=xh,gQ=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function fQ(r){r.l+=2;var t=r.read_shift(2),a=r.read_shift(2),n=r.read_shift(4),i=r.read_shift(2),c=r.read_shift(2),o=gQ[a>>2&31];return{ixti:t,coltype:a&3,rt:o,idx:n,c:i,C:c}}function bQ(r){return r.l+=2,[r.read_shift(4)]}function yQ(r,t,a){return r.l+=5,r.l+=2,r.l+=a.biff==2?1:4,["PTGSHEET"]}function vQ(r,t,a){return r.l+=a.biff==2?4:5,["PTGENDSHEET"]}function wQ(r){var t=r.read_shift(1)>>>5&3,a=r.read_shift(2);return[t,a]}function kQ(r){var t=r.read_shift(1)>>>5&3,a=r.read_shift(2);return[t,a]}function NQ(r){return r.l+=4,[0,0]}var H5={1:{n:"PtgExp",f:VY},2:{n:"PtgTbl",f:iQ},3:{n:"PtgAdd",f:Qa},4:{n:"PtgSub",f:Qa},5:{n:"PtgMul",f:Qa},6:{n:"PtgDiv",f:Qa},7:{n:"PtgPower",f:Qa},8:{n:"PtgConcat",f:Qa},9:{n:"PtgLt",f:Qa},10:{n:"PtgLe",f:Qa},11:{n:"PtgEq",f:Qa},12:{n:"PtgGe",f:Qa},13:{n:"PtgGt",f:Qa},14:{n:"PtgNe",f:Qa},15:{n:"PtgIsect",f:Qa},16:{n:"PtgUnion",f:Qa},17:{n:"PtgRange",f:Qa},18:{n:"PtgUplus",f:Qa},19:{n:"PtgUminus",f:Qa},20:{n:"PtgPercent",f:Qa},21:{n:"PtgParen",f:Qa},22:{n:"PtgMissArg",f:Qa},23:{n:"PtgStr",f:GY},26:{n:"PtgSheet",f:yQ},27:{n:"PtgEndSheet",f:vQ},28:{n:"PtgErr",f:UY},29:{n:"PtgBool",f:qY},30:{n:"PtgInt",f:HY},31:{n:"PtgNum",f:WY},32:{n:"PtgArray",f:SY},33:{n:"PtgFunc",f:OY},34:{n:"PtgFuncVar",f:LY},35:{n:"PtgName",f:XY},36:{n:"PtgRef",f:RY},37:{n:"PtgArea",f:kY},38:{n:"PtgMemArea",f:eQ},39:{n:"PtgMemErr",f:sQ},40:{n:"PtgMemNoMem",f:nQ},41:{n:"PtgMemFunc",f:tQ},42:{n:"PtgRefErr",f:rQ},43:{n:"PtgAreaErr",f:jY},44:{n:"PtgRefN",f:MY},45:{n:"PtgAreaN",f:TY},46:{n:"PtgMemAreaN",f:wQ},47:{n:"PtgMemNoMemN",f:kQ},57:{n:"PtgNameX",f:JY},58:{n:"PtgRef3d",f:FY},59:{n:"PtgArea3d",f:NY},60:{n:"PtgRefErr3d",f:aQ},61:{n:"PtgAreaErr3d",f:CY},255:{}},jQ={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},CQ={1:{n:"PtgElfLel",f:CE},2:{n:"PtgElfRw",f:pQ},3:{n:"PtgElfCol",f:oQ},6:{n:"PtgElfRwV",f:xQ},7:{n:"PtgElfColV",f:dQ},10:{n:"PtgElfRadical",f:uQ},11:{n:"PtgElfRadicalS",f:mQ},13:{n:"PtgElfColS",f:lQ},15:{n:"PtgElfColSV",f:cQ},16:{n:"PtgElfRadicalLel",f:hQ},25:{n:"PtgList",f:fQ},29:{n:"PtgSxName",f:bQ},255:{}},TQ={0:{n:"PtgAttrNoop",f:NQ},1:{n:"PtgAttrSemi",f:$Y},2:{n:"PtgAttrIf",f:PY},4:{n:"PtgAttrChoose",f:EY},8:{n:"PtgAttrGoto",f:_Y},16:{n:"PtgAttrSum",f:zY},32:{n:"PtgAttrBaxcel",f:U5},33:{n:"PtgAttrBaxcel",f:U5},64:{n:"PtgAttrSpace",f:DY},65:{n:"PtgAttrSpaceSemi",f:AY},128:{n:"PtgAttrIfError",f:IY},255:{}};function SQ(r,t,a,n){if(n.biff<8)return Ui(r,t);for(var i=r.l+t,c=[],o=0;o!==a.length;++o)switch(a[o][0]){case"PtgArray":a[o][1]=QY(r,0,n),c.push(a[o][1]);break;case"PtgMemArea":a[o][2]=YY(r,a[o][1],n),c.push(a[o][2]);break;case"PtgExp":n&&n.biff==12&&(a[o][1][1]=r.read_shift(4),c.push(a[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+a[o][0]}return t=i-r.l,t!==0&&c.push(Ui(r,t)),c}function EQ(r,t,a){for(var n=r.l+t,i,c,o=[];n!=r.l;)t=n-r.l,c=r[r.l],i=H5[c]||H5[jQ[c]],(c===24||c===25)&&(i=(c===24?CQ:TQ)[r[r.l+1]]),!i||!i.f?Ui(r,t):o.push([i.n,i.f(r,t,a)]);return o}function _Q(r){for(var t=[],a=0;a<r.length;++a){for(var n=r[a],i=[],c=0;c<n.length;++c){var o=n[c];if(o)switch(o[0]){case 2:i.push('"'+o[1].replace(/"/g,'""')+'"');break;default:i.push(o[1])}else i.push("")}t.push(i.join(","))}return t.join(";")}var PQ={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function IQ(r,t){if(!r&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(r)?"'"+r+"'":r}function TE(r,t,a){if(!r)return"SH33TJSERR0";if(a.biff>8&&(!r.XTI||!r.XTI[t]))return r.SheetNames[t];if(!r.XTI)return"SH33TJSERR6";var n=r.XTI[t];if(a.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":r.XTI[t-1];if(!n)return"SH33TJSERR1";var i="";if(a.biff>8)switch(r[n[0]][0]){case 357:return i=n[1]==-1?"#REF":r.SheetNames[n[1]],n[1]==n[2]?i:i+":"+r.SheetNames[n[2]];case 358:return a.SID!=null?r.SheetNames[a.SID]:"SH33TJSSAME"+r[n[0]][0];case 355:default:return"SH33TJSSRC"+r[n[0]][0]}switch(r[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":r.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+r.SheetNames[n[2]];case 14849:return r[n[0]].slice(1).map(function(c){return c.Name}).join(";;");default:return r[n[0]][0][3]?(i=n[1]==-1?"#REF":r[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+r[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function q5(r,t,a){var n=TE(r,t,a);return n=="#REF"?n:IQ(n,a)}function Ud(r,t,a,n,i){var c=i&&i.biff||8,o={s:{c:0,r:0}},u=[],m,x,g,k=0,S=0,_,I="";if(!r[0]||!r[0][0])return"";for(var P=-1,b="",B=0,L=r[0].length;B<L;++B){var O=r[0][B];switch(O[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(m=u.pop(),x=u.pop(),P>=0){switch(r[0][P][1][0]){case 0:b=za(" ",r[0][P][1][1]);break;case 1:b=za("\r",r[0][P][1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][P][1][0])}x=x+b,P=-1}u.push(x+PQ[O[0]]+m);break;case"PtgIsect":m=u.pop(),x=u.pop(),u.push(x+" "+m);break;case"PtgUnion":m=u.pop(),x=u.pop(),u.push(x+","+m);break;case"PtgRange":m=u.pop(),x=u.pop(),u.push(x+":"+m);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":g=uu(O[1][1],o,i),u.push(hu(g,c));break;case"PtgRefN":g=a?uu(O[1][1],a,i):O[1][1],u.push(hu(g,c));break;case"PtgRef3d":k=O[1][1],g=uu(O[1][2],o,i),I=q5(n,k,i),u.push(I+"!"+hu(g,c));break;case"PtgFunc":case"PtgFuncVar":var te=O[1][0],ne=O[1][1];te||(te=0),te&=127;var be=te==0?[]:u.slice(-te);u.length-=te,ne==="User"&&(ne=be.shift()),u.push(ne+"("+be.join(",")+")");break;case"PtgBool":u.push(O[1]?"TRUE":"FALSE");break;case"PtgInt":u.push(O[1]);break;case"PtgNum":u.push(String(O[1]));break;case"PtgStr":u.push('"'+O[1].replace(/"/g,'""')+'"');break;case"PtgErr":u.push(O[1]);break;case"PtgAreaN":_=_5(O[1][1],a?{s:a}:o,i),u.push(nb(_,i));break;case"PtgArea":_=_5(O[1][1],o,i),u.push(nb(_,i));break;case"PtgArea3d":k=O[1][1],_=O[1][2],I=q5(n,k,i),u.push(I+"!"+nb(_,i));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":S=O[1][2];var H=(n.names||[])[S-1]||(n[0]||[])[S],z=H?H.Name:"SH33TJSNAME"+String(S);z&&z.slice(0,6)=="_xlfn."&&!i.xlfn&&(z=z.slice(6)),u.push(z);break;case"PtgNameX":var F=O[1][1];S=O[1][2];var v;if(i.biff<=5)F<0&&(F=-F),n[F]&&(v=n[F][S]);else{var ie="";if(((n[F]||[])[0]||[])[0]==14849||(((n[F]||[])[0]||[])[0]==1025?n[F][S]&&n[F][S].itab>0&&(ie=n.SheetNames[n[F][S].itab-1]+"!"):ie=n.SheetNames[S-1]+"!"),n[F]&&n[F][S])ie+=n[F][S].Name;else if(n[0]&&n[0][S])ie+=n[0][S].Name;else{var X=(TE(n,F,i)||"").split(";;");X[S-1]?ie=X[S-1]:ie+="SH33TJSERRX"}u.push(ie);break}v||(v={Name:"SH33TJSERRY"}),u.push(v.Name);break;case"PtgParen":var ae="(",We=")";if(P>=0){switch(b="",r[0][P][1][0]){case 2:ae=za(" ",r[0][P][1][1])+ae;break;case 3:ae=za("\r",r[0][P][1][1])+ae;break;case 4:We=za(" ",r[0][P][1][1])+We;break;case 5:We=za("\r",r[0][P][1][1])+We;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][P][1][0])}P=-1}u.push(ae+u.pop()+We);break;case"PtgRefErr":u.push("#REF!");break;case"PtgRefErr3d":u.push("#REF!");break;case"PtgExp":g={c:O[1][1],r:O[1][0]};var ct={c:a.c,r:a.r};if(n.sharedf[ga(g)]){var ft=n.sharedf[ga(g)];u.push(Ud(ft,o,ct,n,i))}else{var ot=!1;for(m=0;m!=n.arrayf.length;++m)if(x=n.arrayf[m],!(g.c<x[0].s.c||g.c>x[0].e.c)&&!(g.r<x[0].s.r||g.r>x[0].e.r)){u.push(Ud(x[1],o,ct,n,i)),ot=!0;break}ot||u.push(O[1])}break;case"PtgArray":u.push("{"+_Q(O[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":P=B;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":u.push("");break;case"PtgAreaErr":u.push("#REF!");break;case"PtgAreaErr3d":u.push("#REF!");break;case"PtgList":u.push("Table"+O[1].idx+"[#"+O[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(O));default:throw new Error("Unrecognized Formula Token: "+String(O))}var Ee=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&P>=0&&Ee.indexOf(r[0][B][0])==-1){O=r[0][P];var Ie=!0;switch(O[1][0]){case 4:Ie=!1;case 0:b=za(" ",O[1][1]);break;case 5:Ie=!1;case 1:b=za("\r",O[1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+O[1][0])}u.push((Ie?b:"")+u.pop()+(Ie?"":b)),P=-1}}if(u.length>1&&i.WTF)throw new Error("bad formula stack");return u[0]}function $Q(r){if(r==null){var t=xt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof r=="number")return bc(r);return bc(0)}function DQ(r,t,a,n,i){var c=yc(t,a,i),o=$Q(r.v),u=xt(6),m=33;u.write_shift(2,m),u.write_shift(4,0);for(var x=xt(r.bf.length),g=0;g<r.bf.length;++g)x[g]=r.bf[g];var k=Cs([c,o,u,x]);return k}function qx(r,t,a){var n=r.read_shift(4),i=EQ(r,n,a),c=r.read_shift(4),o=c>0?SQ(r,c,i,a):null;return[i,o]}var AQ=qx,Wx=qx,RQ=qx,MQ=qx,FQ={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},SE={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},OQ={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function LQ(r){var t="of:="+r.replace(jw,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function BQ(r){return r.replace(/\./,"!")}var mu=typeof Map<"u";function Sw(r,t,a){var n=0,i=r.length;if(a){if(mu?a.has(t):Object.prototype.hasOwnProperty.call(a,t)){for(var c=mu?a.get(t):a[t];n<c.length;++n)if(r[c[n]].t===t)return r.Count++,c[n]}}else for(;n<i;++n)if(r[n].t===t)return r.Count++,n;return r[i]={t},r.Count++,r.Unique++,a&&(mu?(a.has(t)||a.set(t,[]),a.get(t).push(i)):(Object.prototype.hasOwnProperty.call(a,t)||(a[t]=[]),a[t].push(i))),i}function Gx(r,t){var a={min:r+1,max:r+1},n=-1;return t.MDW&&(xo=t.MDW),t.width!=null?a.customWidth=1:t.wpx!=null?n=rx(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(a.width=dy(n),a.customWidth=1):t.width!=null&&(a.width=t.width),t.hidden&&(a.hidden=!0),t.level!=null&&(a.outlineLevel=a.level=t.level),a}function EE(r,t){if(r){var a=[.7,.7,.75,.75,.3,.3];r.left==null&&(r.left=a[0]),r.right==null&&(r.right=a[1]),r.top==null&&(r.top=a[2]),r.bottom==null&&(r.bottom=a[3]),r.header==null&&(r.header=a[4]),r.footer==null&&(r.footer=a[5])}}function Il(r,t,a){var n=a.revssf[t.z!=null?t.z:"General"],i=60,c=r.length;if(n==null&&a.ssf){for(;i<392;++i)if(a.ssf[i]==null){NS(t.z,i),a.ssf[i]=t.z,a.revssf[t.z]=n=i;break}}for(i=0;i!=c;++i)if(r[i].numFmtId===n)return i;return r[c]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},c}function zQ(r,t,a){if(r&&r["!ref"]){var n=Pa(r["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+a+"): "+r["!ref"])}}function VQ(r){if(r.length===0)return"";for(var t='<mergeCells count="'+r.length+'">',a=0;a!=r.length;++a)t+='<mergeCell ref="'+Za(r[a])+'"/>';return t+"</mergeCells>"}function UQ(r,t,a,n,i){var c=!1,o={},u=null;if(n.bookType!=="xlsx"&&t.vbaraw){var m=t.SheetNames[a];try{t.Workbook&&(m=t.Workbook.Sheets[a].CodeName||m)}catch{}c=!0,o.codeName=Ou(xa(m))}if(r&&r["!outline"]){var x={summaryBelow:1,summaryRight:1};r["!outline"].above&&(x.summaryBelow=0),r["!outline"].left&&(x.summaryRight=0),u=(u||"")+Gt("outlinePr",null,x)}!c&&!u||(i[i.length]=Gt("sheetPr",u,o))}var HQ=["objects","scenarios","selectLockedCells","selectUnlockedCells"],qQ=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function WQ(r){var t={sheet:1};return HQ.forEach(function(a){r[a]!=null&&r[a]&&(t[a]="1")}),qQ.forEach(function(a){r[a]!=null&&!r[a]&&(t[a]="0")}),r.password&&(t.password=uE(r.password).toString(16).toUpperCase()),Gt("sheetProtection",null,t)}function GQ(r){return EE(r),Gt("pageMargins",null,r)}function KQ(r,t){for(var a=["<cols>"],n,i=0;i!=t.length;++i)(n=t[i])&&(a[a.length]=Gt("col",null,Gx(i,n)));return a[a.length]="</cols>",a.join("")}function YQ(r,t,a,n){var i=typeof r.ref=="string"?r.ref:Za(r.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var c=a.Workbook.Names,o=In(i);o.s.r==o.e.r&&(o.e.r=In(t["!ref"]).e.r,i=Za(o));for(var u=0;u<c.length;++u){var m=c[u];if(m.Name=="_xlnm._FilterDatabase"&&m.Sheet==n){m.Ref="'"+a.SheetNames[n]+"'!"+i;break}}return u==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+a.SheetNames[n]+"'!"+i}),Gt("autoFilter",null,{ref:i})}function QQ(r,t,a,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Gt("sheetViews",Gt("sheetView",null,i),{})}function XQ(r,t,a,n){if(r.c&&a["!comments"].push([t,r.c]),r.v===void 0&&typeof r.f!="string"||r.t==="z"&&!r.f)return"";var i="",c=r.t,o=r.v;if(r.t!=="z")switch(r.t){case"b":i=r.v?"1":"0";break;case"n":i=""+r.v;break;case"e":i=ph[r.v];break;case"d":n&&n.cellDates?i=Qs(r.v,-1).toISOString():(r=hn(r),r.t="n",i=""+(r.v=un(Qs(r.v)))),typeof r.z>"u"&&(r.z=Va[14]);break;default:i=r.v;break}var u=Ts("v",xa(i)),m={r:t},x=Il(n.cellXfs,r,n);switch(x!==0&&(m.s=x),r.t){case"n":break;case"d":m.t="d";break;case"b":m.t="b";break;case"e":m.t="e";break;case"z":break;default:if(r.v==null){delete r.t;break}if(r.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){u=Ts("v",""+Sw(n.Strings,r.v,n.revStrings)),m.t="s";break}m.t="str";break}if(r.t!=c&&(r.t=c,r.v=o),typeof r.f=="string"&&r.f){var g=r.F&&r.F.slice(0,t.length)==t?{t:"array",ref:r.F}:null;u=Gt("f",xa(r.f),g)+(r.v!=null?u:"")}return r.l&&a["!links"].push([t,r.l]),r.D&&(m.cm=1),Gt("c",u,m)}function JQ(r,t,a,n){var i=[],c=[],o=Pa(r["!ref"]),u="",m,x="",g=[],k=0,S=0,_=r["!rows"],I=Array.isArray(r),P={r:x},b,B=-1;for(S=o.s.c;S<=o.e.c;++S)g[S]=Ls(S);for(k=o.s.r;k<=o.e.r;++k){for(c=[],x=Es(k),S=o.s.c;S<=o.e.c;++S){m=g[S]+x;var L=I?(r[k]||[])[S]:r[m];L!==void 0&&(u=XQ(L,m,r,t))!=null&&c.push(u)}(c.length>0||_&&_[k])&&(P={r:x},_&&_[k]&&(b=_[k],b.hidden&&(P.hidden=1),B=-1,b.hpx?B=ax(b.hpx):b.hpt&&(B=b.hpt),B>-1&&(P.ht=B,P.customHeight=1),b.level&&(P.outlineLevel=b.level)),i[i.length]=Gt("row",c.join(""),P))}if(_)for(;k<_.length;++k)_&&_[k]&&(P={r:k+1},b=_[k],b.hidden&&(P.hidden=1),B=-1,b.hpx?B=ax(b.hpx):b.hpt&&(B=b.hpt),B>-1&&(P.ht=B,P.customHeight=1),b.level&&(P.outlineLevel=b.level),i[i.length]=Gt("row","",P));return i.join("")}function _E(r,t,a,n){var i=[es,Gt("worksheet",null,{xmlns:t0[0],"xmlns:r":hs.r})],c=a.SheetNames[r],o=0,u="",m=a.Sheets[c];m==null&&(m={});var x=m["!ref"]||"A1",g=Pa(x);if(g.e.c>16383||g.e.r>1048575){if(t.WTF)throw new Error("Range "+x+" exceeds format limit A1:XFD1048576");g.e.c=Math.min(g.e.c,16383),g.e.r=Math.min(g.e.c,1048575),x=Za(g)}n||(n={}),m["!comments"]=[];var k=[];UQ(m,a,r,t,i),i[i.length]=Gt("dimension",null,{ref:x}),i[i.length]=QQ(m,t,r,a),t.sheetFormat&&(i[i.length]=Gt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),m["!cols"]!=null&&m["!cols"].length>0&&(i[i.length]=KQ(m,m["!cols"])),i[o=i.length]="<sheetData/>",m["!links"]=[],m["!ref"]!=null&&(u=JQ(m,t),u.length>0&&(i[i.length]=u)),i.length>o+1&&(i[i.length]="</sheetData>",i[o]=i[o].replace("/>",">")),m["!protect"]&&(i[i.length]=WQ(m["!protect"])),m["!autofilter"]!=null&&(i[i.length]=YQ(m["!autofilter"],m,a,r)),m["!merges"]!=null&&m["!merges"].length>0&&(i[i.length]=VQ(m["!merges"]));var S=-1,_,I=-1;return m["!links"].length>0&&(i[i.length]="<hyperlinks>",m["!links"].forEach(function(P){P[1].Target&&(_={ref:P[0]},P[1].Target.charAt(0)!="#"&&(I=pa(n,-1,xa(P[1].Target).replace(/#.*$/,""),na.HLINK),_["r:id"]="rId"+I),(S=P[1].Target.indexOf("#"))>-1&&(_.location=xa(P[1].Target.slice(S+1))),P[1].Tooltip&&(_.tooltip=xa(P[1].Tooltip)),i[i.length]=Gt("hyperlink",null,_))}),i[i.length]="</hyperlinks>"),delete m["!links"],m["!margins"]!=null&&(i[i.length]=GQ(m["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(i[i.length]=Ts("ignoredErrors",Gt("ignoredError",null,{numberStoredAsText:1,sqref:x}))),k.length>0&&(I=pa(n,-1,"../drawings/drawing"+(r+1)+".xml",na.DRAW),i[i.length]=Gt("drawing",null,{"r:id":"rId"+I}),m["!drawing"]=k),m["!comments"].length>0&&(I=pa(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",na.VML),i[i.length]=Gt("legacyDrawing",null,{"r:id":"rId"+I}),m["!legacy"]=I),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function ZQ(r,t){var a={},n=r.l+t;a.r=r.read_shift(4),r.l+=4;var i=r.read_shift(2);r.l+=1;var c=r.read_shift(1);return r.l=n,c&7&&(a.level=c&7),c&16&&(a.hidden=!0),c&32&&(a.hpt=i/20),a}function eX(r,t,a){var n=xt(145),i=(a["!rows"]||[])[r]||{};n.write_shift(4,r),n.write_shift(4,0);var c=320;i.hpx?c=ax(i.hpx)*20:i.hpt&&(c=i.hpt*20),n.write_shift(2,c),n.write_shift(1,0);var o=0;i.level&&(o|=i.level),i.hidden&&(o|=16),(i.hpx||i.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var u=0,m=n.l;n.l+=4;for(var x={r,c:0},g=0;g<16;++g)if(!(t.s.c>g+1<<10||t.e.c<g<<10)){for(var k=-1,S=-1,_=g<<10;_<g+1<<10;++_){x.c=_;var I=Array.isArray(a)?(a[x.r]||[])[x.c]:a[ga(x)];I&&(k<0&&(k=_),S=_)}k<0||(++u,n.write_shift(4,k),n.write_shift(4,S))}var P=n.l;return n.l=m,n.write_shift(4,u),n.l=P,n.length>n.l?n.slice(0,n.l):n}function tX(r,t,a,n){var i=eX(n,a,t);(i.length>17||(t["!rows"]||[])[n])&&Ct(r,0,i)}var rX=_c,aX=a0;function sX(){}function nX(r,t){var a={},n=r[r.l];return++r.l,a.above=!(n&64),a.left=!(n&128),r.l+=18,a.name=xG(r),a}function iX(r,t,a){a==null&&(a=xt(84+4*r.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),a.write_shift(1,n);for(var i=1;i<3;++i)a.write_shift(1,0);return Zp({auto:1},a),a.write_shift(-4,-1),a.write_shift(-4,-1),HS(r,a),a.slice(0,a.l)}function oX(r){var t=Kn(r);return[t]}function lX(r,t,a){return a==null&&(a=xt(8)),Tc(t,a)}function cX(r){var t=Sc(r);return[t]}function dX(r,t,a){return a==null&&(a=xt(4)),Ec(t,a)}function uX(r){var t=Kn(r),a=r.read_shift(1);return[t,a,"b"]}function hX(r,t,a){return a==null&&(a=xt(9)),Tc(t,a),a.write_shift(1,r.v?1:0),a}function mX(r){var t=Sc(r),a=r.read_shift(1);return[t,a,"b"]}function pX(r,t,a){return a==null&&(a=xt(5)),Ec(t,a),a.write_shift(1,r.v?1:0),a}function xX(r){var t=Kn(r),a=r.read_shift(1);return[t,a,"e"]}function gX(r,t,a){return a==null&&(a=xt(9)),Tc(t,a),a.write_shift(1,r.v),a}function fX(r){var t=Sc(r),a=r.read_shift(1);return[t,a,"e"]}function bX(r,t,a){return a==null&&(a=xt(8)),Ec(t,a),a.write_shift(1,r.v),a.write_shift(2,0),a.write_shift(1,0),a}function yX(r){var t=Kn(r),a=r.read_shift(4);return[t,a,"s"]}function vX(r,t,a){return a==null&&(a=xt(12)),Tc(t,a),a.write_shift(4,t.v),a}function wX(r){var t=Sc(r),a=r.read_shift(4);return[t,a,"s"]}function kX(r,t,a){return a==null&&(a=xt(8)),Ec(t,a),a.write_shift(4,t.v),a}function NX(r){var t=Kn(r),a=s0(r);return[t,a,"n"]}function jX(r,t,a){return a==null&&(a=xt(16)),Tc(t,a),bc(r.v,a),a}function CX(r){var t=Sc(r),a=s0(r);return[t,a,"n"]}function TX(r,t,a){return a==null&&(a=xt(12)),Ec(t,a),bc(r.v,a),a}function SX(r){var t=Kn(r),a=qS(r);return[t,a,"n"]}function EX(r,t,a){return a==null&&(a=xt(12)),Tc(t,a),WS(r.v,a),a}function _X(r){var t=Sc(r),a=qS(r);return[t,a,"n"]}function PX(r,t,a){return a==null&&(a=xt(8)),Ec(t,a),WS(r.v,a),a}function IX(r){var t=Kn(r),a=yw(r);return[t,a,"is"]}function $X(r){var t=Kn(r),a=Bs(r);return[t,a,"str"]}function DX(r,t,a){return a==null&&(a=xt(12+4*r.v.length)),Tc(t,a),ps(r.v,a),a.length>a.l?a.slice(0,a.l):a}function AX(r){var t=Sc(r),a=Bs(r);return[t,a,"str"]}function RX(r,t,a){return a==null&&(a=xt(8+4*r.v.length)),Ec(t,a),ps(r.v,a),a.length>a.l?a.slice(0,a.l):a}function MX(r,t,a){var n=r.l+t,i=Kn(r);i.r=a["!row"];var c=r.read_shift(1),o=[i,c,"b"];if(a.cellFormula){r.l+=2;var u=Wx(r,n-r.l,a);o[3]=Ud(u,null,i,a.supbooks,a)}else r.l=n;return o}function FX(r,t,a){var n=r.l+t,i=Kn(r);i.r=a["!row"];var c=r.read_shift(1),o=[i,c,"e"];if(a.cellFormula){r.l+=2;var u=Wx(r,n-r.l,a);o[3]=Ud(u,null,i,a.supbooks,a)}else r.l=n;return o}function OX(r,t,a){var n=r.l+t,i=Kn(r);i.r=a["!row"];var c=s0(r),o=[i,c,"n"];if(a.cellFormula){r.l+=2;var u=Wx(r,n-r.l,a);o[3]=Ud(u,null,i,a.supbooks,a)}else r.l=n;return o}function LX(r,t,a){var n=r.l+t,i=Kn(r);i.r=a["!row"];var c=Bs(r),o=[i,c,"str"];if(a.cellFormula){r.l+=2;var u=Wx(r,n-r.l,a);o[3]=Ud(u,null,i,a.supbooks,a)}else r.l=n;return o}var BX=_c,zX=a0;function VX(r,t){return t==null&&(t=xt(4)),t.write_shift(4,r),t}function UX(r,t){var a=r.l+t,n=_c(r),i=vw(r),c=Bs(r),o=Bs(r),u=Bs(r);r.l=a;var m={rfx:n,relId:i,loc:c,display:u};return o&&(m.Tooltip=o),m}function HX(r,t){var a=xt(50+4*(r[1].Target.length+(r[1].Tooltip||"").length));a0({s:ms(r[0]),e:ms(r[0])},a),ww("rId"+t,a);var n=r[1].Target.indexOf("#"),i=n==-1?"":r[1].Target.slice(n+1);return ps(i||"",a),ps(r[1].Tooltip||"",a),ps("",a),a.slice(0,a.l)}function qX(){}function WX(r,t,a){var n=r.l+t,i=GS(r),c=r.read_shift(1),o=[i];if(o[2]=c,a.cellFormula){var u=AQ(r,n-r.l,a);o[1]=u}else r.l=n;return o}function GX(r,t,a){var n=r.l+t,i=_c(r),c=[i];if(a.cellFormula){var o=MQ(r,n-r.l,a);c[1]=o,r.l=n}else r.l=n;return c}function KX(r,t,a){a==null&&(a=xt(18));var n=Gx(r,t);a.write_shift(-4,r),a.write_shift(-4,r),a.write_shift(4,(n.width||10)*256),a.write_shift(4,0);var i=0;return t.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),t.level&&(i|=t.level<<8),a.write_shift(2,i),a}var PE=["left","right","top","bottom","header","footer"];function YX(r){var t={};return PE.forEach(function(a){t[a]=s0(r)}),t}function QX(r,t){return t==null&&(t=xt(48)),EE(r),PE.forEach(function(a){bc(r[a],t)}),t}function XX(r){var t=r.read_shift(2);return r.l+=28,{RTL:t&32}}function JX(r,t,a){a==null&&(a=xt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),a.write_shift(2,n),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(2,0),a.write_shift(2,100),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(4,0),a}function ZX(r){var t=xt(24);return t.write_shift(4,4),t.write_shift(4,1),a0(r,t),t}function eJ(r,t){return t==null&&(t=xt(66)),t.write_shift(2,r.password?uE(r.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(a){a[1]?t.write_shift(4,r[a[0]]!=null&&!r[a[0]]?1:0):t.write_shift(4,r[a[0]]!=null&&r[a[0]]?0:1)}),t}function tJ(){}function rJ(){}function aJ(r,t,a,n,i,c,o){if(t.v===void 0)return!1;var u="";switch(t.t){case"b":u=t.v?"1":"0";break;case"d":t=hn(t),t.z=t.z||Va[14],t.v=un(Qs(t.v)),t.t="n";break;case"n":case"e":u=""+t.v;break;default:u=t.v;break}var m={r:a,c:n};switch(m.s=Il(i.cellXfs,t,i),t.l&&c["!links"].push([ga(m),t.l]),t.c&&c["!comments"].push([ga(m),t.c]),t.t){case"s":case"str":return i.bookSST?(u=Sw(i.Strings,t.v,i.revStrings),m.t="s",m.v=u,o?Ct(r,18,kX(t,m)):Ct(r,7,vX(t,m))):(m.t="str",o?Ct(r,17,RX(t,m)):Ct(r,6,DX(t,m))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Ct(r,13,PX(t,m)):Ct(r,2,EX(t,m)):o?Ct(r,16,TX(t,m)):Ct(r,5,jX(t,m)),!0;case"b":return m.t="b",o?Ct(r,15,pX(t,m)):Ct(r,4,hX(t,m)),!0;case"e":return m.t="e",o?Ct(r,14,bX(t,m)):Ct(r,3,gX(t,m)),!0}return o?Ct(r,12,dX(t,m)):Ct(r,1,lX(t,m)),!0}function sJ(r,t,a,n){var i=Pa(t["!ref"]||"A1"),c,o="",u=[];Ct(r,145);var m=Array.isArray(t),x=i.e.r;t["!rows"]&&(x=Math.max(i.e.r,t["!rows"].length-1));for(var g=i.s.r;g<=x;++g){o=Es(g),tX(r,t,i,g);var k=!1;if(g<=i.e.r)for(var S=i.s.c;S<=i.e.c;++S){g===i.s.r&&(u[S]=Ls(S)),c=u[S]+o;var _=m?(t[g]||[])[S]:t[c];if(!_){k=!1;continue}k=aJ(r,_,g,S,n,t,k)}}Ct(r,146)}function nJ(r,t){!t||!t["!merges"]||(Ct(r,177,VX(t["!merges"].length)),t["!merges"].forEach(function(a){Ct(r,176,zX(a))}),Ct(r,178))}function iJ(r,t){!t||!t["!cols"]||(Ct(r,390),t["!cols"].forEach(function(a,n){a&&Ct(r,60,KX(n,a))}),Ct(r,391))}function oJ(r,t){!t||!t["!ref"]||(Ct(r,648),Ct(r,649,ZX(Pa(t["!ref"]))),Ct(r,650))}function lJ(r,t,a){t["!links"].forEach(function(n){if(n[1].Target){var i=pa(a,-1,n[1].Target.replace(/#.*$/,""),na.HLINK);Ct(r,494,HX(n,i))}}),delete t["!links"]}function cJ(r,t,a,n){if(t["!comments"].length>0){var i=pa(n,-1,"../drawings/vmlDrawing"+(a+1)+".vml",na.VML);Ct(r,551,ww("rId"+i)),t["!legacy"]=i}}function dJ(r,t,a,n){if(t["!autofilter"]){var i=t["!autofilter"],c=typeof i.ref=="string"?i.ref:Za(i.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var o=a.Workbook.Names,u=In(c);u.s.r==u.e.r&&(u.e.r=In(t["!ref"]).e.r,c=Za(u));for(var m=0;m<o.length;++m){var x=o[m];if(x.Name=="_xlnm._FilterDatabase"&&x.Sheet==n){x.Ref="'"+a.SheetNames[n]+"'!"+c;break}}m==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+a.SheetNames[n]+"'!"+c}),Ct(r,161,a0(Pa(c))),Ct(r,162)}}function uJ(r,t,a){Ct(r,133),Ct(r,137,JX(t,a)),Ct(r,138),Ct(r,134)}function hJ(r,t){t["!protect"]&&Ct(r,535,eJ(t["!protect"]))}function mJ(r,t,a,n){var i=dn(),c=a.SheetNames[r],o=a.Sheets[c]||{},u=c;try{a&&a.Workbook&&(u=a.Workbook.Sheets[r].CodeName||u)}catch{}var m=Pa(o["!ref"]||"A1");if(m.e.c>16383||m.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");m.e.c=Math.min(m.e.c,16383),m.e.r=Math.min(m.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Ct(i,129),(a.vbaraw||o["!outline"])&&Ct(i,147,iX(u,o["!outline"])),Ct(i,148,aX(m)),uJ(i,o,a.Workbook),iJ(i,o),sJ(i,o,r,t),hJ(i,o),dJ(i,o,a,r),nJ(i,o),lJ(i,o,n),o["!margins"]&&Ct(i,476,QX(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&oJ(i,o),cJ(i,o,r,n),Ct(i,130),i.end()}function pJ(r,t){r.l+=10;var a=Bs(r);return{name:a}}var xJ=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function gJ(r){return!r.Workbook||!r.Workbook.WBProps?"false":GW(r.Workbook.WBProps.date1904)?"true":"false"}var fJ="][*?/\\".split("");function IE(r,t){if(r.length>31)throw new Error("Sheet names cannot exceed 31 chars");var a=!0;return fJ.forEach(function(n){if(r.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),a}function bJ(r,t,a){r.forEach(function(n,i){IE(n);for(var c=0;c<i;++c)if(n==r[c])throw new Error("Duplicate Sheet Name: "+n);if(a){var o=t&&t[i]&&t[i].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function yJ(r){if(!r||!r.SheetNames||!r.Sheets)throw new Error("Invalid Workbook");if(!r.SheetNames.length)throw new Error("Workbook is empty");var t=r.Workbook&&r.Workbook.Sheets||[];bJ(r.SheetNames,t,!!r.vbaraw);for(var a=0;a<r.SheetNames.length;++a)zQ(r.Sheets[r.SheetNames[a]],r.SheetNames[a],a)}function $E(r){var t=[es];t[t.length]=Gt("workbook",null,{xmlns:t0[0],"xmlns:r":hs.r});var a=r.Workbook&&(r.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};r.Workbook&&r.Workbook.WBProps&&(xJ.forEach(function(u){r.Workbook.WBProps[u[0]]!=null&&r.Workbook.WBProps[u[0]]!=u[1]&&(n[u[0]]=r.Workbook.WBProps[u[0]])}),r.Workbook.WBProps.CodeName&&(n.codeName=r.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Gt("workbookPr",null,n);var i=r.Workbook&&r.Workbook.Sheets||[],c=0;if(i&&i[0]&&i[0].Hidden){for(t[t.length]="<bookViews>",c=0;c!=r.SheetNames.length&&!(!i[c]||!i[c].Hidden);++c);c==r.SheetNames.length&&(c=0),t[t.length]='<workbookView firstSheet="'+c+'" activeTab="'+c+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",c=0;c!=r.SheetNames.length;++c){var o={name:xa(r.SheetNames[c].slice(0,31))};if(o.sheetId=""+(c+1),o["r:id"]="rId"+(c+1),i[c])switch(i[c].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=Gt("sheet",null,o)}return t[t.length]="</sheets>",a&&(t[t.length]="<definedNames>",r.Workbook&&r.Workbook.Names&&r.Workbook.Names.forEach(function(u){var m={name:u.Name};u.Comment&&(m.comment=u.Comment),u.Sheet!=null&&(m.localSheetId=""+u.Sheet),u.Hidden&&(m.hidden="1"),u.Ref&&(t[t.length]=Gt("definedName",xa(u.Ref),m))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function vJ(r,t){var a={};return a.Hidden=r.read_shift(4),a.iTabID=r.read_shift(4),a.strRelID=cy(r),a.name=Bs(r),a}function wJ(r,t){return t||(t=xt(127)),t.write_shift(4,r.Hidden),t.write_shift(4,r.iTabID),ww(r.strRelID,t),ps(r.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function kJ(r,t){var a={},n=r.read_shift(4);a.defaultThemeVersion=r.read_shift(4);var i=t>8?Bs(r):"";return i.length>0&&(a.CodeName=i),a.autoCompressPictures=!!(n&65536),a.backupFile=!!(n&64),a.checkCompatibility=!!(n&4096),a.date1904=!!(n&1),a.filterPrivacy=!!(n&8),a.hidePivotFieldList=!!(n&1024),a.promptedSolutions=!!(n&16),a.publishItems=!!(n&2048),a.refreshAllConnections=!!(n&262144),a.saveExternalLinkValues=!!(n&128),a.showBorderUnselectedTables=!!(n&4),a.showInkAnnotation=!!(n&32),a.showObjects=["all","placeholders","none"][n>>13&3],a.showPivotChartFilter=!!(n&32768),a.updateLinks=["userSet","never","always"][n>>8&3],a}function NJ(r,t){t||(t=xt(72));var a=0;return r&&r.filterPrivacy&&(a|=8),t.write_shift(4,a),t.write_shift(4,0),HS(r&&r.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function jJ(r,t,a){var n=r.l+t;r.l+=4,r.l+=1;var i=r.read_shift(4),c=gG(r),o=RQ(r,0,a),u=vw(r);r.l=n;var m={Name:c,Ptg:o};return i<268435455&&(m.Sheet=i),u&&(m.Comment=u),m}function CJ(r,t){Ct(r,143);for(var a=0;a!=t.SheetNames.length;++a){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[a]&&t.Workbook.Sheets[a].Hidden||0,i={Hidden:n,iTabID:a+1,strRelID:"rId"+(a+1),name:t.SheetNames[a]};Ct(r,156,wJ(i))}Ct(r,144)}function TJ(r,t){t||(t=xt(127));for(var a=0;a!=4;++a)t.write_shift(4,0);return ps("SheetJS",t),ps(qp.version,t),ps(qp.version,t),ps("7262",t),t.length>t.l?t.slice(0,t.l):t}function SJ(r,t){t||(t=xt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,r),t.write_shift(4,r);var a=120;return t.write_shift(1,a),t.length>t.l?t.slice(0,t.l):t}function EJ(r,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var a=t.Workbook.Sheets,n=0,i=-1,c=-1;n<a.length;++n)!a[n]||!a[n].Hidden&&i==-1?i=n:a[n].Hidden==1&&c==-1&&(c=n);c>i||(Ct(r,135),Ct(r,158,SJ(i)),Ct(r,136))}}function _J(r,t){var a=dn();return Ct(a,131),Ct(a,128,TJ()),Ct(a,153,NJ(r.Workbook&&r.Workbook.WBProps||null)),EJ(a,r),CJ(a,r),Ct(a,132),a.end()}function PJ(r,t,a){return(t.slice(-4)===".bin"?_J:$E)(r)}function IJ(r,t,a,n,i){return(t.slice(-4)===".bin"?mJ:_E)(r,a,n,i)}function $J(r,t,a){return(t.slice(-4)===".bin"?QK:pE)(r,a)}function DJ(r,t,a){return(t.slice(-4)===".bin"?NK:dE)(r,a)}function AJ(r,t,a){return(t.slice(-4)===".bin"?hY:yE)(r)}function RJ(r){return(r.slice(-4)===".bin"?sY:fE)()}function MJ(r,t){var a=[];return r.Props&&a.push($G(r.Props,t)),r.Custprops&&a.push(DG(r.Props,r.Custprops)),a.join("")}function FJ(){return""}function OJ(r,t){var a=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,i){var c=[];c.push(Gt("NumberFormat",null,{"ss:Format":xa(Va[n.numFmtId])}));var o={"ss:ID":"s"+(21+i)};a.push(Gt("Style",c.join(""),o))}),Gt("Styles",a.join(""))}function DE(r){return Gt("NamedRange",null,{"ss:Name":r.Name,"ss:RefersTo":"="+Cw(r.Ref,{r:0,c:0})})}function LJ(r){if(!((r||{}).Workbook||{}).Names)return"";for(var t=r.Workbook.Names,a=[],n=0;n<t.length;++n){var i=t[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||a.push(DE(i)))}return Gt("Names",a.join(""))}function BJ(r,t,a,n){if(!r||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,c=[],o=0;o<i.length;++o){var u=i[o];u.Sheet==a&&(u.Name.match(/^_xlfn\./)||c.push(DE(u)))}return c.join("")}function zJ(r,t,a,n){if(!r)return"";var i=[];if(r["!margins"]&&(i.push("<PageSetup>"),r["!margins"].header&&i.push(Gt("Header",null,{"x:Margin":r["!margins"].header})),r["!margins"].footer&&i.push(Gt("Footer",null,{"x:Margin":r["!margins"].footer})),i.push(Gt("PageMargins",null,{"x:Bottom":r["!margins"].bottom||"0.75","x:Left":r["!margins"].left||"0.7","x:Right":r["!margins"].right||"0.7","x:Top":r["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[a])if(n.Workbook.Sheets[a].Hidden)i.push(Gt("Visible",n.Workbook.Sheets[a].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var c=0;c<a&&!(n.Workbook.Sheets[c]&&!n.Workbook.Sheets[c].Hidden);++c);c==a&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),r["!protect"]&&(i.push(Ts("ProtectContents","True")),r["!protect"].objects&&i.push(Ts("ProtectObjects","True")),r["!protect"].scenarios&&i.push(Ts("ProtectScenarios","True")),r["!protect"].selectLockedCells!=null&&!r["!protect"].selectLockedCells?i.push(Ts("EnableSelection","NoSelection")):r["!protect"].selectUnlockedCells!=null&&!r["!protect"].selectUnlockedCells&&i.push(Ts("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){r["!protect"][o[0]]&&i.push("<"+o[1]+"/>")})),i.length==0?"":Gt("WorksheetOptions",i.join(""),{xmlns:kn.x})}function VJ(r){return r.map(function(t){var a=WW(t.t||""),n=Gt("ss:Data",a,{xmlns:"http://www.w3.org/TR/REC-html40"});return Gt("Comment",n,{"ss:Author":t.a})}).join("")}function UJ(r,t,a,n,i,c,o){if(!r||r.v==null&&r.f==null)return"";var u={};if(r.f&&(u["ss:Formula"]="="+xa(Cw(r.f,o))),r.F&&r.F.slice(0,t.length)==t){var m=ms(r.F.slice(t.length+1));u["ss:ArrayRange"]="RC:R"+(m.r==o.r?"":"["+(m.r-o.r)+"]")+"C"+(m.c==o.c?"":"["+(m.c-o.c)+"]")}if(r.l&&r.l.Target&&(u["ss:HRef"]=xa(r.l.Target),r.l.Tooltip&&(u["x:HRefScreenTip"]=xa(r.l.Tooltip))),a["!merges"])for(var x=a["!merges"],g=0;g!=x.length;++g)x[g].s.c!=o.c||x[g].s.r!=o.r||(x[g].e.c>x[g].s.c&&(u["ss:MergeAcross"]=x[g].e.c-x[g].s.c),x[g].e.r>x[g].s.r&&(u["ss:MergeDown"]=x[g].e.r-x[g].s.r));var k="",S="";switch(r.t){case"z":if(!n.sheetStubs)return"";break;case"n":k="Number",S=String(r.v);break;case"b":k="Boolean",S=r.v?"1":"0";break;case"e":k="Error",S=ph[r.v];break;case"d":k="DateTime",S=new Date(r.v).toISOString(),r.z==null&&(r.z=r.z||Va[14]);break;case"s":k="String",S=qW(r.v||"");break}var _=Il(n.cellXfs,r,n);u["ss:StyleID"]="s"+(21+_),u["ss:Index"]=o.c+1;var I=r.v!=null?S:"",P=r.t=="z"?"":'<Data ss:Type="'+k+'">'+I+"</Data>";return(r.c||[]).length>0&&(P+=VJ(r.c)),Gt("Cell",P,u)}function HJ(r,t){var a='<Row ss:Index="'+(r+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=mE(t.hpt)),t.hpx&&(a+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(a+=' ss:Hidden="1"')),a+">"}function qJ(r,t,a,n){if(!r["!ref"])return"";var i=Pa(r["!ref"]),c=r["!merges"]||[],o=0,u=[];r["!cols"]&&r["!cols"].forEach(function(b,B){Nw(b);var L=!!b.width,O=Gx(B,b),te={"ss:Index":B+1};L&&(te["ss:Width"]=tx(O.width)),b.hidden&&(te["ss:Hidden"]="1"),u.push(Gt("Column",null,te))});for(var m=Array.isArray(r),x=i.s.r;x<=i.e.r;++x){for(var g=[HJ(x,(r["!rows"]||[])[x])],k=i.s.c;k<=i.e.c;++k){var S=!1;for(o=0;o!=c.length;++o)if(!(c[o].s.c>k)&&!(c[o].s.r>x)&&!(c[o].e.c<k)&&!(c[o].e.r<x)){(c[o].s.c!=k||c[o].s.r!=x)&&(S=!0);break}if(!S){var _={r:x,c:k},I=ga(_),P=m?(r[x]||[])[k]:r[I];g.push(UJ(P,I,r,t,a,n,_))}}g.push("</Row>"),g.length>2&&u.push(g.join(""))}return u.join("")}function WJ(r,t,a){var n=[],i=a.SheetNames[r],c=a.Sheets[i],o=c?BJ(c,t,r,a):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=c?qJ(c,t,r,a):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(zJ(c,t,r,a)),n.join("")}function GJ(r,t){t||(t={}),r.SSF||(r.SSF=hn(Va)),r.SSF&&(Vx(),zx(r.SSF),t.revssf=Ux(r.SSF),t.revssf[r.SSF[65535]]=0,t.ssf=r.SSF,t.cellXfs=[],Il(t.cellXfs,{},{revssf:{General:0}}));var a=[];a.push(MJ(r,t)),a.push(FJ()),a.push(""),a.push("");for(var n=0;n<r.SheetNames.length;++n)a.push(Gt("Worksheet",WJ(n,t,r),{"ss:Name":xa(r.SheetNames[n])}));return a[2]=OJ(r,t),a[3]=LJ(r),es+Gt("Workbook",a.join(""),{xmlns:kn.ss,"xmlns:o":kn.o,"xmlns:x":kn.x,"xmlns:ss":kn.ss,"xmlns:dt":kn.dt,"xmlns:html":kn.html})}var lb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function KJ(r,t){var a=[],n=[],i=[],c=0,o,u=b5(I5,"n"),m=b5($5,"n");if(r.Props)for(o=Ps(r.Props),c=0;c<o.length;++c)(Object.prototype.hasOwnProperty.call(u,o[c])?a:Object.prototype.hasOwnProperty.call(m,o[c])?n:i).push([o[c],r.Props[o[c]]]);if(r.Custprops)for(o=Ps(r.Custprops),c=0;c<o.length;++c)Object.prototype.hasOwnProperty.call(r.Props||{},o[c])||(Object.prototype.hasOwnProperty.call(u,o[c])?a:Object.prototype.hasOwnProperty.call(m,o[c])?n:i).push([o[c],r.Custprops[o[c]]]);var x=[];for(c=0;c<i.length;++c)aE.indexOf(i[c][0])>-1||eE.indexOf(i[c][0])>-1||i[c][1]!=null&&x.push(i[c]);n.length&&wa.utils.cfb_add(t,"/SummaryInformation",F5(n,lb.SI,m,$5)),(a.length||x.length)&&wa.utils.cfb_add(t,"/DocumentSummaryInformation",F5(a,lb.DSI,u,I5,x.length?x:null,lb.UDI))}function YJ(r,t){var a=t||{},n=wa.utils.cfb_new({root:"R"}),i="/Workbook";switch(a.bookType||"xls"){case"xls":a.bookType="biff8";case"xla":a.bookType||(a.bookType="xla");case"biff8":i="/Workbook",a.biff=8;break;case"biff5":i="/Book",a.biff=5;break;default:throw new Error("invalid type "+a.bookType+" for XLS CFB")}return wa.utils.cfb_add(n,i,AE(r,a)),a.biff==8&&(r.Props||r.Custprops)&&KJ(r,n),a.biff==8&&r.vbaraw&&mY(n,wa.read(r.vbaraw,{type:typeof r.vbaraw=="string"?"binary":"buffer"})),n}var QJ={0:{f:ZQ},1:{f:oX},2:{f:SX},3:{f:xX},4:{f:uX},5:{f:NX},6:{f:$X},7:{f:yX},8:{f:LX},9:{f:OX},10:{f:MX},11:{f:FX},12:{f:cX},13:{f:_X},14:{f:fX},15:{f:mX},16:{f:CX},17:{f:AX},18:{f:wX},19:{f:yw},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:jJ},40:{},42:{},43:{f:$K},44:{f:PK},45:{f:RK},46:{f:FK},47:{f:MK},48:{},49:{f:cG},50:{},51:{f:ZK},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:dK},62:{f:IX},63:{f:nY},64:{f:tJ},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ui,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:XX},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:nX},148:{f:rX,p:16},151:{f:qX},152:{},153:{f:kJ},154:{},155:{},156:{f:vJ},157:{},158:{},159:{T:1,f:vK},160:{T:-1},161:{T:1,f:_c},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:BX},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:XK},336:{T:-1},337:{f:rY,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:cy},357:{},358:{},359:{},360:{T:1},361:{},362:{f:sK},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:WX},427:{f:GX},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:YX},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:sX},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:UX},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:cy},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:dY},633:{T:1},634:{T:-1},635:{T:1,f:lY},636:{T:-1},637:{f:mG},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:pJ},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:rJ},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Kt(r,t,a,n){var i=t;if(!isNaN(i)){var c=n||(a||[]).length||0,o=r.next(4);o.write_shift(2,i),o.write_shift(2,c),c>0&&gw(a)&&r.push(a)}}function XJ(r,t,a,n){var i=(a||[]).length||0;if(i<=8224)return Kt(r,t,a,i);var c=t;if(!isNaN(c)){for(var o=a.parts||[],u=0,m=0,x=0;x+(o[u]||8224)<=8224;)x+=o[u]||8224,u++;var g=r.next(4);for(g.write_shift(2,c),g.write_shift(2,x),r.push(a.slice(m,m+x)),m+=x;m<i;){for(g=r.next(4),g.write_shift(2,60),x=0;x+(o[u]||8224)<=8224;)x+=o[u]||8224,u++;g.write_shift(2,x),r.push(a.slice(m,m+x)),m+=x}}}function gh(r,t,a){return r||(r=xt(7)),r.write_shift(2,t),r.write_shift(2,a),r.write_shift(2,0),r.write_shift(1,0),r}function JJ(r,t,a,n){var i=xt(9);return gh(i,r,t),nE(a,n||"b",i),i}function ZJ(r,t,a){var n=xt(8+2*a.length);return gh(n,r,t),n.write_shift(1,a.length),n.write_shift(a.length,a,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function eZ(r,t,a,n){if(t.v!=null)switch(t.t){case"d":case"n":var i=t.t=="d"?un(Qs(t.v)):t.v;i==(i|0)&&i>=0&&i<65536?Kt(r,2,pK(a,n,i)):Kt(r,3,mK(a,n,i));return;case"b":case"e":Kt(r,5,JJ(a,n,t.v,t.t));return;case"s":case"str":Kt(r,4,ZJ(a,n,(t.v||"").slice(0,255)));return}Kt(r,1,gh(null,a,n))}function tZ(r,t,a,n){var i=Array.isArray(t),c=Pa(t["!ref"]||"A1"),o,u="",m=[];if(c.e.c>255||c.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");c.e.c=Math.min(c.e.c,255),c.e.r=Math.min(c.e.c,16383),o=Za(c)}for(var x=c.s.r;x<=c.e.r;++x){u=Es(x);for(var g=c.s.c;g<=c.e.c;++g){x===c.s.r&&(m[g]=Ls(g)),o=m[g]+u;var k=i?(t[x]||[])[g]:t[o];k&&eZ(r,k,x,g)}}}function rZ(r,t){for(var a=t||{},n=dn(),i=0,c=0;c<r.SheetNames.length;++c)r.SheetNames[c]==a.sheet&&(i=c);if(i==0&&a.sheet&&r.SheetNames[0]!=a.sheet)throw new Error("Sheet not found: "+a.sheet);return Kt(n,a.biff==4?1033:a.biff==3?521:9,kw(r,16,a)),tZ(n,r.Sheets[r.SheetNames[i]],i,a),Kt(n,10),n.end()}function aZ(r,t,a){Kt(r,49,QG({sz:12,name:"Arial"},a))}function sZ(r,t,a){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)t[i]!=null&&Kt(r,1054,ZG(i,t[i],a))})}function nZ(r,t){var a=xt(19);a.write_shift(4,2151),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,1),a.write_shift(4,0),Kt(r,2151,a),a=xt(39),a.write_shift(4,2152),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,0),a.write_shift(4,0),a.write_shift(2,1),a.write_shift(4,4),a.write_shift(2,0),lE(Pa(t["!ref"]||"A1"),a),a.write_shift(4,4),Kt(r,2152,a)}function iZ(r,t){for(var a=0;a<16;++a)Kt(r,224,L5({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Kt(r,224,L5(n,0,t))})}function oZ(r,t){for(var a=0;a<t["!links"].length;++a){var n=t["!links"][a];Kt(r,440,oK(n)),n[1].Tooltip&&Kt(r,2048,lK(n))}delete t["!links"]}function lZ(r,t){if(t){var a=0;t.forEach(function(n,i){++a<=256&&n&&Kt(r,125,uK(Gx(i,n),i))})}}function cZ(r,t,a,n,i){var c=16+Il(i.cellXfs,t,i);if(t.v==null&&!t.bf){Kt(r,513,yc(a,n,c));return}if(t.bf)Kt(r,6,DQ(t,a,n,i,c));else switch(t.t){case"d":case"n":var o=t.t=="d"?un(Qs(t.v)):t.v;Kt(r,515,aK(a,n,o,c));break;case"b":case"e":Kt(r,517,rK(a,n,t.v,c,i,t.t));break;case"s":case"str":if(i.bookSST){var u=Sw(i.Strings,t.v,i.revStrings);Kt(r,253,XG(a,n,u,c))}else Kt(r,516,JG(a,n,(t.v||"").slice(0,255),c,i));break;default:Kt(r,513,yc(a,n,c))}}function dZ(r,t,a){var n=dn(),i=a.SheetNames[r],c=a.Sheets[i]||{},o=(a||{}).Workbook||{},u=(o.Sheets||[])[r]||{},m=Array.isArray(c),x=t.biff==8,g,k="",S=[],_=Pa(c["!ref"]||"A1"),I=x?65536:16384;if(_.e.c>255||_.e.r>=I){if(t.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:IV16384");_.e.c=Math.min(_.e.c,255),_.e.r=Math.min(_.e.c,I-1)}Kt(n,2057,kw(a,16,t)),Kt(n,13,Un(1)),Kt(n,12,Un(100)),Kt(n,15,Ws(!0)),Kt(n,17,Ws(!1)),Kt(n,16,bc(.001)),Kt(n,95,Ws(!0)),Kt(n,42,Ws(!1)),Kt(n,43,Ws(!1)),Kt(n,130,Un(1)),Kt(n,128,tK()),Kt(n,131,Ws(!1)),Kt(n,132,Ws(!1)),x&&lZ(n,c["!cols"]),Kt(n,512,eK(_,t)),x&&(c["!links"]=[]);for(var P=_.s.r;P<=_.e.r;++P){k=Es(P);for(var b=_.s.c;b<=_.e.c;++b){P===_.s.r&&(S[b]=Ls(b)),g=S[b]+k;var B=m?(c[P]||[])[b]:c[g];B&&(cZ(n,B,P,b,t),x&&B.l&&c["!links"].push([g,B.l]))}}var L=u.CodeName||u.name||i;return x&&Kt(n,574,YG((o.Views||[])[0])),x&&(c["!merges"]||[]).length&&Kt(n,229,iK(c["!merges"])),x&&oZ(n,c),Kt(n,442,oE(L)),x&&nZ(n,c),Kt(n,10),n.end()}function uZ(r,t,a){var n=dn(),i=(r||{}).Workbook||{},c=i.Sheets||[],o=i.WBProps||{},u=a.biff==8,m=a.biff==5;if(Kt(n,2057,kw(r,5,a)),a.bookType=="xla"&&Kt(n,135),Kt(n,225,u?Un(1200):null),Kt(n,193,MG(2)),m&&Kt(n,191),m&&Kt(n,192),Kt(n,226),Kt(n,92,qG("SheetJS",a)),Kt(n,66,Un(u?1200:1252)),u&&Kt(n,353,Un(0)),u&&Kt(n,448),Kt(n,317,hK(r.SheetNames.length)),u&&r.vbaraw&&Kt(n,211),u&&r.vbaraw){var x=o.CodeName||"ThisWorkbook";Kt(n,442,oE(x))}Kt(n,156,Un(17)),Kt(n,25,Ws(!1)),Kt(n,18,Ws(!1)),Kt(n,19,Un(0)),u&&Kt(n,431,Ws(!1)),u&&Kt(n,444,Un(0)),Kt(n,61,KG()),Kt(n,64,Ws(!1)),Kt(n,141,Un(0)),Kt(n,34,Ws(gJ(r)=="true")),Kt(n,14,Ws(!0)),u&&Kt(n,439,Ws(!1)),Kt(n,218,Un(0)),aZ(n,r,a),sZ(n,r.SSF,a),iZ(n,a),u&&Kt(n,352,Ws(!1));var g=n.end(),k=dn();u&&Kt(k,140,cK()),u&&a.Strings&&XJ(k,252,GG(a.Strings)),Kt(k,10);var S=k.end(),_=dn(),I=0,P=0;for(P=0;P<r.SheetNames.length;++P)I+=(u?12:11)+(u?2:1)*r.SheetNames[P].length;var b=g.length+I+S.length;for(P=0;P<r.SheetNames.length;++P){var B=c[P]||{};Kt(_,133,WG({pos:b,hs:B.Hidden||0,dt:0,name:r.SheetNames[P]},a)),b+=t[P].length}var L=_.end();if(I!=L.length)throw new Error("BS8 "+I+" != "+L.length);var O=[];return g.length&&O.push(g),L.length&&O.push(L),S.length&&O.push(S),Cs(O)}function hZ(r,t){var a=t||{},n=[];r&&!r.SSF&&(r.SSF=hn(Va)),r&&r.SSF&&(Vx(),zx(r.SSF),a.revssf=Ux(r.SSF),a.revssf[r.SSF[65535]]=0,a.ssf=r.SSF),a.Strings=[],a.Strings.Count=0,a.Strings.Unique=0,Ew(a),a.cellXfs=[],Il(a.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={});for(var i=0;i<r.SheetNames.length;++i)n[n.length]=dZ(i,a,r);return n.unshift(uZ(r,n,a)),Cs(n)}function AE(r,t){for(var a=0;a<=r.SheetNames.length;++a){var n=r.Sheets[r.SheetNames[a]];if(!(!n||!n["!ref"])){var i=In(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+r.SheetNames[a]+"' extends beyond column IV (255).  Data may be lost.")}}var c=t||{};switch(c.biff||2){case 8:case 5:return hZ(r,t);case 4:case 3:case 2:return rZ(r,t)}throw new Error("invalid type "+c.bookType+" for BIFF")}function mZ(r,t,a,n){for(var i=r["!merges"]||[],c=[],o=t.s.c;o<=t.e.c;++o){for(var u=0,m=0,x=0;x<i.length;++x)if(!(i[x].s.r>a||i[x].s.c>o)&&!(i[x].e.r<a||i[x].e.c<o)){if(i[x].s.r<a||i[x].s.c<o){u=-1;break}u=i[x].e.r-i[x].s.r+1,m=i[x].e.c-i[x].s.c+1;break}if(!(u<0)){var g=ga({r:a,c:o}),k=n.dense?(r[a]||[])[o]:r[g],S=k&&k.v!=null&&(k.h||HW(k.w||(jo(k),k.w)||""))||"",_={};u>1&&(_.rowspan=u),m>1&&(_.colspan=m),n.editable?S='<span contenteditable="true">'+S+"</span>":k&&(_["data-t"]=k&&k.t||"z",k.v!=null&&(_["data-v"]=k.v),k.z!=null&&(_["data-z"]=k.z),k.l&&(k.l.Target||"#").charAt(0)!="#"&&(S='<a href="'+k.l.Target+'">'+S+"</a>")),_.id=(n.id||"sjs")+"-"+g,c.push(Gt("td",S,_))}}var I="<tr>";return I+c.join("")+"</tr>"}var pZ='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',xZ="</body></html>";function gZ(r,t,a){var n=[];return n.join("")+"<table"+(a&&a.id?' id="'+a.id+'"':"")+">"}function RE(r,t){var a=t||{},n=a.header!=null?a.header:pZ,i=a.footer!=null?a.footer:xZ,c=[n],o=In(r["!ref"]);a.dense=Array.isArray(r),c.push(gZ(r,o,a));for(var u=o.s.r;u<=o.e.r;++u)c.push(mZ(r,o,u,a));return c.push("</table>"+i),c.join("")}function ME(r,t,a){var n=a||{},i=0,c=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var o=typeof n.origin=="string"?ms(n.origin):n.origin;i=o.r,c=o.c}var u=t.getElementsByTagName("tr"),m=Math.min(n.sheetRows||1e7,u.length),x={s:{r:0,c:0},e:{r:i,c}};if(r["!ref"]){var g=In(r["!ref"]);x.s.r=Math.min(x.s.r,g.s.r),x.s.c=Math.min(x.s.c,g.s.c),x.e.r=Math.max(x.e.r,g.e.r),x.e.c=Math.max(x.e.c,g.e.c),i==-1&&(x.e.r=i=g.e.r+1)}var k=[],S=0,_=r["!rows"]||(r["!rows"]=[]),I=0,P=0,b=0,B=0,L=0,O=0;for(r["!cols"]||(r["!cols"]=[]);I<u.length&&P<m;++I){var te=u[I];if(W5(te)){if(n.display)continue;_[P]={hidden:!0}}var ne=te.children;for(b=B=0;b<ne.length;++b){var be=ne[b];if(!(n.display&&W5(be))){var H=be.hasAttribute("data-v")?be.getAttribute("data-v"):be.hasAttribute("v")?be.getAttribute("v"):KW(be.innerHTML),z=be.getAttribute("data-z")||be.getAttribute("z");for(S=0;S<k.length;++S){var F=k[S];F.s.c==B+c&&F.s.r<P+i&&P+i<=F.e.r&&(B=F.e.c+1-c,S=-1)}O=+be.getAttribute("colspan")||1,((L=+be.getAttribute("rowspan")||1)>1||O>1)&&k.push({s:{r:P+i,c:B+c},e:{r:P+i+(L||1)-1,c:B+c+(O||1)-1}});var v={t:"s",v:H},ie=be.getAttribute("data-t")||be.getAttribute("t")||"";H!=null&&(H.length==0?v.t=ie||"z":n.raw||H.trim().length==0||ie=="s"||(H==="TRUE"?v={t:"b",v:!0}:H==="FALSE"?v={t:"b",v:!1}:isNaN(po(H))?isNaN(Fu(H).getDate())||(v={t:"d",v:Qs(H)},n.cellDates||(v={t:"n",v:un(v.v)}),v.z=n.dateNF||Va[14]):v={t:"n",v:po(H)})),v.z===void 0&&z!=null&&(v.z=z);var X="",ae=be.getElementsByTagName("A");if(ae&&ae.length)for(var We=0;We<ae.length&&!(ae[We].hasAttribute("href")&&(X=ae[We].getAttribute("href"),X.charAt(0)!="#"));++We);X&&X.charAt(0)!="#"&&(v.l={Target:X}),n.dense?(r[P+i]||(r[P+i]=[]),r[P+i][B+c]=v):r[ga({c:B+c,r:P+i})]=v,x.e.c<B+c&&(x.e.c=B+c),B+=O}}++P}return k.length&&(r["!merges"]=(r["!merges"]||[]).concat(k)),x.e.r=Math.max(x.e.r,P-1+i),r["!ref"]=Za(x),P>=m&&(r["!fullref"]=Za((x.e.r=u.length-I+P-1+i,x))),r}function FE(r,t){var a=t||{},n=a.dense?[]:{};return ME(n,r,t)}function fZ(r,t){return Cc(FE(r,t),t)}function W5(r){var t="",a=bZ(r);return a&&(t=a(r).getPropertyValue("display")),t||(t=r.style&&r.style.display),t==="none"}function bZ(r){return r.ownerDocument.defaultView&&typeof r.ownerDocument.defaultView.getComputedStyle=="function"?r.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var yZ=(function(){var r=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Lu({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+r+"</office:document-styles>";return function(){return es+t}})(),G5=(function(){var r=function(c){return xa(c).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,a=`          <table:covered-table-cell/>
`,n=function(c,o,u){var m=[];m.push('      <table:table table:name="'+xa(o.SheetNames[u])+`" table:style-name="ta1">
`);var x=0,g=0,k=In(c["!ref"]||"A1"),S=c["!merges"]||[],_=0,I=Array.isArray(c);if(c["!cols"])for(g=0;g<=k.e.c;++g)m.push("        <table:table-column"+(c["!cols"][g]?' table:style-name="co'+c["!cols"][g].ods+'"':"")+`></table:table-column>
`);var P="",b=c["!rows"]||[];for(x=0;x<k.s.r;++x)P=b[x]?' table:style-name="ro'+b[x].ods+'"':"",m.push("        <table:table-row"+P+`></table:table-row>
`);for(;x<=k.e.r;++x){for(P=b[x]?' table:style-name="ro'+b[x].ods+'"':"",m.push("        <table:table-row"+P+`>
`),g=0;g<k.s.c;++g)m.push(t);for(;g<=k.e.c;++g){var B=!1,L={},O="";for(_=0;_!=S.length;++_)if(!(S[_].s.c>g)&&!(S[_].s.r>x)&&!(S[_].e.c<g)&&!(S[_].e.r<x)){(S[_].s.c!=g||S[_].s.r!=x)&&(B=!0),L["table:number-columns-spanned"]=S[_].e.c-S[_].s.c+1,L["table:number-rows-spanned"]=S[_].e.r-S[_].s.r+1;break}if(B){m.push(a);continue}var te=ga({r:x,c:g}),ne=I?(c[x]||[])[g]:c[te];if(ne&&ne.f&&(L["table:formula"]=xa(LQ(ne.f)),ne.F&&ne.F.slice(0,te.length)==te)){var be=In(ne.F);L["table:number-matrix-columns-spanned"]=be.e.c-be.s.c+1,L["table:number-matrix-rows-spanned"]=be.e.r-be.s.r+1}if(!ne){m.push(t);continue}switch(ne.t){case"b":O=ne.v?"TRUE":"FALSE",L["office:value-type"]="boolean",L["office:boolean-value"]=ne.v?"true":"false";break;case"n":O=ne.w||String(ne.v||0),L["office:value-type"]="float",L["office:value"]=ne.v||0;break;case"s":case"str":O=ne.v==null?"":ne.v,L["office:value-type"]="string";break;case"d":O=ne.w||Qs(ne.v).toISOString(),L["office:value-type"]="date",L["office:date-value"]=Qs(ne.v).toISOString(),L["table:style-name"]="ce1";break;default:m.push(t);continue}var H=r(O);if(ne.l&&ne.l.Target){var z=ne.l.Target;z=z.charAt(0)=="#"?"#"+BQ(z.slice(1)):z,z.charAt(0)!="#"&&!z.match(/^\w+:/)&&(z="../"+z),H=Gt("text:a",H,{"xlink:href":z.replace(/&/g,"&amp;")})}m.push("          "+Gt("table:table-cell",Gt("text:p",H,{}),L)+`
`)}m.push(`        </table:table-row>
`)}return m.push(`      </table:table>
`),m.join("")},i=function(c,o){c.push(` <office:automatic-styles>
`),c.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),c.push(`   <number:month number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:day number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:year/>
`),c.push(`  </number:date-style>
`);var u=0;o.SheetNames.map(function(x){return o.Sheets[x]}).forEach(function(x){if(x&&x["!cols"]){for(var g=0;g<x["!cols"].length;++g)if(x["!cols"][g]){var k=x["!cols"][g];if(k.width==null&&k.wpx==null&&k.wch==null)continue;Nw(k),k.ods=u;var S=x["!cols"][g].wpx+"px";c.push('  <style:style style:name="co'+u+`" style:family="table-column">
`),c.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+S+`"/>
`),c.push(`  </style:style>
`),++u}}});var m=0;o.SheetNames.map(function(x){return o.Sheets[x]}).forEach(function(x){if(x&&x["!rows"]){for(var g=0;g<x["!rows"].length;++g)if(x["!rows"][g]){x["!rows"][g].ods=m;var k=x["!rows"][g].hpx+"px";c.push('  <style:style style:name="ro'+m+`" style:family="table-row">
`),c.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+k+`"/>
`),c.push(`  </style:style>
`),++m}}}),c.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),c.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),c.push(`  </style:style>
`),c.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),c.push(` </office:automatic-styles>
`)};return function(o,u){var m=[es],x=Lu({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),g=Lu({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});u.bookType=="fods"?(m.push("<office:document"+x+g+`>
`),m.push(JS().replace(/office:document-meta/g,"office:meta"))):m.push("<office:document-content"+x+`>
`),i(m,o),m.push(`  <office:body>
`),m.push(`    <office:spreadsheet>
`);for(var k=0;k!=o.SheetNames.length;++k)m.push(n(o.Sheets[o.SheetNames[k]],o,k));return m.push(`    </office:spreadsheet>
`),m.push(`  </office:body>
`),u.bookType=="fods"?m.push("</office:document>"):m.push("</office:document-content>"),m.join("")}})();function OE(r,t){if(t.bookType=="fods")return G5(r,t);var a=hw(),n="",i=[],c=[];return n="mimetype",Ir(a,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Ir(a,n,G5(r,t)),i.push([n,"text/xml"]),c.push([n,"ContentFile"]),n="styles.xml",Ir(a,n,yZ(r,t)),i.push([n,"text/xml"]),c.push([n,"StylesFile"]),n="meta.xml",Ir(a,n,es+JS()),i.push([n,"text/xml"]),c.push([n,"MetadataFile"]),n="manifest.rdf",Ir(a,n,IG(c)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Ir(a,n,_G(i)),a}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function sx(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function vZ(r){return typeof TextEncoder<"u"?new TextEncoder().encode(r):di(Ou(r))}function wZ(r,t){e:for(var a=0;a<=r.length-t.length;++a){for(var n=0;n<t.length;++n)if(r[a+n]!=t[n])continue e;return!0}return!1}function Cl(r){var t=r.reduce(function(i,c){return i+c.length},0),a=new Uint8Array(t),n=0;return r.forEach(function(i){a.set(i,n),n+=i.length}),a}function kZ(r,t,a){var n=Math.floor(a==0?0:Math.LOG10E*Math.log(Math.abs(a)))+6176-20,i=a/Math.pow(10,n-6176);r[t+15]|=n>>7,r[t+14]|=(n&127)<<1;for(var c=0;i>=1;++c,i/=256)r[t+c]=i&255;r[t+15]|=a>=0?0:128}function Bu(r,t){var a=t?t[0]:0,n=r[a]&127;e:if(r[a++]>=128&&(n|=(r[a]&127)<<7,r[a++]<128||(n|=(r[a]&127)<<14,r[a++]<128)||(n|=(r[a]&127)<<21,r[a++]<128)||(n+=(r[a]&127)*Math.pow(2,28),++a,r[a++]<128)||(n+=(r[a]&127)*Math.pow(2,35),++a,r[a++]<128)||(n+=(r[a]&127)*Math.pow(2,42),++a,r[a++]<128)))break e;return t&&(t[0]=a),n}function ma(r){var t=new Uint8Array(7);t[0]=r&127;var a=1;e:if(r>127){if(t[a-1]|=128,t[a]=r>>7&127,++a,r<=16383||(t[a-1]|=128,t[a]=r>>14&127,++a,r<=2097151)||(t[a-1]|=128,t[a]=r>>21&127,++a,r<=268435455)||(t[a-1]|=128,t[a]=r/256>>>21&127,++a,r<=34359738367)||(t[a-1]|=128,t[a]=r/65536>>>21&127,++a,r<=4398046511103))break e;t[a-1]|=128,t[a]=r/16777216>>>21&127,++a}return t.slice(0,a)}function $d(r){var t=0,a=r[t]&127;e:if(r[t++]>=128){if(a|=(r[t]&127)<<7,r[t++]<128||(a|=(r[t]&127)<<14,r[t++]<128)||(a|=(r[t]&127)<<21,r[t++]<128))break e;a|=(r[t]&127)<<28}return a}function ss(r){for(var t=[],a=[0];a[0]<r.length;){var n=a[0],i=Bu(r,a),c=i&7;i=Math.floor(i/8);var o=0,u;if(i==0)break;switch(c){case 0:{for(var m=a[0];r[a[0]++]>=128;);u=r.slice(m,a[0])}break;case 5:o=4,u=r.slice(a[0],a[0]+o),a[0]+=o;break;case 1:o=8,u=r.slice(a[0],a[0]+o),a[0]+=o;break;case 2:o=Bu(r,a),u=r.slice(a[0],a[0]+o),a[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(c," for Field ").concat(i," at offset ").concat(n))}var x={data:u,type:c};t[i]==null?t[i]=[x]:t[i].push(x)}return t}function ys(r){var t=[];return r.forEach(function(a,n){a.forEach(function(i){i.data&&(t.push(ma(n*8+i.type)),i.type==2&&t.push(ma(i.data.length)),t.push(i.data))})}),Cl(t)}function oi(r){for(var t,a=[],n=[0];n[0]<r.length;){var i=Bu(r,n),c=ss(r.slice(n[0],n[0]+i));n[0]+=i;var o={id:$d(c[1][0].data),messages:[]};c[2].forEach(function(u){var m=ss(u.data),x=$d(m[3][0].data);o.messages.push({meta:m,data:r.slice(n[0],n[0]+x)}),n[0]+=x}),(t=c[3])!=null&&t[0]&&(o.merge=$d(c[3][0].data)>>>0>0),a.push(o)}return a}function dd(r){var t=[];return r.forEach(function(a){var n=[];n[1]=[{data:ma(a.id),type:0}],n[2]=[],a.merge!=null&&(n[3]=[{data:ma(+!!a.merge),type:0}]);var i=[];a.messages.forEach(function(o){i.push(o.data),o.meta[3]=[{type:0,data:ma(o.data.length)}],n[2].push({data:ys(o.meta),type:2})});var c=ys(n);t.push(ma(c.length)),t.push(c),i.forEach(function(o){return t.push(o)})}),Cl(t)}function NZ(r,t){if(r!=0)throw new Error("Unexpected Snappy chunk type ".concat(r));for(var a=[0],n=Bu(t,a),i=[];a[0]<t.length;){var c=t[a[0]]&3;if(c==0){var o=t[a[0]++]>>2;if(o<60)++o;else{var u=o-59;o=t[a[0]],u>1&&(o|=t[a[0]+1]<<8),u>2&&(o|=t[a[0]+2]<<16),u>3&&(o|=t[a[0]+3]<<24),o>>>=0,o++,a[0]+=u}i.push(t.slice(a[0],a[0]+o)),a[0]+=o;continue}else{var m=0,x=0;if(c==1?(x=(t[a[0]]>>2&7)+4,m=(t[a[0]++]&224)<<3,m|=t[a[0]++]):(x=(t[a[0]++]>>2)+1,c==2?(m=t[a[0]]|t[a[0]+1]<<8,a[0]+=2):(m=(t[a[0]]|t[a[0]+1]<<8|t[a[0]+2]<<16|t[a[0]+3]<<24)>>>0,a[0]+=4)),i=[Cl(i)],m==0)throw new Error("Invalid offset 0");if(m>i[0].length)throw new Error("Invalid offset beyond length");if(x>=m)for(i.push(i[0].slice(-m)),x-=m;x>=i[i.length-1].length;)i.push(i[i.length-1]),x-=i[i.length-1].length;i.push(i[0].slice(-m,-m+x))}}var g=Cl(i);if(g.length!=n)throw new Error("Unexpected length: ".concat(g.length," != ").concat(n));return g}function li(r){for(var t=[],a=0;a<r.length;){var n=r[a++],i=r[a]|r[a+1]<<8|r[a+2]<<16;a+=3,t.push(NZ(n,r.slice(a,a+i))),a+=i}if(a!==r.length)throw new Error("data is not a valid framed stream!");return Cl(t)}function ud(r){for(var t=[],a=0;a<r.length;){var n=Math.min(r.length-a,268435455),i=new Uint8Array(4);t.push(i);var c=ma(n),o=c.length;t.push(c),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(r.slice(a,a+n)),o+=n,i[0]=0,i[1]=o&255,i[2]=o>>8&255,i[3]=o>>16&255,a+=n}return Cl(t)}function cb(r,t){var a=new Uint8Array(32),n=sx(a),i=12,c=0;switch(a[0]=5,r.t){case"n":a[1]=2,kZ(a,i,r.v),c|=1,i+=16;break;case"b":a[1]=6,n.setFloat64(i,r.v?1:0,!0),c|=2,i+=8;break;case"s":if(t.indexOf(r.v)==-1)throw new Error("Value ".concat(r.v," missing from SST!"));a[1]=3,n.setUint32(i,t.indexOf(r.v),!0),c|=8,i+=4;break;default:throw"unsupported cell type "+r.t}return n.setUint32(8,c,!0),a.slice(0,i)}function db(r,t){var a=new Uint8Array(32),n=sx(a),i=12,c=0;switch(a[0]=3,r.t){case"n":a[2]=2,n.setFloat64(i,r.v,!0),c|=32,i+=8;break;case"b":a[2]=6,n.setFloat64(i,r.v?1:0,!0),c|=32,i+=8;break;case"s":if(t.indexOf(r.v)==-1)throw new Error("Value ".concat(r.v," missing from SST!"));a[2]=3,n.setUint32(i,t.indexOf(r.v),!0),c|=16,i+=4;break;default:throw"unsupported cell type "+r.t}return n.setUint32(4,c,!0),a.slice(0,i)}function Zo(r){var t=ss(r);return Bu(t[1][0].data)}function jZ(r,t,a){var n,i,c,o;if(!((n=r[6])!=null&&n[0])||!((i=r[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var u=((o=(c=r[8])==null?void 0:c[0])==null?void 0:o.data)&&$d(r[8][0].data)>0||!1;if(u)throw"Math only works with normal offsets";for(var m=0,x=sx(r[7][0].data),g=0,k=[],S=sx(r[4][0].data),_=0,I=[],P=0;P<t.length;++P){if(t[P]==null){x.setUint16(P*2,65535,!0),S.setUint16(P*2,65535);continue}x.setUint16(P*2,g,!0),S.setUint16(P*2,_,!0);var b,B;switch(typeof t[P]){case"string":b=cb({t:"s",v:t[P]},a),B=db({t:"s",v:t[P]},a);break;case"number":b=cb({t:"n",v:t[P]},a),B=db({t:"n",v:t[P]},a);break;case"boolean":b=cb({t:"b",v:t[P]},a),B=db({t:"b",v:t[P]},a);break;default:throw new Error("Unsupported value "+t[P])}k.push(b),g+=b.length,I.push(B),_+=B.length,++m}for(r[2][0].data=ma(m);P<r[7][0].data.length/2;++P)x.setUint16(P*2,65535,!0),S.setUint16(P*2,65535,!0);return r[6][0].data=Cl(k),r[3][0].data=Cl(I),m}function CZ(r,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var a=r.Sheets[r.SheetNames[0]];r.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=In(a["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Za(n)));var c=nx(a,{range:n,header:1}),o=["~Sh33tJ5~"];c.forEach(function(de){return de.forEach(function(ce){typeof ce=="string"&&o.push(ce)})});var u={},m=[],x=wa.read(t.numbers,{type:"base64"});x.FileIndex.map(function(de,ce){return[de,x.FullPaths[ce]]}).forEach(function(de){var ce=de[0],he=de[1];if(ce.type==2&&ce.name.match(/\.iwa/)){var q=ce.content,l=li(q),Xe=oi(l);Xe.forEach(function(qe){m.push(qe.id),u[qe.id]={deps:[],location:he,type:$d(qe.messages[0].meta[1][0].data)}})}}),m.sort(function(de,ce){return de-ce});var g=m.filter(function(de){return de>1}).map(function(de){return[de,ma(de)]});x.FileIndex.map(function(de,ce){return[de,x.FullPaths[ce]]}).forEach(function(de){var ce=de[0];if(de[1],!!ce.name.match(/\.iwa/)){var he=oi(li(ce.content));he.forEach(function(q){q.messages.forEach(function(l){g.forEach(function(Xe){q.messages.some(function(qe){return $d(qe.meta[1][0].data)!=11006&&wZ(qe.data,Xe[1])})&&u[Xe[0]].deps.push(q.id)})})})}});for(var k=wa.find(x,u[1].location),S=oi(li(k.content)),_,I=0;I<S.length;++I){var P=S[I];P.id==1&&(_=P)}var b=Zo(ss(_.messages[0].data)[1][0].data);for(k=wa.find(x,u[b].location),S=oi(li(k.content)),I=0;I<S.length;++I)P=S[I],P.id==b&&(_=P);for(b=Zo(ss(_.messages[0].data)[2][0].data),k=wa.find(x,u[b].location),S=oi(li(k.content)),I=0;I<S.length;++I)P=S[I],P.id==b&&(_=P);for(b=Zo(ss(_.messages[0].data)[2][0].data),k=wa.find(x,u[b].location),S=oi(li(k.content)),I=0;I<S.length;++I)P=S[I],P.id==b&&(_=P);var B=ss(_.messages[0].data);{B[6][0].data=ma(n.e.r+1),B[7][0].data=ma(n.e.c+1);var L=Zo(B[46][0].data),O=wa.find(x,u[L].location),te=oi(li(O.content));{for(var ne=0;ne<te.length&&te[ne].id!=L;++ne);if(te[ne].id!=L)throw"Bad ColumnRowUIDMapArchive";var be=ss(te[ne].messages[0].data);be[1]=[],be[2]=[],be[3]=[];for(var H=0;H<=n.e.c;++H){var z=[];z[1]=z[2]=[{type:0,data:ma(H+420690)}],be[1].push({type:2,data:ys(z)}),be[2].push({type:0,data:ma(H)}),be[3].push({type:0,data:ma(H)})}be[4]=[],be[5]=[],be[6]=[];for(var F=0;F<=n.e.r;++F)z=[],z[1]=z[2]=[{type:0,data:ma(F+726270)}],be[4].push({type:2,data:ys(z)}),be[5].push({type:0,data:ma(F)}),be[6].push({type:0,data:ma(F)});te[ne].messages[0].data=ys(be)}O.content=ud(dd(te)),O.size=O.content.length,delete B[46];var v=ss(B[4][0].data);{v[7][0].data=ma(n.e.r+1);var ie=ss(v[1][0].data),X=Zo(ie[2][0].data);O=wa.find(x,u[X].location),te=oi(li(O.content));{if(te[0].id!=X)throw"Bad HeaderStorageBucket";var ae=ss(te[0].messages[0].data);for(F=0;F<c.length;++F){var We=ss(ae[2][0].data);We[1][0].data=ma(F),We[4][0].data=ma(c[F].length),ae[2][F]={type:ae[2][0].type,data:ys(We)}}te[0].messages[0].data=ys(ae)}O.content=ud(dd(te)),O.size=O.content.length;var ct=Zo(v[2][0].data);O=wa.find(x,u[ct].location),te=oi(li(O.content));{if(te[0].id!=ct)throw"Bad HeaderStorageBucket";for(ae=ss(te[0].messages[0].data),H=0;H<=n.e.c;++H)We=ss(ae[2][0].data),We[1][0].data=ma(H),We[4][0].data=ma(n.e.r+1),ae[2][H]={type:ae[2][0].type,data:ys(We)};te[0].messages[0].data=ys(ae)}O.content=ud(dd(te)),O.size=O.content.length;var ft=Zo(v[4][0].data);(function(){for(var de=wa.find(x,u[ft].location),ce=oi(li(de.content)),he,q=0;q<ce.length;++q){var l=ce[q];l.id==ft&&(he=l)}var Xe=ss(he.messages[0].data);{Xe[3]=[];var qe=[];o.forEach(function(kt,Lt){qe[1]=[{type:0,data:ma(Lt)}],qe[2]=[{type:0,data:ma(1)}],qe[3]=[{type:2,data:vZ(kt)}],Xe[3].push({type:2,data:ys(qe)})})}he.messages[0].data=ys(Xe);var Ae=dd(ce),Oe=ud(Ae);de.content=Oe,de.size=de.content.length})();var ot=ss(v[3][0].data);{var Ee=ot[1][0];delete ot[2];var Ie=ss(Ee.data);{var _e=Zo(Ie[2][0].data);(function(){for(var de=wa.find(x,u[_e].location),ce=oi(li(de.content)),he,q=0;q<ce.length;++q){var l=ce[q];l.id==_e&&(he=l)}var Xe=ss(he.messages[0].data);{delete Xe[6],delete ot[7];var qe=new Uint8Array(Xe[5][0].data);Xe[5]=[];for(var Ae=0,Oe=0;Oe<=n.e.r;++Oe){var kt=ss(qe);Ae+=jZ(kt,c[Oe],o),kt[1][0].data=ma(Oe),Xe[5].push({data:ys(kt),type:2})}Xe[1]=[{type:0,data:ma(n.e.c+1)}],Xe[2]=[{type:0,data:ma(n.e.r+1)}],Xe[3]=[{type:0,data:ma(Ae)}],Xe[4]=[{type:0,data:ma(n.e.r+1)}]}he.messages[0].data=ys(Xe);var Lt=dd(ce),jt=ud(Lt);de.content=jt,de.size=de.content.length})()}Ee.data=ys(Ie)}v[3][0].data=ys(ot)}B[4][0].data=ys(v)}_.messages[0].data=ys(B);var re=dd(S),J=ud(re);return k.content=J,k.size=k.content.length,x}function TZ(r){return function(a){for(var n=0;n!=r.length;++n){var i=r[n];a[i[0]]===void 0&&(a[i[0]]=i[1]),i[2]==="n"&&(a[i[0]]=Number(a[i[0]]))}}}function Ew(r){TZ([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(r)}function SZ(r,t){return t.bookType=="ods"?OE(r,t):t.bookType=="numbers"?CZ(r,t):t.bookType=="xlsb"?EZ(r,t):_Z(r,t)}function EZ(r,t){jd=1024,r&&!r.SSF&&(r.SSF=hn(Va)),r&&r.SSF&&(Vx(),zx(r.SSF),t.revssf=Ux(r.SSF),t.revssf[r.SSF[65535]]=0,t.ssf=r.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,mu?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var a=t.bookType=="xlsb"?"bin":"xml",n=vE.indexOf(t.bookType)>-1,i=YS();Ew(t=t||{});var c=hw(),o="",u=0;if(t.cellXfs=[],Il(t.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),o="docProps/core.xml",Ir(c,o,ZS(r.Props,t)),i.coreprops.push(o),pa(t.rels,2,o,na.CORE_PROPS),o="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var m=[],x=0;x<r.SheetNames.length;++x)(r.Workbook.Sheets[x]||{}).Hidden!=2&&m.push(r.SheetNames[x]);r.Props.SheetNames=m}for(r.Props.Worksheets=r.Props.SheetNames.length,Ir(c,o,tE(r.Props)),i.extprops.push(o),pa(t.rels,3,o,na.EXT_PROPS),r.Custprops!==r.Props&&Ps(r.Custprops||{}).length>0&&(o="docProps/custom.xml",Ir(c,o,rE(r.Custprops)),i.custprops.push(o),pa(t.rels,4,o,na.CUST_PROPS)),u=1;u<=r.SheetNames.length;++u){var g={"!id":{}},k=r.Sheets[r.SheetNames[u-1]],S=(k||{})["!type"]||"sheet";switch(S){case"chart":default:o="xl/worksheets/sheet"+u+"."+a,Ir(c,o,IJ(u-1,o,t,r,g)),i.sheets.push(o),pa(t.wbrels,-1,"worksheets/sheet"+u+"."+a,na.WS[0])}if(k){var _=k["!comments"],I=!1,P="";_&&_.length>0&&(P="xl/comments"+u+"."+a,Ir(c,P,AJ(_,P)),i.comments.push(P),pa(g,-1,"../comments"+u+"."+a,na.CMNT),I=!0),k["!legacy"]&&I&&Ir(c,"xl/drawings/vmlDrawing"+u+".vml",bE(u,k["!comments"])),delete k["!comments"],delete k["!legacy"]}g["!id"].rId1&&Ir(c,XS(o),Pd(g))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+a,Ir(c,o,DJ(t.Strings,o,t)),i.strs.push(o),pa(t.wbrels,-1,"sharedStrings."+a,na.SST)),o="xl/workbook."+a,Ir(c,o,PJ(r,o)),i.workbooks.push(o),pa(t.rels,1,o,na.WB),o="xl/theme/theme1.xml",Ir(c,o,gE(r.Themes,t)),i.themes.push(o),pa(t.wbrels,-1,"theme/theme1.xml",na.THEME),o="xl/styles."+a,Ir(c,o,$J(r,o,t)),i.styles.push(o),pa(t.wbrels,-1,"styles."+a,na.STY),r.vbaraw&&n&&(o="xl/vbaProject.bin",Ir(c,o,r.vbaraw),i.vba.push(o),pa(t.wbrels,-1,"vbaProject.bin",na.VBA)),o="xl/metadata."+a,Ir(c,o,RJ(o)),i.metadata.push(o),pa(t.wbrels,-1,"metadata."+a,na.XLMETA),Ir(c,"[Content_Types].xml",QS(i,t)),Ir(c,"_rels/.rels",Pd(t.rels)),Ir(c,"xl/_rels/workbook."+a+".rels",Pd(t.wbrels)),delete t.revssf,delete t.ssf,c}function _Z(r,t){jd=1024,r&&!r.SSF&&(r.SSF=hn(Va)),r&&r.SSF&&(Vx(),zx(r.SSF),t.revssf=Ux(r.SSF),t.revssf[r.SSF[65535]]=0,t.ssf=r.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,mu?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var a="xml",n=vE.indexOf(t.bookType)>-1,i=YS();Ew(t=t||{});var c=hw(),o="",u=0;if(t.cellXfs=[],Il(t.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),o="docProps/core.xml",Ir(c,o,ZS(r.Props,t)),i.coreprops.push(o),pa(t.rels,2,o,na.CORE_PROPS),o="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var m=[],x=0;x<r.SheetNames.length;++x)(r.Workbook.Sheets[x]||{}).Hidden!=2&&m.push(r.SheetNames[x]);r.Props.SheetNames=m}r.Props.Worksheets=r.Props.SheetNames.length,Ir(c,o,tE(r.Props)),i.extprops.push(o),pa(t.rels,3,o,na.EXT_PROPS),r.Custprops!==r.Props&&Ps(r.Custprops||{}).length>0&&(o="docProps/custom.xml",Ir(c,o,rE(r.Custprops)),i.custprops.push(o),pa(t.rels,4,o,na.CUST_PROPS));var g=["SheetJ5"];for(t.tcid=0,u=1;u<=r.SheetNames.length;++u){var k={"!id":{}},S=r.Sheets[r.SheetNames[u-1]],_=(S||{})["!type"]||"sheet";switch(_){case"chart":default:o="xl/worksheets/sheet"+u+"."+a,Ir(c,o,_E(u-1,t,r,k)),i.sheets.push(o),pa(t.wbrels,-1,"worksheets/sheet"+u+"."+a,na.WS[0])}if(S){var I=S["!comments"],P=!1,b="";if(I&&I.length>0){var B=!1;I.forEach(function(L){L[1].forEach(function(O){O.T==!0&&(B=!0)})}),B&&(b="xl/threadedComments/threadedComment"+u+"."+a,Ir(c,b,iY(I,g,t)),i.threadedcomments.push(b),pa(k,-1,"../threadedComments/threadedComment"+u+"."+a,na.TCMNT)),b="xl/comments"+u+"."+a,Ir(c,b,yE(I)),i.comments.push(b),pa(k,-1,"../comments"+u+"."+a,na.CMNT),P=!0}S["!legacy"]&&P&&Ir(c,"xl/drawings/vmlDrawing"+u+".vml",bE(u,S["!comments"])),delete S["!comments"],delete S["!legacy"]}k["!id"].rId1&&Ir(c,XS(o),Pd(k))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+a,Ir(c,o,dE(t.Strings,t)),i.strs.push(o),pa(t.wbrels,-1,"sharedStrings."+a,na.SST)),o="xl/workbook."+a,Ir(c,o,$E(r)),i.workbooks.push(o),pa(t.rels,1,o,na.WB),o="xl/theme/theme1.xml",Ir(c,o,gE(r.Themes,t)),i.themes.push(o),pa(t.wbrels,-1,"theme/theme1.xml",na.THEME),o="xl/styles."+a,Ir(c,o,pE(r,t)),i.styles.push(o),pa(t.wbrels,-1,"styles."+a,na.STY),r.vbaraw&&n&&(o="xl/vbaProject.bin",Ir(c,o,r.vbaraw),i.vba.push(o),pa(t.wbrels,-1,"vbaProject.bin",na.VBA)),o="xl/metadata."+a,Ir(c,o,fE()),i.metadata.push(o),pa(t.wbrels,-1,"metadata."+a,na.XLMETA),g.length>1&&(o="xl/persons/person.xml",Ir(c,o,oY(g)),i.people.push(o),pa(t.wbrels,-1,"persons/person.xml",na.PEOPLE)),Ir(c,"[Content_Types].xml",QS(i,t)),Ir(c,"_rels/.rels",Pd(t.rels)),Ir(c,"xl/_rels/workbook."+a+".rels",Pd(t.wbrels)),delete t.revssf,delete t.ssf,c}function PZ(r,t){var a="";switch((t||{}).type||"base64"){case"buffer":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];case"base64":a=No(r.slice(0,12));break;case"binary":a=r;break;case"array":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3),a.charCodeAt(4),a.charCodeAt(5),a.charCodeAt(6),a.charCodeAt(7)]}function LE(r,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return hh(t.file,wa.write(r,{type:oa?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return wa.write(r,t)}function IZ(r,t){var a=hn(t||{}),n=SZ(r,a);return $Z(n,a)}function $Z(r,t){var a={},n=oa?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(a.compression="DEFLATE"),t.password)a.type=n;else switch(t.type){case"base64":a.type="base64";break;case"binary":a.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":a.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var i=r.FullPaths?wa.write(r,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[a.type]||a.type,compression:!!t.compression}):r.generate(a);if(typeof Deno<"u"&&typeof i=="string"){if(t.type=="binary"||t.type=="base64")return i;i=new Uint8Array(Bx(i))}return t.password&&typeof encrypt_agile<"u"?LE(encrypt_agile(i,t.password),t):t.type==="file"?hh(t.file,i):t.type=="string"?cu(i):i}function DZ(r,t){var a=t||{},n=YJ(r,a);return LE(n,a)}function Pi(r,t,a){a||(a="");var n=a+r;switch(t.type){case"base64":return Mu(Ou(n));case"binary":return Ou(n);case"string":return r;case"file":return hh(t.file,n,"utf8");case"buffer":return oa?Eo(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Pi(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function AZ(r,t){switch(t.type){case"base64":return Mu(r);case"binary":return r;case"string":return r;case"file":return hh(t.file,r,"binary");case"buffer":return oa?Eo(r,"binary"):r.split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function qm(r,t){switch(t.type){case"string":case"base64":case"binary":for(var a="",n=0;n<r.length;++n)a+=String.fromCharCode(r[n]);return t.type=="base64"?Mu(a):t.type=="string"?cu(a):a;case"file":return hh(t.file,r);case"buffer":return r;default:throw new Error("Unrecognized type "+t.type)}}function BE(r,t){lW(),yJ(r);var a=hn(t||{});if(a.cellStyles&&(a.cellNF=!0,a.sheetStubs=!0),a.type=="array"){a.type="binary";var n=BE(r,a);return a.type="array",Bx(n)}var i=0;if(a.sheet&&(typeof a.sheet=="number"?i=a.sheet:i=r.SheetNames.indexOf(a.sheet),!r.SheetNames[i]))throw new Error("Sheet not found: "+a.sheet+" : "+typeof a.sheet);switch(a.bookType||"xlsb"){case"xml":case"xlml":return Pi(GJ(r,a),a);case"slk":case"sylk":return Pi(gK.from_sheet(r.Sheets[r.SheetNames[i]],a),a);case"htm":case"html":return Pi(RE(r.Sheets[r.SheetNames[i]],a),a);case"txt":return AZ(zE(r.Sheets[r.SheetNames[i]],a),a);case"csv":return Pi(_w(r.Sheets[r.SheetNames[i]],a),a,"\uFEFF");case"dif":return Pi(fK.from_sheet(r.Sheets[r.SheetNames[i]],a),a);case"dbf":return qm(xK.from_sheet(r.Sheets[r.SheetNames[i]],a),a);case"prn":return Pi(bK.from_sheet(r.Sheets[r.SheetNames[i]],a),a);case"rtf":return Pi(CK.from_sheet(r.Sheets[r.SheetNames[i]],a),a);case"eth":return Pi(cE.from_sheet(r.Sheets[r.SheetNames[i]],a),a);case"fods":return Pi(OE(r,a),a);case"wk1":return qm(B5.sheet_to_wk1(r.Sheets[r.SheetNames[i]],a),a);case"wk3":return qm(B5.book_to_wk3(r,a),a);case"biff2":a.biff||(a.biff=2);case"biff3":a.biff||(a.biff=3);case"biff4":return a.biff||(a.biff=4),qm(AE(r,a),a);case"biff5":a.biff||(a.biff=5);case"biff8":case"xla":case"xls":return a.biff||(a.biff=8),DZ(r,a);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return IZ(r,a);default:throw new Error("Unrecognized bookType |"+a.bookType+"|")}}function RZ(r){if(!r.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},a=r.file.slice(r.file.lastIndexOf(".")).toLowerCase();a.match(/^\.[a-z]+$/)&&(r.bookType=a.slice(1)),r.bookType=t[r.bookType]||r.bookType}}function MZ(r,t,a){var n={};return n.type="file",n.file=t,RZ(n),BE(r,n)}function FZ(r,t,a,n,i,c,o,u){var m=Es(a),x=u.defval,g=u.raw||!Object.prototype.hasOwnProperty.call(u,"raw"),k=!0,S=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(S,"__rowNum__",{value:a,enumerable:!1})}catch{S.__rowNum__=a}else S.__rowNum__=a;if(!o||r[a])for(var _=t.s.c;_<=t.e.c;++_){var I=o?r[a][_]:r[n[_]+m];if(I===void 0||I.t===void 0){if(x===void 0)continue;c[_]!=null&&(S[c[_]]=x);continue}var P=I.v;switch(I.t){case"z":if(P==null)break;continue;case"e":P=P==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+I.t)}if(c[_]!=null){if(P==null)if(I.t=="e"&&P===null)S[c[_]]=null;else if(x!==void 0)S[c[_]]=x;else if(g&&P===null)S[c[_]]=null;else continue;else S[c[_]]=g&&(I.t!=="n"||I.t==="n"&&u.rawNumbers!==!1)?P:jo(I,P,u);P!=null&&(k=!1)}}return{row:S,isempty:k}}function nx(r,t){if(r==null||r["!ref"]==null)return[];var a={t:"n",v:0},n=0,i=1,c=[],o=0,u="",m={s:{r:0,c:0},e:{r:0,c:0}},x=t||{},g=x.range!=null?x.range:r["!ref"];switch(x.header===1?n=1:x.header==="A"?n=2:Array.isArray(x.header)?n=3:x.header==null&&(n=0),typeof g){case"string":m=Pa(g);break;case"number":m=Pa(r["!ref"]),m.s.r=g;break;default:m=g}n>0&&(i=0);var k=Es(m.s.r),S=[],_=[],I=0,P=0,b=Array.isArray(r),B=m.s.r,L=0,O={};b&&!r[B]&&(r[B]=[]);var te=x.skipHidden&&r["!cols"]||[],ne=x.skipHidden&&r["!rows"]||[];for(L=m.s.c;L<=m.e.c;++L)if(!(te[L]||{}).hidden)switch(S[L]=Ls(L),a=b?r[B][L]:r[S[L]+k],n){case 1:c[L]=L-m.s.c;break;case 2:c[L]=S[L];break;case 3:c[L]=x.header[L-m.s.c];break;default:if(a==null&&(a={w:"__EMPTY",t:"s"}),u=o=jo(a,null,x),P=O[o]||0,!P)O[o]=1;else{do u=o+"_"+P++;while(O[u]);O[o]=P,O[u]=1}c[L]=u}for(B=m.s.r+i;B<=m.e.r;++B)if(!(ne[B]||{}).hidden){var be=FZ(r,m,B,S,n,c,b,x);(be.isempty===!1||(n===1?x.blankrows!==!1:x.blankrows))&&(_[I++]=be.row)}return _.length=I,_}var K5=/"/g;function OZ(r,t,a,n,i,c,o,u){for(var m=!0,x=[],g="",k=Es(a),S=t.s.c;S<=t.e.c;++S)if(n[S]){var _=u.dense?(r[a]||[])[S]:r[n[S]+k];if(_==null)g="";else if(_.v!=null){m=!1,g=""+(u.rawNumbers&&_.t=="n"?_.v:jo(_,null,u));for(var I=0,P=0;I!==g.length;++I)if((P=g.charCodeAt(I))===i||P===c||P===34||u.forceQuotes){g='"'+g.replace(K5,'""')+'"';break}g=="ID"&&(g='"ID"')}else _.f!=null&&!_.F?(m=!1,g="="+_.f,g.indexOf(",")>=0&&(g='"'+g.replace(K5,'""')+'"')):g="";x.push(g)}return u.blankrows===!1&&m?null:x.join(o)}function _w(r,t){var a=[],n=t??{};if(r==null||r["!ref"]==null)return"";var i=Pa(r["!ref"]),c=n.FS!==void 0?n.FS:",",o=c.charCodeAt(0),u=n.RS!==void 0?n.RS:`
`,m=u.charCodeAt(0),x=new RegExp((c=="|"?"\\|":c)+"+$"),g="",k=[];n.dense=Array.isArray(r);for(var S=n.skipHidden&&r["!cols"]||[],_=n.skipHidden&&r["!rows"]||[],I=i.s.c;I<=i.e.c;++I)(S[I]||{}).hidden||(k[I]=Ls(I));for(var P=0,b=i.s.r;b<=i.e.r;++b)(_[b]||{}).hidden||(g=OZ(r,i,b,k,o,m,c,n),g!=null&&(n.strip&&(g=g.replace(x,"")),(g||n.blankrows!==!1)&&a.push((P++?u:"")+g)));return delete n.dense,a.join("")}function zE(r,t){t||(t={}),t.FS="	",t.RS=`
`;var a=_w(r,t);return a}function LZ(r){var t="",a,n="";if(r==null||r["!ref"]==null)return[];var i=Pa(r["!ref"]),c="",o=[],u,m=[],x=Array.isArray(r);for(u=i.s.c;u<=i.e.c;++u)o[u]=Ls(u);for(var g=i.s.r;g<=i.e.r;++g)for(c=Es(g),u=i.s.c;u<=i.e.c;++u)if(t=o[u]+c,a=x?(r[g]||[])[u]:r[t],n="",a!==void 0){if(a.F!=null){if(t=a.F,!a.f)continue;n=a.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(a.f!=null)n=a.f;else{if(a.t=="z")continue;if(a.t=="n"&&a.v!=null)n=""+a.v;else if(a.t=="b")n=a.v?"TRUE":"FALSE";else if(a.w!==void 0)n="'"+a.w;else{if(a.v===void 0)continue;a.t=="s"?n="'"+a.v:n=""+a.v}}m[m.length]=t+"="+n}return m}function VE(r,t,a){var n=a||{},i=+!n.skipHeader,c=r||{},o=0,u=0;if(c&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var m=typeof n.origin=="string"?ms(n.origin):n.origin;o=m.r,u=m.c}var x,g={s:{c:0,r:0},e:{c:u,r:o+t.length-1+i}};if(c["!ref"]){var k=Pa(c["!ref"]);g.e.c=Math.max(g.e.c,k.e.c),g.e.r=Math.max(g.e.r,k.e.r),o==-1&&(o=k.e.r+1,g.e.r=o+t.length-1+i)}else o==-1&&(o=0,g.e.r=t.length-1+i);var S=n.header||[],_=0;t.forEach(function(P,b){Ps(P).forEach(function(B){(_=S.indexOf(B))==-1&&(S[_=S.length]=B);var L=P[B],O="z",te="",ne=ga({c:u+_,r:o+b+i});x=zu(c,ne),L&&typeof L=="object"&&!(L instanceof Date)?c[ne]=L:(typeof L=="number"?O="n":typeof L=="boolean"?O="b":typeof L=="string"?O="s":L instanceof Date?(O="d",n.cellDates||(O="n",L=un(L)),te=n.dateNF||Va[14]):L===null&&n.nullError&&(O="e",L=0),x?(x.t=O,x.v=L,delete x.w,delete x.R,te&&(x.z=te)):c[ne]=x={t:O,v:L},te&&(x.z=te))})}),g.e.c=Math.max(g.e.c,u+S.length-1);var I=Es(o);if(i)for(_=0;_<S.length;++_)c[Ls(_+u)+I]={t:"s",v:S[_]};return c["!ref"]=Za(g),c}function BZ(r,t){return VE(null,r,t)}function zu(r,t,a){if(typeof t=="string"){if(Array.isArray(r)){var n=ms(t);return r[n.r]||(r[n.r]=[]),r[n.r][n.c]||(r[n.r][n.c]={t:"z"})}return r[t]||(r[t]={t:"z"})}return typeof t!="number"?zu(r,ga(t)):zu(r,ga({r:t,c:a||0}))}function zZ(r,t){if(typeof t=="number"){if(t>=0&&r.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var a=r.SheetNames.indexOf(t);if(a>-1)return a;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function VZ(){return{SheetNames:[],Sheets:{}}}function UZ(r,t,a,n){var i=1;if(!a)for(;i<=65535&&r.SheetNames.indexOf(a="Sheet"+i)!=-1;++i,a=void 0);if(!a||r.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&r.SheetNames.indexOf(a)>=0){var c=a.match(/(^.*?)(\d+)$/);i=c&&+c[2]||0;var o=c&&c[1]||a;for(++i;i<=65535&&r.SheetNames.indexOf(a=o+i)!=-1;++i);}if(IE(a),r.SheetNames.indexOf(a)>=0)throw new Error("Worksheet with name |"+a+"| already exists!");return r.SheetNames.push(a),r.Sheets[a]=t,a}function HZ(r,t,a){r.Workbook||(r.Workbook={}),r.Workbook.Sheets||(r.Workbook.Sheets=[]);var n=zZ(r,t);switch(r.Workbook.Sheets[n]||(r.Workbook.Sheets[n]={}),a){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+a)}r.Workbook.Sheets[n].Hidden=a}function qZ(r,t){return r.z=t,r}function UE(r,t,a){return t?(r.l={Target:t},a&&(r.l.Tooltip=a)):delete r.l,r}function WZ(r,t,a){return UE(r,"#"+t,a)}function GZ(r,t,a){r.c||(r.c=[]),r.c.push({t,a:a||"SheetJS"})}function KZ(r,t,a,n){for(var i=typeof t!="string"?t:Pa(t),c=typeof t=="string"?t:Za(t),o=i.s.r;o<=i.e.r;++o)for(var u=i.s.c;u<=i.e.c;++u){var m=zu(r,o,u);m.t="n",m.F=c,delete m.v,o==i.s.r&&u==i.s.c&&(m.f=a,n&&(m.D=!0))}return r}var ub={encode_col:Ls,encode_row:Es,encode_cell:ga,encode_range:Za,decode_col:bw,decode_row:fw,split_cell:lG,decode_cell:ms,decode_range:In,format_cell:jo,sheet_add_aoa:US,sheet_add_json:VE,sheet_add_dom:ME,aoa_to_sheet:r0,json_to_sheet:BZ,table_to_sheet:FE,table_to_book:fZ,sheet_to_csv:_w,sheet_to_txt:zE,sheet_to_json:nx,sheet_to_html:RE,sheet_to_formulae:LZ,sheet_to_row_object_array:nx,sheet_get_cell:zu,book_new:VZ,book_append_sheet:UZ,book_set_sheet_visibility:HZ,cell_set_number_format:qZ,cell_set_hyperlink:UE,cell_set_internal_link:WZ,cell_add_comment:GZ,sheet_set_array_formula:KZ,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const YZ=({orders:r,searchQuery:t,setSearchQuery:a,getCategoryDisplayName:n,formatDate:i,handleEditOrder:c,handleActivateOrder:o,handleDeleteOrder:u,theme:m="dark"})=>{const x=m==="dark",g={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},k={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:x?"#1F2937":"#F3F4F6",transition:{duration:.2}}},S=()=>{const _=r.map(B=>({Estado:B.status==="pending"?"Pendiente":B.status==="refunded"?"Reembolsado":"Activo",Producto:B.productName||"Sin nombre",Categoría:n(B.category),Monto:`S/ ${(B.amount||0).toFixed(2)}`,"Tiempo Restante":B.status==="pending"?"Pendiente":`${B.daysRemaining||0} día${(B.daysRemaining||0)===1?"":"s"}`,"Fecha de Inicio":B.startDate?i(B.startDate):"N/A","Fecha de Vencimiento":B.endDate?i(B.endDate):"N/A",Comprador:B.buyer||"N/A",Teléfono:B.buyerPhone||"N/A",Email:B.accountDetails?.email||"N/A",Contraseña:B.accountDetails?.password||"N/A",Perfil:B.accountDetails?.profile||"N/A",PIN:B.accountDetails?.pin||"N/A"})),I=ub.json_to_sheet(_),P=ub.book_new();ub.book_append_sheet(P,I,"Pedidos");const b=new Date().toISOString().slice(0,10).replace(/-/g,"");MZ(P,`orders_export_${b}.xlsx`)};return e.jsxs(j.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-7xl mx-auto border ${x?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,variants:g,initial:"hidden",animate:"visible",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[e.jsxs("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight flex items-center bg-clip-text text-transparent bg-gradient-to-r ${x?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:[e.jsx(Br,{className:"mr-2"})," Mis Pedidos"]}),e.jsxs("div",{className:"flex items-center gap-4 w-full sm:w-auto mt-4 sm:mt-0",children:[e.jsxs("div",{className:"relative flex-1 sm:w-64",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:`w-full px-3 py-2 rounded-xl ${x?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all duration-300 text-sm placeholder-gray-500`,value:t,onChange:_=>a(_.target.value)}),e.jsx(Jr,{className:`absolute right-3 top-2.5 ${x?"text-gray-400":"text-gray-500"}`,size:16})]}),e.jsx(j.button,{onClick:S,className:`p-2 rounded-xl ${x?"bg-green-500 hover:bg-green-600 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Descargar pedidos como Excel",children:e.jsx(Vq,{size:18})})]})]}),r.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:`min-w-full border rounded-xl ${x?"bg-gray-800/50 border-gray-600/50":"bg-gray-100/50 border-gray-200/50"}`,children:[e.jsx("thead",{children:e.jsxs("tr",{className:`text-left text-xs font-medium uppercase tracking-wider ${x?"bg-gray-700/50 text-gray-300":"bg-gray-200/50 text-gray-700"}`,children:[e.jsx("th",{className:"px-4 py-3 border-b",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 border-b",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 border-b",children:"Categoría"}),e.jsx("th",{className:"px-4 py-3 border-b",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 border-b",children:"Tiempo Restante"}),e.jsx("th",{className:"px-4 py-3 border-b",children:"Fecha de Inicio"}),e.jsx("th",{className:"px-4 py-3 border-b",children:"Fecha de Vencimiento"}),e.jsx("th",{className:"px-4 py-3 border-b",children:"Comprador"}),e.jsx("th",{className:"px-4 py-3 border-b",children:"Teléfono"}),e.jsx("th",{className:"px-4 py-3 border-b",children:"Email"}),e.jsx("th",{className:"px-4 py-3 border-b",children:"Contraseña"}),e.jsx("th",{className:"px-4 py-3 border-b",children:"Perfil"}),e.jsx("th",{className:"px-4 py-3 border-b",children:"PIN"}),e.jsx("th",{className:"px-4 py-3 border-b",children:"Acciones"})]})}),e.jsx("tbody",{children:r.filter(_=>(_.productName||"").toLowerCase().includes(t.toLowerCase())||(_.category||"").toLowerCase().includes(t.toLowerCase())).map(_=>{const I=_.status==="pending",P=_.status==="refunded",b=_.daysRemaining||0,B=_.timeElapsedPercentage||0;let L;B<70?L=x?"bg-green-500":"bg-green-600":B<90?L=x?"bg-orange-500":"bg-orange-600":L=x?"bg-red-500":"bg-red-600";const O=P?e.jsx(Xr,{className:"text-red-500",title:"Reembolsado"}):I?e.jsx(ra,{className:"text-yellow-500",title:"Pendiente"}):e.jsx(Hp,{className:"text-green-500",title:"Activo"}),te=_.buyerPhone?_.buyerPhone.replace(/^\+/,"").replace(/\D/g,""):null,ne=encodeURIComponent(`Hola ${_.buyer||"Cliente"} 👋🏻

🍿 Tu suscripción a ${_.productName||"Sin nombre"} 🍿
✉️ Usuario: ${_.accountDetails?.email||"N/A"}
🔐 Contraseña: ${_.accountDetails?.password||"N/A"}
🌍 URL: N/A
👥 Perfil: ${_.accountDetails?.profile||"N/A"}
🔐 PIN: ${_.accountDetails?.pin||"N/A"}
⏳ Contratado: ${b} día${b===1?"":"s"}
🗓 Compra: ${_.startDate?i(_.startDate):"N/A"}
🗓 Vencimiento: ${_.endDate?i(_.endDate):"N/A"}
⚠️ Condiciones de uso: USO. - Ud. Está adquiriendo una ${_.productName||"suscripción"}.
👤 Proveedor: BlackStreaming
📞 Teléfono: ${_.buyerPhone||"N/A"}
🎬🍿🎬🍿🎬🍿🎬🍿🎬🍿🎬🍿
¡¡Muchas gracias por su compra!!
¿En qué puedo ayudarte hoy? Por favor, indícame tu consulta o problema.`),be=encodeURIComponent(`Hola ${_.buyer||"Cliente"} 👋🏻

🍿 Tu suscripción a ${_.productName||"Sin nombre"} 🍿
✉️ Usuario: ${_.accountDetails?.email||"N/A"}
🔐 Contraseña: ${_.accountDetails?.password||"N/A"}
🌍 URL: N/A
👥 Perfil: ${_.accountDetails?.profile||"N/A"}
🔐 PIN: ${_.accountDetails?.pin||"N/A"}
⏳ Contratado: ${I?"Pendiente de activación":`${b} día${b===1?"":"s"}`}
🗓 Compra: ${_.startDate?i(_.startDate):"N/A"}
🗓 Vencimiento: ${_.endDate?i(_.endDate):"N/A"}
⚠️ Condiciones de uso: USO. - Ud. Está adquiriendo una ${_.productName||"suscripción"}.
👤 Proveedor: BlackStreaming
📞 Teléfono: ${_.buyerPhone||"N/A"}
🎬🍿🎬🍿🎬🍿🎬🍿🎬🍿🎬🍿
¡¡${I?"Activa tu suscripción para comenzar a disfrutar":"Te recomendamos renovar a tiempo"}!!`);return e.jsxs(j.tr,{className:`${x?"text-gray-300":"text-gray-700"} border-b ${x?"border-gray-600/50":"border-gray-200/50"}`,variants:k,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("td",{className:"px-4 py-3",children:O}),e.jsx("td",{className:"px-4 py-3",children:_.productName||"Sin nombre"}),e.jsx("td",{className:"px-4 py-3",children:n(_.category)}),e.jsxs("td",{className:"px-4 py-3",children:["S/ ",(_.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-24 rounded-full h-1 ${x?"bg-gray-600/40":"bg-gray-300/40"}`,children:e.jsx("div",{className:`h-1 rounded-full ${L}`,style:{width:`${Math.min(B,100)}%`}})}),e.jsx("span",{className:`text-xs ${L.replace("bg-","text-")}`,children:I?"Pendiente":`${b} día${b===1?"":"s"}`})]})}),e.jsx("td",{className:"px-4 py-3",children:_.startDate?i(_.startDate):"N/A"}),e.jsx("td",{className:"px-4 py-3",children:_.endDate?i(_.endDate):"N/A"}),e.jsx("td",{className:"px-4 py-3",children:_.buyer||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:_.buyerPhone||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:_.accountDetails?.email||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:_.accountDetails?.password||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:_.accountDetails?.profile||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:_.accountDetails?.pin||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j.button,{onClick:()=>c(_),className:`p-2 rounded-xl ${x?"bg-blue-500 hover:bg-blue-600 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Editar cuenta",children:e.jsx(XT,{size:16})}),_.status==="pending"&&e.jsx(j.button,{onClick:()=>o(_.id),className:`p-2 rounded-xl ${x?"bg-green-500 hover:bg-green-600 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Activar pedido",children:e.jsx(Hp,{size:16})}),te&&e.jsxs(e.Fragment,{children:[e.jsx(j.a,{href:`https://wa.me/${te}?text=${ne}`,target:"_blank",rel:"noopener noreferrer",className:`p-2 rounded-xl ${x?"bg-teal-500 hover:bg-teal-600 text-white":"bg-teal-600 hover:bg-teal-700 text-white"}`,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Contactar cliente",children:e.jsx(Cn,{size:16})}),!P&&e.jsx(j.a,{href:`https://wa.me/${te}?text=${be}`,target:"_blank",rel:"noopener noreferrer",className:`p-2.5 rounded-xl ${x?"bg-amber-500 hover:bg-amber-600 text-white":"bg-amber-600 hover:bg-amber-700 text-white"}`,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Notificar cliente sobre estado o vencimiento",children:e.jsx(Up,{size:18})})]}),e.jsx(j.button,{onClick:()=>u(_.id),className:`p-2 rounded-xl ${x?"bg-red-500 hover:bg-red-600 text-white":"bg-red-600 hover:bg-red-700 text-white"}`,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Eliminar pedido",children:e.jsx(eS,{size:16})})]})})]},_.id)})})]})}):e.jsxs(j.div,{className:"text-center py-12",variants:g,initial:"hidden",animate:"visible",children:[e.jsx(Br,{className:`mx-auto text-4xl ${x?"text-gray-400":"text-gray-500"} mb-3`}),e.jsx("h4",{className:`text-lg font-medium ${x?"text-gray-300":"text-gray-700"}`,children:"No hay pedidos registrados"}),e.jsx("p",{className:`text-sm ${x?"text-gray-400":"text-gray-600"}`,children:"Tus pedidos aparecerán aquí"})]})]})},QZ=({accountDetails:r,handleAccountChange:t,handleUpdateAccount:a,theme:n="dark"})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},o={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return e.jsxs(j.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-4xl mx-auto border ${i?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,variants:c,initial:"hidden",animate:"visible",children:[e.jsxs("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight mb-6 flex items-center bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:[e.jsx(ZT,{className:"mr-2"})," Configuración"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j.div,{variants:o,initial:"hidden",animate:"visible",children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${i?"text-gray-300":"text-gray-700"}`,children:"Correo electrónico"}),e.jsx("input",{type:"email",value:r.email,disabled:!0,className:`w-full px-4 py-2 rounded-xl ${i?"bg-gray-700/50 text-gray-400 border-gray-600/50":"bg-gray-200/50 text-gray-600 border-gray-300/50"} cursor-not-allowed`})]}),e.jsxs(j.div,{variants:o,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${i?"text-gray-300":"text-gray-700"}`,children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",value:r.password,onChange:t,className:`w-full px-4 py-2 rounded-xl ${i?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Dejar en blanco para no cambiar"})]}),e.jsxs(j.div,{variants:o,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${i?"text-gray-300":"text-gray-700"}`,children:"Preferencias"}),e.jsx("textarea",{name:"preferences",value:r.preferences,onChange:t,rows:"4",className:`w-full px-4 py-2 rounded-xl ${i?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Especifica tus preferencias o notas"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(j.button,{onClick:a,className:`px-6 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${i?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Guardar Cambios"})})]})]})},XZ=({editModalOpen:r,setEditModalOpen:t,selectedProduct:a,setSelectedProduct:n,editError:i,setEditError:c,handleFileChange:o,handleEditStockChange:u,handleEditAccountFieldChange:m,handleUpdateProduct:x,theme:g="dark"})=>{const k=g==="dark",S={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}}},_={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},I=P=>{const{name:b,value:B,type:L,checked:O}=P.target;n(te=>({...te,[b]:L==="checkbox"?O:B,...b==="status"&&{stock:B==="Agotado"?0:te.stock||1,accounts:B==="En stock"?te.accounts.length?te.accounts:Array(te.stock||1).fill({email:"",password:"",profile:"",pin:""}):[]}}))};return r?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(j.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl w-full max-w-4xl border max-h-[90vh] overflow-y-auto ${k?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,variants:S,initial:"hidden",animate:"visible",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${k?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Editar Producto"}),e.jsx(j.button,{onClick:()=>t(!1),className:`${k?"bg-blue-500":"bg-blue-600"} text-white rounded-full p-1 shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(Pn,{size:20})})]}),i&&e.jsx(j.div,{className:`mb-4 p-3 border rounded-xl ${k?"bg-red-900/20 border-red-900/50 text-red-400":"bg-red-100/20 border-red-200/50 text-red-600"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:i}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(j.div,{className:`col-span-1 rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${k?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:_,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Imagen del producto"}),e.jsx("div",{className:`mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-xl ${k?"bg-gray-900/80 border-gray-700/50":"bg-gray-200/80 border-gray-300/50"}`,children:a.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain",loading:"lazy"}),e.jsx(j.button,{type:"button",onClick:()=>n({...a,image:""}),className:`absolute top-0 right-0 ${k?"bg-blue-500":"bg-blue-600"} text-white rounded-full p-1 shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(Pn,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx(tS,{className:`mx-auto h-12 w-12 ${k?"text-gray-400":"text-gray-500"}`}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"edit-file-upload",className:`relative cursor-pointer rounded-xl font-medium ${k?"bg-gray-900/50 text-blue-400 hover:text-blue-500":"bg-gray-200/50 text-blue-600 hover:text-blue-700"} focus-within:outline-none`,children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"edit-file-upload",name:"edit-file-upload",type:"file",className:"sr-only",onChange:P=>o(P,!0),accept:"image/*"})]})}),e.jsx("p",{className:`text-xs ${k?"text-gray-500":"text-gray-600"}`,children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs(j.div,{className:`col-span-1 space-y-4 rounded-2xl p-4 border shadow-xl backdrop-blur-sm ${k?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:_,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:I,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Categoría*"}),e.jsxs("select",{name:"category",value:a.category,onChange:I,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all`,children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Tipo de cuenta*"}),e.jsxs("select",{name:"accountType",value:a.accountType,onChange:I,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all`,children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Estado*"}),e.jsxs("select",{name:"status",value:a.status,onChange:I,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all`,children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"}),e.jsx("option",{value:"Agotado",children:"Agotado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:a.status==="Agotado"?0:a.stock,onChange:u,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all ${a.status==="Agotado"?"opacity-50 cursor-not-allowed":""}`,min:"0",required:!0,disabled:a.status==="Agotado"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:a.price,onChange:I,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"renewal",checked:a.renewal,onChange:I,className:`h-4 w-4 ${k?"text-blue-400 focus:ring-blue-400 border-gray-600/50":"text-blue-600 focus:ring-blue-600 border-gray-300/50"} rounded`}),e.jsx("label",{className:`ml-2 ${k?"text-gray-300":"text-gray-700"}`,children:"¿Tiene renovación?"})]})]}),a.renewal&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Precio de renovación (S/)*"}),e.jsx("input",{type:"number",name:"renewalPrice",value:a.renewalPrice,onChange:I,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:a.duration,onChange:I,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:["Teléfono de contacto ",a.status==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:a.providerPhone,onChange:I,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: +51 987654321",required:a.status==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"URL del producto (opcional)"}),e.jsx("input",{type:"url",name:"productUrl",value:a.productUrl||"",onChange:I,className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: https://www.ejemplo.com/producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:a.details,onChange:I,rows:"3",className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-gray-300 mb-2 ${k?"text-gray-300":"text-gray-700"}`,children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:a.terms,onChange:I,rows:"3",className:`w-full px-4 py-2 rounded-xl ${k?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Especifica los términos y condiciones de uso"})]}),a.status==="En stock"&&e.jsxs(j.div,{className:`rounded-2xl p-4 shadow-xl border backdrop-blur-sm ${k?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:_,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${k?"text-white":"text-gray-900"}`,children:"Cuentas asociadas*"}),e.jsx("p",{className:`text-xs mb-3 ${k?"text-gray-400":"text-gray-600"}`,children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:a.accounts.map((P,b)=>e.jsxs(j.div,{className:`border rounded-xl p-4 ${k?"bg-gray-900/70 border-gray-700/50":"bg-gray-200/70 border-gray-300/50"} backdrop-blur-sm`,variants:_,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("h4",{className:`text-sm font-medium ${k?"text-white":"text-gray-900"} mb-3`,children:["Cuenta ",b+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${k?"text-gray-400":"text-gray-600"} mb-1`,children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:P.email,onChange:B=>m(b,"email",B.target.value),className:`w-full px-3 py-2 rounded-xl ${k?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${k?"text-gray-400":"text-gray-600"} mb-1`,children:"Contraseña*"}),e.jsx("input",{type:"text",value:P.password,onChange:B=>m(b,"password",B.target.value),className:`w-full px-3 py-2 rounded-xl ${k?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${k?"text-gray-400":"text-gray-600"} mb-1`,children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:P.profile,onChange:B=>m(b,"profile",B.target.value),className:`w-full px-3 py-2 rounded-xl ${k?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm`,placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium ${k?"text-gray-400":"text-gray-600"} mb-1`,children:"PIN (opcional)"}),e.jsx("input",{type:"text",value:P.pin,onChange:B=>m(b,"pin",B.target.value),className:`w-full px-3 py-2 rounded-xl ${k?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm`,placeholder:"Ej: 1234"})]})]})]},b))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx(j.button,{onClick:()=>t(!1),className:`px-4 py-2 rounded-xl transition-all duration-300 ${k?"bg-gray-900/70 text-gray-300 hover:bg-gray-700/50":"bg-gray-200/70 text-gray-700 hover:bg-gray-300/50"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Cancelar"}),e.jsx(j.button,{onClick:x,className:`px-6 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${k?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Actualizar Producto"})]})]})]})}):null},JZ=({editOrderModalOpen:r,setEditOrderModalOpen:t,selectedOrder:a,handleOrderAccountChange:n,editOrderError:i,setEditOrderError:c,handleUpdateOrder:o,theme:u="dark"})=>{const m=u==="dark",x={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}}},g={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}};return r?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(j.div,{className:`backdrop-blur-md p-4 sm:p-6 rounded-2xl shadow-2xl w-full max-w-md border max-h-[90vh] overflow-y-auto ${m?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,variants:x,initial:"hidden",animate:"visible",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:`text-xl sm:text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${m?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Editar Detalles de Cuenta"}),e.jsx(j.button,{onClick:()=>t(!1),className:`${m?"bg-blue-500":"bg-blue-600"} text-white rounded-full p-1 shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(Pn,{size:20})})]}),i&&e.jsx(j.div,{className:`mb-4 p-3 border rounded-xl ${m?"bg-red-900/20 border-red-900/50 text-red-400":"bg-red-100/20 border-red-200/50 text-red-600"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:i}),e.jsxs(j.div,{className:`border rounded-2xl p-4 shadow-xl backdrop-blur-sm ${m?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"} space-y-4`,variants:g,initial:"hidden",animate:"visible",whileHover:"hover",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium mb-1 ${m?"text-gray-400":"text-gray-600"}`,children:"Correo electrónico*"}),e.jsx("input",{type:"email",name:"email",value:a.accountDetails.email,onChange:n,className:`w-full px-3 py-2 rounded-xl ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm placeholder-gray-500`,placeholder:"Ej: usuario@ejemplo.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium mb-1 ${m?"text-gray-400":"text-gray-600"}`,children:"Contraseña*"}),e.jsx("input",{type:"text",name:"password",value:a.accountDetails.password,onChange:n,className:`w-full px-3 py-2 rounded-xl ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm placeholder-gray-500`,placeholder:"Ej: contraseña123",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium mb-1 ${m?"text-gray-400":"text-gray-600"}`,children:"Perfil (opcional)"}),e.jsx("input",{type:"text",name:"profile",value:a.accountDetails.profile,onChange:n,className:`w-full px-3 py-2 rounded-xl ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm placeholder-gray-500`,placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium mb-1 ${m?"text-gray-400":"text-gray-600"}`,children:"PIN (opcional)"}),e.jsx("input",{type:"text",name:"pin",value:a.accountDetails.pin,onChange:n,className:`w-full px-3 py-2 rounded-xl ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-sm placeholder-gray-500`,placeholder:"Ej: 1234"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx(j.button,{onClick:()=>t(!1),className:`px-4 py-2 rounded-xl transition-all duration-300 ${m?"bg-gray-900/70 text-gray-300 hover:bg-gray-700/50":"bg-gray-200/70 text-gray-700 hover:bg-gray-300/50"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Cancelar"}),e.jsx(j.button,{onClick:o,className:`px-6 py-2 text-white rounded-xl transition-all duration-300 bg-gradient-to-r ${m?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Guardar Cambios"})]})]})}):null},ZZ=Sn.memo(({show:r,onClose:t,title:a,message:n,theme:i})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${i==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${i==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:c=>c.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${i==="dark"?"text-white":"text-gray-900"}`,children:a}),e.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:n})]})})}));ZZ.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,title:Q.string.isRequired,message:Q.string.isRequired,theme:Q.string.isRequired};const HE=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState("inicio"),[i,c]=p.useState("Usuario"),[o,u]=p.useState(""),[m,x]=p.useState(""),[g,k]=p.useState([]),[S,_]=p.useState([]),[I,P]=p.useState([]),[b,B]=p.useState(!0),[L,O]=p.useState(""),[te,ne]=p.useState({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:Array(1).fill({email:"",password:"",profile:"",pin:""})}),[be,H]=p.useState(null),[z,F]=p.useState(!1),[v,ie]=p.useState(""),[X,ae]=p.useState(""),[We,ct]=p.useState({isOpen:!1,message:"",title:""}),[ft,ot]=p.useState({email:"",password:"",preferences:""}),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!0),[J,de]=p.useState(0),[ce,he]=p.useState(!1),[q,l]=p.useState(null),[Xe,qe]=p.useState(""),[Ae,Oe]=p.useState("dark"),[kt,Lt]=p.useState(!1),[jt,Wt]=p.useState(!1),[Tt,tt]=p.useState([]),yt=$r(),Ue=jv(),lt=p.useCallback(()=>{Oe(Le=>Le==="dark"?"light":"dark")},[]),Te=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),Ze=p.useCallback((Le,He)=>{ct({isOpen:!0,title:Le,message:He})},[]),st=p.useCallback(()=>{ct({isOpen:!1,message:"",title:""})},[]),pt=p.useCallback(Le=>{if(!Le)return"No especificada";try{const He=Le instanceof Date?Le:Le?.toDate?.()||new Date(Le);return isNaN(He.getTime())?"Fecha inválida":He.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(He){return console.error("Error formatting date:",He),"Fecha inválida"}},[]),$e=p.useCallback(Le=>({netflix:"Netflix",spotify:"Spotify",disney:"Disney",max:"Max",primevideo:"Prime Video",vix:"Vix",crunchyroll:"Crunchyroll",canva:"Canva",chatgpt:"ChatGPT",redessociales:"Redes Sociales",dgo:"Dgo",ligamax:"Liga Max",movistarplay:"Movistar Play",youtube:"Youtube",deezer:"Deezer",tidal:"Tidal",vpn:"Vpn",wintv:"WinTv",applemusic:"Apple Music",appletv:"Apple TV",iptv:"Iptv",flujotv:"Flujo Tv",vikirakuten:"Viki Rakuten",pornhub:"Pornhub",paramount:"Paramount",licencias:"Licencias",capcut:"Capcut",duolingo:"Duolingo",buscapersonas:"BuscaPersonas"})[Le?.toLowerCase()]||"Otro",[]);p.useEffect(()=>{const Le=Fr(Ue,He=>{He?(u(He.email||""),x(He.uid),s(He.uid)):yt("/login")});return()=>Le()},[Ue,yt]);const s=async Le=>{try{const He=se(M,"users",Le),Pt=await sr(He);if(Pt.exists()){const gt=Pt.data();c(gt.username||"Usuario"),ot({email:gt.email||"",password:"",preferences:gt.preferences||""})}B(!1)}catch(He){O("Error al cargar datos del usuario"),console.error("Error fetching user data:",He),B(!1)}};p.useEffect(()=>{o&&(async He=>{try{const Pt=await sr(se(M,"admins",He));Ie(Pt.exists())}catch(Pt){console.error("Error checking admin status:",Pt)}})(o)},[o]),p.useEffect(()=>{const Le=it(se(M,"notifications","adminMessage"),He=>{if(He.exists()){const Pt=He.data(),gt=Ee?"admin":"provider";Pt.roles&&Pt.roles.includes(gt)?tt([{id:He.id,...Pt,timestamp:Pt.updatedAt?.toDate()}]):tt([])}else tt([])},He=>{console.error("Error in notifications listener:",He),O("Error al cargar notificaciones: "+He.message)});return()=>Le()},[Ee]),p.useEffect(()=>{if(!i)return;const Le=Fe(ue(M,"products"),dt("provider","==",i)),He=it(Le,Pt=>{const gt=Pt.docs.map(Rt=>({id:Rt.id,...Rt.data()}));_(gt)},Pt=>{console.error("Error fetching products:",Pt),O("Error al cargar productos")});return()=>He()},[i]),p.useEffect(()=>{if(!m)return;const Le=Fe(ue(M,"sales"),dt("providerId","==",m)),He=it(Le,gt=>{if(gt.empty){k([]),re(!1);return}const Rt=gt.docs.map(Ht=>{const It=Ht.data(),ye=It.saleDate?.toDate?.()||It.createdAt?.toDate?.()||new Date;let pe=It.startDate?.toDate?.(),xe=pe||ye,ke=!pe;const Ne=It.durationDays||30;let Ge;It.endDate?Ge=typeof It.endDate=="string"?new Date(It.endDate):It.endDate.toDate?.()||new Date(It.endDate):(Ge=new Date(xe.getTime()+Ne*24*60*60*1e3),ke=!0),ke&&Ga(se(M,"sales",Ht.id),{startDate:pe||ja.fromDate(ye),endDate:ja.fromDate(Ge),durationDays:Ne}).catch(Dt=>{console.error("Error al actualizar startDate/endDate en Firestore:",Dt)});const ut=new Date,Je=Ge.getTime()-xe.getTime(),et=ut.getTime()-xe.getTime(),at=Ge.getTime()-ut.getTime(),St=Math.max(1,Math.ceil(Je/(1e3*60*60*24))),qt=Math.max(0,Math.ceil(at/(1e3*60*60*24))),Zt=Math.ceil(et/(1e3*60*60*24)),Ft=St>0?Math.min(100,Zt/St*100):100;return{id:Ht.id,productName:It.productName||"Producto sin nombre",category:It.type||"netflix",amount:parseFloat(It.price)||0,buyer:It.buyerName||It.customerName||"Comprador desconocido",buyerPhone:It.buyerPhone||"No especificado",buyerEmail:It.customerEmail||"No especificado",status:It.status||"completed",saleDate:ye,startDate:xe,endDate:Ge,durationDays:Ne,daysRemaining:qt,totalDays:St,timeElapsedPercentage:Ft,accountDetails:It.accountDetails||{email:"No disponible",password:"No disponible",profile:"N/A",pin:""},balance:parseFloat(It.price)||0}});k(Rt);const Nt=Rt.filter(Ht=>Ht.status==="completed"&&Ht.accountDetails).map(Ht=>({...Ht.accountDetails,productName:Ht.productName,saleDate:Ht.saleDate,orderId:Ht.id}));P(Nt),re(!1)},gt=>{console.error("Error fetching sales:",gt),O("Error al cargar ventas"),re(!1)}),Pt=setInterval(()=>{k(gt=>gt.map(Rt=>{const Nt=new Date,Ht=new Date(Rt.endDate).getTime()-new Date(Rt.startDate).getTime(),It=Nt.getTime()-new Date(Rt.startDate).getTime(),le=new Date(Rt.endDate).getTime()-Nt.getTime(),ye=Math.max(1,Math.ceil(Ht/(1e3*60*60*24))),pe=Math.max(0,Math.ceil(le/(1e3*60*60*24))),xe=Math.ceil(It/(1e3*60*60*24)),ke=ye>0?Math.min(100,xe/ye*100):100;return{...Rt,daysRemaining:pe,totalDays:ye,timeElapsedPercentage:ke}}))},6e4);return()=>{He(),clearInterval(Pt)}},[m]),p.useEffect(()=>{if(!i)return;const Le=se(M,"providerBalances",i),He=it(Le,Pt=>{Pt.exists()?de(Pt.data().balance||0):(hl(Le,{balance:0,provider:i,updatedAt:mt()}),de(0)),re(!1)},Pt=>{console.error("Error fetching provider balance:",Pt),O("Error al cargar el saldo del proveedor"),re(!1)});return()=>He()},[i]);const E=p.useCallback(async()=>{try{await Zr(Ue),yt("/login")}catch(Le){console.error("Error al cerrar sesión:",Le),Ze("Error",Le.message||"Error al cerrar sesión")}},[yt,Ze]),y=p.useCallback(Le=>{const{name:He,value:Pt,type:gt,checked:Rt}=Le.target;ne(Nt=>({...Nt,[He]:gt==="checkbox"?Rt:Pt}))},[]),R=p.useCallback(Le=>{const{name:He,value:Pt}=Le.target;ot(gt=>({...gt,[He]:Pt}))},[]),V=p.useCallback((Le,He=!1)=>{const Pt=Le.target.files[0];if(Pt){if(Pt.size>10485760){He?ie("La imagen no debe exceder los 10MB"):O("La imagen no debe exceder los 10MB");return}const Rt=new FileReader;Rt.onloadend=()=>{He?H(Nt=>({...Nt,image:Rt.result})):ne(Nt=>({...Nt,image:Rt.result}))},Rt.readAsDataURL(Pt)}},[]),ee=p.useCallback(Le=>{const He=parseInt(Le.target.value)||1,Pt=te.accounts||[];if(He>Pt.length){const gt=[...Pt];for(;gt.length<He;)gt.push({email:"",password:"",profile:"",pin:""});ne({...te,stock:He,accounts:gt})}else if(He<Pt.length){const gt=Pt.slice(0,Math.max(He,1));ne({...te,stock:He,accounts:gt})}else ne({...te,stock:He})},[te]),fe=p.useCallback(Le=>{const He=parseInt(Le.target.value)||1;let gt=[...be.accounts||[]];if(He>gt.length)for(;gt.length<He;)gt.push({email:"",password:"",profile:"",pin:""});else He<gt.length&&(gt=gt.slice(0,Math.max(He,1)));H({...be,stock:He,accounts:gt})},[be]),ge=p.useCallback((Le,He,Pt)=>{const gt=[...te.accounts];gt[Le]={...gt[Le],[He]:Pt},ne({...te,accounts:gt})},[te]),A=p.useCallback((Le,He,Pt)=>{H(gt=>({...gt,accounts:gt.accounts.map((Rt,Nt)=>Nt===Le?{...Rt,[He]:Pt}:Rt)}))},[]),Y=p.useCallback(Le=>{const{name:He,value:Pt}=Le.target;l(gt=>({...gt,accountDetails:{...gt.accountDetails,[He]:Pt}}))},[]),U=p.useCallback(async()=>{if(O(""),!te.name||!te.price){Ze("Error","Por favor complete todos los campos obligatorios");return}if(te.renewal&&!te.renewalPrice){Ze("Error","Por favor ingrese el precio de renovación");return}if(te.status==="En stock"&&te.accounts.some(He=>!He.email||!He.password)){Ze("Error","Por favor complete todos los campos de las cuentas");return}try{const Le={...te,provider:i,providerId:m,providerPhone:te.status==="En stock"?te.providerPhone||"":te.providerPhone||"No especificado",createdAt:mt(),availableAccounts:te.status==="En stock"?te.accounts.length:0},He=await ml(ue(M,"products"),Le);if(te.status==="En stock"){const Pt=ue(M,`products/${He.id}/accounts`);for(const gt of te.accounts)await ml(Pt,{email:gt.email,password:gt.password,profile:gt.profile||"",pin:gt.pin||"",status:"available"})}ne({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:[{email:"",password:"",profile:"",pin:""}]}),n("inventario"),Ze("Éxito","Producto subido exitosamente!")}catch(Le){console.error("Error al subir el producto:",Le),Ze("Error",`Error al subir el producto: ${Le.message}`)}},[te,i,m,Ze]),N=p.useCallback(async Le=>{ie("");try{const He=Fe(ue(M,"sales"),dt("providerId","==",m),dt("productName","==",Le.name)),gt=(await Jt(He)).docs.filter(It=>It.data().status==="completed"&&It.data().accountDetails?.email).map(It=>It.data().accountDetails.email),Rt=ue(M,`products/${Le.id}/accounts`),Ht=(await Jt(Rt)).docs.filter(It=>It.data().status==="available").map(It=>({email:It.data().email||"",password:It.data().password||"",profile:It.data().profile||"",pin:It.data().pin||""}));H({id:Le.id,name:Le.name||"",image:Le.image||"",category:Le.category||"Netflix",accountType:Le.accountType||"Premium",status:Le.status||"En stock",stock:Ht.length||Le.stock||1,price:Le.price||"",renewal:Le.renewal||!1,renewalPrice:Le.renewalPrice||"",duration:Le.duration||"",providerPhone:Le.providerPhone||"",details:Le.details||"",terms:Le.terms||"",providerId:Le.providerId||m,accounts:Le.status==="En stock"?Ht.length>0?Ht:Array(Math.max(Le.stock||1,1)).fill({email:"",password:"",profile:"",pin:""}):[]}),F(!0)}catch(He){console.error("Error al preparar edición del producto:",He),ie("Error al preparar edición del producto")}},[m]),C=p.useCallback(async()=>{if(ie(""),!be.name||!be.price){ie("Por favor complete todos los campos obligatorios");return}if(be.renewal&&!be.renewalPrice){ie("Por favor ingrese el precio de renovación");return}if(be.status==="En stock"&&be.accounts.some(He=>!He.email||!He.password)){ie("Por favor complete todos los campos de las cuentas");return}try{const Le=se(M,"products",be.id);if(await hl(Le,{...be,providerId:be.providerId||m,availableAccounts:be.status==="En stock"&&be.accounts?.length||0},{merge:!0}),be.status==="En stock"){const He=ue(M,`products/${be.id}/accounts`),Pt=await Jt(He);for(const gt of Pt.docs)await sc(gt.ref);for(const gt of be.accounts)await ml(He,{email:gt.email,password:gt.password,profile:gt.profile||"",pin:gt.pin||"",status:"available"})}F(!1),Ze("Éxito","Producto actualizado exitosamente!")}catch(Le){console.error("Error al actualizar el producto:",Le),ie("Error al actualizar el producto")}},[be,m,Ze]),K=p.useCallback(async Le=>{try{await sc(se(M,"products",Le)),Ze("Éxito","Producto eliminado exitosamente!")}catch(He){console.error("Error al eliminar el producto:",He),Ze("Error","Error al eliminar el producto")}},[Ze]),we=p.useCallback(async Le=>{try{await sc(se(M,"sales",Le)),Ze("Éxito","Pedido eliminado exitosamente!")}catch(He){console.error("Error al eliminar el pedido:",He),Ze("Error","Error al eliminar el pedido")}},[Ze]),je=p.useCallback(async()=>{try{const Le=Ue.currentUser;if(Le){const He=se(M,"users",Le.uid);await hl(He,{preferences:ft.preferences,...ft.password&&{password:ft.password}},{merge:!0}),Ze("Éxito","Configuración actualizada correctamente!")}}catch(Le){console.error("Error al actualizar la configuración:",Le),Ze("Error","Error al actualizar la configuración")}},[ft,Ze]),Me=p.useCallback(Le=>{qe(""),l({...Le,accountDetails:{email:Le.accountDetails.email||"",password:Le.accountDetails.password||"",profile:Le.accountDetails.profile||"",pin:Le.accountDetails.pin||""}}),he(!0)},[]),Ye=p.useCallback(async()=>{if(qe(""),!q.accountDetails.email||!q.accountDetails.password){qe("Por favor complete todos los campos obligatorios de la cuenta");return}try{const Le=se(M,"sales",q.id);await Ga(Le,{accountDetails:q.accountDetails,updatedAt:mt()}),he(!1),Ze("Éxito","Detalles de la cuenta actualizados exitosamente!")}catch(Le){console.error("Error al actualizar los detalles de la cuenta:",Le),qe("Error al actualizar los detalles de la cuenta")}},[q,Ze]),Be=p.useCallback(async Le=>{try{const He=se(M,"sales",Le);await Ga(He,{status:"completed",updatedAt:mt()}),Ze("Éxito","Pedido activado exitosamente!")}catch(He){console.error("Error al activar el pedido:",He),Ze("Error","Error al activar el pedido")}},[Ze]);p.useEffect(()=>{const Le=()=>{Lt(window.scrollY>300)};return window.addEventListener("scroll",Le),()=>window.removeEventListener("scroll",Le)},[]);const Se=_e?0:g.reduce((Le,He)=>Le+(He.amount||0),0),_t=S.reduce((Le,He)=>Le+(parseInt(He.stock)||0),0),At=p.useCallback(()=>b?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):L?e.jsxs("div",{className:`bg-${Ae==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${Ae==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsx(gc,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:`text-xl font-bold ${Ae==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Error"}),e.jsx("p",{className:`text-base ${Ae==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:L}),e.jsx("button",{onClick:()=>O(""),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Aceptar"})]}):e.jsx("div",{className:`bg-${Ae==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${Ae==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:(()=>{switch(a){case"inicio":return e.jsx(tW,{username:i,products:S,orders:g,providerBalance:J,balanceLoading:_e,totalStock:_t,totalEarnings:Se,isAdmin:Ee,email:o,setActiveSection:n,formatDate:pt});case"inventario":return e.jsx(rW,{products:S,setActiveSection:n,handleEdit:N,handleDelete:K,getCategoryDisplayName:$e,totalStock:_t});case"cuentas":return e.jsx(aW,{soldAccounts:I,formatDate:pt});case"subirProducto":return e.jsx(sW,{product:te,setProduct:ne,handleChange:y,handleFileChange:V,handleStockChange:ee,handleAccountFieldChange:ge,handleSubmit:U,setActiveSection:n});case"ganancias":return e.jsx(nW,{orders:g,totalEarnings:Se,providerBalance:J,balanceLoading:_e,getCategoryDisplayName:$e,formatDate:pt});case"pedidos":return e.jsx(YZ,{orders:g,searchQuery:X,setSearchQuery:ae,getCategoryDisplayName:$e,formatDate:pt,handleEditOrder:Me,handleActivateOrder:Be,handleDeleteOrder:we});case"configuracion":return e.jsx(QZ,{accountDetails:ft,handleAccountChange:R,handleUpdateAccount:je});default:return e.jsxs("div",{className:`bg-${Ae==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${Ae==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsx(gc,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:`text-xl font-bold ${Ae==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Sección no encontrada"}),e.jsx("p",{className:`text-base ${Ae==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>n("inicio"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Volver al inicio"})]})}})()}),[b,L,Ae,a,i,S,g,J,_e,_t,Se,Ee,o,n,pt,N,K,$e,I,te,ne,y,V,ee,ge,U,X,ae,Me,Be,we,ft,R,je]);return e.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${Ae==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-50 to-gray-50 text-gray-900"} font-inter relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${Ae==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((Le,He)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},He))})]}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${Ae==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r overflow-y-auto lg:shadow-md`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{yt("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${Ae==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${Ae==="dark"?"text-white":"text-gray-900"}`,children:i}),e.jsx("p",{className:`text-xs ${Ae==="dark"?"text-gray-400":"text-gray-600"}`,children:Ee?"Admin":"Proveedor"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:iw},{id:"inventario",label:"Inventario",icon:KH},{id:"cuentas",label:"Cuentas Vendidas",icon:zd},{id:"pedidos",label:"Pedidos",icon:zd},{id:"ganancias",label:"Ganancias",icon:ho},{id:"subirProducto",label:"Subir Producto",icon:tq},{id:"configuracion",label:"Configuración",icon:cr}].map(Le=>e.jsxs("button",{onClick:()=>{n(Le.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${a===Le.id?"bg-blue-100 text-blue-600 border border-blue-300":Ae==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":a===Le.id?"page":void 0,children:[e.jsx(Le.icon,{className:"text-lg"}),e.jsx("span",{children:Le.label})]},Le.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{E(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${Ae==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsxs("header",{className:`${Ae==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md py-4 px-4 sm:px-6 lg:px-8 flex items-center justify-between shadow-md fixed top-0 left-0 right-0 z-50 lg:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"BlackStreaming logo",className:`h-10 w-10 rounded-full border ${Ae==="dark"?"border-gray-700/50":"border-gray-300"} shadow-sm lg:hidden`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-lg",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:X,onChange:Le=>ae(Le.target.value),className:`w-full py-2.5 px-5 ${Ae==="dark"?"bg-gray-800/50 border-gray-600/50 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-md`,"aria-label":"Search orders",onKeyDown:Le=>Le.key==="Enter"&&n("pedidos")}),e.jsx("button",{onClick:()=>n("pedidos"),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${Ae==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Search",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-4 relative",children:[e.jsx("button",{onClick:lt,className:`p-2 rounded-full ${Ae==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Switch to ${Ae==="dark"?"light":"dark"} theme`,children:Ae==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),e.jsxs("button",{onClick:()=>Wt(!0),className:`p-2 rounded-full relative ${Ae==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Notifications (${Tt.length} new)`,children:[e.jsx(nr,{size:20}),Tt.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Tt.length})]}),e.jsx("button",{className:`lg:hidden p-2 rounded-full ${Ae==="dark"?"hover:bg-gray-700/50":"hover:bg-gray-100"} transition-all duration-300`,onClick:()=>t(!r),"aria-label":"Toggle mobile menu","aria-expanded":r,children:e.jsx(Lx,{size:20,className:Ae==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:e.jsx("div",{className:"relative",children:e.jsxs("button",{className:`flex items-center space-x-2 ${Ae==="dark"?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-md transition-all duration-300`,"aria-label":"User menu",children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:i.charAt(0).toUpperCase()}),e.jsx("span",{className:`text-sm font-semibold ${Ae==="dark"?"text-gray-200":"text-gray-800"}`,children:i})]})})})]})]}),e.jsx(ve,{children:jt&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>Wt(!1),role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 lg:max-w-lg ${Ae==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${Ae==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:Le=>Le.stopPropagation(),children:[e.jsx("button",{onClick:()=>Wt(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notifications",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-xl font-bold mb-4 ${Ae==="dark"?"text-white":"text-gray-900"}`,children:"Notificaciones"}),Tt.length>0?Tt.map(Le=>e.jsxs("div",{className:`p-4 mb-2 rounded-md ${Ae==="dark"?"bg-gray-800/50":"bg-gray-100/80"} border-l-4 ${Ae==="dark"?"border-blue-500/50":"border-blue-300/50"}`,children:[e.jsx("h3",{className:`font-semibold ${Ae==="dark"?"text-gray-200":"text-gray-800"}`,children:Le.title||"Nueva Notificación"}),e.jsx("p",{className:`text-sm ${Ae==="dark"?"text-gray-300":"text-gray-700"} mt-1`,children:Le.message}),Le.roles&&Le.roles.length>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Roles: ",Le.roles.join(", ")]}),Le.timestamp&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:pt(Le.timestamp)})]},Le.id)):e.jsx("p",{className:`text-center ${Ae==="dark"?"text-gray-400":"text-gray-600"} mt-4`,children:"No hay notificaciones."})]})})}),e.jsx("main",{className:"lg:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start",children:At()}),e.jsxs("footer",{className:`${Ae==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md px-4 sm:px-6 lg:px-8 py-12 text-center relative z-10 lg:ml-64 max-w-6xl mx-auto rounded-2xl border ${Ae==="dark"?"border-gray-700/50":"border-gray-300"} mt-8 shadow-md`,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-4",children:"BlackStreaming"}),e.jsxs("p",{className:`text-base sm:text-lg ${Ae==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["Todos los derechos reservados. Desarrollado por"," ",e.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Saiph"}),"."]}),e.jsxs("div",{className:"flex justify-center space-x-6 sm:space-x-8 mb-6",children:[e.jsx("a",{href:"https://twitter.com",className:`${Ae==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Twitter",children:e.jsx(Ur,{size:28})}),e.jsx("a",{href:"https://instagram.com",className:`${Ae==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Instagram",children:e.jsx(Vr,{size:28})}),e.jsx("a",{href:"https://facebook.com",className:`${Ae==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Facebook",children:e.jsx(zr,{size:28})})]}),e.jsxs("div",{className:"flex justify-center space-x-4 sm:space-x-6",children:[e.jsx("a",{href:"#",className:`text-sm ${Ae==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Privacy Policy",children:"Política de Privacidad"}),e.jsx("a",{href:"#",className:`text-sm ${Ae==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Terms of Service",children:"Términos de Servicio"}),e.jsx("a",{href:"#",className:`text-sm ${Ae==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Contact Us",children:"Contáctanos"})]})]}),e.jsxs("p",{className:`text-sm ${Ae==="dark"?"text-gray-500":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Hecho con pasión."]})]}),e.jsx(ve,{children:kt&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Te,className:"fixed bottom-6 right-6 bg-blue-600/90 backdrop-blur-md p-3 rounded-full hover:bg-blue-700/95 shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 lg:bottom-8 lg:right-8","aria-label":"Back to top",children:e.jsx(ta,{size:20})})}),e.jsx(eW,{isOpen:We.isOpen,title:We.title,message:We.message,onClose:st}),e.jsx(XZ,{editModalOpen:z,setEditModalOpen:F,selectedProduct:be,setSelectedProduct:H,editError:v,setEditError:ie,handleFileChange:V,handleEditStockChange:fe,handleEditAccountFieldChange:A,handleUpdateProduct:C}),e.jsx(JZ,{editOrderModalOpen:ce,setEditOrderModalOpen:he,selectedOrder:q,handleOrderAccountChange:Y,editOrderError:Xe,setEditOrderError:qe,handleUpdateOrder:Ye}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden",onClick:()=>t(!1),"aria-hidden":"true"})]})};HE.propTypes={};const eee=()=>{const[r,t]=p.useState(""),[a,n]=p.useState(""),[i,c]=p.useState(0),[o,u]=p.useState([]),[m,x]=p.useState([]),[g,k]=p.useState([]),[S,_]=p.useState([]),[I,P]=p.useState([]),[b,B]=p.useState(0),[L,O]=p.useState({day:0,week:0,month:0,total:0}),[te,ne]=p.useState(!0),[be,H]=p.useState(null),[z,F]=p.useState("dark"),v=$r();p.useEffect(()=>{const ae=Fr(Xt,We=>{We?(n(We.email||"No especificado"),ie(We.uid),ne(!1)):v("/login")});return()=>ae()},[v]);const ie=async ae=>{try{const We=se(M,"users",ae),ct=await sr(We);if(ct.exists()){const ft=ct.data();t(ft.username||ft.email.split("@")[0])}else H("Usuario no encontrado en la base de datos")}catch(We){console.error("Error al obtener el nombre de usuario:",We),H("Error al cargar datos del usuario")}},X=ae=>{const ct=ae*5,ft=ct*.25,ot=ct*.05;O({day:ot,week:ft,month:ct,total:ct})};return p.useEffect(()=>{(async()=>{try{const Ie=await Jt(ue(M,"users")),_e=Ie.size,re=Ie.docs.map(Oe=>({id:Oe.id,...Oe.data()}));c(_e),u(re.slice(-5)),X(_e);const J=Fe(ue(M,"pendingRegistrations"),dt("status","==","pending")),de=await Jt(J);x(de.docs.map(Oe=>({id:Oe.id,...Oe.data()})));const ce=Fe(ue(M,"pendingTopUps"),dt("status","==","pendiente")),he=await Jt(ce);k(he.docs.map(Oe=>({id:Oe.id,...Oe.data()})));const q=Fe(ue(M,"withdrawals"),dt("status","==","pending")),l=await Jt(q);_(l.docs.map(Oe=>({id:Oe.id,...Oe.data()})));const qe=(await Jt(ue(M,"sales"))).docs.map(Oe=>({id:Oe.id,...Oe.data()}));P(qe);const Ae=qe.reduce((Oe,kt)=>Oe+(parseFloat(kt.price)||0),0);B(Ae)}catch(Ie){console.error("Error al obtener datos:",Ie),H("Error al cargar datos")}})();const We=it(ue(M,"users"),Ie=>{const _e=Ie.size,re=Ie.docs.map(J=>({id:J.id,...J.data()}));c(_e),u(re.slice(-5)),X(_e)}),ct=it(Fe(ue(M,"pendingRegistrations"),dt("status","==","pending")),Ie=>{x(Ie.docs.map(_e=>({id:_e.id,..._e.data()})))}),ft=it(Fe(ue(M,"pendingTopUps"),dt("status","==","pendiente")),Ie=>{k(Ie.docs.map(_e=>({id:_e.id,..._e.data()})))}),ot=it(Fe(ue(M,"withdrawals"),dt("status","==","pending")),Ie=>{_(Ie.docs.map(_e=>({id:_e.id,..._e.data()})))}),Ee=it(ue(M,"sales"),Ie=>{const _e=Ie.docs.map(J=>({id:J.id,...J.data()}));P(_e);const re=_e.reduce((J,de)=>J+(parseFloat(de.price)||0),0);B(re)});return()=>{We(),ct(),ft(),ot(),Ee()}},[]),te?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):be?e.jsxs("div",{className:`bg-${z==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${z==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsx(gc,{className:"mx-auto text-4xl text-blue-400 mb-4"}),e.jsx("h3",{className:`text-xl font-bold ${z==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Error"}),e.jsx("p",{className:`text-base ${z==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:be}),e.jsx("button",{onClick:()=>H(null),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Aceptar"})]}):e.jsxs("div",{className:`bg-${z==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${z==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsxs("h2",{className:`text-2xl sm:text-3xl font-bold ${z==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Bienvenido a BlackStreaming,"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:r})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:`${z==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 border shadow-lg`,children:[e.jsxs("h3",{className:"text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-3 flex items-center",children:[e.jsx(Vp,{className:"mr-2"})," Total Usuarios"]}),e.jsx("p",{className:`text-3xl font-bold ${z==="dark"?"text-white":"text-gray-900"}`,children:i}),e.jsx("button",{className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",onClick:()=>v("/usuarios"),children:"Ver usuarios"})]}),e.jsxs("div",{className:`${z==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 border shadow-lg`,children:[e.jsxs("h3",{className:"text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-3 flex items-center",children:[e.jsx(zd,{className:"mr-2"})," Total Ventas"]}),e.jsxs("p",{className:`text-3xl font-bold ${z==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",b.toFixed(2)]}),e.jsx("button",{className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",onClick:()=>v("/pedidos"),children:"Ver ventas"})]}),e.jsxs("div",{className:`${z==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 border shadow-lg`,children:[e.jsxs("h3",{className:"text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-3 flex items-center",children:[e.jsx(ho,{className:"mr-2"})," Ganancias del Mes"]}),e.jsxs("p",{className:`text-3xl font-bold ${z==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",L.month.toFixed(2)]}),e.jsx("p",{className:`text-sm ${z==="dark"?"text-gray-300":"text-gray-700"} mt-1`,children:"(5 soles por usuario)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`${z==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 shadow-lg border`,children:[e.jsx("h3",{className:`text-lg font-semibold ${z==="dark"?"text-white":"text-gray-900"} mb-3`,children:"Últimos Usuarios"}),o.length>0?o.map(ae=>e.jsxs("div",{className:`border-b ${z==="dark"?"border-gray-600/50":"border-gray-300"} py-3 last:border-0 hover:bg-${z==="dark"?"gray-700/50":"gray-200/50"} transition-all duration-300 rounded-xl px-2`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:`font-medium ${z==="dark"?"text-white":"text-gray-900"}`,children:ae.username||"Sin nombre"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${z==="dark"?"bg-blue-900/80 text-blue-400":"bg-blue-100/80 text-blue-600"}`,children:ae.role||"usuario"})]}),e.jsx("p",{className:`text-sm ${z==="dark"?"text-gray-400":"text-gray-600"}`,children:ae.email})]},ae.id)):e.jsx("p",{className:`text-${z==="dark"?"gray-400":"gray-600"} py-2`,children:"No hay usuarios registrados"})]}),e.jsxs("div",{className:`${z==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 shadow-lg border`,children:[e.jsx("h3",{className:`text-lg font-semibold ${z==="dark"?"text-white":"text-gray-900"} mb-3`,children:"Solicitudes Pendientes"}),m.length>0?m.slice(0,3).map(ae=>e.jsxs("div",{className:`border-b ${z==="dark"?"border-gray-600/50":"border-gray-300"} py-3 last:border-0 hover:bg-${z==="dark"?"gray-700/50":"gray-200/50"} transition-all duration-300 rounded-xl px-2`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:`font-medium ${z==="dark"?"text-white":"text-gray-900"}`,children:ae.username||"Sin nombre"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${z==="dark"?"bg-purple-900/80 text-purple-400":"bg-purple-100/80 text-purple-600"}`,children:ae.role||"usuario"})]}),e.jsx("p",{className:`text-sm ${z==="dark"?"text-gray-400":"text-gray-600"}`,children:ae.email})]},ae.id)):e.jsx("p",{className:`text-${z==="dark"?"gray-400":"gray-600"} py-2`,children:"No hay solicitudes pendientes"})]}),e.jsxs("div",{className:`${z==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 shadow-lg border`,children:[e.jsx("h3",{className:`text-lg font-semibold ${z==="dark"?"text-white":"text-gray-900"} mb-3`,children:"Retiros Pendientes"}),S.length>0?S.slice(0,3).map(ae=>e.jsxs("div",{className:`border-b ${z==="dark"?"border-gray-600/50":"border-gray-300"} py-3 last:border-0 hover:bg-${z==="dark"?"gray-700/50":"gray-200/50"} transition-all duration-300 rounded-xl px-2`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:`font-medium ${z==="dark"?"text-white":"text-gray-900"}`,children:ae.provider||"Sin proveedor"}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${z==="dark"?"bg-yellow-900/80 text-yellow-400":"bg-yellow-100/80 text-yellow-600"}`,children:["S/ ",(ae.amount||0).toFixed(2)]})]}),e.jsxs("p",{className:`text-sm ${z==="dark"?"text-gray-400":"text-gray-600"}`,children:["Método: ",ae.method||"No especificado"]})]},ae.id)):e.jsx("p",{className:`text-${z==="dark"?"gray-400":"gray-600"} py-2`,children:"No hay retiros pendientes"})]})]})]})},tee=({notificationForm:r={message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}},setNotificationForm:t=()=>{},theme:a="dark"})=>{const[n,i]=p.useState(""),[c,o]=p.useState(""),[u,m]=p.useState(!1),x=r.roles||{user:!1,affiliate:!1,provider:!1,admin:!1},g=Object.values(x).some(S=>S),k=p.useCallback(async S=>{if(S.preventDefault(),!g){i("Selecciona al menos un rol para enviar la notificación");return}if(!r.message.trim()){i("El mensaje de la notificación no puede estar vacío");return}i(""),o(""),m(!0);try{await ml(ue(M,"notifications"),{message:r.message.trim(),roles:{user:x.user,affiliate:x.affiliate,provider:x.provider,admin:x.admin},createdAt:mt()}),t({message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}}),o("Notificación enviada exitosamente")}catch(_){i("Error al enviar la notificación. Por favor, intenta de nuevo."),console.error("Error sending notification:",_)}finally{m(!1)}},[r,x,t]);return e.jsxs("div",{className:`bg-${a==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-2xl mx-auto border ${a==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${a==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Enviar Notificación -"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),e.jsxs(ve,{children:[n&&e.jsx(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${a==="dark"?"bg-red-900/50 border-red-600/50":"bg-red-100/50 border-red-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-red-600 border-l-4`,role:"alert",children:n}),c&&e.jsx(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${a==="dark"?"bg-green-900/50 border-green-600/50":"bg-green-100/50 border-green-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-green-600 border-l-4`,role:"alert",children:c})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Mensaje de la Notificación"}),e.jsx("textarea",{value:r.message||"",onChange:S=>t({...r,message:S.target.value}),className:`w-full px-4 py-2 rounded-xl ${a==="dark"?"bg-gray-800/50 text-gray-200 border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-800 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all resize-y`,rows:"5",placeholder:"Escribe el mensaje para los usuarios...",required:!0,"aria-label":"Mensaje de la notificación"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Enviar a los siguientes roles"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["user","affiliate","provider","admin"].map(S=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:x[S]||!1,onChange:_=>t({...r,roles:{...x,[S]:_.target.checked}}),className:`h-4 w-4 ${a==="dark"?"text-blue-400 focus:ring-blue-400 border-gray-600":"text-blue-600 focus:ring-blue-600 border-gray-300"} rounded`,"aria-label":`Enviar a rol ${S}`}),e.jsx("span",{className:`text-sm capitalize ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:S})]},S))})]}),e.jsx(j.button,{type:"submit",disabled:u||!g,className:`w-full py-3 px-4 ${u||!g?a==="dark"?"bg-blue-800 cursor-not-allowed":"bg-blue-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"} text-white rounded-xl font-medium transition-all duration-300`,"aria-label":"Enviar notificación",whileHover:{scale:u||!g?1:1.05},whileTap:{scale:u||!g?1:.95},children:u?e.jsx(j.div,{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}):"Enviar Notificación"}),!g&&e.jsx("p",{className:`text-sm text-center ${a==="dark"?"text-blue-400":"text-blue-600"}`,children:"Selecciona al menos un rol para enviar la notificación"})]})]})},qE=[{value:"user",label:"Usuario"},{value:"affiliate",label:"Afiliador"},{value:"provider",label:"Proveedor"},{value:"admin",label:"Administrador"}],ree=r=>{const t=qE.find(a=>a.value===r);return t?t.label:r},WE=({isOpen:r,user:t,onClose:a,onSave:n,loading:i,theme:c})=>{const[o,u]=p.useState(t?.balance||0),[m,x]=p.useState("");p.useEffect(()=>{u(t?.balance||0),x("")},[t]);const g=k=>{if(k.preventDefault(),x(""),isNaN(o)||o<0){x("Por favor, ingrese un saldo válido (número no negativo).");return}n(t.id,parseFloat(o))};return!r||!t?null:e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:`bg-${c==="dark"?"gray-900/90":"white"} backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border ${c==="dark"?"border-gray-800/50":"border-gray-300"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:`text-xl font-bold ${c==="dark"?"text-white":"text-gray-900"}`,children:["Editar Saldo de ",t.username]}),e.jsx("button",{onClick:a,className:`${c==="dark"?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,"aria-label":"Cerrar modal",children:"✕"})]}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block text-sm font-medium ${c==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Nuevo Saldo (S/)"}),e.jsx("input",{type:"number",value:o,onChange:k=>u(k.target.value),className:`w-full px-4 py-2 rounded-xl ${c==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,min:"0",step:"0.01",required:!0,"aria-label":"Nuevo saldo"}),m&&e.jsx("p",{className:`text-sm mt-2 ${c==="dark"?"text-blue-400":"text-blue-600"}`,children:m})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:a,className:`px-4 py-2 ${c==="dark"?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"} rounded-xl transition-all duration-300`,"aria-label":"Cancelar",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:i,className:`px-4 py-2 ${i?c==="dark"?"bg-blue-800 cursor-not-allowed":"bg-blue-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"} rounded-xl transition-all duration-300`,"aria-label":"Guardar saldo",children:i?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar"})]})]})]})})})};WE.propTypes={isOpen:Q.bool.isRequired,user:Q.object,onClose:Q.func.isRequired,onSave:Q.func.isRequired,loading:Q.bool,theme:Q.oneOf(["dark","light"])};const GE=({isOpen:r,user:t,onClose:a,onSave:n,loading:i,theme:c})=>{const[o,u]=p.useState(t?.role||"user");return p.useEffect(()=>{u(t?.role||"user")},[t]),!r||!t?null:e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:`bg-${c==="dark"?"gray-900/90":"white"} backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border ${c==="dark"?"border-gray-800/50":"border-gray-300"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:`text-xl font-bold ${c==="dark"?"text-white":"text-gray-900"}`,children:["Cambiar Rol de ",t.username]}),e.jsx("button",{onClick:a,className:`${c==="dark"?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,"aria-label":"Cerrar modal",children:"✕"})]}),e.jsxs("form",{onSubmit:m=>{m.preventDefault(),n(t.id,o)},children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block text-sm font-medium ${c==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Nuevo Rol"}),e.jsx("select",{value:o,onChange:m=>u(m.target.value),className:`w-full px-4 py-2 rounded-xl ${c==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,"aria-label":"Seleccionar nuevo rol",children:qE.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:a,className:`px-4 py-2 ${c==="dark"?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"} rounded-xl transition-all duration-300`,"aria-label":"Cancelar",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:i,className:`px-4 py-2 ${i?c==="dark"?"bg-blue-800 cursor-not-allowed":"bg-blue-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"} rounded-xl transition-all duration-300`,"aria-label":"Guardar rol",children:i?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar"})]})]})]})})})};GE.propTypes={isOpen:Q.bool.isRequired,user:Q.object,onClose:Q.func.isRequired,onSave:Q.func.isRequired,loading:Q.bool,theme:Q.oneOf(["dark","light"])};const KE=({theme:r="dark"})=>{const[t,a]=p.useState([]),[n,i]=p.useState(""),[c,o]=p.useState({isOpen:!1,user:null}),[u,m]=p.useState({isOpen:!1,user:null}),[x,g]=p.useState(!0),[k,S]=p.useState({}),[_,I]=p.useState(null);p.useEffect(()=>{(async()=>{g(!0);try{const z=await Jt(ue(M,"users")),F=await Promise.all(z.docs.map(async v=>{const ie={id:v.id,...v.data()},X=Fe(ue(M,"sales"),dt("userId","==",v.id)),ae=await Jt(X);return{...ie,orderCount:ae.size}}));a(F)}catch(z){I("No se pudieron obtener los usuarios: "+z.message)}g(!1)})()},[]);const P=H=>o({isOpen:!0,user:H}),b=()=>o({isOpen:!1,user:null}),B=H=>m({isOpen:!0,user:H}),L=()=>m({isOpen:!1,user:null}),O=async(H,z)=>{S(F=>({...F,[`balance_${H}`]:!0}));try{const F=se(M,"users",H);await Ga(F,{balance:z}),a(v=>v.map(ie=>ie.id===H?{...ie,balance:z}:ie)),b()}catch(F){I("Error al actualizar saldo: "+F.message)}S(F=>({...F,[`balance_${H}`]:!1}))},te=async(H,z)=>{S(F=>({...F,[`role_${H}`]:!0}));try{const F=se(M,"users",H);await Ga(F,{role:z}),a(v=>v.map(ie=>ie.id===H?{...ie,role:z}:ie)),L()}catch(F){I("Error al actualizar rol: "+F.message)}S(F=>({...F,[`role_${H}`]:!1}))},ne=async(H,z)=>{S(F=>({...F,[`status_${H}`]:!0}));try{const F=se(M,"users",H),v=z==="suspended"?"active":"suspended";await Ga(F,{status:v}),a(ie=>ie.map(X=>X.id===H?{...X,status:v}:X))}catch(F){I("Error al cambiar estado: "+F.message)}S(F=>({...F,[`status_${H}`]:!1}))},be=async H=>{S(z=>({...z,[`delete_${H}`]:!0}));try{const z=se(M,"users",H);await sc(z),a(F=>F.filter(v=>v.id!==H))}catch(z){I("Error al eliminar usuario: "+z.message)}S(z=>({...z,[`delete_${H}`]:!1}))};return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:`bg-${r==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md border ${r==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${r==="dark"?"text-white":"text-gray-900"}`,children:["Lista de"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Usuarios"})," ","(",t.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar usuarios...",className:`px-4 py-2 rounded-xl ${r==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400 placeholder-gray-500":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600 placeholder-gray-400"} focus:ring-2 transition-all text-sm`,value:n,onChange:H=>i(H.target.value),"aria-label":"Buscar usuarios"}),e.jsx(or,{className:`absolute right-3 top-2.5 ${r==="dark"?"text-blue-400":"text-blue-600"}`})]})]}),x?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx("div",{className:`animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 ${r==="dark"?"border-blue-500":"border-blue-600"}`})}):_?e.jsx("div",{className:`text-center py-4 ${r==="dark"?"text-blue-400":"text-blue-600"}`,children:_}):t.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:`${r==="dark"?"bg-gray-800/50":"bg-gray-100"} backdrop-blur-sm`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Vd,{})," Usuario"]})}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Du,{})," Email"]})}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Vp,{})," Rol"]})}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ho,{})," Saldo"]})}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Órdenes"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Acciones"})]})}),e.jsx("tbody",{className:`${r==="dark"?"bg-gray-800/50":"bg-white"} divide-y divide-gray-600/50`,children:t.filter(H=>(H.username||"").toLowerCase().includes(n.toLowerCase())||(H.email||"").toLowerCase().includes(n.toLowerCase())).map(H=>e.jsxs("tr",{className:`${H.status==="suspended"?r==="dark"?"bg-red-900/20":"bg-red-100/50":""} hover:bg-${r==="dark"?"gray-700/50":"gray-100"} transition-all duration-300`,children:[e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${r==="dark"?"text-white":"text-gray-900"}`,children:H.username||"Sin nombre"}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:H.email}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${r==="dark"?"bg-blue-900/80 text-blue-400":"bg-blue-100/80 text-blue-600"}`,children:ree(H.role)}),e.jsx("button",{onClick:()=>B(H),disabled:k[`role_${H.id}`],className:`ml-2 p-1 ${r==="dark"?"bg-blue-700 hover:bg-blue-800 text-blue-200 disabled:bg-blue-900":"bg-blue-500 hover:bg-blue-600 text-white disabled:bg-blue-300"} rounded-xl transition-all duration-300`,title:"Editar Rol","aria-label":`Editar rol de ${H.username}`,children:e.jsx(a5,{size:14})})]}),e.jsxs("td",{className:`px-4 py-4 whitespace-nowrap ${r==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",(H.balance||0).toFixed(2)]}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${r==="dark"?"text-white":"text-gray-900"}`,children:H.orderCount||0}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap flex space-x-2",children:[e.jsx("button",{onClick:()=>P(H),disabled:k[`balance_${H.id}`],className:`p-2 ${r==="dark"?"bg-blue-600 hover:bg-blue-700 text-white disabled:bg-blue-800":"bg-blue-500 hover:bg-blue-600 text-white disabled:bg-blue-300"} rounded-xl transition-all duration-300`,title:"Editar Saldo","aria-label":`Editar saldo de ${H.username}`,children:e.jsx(a5,{size:16})}),e.jsx("button",{onClick:()=>ne(H.id,H.status),disabled:k[`status_${H.id}`],className:`p-2 ${H.status==="suspended"?r==="dark"?"bg-green-600 hover:bg-green-700 text-white disabled:bg-green-800":"bg-green-500 hover:bg-green-600 text-white disabled:bg-green-300":r==="dark"?"bg-yellow-600 hover:bg-yellow-700 text-white disabled:bg-yellow-800":"bg-yellow-500 hover:bg-yellow-600 text-white disabled:bg-yellow-300"} rounded-xl transition-all duration-300`,title:H.status==="suspended"?"Activar Cuenta":"Suspender Cuenta","aria-label":H.status==="suspended"?`Activar cuenta de ${H.username}`:`Suspender cuenta de ${H.username}`,children:H.status==="suspended"?e.jsx(YH,{size:16}):e.jsx(GH,{size:16})}),e.jsx("button",{onClick:()=>be(H.id),disabled:k[`delete_${H.id}`],className:`p-2 ${r==="dark"?"bg-red-600 hover:bg-red-700 text-white disabled:bg-red-800":"bg-red-500 hover:bg-red-600 text-white disabled:bg-red-300"} rounded-xl transition-all duration-300`,title:"Eliminar Cuenta","aria-label":`Eliminar cuenta de ${H.username}`,children:e.jsx(lw,{size:16})})]})]},H.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Vp,{className:`mx-auto text-4xl ${r==="dark"?"text-blue-400":"text-blue-600"} mb-3`}),e.jsx("p",{className:`${r==="dark"?"text-gray-300":"text-gray-600"}`,children:"No hay usuarios registrados"})]})]}),e.jsx(WE,{isOpen:c.isOpen,user:c.user,onClose:b,onSave:O,loading:k[`balance_${c.user?.id}`],theme:r}),e.jsx(GE,{isOpen:u.isOpen,user:u.user,onClose:L,onSave:te,loading:k[`role_${u.user?.id}`],theme:r})]})};KE.propTypes={theme:Q.oneOf(["dark","light"])};const YE=({isOpen:r,message:t,title:a,onClose:n})=>r?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:a}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(De,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:n,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null;YE.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,title:Q.string.isRequired,onClose:Q.func.isRequired};const QE=({formatDate:r=a=>{if(!a)return"No especificada";try{const n=a.toDate?a.toDate():new Date(a);return isNaN(n.getTime())?"Fecha inválida":n.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},theme:t="dark"})=>{const[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState({}),[m,x]=p.useState({isOpen:!1,message:"",title:""}),g=(I,P)=>{x({isOpen:!0,title:I,message:P})},k=()=>{x({isOpen:!1,message:"",title:""})};p.useEffect(()=>{const I=it(Fe(ue(M,"pendingTopUps"),dt("status","==","pendiente")),b=>{n(b.docs.map(B=>({id:B.id,...B.data()})))}),P=it(ue(M,"topUpsHistory"),b=>{c(b.docs.map(B=>({id:B.id,...B.data()})))});return()=>{I(),P()}},[]);const S=async I=>{try{u(L=>({...L,[I]:!0}));const P=se(M,"pendingTopUps",I),b=a.find(L=>L.id===I);if(!b?.userId)throw new Error("Usuario no encontrado para la recarga");await Ga(P,{status:"aprobado",updatedAt:mt()});const B=se(M,"users",b.userId);await Ga(B,{balance:pr(b.amount||0)}),await hl(se(M,"topUpsHistory",I),{...b,status:"aprobado",updatedAt:mt()}),g("Éxito","Recarga aprobada exitosamente")}catch(P){console.error("Error al aprobar recarga:",P),g("Error",P.message||"Error al aprobar la recarga")}finally{u(P=>({...P,[I]:!1}))}},_=async I=>{try{u(B=>({...B,[I]:!0}));const P=se(M,"pendingTopUps",I);await Ga(P,{status:"rechazado",updatedAt:mt()});const b=a.find(B=>B.id===I);await hl(se(M,"topUpsHistory",I),{...b,status:"rechazado",updatedAt:mt()}),g("Éxito","Recarga rechazada exitosamente")}catch(P){console.error("Error al rechazar recarga:",P),g("Error",P.message||"Error al rechazar la recarga")}finally{u(P=>({...P,[I]:!1}))}};return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:`bg-${t==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md border ${t==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Recargas"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Pendientes - BlackStreaming"})]}),Array.isArray(a)&&a.length>0?e.jsx("div",{className:"space-y-4",children:a.map(I=>e.jsxs("div",{className:`border ${t==="dark"?"border-gray-600/50":"border-gray-300"} rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300`,children:[e.jsxs("div",{className:`${t==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm px-4 py-3 border-b ${t==="dark"?"border-gray-600/50":"border-gray-300"} flex justify-between items-center`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 ${t==="dark"?"bg-blue-900/80":"bg-blue-100/80"} rounded-full flex items-center justify-center ${t==="dark"?"text-blue-400":"text-blue-600"}`,children:e.jsx(ho,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-semibold ${t==="dark"?"text-white":"text-gray-900"}`,children:I.username||"Sin nombre"}),e.jsxs("p",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:["Solicitado: ",r(I.requestedAt)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",(I.amount||0).toFixed(2)]})})]}),e.jsx("div",{className:`p-4 ${t==="dark"?"bg-gray-700/50":"bg-gray-50"} backdrop-blur-sm`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>S(I.id),disabled:o[I.id],className:`flex-1 ${t==="dark"?"bg-green-600 hover:bg-green-700 disabled:bg-green-800":"bg-green-500 hover:bg-green-600 disabled:bg-green-300"} text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300`,"aria-label":`Aprobar recarga de ${I.username}`,children:o[I.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(QH,{size:18})," Aprobar Recarga"]})}),e.jsx("button",{onClick:()=>_(I.id),disabled:o[I.id],className:`flex-1 ${t==="dark"?"bg-red-600 hover:bg-red-700 disabled:bg-red-800":"bg-red-500 hover:bg-red-600 disabled:bg-red-300"} text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300`,"aria-label":`Rechazar recarga de ${I.username}`,children:o[I.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(De,{size:18})," Rechazar Recarga"]})})]})})]},I.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ho,{className:`mx-auto text-4xl ${t==="dark"?"text-blue-400":"text-blue-600"} mb-3`}),e.jsx("h4",{className:`text-lg font-medium ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"No hay recargas pendientes"}),e.jsx("p",{className:`${t==="dark"?"text-gray-400":"text-gray-500"}`,children:"Todas las solicitudes han sido procesadas"})]})]}),e.jsxs("div",{className:`bg-${t==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md border ${t==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"} mb-4`,children:["Historial de"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Recargas - BlackStreaming"})]}),Array.isArray(i)&&i.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:`${t==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Usuario"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Monto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Estado"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Fecha"})]})}),e.jsx("tbody",{className:`${t==="dark"?"bg-gray-800/50":"bg-white"} divide-y divide-gray-600/50`,children:i.map(I=>e.jsxs("tr",{className:`hover:bg-${t==="dark"?"gray-700/50":"gray-100"} transition-all duration-300`,children:[e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${t==="dark"?"text-white":"text-gray-900"}`,children:I.username||"Sin nombre"}),e.jsxs("td",{className:`px-4 py-4 whitespace-nowrap ${t==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",(I.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${I.status==="aprobado"?t==="dark"?"bg-green-900/80 text-green-400":"bg-green-100/80 text-green-600":t==="dark"?"bg-red-900/80 text-red-400":"bg-red-100/80 text-red-600"}`,children:I.status||"Desconocido"})}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:r(I.updatedAt)})]},I.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ho,{className:`mx-auto text-4xl ${t==="dark"?"text-blue-400":"text-blue-600"} mb-3`}),e.jsx("p",{className:`${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"No hay historial de recargas"})]})]}),e.jsx(YE,{isOpen:m.isOpen,title:m.title,message:m.message,onClose:k})]})};QE.propTypes={formatDate:Q.func,theme:Q.oneOf(["dark","light"])};const aee=({withdrawals:r,formatDate:t,actionLoading:a,setActionLoading:n,showNotificationModal:i})=>{const c=async(o,u)=>{try{n(x=>({...x,[o]:!0}));const m=se(M,"withdrawals",o);await Ga(m,{status:u==="approve"?"completed":"rejected",updatedAt:mt()}),i("Éxito",`Retiro ${u==="approve"?"aprobado":"rechazado"} exitosamente`)}catch(m){i("Error",m.message||`Error al ${u==="approve"?"aprobar":"rechazar"} el retiro`)}finally{n(m=>({...m,[o]:!1}))}};return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Retiros ",e.jsx("span",{className:"text-red-400",children:"Pendientes"})]}),r.length===0?e.jsxs("div",{className:"text-center text-gray-300 py-8",children:[e.jsx(lo,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("p",{children:"No hay retiros pendientes"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-600/50",children:[e.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Usuario"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Monto"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Fecha"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Acciones"})]})}),e.jsx("tbody",{children:r.map(o=>e.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30 transition-all duration-300",children:[e.jsx("td",{className:"py-3 px-4",children:o.userEmail||"No especificado"}),e.jsxs("td",{className:"py-3 px-4",children:["S/ ",o.amount?.toFixed(2)||"0.00"]}),e.jsx("td",{className:"py-3 px-4",children:t(o.createdAt)}),e.jsxs("td",{className:"py-3 px-4 flex space-x-2",children:[e.jsxs("button",{onClick:()=>c(o.id,"approve"),disabled:a[o.id],className:`px-3 py-1 rounded-xl text-white flex items-center space-x-1 transition-all duration-300 ${a[o.id]?"bg-gray-600 cursor-not-allowed":"bg-green-500 hover:bg-green-600"}`,children:[e.jsx(Bq,{}),e.jsx("span",{children:"Aprobar"})]}),e.jsxs("button",{onClick:()=>c(o.id,"reject"),disabled:a[o.id],className:`px-3 py-1 rounded-xl text-white flex items-center space-x-1 transition-all duration-300 ${a[o.id]?"bg-gray-600 cursor-not-allowed":"bg-red-500 hover:bg-red-600"}`,children:[e.jsx(Pn,{}),e.jsx("span",{children:"Rechazar"})]})]})]},o.id))})]})})]})},XE=({sales:r=[],totalSales:t=0,formatDate:a=c=>"No especificada",getOrderStatus:n=()=>"Desconocido",theme:i="dark"})=>{const[c,o]=p.useState({}),[u,m]=p.useState(null),x=async g=>{o(k=>({...k,[`delete_${g}`]:!0}));try{const k=se(M,"sales",g);await sc(k),window.dispatchEvent(new CustomEvent("saleDeleted",{detail:{saleId:g}}))}catch(k){m("Error al eliminar pedido: "+k.message)}o(k=>({...k,[`delete_${g}`]:!1}))};return e.jsxs("div",{className:`bg-${i==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${i==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${i==="dark"?"text-white":"text-gray-900"} mb-4`,children:["Ventas"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"General - BlackStreaming"})]}),e.jsxs("div",{className:`${i==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-6 text-center mb-6 border ${i==="dark"?"border-gray-600/50":"border-gray-300"}`,children:[e.jsx("h4",{className:`text-lg font-semibold ${i==="dark"?"text-blue-400":"text-blue-600"} mb-2`,children:"Total Ventas"}),e.jsxs("p",{className:`text-3xl font-bold ${i==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",t.toFixed(2)]}),e.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-300":"text-gray-600"} mt-2`,children:"Suma de todos los pedidos realizados"})]}),e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${i==="dark"?"text-white":"text-gray-900"} mb-4`,children:["Historial de"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Pedidos - BlackStreaming"})]}),u&&e.jsx("div",{className:`text-center py-4 ${i==="dark"?"text-blue-400":"text-blue-600"}`,children:u}),r.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:`${i==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Nombre del Producto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Precio"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Proveedor"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Usuario Comprador"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Fecha"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Estado"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Acciones"})]})}),e.jsx("tbody",{className:`${i==="dark"?"bg-gray-800/50":"bg-white"} divide-y divide-gray-600/50`,children:r.map(g=>e.jsxs("tr",{className:`hover:bg-${i==="dark"?"gray-700/50":"gray-100"} transition-all duration-300`,children:[e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${i==="dark"?"text-white":"text-gray-900"}`,children:g.productName||"Sin nombre"}),e.jsxs("td",{className:`px-4 py-4 whitespace-nowrap ${i==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",(g.price||0).toFixed(2)]}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:g.provider||"Sin proveedor"}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:g.buyer||"Sin comprador"}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:a(g.createdAt)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${n(g)==="Pendiente"?i==="dark"?"bg-yellow-900/80 text-yellow-400":"bg-yellow-100/80 text-yellow-600":n(g)==="Activo"?i==="dark"?"bg-green-900/80 text-green-400":"bg-green-100/80 text-green-600":i==="dark"?"bg-red-900/80 text-red-400":"bg-red-100/80 text-red-600"}`,children:n(g)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>x(g.id),disabled:c[`delete_${g.id}`],className:`p-2 ${i==="dark"?"bg-red-600 hover:bg-red-700 text-white disabled:bg-red-800":"bg-red-500 hover:bg-red-600 text-white disabled:bg-red-300"} rounded-xl transition-all duration-300`,title:"Eliminar Pedido","aria-label":`Eliminar pedido ${g.productName||"sin nombre"}`,children:c[`delete_${g.id}`]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsx(lw,{size:16})})})]},g.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(zd,{className:`mx-auto text-4xl ${i==="dark"?"text-blue-400":"text-blue-600"} mb-3`}),e.jsx("p",{className:`${i==="dark"?"text-gray-300":"text-gray-600"}`,children:"No hay pedidos registrados"})]})]})};XE.propTypes={sales:Q.array,totalSales:Q.number,formatDate:Q.func,getOrderStatus:Q.func,theme:Q.oneOf(["dark","light"])};const JE=({earnings:r={day:0,week:0,month:0,total:0},totalUsers:t=0,theme:a="dark"})=>e.jsxs("div",{className:`bg-${a==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${a==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${a==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Ganancias -"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:`${a==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${a==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[e.jsxs("h4",{className:`text-lg font-semibold ${a==="dark"?"text-blue-400":"text-blue-600"} mb-2 flex items-center`,children:[e.jsx(K0,{className:"mr-2","aria-hidden":"true"})," Ganancias Diarias"]}),e.jsxs("p",{className:`text-2xl font-bold ${a==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancias diarias",children:["S/ ",(r.day||0).toFixed(2)]}),e.jsx("p",{className:`text-sm ${a==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Estimado por día"})]}),e.jsxs("div",{className:`${a==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${a==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[e.jsxs("h4",{className:`text-lg font-semibold ${a==="dark"?"text-blue-400":"text-blue-600"} mb-2 flex items-center`,children:[e.jsx(K0,{className:"mr-2","aria-hidden":"true"})," Ganancias Semanales"]}),e.jsxs("p",{className:`text-2xl font-bold ${a==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancias semanales",children:["S/ ",(r.week||0).toFixed(2)]}),e.jsx("p",{className:`text-sm ${a==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Estimado por semana"})]}),e.jsxs("div",{className:`${a==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${a==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[e.jsxs("h4",{className:`text-lg font-semibold ${a==="dark"?"text-blue-400":"text-blue-600"} mb-2 flex items-center`,children:[e.jsx(K0,{className:"mr-2","aria-hidden":"true"})," Ganancias Mensuales"]}),e.jsxs("p",{className:`text-2xl font-bold ${a==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancias mensuales",children:["S/ ",(r.month||0).toFixed(2)]}),e.jsx("p",{className:`text-sm ${a==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Estimado por mes"})]}),e.jsxs("div",{className:`${a==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${a==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[e.jsxs("h4",{className:`text-lg font-semibold ${a==="dark"?"text-blue-400":"text-blue-600"} mb-2 flex items-center`,children:[e.jsx(K0,{className:"mr-2","aria-hidden":"true"})," Ganancias Totales"]}),e.jsxs("p",{className:`text-2xl font-bold ${a==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancias totales",children:["S/ ",(r.total||0).toFixed(2)]}),e.jsx("p",{className:`text-sm ${a==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Total acumulado"})]})]}),e.jsxs("div",{className:`${a==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${a==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[e.jsx("h4",{className:`text-lg font-semibold ${a==="dark"?"text-blue-400":"text-blue-600"} mb-2`,children:"Resumen"}),e.jsxs("p",{className:`${a==="dark"?"text-gray-300":"text-gray-600"}`,children:["Total de usuarios registrados:"," ",e.jsx("span",{className:`font-medium ${a==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Total de usuarios registrados",children:t})]}),e.jsxs("p",{className:`${a==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:["Ganancia por usuario:"," ",e.jsx("span",{className:`font-medium ${a==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancia por usuario",children:"S/ 5.00"})]}),e.jsx("p",{className:`${a==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Las ganancias se calculan asumiendo S/ 5.00 por cada usuario registrado. Las estimaciones diarias y semanales son proporciones del total (5% y 25%, respectivamente)."})]})]});JE.propTypes={earnings:Q.shape({day:Q.number,week:Q.number,month:Q.number,total:Q.number}),totalUsers:Q.number,theme:Q.oneOf(["dark","light"])};const ZE=({userName:r="",setUserName:t=()=>{},email:a="",handleSaveChanges:n=()=>{},handleLogout:i=()=>{},actionLoading:c={},theme:o="dark"})=>e.jsxs("div",{className:`bg-${o==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-2xl mx-auto border ${o==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${o==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Configuración -"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),e.jsxs("form",{onSubmit:n,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-2 flex items-center`,children:[e.jsx(Vd,{className:`mr-2 ${o==="dark"?"text-blue-400":"text-blue-600"}`,"aria-hidden":"true"})," ","Nombre de usuario"]}),e.jsx("input",{type:"text",value:r,onChange:u=>t(u.target.value),className:`w-full px-4 py-2 rounded-xl ${o==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,placeholder:"Ingresa tu nombre de usuario",required:!0,"aria-label":"Nombre de usuario"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-2 flex items-center`,children:[e.jsx(Du,{className:`mr-2 ${o==="dark"?"text-blue-400":"text-blue-600"}`,"aria-hidden":"true"})," ","Correo electrónico"]}),e.jsx("input",{type:"email",value:a,disabled:!0,className:`w-full px-4 py-2 rounded-xl ${o==="dark"?"bg-gray-700/50 text-gray-400 border-gray-600/50":"bg-gray-100 text-gray-500 border-gray-300"} cursor-not-allowed`,"aria-label":"Correo electrónico (solo lectura)"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-400":"text-gray-500"} mt-1`,children:"El correo no puede ser modificado."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium ${o==="dark"?"text-gray-300":"text-gray-700"} mb-2 flex items-center`,children:[e.jsx(ow,{className:`mr-2 ${o==="dark"?"text-blue-400":"text-blue-600"}`,"aria-hidden":"true"})," ","Nueva contraseña (opcional)"]}),e.jsx("input",{type:"password",name:"password",className:`w-full px-4 py-2 rounded-xl ${o==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,placeholder:"Ingresa una nueva contraseña","aria-label":"Nueva contraseña"}),e.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-400":"text-gray-500"} mt-1`,children:"Mínimo 6 caracteres. Déjalo en blanco para no cambiarla."})]}),e.jsx("button",{type:"submit",disabled:c.config,className:`w-full py-3 px-4 ${o==="dark"?"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-800":"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300"} text-white rounded-xl font-medium transition-all duration-300`,"aria-label":"Guardar cambios",children:c.config?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar Cambios"})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:i,className:`w-full py-3 px-4 ${o==="dark"?"bg-red-600 hover:bg-red-700 disabled:bg-red-800":"bg-red-500 hover:bg-red-600 disabled:bg-red-300"} text-white rounded-xl font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Cerrar sesión",children:[e.jsx(Ot,{size:18})," Cerrar Sesión"]})})]});ZE.propTypes={userName:Q.string,setUserName:Q.func,email:Q.string,handleSaveChanges:Q.func,handleLogout:Q.func,actionLoading:Q.object,theme:Q.oneOf(["dark","light"])};const e_=({isOpen:r,message:t,title:a,onClose:n,theme:i="dark"})=>r?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:`bg-${i==="dark"?"gray-900/90":"white"} backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border ${i==="dark"?"border-gray-800/50":"border-gray-300"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:`text-xl font-bold ${i==="dark"?"text-white":"text-gray-900"}`,children:[a||"Notificación"," -"," ",e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),e.jsx("button",{onClick:n,className:`${i==="dark"?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,"aria-label":"Cerrar notificación",children:e.jsx(De,{size:20})})]}),e.jsx("p",{className:`mb-6 ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:t||"No se proporcionó ningún mensaje."}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:n,className:`px-4 py-2 ${i==="dark"?"bg-blue-500 hover:bg-blue-600 text-white":"bg-blue-600 hover:bg-blue-700 text-white"} rounded-xl transition-all duration-300`,"aria-label":"Aceptar notificación",children:"Aceptar"})})]})})}):null;e_.propTypes={isOpen:Q.bool.isRequired,message:Q.string,title:Q.string,onClose:Q.func.isRequired,theme:Q.oneOf(["dark","light"])};const see=({isOpen:r,user:t,onClose:a,onSave:n})=>{const[i,c]=p.useState(t?.balance||0),[o,u]=p.useState(""),m=x=>{if(x.preventDefault(),u(""),isNaN(i)||i<0){u("Por favor, ingrese un saldo válido (número no negativo).");return}n(t.id,parseFloat(i))};return r?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Editar Saldo de ",t.username]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(Pn,{size:20})})]}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nuevo Saldo (S/)"}),e.jsx("input",{type:"number",value:i,onChange:x=>c(x.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"0",step:"0.01",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},t_=({theme:r,products:t,loadingProducts:a,searchQuery:n,setSearchQuery:i,handleDeleteProduct:c})=>{const o=r==="dark",u=t.filter(m=>m.name?.toLowerCase().includes(n.toLowerCase())||m.category?.toLowerCase().includes(n.toLowerCase()));return a?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsxs(j.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${o?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[e.jsx("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${o?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Gestión de Productos"}),e.jsx("div",{className:"relative w-full sm:w-64 mt-4 sm:mt-0",children:e.jsx("input",{type:"text",placeholder:"Buscar productos...",value:n,onChange:m=>i(m.target.value),className:`w-full px-3 py-2 rounded-xl ${o?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300 text-sm placeholder-gray-500`,"aria-label":"Search products"})})]}),u.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[e.jsx("thead",{className:`backdrop-blur-sm ${o?"bg-gray-900/80":"bg-gray-200/80"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${o?"text-gray-300":"text-gray-700"}`,children:"Imagen"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${o?"text-gray-300":"text-gray-700"}`,children:"Nombre"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${o?"text-gray-300":"text-gray-700"}`,children:"Categoría"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${o?"text-gray-300":"text-gray-700"}`,children:"Tipo"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${o?"text-gray-300":"text-gray-700"}`,children:"Proveedor"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${o?"text-gray-300":"text-gray-700"}`,children:"Estado"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${o?"text-gray-300":"text-gray-700"}`,children:"Stock"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${o?"text-gray-300":"text-gray-700"}`,children:"Precio"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${o?"text-gray-300":"text-gray-700"}`,children:"Acciones"})]})}),e.jsx("tbody",{className:`divide-y divide-gray-700/50 ${o?"bg-gray-800/70":"bg-gray-100/70"}`,children:u.map((m,x)=>e.jsxs("tr",{className:"hover:bg-blue-500/10 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:m.image?e.jsx("img",{src:m.image,alt:m.name,className:"h-12 w-12 rounded-lg object-cover",loading:"lazy"}):e.jsx("div",{className:"h-12 w-12 bg-gray-300 rounded-lg flex items-center justify-center",children:e.jsx(ny,{className:"text-gray-500",size:20})})}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${o?"text-white":"text-gray-900"}`,children:m.name||"Sin nombre"}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${o?"text-gray-300":"text-gray-600"}`,children:m.category||"Sin categoría"}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${o?"text-gray-300":"text-gray-600"}`,children:m.accountType||"N/A"}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${o?"text-gray-300":"text-gray-600"}`,children:m.provider||"Sin proveedor"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${m.status==="En stock"?"bg-green-500/20 text-green-400 border-green-500/50":m.status==="A pedido"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/50":"bg-red-500/20 text-red-400 border-red-500/50"} border`,children:m.status||"Desconocido"})}),e.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${o?"text-gray-300":"text-gray-600"}`,children:m.stock!=null?m.stock:"0"}),e.jsxs("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${o?"text-white":"text-gray-900"}`,children:["S/ ",parseFloat(m.price||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{onClick:()=>c(m.id),className:`p-2 rounded-full ${o?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-red-100 text-red-600 hover:bg-red-200"} transition-all duration-300`,title:"Eliminar producto","aria-label":`Eliminar producto ${m.name}`,children:e.jsx(lw,{size:14})})})]},m.id||x))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ny,{className:`mx-auto text-4xl ${o?"text-gray-400":"text-gray-500"} mb-3`}),e.jsx("h4",{className:`text-lg font-medium ${o?"text-gray-300":"text-gray-700"}`,children:"No hay productos registrados"}),e.jsx("p",{className:`text-sm ${o?"text-gray-400":"text-gray-600"}`,children:"Los productos aparecerán aquí cuando los agregues."})]})]})};t_.propTypes={theme:Q.string.isRequired,products:Q.array.isRequired,loadingProducts:Q.bool.isRequired,searchQuery:Q.string.isRequired,setSearchQuery:Q.func.isRequired,handleDeleteProduct:Q.func.isRequired};const nee=Sn.memo(({show:r,onClose:t,title:a,message:n,theme:i})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${i==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${i==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:c=>c.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${i==="dark"?"text-white":"text-gray-900"}`,children:a}),e.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:n})]})})}));nee.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,title:Q.string.isRequired,message:Q.string.isRequired,theme:Q.string.isRequired};const r_=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState("inicio"),[i,c]=p.useState(""),[o,u]=p.useState(""),[m,x]=p.useState([]),[g,k]=p.useState([]),[S,_]=p.useState([]),[I,P]=p.useState([]),[b,B]=p.useState([]),[L,O]=p.useState([]),[te,ne]=p.useState(0),[be,H]=p.useState(0),[z,F]=p.useState(0),[v,ie]=p.useState(0),[X,ae]=p.useState({day:0,week:0,month:0,total:0}),[We,ct]=p.useState(!0),[ft,ot]=p.useState(!0),[Ee,Ie]=p.useState(null),[_e,re]=p.useState({}),[J,de]=p.useState({isOpen:!1,message:"",title:""}),[ce,he]=p.useState({isOpen:!1,user:null}),[q,l]=p.useState("dark"),[Xe,qe]=p.useState(!1),[Ae,Oe]=p.useState(!1),[kt,Lt]=p.useState(""),[jt,Wt]=p.useState(""),Tt=$r(),tt=p.useCallback(()=>{l(V=>V==="dark"?"light":"dark")},[]),yt=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),Ue=p.useCallback((V,ee)=>{de({isOpen:!0,title:V,message:ee})},[]),lt=p.useCallback(()=>{de({isOpen:!1,message:"",title:""})},[]),Te=p.useCallback(V=>{he({isOpen:!0,user:V})},[]),Ze=p.useCallback(()=>{he({isOpen:!1,user:null})},[]),st=p.useCallback(V=>{if(!V)return"No especificada";try{const ee=V instanceof Date?V:new Date(V);return isNaN(ee.getTime())?"Fecha inválida":ee.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},[]),pt=p.useCallback(async V=>{if(window.confirm("¿Estás seguro de que quieres eliminar este producto?"))try{re(ee=>({...ee,deleteProduct:!0})),await sc(se(M,"products",V)),Ue("Éxito","Producto eliminado correctamente")}catch(ee){console.error("Error al eliminar producto:",ee),Ue("Error",ee.message||"Error al eliminar el producto")}finally{re(ee=>({...ee,deleteProduct:!1}))}},[Ue]),$e=p.useCallback(async(V,ee)=>{try{re(ge=>({...ge,balance:!0}));const fe=se(M,"users",V);await Ga(fe,{balance:ee,updatedAt:mt()}),Ue("Éxito","Saldo actualizado exitosamente"),Ze()}catch(fe){console.error("Error al actualizar saldo:",fe),Ue("Error",fe.message||"Error al actualizar el saldo")}finally{re(fe=>({...fe,balance:!1}))}},[Ue,Ze]),s=p.useCallback(async V=>{V.preventDefault();try{re(A=>({...A,config:!0}));const ee=V.target.password.value,fe=se(M,"users",Xt.currentUser.uid),ge={username:i,updatedAt:mt()};if(ee){if(ee.length<6){Ue("Error","La contraseña debe tener al menos 6 caracteres");return}await wv(Xt.currentUser,ee)}await Ga(fe,ge),Ue("Éxito","Cambios guardados correctamente"),V.target.reset()}catch(ee){console.error("Error al guardar cambios:",ee),Ue("Error",ee.message||"Error al guardar los cambios")}finally{re(ee=>({...ee,config:!1}))}},[i,Ue]),E=p.useCallback(async()=>{try{await Zr(Xt),Tt("/")}catch(V){console.error("Error al cerrar sesión:",V),Ue("Error",V.message||"Error al cerrar sesión")}},[Tt,Ue]);p.useEffect(()=>{const V=Fr(Xt,ee=>{ee?(u(ee.email||"No especificado"),ct(!1)):Tt("/login")});return()=>V()},[Tt]),p.useEffect(()=>{if(!Xt.currentUser)return;const V=se(M,"users",Xt.currentUser.uid),ee=it(V,fe=>{if(fe.exists()){const ge=fe.data();c(ge.username||"Admin")}else Ie("Usuario no encontrado")},fe=>{console.error("Error al cargar datos del usuario:",fe),Ie("Error al cargar datos del usuario: "+fe.message)});return()=>ee()},[]),p.useEffect(()=>{const V=ue(M,"users"),ee=ue(M,"sales"),fe=Fe(ue(M,"pendingTopUps"),dt("status","==","pendiente")),ge=Fe(ue(M,"withdrawals"),dt("status","==","pendiente")),A=Fe(ue(M,"products"),Qr("createdAt","desc")),Y=it(V,we=>{const je=we.docs.map(Me=>({id:Me.id,...Me.data()}));x(je),ne(je.length)},we=>{console.error("Error al cargar usuarios:",we),Ie("Error al cargar usuarios: "+we.message)}),U=it(ee,we=>{const je=we.docs.map(Ye=>({id:Ye.id,...Ye.data()}));k(je);const Me=je.reduce((Ye,Be)=>Ye+(parseFloat(Be.price)||0),0);H(Me)},we=>{console.error("Error al cargar ventas:",we),Ie("Error al cargar ventas: "+we.message)}),N=it(fe,we=>{const je=we.docs.map(Me=>({id:Me.id,...Me.data(),date:Me.data().requestedAt?.toDate?.()||new Date,amount:parseFloat(Me.data().amount)||0}));_(je),F(je.length)},we=>{console.error("Error al cargar recargas:",we),Ie("Error al cargar recargas: "+we.message)}),C=it(ge,we=>{const je=we.docs.map(Me=>({id:Me.id,...Me.data(),date:Me.data().requestedAt?.toDate?.()||new Date,amount:parseFloat(Me.data().amount)||0}));P(je),ie(je.length)},we=>{console.error("Error al cargar retiros:",we),Ie("Error al cargar retiros: "+we.message)}),K=it(A,we=>{const je=we.docs.map(Me=>({id:Me.id,...Me.data(),createdAt:Me.data().createdAt?.toDate?.()||new Date}));B(je),ot(!1)},we=>{console.error("Error al cargar productos:",we),Ie("Error al cargar productos: "+we.message),ot(!1)});return()=>{Y(),U(),N(),C(),K()}},[]),p.useEffect(()=>{const V=it(se(M,"notifications","adminMessage"),ee=>{if(ee.exists()){const fe=ee.data();O([{id:ee.id,...fe,timestamp:fe.updatedAt?.toDate()}])}else O([])},ee=>{console.error("Error al cargar notificaciones:",ee),Ie("Error al cargar notificaciones: "+ee.message)});return()=>V()},[]),p.useEffect(()=>{const V=te*5;ae({day:V*.05,week:V*.25,month:V,total:V})},[te]),p.useEffect(()=>{const V=()=>{qe(window.scrollY>300)};return window.addEventListener("scroll",V),()=>window.removeEventListener("scroll",V)},[]);const y=p.useCallback(V=>{const ee=V.endDate?.toDate?.()||new Date,fe=new Date;return V.status==="pending"?"Pendiente":ee>fe&&V.status==="completed"?"Activo":"Expirado"},[]),R=p.useCallback(()=>We?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):Ee?e.jsxs("div",{className:`bg-${q==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${q==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsx(gc,{className:"mx-auto text-4xl text-blue-400 mb-4"}),e.jsx("h3",{className:`text-xl font-bold ${q==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Error"}),e.jsx("p",{className:`text-base ${q==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:Ee}),e.jsx("button",{onClick:()=>Ie(null),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Aceptar"})]}):e.jsx("div",{className:`bg-${q==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${q==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:(()=>{switch(a){case"inicio":return e.jsx(eee,{totalUsers:te,totalSales:be,pendingTopUps:z,pendingWithdrawals:v});case"notificaciones":return e.jsx(tee,{notifications:L,formatDate:st});case"usuarios":return e.jsx(KE,{users:m,openEditBalanceModal:Te});case"recargas":return e.jsx(QE,{topUps:S,formatDate:st,actionLoading:_e,setActionLoading:re,showNotificationModal:Ue});case"retiros":return e.jsx(aee,{withdrawals:I,formatDate:st,actionLoading:_e,setActionLoading:re,showNotificationModal:Ue});case"pedidos":return e.jsx(XE,{sales:g,totalSales:be,formatDate:st,getOrderStatus:y});case"productos":return e.jsx(t_,{theme:q,products:b,loadingProducts:ft,searchQuery:jt,setSearchQuery:Wt,handleDeleteProduct:pt});case"ganancias":return e.jsx(JE,{earnings:X,totalUsers:te});case"configuracion":return e.jsx(ZE,{userName:i,setUserName:c,email:o,handleSaveChanges:s,handleLogout:E,actionLoading:_e});default:return e.jsxs("div",{className:`bg-${q==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${q==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[e.jsx(gc,{className:"mx-auto text-4xl text-blue-400 mb-4"}),e.jsx("h3",{className:`text-xl font-bold ${q==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Sección no encontrada"}),e.jsx("p",{className:`text-base ${q==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>n("inicio"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Volver al inicio"})]})}})()}),[We,Ee,q,a,te,be,z,v,L,st,m,Te,S,_e,Ue,I,g,y,X,i,c,o,s,E,b,ft,jt,pt]);return e.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${q==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-50 to-gray-50 text-gray-900"} font-inter relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${q==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((V,ee)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},ee))})]}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${q==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r overflow-y-auto lg:shadow-md`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{Tt("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${q==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${q==="dark"?"text-white":"text-gray-900"}`,children:i}),e.jsx("p",{className:`text-xs ${q==="dark"?"text-gray-400":"text-gray-600"}`,children:"Administrador"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:iw},{id:"notificaciones",label:"Notificaciones",icon:nr},{id:"usuarios",label:"Usuarios",icon:Vp},{id:"recargas",label:"Recargas",icon:ho},{id:"retiros",label:"Retiros",icon:ho},{id:"pedidos",label:"Pedidos",icon:zd},{id:"productos",label:"Productos",icon:ny},{id:"ganancias",label:"Ganancias",icon:K0},{id:"configuracion",label:"Configuración",icon:ZH}].map(V=>e.jsxs("button",{onClick:()=>{n(V.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${a===V.id?"bg-blue-100 text-blue-600 border border-blue-300":q==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":a===V.id?"page":void 0,children:[e.jsx(V.icon,{className:"text-lg"}),e.jsx("span",{children:V.label})]},V.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{E(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${q==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsxs("header",{className:`${q==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md py-4 px-4 sm:px-6 lg:px-8 flex items-center justify-between shadow-md fixed top-0 left-0 right-0 z-50 lg:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"BlackStreaming logo",className:`h-10 w-10 rounded-full border ${q==="dark"?"border-gray-700/50":"border-gray-300"} shadow-sm lg:hidden`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-lg",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:kt,onChange:V=>Lt(V.target.value),className:`w-full py-2.5 px-5 ${q==="dark"?"bg-gray-800/50 border-gray-600/50 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-md`,"aria-label":"Search orders",onKeyDown:V=>V.key==="Enter"&&n("pedidos")}),e.jsx("button",{onClick:()=>n("pedidos"),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${q==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Search",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-4 relative",children:[e.jsx("button",{onClick:tt,className:`p-2 rounded-full ${q==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Switch to ${q==="dark"?"light":"dark"} theme`,children:q==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),e.jsxs("button",{onClick:()=>Oe(!0),className:`p-2 rounded-full relative ${q==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Notifications (${L.length} new)`,children:[e.jsx(nr,{size:20}),L.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:L.length})]}),e.jsx("button",{className:`lg:hidden p-2 rounded-full ${q==="dark"?"hover:bg-gray-700/50":"hover:bg-gray-100"} transition-all duration-300`,onClick:()=>t(!r),"aria-label":"Toggle mobile menu","aria-expanded":r,children:e.jsx(Lx,{size:20,className:q==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:e.jsx("div",{className:"relative",children:e.jsxs("button",{className:`flex items-center space-x-2 ${q==="dark"?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-md transition-all duration-300`,"aria-label":"User menu",children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:i.charAt(0).toUpperCase()}),e.jsx("span",{className:`text-sm font-semibold ${q==="dark"?"text-gray-200":"text-gray-800"}`,children:i})]})})})]})]}),e.jsx(ve,{children:Ae&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>Oe(!1),role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 lg:max-w-lg ${q==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${q==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:V=>V.stopPropagation(),children:[e.jsx("button",{onClick:()=>Oe(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notifications",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-xl font-bold mb-4 ${q==="dark"?"text-white":"text-gray-900"}`,children:"Notificaciones"}),L.length>0?L.map(V=>e.jsxs("div",{className:`p-4 mb-2 rounded-md ${q==="dark"?"bg-gray-800/50":"bg-gray-100/80"} border-l-4 ${q==="dark"?"border-blue-500/50":"border-blue-300/50"}`,children:[e.jsx("h3",{className:`font-semibold ${q==="dark"?"text-gray-200":"text-gray-800"}`,children:V.title||"Nueva Notificación"}),e.jsx("p",{className:`text-sm ${q==="dark"?"text-gray-300":"text-gray-700"} mt-1`,children:V.message}),V.roles&&V.roles.length>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Roles: ",V.roles.join(", ")]}),V.timestamp&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:st(V.timestamp)})]},V.id)):e.jsx("p",{className:`text-center ${q==="dark"?"text-gray-400":"text-gray-600"} mt-4`,children:"No hay notificaciones."})]})})}),e.jsx("main",{className:"lg:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start",children:R()}),e.jsxs("footer",{className:`${q==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md px-4 sm:px-6 lg:px-8 py-12 text-center relative z-10 lg:ml-64 max-w-6xl mx-auto rounded-2xl border ${q==="dark"?"border-gray-700/50":"border-gray-300"} mt-8 shadow-md`,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-4",children:"BlackStreaming"}),e.jsxs("p",{className:`text-base sm:text-lg ${q==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["Todos los derechos reservados. Desarrollado por"," ",e.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Saiph"}),"."]}),e.jsxs("div",{className:"flex justify-center space-x-6 sm:space-x-8 mb-6",children:[e.jsx("a",{href:"https://twitter.com",className:`${q==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Twitter",children:e.jsx(Ur,{size:28})}),e.jsx("a",{href:"https://instagram.com",className:`${q==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Instagram",children:e.jsx(Vr,{size:28})}),e.jsx("a",{href:"https://facebook.com",className:`${q==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Facebook",children:e.jsx(zr,{size:28})})]}),e.jsxs("div",{className:"flex justify-center space-x-4 sm:space-x-6",children:[e.jsx("a",{href:"#",className:`text-sm ${q==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Privacy Policy",children:"Política de Privacidad"}),e.jsx("a",{href:"#",className:`text-sm ${q==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Terms of Service",children:"Términos de Servicio"}),e.jsx("a",{href:"#",className:`text-sm ${q==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Contact Us",children:"Contáctanos"})]})]}),e.jsxs("p",{className:`text-sm ${q==="dark"?"text-gray-500":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Hecho con pasión."]})]}),e.jsx(ve,{children:Xe&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:yt,className:"fixed bottom-6 right-6 bg-blue-600/90 backdrop-blur-md p-3 rounded-full hover:bg-blue-700/95 shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 lg:bottom-8 lg:right-8","aria-label":"Back to top",children:e.jsx(ta,{size:20})})}),e.jsx(e_,{isOpen:J.isOpen,title:J.title,message:J.message,onClose:lt}),e.jsx(see,{isOpen:ce.isOpen,user:ce.user,onClose:Ze,onSave:$e}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden",onClick:()=>t(!1),"aria-hidden":"true"})]})};r_.propTypes={};const a_=p.createContext({theme:"dark",toggleTheme:()=>{}}),iee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(a_.Provider,{value:{theme:t,toggleTheme:n},children:r})},s_=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));s_.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const n_=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});n_.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const i_=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(a_),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Netflix")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,netflix:U.length}))},A=>{P("Error al cargar productos de Netflix"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"netflix_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"netflix"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"netflix"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Netflix`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Netflix...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Netflix",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Netflix...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Netflix",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="netflix"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="netflix"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="netflix"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="netflix"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Netflix"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de películas y series sin límites con nuestras cuentas premium de Netflix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(s_,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(n_,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};i_.propTypes={};const oee=()=>e.jsx(iee,{children:e.jsx(i_,{})}),o_=p.createContext({theme:"dark",toggleTheme:()=>{}}),lee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(o_.Provider,{value:{theme:t,toggleTheme:n},children:r})},l_=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));l_.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const c_=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});c_.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const d_=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(o_),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Disney")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,disney:U.length}))},A=>{P("Error al cargar productos de Disney+"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"disney_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"disney"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"disney"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Disney`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Disney+...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Disney+",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Disney+...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Disney+",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="disney"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="disney"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="disney"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="disney"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1618336753974-8d1b0f5c2e76?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Disney+"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de películas, series y contenido exclusivo con nuestras cuentas premium de Disney+"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(l_,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(c_,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};d_.propTypes={};const cee=()=>e.jsx(lee,{children:e.jsx(d_,{})}),u_=p.createContext({theme:"dark",toggleTheme:()=>{}}),dee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(u_.Provider,{value:{theme:t,toggleTheme:n},children:r})},h_=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));h_.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const m_=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});m_.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const p_=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(u_),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Max")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,max:U.length}))},A=>{P("Error al cargar productos de Max"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"max_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"max"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"max"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Max`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Max...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Max",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Max...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Max",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="max"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="max"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="max"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="max"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1611162617213-7d7a39e9b1d7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Max"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de series, películas y contenido exclusivo con nuestras cuentas premium de Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(h_,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(m_,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};p_.propTypes={};const uee=()=>e.jsx(dee,{children:e.jsx(p_,{})}),x_=p.createContext({theme:"dark",toggleTheme:()=>{}}),hee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(x_.Provider,{value:{theme:t,toggleTheme:n},children:r})},g_=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));g_.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const f_=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});f_.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const b_=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(x_),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(E)try{const y=se(M,"users",E.uid),R=await sr(y);if(R.exists()){const V=R.data(),ee=Fe(ue(M,`users/${E.uid}/orders`),Qr("createdAt","desc")),ge=(await Jt(ee)).docs.map(A=>({id:A.id,...A.data()}));u({id:E.uid,name:V.username||"Usuario",email:E.email,orders:ge,role:V.role||"user",phone:V.phone||"",username:V.username||"Usuario"}),x(Number(V.balance)||0),k(V.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Spotify")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,spotify:U.length}))},A=>{P("Error al cargar productos de Spotify"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"spotify_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q,g]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;await vr(M,async ee=>{const fe=se(M,"products",s.id),ge=await ee.get(fe);if(!ge.exists())throw new Error("Producto no encontrado");const A=se(M,"users",o.id),Y=await ee.get(A);if(!Y.exists())throw new Error("Usuario no encontrado");const U=se(M,"users",s.providerId),N=await ee.get(U);if(!N.exists())throw new Error("Proveedor no encontrado");const C=se(M,"providerBalances",s.providerId),K=await ee.get(C);let we=K.exists()&&parseFloat(K.data().balance)||0;K.exists()||ee.set(C,{balance:0,provider:s.providerId,updatedAt:mt()});let je=s.providerPhone||N.data().phoneNumber||"";const Ye=(Number(Y.data().balance)||0)-s.price;if(Ye<0)throw new Error("Saldo insuficiente");const Be={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:je,status:s.status==="En stock"?"active":"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"spotify"},Se={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:je,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:s.status==="En stock"?"completed":"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};if(s.status==="En stock"){const gt=ge.data();if(gt.availableAccounts<=0&&gt.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const Rt=ue(M,`products/${s.id}/accounts`),Nt=Fe(Rt,dt("status","==","available"),la(1)),Ht=await Jt(Nt);if(Ht.empty)throw new Error("No hay cuentas disponibles en la subcolección");const It=Ht.docs[0],le=It.ref;E=It.data(),ee.update(le,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),ee.update(fe,{availableAccounts:pr(-1),stock:pr(-1)}),Be.accountDetails={email:E.email||"No proporcionado",password:E.password||"No proporcionado",profile:E.profile||"No proporcionado",pin:E.pin||"No proporcionado"},Se.accountDetails=Be.accountDetails}const _t=se(ue(M,`users/${o.id}/orders`));ee.set(_t,{...Be,orderId:_t.id}),ee.update(A,{balance:Ye});const At=se(ue(M,`users/${s.providerId}/sales`));ee.set(At,{...Se,saleId:At.id});const Le=(Number(N.data().balance)||0)+s.price;ee.update(U,{balance:Le});const He=we+s.price;ee.set(C,{balance:He,provider:s.providerId,updatedAt:mt()},{merge:!0});const Pt=se(ue(M,"sales"));ee.set(Pt,{...Be,provider:s.provider,providerId:s.providerId,providerPhone:je,saleDate:new Date().toISOString(),status:s.status==="En stock"?"completed":"pending",saleId:Pt.id,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(ee=>ee-s.price);const y=Fe(ue(M,`users/${o.id}/orders`),Qr("createdAt","desc")),V=(await Jt(y)).docs.map(ee=>({id:ee.id,...ee.data()}));u(ee=>({...ee,orders:V})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Spotify`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Spotify...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Spotify",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Spotify...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Spotify",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="spotify"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="spotify"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="spotify"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="spotify"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616531770192-6b04a0c365ea?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Spotify"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Escucha tu música favorita sin anuncios con nuestras cuentas premium de Spotify"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(g_,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(f_,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};b_.propTypes={};const mee=()=>e.jsx(hee,{children:e.jsx(b_,{})}),y_=p.createContext({theme:"dark",toggleTheme:()=>{}}),pee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(y_.Provider,{value:{theme:t,toggleTheme:n},children:r})},v_=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));v_.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const w_=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});w_.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const k_=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(y_),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Prime Video")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,primevideo:U.length}))},A=>{P("Error al cargar productos de Prime Video"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"primevideo_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"primevideo"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"primevideo"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Prime Video`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Prime Video...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Prime Video",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Prime Video...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Prime Video",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="primevideo"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="primevideo"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="primevideo"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="primevideo"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68c44?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Prime Video"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de películas, series y contenido exclusivo con nuestras cuentas premium de Prime Video"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(v_,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(w_,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};k_.propTypes={};const xee=()=>e.jsx(pee,{children:e.jsx(k_,{})}),N_=p.createContext({theme:"dark",toggleTheme:()=>{}}),gee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(N_.Provider,{value:{theme:t,toggleTheme:n},children:r})},j_=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));j_.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const C_=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});C_.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const T_=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(N_),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Vix")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,vix:U.length}))},A=>{P("Error al cargar productos de Vix"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"vix_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"vix"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"vix"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Vix`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Vix...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Vix",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Vix...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Vix",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="vix"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="vix"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="vix"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="vix"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68c44?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Vix"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de series, películas y contenido exclusivo en español con nuestras cuentas premium de Vix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(j_,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(C_,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};T_.propTypes={};const fee=()=>e.jsx(gee,{children:e.jsx(T_,{})}),S_=p.createContext({theme:"dark",toggleTheme:()=>{}}),bee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(S_.Provider,{value:{theme:t,toggleTheme:n},children:r})},E_=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));E_.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const __=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});__.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const P_=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(S_),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Canva")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,canva:U.length}))},A=>{P("Error al cargar productos de Canva"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"canva_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"canva"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"canva"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Canva`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Canva...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Canva",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Canva...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Canva",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="canva"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="canva"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="canva"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="canva"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Canva"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Crea diseños profesionales con nuestras cuentas premium de Canva, perfectas para tus proyectos creativos"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(E_,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(__,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};P_.propTypes={};const yee=()=>e.jsx(bee,{children:e.jsx(P_,{})}),I_=p.createContext({theme:"dark",toggleTheme:()=>{}}),vee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(I_.Provider,{value:{theme:t,toggleTheme:n},children:r})},$_=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));$_.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const D_=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});D_.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const A_=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(I_),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","ChatGPT")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,chatgpt:U.length}))},A=>{P("Error al cargar productos de ChatGPT"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"chatgpt_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"chatgpt"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"chatgpt"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=ChatGPT`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en ChatGPT...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en ChatGPT",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en ChatGPT...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en ChatGPT",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="chatgpt"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="chatgpt"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="chatgpt"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="chatgpt"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1620712943543-bcc4686e8b98?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de ChatGPT"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Accede a funciones avanzadas de IA con nuestras cuentas premium de ChatGPT"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx($_,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(D_,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};A_.propTypes={};const wee=()=>e.jsx(vee,{children:e.jsx(A_,{})}),R_=p.createContext({theme:"dark",toggleTheme:()=>{}}),kee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(R_.Provider,{value:{theme:t,toggleTheme:n},children:r})},M_=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));M_.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const F_=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});F_.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const O_=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(R_),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Crunchyroll")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,crunchyroll:U.length}))},A=>{P("Error al cargar productos de Crunchyroll"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"crunchyroll_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"crunchyroll"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"crunchyroll"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Crunchyroll`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Crunchyroll...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Crunchyroll",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Crunchyroll...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Crunchyroll",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="crunchyroll"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="crunchyroll"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="crunchyroll"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="crunchyroll"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1618336753974-2ae8769a6850?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Crunchyroll"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta del mejor anime con nuestras cuentas premium de Crunchyroll, sin anuncios y en alta calidad"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(M_,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(F_,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};O_.propTypes={};const Nee=()=>e.jsx(kee,{children:e.jsx(O_,{})}),L_=p.createContext({theme:"dark",toggleTheme:()=>{}}),jee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(L_.Provider,{value:{theme:t,toggleTheme:n},children:r})},B_=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));B_.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const z_=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});z_.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const V_=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(L_),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Redes Sociales")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,redessociales:U.length}))},A=>{P("Error al cargar productos de Redes Sociales"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"redessociales_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"redessociales"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"redessociales"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Redes Sociales`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Redes Sociales...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Redes Sociales",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Redes Sociales...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Redes Sociales",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="redessociales"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="redessociales"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="redessociales"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="redessociales"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-479e93c4e359?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Redes Sociales"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Potencia tu presencia en línea con cuentas premium de redes sociales"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(B_,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(z_,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};V_.propTypes={};const Cee=()=>e.jsx(jee,{children:e.jsx(V_,{})}),U_=p.createContext({theme:"dark",toggleTheme:()=>{}}),Tee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(U_.Provider,{value:{theme:t,toggleTheme:n},children:r})},H_=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));H_.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const q_=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});q_.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const W_=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(U_),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","AppleMusic")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,applemusic:U.length}))},A=>{P("Error al cargar productos de Apple Music"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"applemusic_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"applemusic"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"applemusic"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Apple Music`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple Music...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Apple Music",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple Music...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Apple Music",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="applemusic"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="applemusic"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="applemusic"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="applemusic"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Apple Music Premium"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de millones de canciones con Apple Music"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{size:14}),"Detalles"]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(H_,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(q_,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};W_.propTypes={};const See=()=>e.jsx(Tee,{children:e.jsx(W_,{})}),G_=p.createContext({theme:"dark",toggleTheme:()=>{}}),Eee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(G_.Provider,{value:{theme:t,toggleTheme:n},children:r})},K_=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));K_.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const Y_=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});Y_.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const Q_=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(G_),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Apple Tv")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,appletv:U.length}))},A=>{P("Error al cargar productos de Apple TV"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"appletv_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"appletv"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"appletv"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Apple Tv`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple TV...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Apple TV",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple TV...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Apple TV",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="appletv"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="appletv"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="appletv"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="appletv"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Apple TV"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de series y películas exclusivas con nuestras cuentas premium de Apple TV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(K_,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(Y_,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};Q_.propTypes={};const _ee=()=>e.jsx(Eee,{children:e.jsx(Q_,{})}),X_=p.createContext({theme:"dark",toggleTheme:()=>{}}),Pee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(X_.Provider,{value:{theme:t,toggleTheme:n},children:r})},J_=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));J_.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const Z_=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});Z_.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const eP=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(X_),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Iptv")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,iptv:U.length}))},A=>{P("Error al cargar productos de IPTV"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"iptv_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"iptv"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"iptv"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Iptv`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en IPTV...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en IPTV",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en IPTV...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en IPTV",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="iptv"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="iptv"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="iptv"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="iptv"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de IPTV"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Accede a una amplia variedad de canales en vivo y contenido bajo demanda con nuestras cuentas premium de IPTV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(J_,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(Z_,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};eP.propTypes={};const Iee=()=>e.jsx(Pee,{children:e.jsx(eP,{})}),tP=p.createContext({theme:"dark",toggleTheme:()=>{}}),$ee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(tP.Provider,{value:{theme:t,toggleTheme:n},children:r})},rP=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));rP.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const aP=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});aP.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const sP=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(tP),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Flujo Tv")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,flujotv:U.length}))},A=>{P("Error al cargar productos de Flujo Tv"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"flujotv_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"flujotv"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"flujotv"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Flujo Tv`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Flujo Tv...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Flujo Tv",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Flujo Tv...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Flujo Tv",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="flujotv"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="flujotv"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="flujotv"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="flujotv"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68c34?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Flujo Tv"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de streaming fluido con nuestras cuentas premium de Flujo Tv, perfectas para entretenimiento sin interrupciones"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(rP,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(aP,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};sP.propTypes={};const Dee=()=>e.jsx($ee,{children:e.jsx(sP,{})}),nP=p.createContext({theme:"dark",toggleTheme:()=>{}}),Aee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(nP.Provider,{value:{theme:t,toggleTheme:n},children:r})},iP=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));iP.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const oP=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});oP.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const lP=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(nP),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Viki Rakuten")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,vikirakuten:U.length}))},A=>{P("Error al cargar productos de Viki Rakuten"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"vikirakuten_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"vikirakuten"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"vikirakuten"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Viki Rakuten`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Viki Rakuten...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Viki Rakuten",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Viki Rakuten...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Viki Rakuten",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="vikirakuten"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="vikirakuten"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="vikirakuten"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="vikirakuten"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68c34?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Viki Rakuten"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de dramas asiáticos y entretenimiento global con nuestras cuentas premium de Viki Rakuten"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(iP,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(oP,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};lP.propTypes={};const Ree=()=>e.jsx(Aee,{children:e.jsx(lP,{})}),cP=p.createContext({theme:"dark",toggleTheme:()=>{}}),Mee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(cP.Provider,{value:{theme:t,toggleTheme:n},children:r})},dP=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));dP.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const uP=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});uP.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const hP=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(cP),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Pornhub")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,pornhub:U.length}))},A=>{P("Error al cargar productos de Pornhub"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"pornhub_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"pornhub"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"pornhub"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Pornhub`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Pornhub...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Pornhub",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Pornhub...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Pornhub",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="pornhub"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="pornhub"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="pornhub"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="pornhub"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68c34?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Pornhub"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de contenido premium para adultos con nuestras cuentas de Pornhub"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 py-2 rounded-xl text-sm font-semibold ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(dP,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(uP,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};hP.propTypes={};const Fee=()=>e.jsx(Mee,{children:e.jsx(hP,{})}),mP=p.createContext({theme:"dark",toggleTheme:()=>{}}),Oee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(mP.Provider,{value:{theme:t,toggleTheme:n},children:r})},pP=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));pP.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const xP=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});xP.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const gP=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(mP),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Paramount")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,paramount:U.length}))},A=>{P("Error al cargar productos de Paramount"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"paramount_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"paramount"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"paramount"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Paramount`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Paramount...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Paramount",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Paramount...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Paramount",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="paramount"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="paramount"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="paramount"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="paramount"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-0b1e6388a7b0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Paramount"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de películas y series exclusivas con nuestras cuentas de Paramount+"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 py-2 rounded-xl text-sm font-semibold ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/90 border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/90 border-blue-300/30"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(pP,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(xP,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};gP.propTypes={};const Lee=()=>e.jsx(Oee,{children:e.jsx(gP,{})}),fP=p.createContext({theme:"dark",toggleTheme:()=>{}}),Bee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(fP.Provider,{value:{theme:t,toggleTheme:n},children:r})},bP=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));bP.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const yP=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});yP.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const vP=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(fP),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Licencias")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,licencias:U.length}))},A=>{P("Error al cargar licencias"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"licencias_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay licencias disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay licencias disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{licenseKey:N.licenseKey||"No proporcionado",activationDetails:N.activationDetails||"No proporcionado"},terms:s.terms,type:"licencias"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{licenseKey:N.licenseKey||"No proporcionado",activationDetails:N.activationDetails||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{licenseKey:N.licenseKey||"No proporcionado",activationDetails:N.activationDetails||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"licencias"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{licenseKey:E?.licenseKey||"No proporcionado",activationDetails:E?.activationDetails||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de la licencia.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Licencias`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar licencias...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar licencias",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar licencias...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar licencias",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="licencias"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="licencias"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="licencias"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="licencias"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-479e93c1e67e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Licencias de Software Premium"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Obtén acceso a licencias premium de software con soporte y actualizaciones garantizadas"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Licencias Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron licencias que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(bP,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(yP,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};vP.propTypes={};const zee=()=>e.jsx(Bee,{children:e.jsx(vP,{})}),wP=p.createContext({theme:"dark",toggleTheme:()=>{}}),Vee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(wP.Provider,{value:{theme:t,toggleTheme:n},children:r})},kP=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));kP.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const NP=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});NP.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const jP=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(wP),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Capcut")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,capcut:U.length}))},A=>{P("Error al cargar productos de Capcut"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"capcut_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"capcut"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"capcut"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Capcut`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Capcut...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Capcut",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Capcut...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Capcut",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="capcut"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="capcut"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="capcut"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="capcut"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68c77?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Capcut"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Edita videos como profesional con nuestras cuentas premium de Capcut"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 py-2 rounded-xl text-sm font-semibold ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/90 border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/90 border-blue-300/30"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(kP,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(NP,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};jP.propTypes={};const Uee=()=>e.jsx(Vee,{children:e.jsx(jP,{})}),CP=Sn.createContext({theme:"dark",toggleTheme:()=>{}}),Hee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(CP.Provider,{value:{theme:t,toggleTheme:n},children:r})},TP=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));TP.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const SP=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});SP.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const EP=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(CP),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Duolingo")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,duolingo:U.length}))},A=>{P("Error al cargar productos de Duolingo"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"duolingo_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{licenseKey:N.licenseKey||"No proporcionado",activationDetails:N.activationDetails||"No proporcionado"},terms:s.terms,type:"duolingo"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{licenseKey:N.licenseKey||"No proporcionado",activationDetails:N.activationDetails||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{licenseKey:N.licenseKey||"No proporcionado",activationDetails:N.activationDetails||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"duolingo"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{licenseKey:E?.licenseKey||"No proporcionado",activationDetails:E?.activationDetails||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de la cuenta.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Duolingo`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Duolingo...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Duolingo",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Duolingo...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Duolingo",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="duolingo"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="duolingo"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="duolingo"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="duolingo"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-479e93c1e67e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Duolingo Premium"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Aprende idiomas con Duolingo Premium, con acceso ilimitado y sin anuncios"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Cuentas de Duolingo"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron cuentas de Duolingo que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(TP,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(SP,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};EP.propTypes={};const qee=()=>e.jsx(Hee,{children:e.jsx(EP,{})}),_P=p.createContext({theme:"dark",toggleTheme:()=>{}}),Wee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(_P.Provider,{value:{theme:t,toggleTheme:n},children:r})},PP=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));PP.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const IP=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});IP.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const $P=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(_P),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Dgo")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,dgo:U.length}))},A=>{P("Error al cargar productos de Dgo"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"dgo_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"dgo"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:fclose(s.price),renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"dgo"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Dgo`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Dgo...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Dgo",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Dgo...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Dgo",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="dgo"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="dgo"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="dgo"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="dgo"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1504280390367-5d8f8c7b7c74?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Dgo"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de deportes, películas y más con cuentas premium de Dgo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(PP,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(IP,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};$P.propTypes={};const Gee=()=>e.jsx(Wee,{children:e.jsx($P,{})}),DP=p.createContext({theme:"dark",toggleTheme:()=>{}}),Kee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(DP.Provider,{value:{theme:t,toggleTheme:n},children:r})},AP=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));AP.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const RP=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});RP.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const MP=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(DP),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Liga Max")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,ligamax:U.length}))},A=>{P("Error al cargar productos de Liga Max"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"ligamax_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"ligamax"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"ligamax"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Liga Max`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Liga Max...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Liga Max",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Liga Max...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Liga Max",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="ligamax"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="ligamax"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="ligamax"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="ligamax"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1557672172-298e090bd0f1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Liga Max"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Vive la emoción del fútbol con cuentas premium de Liga Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(AP,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(RP,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};MP.propTypes={};const Yee=()=>e.jsx(Kee,{children:e.jsx(MP,{})}),FP=p.createContext({theme:"dark",toggleTheme:()=>{}}),Qee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(FP.Provider,{value:{theme:t,toggleTheme:n},children:r})},OP=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));OP.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const LP=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});LP.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const BP=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(FP),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Movistar Play")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,movistarplay:U.length}))},A=>{P("Error al cargar productos de Movistar Play"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"movistarplay_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"movistarplay"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"movistarplay"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Movistar Play`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Movistar Play...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Movistar Play",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Movistar Play...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Movistar Play",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="movistarplay"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="movistarplay"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="movistarplay"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="movistarplay"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Movistar Play"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de películas, series y más con cuentas premium de Movistar Play"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{size:14}),"Detalles"]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(OP,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(LP,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};BP.propTypes={};const Xee=()=>e.jsx(Qee,{children:e.jsx(BP,{})}),zP=p.createContext({theme:"dark",toggleTheme:()=>{}}),Jee=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(zP.Provider,{value:{theme:t,toggleTheme:n},children:r})},VP=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));VP.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const UP=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});UP.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const HP=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(zP),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Youtube")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,youtube:U.length}))},A=>{P("Error al cargar productos de YouTube"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"youtube_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"youtube"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"youtube"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Youtube`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en YouTube...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en YouTube",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en YouTube...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en YouTube",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="youtube"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="youtube"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="youtube"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="youtube"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1611162617210-7d673bf0f crawl&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de YouTube"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de videos sin anuncios y contenido exclusivo con YouTube Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{size:14}),"Detalles"]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(VP,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(UP,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};HP.propTypes={};const Zee=()=>e.jsx(Jee,{children:e.jsx(HP,{})}),qP=p.createContext({theme:"dark",toggleTheme:()=>{}}),ete=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(qP.Provider,{value:{theme:t,toggleTheme:n},children:r})},WP=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));WP.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const GP=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});GP.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const KP=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(qP),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Deezer")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,deezer:U.length}))},A=>{P("Error al cargar productos de Deezer"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"deezer_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"deezer"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"deezer"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Deezer`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Deezer...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Deezer",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Deezer...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Deezer",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="deezer"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="deezer"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="deezer"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="deezer"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a65d?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Deezer"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de música sin anuncios y escucha offline con Deezer Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{size:14}),"Detalles"]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(WP,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(GP,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};KP.propTypes={};const tte=()=>e.jsx(ete,{children:e.jsx(KP,{})}),YP=p.createContext({theme:"dark",toggleTheme:()=>{}}),rte=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(YP.Provider,{value:{theme:t,toggleTheme:n},children:r})},QP=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));QP.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const XP=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});XP.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const JP=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(YP),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Tidal")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,tidal:U.length}))},A=>{P("Error al cargar productos de Tidal"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"tidal_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"tidal"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"tidal"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Tidal`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Tidal...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Tidal",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Tidal...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Tidal",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="tidal"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="tidal"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="tidal"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="tidal"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1508700115892-2e51b27c8b25?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Tidal"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de audio de alta fidelidad y contenido exclusivo con Tidal Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{size:14}),"Detalles"]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(QP,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(XP,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};JP.propTypes={};const ate=()=>e.jsx(rte,{children:e.jsx(JP,{})}),ZP=p.createContext({theme:"dark",toggleTheme:()=>{}}),ste=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(ZP.Provider,{value:{theme:t,toggleTheme:n},children:r})},eI=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));eI.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const tI=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});tI.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const rI=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(ZP),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","Vpn")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,vpn:U.length}))},A=>{P("Error al cargar productos de VPN"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"vpn_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"vpn"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"vpn"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Vpn`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en VPN...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en VPN",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en VPN...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en VPN",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="vpn"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="vpn"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="vpn"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="vpn"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1628155930542-3c7a64e2c833?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Servicios VPN Premium"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Navega de forma segura y privada con nuestras cuentas VPN premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{size:14}),"Detalles"]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(eI,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(tI,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};rI.propTypes={};const nte=()=>e.jsx(ste,{children:e.jsx(rI,{})}),aI=p.createContext({theme:"dark",toggleTheme:()=>{}}),ite=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(aI.Provider,{value:{theme:t,toggleTheme:n},children:r})},sI=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));sI.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const nI=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});nI.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const iI=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(aI),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","WinTv")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.email||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,wintv:U.length}))},A=>{P("Error al cargar productos de Win TV"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"wintv_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},terms:s.terms,type:"wintv"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:N.email||"No proporcionado",password:N.password||"No proporcionado",profile:N.profile||"No proporcionado",pin:N.pin||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"wintv"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{email:E?.email||"No proporcionado",password:E?.password||"No proporcionado",profile:E?.profile||"No proporcionado",pin:E?.pin||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Win Tv`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Win TV...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Win TV",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Win TV...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Win TV",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="wintv"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="wintv"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="wintv"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="wintv"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522202176988-66273c2b6b40?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Win TV Premium"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Disfruta de la mejor experiencia de streaming con Win TV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Planes Disponibles"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{size:14}),"Detalles"]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(sI,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(nI,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};iI.propTypes={};const ote=()=>e.jsx(ite,{children:e.jsx(iI,{})}),oI=Sn.createContext({theme:"dark",toggleTheme:()=>{}}),lte=({children:r})=>{const[t,a]=p.useState(()=>localStorage.getItem("theme")||"dark"),n=p.useCallback(()=>{const i=t==="dark"?"light":"dark";a(i),localStorage.setItem("theme",i)},[t]);return p.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(oI.Provider,{value:{theme:t,toggleTheme:n},children:r})},lI=p.memo(({isOpen:r,message:t,onClose:a,theme:n})=>e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,role:"dialog","aria-labelledby":"modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificación"}),e.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:t})]})})}));lI.propTypes={isOpen:Q.bool.isRequired,message:Q.string.isRequired,onClose:Q.func.isRequired,theme:Q.string.isRequired};const cI=p.memo(({show:r,onClose:t,notifications:a,theme:n})=>{const i=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},o=u=>u.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx(ve,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"notifications-title",children:e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${i?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:u=>u.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),a.length>0?a.map(u=>e.jsxs(j.div,{variants:c,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${i?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[e.jsx("p",{className:`${i?"text-gray-300":"text-gray-700"}`,children:u.message}),e.jsx("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:o(u.updatedAt?.toDate?.()||new Date)})]},u.id)):e.jsx("p",{className:`py-2 ${i?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});cI.propTypes={show:Q.bool.isRequired,onClose:Q.func.isRequired,notifications:Q.arrayOf(Q.shape({id:Q.string.isRequired,message:Q.string.isRequired,updatedAt:Q.object})).isRequired,theme:Q.string.isRequired};const dI=()=>{const[r,t]=p.useState(!1),[a,n]=p.useState([]),[i,c]=p.useState([]),[o,u]=p.useState(null),[m,x]=p.useState(0),[g,k]=p.useState(null),[S,_]=p.useState(!0),[I,P]=p.useState(null),[b,B]=p.useState(null),[L,O]=p.useState(null),[te,ne]=p.useState(!1),[be,H]=p.useState(!1),[z,F]=p.useState(null),[v,ie]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[X,ae]=p.useState(""),[We,ct]=p.useState({}),[ft,ot]=p.useState(!1),[Ee,Ie]=p.useState(!1),[_e,re]=p.useState(!1),[J,de]=p.useState(!1),[ce,he]=p.useState([]),q=$r(),{theme:l,toggleTheme:Xe}=p.useContext(oI),qe=p.useRef(null),Ae=p.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);p.useEffect(()=>{const s=()=>{ot(window.scrollY>300)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const Oe=p.useCallback(s=>{const E=Number(s);return isNaN(E)?"0.00":E.toFixed(2)},[]),kt=p.useCallback(s=>{const E=Math.floor(s),y=s%1>=.5,R=5-E-(y?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(E)].map((V,ee)=>e.jsx(zt,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${ee}`)),y&&e.jsx(zt,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:l==="dark"?"#4B0000":"#D1D5DB"})]})})}),[...Array(R)].map((V,ee)=>e.jsx(zt,{className:l==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${ee}`))]})},[l]);p.useEffect(()=>{const s=Fr(Xt,async E=>{if(u(E),E)try{const y=await sr(se(M,"users",E.uid));if(y.exists()){const R=y.data();u({id:E.uid,name:R.username||"Usuario",email:E.email,orders:R.orders||[],role:R.role||"user",phone:R.phone||"",username:R.username||"Usuario"}),x(Number(R.balance)||0),k(R.role||"user"),Lt(E.uid)}else P("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(y){P("Error al cargar datos del usuario"),console.error(y)}else u(null),x(0),k(null),he([]);_(!1)});return()=>s()},[]);const Lt=async s=>{try{const E=Fe(ue(M,"users",s,"notifications"),Qr("updatedAt","desc")),R=(await Jt(E)).docs.map(V=>({id:V.id,message:V.data().message||"Sin mensaje",updatedAt:V.data().updatedAt}));he(R)}catch(E){console.error("Error fetching notifications:",E)}};p.useEffect(()=>{const s=Fe(ue(M,"products"),dt("category","==","BuscaPersonas")),E=it(s,async A=>{const Y=A.docs.map(N=>{const C=N.data();return{id:N.id,...C,price:Number(C.price)||0,stock:Number(C.stock||C.available||0),accountDetails:C.searchDetails||C.details||"Detalles no disponibles",terms:C.terms||"Términos del proveedor",provider:C.provider||"Proveedor no especificado",providerId:C.providerId||"",providerPhone:C.providerPhone||"",acceptsOrders:C.status==="A pedido",duration:C.duration||"1 mes",accountType:C.accountType||"No especificado",status:C.status||"En stock",image:C.image||"https://via.placeholder.com/300",renewal:C.renewal||!1,renewalPrice:Number(C.renewalPrice)||Number(C.price)*.9}}),U=await Promise.all(Y.map(async N=>{let C={provider:N.provider,providerPhone:N.providerPhone};if(!N.provider||N.provider==="Proveedor no especificado")try{if(N.providerId){const K=await sr(se(M,"users",N.providerId));K.exists()&&(C={provider:K.data().username||K.data().email||N.provider,providerPhone:K.data().phoneNumber||N.providerPhone})}}catch(K){console.error("Error al cargar datos del proveedor:",K)}return{...N,...C}}));n(U),ie(N=>({...N,buscapersonas:U.length}))},A=>{P("Error al cargar productos de Busca Personas"),console.error(A)}),y=Fe(ue(M,"ratings")),R=it(y,A=>{const Y={};A.docs.forEach(N=>{const C=N.data(),K=C.providerId;Y[K]||(Y[K]=[]),Y[K].push(Number(C.rating)||0)});const U={};Object.keys(Y).forEach(N=>{const C=Y[N],K=C.length?C.reduce((we,je)=>we+je,0)/C.length:1;U[N]=Math.min(Math.max(K,1),5)}),ct(U)},A=>{console.error("Error al cargar calificaciones de proveedores:",A)}),V=Fe(ue(M,"buscapersonas_accounts"),dt("status","==","available")),ee=it(V,A=>{const Y=A.docs.map(U=>({id:U.id,...U.data(),productId:U.data().productId||"",providerId:U.data().providerId||""}));c(Y)},A=>{console.error("Error al cargar cuentas:",A)}),ge=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","WinTv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(A=>{const Y=A.toLowerCase().replace(/\s+/g,""),U=Fe(ue(M,"products"),dt("category","==",A));return it(U,N=>{ie(C=>({...C,[Y]:N.docs.length}))},N=>{console.error(`Error al cargar productos de ${A}:`,N)})});return()=>{E(),R(),ee(),ge.forEach(A=>A())}},[]);const jt=p.useCallback(s=>{if(!o){F({message:"Por favor, inicia sesión para realizar una compra en BlackStreaming.",onClose:()=>q("/login")});return}if(g==="provider"){F({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(m<s.price){F({message:"Saldo insuficiente para realizar esta compra."});return}if(!s.providerId||s.providerId===""){F({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}B({product:s,customerName:o.name,phoneNumber:""})},[o,m,q]),Wt=p.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){P("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(b.phoneNumber)){P("El número de WhatsApp debe tener 9 dígitos");return}try{_(!0);const s=b.product;if(!s.providerId||s.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let E=null;s.status==="En stock"?E=await vr(M,async y=>{const R=se(M,"products",s.id),V=await y.get(R);if(!V.exists())throw new Error("Producto no encontrado");const ee=V.data();if(ee.availableAccounts<=0&&ee.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const fe=ue(M,`products/${s.id}/accounts`),ge=Fe(fe,dt("status","==","available"),la(1)),A=await Jt(ge);if(A.empty)throw new Error("No hay cuentas disponibles en la subcolección");const Y=A.docs[0],U=Y.ref,N=Y.data(),C=se(M,"users",o.id),K=await y.get(C);if(!K.exists())throw new Error("Usuario no encontrado");const we=se(M,"users",s.providerId),je=await y.get(we);if(!je.exists())throw new Error("Proveedor no encontrado");const Me=se(M,"providerBalances",s.providerId),Ye=await y.get(Me);let Be=0;Ye.exists()?Be=parseFloat(Ye.data().balance)||0:y.set(Me,{balance:0,provider:s.providerId,updatedAt:mt()});let Se=s.providerPhone||"";Se||(Se=je.data().phoneNumber||""),y.update(U,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),y.update(R,{availableAccounts:pr(-1),stock:pr(-1)});const At=(Number(K.data().balance)||0)-s.price;if(At<0)throw new Error("Saldo insuficiente");const Le=K.data().orders||[],He={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,status:"active",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{searchAccess:N.searchAccess||"No proporcionado",activationDetails:N.activationDetails||"No proporcionado"},terms:s.terms,type:"buscapersonas"};y.update(C,{balance:At,orders:[...Le,He]});const gt=(Number(je.data().balance)||0)+s.price,Rt=je.data().sales||[],Nt={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:Se,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{searchAccess:N.searchAccess||"No proporcionado",activationDetails:N.activationDetails||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(we,{balance:gt,sales:[...Rt,Nt]});const Ht=Be+s.price;y.set(Me,{balance:Ht,provider:s.providerId,updatedAt:mt()},{merge:!0});const It=se(ue(M,"sales"));return y.set(It,{...He,provider:s.provider,providerId:s.providerId,providerPhone:Se,saleDate:new Date().toISOString(),status:"completed",accountDetails:{searchAccess:N.searchAccess||"No proporcionado",activationDetails:N.activationDetails||"No proporcionado"},saleId:Nt.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image}),N}):await vr(M,async y=>{const R=se(M,"users",o.id),V=await y.get(R);if(!V.exists())throw new Error("Usuario no encontrado");const ee=se(M,"users",s.providerId),fe=await y.get(ee);if(!fe.exists())throw new Error("Proveedor no encontrado");const ge=se(M,"providerBalances",s.providerId),A=await y.get(ge);let Y=0;A.exists()?Y=parseFloat(A.data().balance)||0:y.set(ge,{balance:0,provider:s.providerId,updatedAt:mt()});let U=s.providerPhone||"";U||(U=fe.data().phoneNumber||"");const C=(Number(V.data().balance)||0)-s.price;if(C<0)throw new Error("Saldo insuficiente");const K=V.data().orders||[],we={productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,status:"pending",customerName:b.customerName,customerId:o.id,phoneNumber:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:s.terms,type:"buscapersonas"};y.update(R,{balance:C,orders:[...K,we]});const Me=(Number(fe.data().balance)||0)+s.price,Ye=fe.data().sales||[],Be={saleId:se(ue(M,"sales")).id,productId:s.id,productName:s.name,price:s.price,renewalPrice:s.renewalPrice,provider:s.provider,providerId:s.providerId,providerPhone:U,customerId:o.id,customerName:b.customerName,customerPhone:b.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,status:"pending",terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image};y.update(ee,{balance:Me,sales:[...Ye,Be]});const Se=Y+s.price;y.set(ge,{balance:Se,provider:s.providerId,updatedAt:mt()},{merge:!0});const _t=se(ue(M,"sales"));y.set(_t,{...we,provider:s.provider,providerId:s.providerId,providerPhone:U,saleDate:new Date().toISOString(),status:"pending",saleId:Be.saleId,terms:s.terms,generalDetails:s.accountDetails,productUrl:s.image})}),x(y=>y-s.price),u(y=>({...y,orders:[...y.orders,{...b,status:s.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:s.status==="En stock"?{searchAccess:E?.searchAccess||"No proporcionado",activationDetails:E?.activationDetails||"No proporcionado"}:null}]})),B(null),F({message:s.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(s){P(s.message||"Error al procesar la compra"),console.error("Error en la compra:",s)}finally{_(!1)}},[b,o]),Tt=p.useCallback(s=>{O({name:s.name,accountDetails:s.accountDetails,provider:s.provider,terms:s.terms,accountType:s.accountType})},[]),tt=p.useCallback(s=>{O({name:s.name,terms:s.terms,provider:s.provider,accountType:s.accountType}),ne(!0)},[]),yt=p.useCallback(()=>{if(!o){q("/login");return}switch(g){case"admin":q("/dashboard/admin");break;case"provider":q("/dashboard/provider");break;case"affiliate":q("/dashboard/affiliate");break;default:q("/dashboard/user")}},[o,g,q]),Ue=p.useCallback(s=>{s.preventDefault(),X.trim()&&q(`/search?q=${encodeURIComponent(X)}&category=Busca Personas`)},[X,q]),lt=p.useCallback(async()=>{try{await Zr(Xt),q("/")}catch(s){console.error("Error al cerrar sesión:",s),F({message:s.message||"Error al cerrar sesión"})}},[q]),Te=p.useCallback(s=>{if(!s||typeof s!="string")return"30 días";const E=s.match(/(\d+)\s*(mes|meses)/i);if(E)return`${parseInt(E[1],10)*30} días`;const y=s.match(/(\d+)\s*(día|días|dia|dias)/i);if(y)return`${parseInt(y[1],10)} días`;const R=s.match(/(\d+)/);return R?`${parseInt(R[1],10)} días`:"30 días"},[]),Ze=p.useCallback(s=>s.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(s.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",s.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),st=a.filter(s=>s.name.toLowerCase().includes(X.toLowerCase())),pt=p.useCallback(s=>s?s.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase():"U",[]),$e=[{id:"netflix",label:"Netflix",icon:Vt,count:v.netflix},{id:"spotify",label:"Spotify",icon:vt,count:v.spotify},{id:"disney",label:"Disney+",icon:Pe,count:v.disney},{id:"max",label:"Max",icon:Ut,count:v.max},{id:"primevideo",label:"Prime Video",icon:yr,count:v.primevideo},{id:"vix",label:"Vix",icon:Pe,count:v.vix},{id:"crunchyroll",label:"Crunchyroll",icon:xr,count:v.crunchyroll},{id:"canva",label:"Canva",icon:br,count:v.canva},{id:"chatgpt",label:"ChatGPT",icon:ya,count:v.chatgpt},{id:"redessociales",label:"Redes Sociales",icon:gr,count:v.redessociales},{id:"dgo",label:"Dgo",icon:Pe,count:v.dgo},{id:"ligamax",label:"Liga Max",icon:yr,count:v.ligamax},{id:"movistarplay",label:"Movistar Play",icon:Pe,count:v.movistarplay},{id:"youtube",label:"Youtube",icon:Ut,count:v.youtube},{id:"deezer",label:"Deezer",icon:vt,count:v.deezer},{id:"tidal",label:"Tidal",icon:vt,count:v.tidal},{id:"vpn",label:"Vpn",icon:gr,count:v.vpn},{id:"wintv",label:"Win Tv",icon:Pe,count:v.wintv},{id:"applemusic",label:"Apple Music",icon:vt,count:v.applemusic},{id:"appletv",label:"Apple Tv",icon:Pe,count:v.appletv},{id:"iptv",label:"Iptv",icon:Pe,count:v.iptv},{id:"flujotv",label:"Flujo Tv",icon:Pe,count:v.flujotv},{id:"vikirakuten",label:"Viki Rakuten",icon:Vt,count:v.vikirakuten},{id:"pornhub",label:"Pornhub",icon:Ut,count:v.pornhub},{id:"paramount",label:"Paramount",icon:Vt,count:v.paramount},{id:"licencias",label:"Licencias",icon:mr,count:v.licencias},{id:"capcut",label:"Capcut",icon:br,count:v.capcut},{id:"duolingo",label:"Duolingo",icon:xr,count:v.duolingo},{id:"buscapersonas",label:"Busca Personas",icon:Jr,count:v.buscapersonas}];return S?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"}`,children:[e.jsx(fr,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):I?e.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} p-4`,children:[e.jsx(Xr,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:I}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Recargar"})]}):e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${l==="dark"?"bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white":"bg-gradient-to-b from-gray-50 to-gray-50 text-gray-900"} relative overflow-x-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${l==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),e.jsx("div",{className:"particles",children:[...Array(15)].map((s,E)=>e.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),e.jsxs("header",{className:`${l==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300 md:ml-64`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j.img,{src:Mr,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${l==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),e.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Busca Personas...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Busca Personas",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]})}),e.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[e.jsx("button",{onClick:Xe,className:`p-2 rounded-full ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${l==="dark"?"claro":"oscuro"}`,children:l==="dark"?e.jsx(qr,{size:20}):e.jsx(Hr,{size:20})}),o&&e.jsxs("button",{onClick:()=>de(!0),className:`p-2 rounded-full relative ${l==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${ce.length} nuevas)`,children:[e.jsx(nr,{size:20}),ce.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ce.length})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>re(!_e),"aria-label":"Abrir menú móvil","aria-expanded":_e,children:e.jsx(da,{size:20,className:l==="dark"?"text-gray-300":"text-gray-600"})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o?e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx(j.div,{className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:e.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",m.toFixed(2)]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ie(!Ee),className:`flex items-center space-x-2 ${l==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Menú de usuario","aria-haspopup":"true","aria-expanded":Ee,children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):pt(o.name||o.email)}),e.jsx("span",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:o.name||"Usuario"}),e.jsx(ca,{className:`ml-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),e.jsx(ve,{children:Ee&&e.jsxs(j.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${l==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[e.jsxs("button",{onClick:()=>{yt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),Ie(!1)},className:`w-full text-left px-4 py-2 text-sm hover:${l==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})})]}),e.jsx(ve,{children:_e&&e.jsx(j.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${l==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Menú móvil",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Busca Personas...",value:X,onChange:s=>ae(s.target.value),className:`w-full py-2.5 px-5 ${l==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${l==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar en Busca Personas",onKeyDown:s=>s.key==="Enter"&&Ue(s)}),e.jsx("button",{onClick:Ue,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${l==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:e.jsx(or,{size:18})})]}),o&&e.jsxs("button",{onClick:()=>{de(!0),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[e.jsx(nr,{className:"mr-2"})," Notificaciones"]}),e.jsxs("div",{className:"flex flex-col space-y-2 max-h-[50vh] overflow-y-auto",children:[e.jsx("h3",{className:`text-sm font-semibold ${l==="dark"?"text-gray-200":"text-gray-800"}`,children:"Categorías"}),$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>re(!1),className:`flex items-center justify-between space-x-3 px-4 py-2 rounded-xl transition-all duration-300 ${s.id==="buscapersonas"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="buscapersonas"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",m.toFixed(2)]}),e.jsxs("button",{onClick:()=>{yt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ir al dashboard",children:[e.jsx(cr,{className:"mr-2"})," Dashboard"]}),e.jsxs("button",{onClick:()=>{lt(),re(!1)},className:`text-sm flex items-center ${l==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesión",children:[e.jsx(Ot,{className:"mr-2"})," Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${l==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Iniciar sesión",children:[e.jsx(dr,{className:"mr-2"})," Ingresar"]}),e.jsxs(Ve,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${l==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>re(!1),role:"menuitem","aria-label":"Registrarse",children:[e.jsx(ur,{className:"mr-2"})," Registrarse"]})]})]})})})]}),e.jsx("aside",{ref:qe,className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${l==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r md:shadow-md h-screen flex flex-col`,children:e.jsxs("div",{className:"p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{q("/"),t(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:e.jsx(De,{className:"text-lg"})})]}),o&&e.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${l==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l==="dark"?"text-white":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:["Saldo: S/. ",m.toFixed(2)]})]})]}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:$e.map(s=>e.jsxs(Ve,{to:`/${s.id}`,onClick:()=>t(!1),className:`w-full flex items-center justify-between space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${s.id==="buscapersonas"?"bg-blue-100 text-blue-600 border border-blue-300":l==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":s.id==="buscapersonas"?"page":void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:"text-lg"}),e.jsx("span",{children:s.label})]}),e.jsx("span",{className:"bg-blue-500/20 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s.count})]},s.id))}),o&&e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:()=>{lt(),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${l==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[e.jsx(Ot,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:`bg-${l==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${l==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-479e93c1e67e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-gray-900/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx(j.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Busca Personas"}),e.jsx(j.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`text-base sm:text-lg md:text-xl ${l==="dark"?"text-gray-200":"text-gray-600"} max-w-2xl mx-auto drop-shadow-md`,children:"Accede a servicios de búsqueda de personas con herramientas avanzadas y discretas"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:"Servicios de Busca Personas"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:`text-sm sm:text-base ${l==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-all underline underline-offset-4`,children:"Términos Generales"})]}),st.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:`text-lg sm:text-xl ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"No se encontraron servicios de Busca Personas que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full",children:st.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative group rounded-2xl overflow-hidden border-2 ${l==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx(j.img,{whileHover:{scale:1.1},src:s.image,alt:s.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Ze(s)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${l==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:s.accountType}),e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(ra,{className:"text-blue-500",size:13}),Te(s.duration)]})]}),e.jsx("h3",{className:`font-extrabold text-lg ${l==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(We[s.providerId]||1),e.jsx("span",{className:`ml-1 text-xs ${l==="dark"?"text-gray-400":"text-gray-600"}`,children:(We[s.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[e.jsx(va,{className:"text-blue-500",size:13}),s.provider]}),e.jsxs("span",{className:`flex items-center text-xs ${l==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[e.jsx(fa,{className:"text-blue-500",size:13}),s.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:s.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/. ",Oe(s.renewalPrice)]}):e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${l==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Oe(s.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(ba,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tt(s),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${l==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[e.jsx(mr,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>jt(s),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(s.stock)>0||s.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(s.stock)<=0&&s.status!=="A pedido",children:[e.jsx(Br,{size:16}),s.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},s.id))})]})]})}),e.jsx(ve,{children:b&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>B(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Estás a punto de comprar: ",e.jsx("strong",{children:b.product.name})]}),e.jsxs("p",{className:`mb-4 ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Oe(b.product.price)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),e.jsx("input",{id:"customerName",type:"text",value:b.customerName,onChange:s=>B({...b,customerName:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${l==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Número de WhatsApp"}),e.jsx("input",{id:"phoneNumber",type:"tel",value:b.phoneNumber,onChange:s=>B({...b,phoneNumber:s.target.value}),className:`w-full py-2 px-3 rounded-lg ${l==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dígitos",pattern:"\\d{9}","aria-required":"true"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),e.jsxs("span",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",e.jsx("button",{type:"button",onClick:()=>{ne(!0),O({name:b.product.name,terms:b.product.terms,provider:b.product.provider,accountType:b.product.accountType})},className:"underline text-blue-500 hover:text-blue-400",children:"términos y condiciones"})]})]})}),I&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:I}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(null),className:`flex-1 py-2 px-4 rounded-xl ${l==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Wt,disabled:S,className:`flex-1 py-2 px-4 rounded-xl ${S?"bg-gray-500/50 cursor-not-allowed text-gray-400":l==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:S?e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),e.jsx(ve,{children:L&&!te&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(null),role:"dialog","aria-labelledby":"detail-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:e.jsx(De,{size:20})}),e.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",L.accountType]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Detalles:"})," ",L.accountDetails]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),e.jsx(ve,{children:te&&L&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),O(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ne(!1),O(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos y Condiciones"}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"Producto:"})," ",L.name]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Proveedor:"})," ",L.provider]}),e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[e.jsx("strong",{children:"Términos:"})," ",L.terms]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),O(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos",children:"Cerrar"})]})})}),e.jsx(ve,{children:be&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>H(!1),role:"dialog","aria-labelledby":"general-terms-modal-title",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${l==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${l==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar términos generales",children:e.jsx(De,{size:20})}),e.jsx("h2",{id:"general-terms-modal-title",className:`text-xl font-bold mb-4 ${l==="dark"?"text-white":"text-gray-900"}`,children:"Términos Generales"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"}`,children:"Al adquirir cualquier producto en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-700"} mt-2 list-disc pl-5`,children:[e.jsx("li",{children:"Los productos son proporcionados por terceros y BlackStreaming actúa como intermediario."}),e.jsx("li",{children:"El tiempo de entrega puede variar según el proveedor y el tipo de producto."}),e.jsx("li",{children:"Las cuentas compartidas deben usarse según las instrucciones del proveedor."}),e.jsx("li",{children:"No se permiten reembolsos una vez entregada la cuenta, salvo en casos de incumplimiento del proveedor."}),e.jsx("li",{children:"BlackStreaming no se responsabiliza por cambios en las políticas de las plataformas de streaming."})]}),e.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!1),className:`mt-6 w-full py-2 px-4 rounded-xl ${l==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar términos generales",children:"Cerrar"})]})})}),e.jsx(lI,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),F(null)},theme:l}),e.jsx(cI,{show:J,onClose:()=>de(!1),notifications:ce,theme:l}),e.jsx(ve,{children:ft&&e.jsx(j.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Ae,className:`fixed bottom-6 right-6 p-3 rounded-full ${l==="dark"?"bg-blue-600/90":"bg-blue-500/90"} text-white shadow-lg hover:bg-blue-700/95 transition-all duration-300 z-40 backdrop-blur-md`,"aria-label":"Volver arriba",children:e.jsx(ta,{size:20})})}),e.jsx("footer",{className:`mt-12 py-8 ${l==="dark"?"bg-gray-900/50":"bg-gray-100"} backdrop-blur-md border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} md:ml-64`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"BlackStreaming"}),e.jsx("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:"Tu plataforma confiable para cuentas premium de streaming a precios accesibles."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l==="dark"?"text-white":"text-gray-900"} mb-4`,children:"Síguenos"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Twitter",children:e.jsx(Ur,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Instagram",children:e.jsx(Vr,{size:24})}),e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:`${l==="dark"?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-colors duration-200`,"aria-label":"Facebook",children:e.jsx(zr,{size:24})})]})]})]}),e.jsx("div",{className:`mt-8 pt-6 border-t ${l==="dark"?"border-gray-700/50":"border-gray-300"} text-center`,children:e.jsxs("p",{className:`text-sm ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Desarrollado por Saiph."]})})]})})]})};dI.propTypes={};const cte=()=>e.jsx(lte,{children:e.jsx(dI,{})});p.memo(()=>{const[r,t]=p.useState(null),[a,n]=p.useState(0),[i,c]=p.useState(!0),[o,u]=p.useState(null),[m,x]=p.useState(!1),[g,k]=p.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0}),[S,_]=p.useState(""),I=$r();p.useEffect(()=>{const B=Fr(Xt,async L=>{if(L)try{const O=await sr(se(M,"users",L.uid));if(O.exists()){const te=O.data();t({id:L.uid,name:te.username||"Usuario",email:L.email,orders:te.orders||[],role:te.role||"user"}),n(Number(te.balance)||0)}else u("Usuario no encontrado"),console.error("Usuario no encontrado en la base de datos")}catch(O){u("Error al cargar datos"),console.error(O)}else t(null),n(0);c(!1)});return()=>B()},[]),p.useEffect(()=>{const L=[{name:"Netflix",key:"netflix"},{name:"Spotify",key:"spotify"},{name:"Disney",key:"disney"},{name:"Max",key:"max"},{name:"Prime Video",key:"primevideo"},{name:"Vix",key:"vix"},{name:"Crunchyroll",key:"crunchyroll"},{name:"Canva",key:"canva"},{name:"ChatGPT",key:"chatgpt"},{name:"Redes Sociales",key:"redessociales"}].map(({name:O,key:te})=>{const ne=Fe(ue(M,"products"),dt("category","==",O));return it(ne,be=>{k(H=>({...H,[te]:be.docs.length}))},be=>console.error(`Error loading ${O}:`,be))});return()=>L.forEach(O=>O())},[]);const P=()=>{if(!r)return I("/login");I({user:"/dashboard/user",affiliate:"/dashboard/affiliate",provider:"/dashboard/provider",admin:"/dashboard/admin"}[r.role]||"/dashboard/user")},b=B=>{B.preventDefault(),S.trim()&&I(`/search?q=${encodeURIComponent(S)}`)};return i?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:[e.jsx(rb,{className:"animate-spin text-4xl text-cyan-500"}),e.jsx("span",{className:"ml-2 text-white",children:"Cargando..."})]}):o?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 p-4",children:[e.jsx(rb,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-400 mb-6",children:o}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Reintentar"})]}):e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-800/80 backdrop-blur-sm",children:e.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(Ve,{to:"/",className:"flex items-center gap-2",children:[e.jsx("img",{src:Mr,alt:"BlackStreaming",className:"h-8"}),e.jsx("span",{className:"text-lg font-bold text-cyan-500 hidden sm:block",children:"BlackStreaming"})]})}),e.jsx("form",{onSubmit:b,className:"flex-1 max-w-md mx-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full py-2 px-4 rounded-lg bg-gray-700 text-white border border-gray-600 focus:ring-2 focus:ring-cyan-500 focus:border-transparent",value:S,onChange:B=>_(B.target.value)}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-cyan-500",children:e.jsx(Jr,{size:20})})]})}),e.jsx("div",{className:"flex items-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:block text-sm text-gray-300",children:r.name}),e.jsxs("span",{className:"px-3 py-1 bg-gray-700 rounded-lg text-sm",children:["S/ ",a.toFixed(2)]}),e.jsx("button",{onClick:P,className:"p-2 hover:bg-gray-700 rounded-lg",title:"Dashboard",children:e.jsx(qn,{className:"text-cyan-500",size:20})}),e.jsxs("button",{onClick:()=>{Xt.signOut(),I("/")},className:"flex items-center gap-1 px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:[e.jsx(Au,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>I("/login"),className:"px-3 py-2 text-sm hover:text-cyan-500",children:"Ingresar"}),e.jsx("button",{onClick:()=>I("/register"),className:"px-3 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 text-sm",children:"Registrarse"})]})})]})}),e.jsx("main",{className:"flex-1 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-lg text-center",children:[e.jsx("div",{className:"p-4 bg-gray-800 rounded-full inline-flex mb-6",children:e.jsx(rb,{className:"text-4xl text-cyan-500"})}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"En Mantenimiento"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Estamos mejorando nuestra plataforma para ti."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-300 mb-6",children:[e.jsx(ra,{className:"text-yellow-500"}),e.jsx("span",{children:"Volveremos pronto."})]}),e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"¿Qué estamos haciendo?"}),e.jsxs("ul",{className:"text-left space-y-2 text-gray-300",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Corrección de errores en el sistema de pedidos"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Solución de fallos en el retiro de dinero"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Arreglo de errores al pasar del sistema al pedido"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Actualización del dashboard del proveedor"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Actualización del dashboard del usuario"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Refuerzo de la seguridad general del sitio"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Mejora en la visualización y diseño"]})]}),e.jsx("button",{onClick:()=>x(!0),className:"mt-4 text-cyan-500 hover:text-cyan-400 underline",children:"Términos Generales"})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-800 rounded-lg max-w-lg w-full max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Términos y Condiciones"}),e.jsx("button",{onClick:()=>x(!1),className:"hover:text-gray-300",children:e.jsx(FiX,{size:24})})]}),e.jsx("div",{className:"space-y-4 text-gray-300",children:[{title:"Proceso de Compra",text:"El proveedor te contactará en 24 horas hábiles para los accesos."},{title:"Garantía",text:"7 días de garantía. El proveedor resolverá problemas o reembolsará."},{title:"Uso Responsable",text:"No nos responsabilizamos por suspensiones por mal uso."},{title:"Soporte",text:"Contacta al proveedor vía WhatsApp."},{title:"Renovaciones",text:"Solicita renovaciones manuales antes del fin del período."}].map(({title:B,text:L},O)=>e.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:B}),e.jsx("p",{children:L})]},O))}),e.jsx("button",{onClick:()=>x(!1),className:"w-full mt-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-800 py-6",children:e.jsxs("div",{className:"container mx-auto px-4 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Mr,alt:"BlackStreaming",className:"h-6"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-500",children:"BlackStreaming"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Desarrollado por Saiph"})]})})]})});const dte=p.createContext(),ute=({children:r})=>{const t=jv(ih),[a,n]=p.useState(null),[i,c]=p.useState(!0);return p.useEffect(()=>{const o=Fr(t,u=>{n(u),c(!1)});return()=>o()},[]),e.jsx(dte.Provider,{value:{user:a,loading:i},children:!i&&r})},hte=()=>e.jsx(m$,{children:e.jsxs(e.Fragment,{children:[e.jsx(Rr,{path:"/",element:e.jsx(YT,{})}),e.jsx(Rr,{path:"/login",element:e.jsx(Fq,{})}),e.jsx(Rr,{path:"/register",element:e.jsx(Oq,{})}),e.jsx(Rr,{path:"/forgot-password",element:e.jsx(Lq,{})}),e.jsx(Rr,{path:"/dashboard/user",element:e.jsx(cS,{})}),e.jsx(Rr,{path:"/dashboard/affiliate",element:e.jsx(Zq,{})}),e.jsx(Rr,{path:"/dashboard/provider",element:e.jsx(HE,{})}),e.jsx(Rr,{path:"/dashboard/admin",element:e.jsx(r_,{})}),e.jsx(Rr,{path:"/netflix",element:e.jsx(oee,{})}),e.jsx(Rr,{path:"/disney",element:e.jsx(cee,{})}),e.jsx(Rr,{path:"/max",element:e.jsx(uee,{})}),e.jsx(Rr,{path:"/spotify",element:e.jsx(mee,{})}),e.jsx(Rr,{path:"/primevideo",element:e.jsx(xee,{})}),e.jsx(Rr,{path:"/vix",element:e.jsx(fee,{})}),e.jsx(Rr,{path:"/canva",element:e.jsx(yee,{})}),e.jsx(Rr,{path:"/chatgpt",element:e.jsx(wee,{})}),e.jsx(Rr,{path:"/crunchyroll",element:e.jsx(Nee,{})}),e.jsx(Rr,{path:"/redessociales",element:e.jsx(Cee,{})}),e.jsx(Rr,{path:"/applemusic",element:e.jsx(See,{})}),e.jsx(Rr,{path:"/appletv",element:e.jsx(_ee,{})}),e.jsx(Rr,{path:"/iptv",element:e.jsx(Iee,{})}),e.jsx(Rr,{path:"/flujotv",element:e.jsx(Dee,{})}),e.jsx(Rr,{path:"/vikirakuten",element:e.jsx(Ree,{})}),e.jsx(Rr,{path:"/pornhub",element:e.jsx(Fee,{})}),e.jsx(Rr,{path:"/paramount",element:e.jsx(Lee,{})}),e.jsx(Rr,{path:"/licencias",element:e.jsx(zee,{})}),e.jsx(Rr,{path:"/capcut",element:e.jsx(Uee,{})}),e.jsx(Rr,{path:"/duolingo",element:e.jsx(qee,{})}),e.jsx(Rr,{path:"/dgo",element:e.jsx(Gee,{})}),e.jsx(Rr,{path:"/ligamax",element:e.jsx(Yee,{})}),e.jsx(Rr,{path:"/movistarplay",element:e.jsx(Xee,{})}),e.jsx(Rr,{path:"/youtube",element:e.jsx(Zee,{})}),e.jsx(Rr,{path:"/deezer",element:e.jsx(tte,{})}),e.jsx(Rr,{path:"/tidal",element:e.jsx(ate,{})}),e.jsx(Rr,{path:"/vpn",element:e.jsx(nte,{})}),e.jsx(Rr,{path:"/wintv",element:e.jsx(ote,{})}),e.jsx(Rr,{path:"/buscapersonas",element:e.jsx(cte,{})})]})});N9.createRoot(document.getElementById("root")).render(e.jsx(Sn.StrictMode,{children:e.jsx(M$,{children:e.jsx(ute,{children:e.jsx(hte,{})})})}));
