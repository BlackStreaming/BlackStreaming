(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function B1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ly={exports:{}},m0={},My={exports:{}},Kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function uR(){if(DE)return Kt;DE=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function x(ae){return ae===null||typeof ae!="object"?null:(ae=m&&ae[m]||ae["@@iterator"],typeof ae=="function"?ae:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,w={};function E(ae,W,oe){this.props=ae,this.context=W,this.refs=w,this.updater=oe||v}E.prototype.isReactComponent={},E.prototype.setState=function(ae,W){if(typeof ae!="object"&&typeof ae!="function"&&ae!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ae,W,"setState")},E.prototype.forceUpdate=function(ae){this.updater.enqueueForceUpdate(this,ae,"forceUpdate")};function R(){}R.prototype=E.prototype;function C(ae,W,oe){this.props=ae,this.context=W,this.refs=w,this.updater=oe||v}var V=C.prototype=new R;V.constructor=C,_(V,E.prototype),V.isPureReactComponent=!0;var L=Array.isArray,K=Object.prototype.hasOwnProperty,H={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(ae,W,oe){var ie,ne={},z=null,_e=null;if(W!=null)for(ie in W.ref!==void 0&&(_e=W.ref),W.key!==void 0&&(z=""+W.key),W)K.call(W,ie)&&!S.hasOwnProperty(ie)&&(ne[ie]=W[ie]);var De=arguments.length-2;if(De===1)ne.children=oe;else if(1<De){for(var Se=Array(De),we=0;we<De;we++)Se[we]=arguments[we+2];ne.children=Se}if(ae&&ae.defaultProps)for(ie in De=ae.defaultProps,De)ne[ie]===void 0&&(ne[ie]=De[ie]);return{$$typeof:r,type:ae,key:z,ref:_e,props:ne,_owner:H.current}}function P(ae,W){return{$$typeof:r,type:ae.type,key:W,ref:ae.ref,props:ae.props,_owner:ae._owner}}function j(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===r}function M(ae){var W={"=":"=0",":":"=2"};return"$"+ae.replace(/[=:]/g,function(oe){return W[oe]})}var D=/\/+/g;function O(ae,W){return typeof ae=="object"&&ae!==null&&ae.key!=null?M(""+ae.key):W.toString(36)}function pe(ae,W,oe,ie,ne){var z=typeof ae;(z==="undefined"||z==="boolean")&&(ae=null);var _e=!1;if(ae===null)_e=!0;else switch(z){case"string":case"number":_e=!0;break;case"object":switch(ae.$$typeof){case r:case e:_e=!0}}if(_e)return _e=ae,ne=ne(_e),ae=ie===""?"."+O(_e,0):ie,L(ne)?(oe="",ae!=null&&(oe=ae.replace(D,"$&/")+"/"),pe(ne,W,oe,"",function(we){return we})):ne!=null&&(j(ne)&&(ne=P(ne,oe+(!ne.key||_e&&_e.key===ne.key?"":(""+ne.key).replace(D,"$&/")+"/")+ae)),W.push(ne)),1;if(_e=0,ie=ie===""?".":ie+":",L(ae))for(var De=0;De<ae.length;De++){z=ae[De];var Se=ie+O(z,De);_e+=pe(z,W,oe,Se,ne)}else if(Se=x(ae),typeof Se=="function")for(ae=Se.call(ae),De=0;!(z=ae.next()).done;)z=z.value,Se=ie+O(z,De++),_e+=pe(z,W,oe,Se,ne);else if(z==="object")throw W=String(ae),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(ae).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return _e}function Ae(ae,W,oe){if(ae==null)return ae;var ie=[],ne=0;return pe(ae,ie,"","",function(z){return W.call(oe,z,ne++)}),ie}function Fe(ae){if(ae._status===-1){var W=ae._result;W=W(),W.then(function(oe){(ae._status===0||ae._status===-1)&&(ae._status=1,ae._result=oe)},function(oe){(ae._status===0||ae._status===-1)&&(ae._status=2,ae._result=oe)}),ae._status===-1&&(ae._status=0,ae._result=W)}if(ae._status===1)return ae._result.default;throw ae._result}var Me={current:null},Ee={transition:null},Te={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:Ee,ReactCurrentOwner:H};function Ne(){throw Error("act(...) is not supported in production builds of React.")}return Kt.Children={map:Ae,forEach:function(ae,W,oe){Ae(ae,function(){W.apply(this,arguments)},oe)},count:function(ae){var W=0;return Ae(ae,function(){W++}),W},toArray:function(ae){return Ae(ae,function(W){return W})||[]},only:function(ae){if(!j(ae))throw Error("React.Children.only expected to receive a single React element child.");return ae}},Kt.Component=E,Kt.Fragment=t,Kt.Profiler=s,Kt.PureComponent=C,Kt.StrictMode=n,Kt.Suspense=d,Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Te,Kt.act=Ne,Kt.cloneElement=function(ae,W,oe){if(ae==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ae+".");var ie=_({},ae.props),ne=ae.key,z=ae.ref,_e=ae._owner;if(W!=null){if(W.ref!==void 0&&(z=W.ref,_e=H.current),W.key!==void 0&&(ne=""+W.key),ae.type&&ae.type.defaultProps)var De=ae.type.defaultProps;for(Se in W)K.call(W,Se)&&!S.hasOwnProperty(Se)&&(ie[Se]=W[Se]===void 0&&De!==void 0?De[Se]:W[Se])}var Se=arguments.length-2;if(Se===1)ie.children=oe;else if(1<Se){De=Array(Se);for(var we=0;we<Se;we++)De[we]=arguments[we+2];ie.children=De}return{$$typeof:r,type:ae.type,key:ne,ref:z,props:ie,_owner:_e}},Kt.createContext=function(ae){return ae={$$typeof:a,_currentValue:ae,_currentValue2:ae,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ae.Provider={$$typeof:i,_context:ae},ae.Consumer=ae},Kt.createElement=k,Kt.createFactory=function(ae){var W=k.bind(null,ae);return W.type=ae,W},Kt.createRef=function(){return{current:null}},Kt.forwardRef=function(ae){return{$$typeof:c,render:ae}},Kt.isValidElement=j,Kt.lazy=function(ae){return{$$typeof:p,_payload:{_status:-1,_result:ae},_init:Fe}},Kt.memo=function(ae,W){return{$$typeof:h,type:ae,compare:W===void 0?null:W}},Kt.startTransition=function(ae){var W=Ee.transition;Ee.transition={};try{ae()}finally{Ee.transition=W}},Kt.unstable_act=Ne,Kt.useCallback=function(ae,W){return Me.current.useCallback(ae,W)},Kt.useContext=function(ae){return Me.current.useContext(ae)},Kt.useDebugValue=function(){},Kt.useDeferredValue=function(ae){return Me.current.useDeferredValue(ae)},Kt.useEffect=function(ae,W){return Me.current.useEffect(ae,W)},Kt.useId=function(){return Me.current.useId()},Kt.useImperativeHandle=function(ae,W,oe){return Me.current.useImperativeHandle(ae,W,oe)},Kt.useInsertionEffect=function(ae,W){return Me.current.useInsertionEffect(ae,W)},Kt.useLayoutEffect=function(ae,W){return Me.current.useLayoutEffect(ae,W)},Kt.useMemo=function(ae,W){return Me.current.useMemo(ae,W)},Kt.useReducer=function(ae,W,oe){return Me.current.useReducer(ae,W,oe)},Kt.useRef=function(ae){return Me.current.useRef(ae)},Kt.useState=function(ae){return Me.current.useState(ae)},Kt.useSyncExternalStore=function(ae,W,oe){return Me.current.useSyncExternalStore(ae,W,oe)},Kt.useTransition=function(){return Me.current.useTransition()},Kt.version="18.3.1",Kt}var FE;function U1(){return FE||(FE=1,My.exports=uR()),My.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE;function dR(){if(OE)return m0;OE=1;var r=U1(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(c,d,h){var p,m={},x=null,v=null;h!==void 0&&(x=""+h),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(v=d.ref);for(p in d)n.call(d,p)&&!i.hasOwnProperty(p)&&(m[p]=d[p]);if(c&&c.defaultProps)for(p in d=c.defaultProps,d)m[p]===void 0&&(m[p]=d[p]);return{$$typeof:e,type:c,key:x,ref:v,props:m,_owner:s.current}}return m0.Fragment=t,m0.jsx=a,m0.jsxs=a,m0}var LE;function hR(){return LE||(LE=1,Ly.exports=dR()),Ly.exports}var o=hR(),A=U1();const $i=B1(A);var Ep={},Vy={exports:{}},As={},$y={exports:{}},By={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ME;function fR(){return ME||(ME=1,(function(r){function e(Ee,Te){var Ne=Ee.length;Ee.push(Te);e:for(;0<Ne;){var ae=Ne-1>>>1,W=Ee[ae];if(0<s(W,Te))Ee[ae]=Te,Ee[Ne]=W,Ne=ae;else break e}}function t(Ee){return Ee.length===0?null:Ee[0]}function n(Ee){if(Ee.length===0)return null;var Te=Ee[0],Ne=Ee.pop();if(Ne!==Te){Ee[0]=Ne;e:for(var ae=0,W=Ee.length,oe=W>>>1;ae<oe;){var ie=2*(ae+1)-1,ne=Ee[ie],z=ie+1,_e=Ee[z];if(0>s(ne,Ne))z<W&&0>s(_e,ne)?(Ee[ae]=_e,Ee[z]=Ne,ae=z):(Ee[ae]=ne,Ee[ie]=Ne,ae=ie);else if(z<W&&0>s(_e,Ne))Ee[ae]=_e,Ee[z]=Ne,ae=z;else break e}}return Te}function s(Ee,Te){var Ne=Ee.sortIndex-Te.sortIndex;return Ne!==0?Ne:Ee.id-Te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();r.unstable_now=function(){return a.now()-c}}var d=[],h=[],p=1,m=null,x=3,v=!1,_=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(Ee){for(var Te=t(h);Te!==null;){if(Te.callback===null)n(h);else if(Te.startTime<=Ee)n(h),Te.sortIndex=Te.expirationTime,e(d,Te);else break;Te=t(h)}}function L(Ee){if(w=!1,V(Ee),!_)if(t(d)!==null)_=!0,Fe(K);else{var Te=t(h);Te!==null&&Me(L,Te.startTime-Ee)}}function K(Ee,Te){_=!1,w&&(w=!1,R(k),k=-1),v=!0;var Ne=x;try{for(V(Te),m=t(d);m!==null&&(!(m.expirationTime>Te)||Ee&&!M());){var ae=m.callback;if(typeof ae=="function"){m.callback=null,x=m.priorityLevel;var W=ae(m.expirationTime<=Te);Te=r.unstable_now(),typeof W=="function"?m.callback=W:m===t(d)&&n(d),V(Te)}else n(d);m=t(d)}if(m!==null)var oe=!0;else{var ie=t(h);ie!==null&&Me(L,ie.startTime-Te),oe=!1}return oe}finally{m=null,x=Ne,v=!1}}var H=!1,S=null,k=-1,P=5,j=-1;function M(){return!(r.unstable_now()-j<P)}function D(){if(S!==null){var Ee=r.unstable_now();j=Ee;var Te=!0;try{Te=S(!0,Ee)}finally{Te?O():(H=!1,S=null)}}else H=!1}var O;if(typeof C=="function")O=function(){C(D)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,Ae=pe.port2;pe.port1.onmessage=D,O=function(){Ae.postMessage(null)}}else O=function(){E(D,0)};function Fe(Ee){S=Ee,H||(H=!0,O())}function Me(Ee,Te){k=E(function(){Ee(r.unstable_now())},Te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Ee){Ee.callback=null},r.unstable_continueExecution=function(){_||v||(_=!0,Fe(K))},r.unstable_forceFrameRate=function(Ee){0>Ee||125<Ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Ee?Math.floor(1e3/Ee):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(d)},r.unstable_next=function(Ee){switch(x){case 1:case 2:case 3:var Te=3;break;default:Te=x}var Ne=x;x=Te;try{return Ee()}finally{x=Ne}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Ee,Te){switch(Ee){case 1:case 2:case 3:case 4:case 5:break;default:Ee=3}var Ne=x;x=Ee;try{return Te()}finally{x=Ne}},r.unstable_scheduleCallback=function(Ee,Te,Ne){var ae=r.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?ae+Ne:ae):Ne=ae,Ee){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Ne+W,Ee={id:p++,callback:Te,priorityLevel:Ee,startTime:Ne,expirationTime:W,sortIndex:-1},Ne>ae?(Ee.sortIndex=Ne,e(h,Ee),t(d)===null&&Ee===t(h)&&(w?(R(k),k=-1):w=!0,Me(L,Ne-ae))):(Ee.sortIndex=W,e(d,Ee),_||v||(_=!0,Fe(K))),Ee},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(Ee){var Te=x;return function(){var Ne=x;x=Te;try{return Ee.apply(this,arguments)}finally{x=Ne}}}})(By)),By}var VE;function pR(){return VE||(VE=1,$y.exports=fR()),$y.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E;function mR(){if($E)return As;$E=1;var r=U1(),e=pR();function t(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,f=1;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(l,u){a(l,u),a(l+"Capture",u)}function a(l,u){for(s[l]=u,l=0;l<u.length;l++)n.add(u[l])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function x(l){return d.call(m,l)?!0:d.call(p,l)?!1:h.test(l)?m[l]=!0:(p[l]=!0,!1)}function v(l,u,f,y){if(f!==null&&f.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return y?!1:f!==null?!f.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function _(l,u,f,y){if(u===null||typeof u>"u"||v(l,u,f,y))return!0;if(y)return!1;if(f!==null)switch(f.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function w(l,u,f,y,b,N,B){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=y,this.attributeNamespace=b,this.mustUseProperty=f,this.propertyName=l,this.type=u,this.sanitizeURL=N,this.removeEmptyString=B}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){E[l]=new w(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var u=l[0];E[u]=new w(u,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){E[l]=new w(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){E[l]=new w(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){E[l]=new w(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){E[l]=new w(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){E[l]=new w(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){E[l]=new w(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){E[l]=new w(l,5,!1,l.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function C(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var u=l.replace(R,C);E[u]=new w(u,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var u=l.replace(R,C);E[u]=new w(u,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var u=l.replace(R,C);E[u]=new w(u,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){E[l]=new w(l,1,!1,l.toLowerCase(),null,!1,!1)}),E.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){E[l]=new w(l,1,!1,l.toLowerCase(),null,!0,!0)});function V(l,u,f,y){var b=E.hasOwnProperty(u)?E[u]:null;(b!==null?b.type!==0:y||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(_(u,f,b,y)&&(f=null),y||b===null?x(u)&&(f===null?l.removeAttribute(u):l.setAttribute(u,""+f)):b.mustUseProperty?l[b.propertyName]=f===null?b.type===3?!1:"":f:(u=b.attributeName,y=b.attributeNamespace,f===null?l.removeAttribute(u):(b=b.type,f=b===3||b===4&&f===!0?"":""+f,y?l.setAttributeNS(y,u,f):l.setAttribute(u,f))))}var L=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),H=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),M=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),Ae=Symbol.for("react.memo"),Fe=Symbol.for("react.lazy"),Me=Symbol.for("react.offscreen"),Ee=Symbol.iterator;function Te(l){return l===null||typeof l!="object"?null:(l=Ee&&l[Ee]||l["@@iterator"],typeof l=="function"?l:null)}var Ne=Object.assign,ae;function W(l){if(ae===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);ae=u&&u[1]||""}return`
`+ae+l}var oe=!1;function ie(l,u){if(!l||oe)return"";oe=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(be){var y=be}Reflect.construct(l,[],u)}else{try{u.call()}catch(be){y=be}l.call(u.prototype)}else{try{throw Error()}catch(be){y=be}l()}}catch(be){if(be&&y&&typeof be.stack=="string"){for(var b=be.stack.split(`
`),N=y.stack.split(`
`),B=b.length-1,re=N.length-1;1<=B&&0<=re&&b[B]!==N[re];)re--;for(;1<=B&&0<=re;B--,re--)if(b[B]!==N[re]){if(B!==1||re!==1)do if(B--,re--,0>re||b[B]!==N[re]){var ce=`
`+b[B].replace(" at new "," at ");return l.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",l.displayName)),ce}while(1<=B&&0<=re);break}}}finally{oe=!1,Error.prepareStackTrace=f}return(l=l?l.displayName||l.name:"")?W(l):""}function ne(l){switch(l.tag){case 5:return W(l.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return l=ie(l.type,!1),l;case 11:return l=ie(l.type.render,!1),l;case 1:return l=ie(l.type,!0),l;default:return""}}function z(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case S:return"Fragment";case H:return"Portal";case P:return"Profiler";case k:return"StrictMode";case O:return"Suspense";case pe:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case M:return(l.displayName||"Context")+".Consumer";case j:return(l._context.displayName||"Context")+".Provider";case D:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Ae:return u=l.displayName||null,u!==null?u:z(l.type)||"Memo";case Fe:u=l._payload,l=l._init;try{return z(l(u))}catch{}}return null}function _e(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=u.render,l=l.displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(u);case 8:return u===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function De(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Se(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function we(l){var u=Se(l)?"checked":"value",f=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),y=""+l[u];if(!l.hasOwnProperty(u)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var b=f.get,N=f.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(B){y=""+B,N.call(this,B)}}),Object.defineProperty(l,u,{enumerable:f.enumerable}),{getValue:function(){return y},setValue:function(B){y=""+B},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Qe(l){l._valueTracker||(l._valueTracker=we(l))}function ft(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),y="";return l&&(y=Se(l)?l.checked?"true":"false":l.value),l=y,l!==f?(u.setValue(l),!0):!1}function zt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function wt(l,u){var f=u.checked;return Ne({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??l._wrapperState.initialChecked})}function Yt(l,u){var f=u.defaultValue==null?"":u.defaultValue,y=u.checked!=null?u.checked:u.defaultChecked;f=De(u.value!=null?u.value:f),l._wrapperState={initialChecked:y,initialValue:f,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function kt(l,u){u=u.checked,u!=null&&V(l,"checked",u,!1)}function Oe(l,u){kt(l,u);var f=De(u.value),y=u.type;if(f!=null)y==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+f):l.value!==""+f&&(l.value=""+f);else if(y==="submit"||y==="reset"){l.removeAttribute("value");return}u.hasOwnProperty("value")?Rt(l,u.type,f):u.hasOwnProperty("defaultValue")&&Rt(l,u.type,De(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(l.defaultChecked=!!u.defaultChecked)}function Xt(l,u,f){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var y=u.type;if(!(y!=="submit"&&y!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+l._wrapperState.initialValue,f||u===l.value||(l.value=u),l.defaultValue=u}f=l.name,f!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,f!==""&&(l.name=f)}function Rt(l,u,f){(u!=="number"||zt(l.ownerDocument)!==l)&&(f==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+f&&(l.defaultValue=""+f))}var He=Array.isArray;function de(l,u,f,y){if(l=l.options,u){u={};for(var b=0;b<f.length;b++)u["$"+f[b]]=!0;for(f=0;f<l.length;f++)b=u.hasOwnProperty("$"+l[f].value),l[f].selected!==b&&(l[f].selected=b),b&&y&&(l[f].defaultSelected=!0)}else{for(f=""+De(f),u=null,b=0;b<l.length;b++){if(l[b].value===f){l[b].selected=!0,y&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function et(l,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return Ne({},u,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function ct(l,u){var f=u.value;if(f==null){if(f=u.children,u=u.defaultValue,f!=null){if(u!=null)throw Error(t(92));if(He(f)){if(1<f.length)throw Error(t(93));f=f[0]}u=f}u==null&&(u=""),f=u}l._wrapperState={initialValue:De(f)}}function pt(l,u){var f=De(u.value),y=De(u.defaultValue);f!=null&&(f=""+f,f!==l.value&&(l.value=f),u.defaultValue==null&&l.defaultValue!==f&&(l.defaultValue=f)),y!=null&&(l.defaultValue=""+y)}function St(l){var u=l.textContent;u===l._wrapperState.initialValue&&u!==""&&u!==null&&(l.value=u)}function ht(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jt(l,u){return l==null||l==="http://www.w3.org/1999/xhtml"?ht(u):l==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var dt,gr=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,f,y,b){MSApp.execUnsafeLocalFunction(function(){return l(u,f,y,b)})}:l})(function(l,u){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=u;else{for(dt=dt||document.createElement("div"),dt.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=dt.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;u.firstChild;)l.appendChild(u.firstChild)}});function J(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var Ce={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gt=["Webkit","ms","Moz","O"];Object.keys(Ce).forEach(function(l){gt.forEach(function(u){u=u+l.charAt(0).toUpperCase()+l.substring(1),Ce[u]=Ce[l]})});function fe(l,u,f){return u==null||typeof u=="boolean"||u===""?"":f||typeof u!="number"||u===0||Ce.hasOwnProperty(l)&&Ce[l]?(""+u).trim():u+"px"}function Ie(l,u){l=l.style;for(var f in u)if(u.hasOwnProperty(f)){var y=f.indexOf("--")===0,b=fe(f,u[f],y);f==="float"&&(f="cssFloat"),y?l.setProperty(f,b):l[f]=b}}var Le=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ze(l,u){if(u){if(Le[l]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,l));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function vt(l,u){if(l.indexOf("-")===-1)return typeof u.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=null;function at(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var lt=null,tt=null,Nt=null;function Ut(l){if(l=e0(l)){if(typeof lt!="function")throw Error(t(280));var u=l.stateNode;u&&(u=Mf(u),lt(l.stateNode,l.type,u))}}function Qt(l){tt?Nt?Nt.push(l):Nt=[l]:tt=l}function Fr(){if(tt){var l=tt,u=Nt;if(Nt=tt=null,Ut(l),u)for(l=0;l<u.length;l++)Ut(u[l])}}function Or(l,u){return l(u)}function _n(){}var mr=!1;function Kn(l,u,f){if(mr)return l(u,f);mr=!0;try{return Or(l,u,f)}finally{mr=!1,(tt!==null||Nt!==null)&&(_n(),Fr())}}function hr(l,u){var f=l.stateNode;if(f===null)return null;var y=Mf(f);if(y===null)return null;f=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(t(231,u,typeof f));return f}var Rn=!1;if(c)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){Rn=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{Rn=!1}function En(l,u,f,y,b,N,B,re,ce){var be=Array.prototype.slice.call(arguments,3);try{u.apply(f,be)}catch(qe){this.onError(qe)}}var an=!1,pn=null,U=!1,ee=null,Y={onError:function(l){an=!0,pn=l}};function X(l,u,f,y,b,N,B,re,ce){an=!1,pn=null,En.apply(Y,arguments)}function te(l,u,f,y,b,N,B,re,ce){if(X.apply(this,arguments),an){if(an){var be=pn;an=!1,pn=null}else throw Error(t(198));U||(U=!0,ee=be)}}function F(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function Q(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function le(l){if(F(l)!==l)throw Error(t(188))}function se(l){var u=l.alternate;if(!u){if(u=F(l),u===null)throw Error(t(188));return u!==l?null:l}for(var f=l,y=u;;){var b=f.return;if(b===null)break;var N=b.alternate;if(N===null){if(y=b.return,y!==null){f=y;continue}break}if(b.child===N.child){for(N=b.child;N;){if(N===f)return le(b),l;if(N===y)return le(b),u;N=N.sibling}throw Error(t(188))}if(f.return!==y.return)f=b,y=N;else{for(var B=!1,re=b.child;re;){if(re===f){B=!0,f=b,y=N;break}if(re===y){B=!0,y=b,f=N;break}re=re.sibling}if(!B){for(re=N.child;re;){if(re===f){B=!0,f=N,y=b;break}if(re===y){B=!0,y=N,f=b;break}re=re.sibling}if(!B)throw Error(t(189))}}if(f.alternate!==y)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?l:u}function ue(l){return l=se(l),l!==null?me(l):null}function me(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=me(l);if(u!==null)return u;l=l.sibling}return null}var $e=e.unstable_scheduleCallback,ze=e.unstable_cancelCallback,Ye=e.unstable_shouldYield,Ve=e.unstable_requestPaint,Be=e.unstable_now,Pt=e.unstable_getCurrentPriorityLevel,Wt=e.unstable_ImmediatePriority,Ht=e.unstable_UserBlockingPriority,ir=e.unstable_NormalPriority,ls=e.unstable_LowPriority,Yn=e.unstable_IdlePriority,Xn=null,zr=null;function Yi(l){if(zr&&typeof zr.onCommitFiberRoot=="function")try{zr.onCommitFiberRoot(Xn,l,void 0,(l.current.flags&128)===128)}catch{}}var kr=Math.clz32?Math.clz32:Uc,Na=Math.log,Bc=Math.LN2;function Uc(l){return l>>>=0,l===0?32:31-(Na(l)/Bc|0)|0}var fo=64,po=4194304;function mo(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function wl(l,u){var f=l.pendingLanes;if(f===0)return 0;var y=0,b=l.suspendedLanes,N=l.pingedLanes,B=f&268435455;if(B!==0){var re=B&~b;re!==0?y=mo(re):(N&=B,N!==0&&(y=mo(N)))}else B=f&~b,B!==0?y=mo(B):N!==0&&(y=mo(N));if(y===0)return 0;if(u!==0&&u!==y&&(u&b)===0&&(b=y&-y,N=u&-u,b>=N||b===16&&(N&4194240)!==0))return u;if((y&4)!==0&&(y|=f&16),u=l.entangledLanes,u!==0)for(l=l.entanglements,u&=y;0<u;)f=31-kr(u),b=1<<f,y|=l[f],u&=~b;return y}function fx(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ka(l,u){for(var f=l.suspendedLanes,y=l.pingedLanes,b=l.expirationTimes,N=l.pendingLanes;0<N;){var B=31-kr(N),re=1<<B,ce=b[B];ce===-1?((re&f)===0||(re&y)!==0)&&(b[B]=fx(re,u)):ce<=u&&(l.expiredLanes|=re),N&=~re}}function Os(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function _l(){var l=fo;return fo<<=1,(fo&4194240)===0&&(fo=64),l}function go(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function xo(l,u,f){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,u=31-kr(u),l[u]=f}function Sr(l,u){var f=l.pendingLanes&~u;l.pendingLanes=u,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=u,l.mutableReadLanes&=u,l.entangledLanes&=u,u=l.entanglements;var y=l.eventTimes;for(l=l.expirationTimes;0<f;){var b=31-kr(f),N=1<<b;u[b]=0,y[b]=-1,l[b]=-1,f&=~N}}function yo(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var y=31-kr(f),b=1<<y;b&u|l[y]&u&&(l[y]|=u),f&=~b}}var er=0;function vo(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var xf,zc,yf,vf,bf,Vd=!1,Xi=[],Dn=null,bi=null,wi=null,bo=new Map,ti=new Map,Qi=[],px="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wf(l,u){switch(l){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":bo.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":ti.delete(u.pointerId)}}function ys(l,u,f,y,b,N){return l===null||l.nativeEvent!==N?(l={blockedOn:u,domEventName:f,eventSystemFlags:y,nativeEvent:N,targetContainers:[b]},u!==null&&(u=e0(u),u!==null&&zc(u)),l):(l.eventSystemFlags|=y,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function mx(l,u,f,y,b){switch(u){case"focusin":return Dn=ys(Dn,l,u,f,y,b),!0;case"dragenter":return bi=ys(bi,l,u,f,y,b),!0;case"mouseover":return wi=ys(wi,l,u,f,y,b),!0;case"pointerover":var N=b.pointerId;return bo.set(N,ys(bo.get(N)||null,l,u,f,y,b)),!0;case"gotpointercapture":return N=b.pointerId,ti.set(N,ys(ti.get(N)||null,l,u,f,y,b)),!0}return!1}function _f(l){var u=kl(l.target);if(u!==null){var f=F(u);if(f!==null){if(u=f.tag,u===13){if(u=Q(f),u!==null){l.blockedOn=u,bf(l.priority,function(){yf(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Sa(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=Hc(l.domEventName,l.eventSystemFlags,u[0],l.nativeEvent);if(f===null){f=l.nativeEvent;var y=new f.constructor(f.type,f);It=y,f.target.dispatchEvent(y),It=null}else return u=e0(f),u!==null&&zc(u),l.blockedOn=f,!1;u.shift()}return!0}function El(l,u,f){Sa(l)&&f.delete(u)}function Ef(){Vd=!1,Dn!==null&&Sa(Dn)&&(Dn=null),bi!==null&&Sa(bi)&&(bi=null),wi!==null&&Sa(wi)&&(wi=null),bo.forEach(El),ti.forEach(El)}function _i(l,u){l.blockedOn===u&&(l.blockedOn=null,Vd||(Vd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ef)))}function Ei(l){function u(b){return _i(b,l)}if(0<Xi.length){_i(Xi[0],l);for(var f=1;f<Xi.length;f++){var y=Xi[f];y.blockedOn===l&&(y.blockedOn=null)}}for(Dn!==null&&_i(Dn,l),bi!==null&&_i(bi,l),wi!==null&&_i(wi,l),bo.forEach(u),ti.forEach(u),f=0;f<Qi.length;f++)y=Qi[f],y.blockedOn===l&&(y.blockedOn=null);for(;0<Qi.length&&(f=Qi[0],f.blockedOn===null);)_f(f),f.blockedOn===null&&Qi.shift()}var Ca=L.ReactCurrentBatchConfig,wo=!0;function Lr(l,u,f,y){var b=er,N=Ca.transition;Ca.transition=null;try{er=1,$d(l,u,f,y)}finally{er=b,Ca.transition=N}}function gx(l,u,f,y){var b=er,N=Ca.transition;Ca.transition=null;try{er=4,$d(l,u,f,y)}finally{er=b,Ca.transition=N}}function $d(l,u,f,y){if(wo){var b=Hc(l,u,f,y);if(b===null)kx(l,u,y,Tl,f),wf(l,y);else if(mx(b,l,u,f,y))y.stopPropagation();else if(wf(l,y),u&4&&-1<px.indexOf(l)){for(;b!==null;){var N=e0(b);if(N!==null&&xf(N),N=Hc(l,u,f,y),N===null&&kx(l,u,y,Tl,f),N===b)break;b=N}b!==null&&y.stopPropagation()}else kx(l,u,y,null,f)}}var Tl=null;function Hc(l,u,f,y){if(Tl=null,l=at(y),l=kl(l),l!==null)if(u=F(l),u===null)l=null;else if(f=u.tag,f===13){if(l=Q(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null);return Tl=l,null}function Bd(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pt()){case Wt:return 1;case Ht:return 4;case ir:case ls:return 16;case Yn:return 536870912;default:return 16}default:return 16}}var Ls=null,Wc=null,vs=null;function Ud(){if(vs)return vs;var l,u=Wc,f=u.length,y,b="value"in Ls?Ls.value:Ls.textContent,N=b.length;for(l=0;l<f&&u[l]===b[l];l++);var B=f-l;for(y=1;y<=B&&u[f-y]===b[N-y];y++);return vs=b.slice(l,1<y?1-y:void 0)}function qc(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Ji(){return!0}function zd(){return!1}function Fn(l){function u(f,y,b,N,B){this._reactName=f,this._targetInst=b,this.type=y,this.nativeEvent=N,this.target=B,this.currentTarget=null;for(var re in l)l.hasOwnProperty(re)&&(f=l[re],this[re]=f?f(N):N[re]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Ji:zd,this.isPropagationStopped=zd,this}return Ne(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ji)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ji)},persist:function(){},isPersistent:Ji}),u}var Ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gc=Fn(Ti),Zi=Ne({},Ti,{view:0,detail:0}),xx=Fn(Zi),Kc,Ia,_o,Al=Ne({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ea,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==_o&&(_o&&l.type==="mousemove"?(Kc=l.screenX-_o.screenX,Ia=l.screenY-_o.screenY):Ia=Kc=0,_o=l),Kc)},movementY:function(l){return"movementY"in l?l.movementY:Ia}}),Yc=Fn(Al),Hd=Ne({},Al,{dataTransfer:0}),Tf=Fn(Hd),Xc=Ne({},Zi,{relatedTarget:0}),Qc=Fn(Xc),Af=Ne({},Ti,{animationName:0,elapsedTime:0,pseudoElement:0}),Pa=Fn(Af),Nf=Ne({},Ti,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),kf=Fn(Nf),Sf=Ne({},Ti,{data:0}),Wd=Fn(Sf),Jc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function If(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=Cf[l])?!!u[l]:!1}function ea(){return If}var g=Ne({},Zi,{key:function(l){if(l.key){var u=Jc[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=qc(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?cs[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ea,charCode:function(l){return l.type==="keypress"?qc(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?qc(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),T=Fn(g),I=Ne({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G=Fn(I),ge=Ne({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ea}),ke=Fn(ge),it=Ne({},Ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),xr=Fn(it),mn=Ne({},Al,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),tr=Fn(mn),Tn=[9,13,27,32],on=c&&"CompositionEvent"in window,ri=null;c&&"documentMode"in document&&(ri=document.documentMode);var Ms=c&&"TextEvent"in window&&!ri,Nl=c&&(!on||ri&&8<ri&&11>=ri),Zc=" ",Sw=!1;function Cw(l,u){switch(l){case"keyup":return Tn.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Iw(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var eu=!1;function oj(l,u){switch(l){case"compositionend":return Iw(u);case"keypress":return u.which!==32?null:(Sw=!0,Zc);case"textInput":return l=u.data,l===Zc&&Sw?null:l;default:return null}}function lj(l,u){if(eu)return l==="compositionend"||!on&&Cw(l,u)?(l=Ud(),vs=Wc=Ls=null,eu=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Nl&&u.locale!=="ko"?null:u.data;default:return null}}var cj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pw(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!cj[l.type]:u==="textarea"}function jw(l,u,f,y){Qt(y),u=Ff(u,"onChange"),0<u.length&&(f=new Gc("onChange","change",null,f,y),l.push({event:f,listeners:u}))}var qd=null,Gd=null;function uj(l){Xw(l,0)}function Pf(l){var u=iu(l);if(ft(u))return l}function dj(l,u){if(l==="change")return u}var Rw=!1;if(c){var yx;if(c){var vx="oninput"in document;if(!vx){var Dw=document.createElement("div");Dw.setAttribute("oninput","return;"),vx=typeof Dw.oninput=="function"}yx=vx}else yx=!1;Rw=yx&&(!document.documentMode||9<document.documentMode)}function Fw(){qd&&(qd.detachEvent("onpropertychange",Ow),Gd=qd=null)}function Ow(l){if(l.propertyName==="value"&&Pf(Gd)){var u=[];jw(u,Gd,l,at(l)),Kn(uj,u)}}function hj(l,u,f){l==="focusin"?(Fw(),qd=u,Gd=f,qd.attachEvent("onpropertychange",Ow)):l==="focusout"&&Fw()}function fj(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Pf(Gd)}function pj(l,u){if(l==="click")return Pf(u)}function mj(l,u){if(l==="input"||l==="change")return Pf(u)}function gj(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Ai=typeof Object.is=="function"?Object.is:gj;function Kd(l,u){if(Ai(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),y=Object.keys(u);if(f.length!==y.length)return!1;for(y=0;y<f.length;y++){var b=f[y];if(!d.call(u,b)||!Ai(l[b],u[b]))return!1}return!0}function Lw(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Mw(l,u){var f=Lw(l);l=0;for(var y;f;){if(f.nodeType===3){if(y=l+f.textContent.length,l<=u&&y>=u)return{node:f,offset:u-l};l=y}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Lw(f)}}function Vw(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?Vw(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function $w(){for(var l=window,u=zt();u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=zt(l.document)}return u}function bx(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}function xj(l){var u=$w(),f=l.focusedElem,y=l.selectionRange;if(u!==f&&f&&f.ownerDocument&&Vw(f.ownerDocument.documentElement,f)){if(y!==null&&bx(f)){if(u=y.start,l=y.end,l===void 0&&(l=u),"selectionStart"in f)f.selectionStart=u,f.selectionEnd=Math.min(l,f.value.length);else if(l=(u=f.ownerDocument||document)&&u.defaultView||window,l.getSelection){l=l.getSelection();var b=f.textContent.length,N=Math.min(y.start,b);y=y.end===void 0?N:Math.min(y.end,b),!l.extend&&N>y&&(b=y,y=N,N=b),b=Mw(f,N);var B=Mw(f,y);b&&B&&(l.rangeCount!==1||l.anchorNode!==b.node||l.anchorOffset!==b.offset||l.focusNode!==B.node||l.focusOffset!==B.offset)&&(u=u.createRange(),u.setStart(b.node,b.offset),l.removeAllRanges(),N>y?(l.addRange(u),l.extend(B.node,B.offset)):(u.setEnd(B.node,B.offset),l.addRange(u)))}}for(u=[],l=f;l=l.parentNode;)l.nodeType===1&&u.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<u.length;f++)l=u[f],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var yj=c&&"documentMode"in document&&11>=document.documentMode,tu=null,wx=null,Yd=null,_x=!1;function Bw(l,u,f){var y=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;_x||tu==null||tu!==zt(y)||(y=tu,"selectionStart"in y&&bx(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Yd&&Kd(Yd,y)||(Yd=y,y=Ff(wx,"onSelect"),0<y.length&&(u=new Gc("onSelect","select",null,u,f),l.push({event:u,listeners:y}),u.target=tu)))}function jf(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var ru={animationend:jf("Animation","AnimationEnd"),animationiteration:jf("Animation","AnimationIteration"),animationstart:jf("Animation","AnimationStart"),transitionend:jf("Transition","TransitionEnd")},Ex={},Uw={};c&&(Uw=document.createElement("div").style,"AnimationEvent"in window||(delete ru.animationend.animation,delete ru.animationiteration.animation,delete ru.animationstart.animation),"TransitionEvent"in window||delete ru.transitionend.transition);function Rf(l){if(Ex[l])return Ex[l];if(!ru[l])return l;var u=ru[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in Uw)return Ex[l]=u[f];return l}var zw=Rf("animationend"),Hw=Rf("animationiteration"),Ww=Rf("animationstart"),qw=Rf("transitionend"),Gw=new Map,Kw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Eo(l,u){Gw.set(l,u),i(u,[l])}for(var Tx=0;Tx<Kw.length;Tx++){var Ax=Kw[Tx],vj=Ax.toLowerCase(),bj=Ax[0].toUpperCase()+Ax.slice(1);Eo(vj,"on"+bj)}Eo(zw,"onAnimationEnd"),Eo(Hw,"onAnimationIteration"),Eo(Ww,"onAnimationStart"),Eo("dblclick","onDoubleClick"),Eo("focusin","onFocus"),Eo("focusout","onBlur"),Eo(qw,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xd));function Yw(l,u,f){var y=l.type||"unknown-event";l.currentTarget=f,te(y,u,void 0,l),l.currentTarget=null}function Xw(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var y=l[f],b=y.event;y=y.listeners;e:{var N=void 0;if(u)for(var B=y.length-1;0<=B;B--){var re=y[B],ce=re.instance,be=re.currentTarget;if(re=re.listener,ce!==N&&b.isPropagationStopped())break e;Yw(b,re,be),N=ce}else for(B=0;B<y.length;B++){if(re=y[B],ce=re.instance,be=re.currentTarget,re=re.listener,ce!==N&&b.isPropagationStopped())break e;Yw(b,re,be),N=ce}}}if(U)throw l=ee,U=!1,ee=null,l}function Pr(l,u){var f=u[Rx];f===void 0&&(f=u[Rx]=new Set);var y=l+"__bubble";f.has(y)||(Qw(u,l,2,!1),f.add(y))}function Nx(l,u,f){var y=0;u&&(y|=4),Qw(f,l,y,u)}var Df="_reactListening"+Math.random().toString(36).slice(2);function Qd(l){if(!l[Df]){l[Df]=!0,n.forEach(function(f){f!=="selectionchange"&&(wj.has(f)||Nx(f,!1,l),Nx(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[Df]||(u[Df]=!0,Nx("selectionchange",!1,u))}}function Qw(l,u,f,y){switch(Bd(u)){case 1:var b=Lr;break;case 4:b=gx;break;default:b=$d}f=b.bind(null,u,f,l),b=void 0,!Rn||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),y?b!==void 0?l.addEventListener(u,f,{capture:!0,passive:b}):l.addEventListener(u,f,!0):b!==void 0?l.addEventListener(u,f,{passive:b}):l.addEventListener(u,f,!1)}function kx(l,u,f,y,b){var N=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var B=y.tag;if(B===3||B===4){var re=y.stateNode.containerInfo;if(re===b||re.nodeType===8&&re.parentNode===b)break;if(B===4)for(B=y.return;B!==null;){var ce=B.tag;if((ce===3||ce===4)&&(ce=B.stateNode.containerInfo,ce===b||ce.nodeType===8&&ce.parentNode===b))return;B=B.return}for(;re!==null;){if(B=kl(re),B===null)return;if(ce=B.tag,ce===5||ce===6){y=N=B;continue e}re=re.parentNode}}y=y.return}Kn(function(){var be=N,qe=at(f),Ke=[];e:{var We=Gw.get(l);if(We!==void 0){var mt=Gc,bt=l;switch(l){case"keypress":if(qc(f)===0)break e;case"keydown":case"keyup":mt=T;break;case"focusin":bt="focus",mt=Qc;break;case"focusout":bt="blur",mt=Qc;break;case"beforeblur":case"afterblur":mt=Qc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=Yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=Tf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=ke;break;case zw:case Hw:case Ww:mt=Pa;break;case qw:mt=xr;break;case"scroll":mt=xx;break;case"wheel":mt=tr;break;case"copy":case"cut":case"paste":mt=kf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=G}var _t=(u&4)!==0,tn=!_t&&l==="scroll",ye=_t?We!==null?We+"Capture":null:We;_t=[];for(var he=be,ve;he!==null;){ve=he;var Je=ve.stateNode;if(ve.tag===5&&Je!==null&&(ve=Je,ye!==null&&(Je=hr(he,ye),Je!=null&&_t.push(Jd(he,Je,ve)))),tn)break;he=he.return}0<_t.length&&(We=new mt(We,bt,null,f,qe),Ke.push({event:We,listeners:_t}))}}if((u&7)===0){e:{if(We=l==="mouseover"||l==="pointerover",mt=l==="mouseout"||l==="pointerout",We&&f!==It&&(bt=f.relatedTarget||f.fromElement)&&(kl(bt)||bt[ja]))break e;if((mt||We)&&(We=qe.window===qe?qe:(We=qe.ownerDocument)?We.defaultView||We.parentWindow:window,mt?(bt=f.relatedTarget||f.toElement,mt=be,bt=bt?kl(bt):null,bt!==null&&(tn=F(bt),bt!==tn||bt.tag!==5&&bt.tag!==6)&&(bt=null)):(mt=null,bt=be),mt!==bt)){if(_t=Yc,Je="onMouseLeave",ye="onMouseEnter",he="mouse",(l==="pointerout"||l==="pointerover")&&(_t=G,Je="onPointerLeave",ye="onPointerEnter",he="pointer"),tn=mt==null?We:iu(mt),ve=bt==null?We:iu(bt),We=new _t(Je,he+"leave",mt,f,qe),We.target=tn,We.relatedTarget=ve,Je=null,kl(qe)===be&&(_t=new _t(ye,he+"enter",bt,f,qe),_t.target=ve,_t.relatedTarget=tn,Je=_t),tn=Je,mt&&bt)t:{for(_t=mt,ye=bt,he=0,ve=_t;ve;ve=nu(ve))he++;for(ve=0,Je=ye;Je;Je=nu(Je))ve++;for(;0<he-ve;)_t=nu(_t),he--;for(;0<ve-he;)ye=nu(ye),ve--;for(;he--;){if(_t===ye||ye!==null&&_t===ye.alternate)break t;_t=nu(_t),ye=nu(ye)}_t=null}else _t=null;mt!==null&&Jw(Ke,We,mt,_t,!1),bt!==null&&tn!==null&&Jw(Ke,tn,bt,_t,!0)}}e:{if(We=be?iu(be):window,mt=We.nodeName&&We.nodeName.toLowerCase(),mt==="select"||mt==="input"&&We.type==="file")var Tt=dj;else if(Pw(We))if(Rw)Tt=mj;else{Tt=fj;var Dt=hj}else(mt=We.nodeName)&&mt.toLowerCase()==="input"&&(We.type==="checkbox"||We.type==="radio")&&(Tt=pj);if(Tt&&(Tt=Tt(l,be))){jw(Ke,Tt,f,qe);break e}Dt&&Dt(l,We,be),l==="focusout"&&(Dt=We._wrapperState)&&Dt.controlled&&We.type==="number"&&Rt(We,"number",We.value)}switch(Dt=be?iu(be):window,l){case"focusin":(Pw(Dt)||Dt.contentEditable==="true")&&(tu=Dt,wx=be,Yd=null);break;case"focusout":Yd=wx=tu=null;break;case"mousedown":_x=!0;break;case"contextmenu":case"mouseup":case"dragend":_x=!1,Bw(Ke,f,qe);break;case"selectionchange":if(yj)break;case"keydown":case"keyup":Bw(Ke,f,qe)}var Ft;if(on)e:{switch(l){case"compositionstart":var Vt="onCompositionStart";break e;case"compositionend":Vt="onCompositionEnd";break e;case"compositionupdate":Vt="onCompositionUpdate";break e}Vt=void 0}else eu?Cw(l,f)&&(Vt="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Vt="onCompositionStart");Vt&&(Nl&&f.locale!=="ko"&&(eu||Vt!=="onCompositionStart"?Vt==="onCompositionEnd"&&eu&&(Ft=Ud()):(Ls=qe,Wc="value"in Ls?Ls.value:Ls.textContent,eu=!0)),Dt=Ff(be,Vt),0<Dt.length&&(Vt=new Wd(Vt,l,null,f,qe),Ke.push({event:Vt,listeners:Dt}),Ft?Vt.data=Ft:(Ft=Iw(f),Ft!==null&&(Vt.data=Ft)))),(Ft=Ms?oj(l,f):lj(l,f))&&(be=Ff(be,"onBeforeInput"),0<be.length&&(qe=new Wd("onBeforeInput","beforeinput",null,f,qe),Ke.push({event:qe,listeners:be}),qe.data=Ft))}Xw(Ke,u)})}function Jd(l,u,f){return{instance:l,listener:u,currentTarget:f}}function Ff(l,u){for(var f=u+"Capture",y=[];l!==null;){var b=l,N=b.stateNode;b.tag===5&&N!==null&&(b=N,N=hr(l,f),N!=null&&y.unshift(Jd(l,N,b)),N=hr(l,u),N!=null&&y.push(Jd(l,N,b))),l=l.return}return y}function nu(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function Jw(l,u,f,y,b){for(var N=u._reactName,B=[];f!==null&&f!==y;){var re=f,ce=re.alternate,be=re.stateNode;if(ce!==null&&ce===y)break;re.tag===5&&be!==null&&(re=be,b?(ce=hr(f,N),ce!=null&&B.unshift(Jd(f,ce,re))):b||(ce=hr(f,N),ce!=null&&B.push(Jd(f,ce,re)))),f=f.return}B.length!==0&&l.push({event:u,listeners:B})}var _j=/\r\n?/g,Ej=/\u0000|\uFFFD/g;function Zw(l){return(typeof l=="string"?l:""+l).replace(_j,`
`).replace(Ej,"")}function Of(l,u,f){if(u=Zw(u),Zw(l)!==u&&f)throw Error(t(425))}function Lf(){}var Sx=null,Cx=null;function Ix(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Px=typeof setTimeout=="function"?setTimeout:void 0,Tj=typeof clearTimeout=="function"?clearTimeout:void 0,e_=typeof Promise=="function"?Promise:void 0,Aj=typeof queueMicrotask=="function"?queueMicrotask:typeof e_<"u"?function(l){return e_.resolve(null).then(l).catch(Nj)}:Px;function Nj(l){setTimeout(function(){throw l})}function jx(l,u){var f=u,y=0;do{var b=f.nextSibling;if(l.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"){if(y===0){l.removeChild(b),Ei(u);return}y--}else f!=="$"&&f!=="$?"&&f!=="$!"||y++;f=b}while(f);Ei(u)}function To(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return l}function t_(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return l;u--}else f==="/$"&&u++}l=l.previousSibling}return null}var su=Math.random().toString(36).slice(2),ta="__reactFiber$"+su,Zd="__reactProps$"+su,ja="__reactContainer$"+su,Rx="__reactEvents$"+su,kj="__reactListeners$"+su,Sj="__reactHandles$"+su;function kl(l){var u=l[ta];if(u)return u;for(var f=l.parentNode;f;){if(u=f[ja]||f[ta]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=t_(l);l!==null;){if(f=l[ta])return f;l=t_(l)}return u}l=f,f=l.parentNode}return null}function e0(l){return l=l[ta]||l[ja],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function iu(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(t(33))}function Mf(l){return l[Zd]||null}var Dx=[],au=-1;function Ao(l){return{current:l}}function jr(l){0>au||(l.current=Dx[au],Dx[au]=null,au--)}function Ir(l,u){au++,Dx[au]=l.current,l.current=u}var No={},Qn=Ao(No),bs=Ao(!1),Sl=No;function ou(l,u){var f=l.type.contextTypes;if(!f)return No;var y=l.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===u)return y.__reactInternalMemoizedMaskedChildContext;var b={},N;for(N in f)b[N]=u[N];return y&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=b),b}function ws(l){return l=l.childContextTypes,l!=null}function Vf(){jr(bs),jr(Qn)}function r_(l,u,f){if(Qn.current!==No)throw Error(t(168));Ir(Qn,u),Ir(bs,f)}function n_(l,u,f){var y=l.stateNode;if(u=u.childContextTypes,typeof y.getChildContext!="function")return f;y=y.getChildContext();for(var b in y)if(!(b in u))throw Error(t(108,_e(l)||"Unknown",b));return Ne({},f,y)}function $f(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||No,Sl=Qn.current,Ir(Qn,l),Ir(bs,bs.current),!0}function s_(l,u,f){var y=l.stateNode;if(!y)throw Error(t(169));f?(l=n_(l,u,Sl),y.__reactInternalMemoizedMergedChildContext=l,jr(bs),jr(Qn),Ir(Qn,l)):jr(bs),Ir(bs,f)}var Ra=null,Bf=!1,Fx=!1;function i_(l){Ra===null?Ra=[l]:Ra.push(l)}function Cj(l){Bf=!0,i_(l)}function ko(){if(!Fx&&Ra!==null){Fx=!0;var l=0,u=er;try{var f=Ra;for(er=1;l<f.length;l++){var y=f[l];do y=y(!0);while(y!==null)}Ra=null,Bf=!1}catch(b){throw Ra!==null&&(Ra=Ra.slice(l+1)),$e(Wt,ko),b}finally{er=u,Fx=!1}}return null}var lu=[],cu=0,Uf=null,zf=0,ni=[],si=0,Cl=null,Da=1,Fa="";function Il(l,u){lu[cu++]=zf,lu[cu++]=Uf,Uf=l,zf=u}function a_(l,u,f){ni[si++]=Da,ni[si++]=Fa,ni[si++]=Cl,Cl=l;var y=Da;l=Fa;var b=32-kr(y)-1;y&=~(1<<b),f+=1;var N=32-kr(u)+b;if(30<N){var B=b-b%5;N=(y&(1<<B)-1).toString(32),y>>=B,b-=B,Da=1<<32-kr(u)+b|f<<b|y,Fa=N+l}else Da=1<<N|f<<b|y,Fa=l}function Ox(l){l.return!==null&&(Il(l,1),a_(l,1,0))}function Lx(l){for(;l===Uf;)Uf=lu[--cu],lu[cu]=null,zf=lu[--cu],lu[cu]=null;for(;l===Cl;)Cl=ni[--si],ni[si]=null,Fa=ni[--si],ni[si]=null,Da=ni[--si],ni[si]=null}var Vs=null,$s=null,Mr=!1,Ni=null;function o_(l,u){var f=li(5,null,null,0);f.elementType="DELETED",f.stateNode=u,f.return=l,u=l.deletions,u===null?(l.deletions=[f],l.flags|=16):u.push(f)}function l_(l,u){switch(l.tag){case 5:var f=l.type;return u=u.nodeType!==1||f.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(l.stateNode=u,Vs=l,$s=To(u.firstChild),!0):!1;case 6:return u=l.pendingProps===""||u.nodeType!==3?null:u,u!==null?(l.stateNode=u,Vs=l,$s=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(f=Cl!==null?{id:Da,overflow:Fa}:null,l.memoizedState={dehydrated:u,treeContext:f,retryLane:1073741824},f=li(18,null,null,0),f.stateNode=u,f.return=l,l.child=f,Vs=l,$s=null,!0):!1;default:return!1}}function Mx(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Vx(l){if(Mr){var u=$s;if(u){var f=u;if(!l_(l,u)){if(Mx(l))throw Error(t(418));u=To(f.nextSibling);var y=Vs;u&&l_(l,u)?o_(y,f):(l.flags=l.flags&-4097|2,Mr=!1,Vs=l)}}else{if(Mx(l))throw Error(t(418));l.flags=l.flags&-4097|2,Mr=!1,Vs=l}}}function c_(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Vs=l}function Hf(l){if(l!==Vs)return!1;if(!Mr)return c_(l),Mr=!0,!1;var u;if((u=l.tag!==3)&&!(u=l.tag!==5)&&(u=l.type,u=u!=="head"&&u!=="body"&&!Ix(l.type,l.memoizedProps)),u&&(u=$s)){if(Mx(l))throw u_(),Error(t(418));for(;u;)o_(l,u),u=To(u.nextSibling)}if(c_(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(t(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"){if(u===0){$s=To(l.nextSibling);break e}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++}l=l.nextSibling}$s=null}}else $s=Vs?To(l.stateNode.nextSibling):null;return!0}function u_(){for(var l=$s;l;)l=To(l.nextSibling)}function uu(){$s=Vs=null,Mr=!1}function $x(l){Ni===null?Ni=[l]:Ni.push(l)}var Ij=L.ReactCurrentBatchConfig;function t0(l,u,f){if(l=f.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var y=f.stateNode}if(!y)throw Error(t(147,l));var b=y,N=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===N?u.ref:(u=function(B){var re=b.refs;B===null?delete re[N]:re[N]=B},u._stringRef=N,u)}if(typeof l!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,l))}return l}function Wf(l,u){throw l=Object.prototype.toString.call(u),Error(t(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function d_(l){var u=l._init;return u(l._payload)}function h_(l){function u(ye,he){if(l){var ve=ye.deletions;ve===null?(ye.deletions=[he],ye.flags|=16):ve.push(he)}}function f(ye,he){if(!l)return null;for(;he!==null;)u(ye,he),he=he.sibling;return null}function y(ye,he){for(ye=new Map;he!==null;)he.key!==null?ye.set(he.key,he):ye.set(he.index,he),he=he.sibling;return ye}function b(ye,he){return ye=Fo(ye,he),ye.index=0,ye.sibling=null,ye}function N(ye,he,ve){return ye.index=ve,l?(ve=ye.alternate,ve!==null?(ve=ve.index,ve<he?(ye.flags|=2,he):ve):(ye.flags|=2,he)):(ye.flags|=1048576,he)}function B(ye){return l&&ye.alternate===null&&(ye.flags|=2),ye}function re(ye,he,ve,Je){return he===null||he.tag!==6?(he=Py(ve,ye.mode,Je),he.return=ye,he):(he=b(he,ve),he.return=ye,he)}function ce(ye,he,ve,Je){var Tt=ve.type;return Tt===S?qe(ye,he,ve.props.children,Je,ve.key):he!==null&&(he.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===Fe&&d_(Tt)===he.type)?(Je=b(he,ve.props),Je.ref=t0(ye,he,ve),Je.return=ye,Je):(Je=mp(ve.type,ve.key,ve.props,null,ye.mode,Je),Je.ref=t0(ye,he,ve),Je.return=ye,Je)}function be(ye,he,ve,Je){return he===null||he.tag!==4||he.stateNode.containerInfo!==ve.containerInfo||he.stateNode.implementation!==ve.implementation?(he=jy(ve,ye.mode,Je),he.return=ye,he):(he=b(he,ve.children||[]),he.return=ye,he)}function qe(ye,he,ve,Je,Tt){return he===null||he.tag!==7?(he=Ml(ve,ye.mode,Je,Tt),he.return=ye,he):(he=b(he,ve),he.return=ye,he)}function Ke(ye,he,ve){if(typeof he=="string"&&he!==""||typeof he=="number")return he=Py(""+he,ye.mode,ve),he.return=ye,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case K:return ve=mp(he.type,he.key,he.props,null,ye.mode,ve),ve.ref=t0(ye,null,he),ve.return=ye,ve;case H:return he=jy(he,ye.mode,ve),he.return=ye,he;case Fe:var Je=he._init;return Ke(ye,Je(he._payload),ve)}if(He(he)||Te(he))return he=Ml(he,ye.mode,ve,null),he.return=ye,he;Wf(ye,he)}return null}function We(ye,he,ve,Je){var Tt=he!==null?he.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number")return Tt!==null?null:re(ye,he,""+ve,Je);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case K:return ve.key===Tt?ce(ye,he,ve,Je):null;case H:return ve.key===Tt?be(ye,he,ve,Je):null;case Fe:return Tt=ve._init,We(ye,he,Tt(ve._payload),Je)}if(He(ve)||Te(ve))return Tt!==null?null:qe(ye,he,ve,Je,null);Wf(ye,ve)}return null}function mt(ye,he,ve,Je,Tt){if(typeof Je=="string"&&Je!==""||typeof Je=="number")return ye=ye.get(ve)||null,re(he,ye,""+Je,Tt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case K:return ye=ye.get(Je.key===null?ve:Je.key)||null,ce(he,ye,Je,Tt);case H:return ye=ye.get(Je.key===null?ve:Je.key)||null,be(he,ye,Je,Tt);case Fe:var Dt=Je._init;return mt(ye,he,ve,Dt(Je._payload),Tt)}if(He(Je)||Te(Je))return ye=ye.get(ve)||null,qe(he,ye,Je,Tt,null);Wf(he,Je)}return null}function bt(ye,he,ve,Je){for(var Tt=null,Dt=null,Ft=he,Vt=he=0,kn=null;Ft!==null&&Vt<ve.length;Vt++){Ft.index>Vt?(kn=Ft,Ft=null):kn=Ft.sibling;var ar=We(ye,Ft,ve[Vt],Je);if(ar===null){Ft===null&&(Ft=kn);break}l&&Ft&&ar.alternate===null&&u(ye,Ft),he=N(ar,he,Vt),Dt===null?Tt=ar:Dt.sibling=ar,Dt=ar,Ft=kn}if(Vt===ve.length)return f(ye,Ft),Mr&&Il(ye,Vt),Tt;if(Ft===null){for(;Vt<ve.length;Vt++)Ft=Ke(ye,ve[Vt],Je),Ft!==null&&(he=N(Ft,he,Vt),Dt===null?Tt=Ft:Dt.sibling=Ft,Dt=Ft);return Mr&&Il(ye,Vt),Tt}for(Ft=y(ye,Ft);Vt<ve.length;Vt++)kn=mt(Ft,ye,Vt,ve[Vt],Je),kn!==null&&(l&&kn.alternate!==null&&Ft.delete(kn.key===null?Vt:kn.key),he=N(kn,he,Vt),Dt===null?Tt=kn:Dt.sibling=kn,Dt=kn);return l&&Ft.forEach(function(Oo){return u(ye,Oo)}),Mr&&Il(ye,Vt),Tt}function _t(ye,he,ve,Je){var Tt=Te(ve);if(typeof Tt!="function")throw Error(t(150));if(ve=Tt.call(ve),ve==null)throw Error(t(151));for(var Dt=Tt=null,Ft=he,Vt=he=0,kn=null,ar=ve.next();Ft!==null&&!ar.done;Vt++,ar=ve.next()){Ft.index>Vt?(kn=Ft,Ft=null):kn=Ft.sibling;var Oo=We(ye,Ft,ar.value,Je);if(Oo===null){Ft===null&&(Ft=kn);break}l&&Ft&&Oo.alternate===null&&u(ye,Ft),he=N(Oo,he,Vt),Dt===null?Tt=Oo:Dt.sibling=Oo,Dt=Oo,Ft=kn}if(ar.done)return f(ye,Ft),Mr&&Il(ye,Vt),Tt;if(Ft===null){for(;!ar.done;Vt++,ar=ve.next())ar=Ke(ye,ar.value,Je),ar!==null&&(he=N(ar,he,Vt),Dt===null?Tt=ar:Dt.sibling=ar,Dt=ar);return Mr&&Il(ye,Vt),Tt}for(Ft=y(ye,Ft);!ar.done;Vt++,ar=ve.next())ar=mt(Ft,ye,Vt,ar.value,Je),ar!==null&&(l&&ar.alternate!==null&&Ft.delete(ar.key===null?Vt:ar.key),he=N(ar,he,Vt),Dt===null?Tt=ar:Dt.sibling=ar,Dt=ar);return l&&Ft.forEach(function(cR){return u(ye,cR)}),Mr&&Il(ye,Vt),Tt}function tn(ye,he,ve,Je){if(typeof ve=="object"&&ve!==null&&ve.type===S&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case K:e:{for(var Tt=ve.key,Dt=he;Dt!==null;){if(Dt.key===Tt){if(Tt=ve.type,Tt===S){if(Dt.tag===7){f(ye,Dt.sibling),he=b(Dt,ve.props.children),he.return=ye,ye=he;break e}}else if(Dt.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===Fe&&d_(Tt)===Dt.type){f(ye,Dt.sibling),he=b(Dt,ve.props),he.ref=t0(ye,Dt,ve),he.return=ye,ye=he;break e}f(ye,Dt);break}else u(ye,Dt);Dt=Dt.sibling}ve.type===S?(he=Ml(ve.props.children,ye.mode,Je,ve.key),he.return=ye,ye=he):(Je=mp(ve.type,ve.key,ve.props,null,ye.mode,Je),Je.ref=t0(ye,he,ve),Je.return=ye,ye=Je)}return B(ye);case H:e:{for(Dt=ve.key;he!==null;){if(he.key===Dt)if(he.tag===4&&he.stateNode.containerInfo===ve.containerInfo&&he.stateNode.implementation===ve.implementation){f(ye,he.sibling),he=b(he,ve.children||[]),he.return=ye,ye=he;break e}else{f(ye,he);break}else u(ye,he);he=he.sibling}he=jy(ve,ye.mode,Je),he.return=ye,ye=he}return B(ye);case Fe:return Dt=ve._init,tn(ye,he,Dt(ve._payload),Je)}if(He(ve))return bt(ye,he,ve,Je);if(Te(ve))return _t(ye,he,ve,Je);Wf(ye,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"?(ve=""+ve,he!==null&&he.tag===6?(f(ye,he.sibling),he=b(he,ve),he.return=ye,ye=he):(f(ye,he),he=Py(ve,ye.mode,Je),he.return=ye,ye=he),B(ye)):f(ye,he)}return tn}var du=h_(!0),f_=h_(!1),qf=Ao(null),Gf=null,hu=null,Bx=null;function Ux(){Bx=hu=Gf=null}function zx(l){var u=qf.current;jr(qf),l._currentValue=u}function Hx(l,u,f){for(;l!==null;){var y=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),l===f)break;l=l.return}}function fu(l,u){Gf=l,Bx=hu=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&u)!==0&&(_s=!0),l.firstContext=null)}function ii(l){var u=l._currentValue;if(Bx!==l)if(l={context:l,memoizedValue:u,next:null},hu===null){if(Gf===null)throw Error(t(308));hu=l,Gf.dependencies={lanes:0,firstContext:l}}else hu=hu.next=l;return u}var Pl=null;function Wx(l){Pl===null?Pl=[l]:Pl.push(l)}function p_(l,u,f,y){var b=u.interleaved;return b===null?(f.next=f,Wx(u)):(f.next=b.next,b.next=f),u.interleaved=f,Oa(l,y)}function Oa(l,u){l.lanes|=u;var f=l.alternate;for(f!==null&&(f.lanes|=u),f=l,l=l.return;l!==null;)l.childLanes|=u,f=l.alternate,f!==null&&(f.childLanes|=u),f=l,l=l.return;return f.tag===3?f.stateNode:null}var So=!1;function qx(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function m_(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function La(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function Co(l,u,f){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(sr&2)!==0){var b=y.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),y.pending=u,Oa(l,f)}return b=y.interleaved,b===null?(u.next=u,Wx(y)):(u.next=b.next,b.next=u),y.interleaved=u,Oa(l,f)}function Kf(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194240)!==0)){var y=u.lanes;y&=l.pendingLanes,f|=y,u.lanes=f,yo(l,f)}}function g_(l,u){var f=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,f===y)){var b=null,N=null;if(f=f.firstBaseUpdate,f!==null){do{var B={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};N===null?b=N=B:N=N.next=B,f=f.next}while(f!==null);N===null?b=N=u:N=N.next=u}else b=N=u;f={baseState:y.baseState,firstBaseUpdate:b,lastBaseUpdate:N,shared:y.shared,effects:y.effects},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}function Yf(l,u,f,y){var b=l.updateQueue;So=!1;var N=b.firstBaseUpdate,B=b.lastBaseUpdate,re=b.shared.pending;if(re!==null){b.shared.pending=null;var ce=re,be=ce.next;ce.next=null,B===null?N=be:B.next=be,B=ce;var qe=l.alternate;qe!==null&&(qe=qe.updateQueue,re=qe.lastBaseUpdate,re!==B&&(re===null?qe.firstBaseUpdate=be:re.next=be,qe.lastBaseUpdate=ce))}if(N!==null){var Ke=b.baseState;B=0,qe=be=ce=null,re=N;do{var We=re.lane,mt=re.eventTime;if((y&We)===We){qe!==null&&(qe=qe.next={eventTime:mt,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var bt=l,_t=re;switch(We=u,mt=f,_t.tag){case 1:if(bt=_t.payload,typeof bt=="function"){Ke=bt.call(mt,Ke,We);break e}Ke=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=_t.payload,We=typeof bt=="function"?bt.call(mt,Ke,We):bt,We==null)break e;Ke=Ne({},Ke,We);break e;case 2:So=!0}}re.callback!==null&&re.lane!==0&&(l.flags|=64,We=b.effects,We===null?b.effects=[re]:We.push(re))}else mt={eventTime:mt,lane:We,tag:re.tag,payload:re.payload,callback:re.callback,next:null},qe===null?(be=qe=mt,ce=Ke):qe=qe.next=mt,B|=We;if(re=re.next,re===null){if(re=b.shared.pending,re===null)break;We=re,re=We.next,We.next=null,b.lastBaseUpdate=We,b.shared.pending=null}}while(!0);if(qe===null&&(ce=Ke),b.baseState=ce,b.firstBaseUpdate=be,b.lastBaseUpdate=qe,u=b.shared.interleaved,u!==null){b=u;do B|=b.lane,b=b.next;while(b!==u)}else N===null&&(b.shared.lanes=0);Dl|=B,l.lanes=B,l.memoizedState=Ke}}function x_(l,u,f){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var y=l[u],b=y.callback;if(b!==null){if(y.callback=null,y=f,typeof b!="function")throw Error(t(191,b));b.call(y)}}}var r0={},ra=Ao(r0),n0=Ao(r0),s0=Ao(r0);function jl(l){if(l===r0)throw Error(t(174));return l}function Gx(l,u){switch(Ir(s0,u),Ir(n0,l),Ir(ra,r0),l=u.nodeType,l){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:jt(null,"");break;default:l=l===8?u.parentNode:u,u=l.namespaceURI||null,l=l.tagName,u=jt(u,l)}jr(ra),Ir(ra,u)}function pu(){jr(ra),jr(n0),jr(s0)}function y_(l){jl(s0.current);var u=jl(ra.current),f=jt(u,l.type);u!==f&&(Ir(n0,l),Ir(ra,f))}function Kx(l){n0.current===l&&(jr(ra),jr(n0))}var Hr=Ao(0);function Xf(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Yx=[];function Xx(){for(var l=0;l<Yx.length;l++)Yx[l]._workInProgressVersionPrimary=null;Yx.length=0}var Qf=L.ReactCurrentDispatcher,Qx=L.ReactCurrentBatchConfig,Rl=0,Wr=null,gn=null,An=null,Jf=!1,i0=!1,a0=0,Pj=0;function Jn(){throw Error(t(321))}function Jx(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!Ai(l[f],u[f]))return!1;return!0}function Zx(l,u,f,y,b,N){if(Rl=N,Wr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Qf.current=l===null||l.memoizedState===null?Fj:Oj,l=f(y,b),i0){N=0;do{if(i0=!1,a0=0,25<=N)throw Error(t(301));N+=1,An=gn=null,u.updateQueue=null,Qf.current=Lj,l=f(y,b)}while(i0)}if(Qf.current=tp,u=gn!==null&&gn.next!==null,Rl=0,An=gn=Wr=null,Jf=!1,u)throw Error(t(300));return l}function ey(){var l=a0!==0;return a0=0,l}function na(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?Wr.memoizedState=An=l:An=An.next=l,An}function ai(){if(gn===null){var l=Wr.alternate;l=l!==null?l.memoizedState:null}else l=gn.next;var u=An===null?Wr.memoizedState:An.next;if(u!==null)An=u,gn=l;else{if(l===null)throw Error(t(310));gn=l,l={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},An===null?Wr.memoizedState=An=l:An=An.next=l}return An}function o0(l,u){return typeof u=="function"?u(l):u}function ty(l){var u=ai(),f=u.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=l;var y=gn,b=y.baseQueue,N=f.pending;if(N!==null){if(b!==null){var B=b.next;b.next=N.next,N.next=B}y.baseQueue=b=N,f.pending=null}if(b!==null){N=b.next,y=y.baseState;var re=B=null,ce=null,be=N;do{var qe=be.lane;if((Rl&qe)===qe)ce!==null&&(ce=ce.next={lane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),y=be.hasEagerState?be.eagerState:l(y,be.action);else{var Ke={lane:qe,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null};ce===null?(re=ce=Ke,B=y):ce=ce.next=Ke,Wr.lanes|=qe,Dl|=qe}be=be.next}while(be!==null&&be!==N);ce===null?B=y:ce.next=re,Ai(y,u.memoizedState)||(_s=!0),u.memoizedState=y,u.baseState=B,u.baseQueue=ce,f.lastRenderedState=y}if(l=f.interleaved,l!==null){b=l;do N=b.lane,Wr.lanes|=N,Dl|=N,b=b.next;while(b!==l)}else b===null&&(f.lanes=0);return[u.memoizedState,f.dispatch]}function ry(l){var u=ai(),f=u.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=l;var y=f.dispatch,b=f.pending,N=u.memoizedState;if(b!==null){f.pending=null;var B=b=b.next;do N=l(N,B.action),B=B.next;while(B!==b);Ai(N,u.memoizedState)||(_s=!0),u.memoizedState=N,u.baseQueue===null&&(u.baseState=N),f.lastRenderedState=N}return[N,y]}function v_(){}function b_(l,u){var f=Wr,y=ai(),b=u(),N=!Ai(y.memoizedState,b);if(N&&(y.memoizedState=b,_s=!0),y=y.queue,ny(E_.bind(null,f,y,l),[l]),y.getSnapshot!==u||N||An!==null&&An.memoizedState.tag&1){if(f.flags|=2048,l0(9,__.bind(null,f,y,b,u),void 0,null),Nn===null)throw Error(t(349));(Rl&30)!==0||w_(f,u,b)}return b}function w_(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=Wr.updateQueue,u===null?(u={lastEffect:null,stores:null},Wr.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function __(l,u,f,y){u.value=f,u.getSnapshot=y,T_(u)&&A_(l)}function E_(l,u,f){return f(function(){T_(u)&&A_(l)})}function T_(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!Ai(l,f)}catch{return!0}}function A_(l){var u=Oa(l,1);u!==null&&Ii(u,l,1,-1)}function N_(l){var u=na();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o0,lastRenderedState:l},u.queue=l,l=l.dispatch=Dj.bind(null,Wr,l),[u.memoizedState,l]}function l0(l,u,f,y){return l={tag:l,create:u,destroy:f,deps:y,next:null},u=Wr.updateQueue,u===null?(u={lastEffect:null,stores:null},Wr.updateQueue=u,u.lastEffect=l.next=l):(f=u.lastEffect,f===null?u.lastEffect=l.next=l:(y=f.next,f.next=l,l.next=y,u.lastEffect=l)),l}function k_(){return ai().memoizedState}function Zf(l,u,f,y){var b=na();Wr.flags|=l,b.memoizedState=l0(1|u,f,void 0,y===void 0?null:y)}function ep(l,u,f,y){var b=ai();y=y===void 0?null:y;var N=void 0;if(gn!==null){var B=gn.memoizedState;if(N=B.destroy,y!==null&&Jx(y,B.deps)){b.memoizedState=l0(u,f,N,y);return}}Wr.flags|=l,b.memoizedState=l0(1|u,f,N,y)}function S_(l,u){return Zf(8390656,8,l,u)}function ny(l,u){return ep(2048,8,l,u)}function C_(l,u){return ep(4,2,l,u)}function I_(l,u){return ep(4,4,l,u)}function P_(l,u){if(typeof u=="function")return l=l(),u(l),function(){u(null)};if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function j_(l,u,f){return f=f!=null?f.concat([l]):null,ep(4,4,P_.bind(null,u,l),f)}function sy(){}function R_(l,u){var f=ai();u=u===void 0?null:u;var y=f.memoizedState;return y!==null&&u!==null&&Jx(u,y[1])?y[0]:(f.memoizedState=[l,u],l)}function D_(l,u){var f=ai();u=u===void 0?null:u;var y=f.memoizedState;return y!==null&&u!==null&&Jx(u,y[1])?y[0]:(l=l(),f.memoizedState=[l,u],l)}function F_(l,u,f){return(Rl&21)===0?(l.baseState&&(l.baseState=!1,_s=!0),l.memoizedState=f):(Ai(f,u)||(f=_l(),Wr.lanes|=f,Dl|=f,l.baseState=!0),u)}function jj(l,u){var f=er;er=f!==0&&4>f?f:4,l(!0);var y=Qx.transition;Qx.transition={};try{l(!1),u()}finally{er=f,Qx.transition=y}}function O_(){return ai().memoizedState}function Rj(l,u,f){var y=Ro(l);if(f={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null},L_(l))M_(u,f);else if(f=p_(l,u,f,y),f!==null){var b=ds();Ii(f,l,y,b),V_(f,u,y)}}function Dj(l,u,f){var y=Ro(l),b={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null};if(L_(l))M_(u,b);else{var N=l.alternate;if(l.lanes===0&&(N===null||N.lanes===0)&&(N=u.lastRenderedReducer,N!==null))try{var B=u.lastRenderedState,re=N(B,f);if(b.hasEagerState=!0,b.eagerState=re,Ai(re,B)){var ce=u.interleaved;ce===null?(b.next=b,Wx(u)):(b.next=ce.next,ce.next=b),u.interleaved=b;return}}catch{}finally{}f=p_(l,u,b,y),f!==null&&(b=ds(),Ii(f,l,y,b),V_(f,u,y))}}function L_(l){var u=l.alternate;return l===Wr||u!==null&&u===Wr}function M_(l,u){i0=Jf=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function V_(l,u,f){if((f&4194240)!==0){var y=u.lanes;y&=l.pendingLanes,f|=y,u.lanes=f,yo(l,f)}}var tp={readContext:ii,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useInsertionEffect:Jn,useLayoutEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useMutableSource:Jn,useSyncExternalStore:Jn,useId:Jn,unstable_isNewReconciler:!1},Fj={readContext:ii,useCallback:function(l,u){return na().memoizedState=[l,u===void 0?null:u],l},useContext:ii,useEffect:S_,useImperativeHandle:function(l,u,f){return f=f!=null?f.concat([l]):null,Zf(4194308,4,P_.bind(null,u,l),f)},useLayoutEffect:function(l,u){return Zf(4194308,4,l,u)},useInsertionEffect:function(l,u){return Zf(4,2,l,u)},useMemo:function(l,u){var f=na();return u=u===void 0?null:u,l=l(),f.memoizedState=[l,u],l},useReducer:function(l,u,f){var y=na();return u=f!==void 0?f(u):u,y.memoizedState=y.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},y.queue=l,l=l.dispatch=Rj.bind(null,Wr,l),[y.memoizedState,l]},useRef:function(l){var u=na();return l={current:l},u.memoizedState=l},useState:N_,useDebugValue:sy,useDeferredValue:function(l){return na().memoizedState=l},useTransition:function(){var l=N_(!1),u=l[0];return l=jj.bind(null,l[1]),na().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,f){var y=Wr,b=na();if(Mr){if(f===void 0)throw Error(t(407));f=f()}else{if(f=u(),Nn===null)throw Error(t(349));(Rl&30)!==0||w_(y,u,f)}b.memoizedState=f;var N={value:f,getSnapshot:u};return b.queue=N,S_(E_.bind(null,y,N,l),[l]),y.flags|=2048,l0(9,__.bind(null,y,N,f,u),void 0,null),f},useId:function(){var l=na(),u=Nn.identifierPrefix;if(Mr){var f=Fa,y=Da;f=(y&~(1<<32-kr(y)-1)).toString(32)+f,u=":"+u+"R"+f,f=a0++,0<f&&(u+="H"+f.toString(32)),u+=":"}else f=Pj++,u=":"+u+"r"+f.toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},Oj={readContext:ii,useCallback:R_,useContext:ii,useEffect:ny,useImperativeHandle:j_,useInsertionEffect:C_,useLayoutEffect:I_,useMemo:D_,useReducer:ty,useRef:k_,useState:function(){return ty(o0)},useDebugValue:sy,useDeferredValue:function(l){var u=ai();return F_(u,gn.memoizedState,l)},useTransition:function(){var l=ty(o0)[0],u=ai().memoizedState;return[l,u]},useMutableSource:v_,useSyncExternalStore:b_,useId:O_,unstable_isNewReconciler:!1},Lj={readContext:ii,useCallback:R_,useContext:ii,useEffect:ny,useImperativeHandle:j_,useInsertionEffect:C_,useLayoutEffect:I_,useMemo:D_,useReducer:ry,useRef:k_,useState:function(){return ry(o0)},useDebugValue:sy,useDeferredValue:function(l){var u=ai();return gn===null?u.memoizedState=l:F_(u,gn.memoizedState,l)},useTransition:function(){var l=ry(o0)[0],u=ai().memoizedState;return[l,u]},useMutableSource:v_,useSyncExternalStore:b_,useId:O_,unstable_isNewReconciler:!1};function ki(l,u){if(l&&l.defaultProps){u=Ne({},u),l=l.defaultProps;for(var f in l)u[f]===void 0&&(u[f]=l[f]);return u}return u}function iy(l,u,f,y){u=l.memoizedState,f=f(y,u),f=f==null?u:Ne({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var rp={isMounted:function(l){return(l=l._reactInternals)?F(l)===l:!1},enqueueSetState:function(l,u,f){l=l._reactInternals;var y=ds(),b=Ro(l),N=La(y,b);N.payload=u,f!=null&&(N.callback=f),u=Co(l,N,b),u!==null&&(Ii(u,l,b,y),Kf(u,l,b))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var y=ds(),b=Ro(l),N=La(y,b);N.tag=1,N.payload=u,f!=null&&(N.callback=f),u=Co(l,N,b),u!==null&&(Ii(u,l,b,y),Kf(u,l,b))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=ds(),y=Ro(l),b=La(f,y);b.tag=2,u!=null&&(b.callback=u),u=Co(l,b,y),u!==null&&(Ii(u,l,y,f),Kf(u,l,y))}};function $_(l,u,f,y,b,N,B){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,N,B):u.prototype&&u.prototype.isPureReactComponent?!Kd(f,y)||!Kd(b,N):!0}function B_(l,u,f){var y=!1,b=No,N=u.contextType;return typeof N=="object"&&N!==null?N=ii(N):(b=ws(u)?Sl:Qn.current,y=u.contextTypes,N=(y=y!=null)?ou(l,b):No),u=new u(f,N),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=rp,l.stateNode=u,u._reactInternals=l,y&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=b,l.__reactInternalMemoizedMaskedChildContext=N),u}function U_(l,u,f,y){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,y),u.state!==l&&rp.enqueueReplaceState(u,u.state,null)}function ay(l,u,f,y){var b=l.stateNode;b.props=f,b.state=l.memoizedState,b.refs={},qx(l);var N=u.contextType;typeof N=="object"&&N!==null?b.context=ii(N):(N=ws(u)?Sl:Qn.current,b.context=ou(l,N)),b.state=l.memoizedState,N=u.getDerivedStateFromProps,typeof N=="function"&&(iy(l,u,N,f),b.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(u=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),u!==b.state&&rp.enqueueReplaceState(b,b.state,null),Yf(l,f,b,y),b.state=l.memoizedState),typeof b.componentDidMount=="function"&&(l.flags|=4194308)}function mu(l,u){try{var f="",y=u;do f+=ne(y),y=y.return;while(y);var b=f}catch(N){b=`
Error generating stack: `+N.message+`
`+N.stack}return{value:l,source:u,stack:b,digest:null}}function oy(l,u,f){return{value:l,source:null,stack:f??null,digest:u??null}}function ly(l,u){try{console.error(u.value)}catch(f){setTimeout(function(){throw f})}}var Mj=typeof WeakMap=="function"?WeakMap:Map;function z_(l,u,f){f=La(-1,f),f.tag=3,f.payload={element:null};var y=u.value;return f.callback=function(){cp||(cp=!0,Ey=y),ly(l,u)},f}function H_(l,u,f){f=La(-1,f),f.tag=3;var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var b=u.value;f.payload=function(){return y(b)},f.callback=function(){ly(l,u)}}var N=l.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(f.callback=function(){ly(l,u),typeof y!="function"&&(Po===null?Po=new Set([this]):Po.add(this));var B=u.stack;this.componentDidCatch(u.value,{componentStack:B!==null?B:""})}),f}function W_(l,u,f){var y=l.pingCache;if(y===null){y=l.pingCache=new Mj;var b=new Set;y.set(u,b)}else b=y.get(u),b===void 0&&(b=new Set,y.set(u,b));b.has(f)||(b.add(f),l=Jj.bind(null,l,u,f),u.then(l,l))}function q_(l){do{var u;if((u=l.tag===13)&&(u=l.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return l;l=l.return}while(l!==null);return null}function G_(l,u,f,y,b){return(l.mode&1)===0?(l===u?l.flags|=65536:(l.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(u=La(-1,1),u.tag=2,Co(f,u,1))),f.lanes|=1),l):(l.flags|=65536,l.lanes=b,l)}var Vj=L.ReactCurrentOwner,_s=!1;function us(l,u,f,y){u.child=l===null?f_(u,null,f,y):du(u,l.child,f,y)}function K_(l,u,f,y,b){f=f.render;var N=u.ref;return fu(u,b),y=Zx(l,u,f,y,N,b),f=ey(),l!==null&&!_s?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~b,Ma(l,u,b)):(Mr&&f&&Ox(u),u.flags|=1,us(l,u,y,b),u.child)}function Y_(l,u,f,y,b){if(l===null){var N=f.type;return typeof N=="function"&&!Iy(N)&&N.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(u.tag=15,u.type=N,X_(l,u,N,y,b)):(l=mp(f.type,null,y,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(N=l.child,(l.lanes&b)===0){var B=N.memoizedProps;if(f=f.compare,f=f!==null?f:Kd,f(B,y)&&l.ref===u.ref)return Ma(l,u,b)}return u.flags|=1,l=Fo(N,y),l.ref=u.ref,l.return=u,u.child=l}function X_(l,u,f,y,b){if(l!==null){var N=l.memoizedProps;if(Kd(N,y)&&l.ref===u.ref)if(_s=!1,u.pendingProps=y=N,(l.lanes&b)!==0)(l.flags&131072)!==0&&(_s=!0);else return u.lanes=l.lanes,Ma(l,u,b)}return cy(l,u,f,y,b)}function Q_(l,u,f){var y=u.pendingProps,b=y.children,N=l!==null?l.memoizedState:null;if(y.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ir(xu,Bs),Bs|=f;else{if((f&1073741824)===0)return l=N!==null?N.baseLanes|f:f,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,Ir(xu,Bs),Bs|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=N!==null?N.baseLanes:f,Ir(xu,Bs),Bs|=y}else N!==null?(y=N.baseLanes|f,u.memoizedState=null):y=f,Ir(xu,Bs),Bs|=y;return us(l,u,b,f),u.child}function J_(l,u){var f=u.ref;(l===null&&f!==null||l!==null&&l.ref!==f)&&(u.flags|=512,u.flags|=2097152)}function cy(l,u,f,y,b){var N=ws(f)?Sl:Qn.current;return N=ou(u,N),fu(u,b),f=Zx(l,u,f,y,N,b),y=ey(),l!==null&&!_s?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~b,Ma(l,u,b)):(Mr&&y&&Ox(u),u.flags|=1,us(l,u,f,b),u.child)}function Z_(l,u,f,y,b){if(ws(f)){var N=!0;$f(u)}else N=!1;if(fu(u,b),u.stateNode===null)sp(l,u),B_(u,f,y),ay(u,f,y,b),y=!0;else if(l===null){var B=u.stateNode,re=u.memoizedProps;B.props=re;var ce=B.context,be=f.contextType;typeof be=="object"&&be!==null?be=ii(be):(be=ws(f)?Sl:Qn.current,be=ou(u,be));var qe=f.getDerivedStateFromProps,Ke=typeof qe=="function"||typeof B.getSnapshotBeforeUpdate=="function";Ke||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(re!==y||ce!==be)&&U_(u,B,y,be),So=!1;var We=u.memoizedState;B.state=We,Yf(u,y,B,b),ce=u.memoizedState,re!==y||We!==ce||bs.current||So?(typeof qe=="function"&&(iy(u,f,qe,y),ce=u.memoizedState),(re=So||$_(u,f,re,y,We,ce,be))?(Ke||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(u.flags|=4194308)):(typeof B.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=ce),B.props=y,B.state=ce,B.context=be,y=re):(typeof B.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{B=u.stateNode,m_(l,u),re=u.memoizedProps,be=u.type===u.elementType?re:ki(u.type,re),B.props=be,Ke=u.pendingProps,We=B.context,ce=f.contextType,typeof ce=="object"&&ce!==null?ce=ii(ce):(ce=ws(f)?Sl:Qn.current,ce=ou(u,ce));var mt=f.getDerivedStateFromProps;(qe=typeof mt=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(re!==Ke||We!==ce)&&U_(u,B,y,ce),So=!1,We=u.memoizedState,B.state=We,Yf(u,y,B,b);var bt=u.memoizedState;re!==Ke||We!==bt||bs.current||So?(typeof mt=="function"&&(iy(u,f,mt,y),bt=u.memoizedState),(be=So||$_(u,f,be,y,We,bt,ce)||!1)?(qe||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(y,bt,ce),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(y,bt,ce)),typeof B.componentDidUpdate=="function"&&(u.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof B.componentDidUpdate!="function"||re===l.memoizedProps&&We===l.memoizedState||(u.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||re===l.memoizedProps&&We===l.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=bt),B.props=y,B.state=bt,B.context=ce,y=be):(typeof B.componentDidUpdate!="function"||re===l.memoizedProps&&We===l.memoizedState||(u.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||re===l.memoizedProps&&We===l.memoizedState||(u.flags|=1024),y=!1)}return uy(l,u,f,y,N,b)}function uy(l,u,f,y,b,N){J_(l,u);var B=(u.flags&128)!==0;if(!y&&!B)return b&&s_(u,f,!1),Ma(l,u,N);y=u.stateNode,Vj.current=u;var re=B&&typeof f.getDerivedStateFromError!="function"?null:y.render();return u.flags|=1,l!==null&&B?(u.child=du(u,l.child,null,N),u.child=du(u,null,re,N)):us(l,u,re,N),u.memoizedState=y.state,b&&s_(u,f,!0),u.child}function eE(l){var u=l.stateNode;u.pendingContext?r_(l,u.pendingContext,u.pendingContext!==u.context):u.context&&r_(l,u.context,!1),Gx(l,u.containerInfo)}function tE(l,u,f,y,b){return uu(),$x(b),u.flags|=256,us(l,u,f,y),u.child}var dy={dehydrated:null,treeContext:null,retryLane:0};function hy(l){return{baseLanes:l,cachePool:null,transitions:null}}function rE(l,u,f){var y=u.pendingProps,b=Hr.current,N=!1,B=(u.flags&128)!==0,re;if((re=B)||(re=l!==null&&l.memoizedState===null?!1:(b&2)!==0),re?(N=!0,u.flags&=-129):(l===null||l.memoizedState!==null)&&(b|=1),Ir(Hr,b&1),l===null)return Vx(u),l=u.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((u.mode&1)===0?u.lanes=1:l.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(B=y.children,l=y.fallback,N?(y=u.mode,N=u.child,B={mode:"hidden",children:B},(y&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=B):N=gp(B,y,0,null),l=Ml(l,y,f,null),N.return=u,l.return=u,N.sibling=l,u.child=N,u.child.memoizedState=hy(f),u.memoizedState=dy,l):fy(u,B));if(b=l.memoizedState,b!==null&&(re=b.dehydrated,re!==null))return $j(l,u,B,y,re,b,f);if(N){N=y.fallback,B=u.mode,b=l.child,re=b.sibling;var ce={mode:"hidden",children:y.children};return(B&1)===0&&u.child!==b?(y=u.child,y.childLanes=0,y.pendingProps=ce,u.deletions=null):(y=Fo(b,ce),y.subtreeFlags=b.subtreeFlags&14680064),re!==null?N=Fo(re,N):(N=Ml(N,B,f,null),N.flags|=2),N.return=u,y.return=u,y.sibling=N,u.child=y,y=N,N=u.child,B=l.child.memoizedState,B=B===null?hy(f):{baseLanes:B.baseLanes|f,cachePool:null,transitions:B.transitions},N.memoizedState=B,N.childLanes=l.childLanes&~f,u.memoizedState=dy,y}return N=l.child,l=N.sibling,y=Fo(N,{mode:"visible",children:y.children}),(u.mode&1)===0&&(y.lanes=f),y.return=u,y.sibling=null,l!==null&&(f=u.deletions,f===null?(u.deletions=[l],u.flags|=16):f.push(l)),u.child=y,u.memoizedState=null,y}function fy(l,u){return u=gp({mode:"visible",children:u},l.mode,0,null),u.return=l,l.child=u}function np(l,u,f,y){return y!==null&&$x(y),du(u,l.child,null,f),l=fy(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function $j(l,u,f,y,b,N,B){if(f)return u.flags&256?(u.flags&=-257,y=oy(Error(t(422))),np(l,u,B,y)):u.memoizedState!==null?(u.child=l.child,u.flags|=128,null):(N=y.fallback,b=u.mode,y=gp({mode:"visible",children:y.children},b,0,null),N=Ml(N,b,B,null),N.flags|=2,y.return=u,N.return=u,y.sibling=N,u.child=y,(u.mode&1)!==0&&du(u,l.child,null,B),u.child.memoizedState=hy(B),u.memoizedState=dy,N);if((u.mode&1)===0)return np(l,u,B,null);if(b.data==="$!"){if(y=b.nextSibling&&b.nextSibling.dataset,y)var re=y.dgst;return y=re,N=Error(t(419)),y=oy(N,y,void 0),np(l,u,B,y)}if(re=(B&l.childLanes)!==0,_s||re){if(y=Nn,y!==null){switch(B&-B){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(y.suspendedLanes|B))!==0?0:b,b!==0&&b!==N.retryLane&&(N.retryLane=b,Oa(l,b),Ii(y,l,b,-1))}return Cy(),y=oy(Error(t(421))),np(l,u,B,y)}return b.data==="$?"?(u.flags|=128,u.child=l.child,u=Zj.bind(null,l),b._reactRetry=u,null):(l=N.treeContext,$s=To(b.nextSibling),Vs=u,Mr=!0,Ni=null,l!==null&&(ni[si++]=Da,ni[si++]=Fa,ni[si++]=Cl,Da=l.id,Fa=l.overflow,Cl=u),u=fy(u,y.children),u.flags|=4096,u)}function nE(l,u,f){l.lanes|=u;var y=l.alternate;y!==null&&(y.lanes|=u),Hx(l.return,u,f)}function py(l,u,f,y,b){var N=l.memoizedState;N===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:f,tailMode:b}:(N.isBackwards=u,N.rendering=null,N.renderingStartTime=0,N.last=y,N.tail=f,N.tailMode=b)}function sE(l,u,f){var y=u.pendingProps,b=y.revealOrder,N=y.tail;if(us(l,u,y.children,f),y=Hr.current,(y&2)!==0)y=y&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&nE(l,f,u);else if(l.tag===19)nE(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}if(Ir(Hr,y),(u.mode&1)===0)u.memoizedState=null;else switch(b){case"forwards":for(f=u.child,b=null;f!==null;)l=f.alternate,l!==null&&Xf(l)===null&&(b=f),f=f.sibling;f=b,f===null?(b=u.child,u.child=null):(b=f.sibling,f.sibling=null),py(u,!1,b,f,N);break;case"backwards":for(f=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&Xf(l)===null){u.child=b;break}l=b.sibling,b.sibling=f,f=b,b=l}py(u,!0,f,null,N);break;case"together":py(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function sp(l,u){(u.mode&1)===0&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function Ma(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),Dl|=u.lanes,(f&u.childLanes)===0)return null;if(l!==null&&u.child!==l.child)throw Error(t(153));if(u.child!==null){for(l=u.child,f=Fo(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=Fo(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function Bj(l,u,f){switch(u.tag){case 3:eE(u),uu();break;case 5:y_(u);break;case 1:ws(u.type)&&$f(u);break;case 4:Gx(u,u.stateNode.containerInfo);break;case 10:var y=u.type._context,b=u.memoizedProps.value;Ir(qf,y._currentValue),y._currentValue=b;break;case 13:if(y=u.memoizedState,y!==null)return y.dehydrated!==null?(Ir(Hr,Hr.current&1),u.flags|=128,null):(f&u.child.childLanes)!==0?rE(l,u,f):(Ir(Hr,Hr.current&1),l=Ma(l,u,f),l!==null?l.sibling:null);Ir(Hr,Hr.current&1);break;case 19:if(y=(f&u.childLanes)!==0,(l.flags&128)!==0){if(y)return sE(l,u,f);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Ir(Hr,Hr.current),y)break;return null;case 22:case 23:return u.lanes=0,Q_(l,u,f)}return Ma(l,u,f)}var iE,my,aE,oE;iE=function(l,u){for(var f=u.child;f!==null;){if(f.tag===5||f.tag===6)l.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},my=function(){},aE=function(l,u,f,y){var b=l.memoizedProps;if(b!==y){l=u.stateNode,jl(ra.current);var N=null;switch(f){case"input":b=wt(l,b),y=wt(l,y),N=[];break;case"select":b=Ne({},b,{value:void 0}),y=Ne({},y,{value:void 0}),N=[];break;case"textarea":b=et(l,b),y=et(l,y),N=[];break;default:typeof b.onClick!="function"&&typeof y.onClick=="function"&&(l.onclick=Lf)}Ze(f,y);var B;f=null;for(be in b)if(!y.hasOwnProperty(be)&&b.hasOwnProperty(be)&&b[be]!=null)if(be==="style"){var re=b[be];for(B in re)re.hasOwnProperty(B)&&(f||(f={}),f[B]="")}else be!=="dangerouslySetInnerHTML"&&be!=="children"&&be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&be!=="autoFocus"&&(s.hasOwnProperty(be)?N||(N=[]):(N=N||[]).push(be,null));for(be in y){var ce=y[be];if(re=b?.[be],y.hasOwnProperty(be)&&ce!==re&&(ce!=null||re!=null))if(be==="style")if(re){for(B in re)!re.hasOwnProperty(B)||ce&&ce.hasOwnProperty(B)||(f||(f={}),f[B]="");for(B in ce)ce.hasOwnProperty(B)&&re[B]!==ce[B]&&(f||(f={}),f[B]=ce[B])}else f||(N||(N=[]),N.push(be,f)),f=ce;else be==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,re=re?re.__html:void 0,ce!=null&&re!==ce&&(N=N||[]).push(be,ce)):be==="children"?typeof ce!="string"&&typeof ce!="number"||(N=N||[]).push(be,""+ce):be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&(s.hasOwnProperty(be)?(ce!=null&&be==="onScroll"&&Pr("scroll",l),N||re===ce||(N=[])):(N=N||[]).push(be,ce))}f&&(N=N||[]).push("style",f);var be=N;(u.updateQueue=be)&&(u.flags|=4)}},oE=function(l,u,f,y){f!==y&&(u.flags|=4)};function c0(l,u){if(!Mr)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function Zn(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,y=0;if(u)for(var b=l.child;b!==null;)f|=b.lanes|b.childLanes,y|=b.subtreeFlags&14680064,y|=b.flags&14680064,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)f|=b.lanes|b.childLanes,y|=b.subtreeFlags,y|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=y,l.childLanes=f,u}function Uj(l,u,f){var y=u.pendingProps;switch(Lx(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(u),null;case 1:return ws(u.type)&&Vf(),Zn(u),null;case 3:return y=u.stateNode,pu(),jr(bs),jr(Qn),Xx(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(l===null||l.child===null)&&(Hf(u)?u.flags|=4:l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Ni!==null&&(Ny(Ni),Ni=null))),my(l,u),Zn(u),null;case 5:Kx(u);var b=jl(s0.current);if(f=u.type,l!==null&&u.stateNode!=null)aE(l,u,f,y,b),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!y){if(u.stateNode===null)throw Error(t(166));return Zn(u),null}if(l=jl(ra.current),Hf(u)){y=u.stateNode,f=u.type;var N=u.memoizedProps;switch(y[ta]=u,y[Zd]=N,l=(u.mode&1)!==0,f){case"dialog":Pr("cancel",y),Pr("close",y);break;case"iframe":case"object":case"embed":Pr("load",y);break;case"video":case"audio":for(b=0;b<Xd.length;b++)Pr(Xd[b],y);break;case"source":Pr("error",y);break;case"img":case"image":case"link":Pr("error",y),Pr("load",y);break;case"details":Pr("toggle",y);break;case"input":Yt(y,N),Pr("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!N.multiple},Pr("invalid",y);break;case"textarea":ct(y,N),Pr("invalid",y)}Ze(f,N),b=null;for(var B in N)if(N.hasOwnProperty(B)){var re=N[B];B==="children"?typeof re=="string"?y.textContent!==re&&(N.suppressHydrationWarning!==!0&&Of(y.textContent,re,l),b=["children",re]):typeof re=="number"&&y.textContent!==""+re&&(N.suppressHydrationWarning!==!0&&Of(y.textContent,re,l),b=["children",""+re]):s.hasOwnProperty(B)&&re!=null&&B==="onScroll"&&Pr("scroll",y)}switch(f){case"input":Qe(y),Xt(y,N,!0);break;case"textarea":Qe(y),St(y);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(y.onclick=Lf)}y=b,u.updateQueue=y,y!==null&&(u.flags|=4)}else{B=b.nodeType===9?b:b.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=ht(f)),l==="http://www.w3.org/1999/xhtml"?f==="script"?(l=B.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof y.is=="string"?l=B.createElement(f,{is:y.is}):(l=B.createElement(f),f==="select"&&(B=l,y.multiple?B.multiple=!0:y.size&&(B.size=y.size))):l=B.createElementNS(l,f),l[ta]=u,l[Zd]=y,iE(l,u,!1,!1),u.stateNode=l;e:{switch(B=vt(f,y),f){case"dialog":Pr("cancel",l),Pr("close",l),b=y;break;case"iframe":case"object":case"embed":Pr("load",l),b=y;break;case"video":case"audio":for(b=0;b<Xd.length;b++)Pr(Xd[b],l);b=y;break;case"source":Pr("error",l),b=y;break;case"img":case"image":case"link":Pr("error",l),Pr("load",l),b=y;break;case"details":Pr("toggle",l),b=y;break;case"input":Yt(l,y),b=wt(l,y),Pr("invalid",l);break;case"option":b=y;break;case"select":l._wrapperState={wasMultiple:!!y.multiple},b=Ne({},y,{value:void 0}),Pr("invalid",l);break;case"textarea":ct(l,y),b=et(l,y),Pr("invalid",l);break;default:b=y}Ze(f,b),re=b;for(N in re)if(re.hasOwnProperty(N)){var ce=re[N];N==="style"?Ie(l,ce):N==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,ce!=null&&gr(l,ce)):N==="children"?typeof ce=="string"?(f!=="textarea"||ce!=="")&&J(l,ce):typeof ce=="number"&&J(l,""+ce):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(s.hasOwnProperty(N)?ce!=null&&N==="onScroll"&&Pr("scroll",l):ce!=null&&V(l,N,ce,B))}switch(f){case"input":Qe(l),Xt(l,y,!1);break;case"textarea":Qe(l),St(l);break;case"option":y.value!=null&&l.setAttribute("value",""+De(y.value));break;case"select":l.multiple=!!y.multiple,N=y.value,N!=null?de(l,!!y.multiple,N,!1):y.defaultValue!=null&&de(l,!!y.multiple,y.defaultValue,!0);break;default:typeof b.onClick=="function"&&(l.onclick=Lf)}switch(f){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Zn(u),null;case 6:if(l&&u.stateNode!=null)oE(l,u,l.memoizedProps,y);else{if(typeof y!="string"&&u.stateNode===null)throw Error(t(166));if(f=jl(s0.current),jl(ra.current),Hf(u)){if(y=u.stateNode,f=u.memoizedProps,y[ta]=u,(N=y.nodeValue!==f)&&(l=Vs,l!==null))switch(l.tag){case 3:Of(y.nodeValue,f,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Of(y.nodeValue,f,(l.mode&1)!==0)}N&&(u.flags|=4)}else y=(f.nodeType===9?f:f.ownerDocument).createTextNode(y),y[ta]=u,u.stateNode=y}return Zn(u),null;case 13:if(jr(Hr),y=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Mr&&$s!==null&&(u.mode&1)!==0&&(u.flags&128)===0)u_(),uu(),u.flags|=98560,N=!1;else if(N=Hf(u),y!==null&&y.dehydrated!==null){if(l===null){if(!N)throw Error(t(318));if(N=u.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(t(317));N[ta]=u}else uu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Zn(u),N=!1}else Ni!==null&&(Ny(Ni),Ni=null),N=!0;if(!N)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=f,u):(y=y!==null,y!==(l!==null&&l.memoizedState!==null)&&y&&(u.child.flags|=8192,(u.mode&1)!==0&&(l===null||(Hr.current&1)!==0?xn===0&&(xn=3):Cy())),u.updateQueue!==null&&(u.flags|=4),Zn(u),null);case 4:return pu(),my(l,u),l===null&&Qd(u.stateNode.containerInfo),Zn(u),null;case 10:return zx(u.type._context),Zn(u),null;case 17:return ws(u.type)&&Vf(),Zn(u),null;case 19:if(jr(Hr),N=u.memoizedState,N===null)return Zn(u),null;if(y=(u.flags&128)!==0,B=N.rendering,B===null)if(y)c0(N,!1);else{if(xn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(B=Xf(l),B!==null){for(u.flags|=128,c0(N,!1),y=B.updateQueue,y!==null&&(u.updateQueue=y,u.flags|=4),u.subtreeFlags=0,y=f,f=u.child;f!==null;)N=f,l=y,N.flags&=14680066,B=N.alternate,B===null?(N.childLanes=0,N.lanes=l,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=B.childLanes,N.lanes=B.lanes,N.child=B.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=B.memoizedProps,N.memoizedState=B.memoizedState,N.updateQueue=B.updateQueue,N.type=B.type,l=B.dependencies,N.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),f=f.sibling;return Ir(Hr,Hr.current&1|2),u.child}l=l.sibling}N.tail!==null&&Be()>yu&&(u.flags|=128,y=!0,c0(N,!1),u.lanes=4194304)}else{if(!y)if(l=Xf(B),l!==null){if(u.flags|=128,y=!0,f=l.updateQueue,f!==null&&(u.updateQueue=f,u.flags|=4),c0(N,!0),N.tail===null&&N.tailMode==="hidden"&&!B.alternate&&!Mr)return Zn(u),null}else 2*Be()-N.renderingStartTime>yu&&f!==1073741824&&(u.flags|=128,y=!0,c0(N,!1),u.lanes=4194304);N.isBackwards?(B.sibling=u.child,u.child=B):(f=N.last,f!==null?f.sibling=B:u.child=B,N.last=B)}return N.tail!==null?(u=N.tail,N.rendering=u,N.tail=u.sibling,N.renderingStartTime=Be(),u.sibling=null,f=Hr.current,Ir(Hr,y?f&1|2:f&1),u):(Zn(u),null);case 22:case 23:return Sy(),y=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==y&&(u.flags|=8192),y&&(u.mode&1)!==0?(Bs&1073741824)!==0&&(Zn(u),u.subtreeFlags&6&&(u.flags|=8192)):Zn(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function zj(l,u){switch(Lx(u),u.tag){case 1:return ws(u.type)&&Vf(),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return pu(),jr(bs),jr(Qn),Xx(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 5:return Kx(u),null;case 13:if(jr(Hr),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(t(340));uu()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return jr(Hr),null;case 4:return pu(),null;case 10:return zx(u.type._context),null;case 22:case 23:return Sy(),null;case 24:return null;default:return null}}var ip=!1,es=!1,Hj=typeof WeakSet=="function"?WeakSet:Set,yt=null;function gu(l,u){var f=l.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(y){Xr(l,u,y)}else f.current=null}function gy(l,u,f){try{f()}catch(y){Xr(l,u,y)}}var lE=!1;function Wj(l,u){if(Sx=wo,l=$w(),bx(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var y=f.getSelection&&f.getSelection();if(y&&y.rangeCount!==0){f=y.anchorNode;var b=y.anchorOffset,N=y.focusNode;y=y.focusOffset;try{f.nodeType,N.nodeType}catch{f=null;break e}var B=0,re=-1,ce=-1,be=0,qe=0,Ke=l,We=null;t:for(;;){for(var mt;Ke!==f||b!==0&&Ke.nodeType!==3||(re=B+b),Ke!==N||y!==0&&Ke.nodeType!==3||(ce=B+y),Ke.nodeType===3&&(B+=Ke.nodeValue.length),(mt=Ke.firstChild)!==null;)We=Ke,Ke=mt;for(;;){if(Ke===l)break t;if(We===f&&++be===b&&(re=B),We===N&&++qe===y&&(ce=B),(mt=Ke.nextSibling)!==null)break;Ke=We,We=Ke.parentNode}Ke=mt}f=re===-1||ce===-1?null:{start:re,end:ce}}else f=null}f=f||{start:0,end:0}}else f=null;for(Cx={focusedElem:l,selectionRange:f},wo=!1,yt=u;yt!==null;)if(u=yt,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,yt=l;else for(;yt!==null;){u=yt;try{var bt=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(bt!==null){var _t=bt.memoizedProps,tn=bt.memoizedState,ye=u.stateNode,he=ye.getSnapshotBeforeUpdate(u.elementType===u.type?_t:ki(u.type,_t),tn);ye.__reactInternalSnapshotBeforeUpdate=he}break;case 3:var ve=u.stateNode.containerInfo;ve.nodeType===1?ve.textContent="":ve.nodeType===9&&ve.documentElement&&ve.removeChild(ve.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Je){Xr(u,u.return,Je)}if(l=u.sibling,l!==null){l.return=u.return,yt=l;break}yt=u.return}return bt=lE,lE=!1,bt}function u0(l,u,f){var y=u.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var b=y=y.next;do{if((b.tag&l)===l){var N=b.destroy;b.destroy=void 0,N!==void 0&&gy(u,f,N)}b=b.next}while(b!==y)}}function ap(l,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&l)===l){var y=f.create;f.destroy=y()}f=f.next}while(f!==u)}}function xy(l){var u=l.ref;if(u!==null){var f=l.stateNode;switch(l.tag){case 5:l=f;break;default:l=f}typeof u=="function"?u(l):u.current=l}}function cE(l){var u=l.alternate;u!==null&&(l.alternate=null,cE(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&(delete u[ta],delete u[Zd],delete u[Rx],delete u[kj],delete u[Sj])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function uE(l){return l.tag===5||l.tag===3||l.tag===4}function dE(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||uE(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function yy(l,u,f){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?f.nodeType===8?f.parentNode.insertBefore(l,u):f.insertBefore(l,u):(f.nodeType===8?(u=f.parentNode,u.insertBefore(l,f)):(u=f,u.appendChild(l)),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Lf));else if(y!==4&&(l=l.child,l!==null))for(yy(l,u,f),l=l.sibling;l!==null;)yy(l,u,f),l=l.sibling}function vy(l,u,f){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(y!==4&&(l=l.child,l!==null))for(vy(l,u,f),l=l.sibling;l!==null;)vy(l,u,f),l=l.sibling}var On=null,Si=!1;function Io(l,u,f){for(f=f.child;f!==null;)hE(l,u,f),f=f.sibling}function hE(l,u,f){if(zr&&typeof zr.onCommitFiberUnmount=="function")try{zr.onCommitFiberUnmount(Xn,f)}catch{}switch(f.tag){case 5:es||gu(f,u);case 6:var y=On,b=Si;On=null,Io(l,u,f),On=y,Si=b,On!==null&&(Si?(l=On,f=f.stateNode,l.nodeType===8?l.parentNode.removeChild(f):l.removeChild(f)):On.removeChild(f.stateNode));break;case 18:On!==null&&(Si?(l=On,f=f.stateNode,l.nodeType===8?jx(l.parentNode,f):l.nodeType===1&&jx(l,f),Ei(l)):jx(On,f.stateNode));break;case 4:y=On,b=Si,On=f.stateNode.containerInfo,Si=!0,Io(l,u,f),On=y,Si=b;break;case 0:case 11:case 14:case 15:if(!es&&(y=f.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){b=y=y.next;do{var N=b,B=N.destroy;N=N.tag,B!==void 0&&((N&2)!==0||(N&4)!==0)&&gy(f,u,B),b=b.next}while(b!==y)}Io(l,u,f);break;case 1:if(!es&&(gu(f,u),y=f.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=f.memoizedProps,y.state=f.memoizedState,y.componentWillUnmount()}catch(re){Xr(f,u,re)}Io(l,u,f);break;case 21:Io(l,u,f);break;case 22:f.mode&1?(es=(y=es)||f.memoizedState!==null,Io(l,u,f),es=y):Io(l,u,f);break;default:Io(l,u,f)}}function fE(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var f=l.stateNode;f===null&&(f=l.stateNode=new Hj),u.forEach(function(y){var b=eR.bind(null,l,y);f.has(y)||(f.add(y),y.then(b,b))})}}function Ci(l,u){var f=u.deletions;if(f!==null)for(var y=0;y<f.length;y++){var b=f[y];try{var N=l,B=u,re=B;e:for(;re!==null;){switch(re.tag){case 5:On=re.stateNode,Si=!1;break e;case 3:On=re.stateNode.containerInfo,Si=!0;break e;case 4:On=re.stateNode.containerInfo,Si=!0;break e}re=re.return}if(On===null)throw Error(t(160));hE(N,B,b),On=null,Si=!1;var ce=b.alternate;ce!==null&&(ce.return=null),b.return=null}catch(be){Xr(b,u,be)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)pE(u,l),u=u.sibling}function pE(l,u){var f=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Ci(u,l),sa(l),y&4){try{u0(3,l,l.return),ap(3,l)}catch(_t){Xr(l,l.return,_t)}try{u0(5,l,l.return)}catch(_t){Xr(l,l.return,_t)}}break;case 1:Ci(u,l),sa(l),y&512&&f!==null&&gu(f,f.return);break;case 5:if(Ci(u,l),sa(l),y&512&&f!==null&&gu(f,f.return),l.flags&32){var b=l.stateNode;try{J(b,"")}catch(_t){Xr(l,l.return,_t)}}if(y&4&&(b=l.stateNode,b!=null)){var N=l.memoizedProps,B=f!==null?f.memoizedProps:N,re=l.type,ce=l.updateQueue;if(l.updateQueue=null,ce!==null)try{re==="input"&&N.type==="radio"&&N.name!=null&&kt(b,N),vt(re,B);var be=vt(re,N);for(B=0;B<ce.length;B+=2){var qe=ce[B],Ke=ce[B+1];qe==="style"?Ie(b,Ke):qe==="dangerouslySetInnerHTML"?gr(b,Ke):qe==="children"?J(b,Ke):V(b,qe,Ke,be)}switch(re){case"input":Oe(b,N);break;case"textarea":pt(b,N);break;case"select":var We=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!N.multiple;var mt=N.value;mt!=null?de(b,!!N.multiple,mt,!1):We!==!!N.multiple&&(N.defaultValue!=null?de(b,!!N.multiple,N.defaultValue,!0):de(b,!!N.multiple,N.multiple?[]:"",!1))}b[Zd]=N}catch(_t){Xr(l,l.return,_t)}}break;case 6:if(Ci(u,l),sa(l),y&4){if(l.stateNode===null)throw Error(t(162));b=l.stateNode,N=l.memoizedProps;try{b.nodeValue=N}catch(_t){Xr(l,l.return,_t)}}break;case 3:if(Ci(u,l),sa(l),y&4&&f!==null&&f.memoizedState.isDehydrated)try{Ei(u.containerInfo)}catch(_t){Xr(l,l.return,_t)}break;case 4:Ci(u,l),sa(l);break;case 13:Ci(u,l),sa(l),b=l.child,b.flags&8192&&(N=b.memoizedState!==null,b.stateNode.isHidden=N,!N||b.alternate!==null&&b.alternate.memoizedState!==null||(_y=Be())),y&4&&fE(l);break;case 22:if(qe=f!==null&&f.memoizedState!==null,l.mode&1?(es=(be=es)||qe,Ci(u,l),es=be):Ci(u,l),sa(l),y&8192){if(be=l.memoizedState!==null,(l.stateNode.isHidden=be)&&!qe&&(l.mode&1)!==0)for(yt=l,qe=l.child;qe!==null;){for(Ke=yt=qe;yt!==null;){switch(We=yt,mt=We.child,We.tag){case 0:case 11:case 14:case 15:u0(4,We,We.return);break;case 1:gu(We,We.return);var bt=We.stateNode;if(typeof bt.componentWillUnmount=="function"){y=We,f=We.return;try{u=y,bt.props=u.memoizedProps,bt.state=u.memoizedState,bt.componentWillUnmount()}catch(_t){Xr(y,f,_t)}}break;case 5:gu(We,We.return);break;case 22:if(We.memoizedState!==null){xE(Ke);continue}}mt!==null?(mt.return=We,yt=mt):xE(Ke)}qe=qe.sibling}e:for(qe=null,Ke=l;;){if(Ke.tag===5){if(qe===null){qe=Ke;try{b=Ke.stateNode,be?(N=b.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(re=Ke.stateNode,ce=Ke.memoizedProps.style,B=ce!=null&&ce.hasOwnProperty("display")?ce.display:null,re.style.display=fe("display",B))}catch(_t){Xr(l,l.return,_t)}}}else if(Ke.tag===6){if(qe===null)try{Ke.stateNode.nodeValue=be?"":Ke.memoizedProps}catch(_t){Xr(l,l.return,_t)}}else if((Ke.tag!==22&&Ke.tag!==23||Ke.memoizedState===null||Ke===l)&&Ke.child!==null){Ke.child.return=Ke,Ke=Ke.child;continue}if(Ke===l)break e;for(;Ke.sibling===null;){if(Ke.return===null||Ke.return===l)break e;qe===Ke&&(qe=null),Ke=Ke.return}qe===Ke&&(qe=null),Ke.sibling.return=Ke.return,Ke=Ke.sibling}}break;case 19:Ci(u,l),sa(l),y&4&&fE(l);break;case 21:break;default:Ci(u,l),sa(l)}}function sa(l){var u=l.flags;if(u&2){try{e:{for(var f=l.return;f!==null;){if(uE(f)){var y=f;break e}f=f.return}throw Error(t(160))}switch(y.tag){case 5:var b=y.stateNode;y.flags&32&&(J(b,""),y.flags&=-33);var N=dE(l);vy(l,N,b);break;case 3:case 4:var B=y.stateNode.containerInfo,re=dE(l);yy(l,re,B);break;default:throw Error(t(161))}}catch(ce){Xr(l,l.return,ce)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function qj(l,u,f){yt=l,mE(l)}function mE(l,u,f){for(var y=(l.mode&1)!==0;yt!==null;){var b=yt,N=b.child;if(b.tag===22&&y){var B=b.memoizedState!==null||ip;if(!B){var re=b.alternate,ce=re!==null&&re.memoizedState!==null||es;re=ip;var be=es;if(ip=B,(es=ce)&&!be)for(yt=b;yt!==null;)B=yt,ce=B.child,B.tag===22&&B.memoizedState!==null?yE(b):ce!==null?(ce.return=B,yt=ce):yE(b);for(;N!==null;)yt=N,mE(N),N=N.sibling;yt=b,ip=re,es=be}gE(l)}else(b.subtreeFlags&8772)!==0&&N!==null?(N.return=b,yt=N):gE(l)}}function gE(l){for(;yt!==null;){var u=yt;if((u.flags&8772)!==0){var f=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:es||ap(5,u);break;case 1:var y=u.stateNode;if(u.flags&4&&!es)if(f===null)y.componentDidMount();else{var b=u.elementType===u.type?f.memoizedProps:ki(u.type,f.memoizedProps);y.componentDidUpdate(b,f.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var N=u.updateQueue;N!==null&&x_(u,N,y);break;case 3:var B=u.updateQueue;if(B!==null){if(f=null,u.child!==null)switch(u.child.tag){case 5:f=u.child.stateNode;break;case 1:f=u.child.stateNode}x_(u,B,f)}break;case 5:var re=u.stateNode;if(f===null&&u.flags&4){f=re;var ce=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":ce.autoFocus&&f.focus();break;case"img":ce.src&&(f.src=ce.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var be=u.alternate;if(be!==null){var qe=be.memoizedState;if(qe!==null){var Ke=qe.dehydrated;Ke!==null&&Ei(Ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}es||u.flags&512&&xy(u)}catch(We){Xr(u,u.return,We)}}if(u===l){yt=null;break}if(f=u.sibling,f!==null){f.return=u.return,yt=f;break}yt=u.return}}function xE(l){for(;yt!==null;){var u=yt;if(u===l){yt=null;break}var f=u.sibling;if(f!==null){f.return=u.return,yt=f;break}yt=u.return}}function yE(l){for(;yt!==null;){var u=yt;try{switch(u.tag){case 0:case 11:case 15:var f=u.return;try{ap(4,u)}catch(ce){Xr(u,f,ce)}break;case 1:var y=u.stateNode;if(typeof y.componentDidMount=="function"){var b=u.return;try{y.componentDidMount()}catch(ce){Xr(u,b,ce)}}var N=u.return;try{xy(u)}catch(ce){Xr(u,N,ce)}break;case 5:var B=u.return;try{xy(u)}catch(ce){Xr(u,B,ce)}}}catch(ce){Xr(u,u.return,ce)}if(u===l){yt=null;break}var re=u.sibling;if(re!==null){re.return=u.return,yt=re;break}yt=u.return}}var Gj=Math.ceil,op=L.ReactCurrentDispatcher,by=L.ReactCurrentOwner,oi=L.ReactCurrentBatchConfig,sr=0,Nn=null,ln=null,Ln=0,Bs=0,xu=Ao(0),xn=0,d0=null,Dl=0,lp=0,wy=0,h0=null,Es=null,_y=0,yu=1/0,Va=null,cp=!1,Ey=null,Po=null,up=!1,jo=null,dp=0,f0=0,Ty=null,hp=-1,fp=0;function ds(){return(sr&6)!==0?Be():hp!==-1?hp:hp=Be()}function Ro(l){return(l.mode&1)===0?1:(sr&2)!==0&&Ln!==0?Ln&-Ln:Ij.transition!==null?(fp===0&&(fp=_l()),fp):(l=er,l!==0||(l=window.event,l=l===void 0?16:Bd(l.type)),l)}function Ii(l,u,f,y){if(50<f0)throw f0=0,Ty=null,Error(t(185));xo(l,f,y),((sr&2)===0||l!==Nn)&&(l===Nn&&((sr&2)===0&&(lp|=f),xn===4&&Do(l,Ln)),Ts(l,y),f===1&&sr===0&&(u.mode&1)===0&&(yu=Be()+500,Bf&&ko()))}function Ts(l,u){var f=l.callbackNode;ka(l,u);var y=wl(l,l===Nn?Ln:0);if(y===0)f!==null&&ze(f),l.callbackNode=null,l.callbackPriority=0;else if(u=y&-y,l.callbackPriority!==u){if(f!=null&&ze(f),u===1)l.tag===0?Cj(bE.bind(null,l)):i_(bE.bind(null,l)),Aj(function(){(sr&6)===0&&ko()}),f=null;else{switch(vo(y)){case 1:f=Wt;break;case 4:f=Ht;break;case 16:f=ir;break;case 536870912:f=Yn;break;default:f=ir}f=SE(f,vE.bind(null,l))}l.callbackPriority=u,l.callbackNode=f}}function vE(l,u){if(hp=-1,fp=0,(sr&6)!==0)throw Error(t(327));var f=l.callbackNode;if(vu()&&l.callbackNode!==f)return null;var y=wl(l,l===Nn?Ln:0);if(y===0)return null;if((y&30)!==0||(y&l.expiredLanes)!==0||u)u=pp(l,y);else{u=y;var b=sr;sr|=2;var N=_E();(Nn!==l||Ln!==u)&&(Va=null,yu=Be()+500,Ol(l,u));do try{Xj();break}catch(re){wE(l,re)}while(!0);Ux(),op.current=N,sr=b,ln!==null?u=0:(Nn=null,Ln=0,u=xn)}if(u!==0){if(u===2&&(b=Os(l),b!==0&&(y=b,u=Ay(l,b))),u===1)throw f=d0,Ol(l,0),Do(l,y),Ts(l,Be()),f;if(u===6)Do(l,y);else{if(b=l.current.alternate,(y&30)===0&&!Kj(b)&&(u=pp(l,y),u===2&&(N=Os(l),N!==0&&(y=N,u=Ay(l,N))),u===1))throw f=d0,Ol(l,0),Do(l,y),Ts(l,Be()),f;switch(l.finishedWork=b,l.finishedLanes=y,u){case 0:case 1:throw Error(t(345));case 2:Ll(l,Es,Va);break;case 3:if(Do(l,y),(y&130023424)===y&&(u=_y+500-Be(),10<u)){if(wl(l,0)!==0)break;if(b=l.suspendedLanes,(b&y)!==y){ds(),l.pingedLanes|=l.suspendedLanes&b;break}l.timeoutHandle=Px(Ll.bind(null,l,Es,Va),u);break}Ll(l,Es,Va);break;case 4:if(Do(l,y),(y&4194240)===y)break;for(u=l.eventTimes,b=-1;0<y;){var B=31-kr(y);N=1<<B,B=u[B],B>b&&(b=B),y&=~N}if(y=b,y=Be()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*Gj(y/1960))-y,10<y){l.timeoutHandle=Px(Ll.bind(null,l,Es,Va),y);break}Ll(l,Es,Va);break;case 5:Ll(l,Es,Va);break;default:throw Error(t(329))}}}return Ts(l,Be()),l.callbackNode===f?vE.bind(null,l):null}function Ay(l,u){var f=h0;return l.current.memoizedState.isDehydrated&&(Ol(l,u).flags|=256),l=pp(l,u),l!==2&&(u=Es,Es=f,u!==null&&Ny(u)),l}function Ny(l){Es===null?Es=l:Es.push.apply(Es,l)}function Kj(l){for(var u=l;;){if(u.flags&16384){var f=u.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var y=0;y<f.length;y++){var b=f[y],N=b.getSnapshot;b=b.value;try{if(!Ai(N(),b))return!1}catch{return!1}}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Do(l,u){for(u&=~wy,u&=~lp,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var f=31-kr(u),y=1<<f;l[f]=-1,u&=~y}}function bE(l){if((sr&6)!==0)throw Error(t(327));vu();var u=wl(l,0);if((u&1)===0)return Ts(l,Be()),null;var f=pp(l,u);if(l.tag!==0&&f===2){var y=Os(l);y!==0&&(u=y,f=Ay(l,y))}if(f===1)throw f=d0,Ol(l,0),Do(l,u),Ts(l,Be()),f;if(f===6)throw Error(t(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,Ll(l,Es,Va),Ts(l,Be()),null}function ky(l,u){var f=sr;sr|=1;try{return l(u)}finally{sr=f,sr===0&&(yu=Be()+500,Bf&&ko())}}function Fl(l){jo!==null&&jo.tag===0&&(sr&6)===0&&vu();var u=sr;sr|=1;var f=oi.transition,y=er;try{if(oi.transition=null,er=1,l)return l()}finally{er=y,oi.transition=f,sr=u,(sr&6)===0&&ko()}}function Sy(){Bs=xu.current,jr(xu)}function Ol(l,u){l.finishedWork=null,l.finishedLanes=0;var f=l.timeoutHandle;if(f!==-1&&(l.timeoutHandle=-1,Tj(f)),ln!==null)for(f=ln.return;f!==null;){var y=f;switch(Lx(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Vf();break;case 3:pu(),jr(bs),jr(Qn),Xx();break;case 5:Kx(y);break;case 4:pu();break;case 13:jr(Hr);break;case 19:jr(Hr);break;case 10:zx(y.type._context);break;case 22:case 23:Sy()}f=f.return}if(Nn=l,ln=l=Fo(l.current,null),Ln=Bs=u,xn=0,d0=null,wy=lp=Dl=0,Es=h0=null,Pl!==null){for(u=0;u<Pl.length;u++)if(f=Pl[u],y=f.interleaved,y!==null){f.interleaved=null;var b=y.next,N=f.pending;if(N!==null){var B=N.next;N.next=b,y.next=B}f.pending=y}Pl=null}return l}function wE(l,u){do{var f=ln;try{if(Ux(),Qf.current=tp,Jf){for(var y=Wr.memoizedState;y!==null;){var b=y.queue;b!==null&&(b.pending=null),y=y.next}Jf=!1}if(Rl=0,An=gn=Wr=null,i0=!1,a0=0,by.current=null,f===null||f.return===null){xn=1,d0=u,ln=null;break}e:{var N=l,B=f.return,re=f,ce=u;if(u=Ln,re.flags|=32768,ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var be=ce,qe=re,Ke=qe.tag;if((qe.mode&1)===0&&(Ke===0||Ke===11||Ke===15)){var We=qe.alternate;We?(qe.updateQueue=We.updateQueue,qe.memoizedState=We.memoizedState,qe.lanes=We.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var mt=q_(B);if(mt!==null){mt.flags&=-257,G_(mt,B,re,N,u),mt.mode&1&&W_(N,be,u),u=mt,ce=be;var bt=u.updateQueue;if(bt===null){var _t=new Set;_t.add(ce),u.updateQueue=_t}else bt.add(ce);break e}else{if((u&1)===0){W_(N,be,u),Cy();break e}ce=Error(t(426))}}else if(Mr&&re.mode&1){var tn=q_(B);if(tn!==null){(tn.flags&65536)===0&&(tn.flags|=256),G_(tn,B,re,N,u),$x(mu(ce,re));break e}}N=ce=mu(ce,re),xn!==4&&(xn=2),h0===null?h0=[N]:h0.push(N),N=B;do{switch(N.tag){case 3:N.flags|=65536,u&=-u,N.lanes|=u;var ye=z_(N,ce,u);g_(N,ye);break e;case 1:re=ce;var he=N.type,ve=N.stateNode;if((N.flags&128)===0&&(typeof he.getDerivedStateFromError=="function"||ve!==null&&typeof ve.componentDidCatch=="function"&&(Po===null||!Po.has(ve)))){N.flags|=65536,u&=-u,N.lanes|=u;var Je=H_(N,re,u);g_(N,Je);break e}}N=N.return}while(N!==null)}TE(f)}catch(Tt){u=Tt,ln===f&&f!==null&&(ln=f=f.return);continue}break}while(!0)}function _E(){var l=op.current;return op.current=tp,l===null?tp:l}function Cy(){(xn===0||xn===3||xn===2)&&(xn=4),Nn===null||(Dl&268435455)===0&&(lp&268435455)===0||Do(Nn,Ln)}function pp(l,u){var f=sr;sr|=2;var y=_E();(Nn!==l||Ln!==u)&&(Va=null,Ol(l,u));do try{Yj();break}catch(b){wE(l,b)}while(!0);if(Ux(),sr=f,op.current=y,ln!==null)throw Error(t(261));return Nn=null,Ln=0,xn}function Yj(){for(;ln!==null;)EE(ln)}function Xj(){for(;ln!==null&&!Ye();)EE(ln)}function EE(l){var u=kE(l.alternate,l,Bs);l.memoizedProps=l.pendingProps,u===null?TE(l):ln=u,by.current=null}function TE(l){var u=l;do{var f=u.alternate;if(l=u.return,(u.flags&32768)===0){if(f=Uj(f,u,Bs),f!==null){ln=f;return}}else{if(f=zj(f,u),f!==null){f.flags&=32767,ln=f;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{xn=6,ln=null;return}}if(u=u.sibling,u!==null){ln=u;return}ln=u=l}while(u!==null);xn===0&&(xn=5)}function Ll(l,u,f){var y=er,b=oi.transition;try{oi.transition=null,er=1,Qj(l,u,f,y)}finally{oi.transition=b,er=y}return null}function Qj(l,u,f,y){do vu();while(jo!==null);if((sr&6)!==0)throw Error(t(327));f=l.finishedWork;var b=l.finishedLanes;if(f===null)return null;if(l.finishedWork=null,l.finishedLanes=0,f===l.current)throw Error(t(177));l.callbackNode=null,l.callbackPriority=0;var N=f.lanes|f.childLanes;if(Sr(l,N),l===Nn&&(ln=Nn=null,Ln=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||up||(up=!0,SE(ir,function(){return vu(),null})),N=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||N){N=oi.transition,oi.transition=null;var B=er;er=1;var re=sr;sr|=4,by.current=null,Wj(l,f),pE(f,l),xj(Cx),wo=!!Sx,Cx=Sx=null,l.current=f,qj(f),Ve(),sr=re,er=B,oi.transition=N}else l.current=f;if(up&&(up=!1,jo=l,dp=b),N=l.pendingLanes,N===0&&(Po=null),Yi(f.stateNode),Ts(l,Be()),u!==null)for(y=l.onRecoverableError,f=0;f<u.length;f++)b=u[f],y(b.value,{componentStack:b.stack,digest:b.digest});if(cp)throw cp=!1,l=Ey,Ey=null,l;return(dp&1)!==0&&l.tag!==0&&vu(),N=l.pendingLanes,(N&1)!==0?l===Ty?f0++:(f0=0,Ty=l):f0=0,ko(),null}function vu(){if(jo!==null){var l=vo(dp),u=oi.transition,f=er;try{if(oi.transition=null,er=16>l?16:l,jo===null)var y=!1;else{if(l=jo,jo=null,dp=0,(sr&6)!==0)throw Error(t(331));var b=sr;for(sr|=4,yt=l.current;yt!==null;){var N=yt,B=N.child;if((yt.flags&16)!==0){var re=N.deletions;if(re!==null){for(var ce=0;ce<re.length;ce++){var be=re[ce];for(yt=be;yt!==null;){var qe=yt;switch(qe.tag){case 0:case 11:case 15:u0(8,qe,N)}var Ke=qe.child;if(Ke!==null)Ke.return=qe,yt=Ke;else for(;yt!==null;){qe=yt;var We=qe.sibling,mt=qe.return;if(cE(qe),qe===be){yt=null;break}if(We!==null){We.return=mt,yt=We;break}yt=mt}}}var bt=N.alternate;if(bt!==null){var _t=bt.child;if(_t!==null){bt.child=null;do{var tn=_t.sibling;_t.sibling=null,_t=tn}while(_t!==null)}}yt=N}}if((N.subtreeFlags&2064)!==0&&B!==null)B.return=N,yt=B;else e:for(;yt!==null;){if(N=yt,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:u0(9,N,N.return)}var ye=N.sibling;if(ye!==null){ye.return=N.return,yt=ye;break e}yt=N.return}}var he=l.current;for(yt=he;yt!==null;){B=yt;var ve=B.child;if((B.subtreeFlags&2064)!==0&&ve!==null)ve.return=B,yt=ve;else e:for(B=he;yt!==null;){if(re=yt,(re.flags&2048)!==0)try{switch(re.tag){case 0:case 11:case 15:ap(9,re)}}catch(Tt){Xr(re,re.return,Tt)}if(re===B){yt=null;break e}var Je=re.sibling;if(Je!==null){Je.return=re.return,yt=Je;break e}yt=re.return}}if(sr=b,ko(),zr&&typeof zr.onPostCommitFiberRoot=="function")try{zr.onPostCommitFiberRoot(Xn,l)}catch{}y=!0}return y}finally{er=f,oi.transition=u}}return!1}function AE(l,u,f){u=mu(f,u),u=z_(l,u,1),l=Co(l,u,1),u=ds(),l!==null&&(xo(l,1,u),Ts(l,u))}function Xr(l,u,f){if(l.tag===3)AE(l,l,f);else for(;u!==null;){if(u.tag===3){AE(u,l,f);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Po===null||!Po.has(y))){l=mu(f,l),l=H_(u,l,1),u=Co(u,l,1),l=ds(),u!==null&&(xo(u,1,l),Ts(u,l));break}}u=u.return}}function Jj(l,u,f){var y=l.pingCache;y!==null&&y.delete(u),u=ds(),l.pingedLanes|=l.suspendedLanes&f,Nn===l&&(Ln&f)===f&&(xn===4||xn===3&&(Ln&130023424)===Ln&&500>Be()-_y?Ol(l,0):wy|=f),Ts(l,u)}function NE(l,u){u===0&&((l.mode&1)===0?u=1:(u=po,po<<=1,(po&130023424)===0&&(po=4194304)));var f=ds();l=Oa(l,u),l!==null&&(xo(l,u,f),Ts(l,f))}function Zj(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),NE(l,f)}function eR(l,u){var f=0;switch(l.tag){case 13:var y=l.stateNode,b=l.memoizedState;b!==null&&(f=b.retryLane);break;case 19:y=l.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(u),NE(l,f)}var kE;kE=function(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps||bs.current)_s=!0;else{if((l.lanes&f)===0&&(u.flags&128)===0)return _s=!1,Bj(l,u,f);_s=(l.flags&131072)!==0}else _s=!1,Mr&&(u.flags&1048576)!==0&&a_(u,zf,u.index);switch(u.lanes=0,u.tag){case 2:var y=u.type;sp(l,u),l=u.pendingProps;var b=ou(u,Qn.current);fu(u,f),b=Zx(null,u,y,l,b,f);var N=ey();return u.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,ws(y)?(N=!0,$f(u)):N=!1,u.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,qx(u),b.updater=rp,u.stateNode=b,b._reactInternals=u,ay(u,y,l,f),u=uy(null,u,y,!0,N,f)):(u.tag=0,Mr&&N&&Ox(u),us(null,u,b,f),u=u.child),u;case 16:y=u.elementType;e:{switch(sp(l,u),l=u.pendingProps,b=y._init,y=b(y._payload),u.type=y,b=u.tag=rR(y),l=ki(y,l),b){case 0:u=cy(null,u,y,l,f);break e;case 1:u=Z_(null,u,y,l,f);break e;case 11:u=K_(null,u,y,l,f);break e;case 14:u=Y_(null,u,y,ki(y.type,l),f);break e}throw Error(t(306,y,""))}return u;case 0:return y=u.type,b=u.pendingProps,b=u.elementType===y?b:ki(y,b),cy(l,u,y,b,f);case 1:return y=u.type,b=u.pendingProps,b=u.elementType===y?b:ki(y,b),Z_(l,u,y,b,f);case 3:e:{if(eE(u),l===null)throw Error(t(387));y=u.pendingProps,N=u.memoizedState,b=N.element,m_(l,u),Yf(u,y,null,f);var B=u.memoizedState;if(y=B.element,N.isDehydrated)if(N={element:y,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},u.updateQueue.baseState=N,u.memoizedState=N,u.flags&256){b=mu(Error(t(423)),u),u=tE(l,u,y,f,b);break e}else if(y!==b){b=mu(Error(t(424)),u),u=tE(l,u,y,f,b);break e}else for($s=To(u.stateNode.containerInfo.firstChild),Vs=u,Mr=!0,Ni=null,f=f_(u,null,y,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(uu(),y===b){u=Ma(l,u,f);break e}us(l,u,y,f)}u=u.child}return u;case 5:return y_(u),l===null&&Vx(u),y=u.type,b=u.pendingProps,N=l!==null?l.memoizedProps:null,B=b.children,Ix(y,b)?B=null:N!==null&&Ix(y,N)&&(u.flags|=32),J_(l,u),us(l,u,B,f),u.child;case 6:return l===null&&Vx(u),null;case 13:return rE(l,u,f);case 4:return Gx(u,u.stateNode.containerInfo),y=u.pendingProps,l===null?u.child=du(u,null,y,f):us(l,u,y,f),u.child;case 11:return y=u.type,b=u.pendingProps,b=u.elementType===y?b:ki(y,b),K_(l,u,y,b,f);case 7:return us(l,u,u.pendingProps,f),u.child;case 8:return us(l,u,u.pendingProps.children,f),u.child;case 12:return us(l,u,u.pendingProps.children,f),u.child;case 10:e:{if(y=u.type._context,b=u.pendingProps,N=u.memoizedProps,B=b.value,Ir(qf,y._currentValue),y._currentValue=B,N!==null)if(Ai(N.value,B)){if(N.children===b.children&&!bs.current){u=Ma(l,u,f);break e}}else for(N=u.child,N!==null&&(N.return=u);N!==null;){var re=N.dependencies;if(re!==null){B=N.child;for(var ce=re.firstContext;ce!==null;){if(ce.context===y){if(N.tag===1){ce=La(-1,f&-f),ce.tag=2;var be=N.updateQueue;if(be!==null){be=be.shared;var qe=be.pending;qe===null?ce.next=ce:(ce.next=qe.next,qe.next=ce),be.pending=ce}}N.lanes|=f,ce=N.alternate,ce!==null&&(ce.lanes|=f),Hx(N.return,f,u),re.lanes|=f;break}ce=ce.next}}else if(N.tag===10)B=N.type===u.type?null:N.child;else if(N.tag===18){if(B=N.return,B===null)throw Error(t(341));B.lanes|=f,re=B.alternate,re!==null&&(re.lanes|=f),Hx(B,f,u),B=N.sibling}else B=N.child;if(B!==null)B.return=N;else for(B=N;B!==null;){if(B===u){B=null;break}if(N=B.sibling,N!==null){N.return=B.return,B=N;break}B=B.return}N=B}us(l,u,b.children,f),u=u.child}return u;case 9:return b=u.type,y=u.pendingProps.children,fu(u,f),b=ii(b),y=y(b),u.flags|=1,us(l,u,y,f),u.child;case 14:return y=u.type,b=ki(y,u.pendingProps),b=ki(y.type,b),Y_(l,u,y,b,f);case 15:return X_(l,u,u.type,u.pendingProps,f);case 17:return y=u.type,b=u.pendingProps,b=u.elementType===y?b:ki(y,b),sp(l,u),u.tag=1,ws(y)?(l=!0,$f(u)):l=!1,fu(u,f),B_(u,y,b),ay(u,y,b,f),uy(null,u,y,!0,l,f);case 19:return sE(l,u,f);case 22:return Q_(l,u,f)}throw Error(t(156,u.tag))};function SE(l,u){return $e(l,u)}function tR(l,u,f,y){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(l,u,f,y){return new tR(l,u,f,y)}function Iy(l){return l=l.prototype,!(!l||!l.isReactComponent)}function rR(l){if(typeof l=="function")return Iy(l)?1:0;if(l!=null){if(l=l.$$typeof,l===D)return 11;if(l===Ae)return 14}return 2}function Fo(l,u){var f=l.alternate;return f===null?(f=li(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&14680064,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f}function mp(l,u,f,y,b,N){var B=2;if(y=l,typeof l=="function")Iy(l)&&(B=1);else if(typeof l=="string")B=5;else e:switch(l){case S:return Ml(f.children,b,N,u);case k:B=8,b|=8;break;case P:return l=li(12,f,u,b|2),l.elementType=P,l.lanes=N,l;case O:return l=li(13,f,u,b),l.elementType=O,l.lanes=N,l;case pe:return l=li(19,f,u,b),l.elementType=pe,l.lanes=N,l;case Me:return gp(f,b,N,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case j:B=10;break e;case M:B=9;break e;case D:B=11;break e;case Ae:B=14;break e;case Fe:B=16,y=null;break e}throw Error(t(130,l==null?l:typeof l,""))}return u=li(B,f,u,b),u.elementType=l,u.type=y,u.lanes=N,u}function Ml(l,u,f,y){return l=li(7,l,y,u),l.lanes=f,l}function gp(l,u,f,y){return l=li(22,l,y,u),l.elementType=Me,l.lanes=f,l.stateNode={isHidden:!1},l}function Py(l,u,f){return l=li(6,l,null,u),l.lanes=f,l}function jy(l,u,f){return u=li(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function nR(l,u,f,y,b){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=go(0),this.expirationTimes=go(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=go(0),this.identifierPrefix=y,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function Ry(l,u,f,y,b,N,B,re,ce){return l=new nR(l,u,f,re,ce),u===1?(u=1,N===!0&&(u|=8)):u=0,N=li(3,null,null,u),l.current=N,N.stateNode=l,N.memoizedState={element:y,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},qx(N),l}function sR(l,u,f){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:y==null?null:""+y,children:l,containerInfo:u,implementation:f}}function CE(l){if(!l)return No;l=l._reactInternals;e:{if(F(l)!==l||l.tag!==1)throw Error(t(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(ws(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(l.tag===1){var f=l.type;if(ws(f))return n_(l,f,u)}return u}function IE(l,u,f,y,b,N,B,re,ce){return l=Ry(f,y,!0,l,b,N,B,re,ce),l.context=CE(null),f=l.current,y=ds(),b=Ro(f),N=La(y,b),N.callback=u??null,Co(f,N,b),l.current.lanes=b,xo(l,b,y),Ts(l,y),l}function xp(l,u,f,y){var b=u.current,N=ds(),B=Ro(b);return f=CE(f),u.context===null?u.context=f:u.pendingContext=f,u=La(N,B),u.payload={element:l},y=y===void 0?null:y,y!==null&&(u.callback=y),l=Co(b,u,B),l!==null&&(Ii(l,b,B,N),Kf(l,b,B)),B}function yp(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function PE(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function Dy(l,u){PE(l,u),(l=l.alternate)&&PE(l,u)}function iR(){return null}var jE=typeof reportError=="function"?reportError:function(l){console.error(l)};function Fy(l){this._internalRoot=l}vp.prototype.render=Fy.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(t(409));xp(l,u,null,null)},vp.prototype.unmount=Fy.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;Fl(function(){xp(null,l,null,null)}),u[ja]=null}};function vp(l){this._internalRoot=l}vp.prototype.unstable_scheduleHydration=function(l){if(l){var u=vf();l={blockedOn:null,target:l,priority:u};for(var f=0;f<Qi.length&&u!==0&&u<Qi[f].priority;f++);Qi.splice(f,0,l),f===0&&_f(l)}};function Oy(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function bp(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function RE(){}function aR(l,u,f,y,b){if(b){if(typeof y=="function"){var N=y;y=function(){var be=yp(B);N.call(be)}}var B=IE(u,y,l,0,null,!1,!1,"",RE);return l._reactRootContainer=B,l[ja]=B.current,Qd(l.nodeType===8?l.parentNode:l),Fl(),B}for(;b=l.lastChild;)l.removeChild(b);if(typeof y=="function"){var re=y;y=function(){var be=yp(ce);re.call(be)}}var ce=Ry(l,0,!1,null,null,!1,!1,"",RE);return l._reactRootContainer=ce,l[ja]=ce.current,Qd(l.nodeType===8?l.parentNode:l),Fl(function(){xp(u,ce,f,y)}),ce}function wp(l,u,f,y,b){var N=f._reactRootContainer;if(N){var B=N;if(typeof b=="function"){var re=b;b=function(){var ce=yp(B);re.call(ce)}}xp(u,B,l,b)}else B=aR(f,u,l,b,y);return yp(B)}xf=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var f=mo(u.pendingLanes);f!==0&&(yo(u,f|1),Ts(u,Be()),(sr&6)===0&&(yu=Be()+500,ko()))}break;case 13:Fl(function(){var y=Oa(l,1);if(y!==null){var b=ds();Ii(y,l,1,b)}}),Dy(l,1)}},zc=function(l){if(l.tag===13){var u=Oa(l,134217728);if(u!==null){var f=ds();Ii(u,l,134217728,f)}Dy(l,134217728)}},yf=function(l){if(l.tag===13){var u=Ro(l),f=Oa(l,u);if(f!==null){var y=ds();Ii(f,l,u,y)}Dy(l,u)}},vf=function(){return er},bf=function(l,u){var f=er;try{return er=l,u()}finally{er=f}},lt=function(l,u,f){switch(u){case"input":if(Oe(l,f),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<f.length;u++){var y=f[u];if(y!==l&&y.form===l.form){var b=Mf(y);if(!b)throw Error(t(90));ft(y),Oe(y,b)}}}break;case"textarea":pt(l,f);break;case"select":u=f.value,u!=null&&de(l,!!f.multiple,u,!1)}},Or=ky,_n=Fl;var oR={usingClientEntryPoint:!1,Events:[e0,iu,Mf,Qt,Fr,ky]},p0={findFiberByHostInstance:kl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lR={bundleType:p0.bundleType,version:p0.version,rendererPackageName:p0.rendererPackageName,rendererConfig:p0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=ue(l),l===null?null:l.stateNode},findFiberByHostInstance:p0.findFiberByHostInstance||iR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_p.isDisabled&&_p.supportsFiber)try{Xn=_p.inject(lR),zr=_p}catch{}}return As.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oR,As.createPortal=function(l,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Oy(u))throw Error(t(200));return sR(l,u,null,f)},As.createRoot=function(l,u){if(!Oy(l))throw Error(t(299));var f=!1,y="",b=jE;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(b=u.onRecoverableError)),u=Ry(l,1,!1,null,null,f,!1,y,b),l[ja]=u.current,Qd(l.nodeType===8?l.parentNode:l),new Fy(u)},As.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(t(188)):(l=Object.keys(l).join(","),Error(t(268,l)));return l=ue(u),l=l===null?null:l.stateNode,l},As.flushSync=function(l){return Fl(l)},As.hydrate=function(l,u,f){if(!bp(u))throw Error(t(200));return wp(null,l,u,!0,f)},As.hydrateRoot=function(l,u,f){if(!Oy(l))throw Error(t(405));var y=f!=null&&f.hydratedSources||null,b=!1,N="",B=jE;if(f!=null&&(f.unstable_strictMode===!0&&(b=!0),f.identifierPrefix!==void 0&&(N=f.identifierPrefix),f.onRecoverableError!==void 0&&(B=f.onRecoverableError)),u=IE(u,null,l,1,f??null,b,!1,N,B),l[ja]=u.current,Qd(l),y)for(l=0;l<y.length;l++)f=y[l],b=f._getVersion,b=b(f._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[f,b]:u.mutableSourceEagerHydrationData.push(f,b);return new vp(u)},As.render=function(l,u,f){if(!bp(u))throw Error(t(200));return wp(null,l,u,!1,f)},As.unmountComponentAtNode=function(l){if(!bp(l))throw Error(t(40));return l._reactRootContainer?(Fl(function(){wp(null,null,l,!1,function(){l._reactRootContainer=null,l[ja]=null})}),!0):!1},As.unstable_batchedUpdates=ky,As.unstable_renderSubtreeIntoContainer=function(l,u,f,y){if(!bp(f))throw Error(t(200));if(l==null||l._reactInternals===void 0)throw Error(t(38));return wp(l,u,f,!1,y)},As.version="18.3.1-next-f1338f8080-20240426",As}var BE;function gR(){if(BE)return Vy.exports;BE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Vy.exports=mR(),Vy.exports}var UE;function xR(){if(UE)return Ep;UE=1;var r=gR();return Ep.createRoot=r.createRoot,Ep.hydrateRoot=r.hydrateRoot,Ep}var yR=xR();const vR=B1(yR);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var zE="popstate";function bR(r={}){function e(n,s){let{pathname:i,search:a,hash:c}=n.location;return Pv("",{pathname:i,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:eh(s)}return _R(e,t,null,r)}function Br(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function zi(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wR(){return Math.random().toString(36).substring(2,10)}function HE(r,e){return{usr:r.state,key:r.key,idx:e}}function Pv(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Ed(e):e,state:t,key:e&&e.key||n||wR()}}function eh({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Ed(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function _R(r,e,t,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,c="POP",d=null,h=p();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function p(){return(a.state||{idx:null}).idx}function m(){c="POP";let E=p(),R=E==null?null:E-h;h=E,d&&d({action:c,location:w.location,delta:R})}function x(E,R){c="PUSH";let C=Pv(w.location,E,R);h=p()+1;let V=HE(C,h),L=w.createHref(C);try{a.pushState(V,"",L)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;s.location.assign(L)}i&&d&&d({action:c,location:w.location,delta:1})}function v(E,R){c="REPLACE";let C=Pv(w.location,E,R);h=p();let V=HE(C,h),L=w.createHref(C);a.replaceState(V,"",L),i&&d&&d({action:c,location:w.location,delta:0})}function _(E){return ER(E)}let w={get action(){return c},get location(){return r(s,a)},listen(E){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(zE,m),d=E,()=>{s.removeEventListener(zE,m),d=null}},createHref(E){return e(s,E)},createURL:_,encodeLocation(E){let R=_(E);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:x,replace:v,go(E){return a.go(E)}};return w}function ER(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Br(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:eh(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function fk(r,e,t="/"){return TR(r,e,t,!1)}function TR(r,e,t,n){let s=typeof e=="string"?Ed(e):e,i=Ja(s.pathname||"/",t);if(i==null)return null;let a=pk(r);AR(a);let c=null;for(let d=0;c==null&&d<a.length;++d){let h=OR(i);c=DR(a[d],h,n)}return c}function pk(r,e=[],t=[],n="",s=!1){let i=(a,c,d=s,h)=>{let p={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&d)return;Br(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let m=Wa([n,p.relativePath]),x=t.concat(p);a.children&&a.children.length>0&&(Br(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),pk(a.children,e,x,m,d)),!(a.path==null&&!a.index)&&e.push({path:m,score:jR(m,a.index),routesMeta:x})};return r.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))i(a,c);else for(let d of mk(a.path))i(a,c,!0,d)}),e}function mk(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=mk(n.join("/")),c=[];return c.push(...a.map(d=>d===""?i:[i,d].join("/"))),s&&c.push(...a),c.map(d=>r.startsWith("/")&&d===""?"/":d)}function AR(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:RR(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var NR=/^:[\w-]+$/,kR=3,SR=2,CR=1,IR=10,PR=-2,WE=r=>r==="*";function jR(r,e){let t=r.split("/"),n=t.length;return t.some(WE)&&(n+=PR),e&&(n+=SR),t.filter(s=>!WE(s)).reduce((s,i)=>s+(NR.test(i)?kR:i===""?CR:IR),n)}function RR(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function DR(r,e,t=!1){let{routesMeta:n}=r,s={},i="/",a=[];for(let c=0;c<n.length;++c){let d=n[c],h=c===n.length-1,p=i==="/"?e:e.slice(i.length)||"/",m=fm({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),x=d.route;if(!m&&h&&t&&!n[n.length-1].route.index&&(m=fm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:Wa([i,m.pathname]),pathnameBase:$R(Wa([i,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(i=Wa([i,m.pathnameBase]))}return a}function fm(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=FR(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:m},x)=>{if(p==="*"){let _=c[x]||"";a=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const v=c[x];return m&&!v?h[p]=void 0:h[p]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:a,pattern:r}}function FR(r,e=!1,t=!0){zi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function OR(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zi(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ja(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function LR(r,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?Ed(r):r;return{pathname:t?t.startsWith("/")?t:MR(t,e):e,search:BR(n),hash:UR(s)}}function MR(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Uy(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VR(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function z1(r){let e=VR(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function H1(r,e,t,n=!1){let s;typeof r=="string"?s=Ed(r):(s={...r},Br(!s.pathname||!s.pathname.includes("?"),Uy("?","pathname","search",s)),Br(!s.pathname||!s.pathname.includes("#"),Uy("#","pathname","hash",s)),Br(!s.search||!s.search.includes("#"),Uy("#","search","hash",s)));let i=r===""||s.pathname==="",a=i?"/":s.pathname,c;if(a==null)c=t;else{let m=e.length-1;if(!n&&a.startsWith("..")){let x=a.split("/");for(;x[0]==="..";)x.shift(),m-=1;s.pathname=x.join("/")}c=m>=0?e[m]:"/"}let d=LR(s,c),h=a&&a!=="/"&&a.endsWith("/"),p=(i||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}var Wa=r=>r.join("/").replace(/\/\/+/g,"/"),$R=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),BR=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,UR=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function zR(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var gk=["POST","PUT","PATCH","DELETE"];new Set(gk);var HR=["GET",...gk];new Set(HR);var Td=A.createContext(null);Td.displayName="DataRouter";var vg=A.createContext(null);vg.displayName="DataRouterState";A.createContext(!1);var xk=A.createContext({isTransitioning:!1});xk.displayName="ViewTransition";var WR=A.createContext(new Map);WR.displayName="Fetchers";var qR=A.createContext(null);qR.displayName="Await";var qi=A.createContext(null);qi.displayName="Navigation";var Dh=A.createContext(null);Dh.displayName="Location";var Ta=A.createContext({outlet:null,matches:[],isDataRoute:!1});Ta.displayName="Route";var W1=A.createContext(null);W1.displayName="RouteError";function GR(r,{relative:e}={}){Br(Ad(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=A.useContext(qi),{hash:s,pathname:i,search:a}=Fh(r,{relative:e}),c=i;return t!=="/"&&(c=i==="/"?t:Wa([t,i])),n.createHref({pathname:c,search:a,hash:s})}function Ad(){return A.useContext(Dh)!=null}function pl(){return Br(Ad(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(Dh).location}var yk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vk(r){A.useContext(qi).static||A.useLayoutEffect(r)}function Gi(){let{isDataRoute:r}=A.useContext(Ta);return r?aD():KR()}function KR(){Br(Ad(),"useNavigate() may be used only in the context of a <Router> component.");let r=A.useContext(Td),{basename:e,navigator:t}=A.useContext(qi),{matches:n}=A.useContext(Ta),{pathname:s}=pl(),i=JSON.stringify(z1(n)),a=A.useRef(!1);return vk(()=>{a.current=!0}),A.useCallback((d,h={})=>{if(zi(a.current,yk),!a.current)return;if(typeof d=="number"){t.go(d);return}let p=H1(d,JSON.parse(i),s,h.relative==="path");r==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Wa([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,i,s,r])}A.createContext(null);function Fh(r,{relative:e}={}){let{matches:t}=A.useContext(Ta),{pathname:n}=pl(),s=JSON.stringify(z1(t));return A.useMemo(()=>H1(r,JSON.parse(s),n,e==="path"),[r,s,n,e])}function YR(r,e){return bk(r,e)}function bk(r,e,t,n,s){Br(Ad(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=A.useContext(qi),{matches:a}=A.useContext(Ta),c=a[a.length-1],d=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",m=c&&c.route;{let C=m&&m.path||"";wk(h,!m||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let x=pl(),v;if(e){let C=typeof e=="string"?Ed(e):e;Br(p==="/"||C.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${C.pathname}" was given in the \`location\` prop.`),v=C}else v=x;let _=v.pathname||"/",w=_;if(p!=="/"){let C=p.replace(/^\//,"").split("/");w="/"+_.replace(/^\//,"").split("/").slice(C.length).join("/")}let E=fk(r,{pathname:w});zi(m||E!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),zi(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=eD(E&&E.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Wa([p,i.encodeLocation?i.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?p:Wa([p,i.encodeLocation?i.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),a,t,n,s);return e&&R?A.createElement(Dh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},R):R}function XR(){let r=iD(),e=zR(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",r),a=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:i},"ErrorBoundary")," or"," ",A.createElement("code",{style:i},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:s},t):null,a)}var QR=A.createElement(XR,null),JR=class extends A.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?A.createElement(Ta.Provider,{value:this.props.routeContext},A.createElement(W1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZR({routeContext:r,match:e,children:t}){let n=A.useContext(Td);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(Ta.Provider,{value:r},t)}function eD(r,e=[],t=null,n=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,a=t?.errors;if(a!=null){let h=i.findIndex(p=>p.route.id&&a?.[p.route.id]!==void 0);Br(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,d=-1;if(t)for(let h=0;h<i.length;h++){let p=i[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:m,errors:x}=t,v=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||v){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((h,p,m)=>{let x,v=!1,_=null,w=null;t&&(x=a&&p.route.id?a[p.route.id]:void 0,_=p.route.errorElement||QR,c&&(d<0&&m===0?(wk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,w=null):d===m&&(v=!0,w=p.route.hydrateFallbackElement||null)));let E=e.concat(i.slice(0,m+1)),R=()=>{let C;return x?C=_:v?C=w:p.route.Component?C=A.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=h,A.createElement(ZR,{match:p,routeContext:{outlet:h,matches:E,isDataRoute:t!=null},children:C})};return t&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?A.createElement(JR,{location:t.location,revalidation:t.revalidation,component:_,error:x,children:R(),routeContext:{outlet:null,matches:E,isDataRoute:!0},unstable_onError:n}):R()},null)}function q1(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tD(r){let e=A.useContext(Td);return Br(e,q1(r)),e}function rD(r){let e=A.useContext(vg);return Br(e,q1(r)),e}function nD(r){let e=A.useContext(Ta);return Br(e,q1(r)),e}function G1(r){let e=nD(r),t=e.matches[e.matches.length-1];return Br(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function sD(){return G1("useRouteId")}function iD(){let r=A.useContext(W1),e=rD("useRouteError"),t=G1("useRouteError");return r!==void 0?r:e.errors?.[t]}function aD(){let{router:r}=tD("useNavigate"),e=G1("useNavigate"),t=A.useRef(!1);return vk(()=>{t.current=!0}),A.useCallback(async(s,i={})=>{zi(t.current,yk),t.current&&(typeof s=="number"?r.navigate(s):await r.navigate(s,{fromRouteId:e,...i}))},[r,e])}var qE={};function wk(r,e,t){!e&&!qE[r]&&(qE[r]=!0,zi(!1,t))}A.memo(oD);function oD({routes:r,future:e,state:t,unstable_onError:n}){return bk(r,void 0,t,n,e)}function Oh({to:r,replace:e,state:t,relative:n}){Br(Ad(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=A.useContext(qi);zi(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=A.useContext(Ta),{pathname:a}=pl(),c=Gi(),d=H1(r,z1(i),a,n==="path"),h=JSON.stringify(d);return A.useEffect(()=>{c(JSON.parse(h),{replace:e,state:t,relative:n})},[c,h,n,e,t]),null}function Ri(r){Br(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lD({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:i=!1}){Br(!Ad(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=r.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof t=="string"&&(t=Ed(t));let{pathname:d="/",search:h="",hash:p="",state:m=null,key:x="default"}=t,v=A.useMemo(()=>{let _=Ja(d,a);return _==null?null:{location:{pathname:_,search:h,hash:p,state:m,key:x},navigationType:n}},[a,d,h,p,m,x,n]);return zi(v!=null,`<Router basename="${a}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:A.createElement(qi.Provider,{value:c},A.createElement(Dh.Provider,{children:e,value:v}))}function cD({children:r,location:e}){return YR(jv(r),e)}function jv(r,e=[]){let t=[];return A.Children.forEach(r,(n,s)=>{if(!A.isValidElement(n))return;let i=[...e,s];if(n.type===A.Fragment){t.push.apply(t,jv(n.props.children,i));return}Br(n.type===Ri,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Br(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=jv(n.props.children,i)),t.push(a)}),t}var qp="get",Gp="application/x-www-form-urlencoded";function bg(r){return r!=null&&typeof r.tagName=="string"}function uD(r){return bg(r)&&r.tagName.toLowerCase()==="button"}function dD(r){return bg(r)&&r.tagName.toLowerCase()==="form"}function hD(r){return bg(r)&&r.tagName.toLowerCase()==="input"}function fD(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function pD(r,e){return r.button===0&&(!e||e==="_self")&&!fD(r)}var Tp=null;function mD(){if(Tp===null)try{new FormData(document.createElement("form"),0),Tp=!1}catch{Tp=!0}return Tp}var gD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zy(r){return r!=null&&!gD.has(r)?(zi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gp}"`),null):r}function xD(r,e){let t,n,s,i,a;if(dD(r)){let c=r.getAttribute("action");n=c?Ja(c,e):null,t=r.getAttribute("method")||qp,s=zy(r.getAttribute("enctype"))||Gp,i=new FormData(r)}else if(uD(r)||hD(r)&&(r.type==="submit"||r.type==="image")){let c=r.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||c.getAttribute("action");if(n=d?Ja(d,e):null,t=r.getAttribute("formmethod")||c.getAttribute("method")||qp,s=zy(r.getAttribute("formenctype"))||zy(c.getAttribute("enctype"))||Gp,i=new FormData(c,r),!mD()){let{name:h,type:p,value:m}=r;if(p==="image"){let x=h?`${h}.`:"";i.append(`${x}x`,"0"),i.append(`${x}y`,"0")}else h&&i.append(h,m)}}else{if(bg(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=qp,n=null,s=Gp,a=r}return i&&s==="text/plain"&&(a=i,i=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function K1(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function yD(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&Ja(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function vD(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bD(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function wD(r,e,t){let n=await Promise.all(r.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await vD(i,t);return a.links?a.links():[]}return[]}));return AD(n.flat(1).filter(bD).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function GE(r,e,t,n,s,i){let a=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,c=(d,h)=>t[h].pathname!==d.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==d.params["*"];return i==="assets"?e.filter((d,h)=>a(d,h)||c(d,h)):i==="data"?e.filter((d,h)=>{let p=n.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(a(d,h)||c(d,h))return!0;if(d.route.shouldRevalidate){let m=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function _D(r,e,{includeHydrateFallback:t}={}){return ED(r.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function ED(r){return[...new Set(r)]}function TD(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function AD(r,e){let t=new Set;return new Set(e),r.reduce((n,s)=>{let i=JSON.stringify(TD(s));return t.has(i)||(t.add(i),n.push({key:i,link:s})),n},[])}function _k(){let r=A.useContext(Td);return K1(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function ND(){let r=A.useContext(vg);return K1(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Y1=A.createContext(void 0);Y1.displayName="FrameworkContext";function Ek(){let r=A.useContext(Y1);return K1(r,"You must render this element inside a <HydratedRouter> element"),r}function kD(r,e){let t=A.useContext(Y1),[n,s]=A.useState(!1),[i,a]=A.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=e,x=A.useRef(null);A.useEffect(()=>{if(r==="render"&&a(!0),r==="viewport"){let w=R=>{R.forEach(C=>{a(C.isIntersecting)})},E=new IntersectionObserver(w,{threshold:.5});return x.current&&E.observe(x.current),()=>{E.disconnect()}}},[r]),A.useEffect(()=>{if(n){let w=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(w)}}},[n]);let v=()=>{s(!0)},_=()=>{s(!1),a(!1)};return t?r!=="intent"?[i,x,{}]:[i,x,{onFocus:g0(c,v),onBlur:g0(d,_),onMouseEnter:g0(h,v),onMouseLeave:g0(p,_),onTouchStart:g0(m,v)}]:[!1,x,{}]}function g0(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function SD({page:r,...e}){let{router:t}=_k(),n=A.useMemo(()=>fk(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?A.createElement(ID,{page:r,matches:n,...e}):null}function CD(r){let{manifest:e,routeModules:t}=Ek(),[n,s]=A.useState([]);return A.useEffect(()=>{let i=!1;return wD(r,e,t).then(a=>{i||s(a)}),()=>{i=!0}},[r,e,t]),n}function ID({page:r,matches:e,...t}){let n=pl(),{manifest:s,routeModules:i}=Ek(),{basename:a}=_k(),{loaderData:c,matches:d}=ND(),h=A.useMemo(()=>GE(r,e,d,s,n,"data"),[r,e,d,s,n]),p=A.useMemo(()=>GE(r,e,d,s,n,"assets"),[r,e,d,s,n]),m=A.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let _=new Set,w=!1;if(e.forEach(R=>{let C=s.routes[R.route.id];!C||!C.hasLoader||(!h.some(V=>V.route.id===R.route.id)&&R.route.id in c&&i[R.route.id]?.shouldRevalidate||C.hasClientLoader?w=!0:_.add(R.route.id))}),_.size===0)return[];let E=yD(r,a,"data");return w&&_.size>0&&E.searchParams.set("_routes",e.filter(R=>_.has(R.route.id)).map(R=>R.route.id).join(",")),[E.pathname+E.search]},[a,c,n,s,h,e,r,i]),x=A.useMemo(()=>_D(p,s),[p,s]),v=CD(p);return A.createElement(A.Fragment,null,m.map(_=>A.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...t})),x.map(_=>A.createElement("link",{key:_,rel:"modulepreload",href:_,...t})),v.map(({key:_,link:w})=>A.createElement("link",{key:_,nonce:t.nonce,...w})))}function PD(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Tk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Tk&&(window.__reactRouterVersion="7.9.4")}catch{}function jD({basename:r,children:e,window:t}){let n=A.useRef();n.current==null&&(n.current=bR({window:t,v5Compat:!0}));let s=n.current,[i,a]=A.useState({action:s.action,location:s.location}),c=A.useCallback(d=>{A.startTransition(()=>a(d))},[a]);return A.useLayoutEffect(()=>s.listen(c),[s,c]),A.createElement(lD,{basename:r,children:e,location:i.location,navigationType:i.action,navigator:s})}var Ak=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ns=A.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:i,replace:a,state:c,target:d,to:h,preventScrollReset:p,viewTransition:m,...x},v){let{basename:_}=A.useContext(qi),w=typeof h=="string"&&Ak.test(h),E,R=!1;if(typeof h=="string"&&w&&(E=h,Tk))try{let P=new URL(window.location.href),j=h.startsWith("//")?new URL(P.protocol+h):new URL(h),M=Ja(j.pathname,_);j.origin===P.origin&&M!=null?h=M+j.search+j.hash:R=!0}catch{zi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=GR(h,{relative:s}),[V,L,K]=kD(n,x),H=OD(h,{replace:a,state:c,target:d,preventScrollReset:p,relative:s,viewTransition:m});function S(P){e&&e(P),P.defaultPrevented||H(P)}let k=A.createElement("a",{...x,...K,href:E||C,onClick:R||i?e:S,ref:PD(v,L),target:d,"data-discover":!w&&t==="render"?"true":void 0});return V&&!w?A.createElement(A.Fragment,null,k,A.createElement(SD,{page:C})):k});Ns.displayName="Link";var RD=A.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:i,to:a,viewTransition:c,children:d,...h},p){let m=Fh(a,{relative:h.relative}),x=pl(),v=A.useContext(vg),{navigator:_,basename:w}=A.useContext(qi),E=v!=null&&BD(m)&&c===!0,R=_.encodeLocation?_.encodeLocation(m).pathname:m.pathname,C=x.pathname,V=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(C=C.toLowerCase(),V=V?V.toLowerCase():null,R=R.toLowerCase()),V&&w&&(V=Ja(V,w)||V);const L=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let K=C===R||!s&&C.startsWith(R)&&C.charAt(L)==="/",H=V!=null&&(V===R||!s&&V.startsWith(R)&&V.charAt(R.length)==="/"),S={isActive:K,isPending:H,isTransitioning:E},k=K?e:void 0,P;typeof n=="function"?P=n(S):P=[n,K?"active":null,H?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let j=typeof i=="function"?i(S):i;return A.createElement(Ns,{...h,"aria-current":k,className:P,ref:p,style:j,to:a,viewTransition:c},typeof d=="function"?d(S):d)});RD.displayName="NavLink";var DD=A.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:i,method:a=qp,action:c,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:m,...x},v)=>{let _=VD(),w=$D(c,{relative:h}),E=a.toLowerCase()==="get"?"get":"post",R=typeof c=="string"&&Ak.test(c),C=V=>{if(d&&d(V),V.defaultPrevented)return;V.preventDefault();let L=V.nativeEvent.submitter,K=L?.getAttribute("formmethod")||a;_(L||V.currentTarget,{fetcherKey:e,method:K,navigate:t,replace:s,state:i,relative:h,preventScrollReset:p,viewTransition:m})};return A.createElement("form",{ref:v,method:E,action:w,onSubmit:n?d:C,...x,"data-discover":!R&&r==="render"?"true":void 0})});DD.displayName="Form";function FD(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nk(r){let e=A.useContext(Td);return Br(e,FD(r)),e}function OD(r,{target:e,replace:t,state:n,preventScrollReset:s,relative:i,viewTransition:a}={}){let c=Gi(),d=pl(),h=Fh(r,{relative:i});return A.useCallback(p=>{if(pD(p,e)){p.preventDefault();let m=t!==void 0?t:eh(d)===eh(h);c(r,{replace:m,state:n,preventScrollReset:s,relative:i,viewTransition:a})}},[d,c,h,t,n,e,r,s,i,a])}var LD=0,MD=()=>`__${String(++LD)}__`;function VD(){let{router:r}=Nk("useSubmit"),{basename:e}=A.useContext(qi),t=sD();return A.useCallback(async(n,s={})=>{let{action:i,method:a,encType:c,formData:d,body:h}=xD(n,e);if(s.navigate===!1){let p=s.fetcherKey||MD();await r.fetch(p,t,s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||a,formEncType:s.encType||c,flushSync:s.flushSync})}else await r.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||a,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,e,t])}function $D(r,{relative:e}={}){let{basename:t}=A.useContext(qi),n=A.useContext(Ta);Br(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Fh(r||".",{relative:e})},a=pl();if(r==null){i.search=a.search;let c=new URLSearchParams(i.search),d=c.getAll("index");if(d.some(p=>p==="")){c.delete("index"),d.filter(m=>m).forEach(m=>c.append("index",m));let p=c.toString();i.search=p?`?${p}`:""}}return(!r||r===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Wa([t,i.pathname])),eh(i)}function BD(r,{relative:e}={}){let t=A.useContext(xk);Br(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Nk("useViewTransitionState"),s=Fh(r,{relative:e});if(!t.isTransitioning)return!1;let i=Ja(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=Ja(t.nextLocation.pathname,n)||t.nextLocation.pathname;return fm(s.pathname,a)!=null||fm(s.pathname,i)!=null}const UD=()=>{};var KE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},zD=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=r[t++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=r[t++],a=r[t++],c=r[t++],d=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=r[t++],a=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Sk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const i=r[s],a=s+1<r.length,c=a?r[s+1]:0,d=s+2<r.length,h=d?r[s+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let x=(c&15)<<2|h>>6,v=h&63;d||(v=64,a||(x=64)),n.push(t[p],t[m],t[x],t[v])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(kk(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):zD(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const i=t[r.charAt(s++)],c=s<r.length?t[r.charAt(s)]:0;++s;const h=s<r.length?t[r.charAt(s)]:64;++s;const m=s<r.length?t[r.charAt(s)]:64;if(++s,i==null||c==null||h==null||m==null)throw new HD;const x=i<<2|c>>4;if(n.push(x),h!==64){const v=c<<4&240|h>>2;if(n.push(v),m!==64){const _=h<<6&192|m;n.push(_)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class HD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WD=function(r){const e=kk(r);return Sk.encodeByteArray(e,!0)},pm=function(r){return WD(r).replace(/\./g,"")},Ck=function(r){try{return Sk.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=()=>qD().__FIREBASE_DEFAULTS__,KD=()=>{if(typeof process>"u"||typeof KE>"u")return;const r=KE.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},YD=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Ck(r[1]);return e&&JSON.parse(e)},wg=()=>{try{return UD()||GD()||KD()||YD()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Ik=r=>{var e,t;return(t=(e=wg())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},XD=r=>{const e=Ik(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},Pk=()=>{var r;return(r=wg())===null||r===void 0?void 0:r.config},jk=r=>{var e;return(e=wg())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,i=r.sub||r.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},r);return[pm(JSON.stringify(t)),pm(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function e8(){var r;const e=(r=wg())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function t8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Rk(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function r8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function n8(){const r=bn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Dk(){return!e8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X1(){try{return typeof indexedDB=="object"}catch{return!1}}function Fk(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}function s8(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8="FirebaseError";class yi extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=i8,Object.setPrototypeOf(this,yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tc.prototype.create)}}class Tc{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?a8(i,n):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new yi(s,c,n)}}function a8(r,e){return r.replace(o8,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const o8=/\{\$([^}]+)}/g;function l8(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function nl(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const i=r[s],a=e[s];if(YE(i)&&YE(a)){if(!nl(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function YE(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function T0(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function A0(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function c8(r,e){const t=new u8(r,e);return t.subscribe.bind(t)}class u8{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");d8(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=Hy),s.error===void 0&&(s.error=Hy),s.complete===void 0&&(s.complete=Hy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function d8(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Hy(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8=1e3,f8=2,p8=14400*1e3,m8=.5;function XE(r,e=h8,t=f8){const n=e*Math.pow(t,r),s=Math.round(m8*n*(Math.random()-.5)*2);return Math.min(p8,n+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(r){return r&&r._delegate?r._delegate:r}class xi{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new QD;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y8(e))try{this.getOrInitializeService({instanceIdentifier:Bl})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=Bl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bl){return this.instances.has(e)}getOptions(e=Bl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&a.resolve(s)}return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:x8(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Bl){return this.component?this.component.multipleInstances?e:Bl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function x8(r){return r===Bl?void 0:r}function y8(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new g8(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Jt||(Jt={}));const b8={debug:Jt.DEBUG,verbose:Jt.VERBOSE,info:Jt.INFO,warn:Jt.WARN,error:Jt.ERROR,silent:Jt.SILENT},w8=Jt.INFO,_8={[Jt.DEBUG]:"log",[Jt.VERBOSE]:"log",[Jt.INFO]:"info",[Jt.WARN]:"warn",[Jt.ERROR]:"error"},E8=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=_8[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _g{constructor(e){this.name=e,this._logLevel=w8,this._logHandler=E8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Jt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?b8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Jt.DEBUG,...e),this._logHandler(this,Jt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Jt.VERBOSE,...e),this._logHandler(this,Jt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Jt.INFO,...e),this._logHandler(this,Jt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Jt.WARN,...e),this._logHandler(this,Jt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Jt.ERROR,...e),this._logHandler(this,Jt.ERROR,...e)}}const T8=(r,e)=>e.some(t=>r instanceof t);let QE,JE;function A8(){return QE||(QE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function N8(){return JE||(JE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ok=new WeakMap,Rv=new WeakMap,Lk=new WeakMap,Wy=new WeakMap,Q1=new WeakMap;function k8(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",i),r.removeEventListener("error",a)},i=()=>{t(Qo(r.result)),s()},a=()=>{n(r.error),s()};r.addEventListener("success",i),r.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Ok.set(t,r)}).catch(()=>{}),Q1.set(e,r),e}function S8(r){if(Rv.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",i),r.removeEventListener("error",a),r.removeEventListener("abort",a)},i=()=>{t(),s()},a=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",i),r.addEventListener("error",a),r.addEventListener("abort",a)});Rv.set(r,e)}let Dv={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Rv.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Lk.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qo(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function C8(r){Dv=r(Dv)}function I8(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(qy(this),e,...t);return Lk.set(n,e.sort?e.sort():[e]),Qo(n)}:N8().includes(r)?function(...e){return r.apply(qy(this),e),Qo(Ok.get(this))}:function(...e){return Qo(r.apply(qy(this),e))}}function P8(r){return typeof r=="function"?I8(r):(r instanceof IDBTransaction&&S8(r),T8(r,A8())?new Proxy(r,Dv):r)}function Qo(r){if(r instanceof IDBRequest)return k8(r);if(Wy.has(r))return Wy.get(r);const e=P8(r);return e!==r&&(Wy.set(r,e),Q1.set(e,r)),e}const qy=r=>Q1.get(r);function Mk(r,e,{blocked:t,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(r,e),c=Qo(a);return n&&a.addEventListener("upgradeneeded",d=>{n(Qo(a.result),d.oldVersion,d.newVersion,Qo(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),s&&d.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const j8=["get","getKey","getAll","getAllKeys","count"],R8=["put","add","delete","clear"],Gy=new Map;function ZE(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Gy.get(e))return Gy.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=R8.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||j8.includes(t)))return;const i=async function(a,...c){const d=this.transaction(a,s?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),s&&d.done]))[0]};return Gy.set(e,i),i}C8(r=>({...r,get:(e,t,n)=>ZE(e,t)||r.get(e,t,n),has:(e,t)=>!!ZE(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(F8(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function F8(r){const e=r.getComponent();return e?.type==="VERSION"}const Fv="@firebase/app",e4="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new _g("@firebase/app"),O8="@firebase/app-compat",L8="@firebase/analytics-compat",M8="@firebase/analytics",V8="@firebase/app-check-compat",$8="@firebase/app-check",B8="@firebase/auth",U8="@firebase/auth-compat",z8="@firebase/database",H8="@firebase/data-connect",W8="@firebase/database-compat",q8="@firebase/functions",G8="@firebase/functions-compat",K8="@firebase/installations",Y8="@firebase/installations-compat",X8="@firebase/messaging",Q8="@firebase/messaging-compat",J8="@firebase/performance",Z8="@firebase/performance-compat",e9="@firebase/remote-config",t9="@firebase/remote-config-compat",r9="@firebase/storage",n9="@firebase/storage-compat",s9="@firebase/firestore",i9="@firebase/vertexai",a9="@firebase/firestore-compat",o9="firebase",l9="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="[DEFAULT]",c9={[Fv]:"fire-core",[O8]:"fire-core-compat",[M8]:"fire-analytics",[L8]:"fire-analytics-compat",[$8]:"fire-app-check",[V8]:"fire-app-check-compat",[B8]:"fire-auth",[U8]:"fire-auth-compat",[z8]:"fire-rtdb",[H8]:"fire-data-connect",[W8]:"fire-rtdb-compat",[q8]:"fire-fn",[G8]:"fire-fn-compat",[K8]:"fire-iid",[Y8]:"fire-iid-compat",[X8]:"fire-fcm",[Q8]:"fire-fcm-compat",[J8]:"fire-perf",[Z8]:"fire-perf-compat",[e9]:"fire-rc",[t9]:"fire-rc-compat",[r9]:"fire-gcs",[n9]:"fire-gcs-compat",[s9]:"fire-fst",[a9]:"fire-fst-compat",[i9]:"fire-vertex","fire-js":"fire-js",[o9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=new Map,u9=new Map,Lv=new Map;function t4(r,e){try{r.container.addComponent(e)}catch(t){Za.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Hi(r){const e=r.name;if(Lv.has(e))return Za.debug(`There were multiple attempts to register component ${e}.`),!1;Lv.set(e,r);for(const t of mm.values())t4(t,r);for(const t of u9.values())t4(t,r);return!0}function ml(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Gs(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jo=new Tc("app","Firebase",d9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=l9;function Vk(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Ov,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw Jo.create("bad-app-name",{appName:String(s)});if(t||(t=Pk()),!t)throw Jo.create("no-options");const i=mm.get(s);if(i){if(nl(t,i.options)&&nl(n,i.config))return i;throw Jo.create("duplicate-app",{appName:s})}const a=new v8(s);for(const d of Lv.values())a.addComponent(d);const c=new h9(t,n,a);return mm.set(s,c),c}function J1(r=Ov){const e=mm.get(r);if(!e&&r===Ov&&Pk())return Vk();if(!e)throw Jo.create("no-app",{appName:r});return e}function Cs(r,e,t){var n;let s=(n=c9[r])!==null&&n!==void 0?n:r;t&&(s+=`-${t}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Za.warn(c.join(" "));return}Hi(new xi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9="firebase-heartbeat-database",p9=1,th="firebase-heartbeat-store";let Ky=null;function $k(){return Ky||(Ky=Mk(f9,p9,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(th)}catch(t){console.warn(t)}}}}).catch(r=>{throw Jo.create("idb-open",{originalErrorMessage:r.message})})),Ky}async function m9(r){try{const t=(await $k()).transaction(th),n=await t.objectStore(th).get(Bk(r));return await t.done,n}catch(e){if(e instanceof yi)Za.warn(e.message);else{const t=Jo.create("idb-get",{originalErrorMessage:e?.message});Za.warn(t.message)}}}async function r4(r,e){try{const n=(await $k()).transaction(th,"readwrite");await n.objectStore(th).put(e,Bk(r)),await n.done}catch(t){if(t instanceof yi)Za.warn(t.message);else{const n=Jo.create("idb-set",{originalErrorMessage:t?.message});Za.warn(n.message)}}}function Bk(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9=1024,x9=30;class y9{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new b9(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=n4();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>x9){const a=w9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Za.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=n4(),{heartbeatsToSend:n,unsentEntries:s}=v9(this._heartbeatsCache.heartbeats),i=pm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Za.warn(t),""}}}function n4(){return new Date().toISOString().substring(0,10)}function v9(r,e=g9){const t=[];let n=r.slice();for(const s of r){const i=t.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),s4(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),s4(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class b9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return X1()?Fk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await m9(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return r4(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return r4(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function s4(r){return pm(JSON.stringify({version:2,heartbeats:r})).length}function w9(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _9(r){Hi(new xi("platform-logger",e=>new D8(e),"PRIVATE")),Hi(new xi("heartbeat",e=>new y9(e),"PRIVATE")),Cs(Fv,e4,r),Cs(Fv,e4,"esm2017"),Cs("fire-js","")}_9("");function Z1(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t}function Uk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const E9=Uk,zk=new Tc("auth","Firebase",Uk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=new _g("@firebase/auth");function T9(r,...e){gm.logLevel<=Jt.WARN&&gm.warn(`Auth (${Ac}): ${r}`,...e)}function Kp(r,...e){gm.logLevel<=Jt.ERROR&&gm.error(`Auth (${Ac}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(r,...e){throw eb(r,...e)}function ua(r,...e){return eb(r,...e)}function Hk(r,e,t){const n=Object.assign(Object.assign({},E9()),{[e]:t});return new Tc("auth","Firebase",n).create(e,{appName:r.name})}function qa(r){return Hk(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eb(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return zk.create(r,...e)}function Ot(r,e,...t){if(!r)throw eb(e,...t)}function Ba(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Kp(e),new Error(e)}function eo(r,e){r||Ba(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function A9(){return i4()==="http:"||i4()==="https:"}function i4(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(A9()||Rk()||"connection"in navigator)?navigator.onLine:!0}function k9(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,t){this.shortDelay=e,this.longDelay=t,eo(t>e,"Short delay should be less than long delay!"),this.isMobile=ZD()||r8()}get(){return N9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(r,e){eo(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],I9=new Mh(3e4,6e4);function oo(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Ki(r,e,t,n,s={}){return qk(r,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const c=Lh(Object.assign({key:r.config.apiKey},a)).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const h=Object.assign({method:e,headers:d},i);return t8()||(h.referrerPolicy="no-referrer"),Wk.fetch()(await Gk(r,r.config.apiHost,t,c),h)})}async function qk(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},S9),e);try{const s=new j9(r),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Ap(r,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ap(r,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw Ap(r,"email-already-in-use",a);if(d==="USER_DISABLED")throw Ap(r,"user-disabled",a);const p=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Hk(r,p,h);Wi(r,p)}}catch(s){if(s instanceof yi)throw s;Wi(r,"network-request-failed",{message:String(s)})}}async function Vh(r,e,t,n,s={}){const i=await Ki(r,e,t,n,s);return"mfaPendingCredential"in i&&Wi(r,"multi-factor-auth-required",{_serverResponse:i}),i}async function Gk(r,e,t,n){const s=`${e}${t}?${n}`,i=r,a=i.config.emulator?tb(r.config,s):`${r.config.apiScheme}://${s}`;return C9.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function P9(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(ua(this.auth,"network-request-failed")),I9.get())})}}function Ap(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=ua(r,e,n);return s.customData._tokenResponse=t,s}function a4(r){return r!==void 0&&r.enterprise!==void 0}class R9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return P9(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function D9(r,e){return Ki(r,"GET","/v2/recaptchaConfig",oo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F9(r,e){return Ki(r,"POST","/v1/accounts:delete",e)}async function xm(r,e){return Ki(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function O9(r,e=!1){const t=Cr(r),n=await t.getIdToken(e),s=rb(n);Ot(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i?.sign_in_provider;return{claims:s,token:n,authTime:D0(Yy(s.auth_time)),issuedAtTime:D0(Yy(s.iat)),expirationTime:D0(Yy(s.exp)),signInProvider:a||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Yy(r){return Number(r)*1e3}function rb(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Kp("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ck(t);return s?JSON.parse(s):(Kp("Failed to decode base64 JWT payload"),null)}catch(s){return Kp("Caught error parsing JWT payload as JSON",s?.toString()),null}}function o4(r){const e=rb(r);return Ot(e,"internal-error"),Ot(typeof e.exp<"u","internal-error"),Ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ic(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof yi&&L9(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function L9({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=D0(this.lastLoginAt),this.creationTime=D0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ym(r){var e;const t=r.auth,n=await r.getIdToken(),s=await ic(r,xm(t,{idToken:n}));Ot(s?.users.length,t,"internal-error");const i=s.users[0];r._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Kk(i.providerUserInfo):[],c=$9(r.providerData,a),d=r.isAnonymous,h=!(r.email&&i.passwordHash)&&!c?.length,p=d?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Vv(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(r,m)}async function V9(r){const e=Cr(r);await ym(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $9(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function Kk(r){return r.map(e=>{var{providerId:t}=e,n=Z1(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B9(r,e){const t=await qk(r,{},async()=>{const n=Lh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=r.config,a=await Gk(r,s,"/v1/token",`key=${i}`),c=await r._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Wk.fetch()(a,{method:"POST",headers:c,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function U9(r,e){return Ki(r,"POST","/v2/accounts:revokeToken",oo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ot(e.idToken,"internal-error"),Ot(typeof e.idToken<"u","internal-error"),Ot(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):o4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ot(e.length!==0,"internal-error");const t=o4(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:i}=await B9(e,t);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:i}=t,a=new Hu;return n&&(Ot(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Ot(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Ot(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hu,this.toJSON())}_performRefresh(){return Ba("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(r,e){Ot(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Li{constructor(e){var{uid:t,auth:n,stsTokenManager:s}=e,i=Z1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new M9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Vv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ic(this,this.stsTokenManager.getToken(this.auth,e));return Ot(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return O9(this,e)}reload(){return V9(this)}_assign(e){this!==e&&(Ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Li(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ym(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gs(this.auth.app))return Promise.reject(qa(this.auth));const e=await this.getIdToken();return await ic(this,F9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,s,i,a,c,d,h,p;const m=(n=t.displayName)!==null&&n!==void 0?n:void 0,x=(s=t.email)!==null&&s!==void 0?s:void 0,v=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,_=(a=t.photoURL)!==null&&a!==void 0?a:void 0,w=(c=t.tenantId)!==null&&c!==void 0?c:void 0,E=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,R=(h=t.createdAt)!==null&&h!==void 0?h:void 0,C=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:V,emailVerified:L,isAnonymous:K,providerData:H,stsTokenManager:S}=t;Ot(V&&S,e,"internal-error");const k=Hu.fromJSON(this.name,S);Ot(typeof V=="string",e,"internal-error"),Lo(m,e.name),Lo(x,e.name),Ot(typeof L=="boolean",e,"internal-error"),Ot(typeof K=="boolean",e,"internal-error"),Lo(v,e.name),Lo(_,e.name),Lo(w,e.name),Lo(E,e.name),Lo(R,e.name),Lo(C,e.name);const P=new Li({uid:V,auth:e,email:x,emailVerified:L,displayName:m,isAnonymous:K,photoURL:_,phoneNumber:v,tenantId:w,stsTokenManager:k,createdAt:R,lastLoginAt:C});return H&&Array.isArray(H)&&(P.providerData=H.map(j=>Object.assign({},j))),E&&(P._redirectEventId=E),P}static async _fromIdTokenResponse(e,t,n=!1){const s=new Hu;s.updateFromServerResponse(t);const i=new Li({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await ym(i),i}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];Ot(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Kk(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!i?.length,c=new Hu;c.updateFromIdToken(n);const d=new Li({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Vv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=new Map;function Ua(r){eo(r instanceof Function,"Expected a class definition");let e=l4.get(r);return e?(eo(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,l4.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Yk.type="NONE";const c4=Yk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(r,e,t){return`firebase:${r}:${e}:${t}`}class Wu{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Yp(this.userKey,s.apiKey,i),this.fullPersistenceKey=Yp("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xm(this.auth,{idToken:e}).catch(()=>{});return t?Li._fromGetAccountInfoResponse(this.auth,t,e):null}return Li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Wu(Ua(c4),e,n);const s=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Ua(c4);const a=Yp(n,e.config.apiKey,e.name);let c=null;for(const h of t)try{const p=await h._get(a);if(p){let m;if(typeof p=="string"){const x=await xm(e,{idToken:p}).catch(()=>{});if(!x)break;m=await Li._fromGetAccountInfoResponse(e,x,p)}else m=Li._fromJSON(e,p);h!==i&&(c=m),i=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new Wu(i,e,n):(i=d[0],c&&await i._set(a,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==i)try{await h._remove(a)}catch{}})),new Wu(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Xk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(t3(e))return"Blackberry";if(r3(e))return"Webos";if(Qk(e))return"Safari";if((e.includes("chrome/")||Jk(e))&&!e.includes("edge/"))return"Chrome";if(e3(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if(n?.length===2)return n[1]}return"Other"}function Xk(r=bn()){return/firefox\//i.test(r)}function Qk(r=bn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jk(r=bn()){return/crios\//i.test(r)}function Zk(r=bn()){return/iemobile/i.test(r)}function e3(r=bn()){return/android/i.test(r)}function t3(r=bn()){return/blackberry/i.test(r)}function r3(r=bn()){return/webos/i.test(r)}function nb(r=bn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function z9(r=bn()){var e;return nb(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function H9(){return n8()&&document.documentMode===10}function n3(r=bn()){return nb(r)||e3(r)||r3(r)||t3(r)||/windows phone/i.test(r)||Zk(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(r,e=[]){let t;switch(r){case"Browser":t=u4(bn());break;case"Worker":t=`${u4(bn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ac}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=i=>new Promise((a,c)=>{try{const d=e(i);a(d)}catch(d){c(d)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q9(r,e={}){return Ki(r,"GET","/v2/passwordPolicy",oo(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9=6;class K9{constructor(e){var t,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:G9,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,s,i,a,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(i=d.containsUppercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(a=d.containsNumericCharacter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new d4(this),this.idTokenSubscription=new d4(this),this.beforeStateQueue=new W9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ua(t)),this._initializationPromise=this.queue(async()=>{var n,s,i;if(!this._deleted&&(this.persistenceManager=await Wu.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xm(this,{idToken:e}),n=await Li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Gs(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===c)&&d?.user&&(s=d.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ym(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=k9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gs(this.app))return Promise.reject(qa(this));const t=e?Cr(e):null;return t&&Ot(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gs(this.app)?Promise.reject(qa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gs(this.app)?Promise.reject(qa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ua(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await q9(this),t=new K9(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tc("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await U9(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ua(e)||this._popupRedirectResolver;Ot(t,this,"argument-error"),this.redirectPersistenceManager=await Wu.create(this,[Ua(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ot(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,s);return()=>{a=!0,d()}}else{const d=e.addObserver(t);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=s3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Gs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&T9(`Error while retrieving App Check token: ${t.error}`),t?.token}}function gl(r){return Cr(r)}class d4{constructor(e){this.auth=e,this.observer=null,this.addObserver=c8(t=>this.observer=t)}get next(){return Ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function X9(r){Eg=r}function i3(r){return Eg.loadJS(r)}function Q9(){return Eg.recaptchaEnterpriseScript}function J9(){return Eg.gapiScript}function Z9(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class e7{constructor(){this.enterprise=new t7}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class t7{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const r7="recaptcha-enterprise",a3="NO_RECAPTCHA";class n7{constructor(e){this.type=r7,this.auth=gl(e)}async verify(e="verify",t=!1){async function n(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{D9(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new R9(d);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,a(h.siteKey)}}).catch(d=>{c(d)})})}function s(i,a,c){const d=window.grecaptcha;a4(d)?d.enterprise.ready(()=>{d.enterprise.execute(i,{action:e}).then(h=>{a(h)}).catch(()=>{a(a3)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new e7().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{n(this.auth).then(c=>{if(!t&&a4(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=Q9();d.length!==0&&(d+=c),i3(d).then(()=>{s(c,i,a)}).catch(h=>{a(h)})}}).catch(c=>{a(c)})})}}async function h4(r,e,t,n=!1,s=!1){const i=new n7(r);let a;if(s)a=a3;else try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return n?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function vm(r,e,t,n,s){var i;if(!((i=r._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await h4(r,e,t,t==="getOobCode");return n(r,a)}else return n(r,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await h4(r,e,t,t==="getOobCode");return n(r,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s7(r,e){const t=ml(r,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(nl(i,e??{}))return s;Wi(s,"already-initialized")}return t.initialize({options:e})}function i7(r,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(Ua);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e?.popupRedirectResolver)}function a7(r,e,t){const n=gl(r);Ot(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=o3(e),{host:a,port:c}=o7(e),d=c===null?"":`:${c}`,h={url:`${i}//${a}${d}/`},p=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Ot(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ot(nl(h,n.config.emulator)&&nl(p,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=p,n.settings.appVerificationDisabledForTesting=!0,l7()}function o3(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function o7(r){const e=o3(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:f4(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:f4(a)}}}function f4(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function l7(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ba("not implemented")}_getIdTokenResponse(e){return Ba("not implemented")}_linkToIdToken(e,t){return Ba("not implemented")}_getReauthenticationResolver(e){return Ba("not implemented")}}async function c7(r,e){return Ki(r,"POST","/v1/accounts:update",e)}async function u7(r,e){return Ki(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d7(r,e){return Vh(r,"POST","/v1/accounts:signInWithPassword",oo(r,e))}async function h7(r,e){return Ki(r,"POST","/v1/accounts:sendOobCode",oo(r,e))}async function f7(r,e){return h7(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p7(r,e){return Vh(r,"POST","/v1/accounts:signInWithEmailLink",oo(r,e))}async function m7(r,e){return Vh(r,"POST","/v1/accounts:signInWithEmailLink",oo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh extends sb{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new rh(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new rh(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vm(e,t,"signInWithPassword",d7);case"emailLink":return p7(e,{email:this._email,oobCode:this._password});default:Wi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vm(e,n,"signUpPassword",u7);case"emailLink":return m7(e,{idToken:t,email:this._email,oobCode:this._password});default:Wi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qu(r,e){return Vh(r,"POST","/v1/accounts:signInWithIdp",oo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7="http://localhost";class ac extends sb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ac(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=t,i=Z1(t,["providerId","signInMethod"]);if(!n||!s)return null;const a=new ac(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return qu(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,qu(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qu(e,t)}buildRequest(){const e={requestUri:g7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Lh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x7(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function y7(r){const e=T0(A0(r)).link,t=e?T0(A0(e)).deep_link_id:null,n=T0(A0(r)).deep_link_id;return(n?T0(A0(n)).link:null)||n||t||e||r}class ib{constructor(e){var t,n,s,i,a,c;const d=T0(A0(e)),h=(t=d.apiKey)!==null&&t!==void 0?t:null,p=(n=d.oobCode)!==null&&n!==void 0?n:null,m=x7((s=d.mode)!==null&&s!==void 0?s:null);Ot(h&&p&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=p,this.continueUrl=(i=d.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=d.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=y7(e);try{return new ib(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(){this.providerId=Nd.PROVIDER_ID}static credential(e,t){return rh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ib.parseLink(t);return Ot(n,"argument-error"),rh._fromEmailAndCode(e,n.code,n.tenantId)}}Nd.PROVIDER_ID="password";Nd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Nd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h extends l3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo extends $h{constructor(){super("facebook.com")}static credential(e){return ac._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zo.credential(e.oauthAccessToken)}catch{return null}}}zo.FACEBOOK_SIGN_IN_METHOD="facebook.com";zo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends $h{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ac._fromParams({providerId:Ho.PROVIDER_ID,signInMethod:Ho.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ho.credentialFromTaggedObject(e)}static credentialFromError(e){return Ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ho.credential(t,n)}catch{return null}}}Ho.GOOGLE_SIGN_IN_METHOD="google.com";Ho.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo extends $h{constructor(){super("github.com")}static credential(e){return ac._fromParams({providerId:Wo.PROVIDER_ID,signInMethod:Wo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wo.credentialFromTaggedObject(e)}static credentialFromError(e){return Wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wo.credential(e.oauthAccessToken)}catch{return null}}}Wo.GITHUB_SIGN_IN_METHOD="github.com";Wo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends $h{constructor(){super("twitter.com")}static credential(e,t){return ac._fromParams({providerId:qo.PROVIDER_ID,signInMethod:qo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qo.credentialFromTaggedObject(e)}static credentialFromError(e){return qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return qo.credential(t,n)}catch{return null}}}qo.TWITTER_SIGN_IN_METHOD="twitter.com";qo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v7(r,e){return Vh(r,"POST","/v1/accounts:signUp",oo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const i=await Li._fromIdTokenResponse(e,n,s),a=p4(n);return new oc({user:i,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=p4(n);return new oc({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function p4(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm extends yi{constructor(e,t,n,s){var i;super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,bm.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new bm(e,t,n,s)}}function c3(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?bm._fromErrorAndOperation(r,i,e,n):i})}async function b7(r,e,t=!1){const n=await ic(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return oc._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w7(r,e,t=!1){const{auth:n}=r;if(Gs(n.app))return Promise.reject(qa(n));const s="reauthenticate";try{const i=await ic(r,c3(n,s,e,r),t);Ot(i.idToken,n,"internal-error");const a=rb(i.idToken);Ot(a,n,"internal-error");const{sub:c}=a;return Ot(r.uid===c,n,"user-mismatch"),oc._forOperation(r,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&Wi(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u3(r,e,t=!1){if(Gs(r.app))return Promise.reject(qa(r));const n="signIn",s=await c3(r,n,e),i=await oc._fromIdTokenResponse(r,n,s);return t||await r._updateCurrentUser(i.user),i}async function _7(r,e){return u3(gl(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d3(r){const e=gl(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function E7(r,e,t){const n=gl(r);await vm(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",f7)}async function T7(r,e,t){if(Gs(r.app))return Promise.reject(qa(r));const n=gl(r),a=await vm(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",v7).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&d3(r),d}),c=await oc._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(c.user),c}function A7(r,e,t){return Gs(r.app)?Promise.reject(qa(r)):_7(Cr(r),Nd.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&d3(r),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N7(r,e){return Ki(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k7(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=Cr(r),i={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await ic(n,N7(n.auth,i));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const c=n.providerData.find(({providerId:d})=>d==="password");c&&(c.displayName=n.displayName,c.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function ab(r,e){return S7(Cr(r),null,e)}async function S7(r,e,t){const{auth:n}=r,i={idToken:await r.getIdToken(),returnSecureToken:!0};t&&(i.password=t);const a=await ic(r,c7(n,i));await r._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C7(r,e){return Cr(r).setPersistence(e)}function I7(r,e,t,n){return Cr(r).onIdTokenChanged(e,t,n)}function P7(r,e,t){return Cr(r).beforeAuthStateChanged(e,t)}function Nc(r,e,t,n){return Cr(r).onAuthStateChanged(e,t,n)}function Bh(r){return Cr(r).signOut()}const wm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wm,"1"),this.storage.removeItem(wm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7=1e3,R7=10;class f3 extends h3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=n3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!t&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);H9()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,R7):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},j7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}f3.type="LOCAL";const p3=f3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3 extends h3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}m3.type="SESSION";const g3=m3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new Tg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:i}=t.data,a=this.handlersMap[s];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const c=Array.from(a).map(async h=>h(t.origin,i)),d=await D7(c);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,d)=>{const h=ob("",20);s.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(m){const x=m;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(x.data.response);break;default:clearTimeout(p),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(){return window}function O7(r){da().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(){return typeof da().WorkerGlobalScope<"u"&&typeof da().importScripts=="function"}async function L7(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function M7(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function V7(){return x3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3="firebaseLocalStorageDb",$7=1,_m="firebaseLocalStorage",v3="fbase_key";class Uh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ag(r,e){return r.transaction([_m],e?"readwrite":"readonly").objectStore(_m)}function B7(){const r=indexedDB.deleteDatabase(y3);return new Uh(r).toPromise()}function $v(){const r=indexedDB.open(y3,$7);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(_m,{keyPath:v3})}catch(s){t(s)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(_m)?e(n):(n.close(),await B7(),e(await $v()))})})}async function m4(r,e,t){const n=Ag(r,!0).put({[v3]:e,value:t});return new Uh(n).toPromise()}async function U7(r,e){const t=Ag(r,!1).get(e),n=await new Uh(t).toPromise();return n===void 0?null:n.value}function g4(r,e){const t=Ag(r,!0).delete(e);return new Uh(t).toPromise()}const z7=800,H7=3;class b3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $v(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>H7)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tg._getInstance(V7()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await L7(),!this.activeServiceWorker)return;this.sender=new F7(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||M7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $v();return await m4(e,wm,"1"),await g4(e,wm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>m4(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>U7(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>g4(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ag(s,!1).getAll();return new Uh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}b3.type="LOCAL";const W7=b3;new Mh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q7(r,e){return e?Ua(e):(Ot(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb extends sb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function G7(r){return u3(r.auth,new lb(r),r.bypassAuthState)}function K7(r){const{auth:e,user:t}=r;return Ot(t,e,"internal-error"),w7(t,new lb(r),r.bypassAuthState)}async function Y7(r){const{auth:e,user:t}=r;return Ot(t,e,"internal-error"),b7(t,new lb(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e,t,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return G7;case"linkViaPopup":case"linkViaRedirect":return Y7;case"reauthViaPopup":case"reauthViaRedirect":return K7;default:Wi(this.auth,"internal-error")}}resolve(e){eo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){eo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7=new Mh(2e3,1e4);class Ou extends w3{constructor(e,t,n,s,i){super(e,t,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Ou.currentPopupAction&&Ou.currentPopupAction.cancel(),Ou.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ot(e,this.auth,"internal-error"),e}async onExecution(){eo(this.filter.length===1,"Popup operations only handle one event");const e=ob();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ua(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ua(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ou.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ua(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,X7.get())};e()}}Ou.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7="pendingRedirect",Xp=new Map;class J7 extends w3{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Xp.get(this.auth._key());if(!e){try{const n=await Z7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Xp.set(this.auth._key(),e)}return this.bypassAuthState||Xp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z7(r,e){const t=rF(e),n=tF(r);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function eF(r,e){Xp.set(r._key(),e)}function tF(r){return Ua(r._redirectPersistence)}function rF(r){return Yp(Q7,r.config.apiKey,r.name)}async function nF(r,e,t=!1){if(Gs(r.app))return Promise.reject(qa(r));const n=gl(r),s=q7(n,e),a=await new J7(n,s,t).execute();return a&&!t&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF=600*1e3;class iF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!_3(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(ua(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sF&&this.cachedEventUids.clear(),this.cachedEventUids.has(x4(e))}saveEventToCache(e){this.cachedEventUids.add(x4(e)),this.lastProcessedEventTime=Date.now()}}function x4(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function _3({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function aF(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _3(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oF(r,e={}){return Ki(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cF=/^https?/;async function uF(r){if(r.config.emulator)return;const{authorizedDomains:e}=await oF(r);for(const t of e)try{if(dF(t))return}catch{}Wi(r,"unauthorized-domain")}function dF(r){const e=Mv(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const a=new URL(r);return a.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===n}if(!cF.test(t))return!1;if(lF.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF=new Mh(3e4,6e4);function y4(){const r=da().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function fF(r){return new Promise((e,t)=>{var n,s,i;function a(){y4(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{y4(),t(ua(r,"network-request-failed"))},timeout:hF.get()})}if(!((s=(n=da().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=da().gapi)===null||i===void 0)&&i.load)a();else{const c=Z9("iframefcb");return da()[c]=()=>{gapi.load?a():t(ua(r,"network-request-failed"))},i3(`${J9()}?onload=${c}`).catch(d=>t(d))}}).catch(e=>{throw Qp=null,e})}let Qp=null;function pF(r){return Qp=Qp||fF(r),Qp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF=new Mh(5e3,15e3),gF="__/auth/iframe",xF="emulator/auth/iframe",yF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bF(r){const e=r.config;Ot(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?tb(e,xF):`https://${r.config.authDomain}/${gF}`,n={apiKey:e.apiKey,appName:r.name,v:Ac},s=vF.get(r.config.apiHost);s&&(n.eid=s);const i=r._getFrameworks();return i.length&&(n.fw=i.join(",")),`${t}?${Lh(n).slice(1)}`}async function wF(r){const e=await pF(r),t=da().gapi;return Ot(t,r,"internal-error"),e.open({where:document.body,url:bF(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yF,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=ua(r,"network-request-failed"),c=da().setTimeout(()=>{i(a)},mF.get());function d(){da().clearTimeout(c),s(n)}n.ping(d).then(d,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EF=500,TF=600,AF="_blank",NF="http://localhost";class v4{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kF(r,e,t,n=EF,s=TF){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},_F),{width:n.toString(),height:s.toString(),top:i,left:a}),h=bn().toLowerCase();t&&(c=Jk(h)?AF:t),Xk(h)&&(e=e||NF,d.scrollbars="yes");const p=Object.entries(d).reduce((x,[v,_])=>`${x}${v}=${_},`,"");if(z9(h)&&c!=="_self")return SF(e||"",c),new v4(null);const m=window.open(e||"",c,p);Ot(m,r,"popup-blocked");try{m.focus()}catch{}return new v4(m)}function SF(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF="__/auth/handler",IF="emulator/auth/handler",PF=encodeURIComponent("fac");async function b4(r,e,t,n,s,i){Ot(r.config.authDomain,r,"auth-domain-config-required"),Ot(r.config.apiKey,r,"invalid-api-key");const a={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Ac,eventId:s};if(e instanceof l3){e.setDefaultLanguage(r.languageCode),a.providerId=e.providerId||"",l8(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))a[p]=m}if(e instanceof $h){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(a.scopes=p.join(","))}r.tenantId&&(a.tid=r.tenantId);const c=a;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await r._getAppCheckToken(),h=d?`#${PF}=${encodeURIComponent(d)}`:"";return`${jF(r)}?${Lh(c).slice(1)}${h}`}function jF({config:r}){return r.emulator?tb(r,IF):`https://${r.authDomain}/${CF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="webStorageSupport";class RF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=g3,this._completeRedirectFn=nF,this._overrideRedirectResult=eF}async _openPopup(e,t,n,s){var i;eo((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await b4(e,t,n,Mv(),s);return kF(e,a,ob())}async _openRedirect(e,t,n,s){await this._originValidation(e);const i=await b4(e,t,n,Mv(),s);return O7(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(eo(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await wF(e),n=new iF(e);return t.register("authEvent",s=>(Ot(s?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xy,{type:Xy},s=>{var i;const a=(i=s?.[0])===null||i===void 0?void 0:i[Xy];a!==void 0&&t(!!a),Wi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uF(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return n3()||Qk()||nb()}}const DF=RF;var w4="@firebase/auth",_4="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LF(r){Hi(new xi("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=n.options;Ot(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:a,authDomain:c,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:s3(r)},h=new Y9(n,s,i,d);return i7(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Hi(new xi("auth-internal",e=>{const t=gl(e.getProvider("auth").getImmediate());return(n=>new FF(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(w4,_4,OF(r)),Cs(w4,_4,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF=300,VF=jk("authIdTokenMaxAge")||MF;let E4=null;const $F=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>VF)return;const s=t?.token;E4!==s&&(E4=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function cb(r=J1()){const e=ml(r,"auth");if(e.isInitialized())return e.getImmediate();const t=s7(r,{popupRedirectResolver:DF,persistence:[W7,p3,g3]}),n=jk("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=$F(i.toString());P7(t,a,()=>a(t.currentUser)),I7(t,c=>a(c))}}const s=Ik("auth");return s&&a7(t,`http://${s}`),t}function BF(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}X9({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const i=ua("internal-error");i.customData=s,t(i)},n.type="text/javascript",n.charset="UTF-8",BF().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LF("Browser");var T4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zo,E3;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,k){function P(){}P.prototype=k.prototype,S.D=k.prototype,S.prototype=new P,S.prototype.constructor=S,S.C=function(j,M,D){for(var O=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)O[pe-2]=arguments[pe];return k.prototype[M].apply(j,O)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,k,P){P||(P=0);var j=Array(16);if(typeof k=="string")for(var M=0;16>M;++M)j[M]=k.charCodeAt(P++)|k.charCodeAt(P++)<<8|k.charCodeAt(P++)<<16|k.charCodeAt(P++)<<24;else for(M=0;16>M;++M)j[M]=k[P++]|k[P++]<<8|k[P++]<<16|k[P++]<<24;k=S.g[0],P=S.g[1],M=S.g[2];var D=S.g[3],O=k+(D^P&(M^D))+j[0]+3614090360&4294967295;k=P+(O<<7&4294967295|O>>>25),O=D+(M^k&(P^M))+j[1]+3905402710&4294967295,D=k+(O<<12&4294967295|O>>>20),O=M+(P^D&(k^P))+j[2]+606105819&4294967295,M=D+(O<<17&4294967295|O>>>15),O=P+(k^M&(D^k))+j[3]+3250441966&4294967295,P=M+(O<<22&4294967295|O>>>10),O=k+(D^P&(M^D))+j[4]+4118548399&4294967295,k=P+(O<<7&4294967295|O>>>25),O=D+(M^k&(P^M))+j[5]+1200080426&4294967295,D=k+(O<<12&4294967295|O>>>20),O=M+(P^D&(k^P))+j[6]+2821735955&4294967295,M=D+(O<<17&4294967295|O>>>15),O=P+(k^M&(D^k))+j[7]+4249261313&4294967295,P=M+(O<<22&4294967295|O>>>10),O=k+(D^P&(M^D))+j[8]+1770035416&4294967295,k=P+(O<<7&4294967295|O>>>25),O=D+(M^k&(P^M))+j[9]+2336552879&4294967295,D=k+(O<<12&4294967295|O>>>20),O=M+(P^D&(k^P))+j[10]+4294925233&4294967295,M=D+(O<<17&4294967295|O>>>15),O=P+(k^M&(D^k))+j[11]+2304563134&4294967295,P=M+(O<<22&4294967295|O>>>10),O=k+(D^P&(M^D))+j[12]+1804603682&4294967295,k=P+(O<<7&4294967295|O>>>25),O=D+(M^k&(P^M))+j[13]+4254626195&4294967295,D=k+(O<<12&4294967295|O>>>20),O=M+(P^D&(k^P))+j[14]+2792965006&4294967295,M=D+(O<<17&4294967295|O>>>15),O=P+(k^M&(D^k))+j[15]+1236535329&4294967295,P=M+(O<<22&4294967295|O>>>10),O=k+(M^D&(P^M))+j[1]+4129170786&4294967295,k=P+(O<<5&4294967295|O>>>27),O=D+(P^M&(k^P))+j[6]+3225465664&4294967295,D=k+(O<<9&4294967295|O>>>23),O=M+(k^P&(D^k))+j[11]+643717713&4294967295,M=D+(O<<14&4294967295|O>>>18),O=P+(D^k&(M^D))+j[0]+3921069994&4294967295,P=M+(O<<20&4294967295|O>>>12),O=k+(M^D&(P^M))+j[5]+3593408605&4294967295,k=P+(O<<5&4294967295|O>>>27),O=D+(P^M&(k^P))+j[10]+38016083&4294967295,D=k+(O<<9&4294967295|O>>>23),O=M+(k^P&(D^k))+j[15]+3634488961&4294967295,M=D+(O<<14&4294967295|O>>>18),O=P+(D^k&(M^D))+j[4]+3889429448&4294967295,P=M+(O<<20&4294967295|O>>>12),O=k+(M^D&(P^M))+j[9]+568446438&4294967295,k=P+(O<<5&4294967295|O>>>27),O=D+(P^M&(k^P))+j[14]+3275163606&4294967295,D=k+(O<<9&4294967295|O>>>23),O=M+(k^P&(D^k))+j[3]+4107603335&4294967295,M=D+(O<<14&4294967295|O>>>18),O=P+(D^k&(M^D))+j[8]+1163531501&4294967295,P=M+(O<<20&4294967295|O>>>12),O=k+(M^D&(P^M))+j[13]+2850285829&4294967295,k=P+(O<<5&4294967295|O>>>27),O=D+(P^M&(k^P))+j[2]+4243563512&4294967295,D=k+(O<<9&4294967295|O>>>23),O=M+(k^P&(D^k))+j[7]+1735328473&4294967295,M=D+(O<<14&4294967295|O>>>18),O=P+(D^k&(M^D))+j[12]+2368359562&4294967295,P=M+(O<<20&4294967295|O>>>12),O=k+(P^M^D)+j[5]+4294588738&4294967295,k=P+(O<<4&4294967295|O>>>28),O=D+(k^P^M)+j[8]+2272392833&4294967295,D=k+(O<<11&4294967295|O>>>21),O=M+(D^k^P)+j[11]+1839030562&4294967295,M=D+(O<<16&4294967295|O>>>16),O=P+(M^D^k)+j[14]+4259657740&4294967295,P=M+(O<<23&4294967295|O>>>9),O=k+(P^M^D)+j[1]+2763975236&4294967295,k=P+(O<<4&4294967295|O>>>28),O=D+(k^P^M)+j[4]+1272893353&4294967295,D=k+(O<<11&4294967295|O>>>21),O=M+(D^k^P)+j[7]+4139469664&4294967295,M=D+(O<<16&4294967295|O>>>16),O=P+(M^D^k)+j[10]+3200236656&4294967295,P=M+(O<<23&4294967295|O>>>9),O=k+(P^M^D)+j[13]+681279174&4294967295,k=P+(O<<4&4294967295|O>>>28),O=D+(k^P^M)+j[0]+3936430074&4294967295,D=k+(O<<11&4294967295|O>>>21),O=M+(D^k^P)+j[3]+3572445317&4294967295,M=D+(O<<16&4294967295|O>>>16),O=P+(M^D^k)+j[6]+76029189&4294967295,P=M+(O<<23&4294967295|O>>>9),O=k+(P^M^D)+j[9]+3654602809&4294967295,k=P+(O<<4&4294967295|O>>>28),O=D+(k^P^M)+j[12]+3873151461&4294967295,D=k+(O<<11&4294967295|O>>>21),O=M+(D^k^P)+j[15]+530742520&4294967295,M=D+(O<<16&4294967295|O>>>16),O=P+(M^D^k)+j[2]+3299628645&4294967295,P=M+(O<<23&4294967295|O>>>9),O=k+(M^(P|~D))+j[0]+4096336452&4294967295,k=P+(O<<6&4294967295|O>>>26),O=D+(P^(k|~M))+j[7]+1126891415&4294967295,D=k+(O<<10&4294967295|O>>>22),O=M+(k^(D|~P))+j[14]+2878612391&4294967295,M=D+(O<<15&4294967295|O>>>17),O=P+(D^(M|~k))+j[5]+4237533241&4294967295,P=M+(O<<21&4294967295|O>>>11),O=k+(M^(P|~D))+j[12]+1700485571&4294967295,k=P+(O<<6&4294967295|O>>>26),O=D+(P^(k|~M))+j[3]+2399980690&4294967295,D=k+(O<<10&4294967295|O>>>22),O=M+(k^(D|~P))+j[10]+4293915773&4294967295,M=D+(O<<15&4294967295|O>>>17),O=P+(D^(M|~k))+j[1]+2240044497&4294967295,P=M+(O<<21&4294967295|O>>>11),O=k+(M^(P|~D))+j[8]+1873313359&4294967295,k=P+(O<<6&4294967295|O>>>26),O=D+(P^(k|~M))+j[15]+4264355552&4294967295,D=k+(O<<10&4294967295|O>>>22),O=M+(k^(D|~P))+j[6]+2734768916&4294967295,M=D+(O<<15&4294967295|O>>>17),O=P+(D^(M|~k))+j[13]+1309151649&4294967295,P=M+(O<<21&4294967295|O>>>11),O=k+(M^(P|~D))+j[4]+4149444226&4294967295,k=P+(O<<6&4294967295|O>>>26),O=D+(P^(k|~M))+j[11]+3174756917&4294967295,D=k+(O<<10&4294967295|O>>>22),O=M+(k^(D|~P))+j[2]+718787259&4294967295,M=D+(O<<15&4294967295|O>>>17),O=P+(D^(M|~k))+j[9]+3951481745&4294967295,S.g[0]=S.g[0]+k&4294967295,S.g[1]=S.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,S.g[2]=S.g[2]+M&4294967295,S.g[3]=S.g[3]+D&4294967295}n.prototype.u=function(S,k){k===void 0&&(k=S.length);for(var P=k-this.blockSize,j=this.B,M=this.h,D=0;D<k;){if(M==0)for(;D<=P;)s(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<k;)if(j[M++]=S.charCodeAt(D++),M==this.blockSize){s(this,j),M=0;break}}else for(;D<k;)if(j[M++]=S[D++],M==this.blockSize){s(this,j),M=0;break}}this.h=M,this.o+=k},n.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var k=1;k<S.length-8;++k)S[k]=0;var P=8*this.o;for(k=S.length-8;k<S.length;++k)S[k]=P&255,P/=256;for(this.u(S),S=Array(16),k=P=0;4>k;++k)for(var j=0;32>j;j+=8)S[P++]=this.g[k]>>>j&255;return S};function i(S,k){var P=c;return Object.prototype.hasOwnProperty.call(P,S)?P[S]:P[S]=k(S)}function a(S,k){this.h=k;for(var P=[],j=!0,M=S.length-1;0<=M;M--){var D=S[M]|0;j&&D==k||(P[M]=D,j=!1)}this.g=P}var c={};function d(S){return-128<=S&&128>S?i(S,function(k){return new a([k|0],0>k?-1:0)}):new a([S|0],0>S?-1:0)}function h(S){if(isNaN(S)||!isFinite(S))return m;if(0>S)return E(h(-S));for(var k=[],P=1,j=0;S>=P;j++)k[j]=S/P|0,P*=4294967296;return new a(k,0)}function p(S,k){if(S.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(S.charAt(0)=="-")return E(p(S.substring(1),k));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=h(Math.pow(k,8)),j=m,M=0;M<S.length;M+=8){var D=Math.min(8,S.length-M),O=parseInt(S.substring(M,M+D),k);8>D?(D=h(Math.pow(k,D)),j=j.j(D).add(h(O))):(j=j.j(P),j=j.add(h(O)))}return j}var m=d(0),x=d(1),v=d(16777216);r=a.prototype,r.m=function(){if(w(this))return-E(this).m();for(var S=0,k=1,P=0;P<this.g.length;P++){var j=this.i(P);S+=(0<=j?j:4294967296+j)*k,k*=4294967296}return S},r.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(_(this))return"0";if(w(this))return"-"+E(this).toString(S);for(var k=h(Math.pow(S,6)),P=this,j="";;){var M=L(P,k).g;P=R(P,M.j(k));var D=((0<P.g.length?P.g[0]:P.h)>>>0).toString(S);if(P=M,_(P))return D+j;for(;6>D.length;)D="0"+D;j=D+j}},r.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function _(S){if(S.h!=0)return!1;for(var k=0;k<S.g.length;k++)if(S.g[k]!=0)return!1;return!0}function w(S){return S.h==-1}r.l=function(S){return S=R(this,S),w(S)?-1:_(S)?0:1};function E(S){for(var k=S.g.length,P=[],j=0;j<k;j++)P[j]=~S.g[j];return new a(P,~S.h).add(x)}r.abs=function(){return w(this)?E(this):this},r.add=function(S){for(var k=Math.max(this.g.length,S.g.length),P=[],j=0,M=0;M<=k;M++){var D=j+(this.i(M)&65535)+(S.i(M)&65535),O=(D>>>16)+(this.i(M)>>>16)+(S.i(M)>>>16);j=O>>>16,D&=65535,O&=65535,P[M]=O<<16|D}return new a(P,P[P.length-1]&-2147483648?-1:0)};function R(S,k){return S.add(E(k))}r.j=function(S){if(_(this)||_(S))return m;if(w(this))return w(S)?E(this).j(E(S)):E(E(this).j(S));if(w(S))return E(this.j(E(S)));if(0>this.l(v)&&0>S.l(v))return h(this.m()*S.m());for(var k=this.g.length+S.g.length,P=[],j=0;j<2*k;j++)P[j]=0;for(j=0;j<this.g.length;j++)for(var M=0;M<S.g.length;M++){var D=this.i(j)>>>16,O=this.i(j)&65535,pe=S.i(M)>>>16,Ae=S.i(M)&65535;P[2*j+2*M]+=O*Ae,C(P,2*j+2*M),P[2*j+2*M+1]+=D*Ae,C(P,2*j+2*M+1),P[2*j+2*M+1]+=O*pe,C(P,2*j+2*M+1),P[2*j+2*M+2]+=D*pe,C(P,2*j+2*M+2)}for(j=0;j<k;j++)P[j]=P[2*j+1]<<16|P[2*j];for(j=k;j<2*k;j++)P[j]=0;return new a(P,0)};function C(S,k){for(;(S[k]&65535)!=S[k];)S[k+1]+=S[k]>>>16,S[k]&=65535,k++}function V(S,k){this.g=S,this.h=k}function L(S,k){if(_(k))throw Error("division by zero");if(_(S))return new V(m,m);if(w(S))return k=L(E(S),k),new V(E(k.g),E(k.h));if(w(k))return k=L(S,E(k)),new V(E(k.g),k.h);if(30<S.g.length){if(w(S)||w(k))throw Error("slowDivide_ only works with positive integers.");for(var P=x,j=k;0>=j.l(S);)P=K(P),j=K(j);var M=H(P,1),D=H(j,1);for(j=H(j,2),P=H(P,2);!_(j);){var O=D.add(j);0>=O.l(S)&&(M=M.add(P),D=O),j=H(j,1),P=H(P,1)}return k=R(S,M.j(k)),new V(M,k)}for(M=m;0<=S.l(k);){for(P=Math.max(1,Math.floor(S.m()/k.m())),j=Math.ceil(Math.log(P)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),D=h(P),O=D.j(k);w(O)||0<O.l(S);)P-=j,D=h(P),O=D.j(k);_(D)&&(D=x),M=M.add(D),S=R(S,O)}return new V(M,S)}r.A=function(S){return L(this,S).h},r.and=function(S){for(var k=Math.max(this.g.length,S.g.length),P=[],j=0;j<k;j++)P[j]=this.i(j)&S.i(j);return new a(P,this.h&S.h)},r.or=function(S){for(var k=Math.max(this.g.length,S.g.length),P=[],j=0;j<k;j++)P[j]=this.i(j)|S.i(j);return new a(P,this.h|S.h)},r.xor=function(S){for(var k=Math.max(this.g.length,S.g.length),P=[],j=0;j<k;j++)P[j]=this.i(j)^S.i(j);return new a(P,this.h^S.h)};function K(S){for(var k=S.g.length+1,P=[],j=0;j<k;j++)P[j]=S.i(j)<<1|S.i(j-1)>>>31;return new a(P,S.h)}function H(S,k){var P=k>>5;k%=32;for(var j=S.g.length-P,M=[],D=0;D<j;D++)M[D]=0<k?S.i(D+P)>>>k|S.i(D+P+1)<<32-k:S.i(D+P);return new a(M,S.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,E3=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,Zo=a}).apply(typeof T4<"u"?T4:typeof self<"u"?self:typeof window<"u"?window:{});var Np=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var T3,N0,A3,Jp,Bv,N3,k3,S3;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,T,I){return g==Array.prototype||g==Object.prototype||(g[T]=I.value),g};function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Np=="object"&&Np];for(var T=0;T<g.length;++T){var I=g[T];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var n=t(this);function s(g,T){if(T)e:{var I=n;g=g.split(".");for(var G=0;G<g.length-1;G++){var ge=g[G];if(!(ge in I))break e;I=I[ge]}g=g[g.length-1],G=I[g],T=T(G),T!=G&&T!=null&&e(I,g,{configurable:!0,writable:!0,value:T})}}function i(g,T){g instanceof String&&(g+="");var I=0,G=!1,ge={next:function(){if(!G&&I<g.length){var ke=I++;return{value:T(ke,g[ke]),done:!1}}return G=!0,{done:!0,value:void 0}}};return ge[Symbol.iterator]=function(){return ge},ge}s("Array.prototype.values",function(g){return g||function(){return i(this,function(T,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function d(g){var T=typeof g;return T=T!="object"?T:g?Array.isArray(g)?"array":T:"null",T=="array"||T=="object"&&typeof g.length=="number"}function h(g){var T=typeof g;return T=="object"&&g!=null||T=="function"}function p(g,T,I){return g.call.apply(g.bind,arguments)}function m(g,T,I){if(!g)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var ge=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ge,G),g.apply(T,ge)}}return function(){return g.apply(T,arguments)}}function x(g,T,I){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,x.apply(null,arguments)}function v(g,T){var I=Array.prototype.slice.call(arguments,1);return function(){var G=I.slice();return G.push.apply(G,arguments),g.apply(this,G)}}function _(g,T){function I(){}I.prototype=T.prototype,g.aa=T.prototype,g.prototype=new I,g.prototype.constructor=g,g.Qb=function(G,ge,ke){for(var it=Array(arguments.length-2),xr=2;xr<arguments.length;xr++)it[xr-2]=arguments[xr];return T.prototype[ge].apply(G,it)}}function w(g){const T=g.length;if(0<T){const I=Array(T);for(let G=0;G<T;G++)I[G]=g[G];return I}return[]}function E(g,T){for(let I=1;I<arguments.length;I++){const G=arguments[I];if(d(G)){const ge=g.length||0,ke=G.length||0;g.length=ge+ke;for(let it=0;it<ke;it++)g[ge+it]=G[it]}else g.push(G)}}class R{constructor(T,I){this.i=T,this.j=I,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function C(g){return/^[\s\xa0]*$/.test(g)}function V(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function L(g){return L[" "](g),g}L[" "]=function(){};var K=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function H(g,T,I){for(const G in g)T.call(I,g[G],G,g)}function S(g,T){for(const I in g)T.call(void 0,g[I],I,g)}function k(g){const T={};for(const I in g)T[I]=g[I];return T}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(g,T){let I,G;for(let ge=1;ge<arguments.length;ge++){G=arguments[ge];for(I in G)g[I]=G[I];for(let ke=0;ke<P.length;ke++)I=P[ke],Object.prototype.hasOwnProperty.call(G,I)&&(g[I]=G[I])}}function M(g){var T=1;g=g.split(":");const I=[];for(;0<T&&g.length;)I.push(g.shift()),T--;return g.length&&I.push(g.join(":")),I}function D(g){c.setTimeout(()=>{throw g},0)}function O(){var g=Te;let T=null;return g.g&&(T=g.g,g.g=g.g.next,g.g||(g.h=null),T.next=null),T}class pe{constructor(){this.h=this.g=null}add(T,I){const G=Ae.get();G.set(T,I),this.h?this.h.next=G:this.g=G,this.h=G}}var Ae=new R(()=>new Fe,g=>g.reset());class Fe{constructor(){this.next=this.g=this.h=null}set(T,I){this.h=T,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,Ee=!1,Te=new pe,Ne=()=>{const g=c.Promise.resolve(void 0);Me=()=>{g.then(ae)}};var ae=()=>{for(var g;g=O();){try{g.h.call(g.g)}catch(I){D(I)}var T=Ae;T.j(g),100>T.h&&(T.h++,g.next=T.g,T.g=g)}Ee=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(g,T){this.type=g,this.g=this.target=T,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var ie=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,T=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const I=()=>{};c.addEventListener("test",I,T),c.removeEventListener("test",I,T)}catch{}return g})();function ne(g,T){if(oe.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var I=this.type=g.type,G=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=T,T=g.relatedTarget){if(K){e:{try{L(T.nodeName);var ge=!0;break e}catch{}ge=!1}ge||(T=null)}}else I=="mouseover"?T=g.fromElement:I=="mouseout"&&(T=g.toElement);this.relatedTarget=T,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:z[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&ne.aa.h.call(this)}}_(ne,oe);var z={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),De=0;function Se(g,T,I,G,ge){this.listener=g,this.proxy=null,this.src=T,this.type=I,this.capture=!!G,this.ha=ge,this.key=++De,this.da=this.fa=!1}function we(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Qe(g){this.src=g,this.g={},this.h=0}Qe.prototype.add=function(g,T,I,G,ge){var ke=g.toString();g=this.g[ke],g||(g=this.g[ke]=[],this.h++);var it=zt(g,T,G,ge);return-1<it?(T=g[it],I||(T.fa=!1)):(T=new Se(T,this.src,ke,!!G,ge),T.fa=I,g.push(T)),T};function ft(g,T){var I=T.type;if(I in g.g){var G=g.g[I],ge=Array.prototype.indexOf.call(G,T,void 0),ke;(ke=0<=ge)&&Array.prototype.splice.call(G,ge,1),ke&&(we(T),g.g[I].length==0&&(delete g.g[I],g.h--))}}function zt(g,T,I,G){for(var ge=0;ge<g.length;++ge){var ke=g[ge];if(!ke.da&&ke.listener==T&&ke.capture==!!I&&ke.ha==G)return ge}return-1}var wt="closure_lm_"+(1e6*Math.random()|0),Yt={};function kt(g,T,I,G,ge){if(Array.isArray(T)){for(var ke=0;ke<T.length;ke++)kt(g,T[ke],I,G,ge);return null}return I=St(I),g&&g[_e]?g.K(T,I,h(G)?!!G.capture:!1,ge):Oe(g,T,I,!1,G,ge)}function Oe(g,T,I,G,ge,ke){if(!T)throw Error("Invalid event type");var it=h(ge)?!!ge.capture:!!ge,xr=ct(g);if(xr||(g[wt]=xr=new Qe(g)),I=xr.add(T,I,G,it,ke),I.proxy)return I;if(G=Xt(),I.proxy=G,G.src=g,G.listener=I,g.addEventListener)ie||(ge=it),ge===void 0&&(ge=!1),g.addEventListener(T.toString(),G,ge);else if(g.attachEvent)g.attachEvent(de(T.toString()),G);else if(g.addListener&&g.removeListener)g.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Xt(){function g(I){return T.call(g.src,g.listener,I)}const T=et;return g}function Rt(g,T,I,G,ge){if(Array.isArray(T))for(var ke=0;ke<T.length;ke++)Rt(g,T[ke],I,G,ge);else G=h(G)?!!G.capture:!!G,I=St(I),g&&g[_e]?(g=g.i,T=String(T).toString(),T in g.g&&(ke=g.g[T],I=zt(ke,I,G,ge),-1<I&&(we(ke[I]),Array.prototype.splice.call(ke,I,1),ke.length==0&&(delete g.g[T],g.h--)))):g&&(g=ct(g))&&(T=g.g[T.toString()],g=-1,T&&(g=zt(T,I,G,ge)),(I=-1<g?T[g]:null)&&He(I))}function He(g){if(typeof g!="number"&&g&&!g.da){var T=g.src;if(T&&T[_e])ft(T.i,g);else{var I=g.type,G=g.proxy;T.removeEventListener?T.removeEventListener(I,G,g.capture):T.detachEvent?T.detachEvent(de(I),G):T.addListener&&T.removeListener&&T.removeListener(G),(I=ct(T))?(ft(I,g),I.h==0&&(I.src=null,T[wt]=null)):we(g)}}}function de(g){return g in Yt?Yt[g]:Yt[g]="on"+g}function et(g,T){if(g.da)g=!0;else{T=new ne(T,this);var I=g.listener,G=g.ha||g.src;g.fa&&He(g),g=I.call(G,T)}return g}function ct(g){return g=g[wt],g instanceof Qe?g:null}var pt="__closure_events_fn_"+(1e9*Math.random()>>>0);function St(g){return typeof g=="function"?g:(g[pt]||(g[pt]=function(T){return g.handleEvent(T)}),g[pt])}function ht(){W.call(this),this.i=new Qe(this),this.M=this,this.F=null}_(ht,W),ht.prototype[_e]=!0,ht.prototype.removeEventListener=function(g,T,I,G){Rt(this,g,T,I,G)};function jt(g,T){var I,G=g.F;if(G)for(I=[];G;G=G.F)I.push(G);if(g=g.M,G=T.type||T,typeof T=="string")T=new oe(T,g);else if(T instanceof oe)T.target=T.target||g;else{var ge=T;T=new oe(G,g),j(T,ge)}if(ge=!0,I)for(var ke=I.length-1;0<=ke;ke--){var it=T.g=I[ke];ge=dt(it,G,!0,T)&&ge}if(it=T.g=g,ge=dt(it,G,!0,T)&&ge,ge=dt(it,G,!1,T)&&ge,I)for(ke=0;ke<I.length;ke++)it=T.g=I[ke],ge=dt(it,G,!1,T)&&ge}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var g=this.i,T;for(T in g.g){for(var I=g.g[T],G=0;G<I.length;G++)we(I[G]);delete g.g[T],g.h--}}this.F=null},ht.prototype.K=function(g,T,I,G){return this.i.add(String(g),T,!1,I,G)},ht.prototype.L=function(g,T,I,G){return this.i.add(String(g),T,!0,I,G)};function dt(g,T,I,G){if(T=g.i.g[String(T)],!T)return!0;T=T.concat();for(var ge=!0,ke=0;ke<T.length;++ke){var it=T[ke];if(it&&!it.da&&it.capture==I){var xr=it.listener,mn=it.ha||it.src;it.fa&&ft(g.i,it),ge=xr.call(mn,G)!==!1&&ge}}return ge&&!G.defaultPrevented}function gr(g,T,I){if(typeof g=="function")I&&(g=x(g,I));else if(g&&typeof g.handleEvent=="function")g=x(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:c.setTimeout(g,T||0)}function J(g){g.g=gr(()=>{g.g=null,g.i&&(g.i=!1,J(g))},g.l);const T=g.h;g.h=null,g.m.apply(null,T)}class Ce extends W{constructor(T,I){super(),this.m=T,this.l=I,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:J(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gt(g){W.call(this),this.h=g,this.g={}}_(gt,W);var fe=[];function Ie(g){H(g.g,function(T,I){this.g.hasOwnProperty(I)&&He(T)},g),g.g={}}gt.prototype.N=function(){gt.aa.N.call(this),Ie(this)},gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Le=c.JSON.stringify,Ze=c.JSON.parse,vt=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function It(){}It.prototype.h=null;function at(g){return g.h||(g.h=g.i())}function lt(){}var tt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nt(){oe.call(this,"d")}_(Nt,oe);function Ut(){oe.call(this,"c")}_(Ut,oe);var Qt={},Fr=null;function Or(){return Fr=Fr||new ht}Qt.La="serverreachability";function _n(g){oe.call(this,Qt.La,g)}_(_n,oe);function mr(g){const T=Or();jt(T,new _n(T))}Qt.STAT_EVENT="statevent";function Kn(g,T){oe.call(this,Qt.STAT_EVENT,g),this.stat=T}_(Kn,oe);function hr(g){const T=Or();jt(T,new Kn(T,g))}Qt.Ma="timingevent";function Rn(g,T){oe.call(this,Qt.Ma,g),this.size=T}_(Rn,oe);function Nr(g,T){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},T)}function En(){this.g=!0}En.prototype.xa=function(){this.g=!1};function an(g,T,I,G,ge,ke){g.info(function(){if(g.g)if(ke)for(var it="",xr=ke.split("&"),mn=0;mn<xr.length;mn++){var tr=xr[mn].split("=");if(1<tr.length){var Tn=tr[0];tr=tr[1];var on=Tn.split("_");it=2<=on.length&&on[1]=="type"?it+(Tn+"="+tr+"&"):it+(Tn+"=redacted&")}}else it=null;else it=ke;return"XMLHTTP REQ ("+G+") [attempt "+ge+"]: "+T+`
`+I+`
`+it})}function pn(g,T,I,G,ge,ke,it){g.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+ge+"]: "+T+`
`+I+`
`+ke+" "+it})}function U(g,T,I,G){g.info(function(){return"XMLHTTP TEXT ("+T+"): "+Y(g,I)+(G?" "+G:"")})}function ee(g,T){g.info(function(){return"TIMEOUT: "+T})}En.prototype.info=function(){};function Y(g,T){if(!g.g)return T;if(!T)return null;try{var I=JSON.parse(T);if(I){for(g=0;g<I.length;g++)if(Array.isArray(I[g])){var G=I[g];if(!(2>G.length)){var ge=G[1];if(Array.isArray(ge)&&!(1>ge.length)){var ke=ge[0];if(ke!="noop"&&ke!="stop"&&ke!="close")for(var it=1;it<ge.length;it++)ge[it]=""}}}}return Le(I)}catch{return T}}var X={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},te={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},F;function Q(){}_(Q,It),Q.prototype.g=function(){return new XMLHttpRequest},Q.prototype.i=function(){return{}},F=new Q;function le(g,T,I,G){this.j=g,this.i=T,this.l=I,this.R=G||1,this.U=new gt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new se}function se(){this.i=null,this.g="",this.h=!1}var ue={},me={};function $e(g,T,I){g.L=1,g.v=yo(Os(T)),g.m=I,g.P=!0,ze(g,null)}function ze(g,T){g.F=Date.now(),Be(g),g.A=Os(g.v);var I=g.A,G=g.R;Array.isArray(G)||(G=[String(G)]),bo(I.i,"t",G),g.C=0,I=g.j.J,g.h=new se,g.g=Sf(g.j,I?T:null,!g.m),0<g.O&&(g.M=new Ce(x(g.Y,g,g.g),g.O)),T=g.U,I=g.g,G=g.ca;var ge="readystatechange";Array.isArray(ge)||(ge&&(fe[0]=ge.toString()),ge=fe);for(var ke=0;ke<ge.length;ke++){var it=kt(I,ge[ke],G||T.handleEvent,!1,T.h||T);if(!it)break;T.g[it.key]=it}T=g.H?k(g.H):{},g.m?(g.u||(g.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,T)):(g.u="GET",g.g.ea(g.A,g.u,null,T)),mr(),an(g.i,g.u,g.A,g.l,g.R,g.m)}le.prototype.ca=function(g){g=g.target;const T=this.M;T&&vs(g)==3?T.j():this.Y(g)},le.prototype.Y=function(g){try{if(g==this.g)e:{const on=vs(this.g);var T=this.g.Ba();const ri=this.g.Z();if(!(3>on)&&(on!=3||this.g&&(this.h.h||this.g.oa()||Ud(this.g)))){this.J||on!=4||T==7||(T==8||0>=ri?mr(3):mr(2)),Wt(this);var I=this.g.Z();this.X=I;t:if(Ye(this)){var G=Ud(this.g);g="";var ge=G.length,ke=vs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ir(this),Ht(this);var it="";break t}this.h.i=new c.TextDecoder}for(T=0;T<ge;T++)this.h.h=!0,g+=this.h.i.decode(G[T],{stream:!(ke&&T==ge-1)});G.length=0,this.h.g+=g,this.C=0,it=this.h.g}else it=this.g.oa();if(this.o=I==200,pn(this.i,this.u,this.A,this.l,this.R,on,I),this.o){if(this.T&&!this.K){t:{if(this.g){var xr,mn=this.g;if((xr=mn.g?mn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(xr)){var tr=xr;break t}}tr=null}if(I=tr)U(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ls(this,I);else{this.o=!1,this.s=3,hr(12),ir(this),Ht(this);break e}}if(this.P){I=!0;let Ms;for(;!this.J&&this.C<it.length;)if(Ms=Ve(this,it),Ms==me){on==4&&(this.s=4,hr(14),I=!1),U(this.i,this.l,null,"[Incomplete Response]");break}else if(Ms==ue){this.s=4,hr(15),U(this.i,this.l,it,"[Invalid Chunk]"),I=!1;break}else U(this.i,this.l,Ms,null),ls(this,Ms);if(Ye(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),on!=4||it.length!=0||this.h.h||(this.s=1,hr(16),I=!1),this.o=this.o&&I,!I)U(this.i,this.l,it,"[Invalid Chunked Response]"),ir(this),Ht(this);else if(0<it.length&&!this.W){this.W=!0;var Tn=this.j;Tn.g==this&&Tn.ba&&!Tn.M&&(Tn.j.info("Great, no buffering proxy detected. Bytes received: "+it.length),Hd(Tn),Tn.M=!0,hr(11))}}else U(this.i,this.l,it,null),ls(this,it);on==4&&ir(this),this.o&&!this.J&&(on==4?Qc(this.j,this):(this.o=!1,Be(this)))}else qc(this.g),I==400&&0<it.indexOf("Unknown SID")?(this.s=3,hr(12)):(this.s=0,hr(13)),ir(this),Ht(this)}}}catch{}finally{}};function Ye(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Ve(g,T){var I=g.C,G=T.indexOf(`
`,I);return G==-1?me:(I=Number(T.substring(I,G)),isNaN(I)?ue:(G+=1,G+I>T.length?me:(T=T.slice(G,G+I),g.C=G+I,T)))}le.prototype.cancel=function(){this.J=!0,ir(this)};function Be(g){g.S=Date.now()+g.I,Pt(g,g.I)}function Pt(g,T){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Nr(x(g.ba,g),T)}function Wt(g){g.B&&(c.clearTimeout(g.B),g.B=null)}le.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(ee(this.i,this.A),this.L!=2&&(mr(),hr(17)),ir(this),this.s=2,Ht(this)):Pt(this,this.S-g)};function Ht(g){g.j.G==0||g.J||Qc(g.j,g)}function ir(g){Wt(g);var T=g.M;T&&typeof T.ma=="function"&&T.ma(),g.M=null,Ie(g.U),g.g&&(T=g.g,g.g=null,T.abort(),T.ma())}function ls(g,T){try{var I=g.j;if(I.G!=0&&(I.g==g||kr(I.h,g))){if(!g.K&&kr(I.h,g)&&I.G==3){try{var G=I.Da.g.parse(T)}catch{G=null}if(Array.isArray(G)&&G.length==3){var ge=G;if(ge[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<g.F)Xc(I),Ti(I);else break e;Yc(I),hr(18)}}else I.za=ge[1],0<I.za-I.T&&37500>ge[2]&&I.F&&I.v==0&&!I.C&&(I.C=Nr(x(I.Za,I),6e3));if(1>=Yi(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Pa(I,11)}else if((g.K||I.g==g)&&Xc(I),!C(T))for(ge=I.Da.g.parse(T),T=0;T<ge.length;T++){let tr=ge[T];if(I.T=tr[0],tr=tr[1],I.G==2)if(tr[0]=="c"){I.K=tr[1],I.ia=tr[2];const Tn=tr[3];Tn!=null&&(I.la=Tn,I.j.info("VER="+I.la));const on=tr[4];on!=null&&(I.Aa=on,I.j.info("SVER="+I.Aa));const ri=tr[5];ri!=null&&typeof ri=="number"&&0<ri&&(G=1.5*ri,I.L=G,I.j.info("backChannelRequestTimeoutMs_="+G)),G=I;const Ms=g.g;if(Ms){const Nl=Ms.g?Ms.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nl){var ke=G.h;ke.g||Nl.indexOf("spdy")==-1&&Nl.indexOf("quic")==-1&&Nl.indexOf("h2")==-1||(ke.j=ke.l,ke.g=new Set,ke.h&&(Na(ke,ke.h),ke.h=null))}if(G.D){const Zc=Ms.g?Ms.g.getResponseHeader("X-HTTP-Session-Id"):null;Zc&&(G.ya=Zc,Sr(G.I,G.D,Zc))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-g.F,I.j.info("Handshake RTT: "+I.R+"ms")),G=I;var it=g;if(G.qa=kf(G,G.J?G.ia:null,G.W),it.K){Bc(G.h,it);var xr=it,mn=G.L;mn&&(xr.I=mn),xr.B&&(Wt(xr),Be(xr)),G.g=it}else Al(G);0<I.i.length&&Zi(I)}else tr[0]!="stop"&&tr[0]!="close"||Pa(I,7);else I.G==3&&(tr[0]=="stop"||tr[0]=="close"?tr[0]=="stop"?Pa(I,7):Fn(I):tr[0]!="noop"&&I.l&&I.l.ta(tr),I.v=0)}}mr(4)}catch{}}var Yn=class{constructor(g,T){this.g=g,this.map=T}};function Xn(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zr(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Yi(g){return g.h?1:g.g?g.g.size:0}function kr(g,T){return g.h?g.h==T:g.g?g.g.has(T):!1}function Na(g,T){g.g?g.g.add(T):g.h=T}function Bc(g,T){g.h&&g.h==T?g.h=null:g.g&&g.g.has(T)&&g.g.delete(T)}Xn.prototype.cancel=function(){if(this.i=Uc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Uc(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let T=g.i;for(const I of g.g.values())T=T.concat(I.D);return T}return w(g.i)}function fo(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(d(g)){for(var T=[],I=g.length,G=0;G<I;G++)T.push(g[G]);return T}T=[],I=0;for(G in g)T[I++]=g[G];return T}function po(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(d(g)||typeof g=="string"){var T=[];g=g.length;for(var I=0;I<g;I++)T.push(I);return T}T=[],I=0;for(const G in g)T[I++]=G;return T}}}function mo(g,T){if(g.forEach&&typeof g.forEach=="function")g.forEach(T,void 0);else if(d(g)||typeof g=="string")Array.prototype.forEach.call(g,T,void 0);else for(var I=po(g),G=fo(g),ge=G.length,ke=0;ke<ge;ke++)T.call(void 0,G[ke],I&&I[ke],g)}var wl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fx(g,T){if(g){g=g.split("&");for(var I=0;I<g.length;I++){var G=g[I].indexOf("="),ge=null;if(0<=G){var ke=g[I].substring(0,G);ge=g[I].substring(G+1)}else ke=g[I];T(ke,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}function ka(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof ka){this.h=g.h,_l(this,g.j),this.o=g.o,this.g=g.g,go(this,g.s),this.l=g.l;var T=g.i,I=new Xi;I.i=T.i,T.g&&(I.g=new Map(T.g),I.h=T.h),xo(this,I),this.m=g.m}else g&&(T=String(g).match(wl))?(this.h=!1,_l(this,T[1]||"",!0),this.o=er(T[2]||""),this.g=er(T[3]||"",!0),go(this,T[4]),this.l=er(T[5]||"",!0),xo(this,T[6]||"",!0),this.m=er(T[7]||"")):(this.h=!1,this.i=new Xi(null,this.h))}ka.prototype.toString=function(){var g=[],T=this.j;T&&g.push(vo(T,zc,!0),":");var I=this.g;return(I||T=="file")&&(g.push("//"),(T=this.o)&&g.push(vo(T,zc,!0),"@"),g.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&g.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&g.push("/"),g.push(vo(I,I.charAt(0)=="/"?vf:yf,!0))),(I=this.i.toString())&&g.push("?",I),(I=this.m)&&g.push("#",vo(I,Vd)),g.join("")};function Os(g){return new ka(g)}function _l(g,T,I){g.j=I?er(T,!0):T,g.j&&(g.j=g.j.replace(/:$/,""))}function go(g,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);g.s=T}else g.s=null}function xo(g,T,I){T instanceof Xi?(g.i=T,Qi(g.i,g.h)):(I||(T=vo(T,bf)),g.i=new Xi(T,g.h))}function Sr(g,T,I){g.i.set(T,I)}function yo(g){return Sr(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function er(g,T){return g?T?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function vo(g,T,I){return typeof g=="string"?(g=encodeURI(g).replace(T,xf),I&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function xf(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var zc=/[#\/\?@]/g,yf=/[#\?:]/g,vf=/[#\?]/g,bf=/[#\?@]/g,Vd=/#/g;function Xi(g,T){this.h=this.g=null,this.i=g||null,this.j=!!T}function Dn(g){g.g||(g.g=new Map,g.h=0,g.i&&fx(g.i,function(T,I){g.add(decodeURIComponent(T.replace(/\+/g," ")),I)}))}r=Xi.prototype,r.add=function(g,T){Dn(this),this.i=null,g=ti(this,g);var I=this.g.get(g);return I||this.g.set(g,I=[]),I.push(T),this.h+=1,this};function bi(g,T){Dn(g),T=ti(g,T),g.g.has(T)&&(g.i=null,g.h-=g.g.get(T).length,g.g.delete(T))}function wi(g,T){return Dn(g),T=ti(g,T),g.g.has(T)}r.forEach=function(g,T){Dn(this),this.g.forEach(function(I,G){I.forEach(function(ge){g.call(T,ge,G,this)},this)},this)},r.na=function(){Dn(this);const g=Array.from(this.g.values()),T=Array.from(this.g.keys()),I=[];for(let G=0;G<T.length;G++){const ge=g[G];for(let ke=0;ke<ge.length;ke++)I.push(T[G])}return I},r.V=function(g){Dn(this);let T=[];if(typeof g=="string")wi(this,g)&&(T=T.concat(this.g.get(ti(this,g))));else{g=Array.from(this.g.values());for(let I=0;I<g.length;I++)T=T.concat(g[I])}return T},r.set=function(g,T){return Dn(this),this.i=null,g=ti(this,g),wi(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[T]),this.h+=1,this},r.get=function(g,T){return g?(g=this.V(g),0<g.length?String(g[0]):T):T};function bo(g,T,I){bi(g,T),0<I.length&&(g.i=null,g.g.set(ti(g,T),w(I)),g.h+=I.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],T=Array.from(this.g.keys());for(var I=0;I<T.length;I++){var G=T[I];const ke=encodeURIComponent(String(G)),it=this.V(G);for(G=0;G<it.length;G++){var ge=ke;it[G]!==""&&(ge+="="+encodeURIComponent(String(it[G]))),g.push(ge)}}return this.i=g.join("&")};function ti(g,T){return T=String(T),g.j&&(T=T.toLowerCase()),T}function Qi(g,T){T&&!g.j&&(Dn(g),g.i=null,g.g.forEach(function(I,G){var ge=G.toLowerCase();G!=ge&&(bi(this,G),bo(this,ge,I))},g)),g.j=T}function px(g,T){const I=new En;if(c.Image){const G=new Image;G.onload=v(ys,I,"TestLoadImage: loaded",!0,T,G),G.onerror=v(ys,I,"TestLoadImage: error",!1,T,G),G.onabort=v(ys,I,"TestLoadImage: abort",!1,T,G),G.ontimeout=v(ys,I,"TestLoadImage: timeout",!1,T,G),c.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=g}else T(!1)}function wf(g,T){const I=new En,G=new AbortController,ge=setTimeout(()=>{G.abort(),ys(I,"TestPingServer: timeout",!1,T)},1e4);fetch(g,{signal:G.signal}).then(ke=>{clearTimeout(ge),ke.ok?ys(I,"TestPingServer: ok",!0,T):ys(I,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(ge),ys(I,"TestPingServer: error",!1,T)})}function ys(g,T,I,G,ge){try{ge&&(ge.onload=null,ge.onerror=null,ge.onabort=null,ge.ontimeout=null),G(I)}catch{}}function mx(){this.g=new vt}function _f(g,T,I){const G=I||"";try{mo(g,function(ge,ke){let it=ge;h(ge)&&(it=Le(ge)),T.push(G+ke+"="+encodeURIComponent(it))})}catch(ge){throw T.push(G+"type="+encodeURIComponent("_badmap")),ge}}function Sa(g){this.l=g.Ub||null,this.j=g.eb||!1}_(Sa,It),Sa.prototype.g=function(){return new El(this.l,this.j)},Sa.prototype.i=(function(g){return function(){return g}})({});function El(g,T){ht.call(this),this.D=g,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(El,ht),r=El.prototype,r.open=function(g,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=T,this.readyState=1,Ei(this)},r.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(T.body=g),(this.D||c).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_i(this)),this.readyState=0},r.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Ei(this)),this.g&&(this.readyState=3,Ei(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ef(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ef(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}r.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var T=g.value?g.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!g.done}))&&(this.response=this.responseText+=T)}g.done?_i(this):Ei(this),this.readyState==3&&Ef(this)}},r.Ra=function(g){this.g&&(this.response=this.responseText=g,_i(this))},r.Qa=function(g){this.g&&(this.response=g,_i(this))},r.ga=function(){this.g&&_i(this)};function _i(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Ei(g)}r.setRequestHeader=function(g,T){this.u.append(g,T)},r.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],T=this.h.entries();for(var I=T.next();!I.done;)I=I.value,g.push(I[0]+": "+I[1]),I=T.next();return g.join(`\r
`)};function Ei(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(El.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Ca(g){let T="";return H(g,function(I,G){T+=G,T+=":",T+=I,T+=`\r
`}),T}function wo(g,T,I){e:{for(G in I){var G=!1;break e}G=!0}G||(I=Ca(I),typeof g=="string"?I!=null&&encodeURIComponent(String(I)):Sr(g,T,I))}function Lr(g){ht.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Lr,ht);var gx=/^https?$/i,$d=["POST","PUT"];r=Lr.prototype,r.Ha=function(g){this.J=g},r.ea=function(g,T,I,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);T=T?T.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():F.g(),this.v=this.o?at(this.o):at(F),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(T,String(g),!0),this.B=!1}catch(ke){Tl(this,ke);return}if(g=I||"",I=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var ge in G)I.set(ge,G[ge]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const ke of G.keys())I.set(ke,G.get(ke));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(I.keys()).find(ke=>ke.toLowerCase()=="content-type"),ge=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call($d,T,void 0))||G||ge||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ke,it]of I)this.g.setRequestHeader(ke,it);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wc(this),this.u=!0,this.g.send(g),this.u=!1}catch(ke){Tl(this,ke)}};function Tl(g,T){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=T,g.m=5,Hc(g),Ls(g)}function Hc(g){g.A||(g.A=!0,jt(g,"complete"),jt(g,"error"))}r.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,jt(this,"complete"),jt(this,"abort"),Ls(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ls(this,!0)),Lr.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Bd(this):this.bb())},r.bb=function(){Bd(this)};function Bd(g){if(g.h&&typeof a<"u"&&(!g.v[1]||vs(g)!=4||g.Z()!=2)){if(g.u&&vs(g)==4)gr(g.Ea,0,g);else if(jt(g,"readystatechange"),vs(g)==4){g.h=!1;try{const it=g.Z();e:switch(it){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var I;if(!(I=T)){var G;if(G=it===0){var ge=String(g.D).match(wl)[1]||null;!ge&&c.self&&c.self.location&&(ge=c.self.location.protocol.slice(0,-1)),G=!gx.test(ge?ge.toLowerCase():"")}I=G}if(I)jt(g,"complete"),jt(g,"success");else{g.m=6;try{var ke=2<vs(g)?g.g.statusText:""}catch{ke=""}g.l=ke+" ["+g.Z()+"]",Hc(g)}}finally{Ls(g)}}}}function Ls(g,T){if(g.g){Wc(g);const I=g.g,G=g.v[0]?()=>{}:null;g.g=null,g.v=null,T||jt(g,"ready");try{I.onreadystatechange=G}catch{}}}function Wc(g){g.I&&(c.clearTimeout(g.I),g.I=null)}r.isActive=function(){return!!this.g};function vs(g){return g.g?g.g.readyState:0}r.Z=function(){try{return 2<vs(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(g){if(this.g){var T=this.g.responseText;return g&&T.indexOf(g)==0&&(T=T.substring(g.length)),Ze(T)}};function Ud(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function qc(g){const T={};g=(g.g&&2<=vs(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<g.length;G++){if(C(g[G]))continue;var I=M(g[G]);const ge=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ke=T[ge]||[];T[ge]=ke,ke.push(I)}S(T,function(G){return G.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ji(g,T,I){return I&&I.internalChannelParams&&I.internalChannelParams[g]||T}function zd(g){this.Aa=0,this.i=[],this.j=new En,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ji("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ji("baseRetryDelayMs",5e3,g),this.cb=Ji("retryDelaySeedMs",1e4,g),this.Wa=Ji("forwardChannelMaxRetries",2,g),this.wa=Ji("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Xn(g&&g.concurrentRequestLimit),this.Da=new mx,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=zd.prototype,r.la=8,r.G=1,r.connect=function(g,T,I,G){hr(0),this.W=g,this.H=T||{},I&&G!==void 0&&(this.H.OSID=I,this.H.OAID=G),this.F=this.X,this.I=kf(this,null,this.W),Zi(this)};function Fn(g){if(Gc(g),g.G==3){var T=g.U++,I=Os(g.I);if(Sr(I,"SID",g.K),Sr(I,"RID",T),Sr(I,"TYPE","terminate"),Ia(g,I),T=new le(g,g.j,T),T.L=2,T.v=yo(Os(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(T.v.toString(),"")}catch{}!I&&c.Image&&(new Image().src=T.v,I=!0),I||(T.g=Sf(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Be(T)}Nf(g)}function Ti(g){g.g&&(Hd(g),g.g.cancel(),g.g=null)}function Gc(g){Ti(g),g.u&&(c.clearTimeout(g.u),g.u=null),Xc(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function Zi(g){if(!zr(g.h)&&!g.s){g.s=!0;var T=g.Ga;Me||Ne(),Ee||(Me(),Ee=!0),Te.add(T,g),g.B=0}}function xx(g,T){return Yi(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=T.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Nr(x(g.Ga,g,T),Af(g,g.B)),g.B++,!0)}r.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const ge=new le(this,this.j,g);let ke=this.o;if(this.S&&(ke?(ke=k(ke),j(ke,this.S)):ke=this.S),this.m!==null||this.O||(ge.H=ke,ke=null),this.P)e:{for(var T=0,I=0;I<this.i.length;I++){t:{var G=this.i[I];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(T+=G,4096<T){T=I;break e}if(T===4096||I===this.i.length-1){T=I+1;break e}}T=1e3}else T=1e3;T=_o(this,ge,T),I=Os(this.I),Sr(I,"RID",g),Sr(I,"CVER",22),this.D&&Sr(I,"X-HTTP-Session-Id",this.D),Ia(this,I),ke&&(this.O?T="headers="+encodeURIComponent(String(Ca(ke)))+"&"+T:this.m&&wo(I,this.m,ke)),Na(this.h,ge),this.Ua&&Sr(I,"TYPE","init"),this.P?(Sr(I,"$req",T),Sr(I,"SID","null"),ge.T=!0,$e(ge,I,null)):$e(ge,I,T),this.G=2}}else this.G==3&&(g?Kc(this,g):this.i.length==0||zr(this.h)||Kc(this))};function Kc(g,T){var I;T?I=T.l:I=g.U++;const G=Os(g.I);Sr(G,"SID",g.K),Sr(G,"RID",I),Sr(G,"AID",g.T),Ia(g,G),g.m&&g.o&&wo(G,g.m,g.o),I=new le(g,g.j,I,g.B+1),g.m===null&&(I.H=g.o),T&&(g.i=T.D.concat(g.i)),T=_o(g,I,1e3),I.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Na(g.h,I),$e(I,G,T)}function Ia(g,T){g.H&&H(g.H,function(I,G){Sr(T,G,I)}),g.l&&mo({},function(I,G){Sr(T,G,I)})}function _o(g,T,I){I=Math.min(g.i.length,I);var G=g.l?x(g.l.Na,g.l,g):null;e:{var ge=g.i;let ke=-1;for(;;){const it=["count="+I];ke==-1?0<I?(ke=ge[0].g,it.push("ofs="+ke)):ke=0:it.push("ofs="+ke);let xr=!0;for(let mn=0;mn<I;mn++){let tr=ge[mn].g;const Tn=ge[mn].map;if(tr-=ke,0>tr)ke=Math.max(0,ge[mn].g-100),xr=!1;else try{_f(Tn,it,"req"+tr+"_")}catch{G&&G(Tn)}}if(xr){G=it.join("&");break e}}}return g=g.i.splice(0,I),T.D=g,G}function Al(g){if(!g.g&&!g.u){g.Y=1;var T=g.Fa;Me||Ne(),Ee||(Me(),Ee=!0),Te.add(T,g),g.v=0}}function Yc(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Nr(x(g.Fa,g),Af(g,g.v)),g.v++,!0)}r.Fa=function(){if(this.u=null,Tf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Nr(x(this.ab,this),g)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,hr(10),Ti(this),Tf(this))};function Hd(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function Tf(g){g.g=new le(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var T=Os(g.qa);Sr(T,"RID","rpc"),Sr(T,"SID",g.K),Sr(T,"AID",g.T),Sr(T,"CI",g.F?"0":"1"),!g.F&&g.ja&&Sr(T,"TO",g.ja),Sr(T,"TYPE","xmlhttp"),Ia(g,T),g.m&&g.o&&wo(T,g.m,g.o),g.L&&(g.g.I=g.L);var I=g.g;g=g.ia,I.L=1,I.v=yo(Os(T)),I.m=null,I.P=!0,ze(I,g)}r.Za=function(){this.C!=null&&(this.C=null,Ti(this),Yc(this),hr(19))};function Xc(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function Qc(g,T){var I=null;if(g.g==T){Xc(g),Hd(g),g.g=null;var G=2}else if(kr(g.h,T))I=T.D,Bc(g.h,T),G=1;else return;if(g.G!=0){if(T.o)if(G==1){I=T.m?T.m.length:0,T=Date.now()-T.F;var ge=g.B;G=Or(),jt(G,new Rn(G,I)),Zi(g)}else Al(g);else if(ge=T.s,ge==3||ge==0&&0<T.X||!(G==1&&xx(g,T)||G==2&&Yc(g)))switch(I&&0<I.length&&(T=g.h,T.i=T.i.concat(I)),ge){case 1:Pa(g,5);break;case 4:Pa(g,10);break;case 3:Pa(g,6);break;default:Pa(g,2)}}}function Af(g,T){let I=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(I*=2),I*T}function Pa(g,T){if(g.j.info("Error code "+T),T==2){var I=x(g.fb,g),G=g.Xa;const ge=!G;G=new ka(G||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||_l(G,"https"),yo(G),ge?px(G.toString(),I):wf(G.toString(),I)}else hr(2);g.G=0,g.l&&g.l.sa(T),Nf(g),Gc(g)}r.fb=function(g){g?(this.j.info("Successfully pinged google.com"),hr(2)):(this.j.info("Failed to ping google.com"),hr(1))};function Nf(g){if(g.G=0,g.ka=[],g.l){const T=Uc(g.h);(T.length!=0||g.i.length!=0)&&(E(g.ka,T),E(g.ka,g.i),g.h.i.length=0,w(g.i),g.i.length=0),g.l.ra()}}function kf(g,T,I){var G=I instanceof ka?Os(I):new ka(I);if(G.g!="")T&&(G.g=T+"."+G.g),go(G,G.s);else{var ge=c.location;G=ge.protocol,T=T?T+"."+ge.hostname:ge.hostname,ge=+ge.port;var ke=new ka(null);G&&_l(ke,G),T&&(ke.g=T),ge&&go(ke,ge),I&&(ke.l=I),G=ke}return I=g.D,T=g.ya,I&&T&&Sr(G,I,T),Sr(G,"VER",g.la),Ia(g,G),G}function Sf(g,T,I){if(T&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=g.Ca&&!g.pa?new Lr(new Sa({eb:I})):new Lr(g.pa),T.Ha(g.J),T}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wd(){}r=Wd.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Jc(){}Jc.prototype.g=function(g,T){return new cs(g,T)};function cs(g,T){ht.call(this),this.g=new zd(T),this.l=g,this.h=T&&T.messageUrlParams||null,g=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(g?g["X-WebChannel-Content-Type"]=T.messageContentType:g={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(g?g["X-WebChannel-Client-Profile"]=T.va:g={"X-WebChannel-Client-Profile":T.va}),this.g.S=g,(g=T&&T.Sb)&&!C(g)&&(this.g.m=g),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!C(T)&&(this.g.D=T,g=this.h,g!==null&&T in g&&(g=this.h,T in g&&delete g[T])),this.j=new ea(this)}_(cs,ht),cs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cs.prototype.close=function(){Fn(this.g)},cs.prototype.o=function(g){var T=this.g;if(typeof g=="string"){var I={};I.__data__=g,g=I}else this.u&&(I={},I.__data__=Le(g),g=I);T.i.push(new Yn(T.Ya++,g)),T.G==3&&Zi(T)},cs.prototype.N=function(){this.g.l=null,delete this.j,Fn(this.g),delete this.g,cs.aa.N.call(this)};function Cf(g){Nt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var T=g.__sm__;if(T){e:{for(const I in T){g=I;break e}g=void 0}(this.i=g)&&(g=this.i,T=T!==null&&g in T?T[g]:void 0),this.data=T}else this.data=g}_(Cf,Nt);function If(){Ut.call(this),this.status=1}_(If,Ut);function ea(g){this.g=g}_(ea,Wd),ea.prototype.ua=function(){jt(this.g,"a")},ea.prototype.ta=function(g){jt(this.g,new Cf(g))},ea.prototype.sa=function(g){jt(this.g,new If)},ea.prototype.ra=function(){jt(this.g,"b")},Jc.prototype.createWebChannel=Jc.prototype.g,cs.prototype.send=cs.prototype.o,cs.prototype.open=cs.prototype.m,cs.prototype.close=cs.prototype.close,S3=function(){return new Jc},k3=function(){return Or()},N3=Qt,Bv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},X.NO_ERROR=0,X.TIMEOUT=8,X.HTTP_ERROR=6,Jp=X,te.COMPLETE="complete",A3=te,lt.EventType=tt,tt.OPEN="a",tt.CLOSE="b",tt.ERROR="c",tt.MESSAGE="d",ht.prototype.listen=ht.prototype.K,N0=lt,Lr.prototype.listenOnce=Lr.prototype.L,Lr.prototype.getLastError=Lr.prototype.Ka,Lr.prototype.getLastErrorCode=Lr.prototype.Ba,Lr.prototype.getStatus=Lr.prototype.Z,Lr.prototype.getResponseJson=Lr.prototype.Oa,Lr.prototype.getResponseText=Lr.prototype.oa,Lr.prototype.send=Lr.prototype.ea,Lr.prototype.setWithCredentials=Lr.prototype.Ha,T3=Lr}).apply(typeof Np<"u"?Np:typeof self<"u"?self:typeof window<"u"?window:{});const A4="@firebase/firestore",N4="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hs.UNAUTHENTICATED=new hs(null),hs.GOOGLE_CREDENTIALS=new hs("google-credentials-uid"),hs.FIRST_PARTY=new hs("first-party-uid"),hs.MOCK_USER=new hs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new _g("@firebase/firestore");function Iu(){return lc.logLevel}function Xe(r,...e){if(lc.logLevel<=Jt.DEBUG){const t=e.map(ub);lc.debug(`Firestore (${kd}): ${r}`,...t)}}function ms(r,...e){if(lc.logLevel<=Jt.ERROR){const t=e.map(ub);lc.error(`Firestore (${kd}): ${r}`,...t)}}function nh(r,...e){if(lc.logLevel<=Jt.WARN){const t=e.map(ub);lc.warn(`Firestore (${kd}): ${r}`,...t)}}function ub(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(r="Unexpected state"){const e=`FIRESTORE (${kd}) INTERNAL ASSERTION FAILED: `+r;throw ms(e),new Error(e)}function Et(r,e){r||xt()}function $t(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends yi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(hs.UNAUTHENTICATED)))}shutdown(){}}class HF{constructor(e){this.t=e,this.currentUser=hs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Et(this.o===void 0);let n=this.i;const s=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let i=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bi,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},c=d=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bi)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Et(typeof n.accessToken=="string"),new UF(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string"),new hs(e)}}class WF{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=hs.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class qF{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new WF(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(hs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class k4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GF{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Gs(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Et(this.o===void 0);const n=i=>{i.error!=null&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Xe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const s=i=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new k4(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Et(typeof t.token=="string"),this.R=t.token,new k4(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=KF(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<t&&(n+=e.charAt(s[i]%62))}return n}}function Mt(r,e){return r<e?-1:r>e?1:0}function Uv(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=r.codePointAt(t),s=e.codePointAt(t);if(n!==s){if(n<128&&s<128)return Mt(n,s);{const i=C3(),a=YF(i.encode(S4(r,t)),i.encode(S4(e,t)));return a!==0?a:Mt(n,s)}}t+=n>65535?2:1}return Mt(r.length,e.length)}function S4(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function YF(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Mt(r[t],e[t]);return Mt(r.length,e.length)}function Ju(r,e,t){return r.length===e.length&&r.every(((n,s)=>t(n,e[s])))}function P3(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=-62135596800,I4=1e6;class dr{static now(){return dr.fromMillis(Date.now())}static fromDate(e){return dr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*I4);return new dr(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new nt(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new nt(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<C4)throw new nt(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nt(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/I4}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-C4;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new dr(0,0))}static max(){return new Ct(new dr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4="__name__";class oa{constructor(e,t,n){t===void 0?t=0:t>e.length&&xt(),n===void 0?n=e.length-t:n>e.length-t&&xt(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return oa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof oa?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const i=oa.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return Mt(e.length,t.length)}static compareSegments(e,t){const n=oa.isNumericId(e),s=oa.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?oa.extractNumericId(e).compare(oa.extractNumericId(t)):Uv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zo.fromString(e.substring(4,e.length-2))}}class ur extends oa{construct(e,t,n){return new ur(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new nt(je.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((s=>s.length>0)))}return new ur(t)}static emptyPath(){return new ur([])}}const XF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gr extends oa{construct(e,t,n){return new Gr(e,t,n)}static isValidIdentifier(e){return XF.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===P4}static keyField(){return new Gr([P4])}static fromServerFormat(e){const t=[];let n="",s=0;const i=()=>{if(n.length===0)throw new nt(je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new nt(je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new nt(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(n+=c,s++):(i(),s++)}if(i(),a)throw new nt(je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gr(t)}static emptyPath(){return new Gr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.path=e}static fromPath(e){return new ut(ur.fromString(e))}static fromName(e){return new ut(ur.fromString(e).popFirst(5))}static empty(){return new ut(ur.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ur.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ur.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new ur(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=-1;class Em{constructor(e,t,n,s){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=s}}function zv(r){return r.fields.find((e=>e.kind===2))}function Ul(r){return r.fields.filter((e=>e.kind!==2))}Em.UNKNOWN_ID=-1;class Zp{constructor(e,t){this.fieldPath=e,this.kind=t}}class ih{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ih(0,Js.min())}}function QF(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=Ct.fromTimestamp(n===1e9?new dr(t+1,0):new dr(t,n));return new Js(s,ut.empty(),e)}function j3(r){return new Js(r.readTime,r.key,sh)}class Js{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Js(Ct.min(),ut.empty(),sh)}static max(){return new Js(Ct.max(),ut.empty(),sh)}}function db(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ut.comparator(r.documentKey,e.documentKey),t!==0?t:Mt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class D3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(r){if(r.code!==je.FAILED_PRECONDITION||r.message!==R3)throw r;Xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xe(((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof xe?t:xe.resolve(t)}catch(t){return xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):xe.reject(t)}static resolve(e){return new xe(((t,n)=>{t(e)}))}static reject(e){return new xe(((t,n)=>{n(e)}))}static waitFor(e){return new xe(((t,n)=>{let s=0,i=0,a=!1;e.forEach((c=>{++s,c.next((()=>{++i,a&&i===s&&t()}),(d=>n(d)))})),a=!0,i===s&&t()}))}static or(e){let t=xe.resolve(!1);for(const n of e)t=t.next((s=>s?xe.resolve(s):n()));return t}static forEach(e,t){const n=[];return e.forEach(((s,i)=>{n.push(t.call(this,s,i))})),this.waitFor(n)}static mapArray(e,t){return new xe(((n,s)=>{const i=e.length,a=new Array(i);let c=0;for(let d=0;d<i;d++){const h=d;t(e[h]).next((p=>{a[h]=p,++c,c===i&&n(a)}),(p=>s(p)))}}))}static doWhile(e,t){return new xe(((n,s)=>{const i=()=>{e()===!0?t().next((()=>{i()}),s):n()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="SimpleDb";class Ng{static open(e,t,n,s){try{return new Ng(t,e.transaction(s,n))}catch(i){throw new F0(t,i)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new Bi,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new F0(e,t.error)):this.m.resolve()},this.transaction.onerror=n=>{const s=hb(n.target.error);this.m.reject(new F0(e,s))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(Xe(zs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ZF(t)}}class el{static delete(e){return Xe(zs,"Removing database:",e),Wl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!X1())return!1;if(el.v())return!0;const e=bn(),t=el.C(e),n=0<t&&t<10,s=F3(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.O=n,el.C(bn())===12.2&&ms("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(Xe(zs,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;t(a)},s.onblocked=()=>{n(new F0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?n(new nt(je.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new nt(je.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new F0(e,a))},s.onupgradeneeded=i=>{Xe(zs,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.O.B(a,s.transaction,i.oldVersion,this.version).next((()=>{Xe(zs,"Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,s){const i=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.N(e);const c=Ng.open(this.db,e,i?"readonly":"readwrite",n),d=s(c).next((h=>(c.S(),h))).catch((h=>(c.abort(h),xe.reject(h)))).toPromise();return d.catch((()=>{})),await c.p,d}catch(c){const d=c,h=d.name!=="FirebaseError"&&a<3;if(Xe(zs,"Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function F3(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class JF{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return Wl(this.q.delete())}}class F0 extends nt{constructor(e,t){super(je.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xl(r){return r.name==="IndexedDbTransactionError"}class ZF{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(Xe(zs,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(Xe(zs,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Wl(n)}add(e){return Xe(zs,"ADD",this.store.name,e,e),Wl(this.store.add(e))}get(e){return Wl(this.store.get(e)).next((t=>(t===void 0&&(t=null),Xe(zs,"GET",this.store.name,e,t),t)))}delete(e){return Xe(zs,"DELETE",this.store.name,e),Wl(this.store.delete(e))}count(){return Xe(zs,"COUNT",this.store.name),Wl(this.store.count())}G(e,t){const n=this.options(e,t),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(n.range);return new xe(((a,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{a(d.target.result)}}))}{const i=this.cursor(n),a=[];return this.j(i,((c,d)=>{a.push(d)})).next((()=>a))}}H(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new xe(((s,i)=>{n.onerror=a=>{i(a.target.error)},n.onsuccess=a=>{s(a.target.result)}}))}J(e,t){Xe(zs,"DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const s=this.cursor(n);return this.j(s,((i,a,c)=>c.delete()))}Z(e,t){let n;t?n=e:(n={},t=e);const s=this.cursor(n);return this.j(s,t)}X(e){const t=this.cursor({});return new xe(((n,s)=>{t.onerror=i=>{const a=hb(i.target.error);s(a)},t.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next((c=>{c?a.continue():n()})):n()}}))}j(e,t){const n=[];return new xe(((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const c=a.target.result;if(!c)return void s();const d=new JF(c),h=t(c.primaryKey,c.value,d);if(h instanceof xe){const p=h.catch((m=>(d.done(),xe.reject(m))));n.push(p)}d.isDone?s():d.K===null?c.continue():c.continue(d.K)}})).next((()=>xe.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Wl(r){return new xe(((e,t)=>{r.onsuccess=n=>{const s=n.target.result;e(s)},r.onerror=n=>{const s=hb(n.target.error);t(s)}}))}let j4=!1;function hb(r){const e=el.C(bn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new nt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return j4||(j4=!0,setTimeout((()=>{throw n}),0)),n}}return r}const O0="IndexBackfiller";class eO{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){Xe(O0,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ee.ne();Xe(O0,`Documents written: ${t}`)}catch(t){xl(t)?Xe(O0,"Ignoring IndexedDB error during index backfill: ",t):await kc(t)}await this.te(6e4)}))}}class tO{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.re(t,e)))}re(e,t){const n=new Set;let s=t,i=!0;return xe.doWhile((()=>i===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!n.has(a))return Xe(O0,`Processing collection: ${a}`),this.ie(e,a,s).next((c=>{s-=c,n.add(a)}));i=!1})))).next((()=>t-s))}ie(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,n).next((i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this.se(s,i))).next((c=>(Xe(O0,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c)))).next((()=>a.size))}))))}se(e,t){let n=e;return t.changes.forEach(((s,i)=>{const a=j3(i);db(a,n)>0&&(n=a)})),new Js(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.oe(n),this._e=n=>t.writeSequenceNumber(n))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}fi.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=-1;function zh(r){return r==null}function ah(r){return r===0&&1/r==-1/0}function rO(r){return typeof r=="number"&&Number.isInteger(r)&&!ah(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="";function is(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=R4(e)),e=nO(r.get(t),e);return R4(e)}function nO(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const i=r.charAt(s);switch(i){case"\0":t+="";break;case Tm:t+="";break;default:t+=i}}return t}function R4(r){return r+Tm+""}function la(r){const e=r.length;if(Et(e>=2),e===2)return Et(r.charAt(0)===Tm&&r.charAt(1)===""),ur.emptyPath();const t=e-2,n=[];let s="";for(let i=0;i<e;){const a=r.indexOf(Tm,i);switch((a<0||a>t)&&xt(),r.charAt(a+1)){case"":const c=r.substring(i,a);let d;s.length===0?d=c:(s+=c,d=s,s=""),n.push(d);break;case"":s+=r.substring(i,a),s+="\0";break;case"":s+=r.substring(i,a+1);break;default:xt()}i=a+2}return new ur(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl="remoteDocuments",Hh="owner",bu="owner",oh="mutationQueues",sO="userId",Fi="mutations",D4="batchId",Xl="userMutationsIndex",F4=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(r,e){return[r,is(e)]}function O3(r,e,t){return[r,is(e),t]}const iO={},Zu="documentMutations",Am="remoteDocumentsV14",aO=["prefixPath","collectionGroup","readTime","documentId"],tm="documentKeyIndex",oO=["prefixPath","collectionGroup","documentId"],L3="collectionGroupIndex",lO=["collectionGroup","readTime","prefixPath","documentId"],lh="remoteDocumentGlobal",Hv="remoteDocumentGlobalKey",ed="targets",M3="queryTargetsIndex",cO=["canonicalId","targetId"],td="targetDocuments",uO=["targetId","path"],fb="documentTargetsIndex",dO=["path","targetId"],Nm="targetGlobalKey",tc="targetGlobal",ch="collectionParents",hO=["collectionId","parent"],rd="clientMetadata",fO="clientId",kg="bundles",pO="bundleId",Sg="namedQueries",mO="name",pb="indexConfiguration",gO="indexId",Wv="collectionGroupIndex",xO="collectionGroup",km="indexState",yO=["indexId","uid"],V3="sequenceNumberIndex",vO=["uid","sequenceNumber"],Sm="indexEntries",bO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$3="documentKeyIndex",wO=["indexId","uid","orderedDocumentKey"],Cg="documentOverlays",_O=["userId","collectionPath","documentId"],qv="collectionPathOverlayIndex",EO=["userId","collectionPath","largestBatchId"],B3="collectionGroupOverlayIndex",TO=["userId","collectionGroup","largestBatchId"],mb="globals",AO="name",U3=[oh,Fi,Zu,zl,ed,Hh,tc,td,rd,lh,ch,kg,Sg],NO=[...U3,Cg],z3=[oh,Fi,Zu,Am,ed,Hh,tc,td,rd,lh,ch,kg,Sg,Cg],H3=z3,gb=[...H3,pb,km,Sm],kO=gb,SO=[...gb,mb];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv extends D3{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function wn(r,e){const t=$t(r);return el.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function yl(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function W3(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,t){this.comparator=e,this.root=t||Bn.EMPTY}insert(e,t){return new Ur(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new Ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kp(this.root,e,this.comparator,!1)}getReverseIterator(){return new kp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kp(this.root,e,this.comparator,!0)}}class kp{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,t,n,s,i){this.key=e,this.value=t,this.color=n??Bn.RED,this.left=s??Bn.EMPTY,this.right=i??Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,i){return new Bn(e??this.key,t??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,n),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Bn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xt();const e=this.left.check();if(e!==this.right.check())throw xt();return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw xt()}get value(){throw xt()}get color(){throw xt()}get left(){throw xt()}get right(){throw xt()}copy(e,t,n,s,i){return this}insert(e,t,n){return new Bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.comparator=e,this.data=new Ur(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new L4(this.data.getIterator())}getIteratorFrom(e){return new L4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Er)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Er(this.comparator);return t.data=e,t}}class L4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wu(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.fields=e,e.sort(Gr.comparator)}static empty(){return new ks([])}unionWith(e){let t=new Er(Gr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ks(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ju(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new q3("Invalid base64 string: "+i):i}})(e);return new hn(t)}static fromUint8Array(e){const t=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(e);return new hn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const CO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function to(r){if(Et(!!r),typeof r=="string"){let e=0;const t=CO.exec(r);if(Et(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Vr(r.seconds),nanos:Vr(r.nanos)}}function Vr(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ro(r){return typeof r=="string"?hn.fromBase64String(r):hn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3="server_timestamp",K3="__type__",Y3="__previous_value__",X3="__local_write_time__";function xb(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{})[K3])===null||t===void 0?void 0:t.stringValue)===G3}function Ig(r){const e=r.mapValue.fields[Y3];return xb(e)?Ig(e):e}function uh(r){const e=to(r.mapValue.fields[X3].timestampValue);return new dr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,t,n,s,i,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}const Cm="(default)";class cc{constructor(e,t){this.projectId=e,this.database=t||Cm}static empty(){return new cc("","")}get isDefaultDatabase(){return this.database===Cm}isEqual(e){return e instanceof cc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="__type__",Q3="__max__",Ko={mapValue:{fields:{__type__:{stringValue:Q3}}}},vb="__vector__",nd="value",rm={nullValue:"NULL_VALUE"};function sl(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?xb(r)?4:J3(r)?9007199254740991:Pg(r)?10:11:xt()}function ya(r,e){if(r===e)return!0;const t=sl(r);if(t!==sl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return uh(r).isEqual(uh(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=to(s.timestampValue),c=to(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(s,i){return ro(s.bytesValue).isEqual(ro(i.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(s,i){return Vr(s.geoPointValue.latitude)===Vr(i.geoPointValue.latitude)&&Vr(s.geoPointValue.longitude)===Vr(i.geoPointValue.longitude)})(r,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Vr(s.integerValue)===Vr(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Vr(s.doubleValue),c=Vr(i.doubleValue);return a===c?ah(a)===ah(c):isNaN(a)&&isNaN(c)}return!1})(r,e);case 9:return Ju(r.arrayValue.values||[],e.arrayValue.values||[],ya);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(O4(a)!==O4(c))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(c[d]===void 0||!ya(a[d],c[d])))return!1;return!0})(r,e);default:return xt()}}function dh(r,e){return(r.values||[]).find((t=>ya(t,e)))!==void 0}function il(r,e){if(r===e)return 0;const t=sl(r),n=sl(e);if(t!==n)return Mt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(r.booleanValue,e.booleanValue);case 2:return(function(i,a){const c=Vr(i.integerValue||i.doubleValue),d=Vr(a.integerValue||a.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(r,e);case 3:return M4(r.timestampValue,e.timestampValue);case 4:return M4(uh(r),uh(e));case 5:return Uv(r.stringValue,e.stringValue);case 6:return(function(i,a){const c=ro(i),d=ro(a);return c.compareTo(d)})(r.bytesValue,e.bytesValue);case 7:return(function(i,a){const c=i.split("/"),d=a.split("/");for(let h=0;h<c.length&&h<d.length;h++){const p=Mt(c[h],d[h]);if(p!==0)return p}return Mt(c.length,d.length)})(r.referenceValue,e.referenceValue);case 8:return(function(i,a){const c=Mt(Vr(i.latitude),Vr(a.latitude));return c!==0?c:Mt(Vr(i.longitude),Vr(a.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return V4(r.arrayValue,e.arrayValue);case 10:return(function(i,a){var c,d,h,p;const m=i.fields||{},x=a.fields||{},v=(c=m[nd])===null||c===void 0?void 0:c.arrayValue,_=(d=x[nd])===null||d===void 0?void 0:d.arrayValue,w=Mt(((h=v?.values)===null||h===void 0?void 0:h.length)||0,((p=_?.values)===null||p===void 0?void 0:p.length)||0);return w!==0?w:V4(v,_)})(r.mapValue,e.mapValue);case 11:return(function(i,a){if(i===Ko.mapValue&&a===Ko.mapValue)return 0;if(i===Ko.mapValue)return 1;if(a===Ko.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),h=a.fields||{},p=Object.keys(h);d.sort(),p.sort();for(let m=0;m<d.length&&m<p.length;++m){const x=Uv(d[m],p[m]);if(x!==0)return x;const v=il(c[d[m]],h[p[m]]);if(v!==0)return v}return Mt(d.length,p.length)})(r.mapValue,e.mapValue);default:throw xt()}}function M4(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Mt(r,e);const t=to(r),n=to(e),s=Mt(t.seconds,n.seconds);return s!==0?s:Mt(t.nanos,n.nanos)}function V4(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const i=il(t[s],n[s]);if(i)return i}return Mt(t.length,n.length)}function sd(r){return Kv(r)}function Kv(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=to(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ro(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ut.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",s=!0;for(const i of t.values||[])s?s=!1:n+=",",n+=Kv(i);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${Kv(t.fields[a])}`;return s+"}"})(r.mapValue):xt()}function nm(r){switch(sl(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ig(r);return e?16+nm(e):16;case 5:return 2*r.stringValue.length;case 6:return ro(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,i)=>s+nm(i)),0)})(r.arrayValue);case 10:case 11:return(function(n){let s=0;return yl(n.fields,((i,a)=>{s+=i.length+nm(a)})),s})(r.mapValue);default:throw xt()}}function hh(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Yv(r){return!!r&&"integerValue"in r}function fh(r){return!!r&&"arrayValue"in r}function $4(r){return!!r&&"nullValue"in r}function B4(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function sm(r){return!!r&&"mapValue"in r}function Pg(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{})[yb])===null||t===void 0?void 0:t.stringValue)===vb}function L0(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return yl(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=L0(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=L0(r.arrayValue.values[t]);return e}return Object.assign({},r)}function J3(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Q3}const Z3={mapValue:{fields:{[yb]:{stringValue:vb},[nd]:{arrayValue:{}}}}};function PO(r){return"nullValue"in r?rm:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?hh(cc.empty(),ut.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Pg(r)?Z3:{mapValue:{}}:xt()}function jO(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?hh(cc.empty(),ut.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?Z3:"mapValue"in r?Pg(r)?{mapValue:{}}:Ko:xt()}function U4(r,e){const t=il(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function z4(r,e){const t=il(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!sm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=L0(t)}setAll(e){let t=Gr.emptyPath(),n={},s=[];e.forEach(((a,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,n,s),n={},s=[],t=c.popLast()}a?n[c.lastSegment()]=L0(a):s.push(c.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,s)}delete(e){const t=this.field(e.popLast());sm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ya(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];sm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){yl(t,((s,i)=>e[s]=i));for(const s of n)delete e[s]}clone(){return new Un(L0(this.value))}}function eS(r){const e=[];return yl(r.fields,((t,n)=>{const s=new Gr([t]);if(sm(n)){const i=eS(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)})),new ks(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,t,n,s,i,a,c){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new $r(e,0,Ct.min(),Ct.min(),Ct.min(),Un.empty(),0)}static newFoundDocument(e,t,n,s){return new $r(e,1,t,Ct.min(),n,s,0)}static newNoDocument(e,t){return new $r(e,2,t,Ct.min(),Ct.min(),Un.empty(),0)}static newUnknownDocument(e,t){return new $r(e,3,t,Ct.min(),Ct.min(),Un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $r&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $r(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,t){this.position=e,this.inclusive=t}}function H4(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const i=e[s],a=r.position[s];if(i.field.isKeyField()?n=ut.comparator(ut.fromName(a.referenceValue),t.key):n=il(a,t.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function W4(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ya(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t="asc"){this.field=e,this.dir=t}}function RO(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{}class Zt extends tS{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new DO(e,t,n):t==="array-contains"?new LO(e,n):t==="in"?new oS(e,n):t==="not-in"?new MO(e,n):t==="array-contains-any"?new VO(e,n):new Zt(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new FO(e,n):new OO(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(il(t,this.value)):t!==null&&sl(this.value)===sl(t)&&this.matchesComparison(il(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wr extends tS{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new wr(e,t)}matches(e){return ad(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function ad(r){return r.op==="and"}function Xv(r){return r.op==="or"}function bb(r){return rS(r)&&ad(r)}function rS(r){for(const e of r.filters)if(e instanceof wr)return!1;return!0}function Qv(r){if(r instanceof Zt)return r.field.canonicalString()+r.op.toString()+sd(r.value);if(bb(r))return r.filters.map((e=>Qv(e))).join(",");{const e=r.filters.map((t=>Qv(t))).join(",");return`${r.op}(${e})`}}function nS(r,e){return r instanceof Zt?(function(n,s){return s instanceof Zt&&n.op===s.op&&n.field.isEqual(s.field)&&ya(n.value,s.value)})(r,e):r instanceof wr?(function(n,s){return s instanceof wr&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((i,a,c)=>i&&nS(a,s.filters[c])),!0):!1})(r,e):void xt()}function sS(r,e){const t=r.filters.concat(e);return wr.create(t,r.op)}function iS(r){return r instanceof Zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${sd(t.value)}`})(r):r instanceof wr?(function(t){return t.op.toString()+" {"+t.getFilters().map(iS).join(" ,")+"}"})(r):"Filter"}class DO extends Zt{constructor(e,t,n){super(e,t,n),this.key=ut.fromName(n.referenceValue)}matches(e){const t=ut.comparator(e.key,this.key);return this.matchesComparison(t)}}class FO extends Zt{constructor(e,t){super(e,"in",t),this.keys=aS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class OO extends Zt{constructor(e,t){super(e,"not-in",t),this.keys=aS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function aS(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((n=>ut.fromName(n.referenceValue)))}class LO extends Zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fh(t)&&dh(t.arrayValue,this.value)}}class oS extends Zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&dh(this.value.arrayValue,t)}}class MO extends Zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(dh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!dh(this.value.arrayValue,t)}}class VO extends Zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>dh(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,t=null,n=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.le=null}}function Jv(r,e=null,t=[],n=[],s=null,i=null,a=null){return new $O(r,e,t,n,s,i,a)}function uc(r){const e=$t(r);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>Qv(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),zh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>sd(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>sd(n))).join(",")),e.le=t}return e.le}function Wh(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!RO(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!nS(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!W4(r.startAt,e.startAt)&&W4(r.endAt,e.endAt)}function Im(r){return ut.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Pm(r,e){return r.filters.filter((t=>t instanceof Zt&&t.field.isEqual(e)))}function q4(r,e,t){let n=rm,s=!0;for(const i of Pm(r,e)){let a=rm,c=!0;switch(i.op){case"<":case"<=":a=PO(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,c=!1;break;case"!=":case"not-in":a=rm}U4({value:n,inclusive:s},{value:a,inclusive:c})<0&&(n=a,s=c)}if(t!==null){for(let i=0;i<r.orderBy.length;++i)if(r.orderBy[i].field.isEqual(e)){const a=t.position[i];U4({value:n,inclusive:s},{value:a,inclusive:t.inclusive})<0&&(n=a,s=t.inclusive);break}}return{value:n,inclusive:s}}function G4(r,e,t){let n=Ko,s=!0;for(const i of Pm(r,e)){let a=Ko,c=!0;switch(i.op){case">=":case">":a=jO(i.value),c=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,c=!1;break;case"!=":case"not-in":a=Ko}z4({value:n,inclusive:s},{value:a,inclusive:c})>0&&(n=a,s=c)}if(t!==null){for(let i=0;i<r.orderBy.length;++i)if(r.orderBy[i].field.isEqual(e)){const a=t.position[i];z4({value:n,inclusive:s},{value:a,inclusive:t.inclusive})>0&&(n=a,s=t.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t=null,n=[],s=[],i=null,a="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function BO(r,e,t,n,s,i,a,c){return new Sd(r,e,t,n,s,i,a,c)}function qh(r){return new Sd(r)}function K4(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function lS(r){return r.collectionGroup!==null}function M0(r){const e=$t(r);if(e.he===null){e.he=[];const t=new Set;for(const i of e.explicitOrderBy)e.he.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Er(Gr.comparator);return a.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.he.push(new ph(i,n))})),t.has(Gr.keyField().canonicalString())||e.he.push(new ph(Gr.keyField(),n))}return e.he}function pi(r){const e=$t(r);return e.Pe||(e.Pe=UO(e,M0(r))),e.Pe}function UO(r,e){if(r.limitType==="F")return Jv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new ph(s.field,i)}));const t=r.endAt?new id(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new id(r.startAt.position,r.startAt.inclusive):null;return Jv(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function Zv(r,e){const t=r.filters.concat([e]);return new Sd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function jm(r,e,t){return new Sd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function jg(r,e){return Wh(pi(r),pi(e))&&r.limitType===e.limitType}function cS(r){return`${uc(pi(r))}|lt:${r.limitType}`}function Pu(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((s=>iS(s))).join(", ")}]`),zh(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>sd(s))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>sd(s))).join(",")),`Target(${n})`})(pi(r))}; limitType=${r.limitType})`}function Gh(r,e){return e.isFoundDocument()&&(function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):ut.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(r,e)&&(function(n,s){for(const i of M0(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(r,e)&&(function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0})(r,e)&&(function(n,s){return!(n.startAt&&!(function(a,c,d){const h=H4(a,c,d);return a.inclusive?h<=0:h<0})(n.startAt,M0(n),s)||n.endAt&&!(function(a,c,d){const h=H4(a,c,d);return a.inclusive?h>=0:h>0})(n.endAt,M0(n),s))})(r,e)}function zO(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function uS(r){return(e,t)=>{let n=!1;for(const s of M0(r)){const i=HO(s,e,t);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function HO(r,e,t){const n=r.field.isKeyField()?ut.comparator(e.key,t.key):(function(i,a,c){const d=a.data.field(i),h=c.data.field(i);return d!==null&&h!==null?il(d,h):xt()})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return xt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){yl(this.inner,((t,n)=>{for(const[s,i]of n)e(s,i)}))}isEmpty(){return W3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=new Ur(ut.comparator);function Ks(){return WO}const dS=new Ur(ut.comparator);function k0(...r){let e=dS;for(const t of r)e=e.insert(t.key,t);return e}function hS(r){let e=dS;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function ca(){return V0()}function fS(){return V0()}function V0(){return new lo((r=>r.toString()),((r,e)=>r.isEqual(e)))}const qO=new Ur(ut.comparator),GO=new Er(ut.comparator);function Gt(...r){let e=GO;for(const t of r)e=e.add(t);return e}const KO=new Er(Mt);function YO(){return KO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ah(e)?"-0":e}}function pS(r){return{integerValue:""+r}}function mS(r,e){return rO(e)?pS(e):wb(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(){this._=void 0}}function XO(r,e,t){return r instanceof od?(function(s,i){const a={fields:{[K3]:{stringValue:G3},[X3]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&xb(i)&&(i=Ig(i)),i&&(a.fields[Y3]=i),{mapValue:a}})(t,e):r instanceof ld?xS(r,e):r instanceof cd?yS(r,e):(function(s,i){const a=gS(s,i),c=Y4(a)+Y4(s.Ie);return Yv(a)&&Yv(s.Ie)?pS(c):wb(s.serializer,c)})(r,e)}function QO(r,e,t){return r instanceof ld?xS(r,e):r instanceof cd?yS(r,e):t}function gS(r,e){return r instanceof ud?(function(n){return Yv(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class od extends Rg{}class ld extends Rg{constructor(e){super(),this.elements=e}}function xS(r,e){const t=vS(e);for(const n of r.elements)t.some((s=>ya(s,n)))||t.push(n);return{arrayValue:{values:t}}}class cd extends Rg{constructor(e){super(),this.elements=e}}function yS(r,e){let t=vS(e);for(const n of r.elements)t=t.filter((s=>!ya(s,n)));return{arrayValue:{values:t}}}class ud extends Rg{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Y4(r){return Vr(r.integerValue||r.doubleValue)}function vS(r){return fh(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,t){this.field=e,this.transform=t}}function JO(r,e){return r.field.isEqual(e.field)&&(function(n,s){return n instanceof ld&&s instanceof ld||n instanceof cd&&s instanceof cd?Ju(n.elements,s.elements,ya):n instanceof ud&&s instanceof ud?ya(n.Ie,s.Ie):n instanceof od&&s instanceof od})(r.transform,e.transform)}class ZO{constructor(e,t){this.version=e,this.transformResults=t}}class nn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function im(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Dg{}function bS(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Kh(r.key,nn.none()):new Cd(r.key,r.data,nn.none());{const t=r.data,n=Un.empty();let s=new Er(Gr.comparator);for(let i of e.fields)if(!s.has(i)){let a=t.field(i);a===null&&i.length>1&&(i=i.popLast(),a=t.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new co(r.key,n,new ks(s.toArray()),nn.none())}}function eL(r,e,t){r instanceof Cd?(function(s,i,a){const c=s.value.clone(),d=Q4(s.fieldTransforms,i,a.transformResults);c.setAll(d),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(r,e,t):r instanceof co?(function(s,i,a){if(!im(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=Q4(s.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(wS(s)),d.setAll(c),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()})(r,e,t):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function $0(r,e,t,n){return r instanceof Cd?(function(i,a,c,d){if(!im(i.precondition,a))return c;const h=i.value.clone(),p=J4(i.fieldTransforms,d,a);return h.setAll(p),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(r,e,t,n):r instanceof co?(function(i,a,c,d){if(!im(i.precondition,a))return c;const h=J4(i.fieldTransforms,d,a),p=a.data;return p.setAll(wS(i)),p.setAll(h),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(r,e,t,n):(function(i,a,c){return im(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(r,e,t)}function tL(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),i=gS(n.transform,s||null);i!=null&&(t===null&&(t=Un.empty()),t.set(n.field,i))}return t||null}function X4(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Ju(n,s,((i,a)=>JO(i,a)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Cd extends Dg{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class co extends Dg{constructor(e,t,n,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function wS(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function Q4(r,e,t){const n=new Map;Et(r.length===t.length);for(let s=0;s<t.length;s++){const i=r[s],a=i.transform,c=e.data.field(i.field);n.set(i.field,QO(a,c,t[s]))}return n}function J4(r,e,t){const n=new Map;for(const s of r){const i=s.transform,a=t.data.field(s.field);n.set(s.field,XO(i,a,e))}return n}class Kh extends Dg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Eb extends Dg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&eL(i,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=$0(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=$0(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=fS();return this.mutations.forEach((s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=t.has(s.key)?null:c;const d=bS(a,c);d!==null&&n.set(s.key,d),a.isValidDocument()||a.convertToNoDocument(Ct.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Gt())}isEqual(e){return this.batchId===e.batchId&&Ju(this.mutations,e.mutations,((t,n)=>X4(t,n)))&&Ju(this.baseMutations,e.baseMutations,((t,n)=>X4(t,n)))}}class Ab{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){Et(e.mutations.length===n.length);let s=(function(){return qO})();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new Ab(e,t,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var un,rr;function _S(r){switch(r){case je.OK:return xt();case je.CANCELLED:case je.UNKNOWN:case je.DEADLINE_EXCEEDED:case je.RESOURCE_EXHAUSTED:case je.INTERNAL:case je.UNAVAILABLE:case je.UNAUTHENTICATED:return!1;case je.INVALID_ARGUMENT:case je.NOT_FOUND:case je.ALREADY_EXISTS:case je.PERMISSION_DENIED:case je.FAILED_PRECONDITION:case je.ABORTED:case je.OUT_OF_RANGE:case je.UNIMPLEMENTED:case je.DATA_LOSS:return!0;default:return xt()}}function ES(r){if(r===void 0)return ms("GRPC error has no .code"),je.UNKNOWN;switch(r){case un.OK:return je.OK;case un.CANCELLED:return je.CANCELLED;case un.UNKNOWN:return je.UNKNOWN;case un.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case un.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case un.INTERNAL:return je.INTERNAL;case un.UNAVAILABLE:return je.UNAVAILABLE;case un.UNAUTHENTICATED:return je.UNAUTHENTICATED;case un.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case un.NOT_FOUND:return je.NOT_FOUND;case un.ALREADY_EXISTS:return je.ALREADY_EXISTS;case un.PERMISSION_DENIED:return je.PERMISSION_DENIED;case un.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case un.ABORTED:return je.ABORTED;case un.OUT_OF_RANGE:return je.OUT_OF_RANGE;case un.UNIMPLEMENTED:return je.UNIMPLEMENTED;case un.DATA_LOSS:return je.DATA_LOSS;default:return xt()}}(rr=un||(un={}))[rr.OK=0]="OK",rr[rr.CANCELLED=1]="CANCELLED",rr[rr.UNKNOWN=2]="UNKNOWN",rr[rr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rr[rr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rr[rr.NOT_FOUND=5]="NOT_FOUND",rr[rr.ALREADY_EXISTS=6]="ALREADY_EXISTS",rr[rr.PERMISSION_DENIED=7]="PERMISSION_DENIED",rr[rr.UNAUTHENTICATED=16]="UNAUTHENTICATED",rr[rr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rr[rr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rr[rr.ABORTED=10]="ABORTED",rr[rr.OUT_OF_RANGE=11]="OUT_OF_RANGE",rr[rr.UNIMPLEMENTED=12]="UNIMPLEMENTED",rr[rr.INTERNAL=13]="INTERNAL",rr[rr.UNAVAILABLE=14]="UNAVAILABLE",rr[rr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=new Zo([4294967295,4294967295],0);function Z4(r){const e=C3().encode(r),t=new E3;return t.update(e),new Uint8Array(t.digest())}function eT(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Zo([t,n],0),new Zo([s,i],0)]}class kb{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new S0(`Invalid padding: ${t}`);if(n<0)throw new S0(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new S0(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new S0(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Zo.fromNumber(this.Ee)}Ae(e,t,n){let s=e.add(t.multiply(Zo.fromNumber(n)));return s.compare(nL)===1&&(s=new Zo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Z4(e),[n,s]=eT(t);for(let i=0;i<this.hashCount;i++){const a=this.Ae(n,s,i);if(!this.Re(a))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new kb(i,s,t);return n.forEach((c=>a.insert(c))),a}insert(e){if(this.Ee===0)return;const t=Z4(e),[n,s]=eT(t);for(let i=0;i<this.hashCount;i++){const a=this.Ae(n,s,i);this.Ve(a)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class S0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,t,n,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,Yh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Fg(Ct.min(),s,new Ur(Mt),Ks(),Gt())}}class Yh{constructor(e,t,n,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Yh(n,t,Gt(),Gt(),Gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,t,n,s){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=s}}class TS{constructor(e,t){this.targetId=e,this.ge=t}}class AS{constructor(e,t,n=hn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class tT{constructor(){this.pe=0,this.ye=rT(),this.we=hn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Gt(),t=Gt(),n=Gt();return this.ye.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:xt()}})),new Yh(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=rT()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Et(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class sL{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ks(),this.$e=Sp(),this.Ue=Sp(),this.Ke=new Ur(Mt)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,(t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:xt()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach(((n,s)=>{this.Je(s)&&t(s)}))}Ze(e){const t=e.targetId,n=e.ge.count,s=this.Xe(t);if(s){const i=s.target;if(Im(i))if(n===0){const a=new ut(i.path);this.ze(t,a,$r.newNoDocument(a,Ct.min()))}else Et(n===1);else{const a=this.et(t);if(a!==n){const c=this.tt(e),d=c?this.nt(c,e,a):1;if(d!==0){this.Ye(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,h)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=t;let a,c;try{a=ro(n).toUint8Array()}catch(d){if(d instanceof q3)return nh("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new kb(a,s,i)}catch(d){return nh(d instanceof S0?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ee===0?null:c}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let s=0;return n.forEach((i=>{const a=this.ke.it(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.ze(t,i,null),s++)})),s}ot(e){const t=new Map;this.qe.forEach(((i,a)=>{const c=this.Xe(a);if(c){if(i.current&&Im(c.target)){const d=new ut(c.target.path);this._t(d).has(a)||this.ut(a,d)||this.ze(a,d,$r.newNoDocument(d,e))}i.ve&&(t.set(a,i.Fe()),i.Me())}}));let n=Gt();this.Ue.forEach(((i,a)=>{let c=!0;a.forEachWhile((d=>{const h=this.Xe(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(i))})),this.Qe.forEach(((i,a)=>a.setReadTime(e)));const s=new Fg(e,t,this.Ke,this.Qe,n);return this.Qe=Ks(),this.$e=Sp(),this.Ue=Sp(),this.Ke=new Ur(Mt),s}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new tT,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Er(Mt),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Er(Mt),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||Xe("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new tT),this.ke.getRemoteKeysForTarget(e).forEach((t=>{this.ze(e,t,null)}))}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Sp(){return new Ur(ut.comparator)}function rT(){return new Ur(ut.comparator)}const iL={asc:"ASCENDING",desc:"DESCENDING"},aL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oL={and:"AND",or:"OR"};class lL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function e1(r,e){return r.useProto3Json||zh(e)?e:{value:e}}function dd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NS(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function cL(r,e){return dd(r,e.toTimestamp())}function jn(r){return Et(!!r),Ct.fromTimestamp((function(t){const n=to(t);return new dr(n.seconds,n.nanos)})(r))}function Sb(r,e){return t1(r,e).canonicalString()}function t1(r,e){const t=(function(s){return new ur(["projects",s.projectId,"databases",s.database])})(r).child("documents");return e===void 0?t:t.child(e)}function kS(r){const e=ur.fromString(r);return Et(OS(e)),e}function mh(r,e){return Sb(r.databaseId,e.path)}function Ga(r,e){const t=kS(e);if(t.get(1)!==r.databaseId.projectId)throw new nt(je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new nt(je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ut(IS(t))}function SS(r,e){return Sb(r.databaseId,e)}function CS(r){const e=kS(r);return e.length===4?ur.emptyPath():IS(e)}function r1(r){return new ur(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function IS(r){return Et(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function nT(r,e,t){return{name:mh(r,e),fields:t.value.mapValue.fields}}function uL(r,e,t){const n=Ga(r,e.name),s=jn(e.updateTime),i=e.createTime?jn(e.createTime):Ct.min(),a=new Un({mapValue:{fields:e.fields}}),c=$r.newFoundDocument(n,s,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function dL(r,e){return"found"in e?(function(n,s){Et(!!s.found),s.found.name,s.found.updateTime;const i=Ga(n,s.found.name),a=jn(s.found.updateTime),c=s.found.createTime?jn(s.found.createTime):Ct.min(),d=new Un({mapValue:{fields:s.found.fields}});return $r.newFoundDocument(i,a,c,d)})(r,e):"missing"in e?(function(n,s){Et(!!s.missing),Et(!!s.readTime);const i=Ga(n,s.missing),a=jn(s.readTime);return $r.newNoDocument(i,a)})(r,e):xt()}function hL(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:xt()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(h,p){return h.useProto3Json?(Et(p===void 0||typeof p=="string"),hn.fromBase64String(p||"")):(Et(p===void 0||p instanceof Buffer||p instanceof Uint8Array),hn.fromUint8Array(p||new Uint8Array))})(r,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(h){const p=h.code===void 0?je.UNKNOWN:ES(h.code);return new nt(p,h.message||"")})(a);t=new AS(n,s,i,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Ga(r,n.document.name),i=jn(n.document.updateTime),a=n.document.createTime?jn(n.document.createTime):Ct.min(),c=new Un({mapValue:{fields:n.document.fields}}),d=$r.newFoundDocument(s,i,a,c),h=n.targetIds||[],p=n.removedTargetIds||[];t=new am(h,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Ga(r,n.document),i=n.readTime?jn(n.readTime):Ct.min(),a=$r.newNoDocument(s,i),c=n.removedTargetIds||[];t=new am([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Ga(r,n.document),i=n.removedTargetIds||[];t=new am([],i,s,null)}else{if(!("filter"in e))return xt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new rL(s,i),c=n.targetId;t=new TS(c,a)}}return t}function gh(r,e){let t;if(e instanceof Cd)t={update:nT(r,e.key,e.value)};else if(e instanceof Kh)t={delete:mh(r,e.key)};else if(e instanceof co)t={update:nT(r,e.key,e.data),updateMask:yL(e.fieldMask)};else{if(!(e instanceof Eb))return xt();t={verify:mh(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(i,a){const c=a.transform;if(c instanceof od)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ld)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof cd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ud)return{fieldPath:a.field.canonicalString(),increment:c.Ie};throw xt()})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:cL(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:xt()})(r,e.precondition)),t}function n1(r,e){const t=e.currentDocument?(function(i){return i.updateTime!==void 0?nn.updateTime(jn(i.updateTime)):i.exists!==void 0?nn.exists(i.exists):nn.none()})(e.currentDocument):nn.none(),n=e.updateTransforms?e.updateTransforms.map((s=>(function(a,c){let d=null;if("setToServerValue"in c)Et(c.setToServerValue==="REQUEST_TIME"),d=new od;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];d=new ld(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];d=new cd(p)}else"increment"in c?d=new ud(a,c.increment):xt();const h=Gr.fromServerFormat(c.fieldPath);return new _b(h,d)})(r,s))):[];if(e.update){e.update.name;const s=Ga(r,e.update.name),i=new Un({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(d){const h=d.fieldPaths||[];return new ks(h.map((p=>Gr.fromServerFormat(p))))})(e.updateMask);return new co(s,i,a,t,n)}return new Cd(s,i,t,n)}if(e.delete){const s=Ga(r,e.delete);return new Kh(s,t)}if(e.verify){const s=Ga(r,e.verify);return new Eb(s,t)}return xt()}function fL(r,e){return r&&r.length>0?(Et(e!==void 0),r.map((t=>(function(s,i){let a=s.updateTime?jn(s.updateTime):jn(i);return a.isEqual(Ct.min())&&(a=jn(i)),new ZO(a,s.transformResults||[])})(t,e)))):[]}function PS(r,e){return{documents:[SS(r,e.path)]}}function jS(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=SS(r,s);const i=(function(h){if(h.length!==0)return FS(wr.create(h,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const a=(function(h){if(h.length!==0)return h.map((p=>(function(x){return{field:ju(x.field),direction:mL(x.dir)}})(p)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=e1(r,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ht:t,parent:s}}function RS(r){let e=CS(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){Et(n===1);const p=t.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];t.where&&(i=(function(m){const x=DS(m);return x instanceof wr&&bb(x)?x.getFilters():[x]})(t.where));let a=[];t.orderBy&&(a=(function(m){return m.map((x=>(function(_){return new ph(Ru(_.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(x)))})(t.orderBy));let c=null;t.limit&&(c=(function(m){let x;return x=typeof m=="object"?m.value:m,zh(x)?null:x})(t.limit));let d=null;t.startAt&&(d=(function(m){const x=!!m.before,v=m.values||[];return new id(v,x)})(t.startAt));let h=null;return t.endAt&&(h=(function(m){const x=!m.before,v=m.values||[];return new id(v,x)})(t.endAt)),BO(e,s,a,i,c,"F",d,h)}function pL(r,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xt()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function DS(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Ru(t.unaryFilter.field);return Zt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Ru(t.unaryFilter.field);return Zt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ru(t.unaryFilter.field);return Zt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ru(t.unaryFilter.field);return Zt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return xt()}})(r):r.fieldFilter!==void 0?(function(t){return Zt.create(Ru(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xt()}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return wr.create(t.compositeFilter.filters.map((n=>DS(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return xt()}})(t.compositeFilter.op))})(r):xt()}function mL(r){return iL[r]}function gL(r){return aL[r]}function xL(r){return oL[r]}function ju(r){return{fieldPath:r.canonicalString()}}function Ru(r){return Gr.fromServerFormat(r.fieldPath)}function FS(r){return r instanceof Zt?(function(t){if(t.op==="=="){if(B4(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NAN"}};if($4(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(B4(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NOT_NAN"}};if($4(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ju(t.field),op:gL(t.op),value:t.value}}})(r):r instanceof wr?(function(t){const n=t.getFilters().map((s=>FS(s)));return n.length===1?n[0]:{compositeFilter:{op:xL(t.op),filters:n}}})(r):xt()}function yL(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function OS(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,t,n,s,i=Ct.min(),a=Ct.min(),c=hn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.Tt=e}}function vL(r,e){let t;if(e.document)t=uL(r.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=ut.fromSegments(e.noDocument.path),s=hc(e.noDocument.readTime);t=$r.newNoDocument(n,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xt();{const n=ut.fromSegments(e.unknownDocument.path),s=hc(e.unknownDocument.version);t=$r.newUnknownDocument(n,s)}}return e.readTime&&t.setReadTime((function(s){const i=new dr(s[0],s[1]);return Ct.fromTimestamp(i)})(e.readTime)),t}function sT(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Rm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(i,a){return{name:mh(i,a.key),fields:a.data.value.mapValue.fields,updateTime:dd(i,a.version.toTimestamp()),createTime:dd(i,a.createTime.toTimestamp())}})(r.Tt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:dc(e.version)};else{if(!e.isUnknownDocument())return xt();n.unknownDocument={path:t.path.toArray(),version:dc(e.version)}}return n}function Rm(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function dc(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hc(r){const e=new dr(r.seconds,r.nanoseconds);return Ct.fromTimestamp(e)}function ql(r,e){const t=(e.baseMutations||[]).map((i=>n1(r.Tt,i)));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const c=e.mutations[i+1];a.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map((i=>n1(r.Tt,i))),s=dr.fromMillis(e.localWriteTimeMs);return new Tb(e.batchId,s,t,n)}function C0(r){const e=hc(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?hc(r.lastLimboFreeSnapshotVersion):Ct.min();let n;return n=(function(i){return i.documents!==void 0})(r.query)?(function(i){return Et(i.documents.length===1),pi(qh(CS(i.documents[0])))})(r.query):(function(i){return pi(RS(i))})(r.query),new za(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,hn.fromBase64String(r.resumeToken))}function MS(r,e){const t=dc(e.snapshotVersion),n=dc(e.lastLimboFreeSnapshotVersion);let s;s=Im(e.target)?PS(r.Tt,e.target):jS(r.Tt,e.target).ht;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uc(e.target),readTime:t,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function VS(r){const e=RS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?jm(e,e.limit,"L"):e}function Qy(r,e){return new Nb(e.largestBatchId,n1(r.Tt,e.overlayMutation))}function iT(r,e){const t=e.path.lastSegment();return[r,is(e.path.popLast()),t]}function aT(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:dc(n.readTime),documentKey:is(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{getBundleMetadata(e,t){return oT(e).get(t).next((n=>{if(n)return(function(i){return{id:i.bundleId,createTime:hc(i.createTime),version:i.version}})(n)}))}saveBundleMetadata(e,t){return oT(e).put((function(s){return{bundleId:s.id,createTime:dc(jn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return lT(e).get(t).next((n=>{if(n)return(function(i){return{name:i.name,query:VS(i.bundledQuery),readTime:hc(i.readTime)}})(n)}))}saveNamedQuery(e,t){return lT(e).put((function(s){return{name:s.name,readTime:dc(jn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function oT(r){return wn(r,kg)}function lT(r){return wn(r,Sg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const n=t.uid||"";return new Og(e,n)}getOverlay(e,t){return x0(e).get(iT(this.userId,t)).next((n=>n?Qy(this.serializer,n):null))}getOverlays(e,t){const n=ca();return xe.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&n.set(s,i)})))).next((()=>n))}saveOverlays(e,t,n){const s=[];return n.forEach(((i,a)=>{const c=new Nb(t,a);s.push(this.Et(e,c))})),xe.waitFor(s)}removeOverlaysForBatchId(e,t,n){const s=new Set;t.forEach((a=>s.add(is(a.getCollectionPath()))));const i=[];return s.forEach((a=>{const c=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);i.push(x0(e).J(qv,c))})),xe.waitFor(i)}getOverlaysForCollection(e,t,n){const s=ca(),i=is(t),a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return x0(e).G(qv,a).next((c=>{for(const d of c){const h=Qy(this.serializer,d);s.set(h.getKey(),h)}return s}))}getOverlaysForCollectionGroup(e,t,n,s){const i=ca();let a;const c=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return x0(e).Z({index:B3,range:c},((d,h,p)=>{const m=Qy(this.serializer,h);i.size()<s||m.largestBatchId===a?(i.set(m.getKey(),m),a=m.largestBatchId):p.done()})).next((()=>i))}Et(e,t){return x0(e).put((function(s,i,a){const[c,d,h]=iT(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:gh(s.Tt,a.mutation)}})(this.serializer,this.userId,t))}}function x0(r){return wn(r,Cg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{dt(e){return wn(e,mb)}getSessionToken(e){return this.dt(e).get("sessionToken").next((t=>{const n=t?.value;return n?hn.fromUint8Array(n):hn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Vr(e.integerValue));else if("doubleValue"in e){const n=Vr(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),ah(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),typeof n=="string"&&(n=to(n)),t.yt(`${n.seconds||""}`),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(ro(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?J3(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Pg(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):xt()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const s of Object.keys(n))this.wt(s,t),this.Rt(n[s],t)}vt(e,t){var n,s;const i=e.fields||{};this.ft(t,53);const a=nd,c=((s=(n=i[a].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.ft(t,15),t.gt(Vr(c)),this.wt(a,t),this.Rt(i[a],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const s of n)this.Rt(s,t)}Dt(e,t){this.ft(t,37),ut.fromName(e).path.forEach((n=>{this.ft(t,60),this.Mt(n,t)}))}ft(e,t){e.gt(t)}St(e){e.gt(2)}}Gl.xt=new Gl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=255;function _L(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function cT(r){const e=64-(function(n){let s=0;for(let i=0;i<8;++i){const a=_L(255&n[i]);if(s+=a,a!==8)break}return s})(r);return Math.ceil(e/8)}class EL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Nt(n.value),n=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.kt(n.value),n=t.next();this.qt()}Qt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Nt(n);else if(n<2048)this.Nt(960|n>>>6),this.Nt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|n>>>12),this.Nt(128|63&n>>>6),this.Nt(128|63&n);else{const s=t.codePointAt(0);this.Nt(240|s>>>18),this.Nt(128|63&s>>>12),this.Nt(128|63&s>>>6),this.Nt(128|63&s)}}this.Bt()}$t(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.kt(n);else if(n<2048)this.kt(960|n>>>6),this.kt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|n>>>12),this.kt(128|63&n>>>6),this.kt(128|63&n);else{const s=t.codePointAt(0);this.kt(240|s>>>18),this.kt(128|63&s>>>12),this.kt(128|63&s>>>6),this.kt(128|63&s)}}this.qt()}Ut(e){const t=this.Kt(e),n=cT(t);this.Wt(1+n),this.buffer[this.position++]=255&n;for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Gt(e){const t=this.Kt(e),n=cT(t);this.Wt(1+n),this.buffer[this.position++]=~(255&n);for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}zt(){this.jt(_u),this.jt(255)}Ht(){this.Jt(_u),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const t=(function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let s=1;s<t.length;++s)t[s]^=n?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===_u?(this.jt(_u),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===_u?(this.Jt(_u),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class TL{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class AL{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class y0{constructor(){this.Zt=new EL,this.Xt=new TL(this.Zt),this.en=new AL(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,t,n,s){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=s}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Kl(this.indexId,this.documentKey,this.arrayValue,n)}}function Mo(r,e){let t=r.indexId-e.indexId;return t!==0?t:(t=uT(r.arrayValue,e.arrayValue),t!==0?t:(t=uT(r.directionalValue,e.directionalValue),t!==0?t:ut.comparator(r.documentKey,e.documentKey)))}function uT(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this.rn=new Er(((t,n)=>Gr.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const n=t;n.isInequality()?this.rn=this.rn.add(n):this._n.push(n)}}get an(){return this.rn.size>1}un(e){if(Et(e.collectionGroup===this.collectionId),this.an)return!1;const t=zv(e);if(t!==void 0&&!this.cn(t))return!1;const n=Ul(e);let s=new Set,i=0,a=0;for(;i<n.length&&this.cn(n[i]);++i)s=s.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.rn.size>0){const c=this.rn.getIterator().getNext();if(!s.has(c.field.canonicalString())){const d=n[i];if(!this.ln(c,d)||!this.hn(this.sn[a++],d))return!1}++i}for(;i<n.length;++i){const c=n[i];if(a>=this.sn.length||!this.hn(this.sn[a++],c))return!1}return!0}Pn(){if(this.an)return null;let e=new Er(Gr.comparator);const t=[];for(const n of this._n)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new Zp(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Zp(n.field,0))}for(const n of this.sn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Zp(n.field,n.dir==="asc"?0:1)));return new Em(Em.UNKNOWN_ID,this.collectionId,t,ih.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(r){var e,t;if(Et(r instanceof Zt||r instanceof wr),r instanceof Zt){if(r instanceof oS){const s=((t=(e=r.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((i=>Zt.create(r.field,"==",i))))||[];return wr.create(s,"or")}return r}const n=r.filters.map((s=>$S(s)));return wr.create(n,r.op)}function NL(r){if(r.getFilters().length===0)return[];const e=a1($S(r));return Et(BS(e)),s1(e)||i1(e)?[e]:e.getFilters()}function s1(r){return r instanceof Zt}function i1(r){return r instanceof wr&&bb(r)}function BS(r){return s1(r)||i1(r)||(function(t){if(t instanceof wr&&Xv(t)){for(const n of t.getFilters())if(!s1(n)&&!i1(n))return!1;return!0}return!1})(r)}function a1(r){if(Et(r instanceof Zt||r instanceof wr),r instanceof Zt)return r;if(r.filters.length===1)return a1(r.filters[0]);const e=r.filters.map((n=>a1(n)));let t=wr.create(e,r.op);return t=Dm(t),BS(t)?t:(Et(t instanceof wr),Et(ad(t)),Et(t.filters.length>1),t.filters.reduce(((n,s)=>Cb(n,s))))}function Cb(r,e){let t;return Et(r instanceof Zt||r instanceof wr),Et(e instanceof Zt||e instanceof wr),t=r instanceof Zt?e instanceof Zt?(function(s,i){return wr.create([s,i],"and")})(r,e):hT(r,e):e instanceof Zt?hT(e,r):(function(s,i){if(Et(s.filters.length>0&&i.filters.length>0),ad(s)&&ad(i))return sS(s,i.getFilters());const a=Xv(s)?s:i,c=Xv(s)?i:s,d=a.filters.map((h=>Cb(h,c)));return wr.create(d,"or")})(r,e),Dm(t)}function hT(r,e){if(ad(e))return sS(e,r.getFilters());{const t=e.filters.map((n=>Cb(r,n)));return wr.create(t,"or")}}function Dm(r){if(Et(r instanceof Zt||r instanceof wr),r instanceof Zt)return r;const e=r.getFilters();if(e.length===1)return Dm(e[0]);if(rS(r))return r;const t=e.map((s=>Dm(s))),n=[];return t.forEach((s=>{s instanceof Zt?n.push(s):s instanceof wr&&(s.op===r.op?n.push(...s.filters):n.push(s))})),n.length===1?n[0]:wr.create(n,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(){this.Tn=new Ib}addToCollectionParentIndex(e,t){return this.Tn.add(t),xe.resolve()}getCollectionParents(e,t){return xe.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return xe.resolve()}deleteFieldIndex(e,t){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,t){return xe.resolve()}getDocumentsMatchingTarget(e,t){return xe.resolve(null)}getIndexType(e,t){return xe.resolve(0)}getFieldIndexes(e,t){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,t){return xe.resolve(Js.min())}getMinOffsetFromCollectionGroup(e,t){return xe.resolve(Js.min())}updateCollectionGroup(e,t,n){return xe.resolve()}updateIndexEntries(e,t){return xe.resolve()}}class Ib{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new Er(ur.comparator),i=!s.has(n);return this.index[t]=s.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Er(ur.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="IndexedDbIndexManager",Cp=new Uint8Array(0);class SL{constructor(e,t){this.databaseId=t,this.In=new Ib,this.En=new lo((n=>uc(n)),((n,s)=>Wh(n,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const n=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.In.add(t)}));const i={collectionId:n,parent:is(s)};return pT(e).put(i)}return xe.resolve()}getCollectionParents(e,t){const n=[],s=IDBKeyRange.bound([t,""],[P3(t),""],!1,!0);return pT(e).G(s).next((i=>{for(const a of i){if(a.collectionId!==t)break;n.push(la(a.parent))}return n}))}addFieldIndex(e,t){const n=v0(e),s=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const i=n.add(s);if(t.indexState){const a=Tu(e);return i.next((c=>{a.put(aT(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=v0(e),s=Tu(e),i=Eu(e);return n.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=v0(e),n=Eu(e),s=Tu(e);return t.J().next((()=>n.J())).next((()=>s.J()))}createTargetIndexes(e,t){return xe.forEach(this.dn(t),(n=>this.getIndexType(e,n).next((s=>{if(s===0||s===1){const i=new dT(n).Pn();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,t){const n=Eu(e);let s=!0;const i=new Map;return xe.forEach(this.dn(t),(a=>this.An(e,a).next((c=>{s&&(s=!!c),i.set(a,c)})))).next((()=>{if(s){let a=Gt();const c=[];return xe.forEach(i,((d,h)=>{Xe(fT,`Using index ${(function(V){return`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map((L=>`${L.fieldPath}:${L.kind}`)).join(",")}`})(d)} to execute ${uc(t)}`);const p=(function(V,L){const K=zv(L);if(K===void 0)return null;for(const H of Pm(V,K.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null})(h,d),m=(function(V,L){const K=new Map;for(const H of Ul(L))for(const S of Pm(V,H.fieldPath))switch(S.op){case"==":case"in":K.set(H.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return K.set(H.fieldPath.canonicalString(),S.value),Array.from(K.values())}return null})(h,d),x=(function(V,L){const K=[];let H=!0;for(const S of Ul(L)){const k=S.kind===0?q4(V,S.fieldPath,V.startAt):G4(V,S.fieldPath,V.startAt);K.push(k.value),H&&(H=k.inclusive)}return new id(K,H)})(h,d),v=(function(V,L){const K=[];let H=!0;for(const S of Ul(L)){const k=S.kind===0?G4(V,S.fieldPath,V.endAt):q4(V,S.fieldPath,V.endAt);K.push(k.value),H&&(H=k.inclusive)}return new id(K,H)})(h,d),_=this.Rn(d,h,x),w=this.Rn(d,h,v),E=this.Vn(d,h,m),R=this.mn(d.indexId,p,_,x.inclusive,w,v.inclusive,E);return xe.forEach(R,(C=>n.H(C,t.limit).next((V=>{V.forEach((L=>{const K=ut.fromSegments(L.documentKey);a.has(K)||(a=a.add(K),c.push(K))}))}))))})).next((()=>c))}return xe.resolve(null)}))}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=NL(wr.create(e.filters,"and")).map((n=>Jv(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.En.set(e,t),t)}mn(e,t,n,s,i,a,c){const d=(t!=null?t.length:1)*Math.max(n.length,i.length),h=d/(t!=null?t.length:1),p=[];for(let m=0;m<d;++m){const x=t?this.fn(t[m/h]):Cp,v=this.gn(e,x,n[m%h],s),_=this.pn(e,x,i[m%h],a),w=c.map((E=>this.gn(e,x,E,!0)));p.push(...this.createRange(v,_,w))}return p}gn(e,t,n,s){const i=new Kl(e,ut.empty(),t,n);return s?i:i.nn()}pn(e,t,n,s){const i=new Kl(e,ut.empty(),t,n);return s?i.nn():i}An(e,t){const n=new dT(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((i=>{let a=null;for(const c of i)n.un(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a}))}getIndexType(e,t){let n=2;const s=this.dn(t);return xe.forEach(s,(i=>this.An(e,i).next((a=>{a?n!==0&&a.fields.length<(function(d){let h=new Er(Gr.comparator),p=!1;for(const m of d.filters)for(const x of m.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?p=!0:h=h.add(x.field));for(const m of d.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)})(i)&&(n=1):n=0})))).next((()=>(function(a){return a.limit!==null})(t)&&s.length>1&&n===2?1:n))}yn(e,t){const n=new y0;for(const s of Ul(e)){const i=t.data.field(s.fieldPath);if(i==null)return null;const a=n.tn(s.kind);Gl.xt.At(i,a)}return n.Yt()}fn(e){const t=new y0;return Gl.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const n=new y0;return Gl.xt.At(hh(this.databaseId,t),n.tn((function(i){const a=Ul(i);return a.length===0?0:a[a.length-1].kind})(e))),n.Yt()}Vn(e,t,n){if(n===null)return[];let s=[];s.push(new y0);let i=0;for(const a of Ul(e)){const c=n[i++];for(const d of s)if(this.Sn(t,a.fieldPath)&&fh(c))s=this.bn(s,a,c);else{const h=d.tn(a.kind);Gl.xt.At(c,h)}}return this.Dn(s)}Rn(e,t,n){return this.Vn(e,t,n.position)}Dn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Yt();return t}bn(e,t,n){const s=[...e],i=[];for(const a of n.arrayValue.values||[])for(const c of s){const d=new y0;d.seed(c.Yt()),Gl.xt.At(a,d.tn(t.kind)),i.push(d)}return i}Sn(e,t){return!!e.filters.find((n=>n instanceof Zt&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=v0(e),s=Tu(e);return(t?n.G(Wv,IDBKeyRange.bound(t,t)):n.G()).next((i=>{const a=[];return xe.forEach(i,(c=>s.get([c.indexId,this.uid]).next((d=>{a.push((function(p,m){const x=m?new ih(m.sequenceNumber,new Js(hc(m.readTime),new ut(la(m.documentKey)),m.largestBatchId)):ih.empty(),v=p.fields.map((([_,w])=>new Zp(Gr.fromServerFormat(_),w)));return new Em(p.indexId,p.collectionGroup,v,x)})(c,d))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,s)=>{const i=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Mt(n.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const s=v0(e),i=Tu(e);return this.vn(e).next((a=>s.G(Wv,IDBKeyRange.bound(t,t)).next((c=>xe.forEach(c,(d=>i.put(aT(d.indexId,this.uid,a,n))))))))}updateIndexEntries(e,t){const n=new Map;return xe.forEach(t,((s,i)=>{const a=n.get(s.collectionGroup);return(a?xe.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next((c=>(n.set(s.collectionGroup,c),xe.forEach(c,(d=>this.Cn(e,s,d).next((h=>{const p=this.Fn(i,d);return h.isEqual(p)?xe.resolve():this.Mn(e,i,d,h,p)})))))))}))}xn(e,t,n,s){return Eu(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.wn(n,t.key),documentKey:t.key.path.toArray()})}On(e,t,n,s){return Eu(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.wn(n,t.key),t.key.path.toArray()])}Cn(e,t,n){const s=Eu(e);let i=new Er(Mo);return s.Z({index:$3,range:IDBKeyRange.only([n.indexId,this.uid,this.wn(n,t)])},((a,c)=>{i=i.add(new Kl(n.indexId,t,c.arrayValue,c.directionalValue))})).next((()=>i))}Fn(e,t){let n=new Er(Mo);const s=this.yn(t,e);if(s==null)return n;const i=zv(t);if(i!=null){const a=e.data.field(i.fieldPath);if(fh(a))for(const c of a.arrayValue.values||[])n=n.add(new Kl(t.indexId,e.key,this.fn(c),s))}else n=n.add(new Kl(t.indexId,e.key,Cp,s));return n}Mn(e,t,n,s,i){Xe(fT,"Updating index entries for document '%s'",t.key);const a=[];return(function(d,h,p,m,x){const v=d.getIterator(),_=h.getIterator();let w=wu(v),E=wu(_);for(;w||E;){let R=!1,C=!1;if(w&&E){const V=p(w,E);V<0?C=!0:V>0&&(R=!0)}else w!=null?C=!0:R=!0;R?(m(E),E=wu(_)):C?(x(w),w=wu(v)):(w=wu(v),E=wu(_))}})(s,i,Mo,(c=>{a.push(this.xn(e,t,n,c))}),(c=>{a.push(this.On(e,t,n,c))})),xe.waitFor(a)}vn(e){let t=1;return Tu(e).Z({index:V3,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,s,i)=>{i.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((a,c)=>Mo(a,c))).filter(((a,c,d)=>!c||Mo(a,d[c-1])!==0));const s=[];s.push(e);for(const a of n){const c=Mo(a,e),d=Mo(a,t);if(c===0)s[0]=e.nn();else if(c>0&&d<0)s.push(a),s.push(a.nn());else if(d>0)break}s.push(t);const i=[];for(let a=0;a<s.length;a+=2){if(this.Nn(s[a],s[a+1]))return[];const c=[s[a].indexId,this.uid,s[a].arrayValue,s[a].directionalValue,Cp,[]],d=[s[a+1].indexId,this.uid,s[a+1].arrayValue,s[a+1].directionalValue,Cp,[]];i.push(IDBKeyRange.bound(c,d))}return i}Nn(e,t){return Mo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mT)}getMinOffset(e,t){return xe.mapArray(this.dn(t),(n=>this.An(e,n).next((s=>s||xt())))).next(mT)}}function pT(r){return wn(r,ch)}function Eu(r){return wn(r,Sm)}function v0(r){return wn(r,pb)}function Tu(r){return wn(r,km)}function mT(r){Et(r.length!==0);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const s=r[n].indexState.offset;db(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Js(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},US=41943040;class ns{static withCacheSize(e){return new ns(e,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(r,e,t){const n=r.store(Fi),s=r.store(Zu),i=[],a=IDBKeyRange.only(t.batchId);let c=0;const d=n.Z({range:a},((p,m,x)=>(c++,x.delete())));i.push(d.next((()=>{Et(c===1)})));const h=[];for(const p of t.mutations){const m=O3(e,p.key.path,t.batchId);i.push(s.delete(m)),h.push(p.key)}return xe.waitFor(i).next((()=>h))}function Fm(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw xt();e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ns.DEFAULT_COLLECTION_PERCENTILE=10,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ns.DEFAULT=new ns(US,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ns.DISABLED=new ns(-1,0,0);class Lg{constructor(e,t,n,s){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=s,this.Bn={}}static It(e,t,n,s){Et(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Lg(i,t,n,s)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vo(e).Z({index:Xl,range:n},((s,i,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,n,s){const i=Du(e),a=Vo(e);return a.add({}).next((c=>{Et(typeof c=="number");const d=new Tb(c,t,n,s),h=(function(v,_,w){const E=w.baseMutations.map((C=>gh(v.Tt,C))),R=w.mutations.map((C=>gh(v.Tt,C)));return{userId:_,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:E,mutations:R}})(this.serializer,this.userId,d),p=[];let m=new Er(((x,v)=>Mt(x.canonicalString(),v.canonicalString())));for(const x of s){const v=O3(this.userId,x.key.path,c);m=m.add(x.key.path.popLast()),p.push(a.put(h)),p.push(i.put(v,iO))}return m.forEach((x=>{p.push(this.indexManager.addToCollectionParentIndex(e,x))})),e.addOnCommittedListener((()=>{this.Bn[c]=d.keys()})),xe.waitFor(p).next((()=>d))}))}lookupMutationBatch(e,t){return Vo(e).get(t).next((n=>n?(Et(n.userId===this.userId),ql(this.serializer,n)):null))}Ln(e,t){return this.Bn[t]?xe.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const s=n.keys();return this.Bn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Vo(e).Z({index:Xl,range:s},((a,c,d)=>{c.userId===this.userId&&(Et(c.batchId>=n),i=ql(this.serializer,c)),d.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=ec;return Vo(e).Z({index:Xl,range:t,reverse:!0},((s,i,a)=>{n=i.batchId,a.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ec],[this.userId,Number.POSITIVE_INFINITY]);return Vo(e).G(Xl,t).next((n=>n.map((s=>ql(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=em(this.userId,t.path),s=IDBKeyRange.lowerBound(n),i=[];return Du(e).Z({range:s},((a,c,d)=>{const[h,p,m]=a,x=la(p);if(h===this.userId&&t.path.isEqual(x))return Vo(e).get(m).next((v=>{if(!v)throw xt();Et(v.userId===this.userId),i.push(ql(this.serializer,v))}));d.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Er(Mt);const s=[];return t.forEach((i=>{const a=em(this.userId,i.path),c=IDBKeyRange.lowerBound(a),d=Du(e).Z({range:c},((h,p,m)=>{const[x,v,_]=h,w=la(v);x===this.userId&&i.path.isEqual(w)?n=n.add(_):m.done()}));s.push(d)})),xe.waitFor(s).next((()=>this.kn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1,i=em(this.userId,n),a=IDBKeyRange.lowerBound(i);let c=new Er(Mt);return Du(e).Z({range:a},((d,h,p)=>{const[m,x,v]=d,_=la(x);m===this.userId&&n.isPrefixOf(_)?_.length===s&&(c=c.add(v)):p.done()})).next((()=>this.kn(e,c)))}kn(e,t){const n=[],s=[];return t.forEach((i=>{s.push(Vo(e).get(i).next((a=>{if(a===null)throw xt();Et(a.userId===this.userId),n.push(ql(this.serializer,a))})))})),xe.waitFor(s).next((()=>n))}removeMutationBatch(e,t){return zS(e.ue,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.qn(t.batchId)})),xe.forEach(n,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return xe.resolve();const n=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),s=[];return Du(e).Z({range:n},((i,a,c)=>{if(i[0]===this.userId){const d=la(i[1]);s.push(d)}else c.done()})).next((()=>{Et(s.length===0)}))}))}containsKey(e,t){return HS(e,this.userId,t)}Qn(e){return WS(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ec,lastStreamToken:""}))}}function HS(r,e,t){const n=em(e,t.path),s=n[1],i=IDBKeyRange.lowerBound(n);let a=!1;return Du(r).Z({range:i,Y:!0},((c,d,h)=>{const[p,m,x]=c;p===e&&m===s&&(a=!0),h.done()})).next((()=>a))}function Vo(r){return wn(r,Fi)}function Du(r){return wn(r,Zu)}function WS(r){return wn(r,oh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new fc(0)}static Kn(){return new fc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next((t=>{const n=new fc(t.highestTargetId);return t.highestTargetId=n.next(),this.Gn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Wn(e).next((t=>Ct.fromTimestamp(new dr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Wn(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Wn(e).next((s=>(s.highestListenSequenceNumber=t,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Gn(e,s))))}addTargetData(e,t){return this.zn(e,t).next((()=>this.Wn(e).next((n=>(n.targetCount+=1,this.jn(t,n),this.Gn(e,n))))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Au(e).delete(t.targetId))).next((()=>this.Wn(e))).next((n=>(Et(n.targetCount>0),n.targetCount-=1,this.Gn(e,n))))}removeTargets(e,t,n){let s=0;const i=[];return Au(e).Z(((a,c)=>{const d=C0(c);d.sequenceNumber<=t&&n.get(d.targetId)===null&&(s++,i.push(this.removeTargetData(e,d)))})).next((()=>xe.waitFor(i))).next((()=>s))}forEachTarget(e,t){return Au(e).Z(((n,s)=>{const i=C0(s);t(i)}))}Wn(e){return xT(e).get(Nm).next((t=>(Et(t!==null),t)))}Gn(e,t){return xT(e).put(Nm,t)}zn(e,t){return Au(e).put(MS(this.serializer,t))}jn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Wn(e).next((t=>t.targetCount))}getTargetData(e,t){const n=uc(t),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Au(e).Z({range:s,index:M3},((a,c,d)=>{const h=C0(c);Wh(t,h.target)&&(i=h,d.done())})).next((()=>i))}addMatchingKeys(e,t,n){const s=[],i=Go(e);return t.forEach((a=>{const c=is(a.path);s.push(i.put({targetId:n,path:c})),s.push(this.referenceDelegate.addReference(e,n,a))})),xe.waitFor(s)}removeMatchingKeys(e,t,n){const s=Go(e);return xe.forEach(t,(i=>{const a=is(i.path);return xe.waitFor([s.delete([n,a]),this.referenceDelegate.removeReference(e,n,i)])}))}removeMatchingKeysForTargetId(e,t){const n=Go(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),s=Go(e);let i=Gt();return s.Z({range:n,Y:!0},((a,c,d)=>{const h=la(a[1]),p=new ut(h);i=i.add(p)})).next((()=>i))}containsKey(e,t){const n=is(t.path),s=IDBKeyRange.bound([n],[P3(n)],!1,!0);let i=0;return Go(e).Z({index:fb,Y:!0,range:s},(([a,c],d,h)=>{a!==0&&(i++,h.done())})).next((()=>i>0))}lt(e,t){return Au(e).get(t).next((n=>n?C0(n):null))}}function Au(r){return wn(r,ed)}function xT(r){return wn(r,tc)}function Go(r){return wn(r,td)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="LruGarbageCollector",qS=1048576;function vT([r,e],[t,n]){const s=Mt(r,t);return s===0?Mt(e,n):s}class IL{constructor(e){this.Hn=e,this.buffer=new Er(vT),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();vT(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class GS{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Xe(yT,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xl(t)?Xe(yT,"Ignoring IndexedDB error during garbage collection: ",t):await kc(t)}await this.er(3e5)}))}}class PL{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return xe.resolve(fi.ae);const n=new IL(t);return this.tr.forEachTarget(e,(s=>n.Zn(s.sequenceNumber))).next((()=>this.tr.rr(e,(s=>n.Zn(s))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(gT)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gT):this.ir(e,t)))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,s,i,a,c,d,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s)))).next((m=>(n=m,c=Date.now(),this.removeTargets(e,n,t)))).next((m=>(i=m,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((m=>(h=Date.now(),Iu()<=Jt.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(d-c)+`ms
	Removed ${m} documents in `+(h-d)+`ms
Total Duration: ${h-p}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m}))))}}function KS(r,e){return new PL(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e,t){this.db=e,this.garbageCollector=KS(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}sr(e){let t=0;return this.rr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,((n,s)=>t(s)))}addReference(e,t,n){return Ip(e,n)}removeReference(e,t,n){return Ip(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Ip(e,t)}ar(e,t){return(function(s,i){let a=!1;return WS(s).X((c=>HS(s,c,i).next((d=>(d&&(a=!0),xe.resolve(!d)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this._r(e,((a,c)=>{if(c<=t){const d=this.ar(e,a).next((h=>{if(!h)return i++,n.getEntry(e,a).next((()=>(n.removeEntry(a,Ct.min()),Go(e).delete((function(m){return[0,is(m.path)]})(a)))))}));s.push(d)}})).next((()=>xe.waitFor(s))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Ip(e,t)}_r(e,t){const n=Go(e);let s,i=fi.ae;return n.Z({index:fb},(([a,c],{path:d,sequenceNumber:h})=>{a===0?(i!==fi.ae&&t(new ut(la(s)),i),i=h,s=d):i=fi.ae})).next((()=>{i!==fi.ae&&t(new ut(la(s)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ip(r,e){return Go(r).put((function(n,s){return{targetId:0,path:is(n.path),sequenceNumber:s}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.changes=new lo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$r.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?xe.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Vl(e).put(n)}removeEntry(e,t,n){return Vl(e).delete((function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Rm(a),c[c.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.ur(e,n))))}getEntry(e,t){let n=$r.newInvalidDocument(t);return Vl(e).Z({index:tm,range:IDBKeyRange.only(b0(t))},((s,i)=>{n=this.cr(t,i)})).next((()=>n))}lr(e,t){let n={size:0,document:$r.newInvalidDocument(t)};return Vl(e).Z({index:tm,range:IDBKeyRange.only(b0(t))},((s,i)=>{n={document:this.cr(t,i),size:Fm(i)}})).next((()=>n))}getEntries(e,t){let n=Ks();return this.hr(e,t,((s,i)=>{const a=this.cr(s,i);n=n.insert(s,a)})).next((()=>n))}Pr(e,t){let n=Ks(),s=new Ur(ut.comparator);return this.hr(e,t,((i,a)=>{const c=this.cr(i,a);n=n.insert(i,c),s=s.insert(i,Fm(a))})).next((()=>({documents:n,Tr:s})))}hr(e,t,n){if(t.isEmpty())return xe.resolve();let s=new Er(_T);t.forEach((d=>s=s.add(d)));const i=IDBKeyRange.bound(b0(s.first()),b0(s.last())),a=s.getIterator();let c=a.getNext();return Vl(e).Z({index:tm,range:i},((d,h,p)=>{const m=ut.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&_T(c,m)<0;)n(c,null),c=a.getNext();c&&c.isEqual(m)&&(n(c,h),c=a.hasNext()?a.getNext():null),c?p.W(b0(c)):p.done()})).next((()=>{for(;c;)n(c,null),c=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,n,s,i){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),Rm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vl(e).G(IDBKeyRange.bound(c,d,!0)).next((h=>{i?.incrementDocumentReadCount(h.length);let p=Ks();for(const m of h){const x=this.cr(ut.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);x.isFoundDocument()&&(Gh(t,x)||s.has(x.key))&&(p=p.insert(x.key,x))}return p}))}getAllFromCollectionGroup(e,t,n,s){let i=Ks();const a=wT(t,n),c=wT(t,Js.max());return Vl(e).Z({index:L3,range:IDBKeyRange.bound(a,c,!0)},((d,h,p)=>{const m=this.cr(ut.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(m.key,m),i.size===s&&p.done()})).next((()=>i))}newChangeBuffer(e){return new DL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return bT(e).get(Hv).next((t=>(Et(!!t),t)))}ur(e,t){return bT(e).put(Hv,t)}cr(e,t){if(t){const n=vL(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(Ct.min())))return n}return $r.newInvalidDocument(e)}}function XS(r){return new RL(r)}class DL extends YS{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new lo((n=>n.toString()),((n,s)=>n.isEqual(s)))}applyChanges(e){const t=[];let n=0,s=new Er(((i,a)=>Mt(i.canonicalString(),a.canonicalString())));return this.changes.forEach(((i,a)=>{const c=this.Er.get(i);if(t.push(this.Ir.removeEntry(e,i,c.readTime)),a.isValidDocument()){const d=sT(this.Ir.serializer,a);s=s.add(i.path.popLast());const h=Fm(d);n+=h-c.size,t.push(this.Ir.addEntry(e,i,d))}else if(n-=c.size,this.trackRemovals){const d=sT(this.Ir.serializer,a.convertToNoDocument(Ct.min()));t.push(this.Ir.addEntry(e,i,d))}})),s.forEach((i=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,i))})),t.push(this.Ir.updateMetadata(e,n)),xe.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next((n=>(this.Er.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next((({documents:n,Tr:s})=>(s.forEach(((i,a)=>{this.Er.set(i,{size:a,readTime:n.get(i).readTime})})),n)))}}function bT(r){return wn(r,lh)}function Vl(r){return wn(r,Am)}function b0(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wT(r,e){const t=e.documentKey.path.toArray();return[r,Rm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function _T(r,e){const t=r.path.toArray(),n=e.path.toArray();let s=0;for(let i=0;i<t.length-2&&i<n.length-2;++i)if(s=Mt(t[i],n[i]),s)return s;return s=Mt(t.length,n.length),s||(s=Mt(t[t.length-2],n[n.length-2]),s||Mt(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(n!==null&&$0(n.mutation,s,ks.empty(),dr.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Gt()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Gt()){const s=ca();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((i=>{let a=k0();return i.forEach(((c,d)=>{a=a.insert(c,d.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const n=ca();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Gt())))}populateOverlays(e,t,n){const s=[];return n.forEach((i=>{t.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((a,c)=>{t.set(a,c)}))}))}computeViews(e,t,n,s){let i=Ks();const a=V0(),c=(function(){return V0()})();return t.forEach(((d,h)=>{const p=n.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof co)?i=i.insert(h.key,h):p!==void 0?(a.set(h.key,p.mutation.getFieldMask()),$0(p.mutation,h,p.mutation.getFieldMask(),dr.now())):a.set(h.key,ks.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((h,p)=>a.set(h,p))),t.forEach(((h,p)=>{var m;return c.set(h,new FL(p,(m=a.get(h))!==null&&m!==void 0?m:null))})),c)))}recalculateAndSaveOverlays(e,t){const n=V0();let s=new Ur(((a,c)=>a-c)),i=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const c of a)c.keys().forEach((d=>{const h=t.get(d);if(h===null)return;let p=n.get(d)||ks.empty();p=c.applyToLocalView(h,p),n.set(d,p);const m=(s.get(c.batchId)||Gt()).add(d);s=s.insert(c.batchId,m)}))})).next((()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,p=d.value,m=fS();p.forEach((x=>{if(!i.has(x)){const v=bS(t.get(x),n.get(x));v!==null&&m.set(x,v),i=i.add(x)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,m))}return xe.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,s){return(function(a){return ut.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-i.size):xe.resolve(ca());let c=sh,d=i;return a.next((h=>xe.forEach(h,((p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?xe.resolve():this.remoteDocumentCache.getEntry(e,p).next((x=>{d=d.insert(p,x)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,d,h,Gt()))).next((p=>({batchId:c,changes:hS(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ut(t)).next((n=>{let s=k0();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const i=t.collectionGroup;let a=k0();return this.indexManager.getCollectionParents(e,i).next((c=>xe.forEach(c,(d=>{const h=(function(m,x){return new Sd(x,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,s).next((p=>{p.forEach(((m,x)=>{a=a.insert(m,x)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,s)))).next((a=>{i.forEach(((d,h)=>{const p=h.getKey();a.get(p)===null&&(a=a.insert(p,$r.newInvalidDocument(p)))}));let c=k0();return a.forEach(((d,h)=>{const p=i.get(d);p!==void 0&&$0(p.mutation,h,ks.empty(),dr.now()),Gh(t,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return xe.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:jn(s.createTime)}})(t)),xe.resolve()}getNamedQuery(e,t){return xe.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,(function(s){return{name:s.name,query:VS(s.bundledQuery),readTime:jn(s.readTime)}})(t)),xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(){this.overlays=new Ur(ut.comparator),this.Rr=new Map}getOverlay(e,t){return xe.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ca();return xe.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&n.set(s,i)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((s,i)=>{this.Et(e,t,i)})),xe.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.Rr.get(n);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.Rr.delete(n)),xe.resolve()}getOverlaysForCollection(e,t,n){const s=ca(),i=t.length+1,a=new ut(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&s.set(d.getKey(),d)}return xe.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let i=new Ur(((h,p)=>h-p));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>n){let p=i.get(h.largestBatchId);p===null&&(p=ca(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=ca(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=s)););return xe.resolve(c)}Et(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Rr.get(s.largestBatchId).delete(n.key);this.Rr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Nb(t,n));let i=this.Rr.get(t);i===void 0&&(i=Gt(),this.Rr.set(t,i)),this.Rr.set(t,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,xe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(){this.Vr=new Er(Sn.mr),this.gr=new Er(Sn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new Sn(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.wr(new Sn(e,t))}Sr(e,t){e.forEach((n=>this.removeReference(n,t)))}br(e){const t=new ut(new ur([])),n=new Sn(t,e),s=new Sn(t,e+1),i=[];return this.gr.forEachInRange([n,s],(a=>{this.wr(a),i.push(a.key)})),i}Dr(){this.Vr.forEach((e=>this.wr(e)))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ut(new ur([])),n=new Sn(t,e),s=new Sn(t,e+1);let i=Gt();return this.gr.forEachInRange([n,s],(a=>{i=i.add(a.key)})),i}containsKey(e){const t=new Sn(e,0),n=this.Vr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Sn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ut.comparator(e.key,t.key)||Mt(e.Cr,t.Cr)}static pr(e,t){return Mt(e.Cr,t.Cr)||ut.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Er(Sn.mr)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Tb(i,t,n,s);this.mutationQueue.push(a);for(const c of s)this.Mr=this.Mr.add(new Sn(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return xe.resolve(a)}lookupMutationBatch(e,t){return xe.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.Nr(n),i=s<0?0:s;return xe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?ec:this.Fr-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Sn(t,0),s=new Sn(t,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,s],(a=>{const c=this.Or(a.Cr);i.push(c)})),xe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Er(Mt);return t.forEach((s=>{const i=new Sn(s,0),a=new Sn(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([i,a],(c=>{n=n.add(c.Cr)}))})),xe.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let i=n;ut.isDocumentKey(i)||(i=i.child(""));const a=new Sn(new ut(i),0);let c=new Er(Mt);return this.Mr.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===s&&(c=c.add(d.Cr)),!0)}),a),xe.resolve(this.Br(c))}Br(e){const t=[];return e.forEach((n=>{const s=this.Or(n);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Et(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Mr;return xe.forEach(t.mutations,(s=>{const i=new Sn(s.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Mr=n}))}qn(e){}containsKey(e,t){const n=new Sn(t,0),s=this.Mr.firstAfterOrEqual(n);return xe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.kr=e,this.docs=(function(){return new Ur(ut.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),i=s?s.size:0,a=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return xe.resolve(n?n.document.mutableCopy():$r.newInvalidDocument(t))}getEntries(e,t){let n=Ks();return t.forEach((s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():$r.newInvalidDocument(s))})),xe.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let i=Ks();const a=t.path,c=new ut(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:p}}=d.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||db(j3(p),n)<=0||(s.has(p.key)||Gh(t,p))&&(i=i.insert(p.key,p.mutableCopy()))}return xe.resolve(i)}getAllFromCollectionGroup(e,t,n,s){xt()}qr(e,t){return xe.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new BL(this)}getSize(e){return xe.resolve(this.size)}}class BL extends YS{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(n)})),xe.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.persistence=e,this.Qr=new lo((t=>uc(t)),Wh),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Pb,this.targetCount=0,this.Kr=fc.Un()}forEachTarget(e,t){return this.Qr.forEach(((n,s)=>t(s))),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),xe.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new fc(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,xe.resolve()}updateTargetData(e,t){return this.zn(t),xe.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,t,n){let s=0;const i=[];return this.Qr.forEach(((a,c)=>{c.sequenceNumber<=t&&n.get(c.targetId)===null&&(this.Qr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),xe.waitFor(i).next((()=>s))}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return xe.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),xe.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach((a=>{i.push(s.markPotentiallyOrphaned(e,a))})),xe.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),xe.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return xe.resolve(n)}containsKey(e,t){return xe.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new fi(0),this.zr=!1,this.zr=!0,this.jr=new ML,this.referenceDelegate=e(this),this.Hr=new UL(this),this.indexManager=new kL,this.remoteDocumentCache=(function(s){return new $L(s)})((n=>this.referenceDelegate.Jr(n))),this.serializer=new LS(t),this.Yr=new OL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new VL(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){Xe("MemoryPersistence","Starting transaction:",e);const s=new zL(this.Gr.next());return this.referenceDelegate.Zr(),n(s).next((i=>this.referenceDelegate.Xr(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}ei(e,t){return xe.or(Object.values(this.Wr).map((n=>()=>n.containsKey(e,t))))}}class zL extends D3{constructor(e){super(),this.currentSequenceNumber=e}}class Mg{constructor(e){this.persistence=e,this.ti=new Pb,this.ni=null}static ri(e){return new Mg(e)}get ii(){if(this.ni)return this.ni;throw xt()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),xe.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),xe.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),xe.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach((s=>this.ii.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((i=>this.ii.add(i.toString())))})).next((()=>n.removeTargetData(e,t)))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.ii,(n=>{const s=ut.fromPath(n);return this.si(e,s).next((i=>{i||t.removeEntry(s,Ct.min())}))})).next((()=>(this.ni=null,t.apply(e))))}updateLimboDocument(e,t){return this.si(e,t).next((n=>{n?this.ii.delete(t.toString()):this.ii.add(t.toString())}))}Jr(e){return 0}si(e,t){return xe.or([()=>xe.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Om{constructor(e,t){this.persistence=e,this.oi=new lo((n=>is(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=KS(this,t)}static ri(e,t){return new Om(e,t)}Zr(){}Xr(e){return xe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}sr(e){let t=0;return this.rr(e,(n=>{t++})).next((()=>t))}rr(e,t){return xe.forEach(this.oi,((n,s)=>this.ar(e,n,s).next((i=>i?xe.resolve():t(s)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.qr(e,(a=>this.ar(e,a,t).next((c=>{c||(n++,i.removeEntry(a,Ct.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),xe.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),xe.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),xe.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nm(e.data.value)),t}ar(e,t,n){return xe.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return xe.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this.serializer=e}B(e,t,n,s){const i=new Ng("createOrUpgrade",t);n<1&&s>=1&&((function(d){d.createObjectStore(Hh)})(e),(function(d){d.createObjectStore(oh,{keyPath:sO}),d.createObjectStore(Fi,{keyPath:D4,autoIncrement:!0}).createIndex(Xl,F4,{unique:!0}),d.createObjectStore(Zu)})(e),ET(e),(function(d){d.createObjectStore(zl)})(e));let a=xe.resolve();return n<3&&s>=3&&(n!==0&&((function(d){d.deleteObjectStore(td),d.deleteObjectStore(ed),d.deleteObjectStore(tc)})(e),ET(e)),a=a.next((()=>(function(d){const h=d.store(tc),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return h.put(Nm,p)})(i)))),n<4&&s>=4&&(n!==0&&(a=a.next((()=>(function(d,h){return h.store(Fi).G().next((m=>{d.deleteObjectStore(Fi),d.createObjectStore(Fi,{keyPath:D4,autoIncrement:!0}).createIndex(Xl,F4,{unique:!0});const x=h.store(Fi),v=m.map((_=>x.put(_)));return xe.waitFor(v)}))})(e,i)))),a=a.next((()=>{(function(d){d.createObjectStore(rd,{keyPath:fO})})(e)}))),n<5&&s>=5&&(a=a.next((()=>this._i(i)))),n<6&&s>=6&&(a=a.next((()=>((function(d){d.createObjectStore(lh)})(e),this.ai(i))))),n<7&&s>=7&&(a=a.next((()=>this.ui(i)))),n<8&&s>=8&&(a=a.next((()=>this.ci(e,i)))),n<9&&s>=9&&(a=a.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&s>=10&&(a=a.next((()=>this.li(i)))),n<11&&s>=11&&(a=a.next((()=>{(function(d){d.createObjectStore(kg,{keyPath:pO})})(e),(function(d){d.createObjectStore(Sg,{keyPath:mO})})(e)}))),n<12&&s>=12&&(a=a.next((()=>{(function(d){const h=d.createObjectStore(Cg,{keyPath:_O});h.createIndex(qv,EO,{unique:!1}),h.createIndex(B3,TO,{unique:!1})})(e)}))),n<13&&s>=13&&(a=a.next((()=>(function(d){const h=d.createObjectStore(Am,{keyPath:aO});h.createIndex(tm,oO),h.createIndex(L3,lO)})(e))).next((()=>this.hi(e,i))).next((()=>e.deleteObjectStore(zl)))),n<14&&s>=14&&(a=a.next((()=>this.Pi(e,i)))),n<15&&s>=15&&(a=a.next((()=>(function(d){d.createObjectStore(pb,{keyPath:gO,autoIncrement:!0}).createIndex(Wv,xO,{unique:!1}),d.createObjectStore(km,{keyPath:yO}).createIndex(V3,vO,{unique:!1}),d.createObjectStore(Sm,{keyPath:bO}).createIndex($3,wO,{unique:!1})})(e)))),n<16&&s>=16&&(a=a.next((()=>{t.objectStore(km).clear()})).next((()=>{t.objectStore(Sm).clear()}))),n<17&&s>=17&&(a=a.next((()=>{(function(d){d.createObjectStore(mb,{keyPath:AO})})(e)}))),a}ai(e){let t=0;return e.store(zl).Z(((n,s)=>{t+=Fm(s)})).next((()=>{const n={byteSize:t};return e.store(lh).put(Hv,n)}))}_i(e){const t=e.store(oh),n=e.store(Fi);return t.G().next((s=>xe.forEach(s,(i=>{const a=IDBKeyRange.bound([i.userId,ec],[i.userId,i.lastAcknowledgedBatchId]);return n.G(Xl,a).next((c=>xe.forEach(c,(d=>{Et(d.userId===i.userId);const h=ql(this.serializer,d);return zS(e,i.userId,h).next((()=>{}))}))))}))))}ui(e){const t=e.store(td),n=e.store(zl);return e.store(tc).get(Nm).next((s=>{const i=[];return n.Z(((a,c)=>{const d=new ur(a),h=(function(m){return[0,is(m)]})(d);i.push(t.get(h).next((p=>p?xe.resolve():(m=>t.put({targetId:0,path:is(m),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>xe.waitFor(i)))}))}ci(e,t){e.createObjectStore(ch,{keyPath:hO});const n=t.store(ch),s=new Ib,i=a=>{if(s.add(a)){const c=a.lastSegment(),d=a.popLast();return n.put({collectionId:c,parent:is(d)})}};return t.store(zl).Z({Y:!0},((a,c)=>{const d=new ur(a);return i(d.popLast())})).next((()=>t.store(Zu).Z({Y:!0},(([a,c,d],h)=>{const p=la(c);return i(p.popLast())}))))}li(e){const t=e.store(ed);return t.Z(((n,s)=>{const i=C0(s),a=MS(this.serializer,i);return t.put(a)}))}hi(e,t){const n=t.store(zl),s=[];return n.Z(((i,a)=>{const c=t.store(Am),d=(function(m){return m.document?new ut(ur.fromString(m.document.name).popFirst(5)):m.noDocument?ut.fromSegments(m.noDocument.path):m.unknownDocument?ut.fromSegments(m.unknownDocument.path):xt()})(a).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(c.put(h))})).next((()=>xe.waitFor(s)))}Pi(e,t){const n=t.store(Fi),s=XS(this.serializer),i=new jb(Mg.ri,this.serializer.Tt);return n.G().next((a=>{const c=new Map;return a.forEach((d=>{var h;let p=(h=c.get(d.userId))!==null&&h!==void 0?h:Gt();ql(this.serializer,d).keys().forEach((m=>p=p.add(m))),c.set(d.userId,p)})),xe.forEach(c,((d,h)=>{const p=new hs(h),m=Og.It(this.serializer,p),x=i.getIndexManager(p),v=Lg.It(p,this.serializer,x,i.referenceDelegate);return new QS(s,v,m,x).recalculateAndSaveOverlaysForDocumentKeys(new Gv(t,fi.ae),d).next()}))}))}}function ET(r){r.createObjectStore(td,{keyPath:uO}).createIndex(fb,dO,{unique:!0}),r.createObjectStore(ed,{keyPath:"targetId"}).createIndex(M3,cO,{unique:!0}),r.createObjectStore(tc)}const $o="IndexedDbPersistence",Jy=18e5,Zy=5e3,ev="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",WL="main";class Rb{constructor(e,t,n,s,i,a,c,d,h,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Ti=i,this.window=a,this.document=c,this.Ii=h,this.Ei=p,this.di=m,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=x=>Promise.resolve(),!Rb.D())throw new nt(je.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jL(this,s),this.gi=t+WL,this.serializer=new LS(d),this.pi=new el(this.gi,this.di,new HL(this.serializer)),this.jr=new wL,this.Hr=new CL(this.referenceDelegate,this.serializer),this.remoteDocumentCache=XS(this.serializer),this.Yr=new bL,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,p===!1&&ms($o,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new nt(je.FAILED_PRECONDITION,ev);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Hr.getHighestSequenceNumber(e)))})).then((e=>{this.Gr=new fi(e,this.Ii)})).then((()=>{this.zr=!0})).catch((e=>(this.pi&&this.pi.close(),Promise.reject(e))))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget((async()=>{this.started&&await this.wi()})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Pp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Fi(e).next((t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable((()=>this.fi(!1))))}))})).next((()=>this.Mi(e))).next((t=>this.isPrimary&&!t?this.xi(e).next((()=>!1)):!!t&&this.Oi(e).next((()=>!0)))))).catch((e=>{if(xl(e))return Xe($o,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Xe($o,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable((()=>this.fi(e))),this.isPrimary=e}))}Fi(e){return w0(e).get(bu).next((t=>xe.resolve(this.Ni(t))))}Bi(e){return Pp(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Jy)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=wn(t,rd);return n.G().next((s=>{const i=this.qi(s,Jy),a=s.filter((c=>i.indexOf(c)===-1));return xe.forEach(a,(c=>n.delete(c.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.wi().then((()=>this.Li())).then((()=>this.Di()))))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?xe.resolve(!0):w0(e).get(bu).next((t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Zy)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new nt(je.FAILED_PRECONDITION,ev);return!1}}return!(!this.networkEnabled||!this.inForeground)||Pp(e).G().next((n=>this.qi(n,Zy).find((s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,c=this.networkEnabled===s.networkEnabled;if(i||a&&c)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Xe($o,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Hh,rd],(e=>{const t=new Gv(e,fi.ae);return this.xi(t).next((()=>this.Bi(t)))})),this.pi.close(),this.Gi()}qi(e,t){return e.filter((n=>this.ki(n.updateTimeMs,t)&&!this.$i(n.clientId)))}zi(){return this.runTransaction("getActiveClients","readonly",(e=>Pp(e).G().next((t=>this.qi(t,Jy).map((n=>n.clientId))))))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Lg.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new SL(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Og.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,n){Xe($o,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",i=(function(d){return d===17?SO:d===16?kO:d===15?gb:d===14?H3:d===13?z3:d===12?NO:d===11?U3:void xt()})(this.di);let a;return this.pi.runTransaction(e,s,i,(c=>(a=new Gv(c,this.Gr?this.Gr.next():fi.ae),t==="readwrite-primary"?this.Fi(a).next((d=>!!d||this.Mi(a))).next((d=>{if(!d)throw ms(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable((()=>this.fi(!1))),new nt(je.FAILED_PRECONDITION,R3);return n(a)})).next((d=>this.Oi(a).next((()=>d)))):this.ji(a).next((()=>n(a)))))).then((c=>(a.raiseOnCommittedEvent(),c)))}ji(e){return w0(e).get(bu).next((t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Zy)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new nt(je.FAILED_PRECONDITION,ev)}))}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return w0(e).put(bu,t)}static D(){return el.D()}xi(e){const t=w0(e);return t.get(bu).next((n=>this.Ni(n)?(Xe($o,"Releasing primary lease."),t.delete(bu)):xe.resolve()))}ki(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(ms(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.wi())))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const t=/(?:Version|Mobile)\/1[456]/;Dk()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const n=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return Xe($o,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ms($o,"Failed to get zombied client id.",n),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){ms("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function w0(r){return wn(r,Hh)}function Pp(r){return wn(r,rd)}function qL(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=s}static Yi(e,t){let n=Gt(),s=Gt();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Db(e,t.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=(function(){return Dk()?8:F3(bn())>0?6:4})()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,s){const i={result:null};return this.rs(e,t).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ss(e,t,s,n).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new GL;return this._s(e,t,a).next((c=>{if(i.result=c,this.Xi)return this.us(e,t,a,c.size)}))})).next((()=>i.result))}us(e,t,n,s){return n.documentReadCount<this.es?(Iu()<=Jt.DEBUG&&Xe("QueryEngine","SDK will not create cache indexes for query:",Pu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),xe.resolve()):(Iu()<=Jt.DEBUG&&Xe("QueryEngine","Query:",Pu(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.ts*s?(Iu()<=Jt.DEBUG&&Xe("QueryEngine","The SDK decides to create cache indexes for query:",Pu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pi(t))):xe.resolve())}rs(e,t){if(K4(t))return xe.resolve(null);let n=pi(t);return this.indexManager.getIndexType(e,n).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=jm(t,null,"F"),n=pi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const a=Gt(...i);return this.ns.getDocuments(e,a).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.cs(t,c);return this.ls(t,h,a,d.readTime)?this.rs(e,jm(t,null,"F")):this.hs(e,h,t,d)}))))})))))}ss(e,t,n,s){return K4(t)||s.isEqual(Ct.min())?xe.resolve(null):this.ns.getDocuments(e,n).next((i=>{const a=this.cs(t,i);return this.ls(t,a,n,s)?xe.resolve(null):(Iu()<=Jt.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pu(t)),this.hs(e,a,t,QF(s,sh)).next((c=>c)))}))}cs(e,t){let n=new Er(uS(e));return t.forEach(((s,i)=>{Gh(e,i)&&(n=n.add(i))})),n}ls(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}_s(e,t,n){return Iu()<=Jt.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",Pu(t)),this.ns.getDocumentsMatchingQuery(e,t,Js.min(),n)}hs(e,t,n,s){return this.ns.getDocumentsMatchingQuery(e,n,s).next((i=>(t.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb="LocalStore",KL=3e8;class YL{constructor(e,t,n,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new Ur(Mt),this.Is=new lo((i=>uc(i)),Wh),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QS(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ts)))}}function ZS(r,e,t,n){return new YL(r,e,t,n)}async function e5(r,e){const t=$t(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next((i=>(s=i,t.As(e),t.mutationQueue.getAllMutationBatches(n)))).next((i=>{const a=[],c=[];let d=Gt();for(const h of s){a.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}return t.localDocuments.getDocuments(n,d).next((h=>({Rs:h,removedBatchIds:a,addedBatchIds:c})))}))}))}function XL(r,e){const t=$t(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=e.batch.keys(),i=t.ds.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,p){const m=h.batch,x=m.keys();let v=xe.resolve();return x.forEach((_=>{v=v.next((()=>p.getEntry(d,_))).next((w=>{const E=h.docVersions.get(_);Et(E!==null),w.version.compareTo(E)<0&&(m.applyToRemoteDocument(w,h),w.isValidDocument()&&(w.setReadTime(h.commitVersion),p.addEntry(w)))}))})),v.next((()=>c.mutationQueue.removeMutationBatch(d,m)))})(t,n,e,i).next((()=>i.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=Gt();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(n,s)))}))}function t5(r){const e=$t(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Hr.getLastRemoteSnapshotVersion(t)))}function QL(r,e){const t=$t(r),n=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const c=[];e.targetChanges.forEach(((p,m)=>{const x=s.get(m);if(!x)return;c.push(t.Hr.removeMatchingKeys(i,p.removedDocuments,m).next((()=>t.Hr.addMatchingKeys(i,p.addedDocuments,m))));let v=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(hn.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):p.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(p.resumeToken,n)),s=s.insert(m,v),(function(w,E,R){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=KL?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(x,v,p)&&c.push(t.Hr.updateTargetData(i,v))}));let d=Ks(),h=Gt();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(i,p))})),c.push(JL(i,a,e.documentUpdates).next((p=>{d=p.Vs,h=p.fs}))),!n.isEqual(Ct.min())){const p=t.Hr.getLastRemoteSnapshotVersion(i).next((m=>t.Hr.setTargetsMetadata(i,i.currentSequenceNumber,n)));c.push(p)}return xe.waitFor(c).next((()=>a.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,d,h))).next((()=>d))})).then((i=>(t.Ts=s,i)))}function JL(r,e,t){let n=Gt(),s=Gt();return t.forEach((i=>n=n.add(i))),e.getEntries(r,n).next((i=>{let a=Ks();return t.forEach(((c,d)=>{const h=i.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(Ct.min())?(e.removeEntry(c,d.readTime),a=a.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),a=a.insert(c,d)):Xe(Fb,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Vs:a,fs:s}}))}function ZL(r,e){const t=$t(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=ec),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function eM(r,e){const t=$t(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return t.Hr.getTargetData(n,e).next((i=>i?(s=i,xe.resolve(s)):t.Hr.allocateTargetId(n).next((a=>(s=new za(e,a,"TargetPurposeListen",n.currentSequenceNumber),t.Hr.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=t.Ts.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(n.targetId,n),t.Is.set(e,n.targetId)),n}))}async function o1(r,e,t){const n=$t(r),s=n.Ts.get(e),i=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",i,(a=>n.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!xl(a))throw a;Xe(Fb,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Ts=n.Ts.remove(e),n.Is.delete(s.target)}function TT(r,e,t){const n=$t(r);let s=Ct.min(),i=Gt();return n.persistence.runTransaction("Execute query","readwrite",(a=>(function(d,h,p){const m=$t(d),x=m.Is.get(p);return x!==void 0?xe.resolve(m.Ts.get(x)):m.Hr.getTargetData(h,p)})(n,a,pi(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,n.Hr.getMatchingKeysForTargetId(a,c.targetId).next((d=>{i=d}))})).next((()=>n.Ps.getDocumentsMatchingQuery(a,e,t?s:Ct.min(),t?i:Gt()))).next((c=>(tM(n,zO(e),c),{documents:c,gs:i})))))}function tM(r,e,t){let n=r.Es.get(e)||Ct.min();t.forEach(((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),r.Es.set(e,n)}class AT{constructor(){this.activeTargetIds=YO()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class r5{constructor(){this.ho=new AT,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new AT,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="ConnectivityMonitor";class kT{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Xe(NT,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Xe(NT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jp=null;function l1(){return jp===null?jp=(function(){return 268435456+Math.round(2147483648*Math.random())})():jp++,"0x"+jp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="RestConnection",nM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sM{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${s}`,this.wo=this.databaseId.database===Cm?`project_id=${n}`:`project_id=${n}&database_id=${s}`}So(e,t,n,s,i){const a=l1(),c=this.bo(e,t.toUriEncodedString());Xe(tv,`Sending RPC '${e}' ${a}:`,c,n);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,s,i),this.vo(e,c,d,n).then((h=>(Xe(tv,`Received RPC '${e}' ${a}: `,h),h)),(h=>{throw nh(tv,`RPC '${e}' ${a} failed with error: `,h,"url: ",c,"request:",n),h}))}Co(e,t,n,s,i,a){return this.So(e,t,n,s,i)}Do(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,i)=>e[i]=s)),n&&n.headers.forEach(((s,i)=>e[i]=s))}bo(e,t){const n=nM[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="WebChannelConnection";class aM extends sM{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,s){const i=l1();return new Promise(((a,c)=>{const d=new T3;d.setWithCredentials(!0),d.listenOnce(A3.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Jp.NO_ERROR:const p=d.getResponseJson();Xe(ts,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),a(p);break;case Jp.TIMEOUT:Xe(ts,`RPC '${e}' ${i} timed out`),c(new nt(je.DEADLINE_EXCEEDED,"Request time out"));break;case Jp.HTTP_ERROR:const m=d.getStatus();if(Xe(ts,`RPC '${e}' ${i} failed with status:`,m,"response text:",d.getResponseText()),m>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const v=x?.error;if(v&&v.status&&v.message){const _=(function(E){const R=E.toLowerCase().replace(/_/g,"-");return Object.values(je).indexOf(R)>=0?R:je.UNKNOWN})(v.status);c(new nt(_,v.message))}else c(new nt(je.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new nt(je.UNAVAILABLE,"Connection failed."));break;default:xt()}}finally{Xe(ts,`RPC '${e}' ${i} completed.`)}}));const h=JSON.stringify(s);Xe(ts,`RPC '${e}' ${i} sending request:`,s),d.send(t,"POST",h,n,15)}))}Wo(e,t,n){const s=l1(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=S3(),c=k3(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const p=i.join("");Xe(ts,`Creating RPC '${e}' stream ${s}: ${p}`,d);const m=a.createWebChannel(p,d);let x=!1,v=!1;const _=new iM({Fo:E=>{v?Xe(ts,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(x||(Xe(ts,`Opening RPC '${e}' stream ${s} transport.`),m.open(),x=!0),Xe(ts,`RPC '${e}' stream ${s} sending:`,E),m.send(E))},Mo:()=>m.close()}),w=(E,R,C)=>{E.listen(R,(V=>{try{C(V)}catch(L){setTimeout((()=>{throw L}),0)}}))};return w(m,N0.EventType.OPEN,(()=>{v||(Xe(ts,`RPC '${e}' stream ${s} transport opened.`),_.Qo())})),w(m,N0.EventType.CLOSE,(()=>{v||(v=!0,Xe(ts,`RPC '${e}' stream ${s} transport closed`),_.Uo())})),w(m,N0.EventType.ERROR,(E=>{v||(v=!0,nh(ts,`RPC '${e}' stream ${s} transport errored:`,E),_.Uo(new nt(je.UNAVAILABLE,"The operation could not be completed")))})),w(m,N0.EventType.MESSAGE,(E=>{var R;if(!v){const C=E.data[0];Et(!!C);const V=C,L=V?.error||((R=V[0])===null||R===void 0?void 0:R.error);if(L){Xe(ts,`RPC '${e}' stream ${s} received error:`,L);const K=L.status;let H=(function(P){const j=un[P];if(j!==void 0)return ES(j)})(K),S=L.message;H===void 0&&(H=je.INTERNAL,S="Unknown error status: "+K+" with message "+L.message),v=!0,_.Uo(new nt(H,S)),m.close()}else Xe(ts,`RPC '${e}' stream ${s} received:`,C),_.Ko(C)}})),w(c,N3.STAT_EVENT,(E=>{E.stat===Bv.PROXY?Xe(ts,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===Bv.NOPROXY&&Xe(ts,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{_.$o()}),0),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(){return typeof window<"u"?window:null}function om(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(r){return new lL(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,t,n=1e3,s=1.5,i=6e4){this.Ti=e,this.timerId=t,this.Go=n,this.zo=s,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-n);s>0&&Xe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,(()=>(this.Yo=Date.now(),e()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="PersistentStream";class n5{constructor(e,t,n,s,i,a,c,d){this.Ti=e,this.n_=n,this.r_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Ob(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===je.RESOURCE_EXHAUSTED?(ms(t.toString()),ms("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===je.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.i_===t&&this.V_(n,s)}),(n=>{e((()=>{const s=new nt(je.UNKNOWN,"Fetching auth token failed: "+n.message);return this.m_(s)}))}))}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((s=>{n((()=>this.m_(s)))})),this.stream.onMessage((s=>{n((()=>++this.__==1?this.g_(s):this.onNext(s)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(e){return Xe(ST,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget((()=>this.i_===e?t():(Xe(ST,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class lM extends n5{constructor(e,t,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,a),this.serializer=i}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=hL(this.serializer,e),n=(function(i){if(!("targetChange"in i))return Ct.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ct.min():a.readTime?jn(a.readTime):Ct.min()})(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=r1(this.serializer),t.addTarget=(function(i,a){let c;const d=a.target;if(c=Im(d)?{documents:PS(i,d)}:{query:jS(i,d).ht},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=NS(i,a.resumeToken);const h=e1(i,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(Ct.min())>0){c.readTime=dd(i,a.snapshotVersion.toTimestamp());const h=e1(i,a.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const n=pL(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=r1(this.serializer),t.removeTarget=e,this.I_(t)}}class cM extends n5{constructor(e,t,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,a),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Et(!!e.streamToken),this.lastStreamToken=e.streamToken,Et(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=fL(e.writeResults,e.commitTime),n=jn(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=r1(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>gh(this.serializer,n)))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{}class dM extends uM{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new nt(je.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.So(e,t1(t,n),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new nt(je.UNKNOWN,i.toString())}))}Co(e,t,n,s,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Co(e,t1(t,n),s,a,c,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new nt(je.UNKNOWN,a.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class hM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ms(t),this.N_=!1):Xe("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc="RemoteStore";class fM{constructor(e,t,n,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To((a=>{n.enqueueAndForget((async()=>{Sc(this)&&(Xe(pc,"Restarting streams for network reachability change."),await(async function(d){const h=$t(d);h.W_.add(4),await Xh(h),h.j_.set("Unknown"),h.W_.delete(4),await $g(h)})(this))}))})),this.j_=new hM(n,s)}}async function $g(r){if(Sc(r))for(const e of r.G_)await e(!0)}async function Xh(r){for(const e of r.G_)await e(!1)}function s5(r,e){const t=$t(r);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),$b(t)?Vb(t):Id(t).c_()&&Mb(t,e))}function Lb(r,e){const t=$t(r),n=Id(t);t.K_.delete(e),n.c_()&&i5(t,e),t.K_.size===0&&(n.c_()?n.P_():Sc(t)&&t.j_.set("Unknown"))}function Mb(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ct.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Id(r).y_(e)}function i5(r,e){r.H_.Ne(e),Id(r).w_(e)}function Vb(r){r.H_=new sL({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.K_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),Id(r).start(),r.j_.B_()}function $b(r){return Sc(r)&&!Id(r).u_()&&r.K_.size>0}function Sc(r){return $t(r).W_.size===0}function a5(r){r.H_=void 0}async function pM(r){r.j_.set("Online")}async function mM(r){r.K_.forEach(((e,t)=>{Mb(r,e)}))}async function gM(r,e){a5(r),$b(r)?(r.j_.q_(e),Vb(r)):r.j_.set("Unknown")}async function xM(r,e,t){if(r.j_.set("Online"),e instanceof AS&&e.state===2&&e.cause)try{await(async function(s,i){const a=i.cause;for(const c of i.targetIds)s.K_.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.K_.delete(c),s.H_.removeTarget(c))})(r,e)}catch(n){Xe(pc,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Lm(r,n)}else if(e instanceof am?r.H_.We(e):e instanceof TS?r.H_.Ze(e):r.H_.je(e),!t.isEqual(Ct.min()))try{const n=await t5(r.localStore);t.compareTo(n)>=0&&await(function(i,a){const c=i.H_.ot(a);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const p=i.K_.get(h);p&&i.K_.set(h,p.withResumeToken(d.resumeToken,a))}})),c.targetMismatches.forEach(((d,h)=>{const p=i.K_.get(d);if(!p)return;i.K_.set(d,p.withResumeToken(hn.EMPTY_BYTE_STRING,p.snapshotVersion)),i5(i,d);const m=new za(p.target,d,h,p.sequenceNumber);Mb(i,m)})),i.remoteSyncer.applyRemoteEvent(c)})(r,t)}catch(n){Xe(pc,"Failed to raise snapshot:",n),await Lm(r,n)}}async function Lm(r,e,t){if(!xl(e))throw e;r.W_.add(1),await Xh(r),r.j_.set("Offline"),t||(t=()=>t5(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Xe(pc,"Retrying IndexedDB access"),await t(),r.W_.delete(1),await $g(r)}))}function o5(r,e){return e().catch((t=>Lm(r,t,e)))}async function Qh(r){const e=$t(r),t=al(e);let n=e.U_.length>0?e.U_[e.U_.length-1].batchId:ec;for(;yM(e);)try{const s=await ZL(e.localStore,n);if(s===null){e.U_.length===0&&t.P_();break}n=s.batchId,vM(e,s)}catch(s){await Lm(e,s)}l5(e)&&c5(e)}function yM(r){return Sc(r)&&r.U_.length<10}function vM(r,e){r.U_.push(e);const t=al(r);t.c_()&&t.S_&&t.b_(e.mutations)}function l5(r){return Sc(r)&&!al(r).u_()&&r.U_.length>0}function c5(r){al(r).start()}async function bM(r){al(r).C_()}async function wM(r){const e=al(r);for(const t of r.U_)e.b_(t.mutations)}async function _M(r,e,t){const n=r.U_.shift(),s=Ab.from(n,e,t);await o5(r,(()=>r.remoteSyncer.applySuccessfulWrite(s))),await Qh(r)}async function EM(r,e){e&&al(r).S_&&await(async function(n,s){if((function(a){return _S(a)&&a!==je.ABORTED})(s.code)){const i=n.U_.shift();al(n).h_(),await o5(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Qh(n)}})(r,e),l5(r)&&c5(r)}async function CT(r,e){const t=$t(r);t.asyncQueue.verifyOperationInProgress(),Xe(pc,"RemoteStore received new credentials");const n=Sc(t);t.W_.add(3),await Xh(t),n&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await $g(t)}async function TM(r,e){const t=$t(r);e?(t.W_.delete(2),await $g(t)):e||(t.W_.add(2),await Xh(t),t.j_.set("Unknown"))}function Id(r){return r.J_||(r.J_=(function(t,n,s){const i=$t(t);return i.M_(),new lM(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(r.datastore,r.asyncQueue,{xo:pM.bind(null,r),No:mM.bind(null,r),Lo:gM.bind(null,r),p_:xM.bind(null,r)}),r.G_.push((async e=>{e?(r.J_.h_(),$b(r)?Vb(r):r.j_.set("Unknown")):(await r.J_.stop(),a5(r))}))),r.J_}function al(r){return r.Y_||(r.Y_=(function(t,n,s){const i=$t(t);return i.M_(),new cM(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:bM.bind(null,r),Lo:EM.bind(null,r),D_:wM.bind(null,r),v_:_M.bind(null,r)}),r.G_.push((async e=>{e?(r.Y_.h_(),await Qh(r)):(await r.Y_.stop(),r.U_.length>0&&(Xe(pc,`Stopping write stream with ${r.U_.length} pending writes`),r.U_=[]))}))),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,t,n,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,i){const a=Date.now()+n,c=new Bb(e,t,a,s,i);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt(je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ub(r,e){if(ms("AsyncQueue",`${e}: ${r}`),xl(r))return new nt(je.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{static emptySet(e){return new Gu(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ut.comparator(t.key,n.key):(t,n)=>ut.comparator(t.key,n.key),this.keyedMap=k0(),this.sortedSet=new Ur(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Gu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.Z_=new Ur(ut.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?e.type!==0&&n.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&n.type!==1?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Z_=this.Z_.remove(t):e.type===1&&n.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):xt():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class hd{constructor(e,t,n,s,i,a,c,d,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,n,s,i){const a=[];return t.forEach((c=>{a.push({type:0,doc:c})})),new hd(e,t,Gu.emptySet(t),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((e=>e.ra()))}}class NM{constructor(){this.queries=PT(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,n){const s=$t(t),i=s.queries;s.queries=PT(),i.forEach(((a,c)=>{for(const d of c.ta)d.onError(n)}))})(this,new nt(je.ABORTED,"Firestore shutting down"))}}function PT(){return new lo((r=>cS(r)),jg)}async function zb(r,e){const t=$t(r);let n=3;const s=e.query;let i=t.queries.get(s);i?!i.na()&&e.ra()&&(n=2):(i=new AM,n=e.ra()?0:1);try{switch(n){case 0:i.ea=await t.onListen(s,!0);break;case 1:i.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(a){const c=Ub(a,`Initialization of query '${Pu(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,i),i.ta.push(e),e.sa(t.onlineState),i.ea&&e.oa(i.ea)&&Wb(t)}async function Hb(r,e){const t=$t(r),n=e.query;let s=3;const i=t.queries.get(n);if(i){const a=i.ta.indexOf(e);a>=0&&(i.ta.splice(a,1),i.ta.length===0?s=e.ra()?0:1:!i.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function kM(r,e){const t=$t(r);let n=!1;for(const s of e){const i=s.query,a=t.queries.get(i);if(a){for(const c of a.ta)c.oa(s)&&(n=!0);a.ea=s}}n&&Wb(t)}function SM(r,e,t){const n=$t(r),s=n.queries.get(e);if(s)for(const i of s.ta)i.onError(t);n.queries.delete(e)}function Wb(r){r.ia.forEach((e=>{e.next()}))}var c1,jT;(jT=c1||(c1={}))._a="default",jT.Cache="cache";class qb{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new hd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const n=t!=="Offline";return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=hd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==c1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e){this.key=e}}class d5{constructor(e){this.key=e}}class CM{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Gt(),this.mutatedKeys=Gt(),this.ya=uS(e),this.wa=new Gu(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new IT,s=t?t.wa:this.wa;let i=t?t.mutatedKeys:this.mutatedKeys,a=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((p,m)=>{const x=s.get(p),v=Gh(this.query,m)?m:null,_=!!x&&this.mutatedKeys.has(x.key),w=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let E=!1;x&&v?x.data.isEqual(v.data)?_!==w&&(n.track({type:3,doc:v}),E=!0):this.va(x,v)||(n.track({type:2,doc:v}),E=!0,(d&&this.ya(v,d)>0||h&&this.ya(v,h)<0)&&(c=!0)):!x&&v?(n.track({type:0,doc:v}),E=!0):x&&!v&&(n.track({type:1,doc:x}),E=!0,(d||h)&&(c=!0)),E&&(v?(a=a.add(v),i=w?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),n.track({type:1,doc:p})}return{wa:a,Da:n,ls:c,mutatedKeys:i}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const a=e.Da.X_();a.sort(((p,m)=>(function(v,_){const w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt()}};return w(v)-w(_)})(p.type,m.type)||this.ya(p.doc,m.doc))),this.Ca(n),s=s!=null&&s;const c=t&&!s?this.Fa():[],d=this.pa.size===0&&this.current&&!s?1:0,h=d!==this.ga;return this.ga=d,a.length!==0||h?{snapshot:new hd(this.query,e.wa,i,a,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new IT,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach((t=>this.fa=this.fa.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.fa=this.fa.delete(t))),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Gt(),this.wa.forEach((n=>{this.xa(n.key)&&(this.pa=this.pa.add(n.key))}));const t=[];return e.forEach((n=>{this.pa.has(n)||t.push(new d5(n))})),this.pa.forEach((n=>{e.has(n)||t.push(new u5(n))})),t}Oa(e){this.fa=e.gs,this.pa=Gt();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return hd.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Gb="SyncEngine";class IM{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class PM{constructor(e){this.key=e,this.Ba=!1}}class jM{constructor(e,t,n,s,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new lo((c=>cS(c)),jg),this.qa=new Map,this.Qa=new Set,this.$a=new Ur(ut.comparator),this.Ua=new Map,this.Ka=new Pb,this.Wa={},this.Ga=new Map,this.za=fc.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function RM(r,e,t=!0){const n=x5(r);let s;const i=n.ka.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Na()):s=await h5(n,e,t,!0),s}async function DM(r,e){const t=x5(r);await h5(t,e,!0,!1)}async function h5(r,e,t,n){const s=await eM(r.localStore,pi(e)),i=s.targetId,a=r.sharedClientState.addLocalQueryTarget(i,t);let c;return n&&(c=await FM(r,e,i,a==="current",s.resumeToken)),r.isPrimaryClient&&t&&s5(r.remoteStore,s),c}async function FM(r,e,t,n,s){r.Ha=(m,x,v)=>(async function(w,E,R,C){let V=E.view.ba(R);V.ls&&(V=await TT(w.localStore,E.query,!1).then((({documents:S})=>E.view.ba(S,V))));const L=C&&C.targetChanges.get(E.targetId),K=C&&C.targetMismatches.get(E.targetId)!=null,H=E.view.applyChanges(V,w.isPrimaryClient,L,K);return DT(w,E.targetId,H.Ma),H.snapshot})(r,m,x,v);const i=await TT(r.localStore,e,!0),a=new CM(e,i.gs),c=a.ba(i.documents),d=Yh.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),h=a.applyChanges(c,r.isPrimaryClient,d);DT(r,t,h.Ma);const p=new IM(e,t,a);return r.ka.set(e,p),r.qa.has(t)?r.qa.get(t).push(e):r.qa.set(t,[e]),h.snapshot}async function OM(r,e,t){const n=$t(r),s=n.ka.get(e),i=n.qa.get(s.targetId);if(i.length>1)return n.qa.set(s.targetId,i.filter((a=>!jg(a,e)))),void n.ka.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await o1(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),t&&Lb(n.remoteStore,s.targetId),u1(n,s.targetId)})).catch(kc)):(u1(n,s.targetId),await o1(n.localStore,s.targetId,!0))}async function LM(r,e){const t=$t(r),n=t.ka.get(e),s=t.qa.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Lb(t.remoteStore,n.targetId))}async function MM(r,e,t){const n=y5(r);try{const s=await(function(a,c){const d=$t(a),h=dr.now(),p=c.reduce(((v,_)=>v.add(_.key)),Gt());let m,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let _=Ks(),w=Gt();return d.ds.getEntries(v,p).next((E=>{_=E,_.forEach(((R,C)=>{C.isValidDocument()||(w=w.add(R))}))})).next((()=>d.localDocuments.getOverlayedDocuments(v,_))).next((E=>{m=E;const R=[];for(const C of c){const V=tL(C,m.get(C.key).overlayedDocument);V!=null&&R.push(new co(C.key,V,eS(V.value.mapValue),nn.exists(!0)))}return d.mutationQueue.addMutationBatch(v,h,R,c)})).next((E=>{x=E;const R=E.applyToLocalDocumentSet(m,w);return d.documentOverlayCache.saveOverlays(v,E.batchId,R)}))})).then((()=>({batchId:x.batchId,changes:hS(m)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),(function(a,c,d){let h=a.Wa[a.currentUser.toKey()];h||(h=new Ur(Mt)),h=h.insert(c,d),a.Wa[a.currentUser.toKey()]=h})(n,s.batchId,t),await Jh(n,s.changes),await Qh(n.remoteStore)}catch(s){const i=Ub(s,"Failed to persist write");t.reject(i)}}async function f5(r,e){const t=$t(r);try{const n=await QL(t.localStore,e);e.targetChanges.forEach(((s,i)=>{const a=t.Ua.get(i);a&&(Et(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.Ba=!0:s.modifiedDocuments.size>0?Et(a.Ba):s.removedDocuments.size>0&&(Et(a.Ba),a.Ba=!1))})),await Jh(t,n,e)}catch(n){await kc(n)}}function RT(r,e,t){const n=$t(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.ka.forEach(((i,a)=>{const c=a.view.sa(e);c.snapshot&&s.push(c.snapshot)})),(function(a,c){const d=$t(a);d.onlineState=c;let h=!1;d.queries.forEach(((p,m)=>{for(const x of m.ta)x.sa(c)&&(h=!0)})),h&&Wb(d)})(n.eventManager,e),s.length&&n.La.p_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function VM(r,e,t){const n=$t(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Ua.get(e),i=s&&s.key;if(i){let a=new Ur(ut.comparator);a=a.insert(i,$r.newNoDocument(i,Ct.min()));const c=Gt().add(i),d=new Fg(Ct.min(),new Map,new Ur(Mt),a,c);await f5(n,d),n.$a=n.$a.remove(i),n.Ua.delete(e),Kb(n)}else await o1(n.localStore,e,!1).then((()=>u1(n,e,t))).catch(kc)}async function $M(r,e){const t=$t(r),n=e.batch.batchId;try{const s=await XL(t.localStore,e);m5(t,n,null),p5(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Jh(t,s)}catch(s){await kc(s)}}async function BM(r,e,t){const n=$t(r);try{const s=await(function(a,c){const d=$t(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return d.mutationQueue.lookupMutationBatch(h,c).next((m=>(Et(m!==null),p=m.keys(),d.mutationQueue.removeMutationBatch(h,m)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>d.localDocuments.getDocuments(h,p)))}))})(n.localStore,e);m5(n,e,t),p5(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Jh(n,s)}catch(s){await kc(s)}}function p5(r,e){(r.Ga.get(e)||[]).forEach((t=>{t.resolve()})),r.Ga.delete(e)}function m5(r,e,t){const n=$t(r);let s=n.Wa[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),n.Wa[n.currentUser.toKey()]=s}}function u1(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.qa.get(e))r.ka.delete(n),t&&r.La.Ja(n,t);r.qa.delete(e),r.isPrimaryClient&&r.Ka.br(e).forEach((n=>{r.Ka.containsKey(n)||g5(r,n)}))}function g5(r,e){r.Qa.delete(e.path.canonicalString());const t=r.$a.get(e);t!==null&&(Lb(r.remoteStore,t),r.$a=r.$a.remove(e),r.Ua.delete(t),Kb(r))}function DT(r,e,t){for(const n of t)n instanceof u5?(r.Ka.addReference(n.key,e),UM(r,n)):n instanceof d5?(Xe(Gb,"Document no longer in limbo: "+n.key),r.Ka.removeReference(n.key,e),r.Ka.containsKey(n.key)||g5(r,n.key)):xt()}function UM(r,e){const t=e.key,n=t.path.canonicalString();r.$a.get(t)||r.Qa.has(n)||(Xe(Gb,"New document in limbo: "+t),r.Qa.add(n),Kb(r))}function Kb(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const t=new ut(ur.fromString(e)),n=r.za.next();r.Ua.set(n,new PM(t)),r.$a=r.$a.insert(t,n),s5(r.remoteStore,new za(pi(qh(t.path)),n,"TargetPurposeLimboResolution",fi.ae))}}async function Jh(r,e,t){const n=$t(r),s=[],i=[],a=[];n.ka.isEmpty()||(n.ka.forEach(((c,d)=>{a.push(n.Ha(d,e,t).then((h=>{var p;if((h||t)&&n.isPrimaryClient){const m=h?!h.fromCache:(p=t?.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;n.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){s.push(h);const m=Db.Yi(d.targetId,h);i.push(m)}})))})),await Promise.all(a),n.La.p_(s),await(async function(d,h){const p=$t(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>xe.forEach(h,(x=>xe.forEach(x.Hi,(v=>p.persistence.referenceDelegate.addReference(m,x.targetId,v))).next((()=>xe.forEach(x.Ji,(v=>p.persistence.referenceDelegate.removeReference(m,x.targetId,v)))))))))}catch(m){if(!xl(m))throw m;Xe(Fb,"Failed to update sequence numbers: "+m)}for(const m of h){const x=m.targetId;if(!m.fromCache){const v=p.Ts.get(x),_=v.snapshotVersion,w=v.withLastLimboFreeSnapshotVersion(_);p.Ts=p.Ts.insert(x,w)}}})(n.localStore,i))}async function zM(r,e){const t=$t(r);if(!t.currentUser.isEqual(e)){Xe(Gb,"User change. New user:",e.toKey());const n=await e5(t.localStore,e);t.currentUser=e,(function(i,a){i.Ga.forEach((c=>{c.forEach((d=>{d.reject(new nt(je.CANCELLED,a))}))})),i.Ga.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Jh(t,n.Rs)}}function HM(r,e){const t=$t(r),n=t.Ua.get(e);if(n&&n.Ba)return Gt().add(n.key);{let s=Gt();const i=t.qa.get(e);if(!i)return s;for(const a of i){const c=t.ka.get(a);s=s.unionWith(c.view.Sa)}return s}}function x5(r){const e=$t(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=f5.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VM.bind(null,e),e.La.p_=kM.bind(null,e.eventManager),e.La.Ja=SM.bind(null,e.eventManager),e}function y5(r){const e=$t(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$M.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BM.bind(null,e),e}class xh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vg(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return ZS(this.persistence,new JS,e.initialUser,this.serializer)}Xa(e){return new jb(Mg.ri,this.serializer)}Za(e){return new r5}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xh.provider={build:()=>new xh};class WM extends xh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Et(this.persistence.referenceDelegate instanceof Om);const n=this.persistence.referenceDelegate.garbageCollector;return new GS(n,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?ns.withCacheSize(this.cacheSizeBytes):ns.DEFAULT;return new jb((n=>Om.ri(n,t)),this.serializer)}}class qM extends xh{constructor(e,t,n){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await y5(this.ru.syncEngine),await Qh(this.ru.remoteStore),await this.persistence.Ci((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}eu(e){return ZS(this.persistence,new JS,e.initialUser,this.serializer)}tu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new GS(n,e.asyncQueue,t)}nu(e,t){const n=new tO(t,this.persistence);return new eO(e.asyncQueue,n)}Xa(e){const t=qL(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ns.withCacheSize(this.cacheSizeBytes):ns.DEFAULT;return new Rb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,oM(),om(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new r5}}class Mm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>RT(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=zM.bind(null,this.syncEngine),await TM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new NM})()}createDatastore(e){const t=Vg(e.databaseInfo.databaseId),n=(function(i){return new aM(i)})(e.databaseInfo);return(function(i,a,c,d){return new dM(i,a,c,d)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,s,i,a,c){return new fM(n,s,i,a,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>RT(this.syncEngine,t,0)),(function(){return kT.D()?new kT:new rM})())}createSyncEngine(e,t){return(function(s,i,a,c,d,h,p){const m=new jM(s,i,a,c,d,h);return p&&(m.ja=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const i=$t(s);Xe(pc,"RemoteStore shutting down."),i.W_.add(5),await Xh(i),i.z_.shutdown(),i.j_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Mm.provider={build:()=>new Mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ms("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new nt(je.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(s,i){const a=$t(s),c={documents:i.map((m=>mh(a.serializer,m)))},d=await a.Co("BatchGetDocuments",a.serializer.databaseId,ur.emptyPath(),c,i.length),h=new Map;d.forEach((m=>{const x=dL(a.serializer,m);h.set(x.key.toString(),x)}));const p=[];return i.forEach((m=>{const x=h.get(m.toString());Et(!!x),p.push(x)})),p})(this.datastore,e);return t.forEach((n=>this.recordVersion(n))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,n)=>{const s=ut.fromPath(n);this.mutations.push(new Eb(s,this.precondition(s)))})),await(async function(n,s){const i=$t(n),a={writes:s.map((c=>gh(i.serializer,c)))};await i.So("Commit",i.serializer.databaseId,ur.emptyPath(),a)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xt();t=Ct.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new nt(je.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ct.min())?nn.exists(!1):nn.updateTime(t):nn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new nt(je.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nn.updateTime(t)}return nn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,t,n,s,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=s,this.deferred=i,this.Tu=n.maxAttempts,this.a_=new Ob(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo((async()=>{const e=new GM(this.datastore),t=this.du(e);t&&t.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((s=>{this.Au(s)}))))})).catch((n=>{this.Au(n)}))}))}du(e){try{const t=this.updateFunction(e);return!zh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Eu(),Promise.resolve())))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!_S(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol="FirestoreClient";class YM{constructor(e,t,n,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=hs.UNAUTHENTICATED,this.clientId=I3.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async a=>{Xe(ol,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(n,(a=>(Xe(ol,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ub(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function rv(r,e){r.asyncQueue.verifyOperationInProgress(),Xe(ol,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async s=>{n.isEqual(s)||(await e5(e.localStore,s),n=s)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function FT(r,e){r.asyncQueue.verifyOperationInProgress();const t=await XM(r);Xe(ol,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>CT(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,s)=>CT(e.remoteStore,s))),r._onlineComponents=e}async function XM(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Xe(ol,"Using user provided OfflineComponentProvider");try{await rv(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===je.FAILED_PRECONDITION||s.code===je.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;nh("Error using user provided cache. Falling back to memory cache: "+t),await rv(r,new xh)}}else Xe(ol,"Using default OfflineComponentProvider"),await rv(r,new WM(void 0));return r._offlineComponents}async function Xb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Xe(ol,"Using user provided OnlineComponentProvider"),await FT(r,r._uninitializedComponentsProvider._online)):(Xe(ol,"Using default OnlineComponentProvider"),await FT(r,new Mm))),r._onlineComponents}function QM(r){return Xb(r).then((e=>e.syncEngine))}function JM(r){return Xb(r).then((e=>e.datastore))}async function Vm(r){const e=await Xb(r),t=e.eventManager;return t.onListen=RM.bind(null,e.syncEngine),t.onUnlisten=OM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=DM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LM.bind(null,e.syncEngine),t}function ZM(r,e,t={}){const n=new Bi;return r.asyncQueue.enqueueAndForget((async()=>(function(i,a,c,d,h){const p=new Yb({next:x=>{p.su(),a.enqueueAndForget((()=>Hb(i,m)));const v=x.docs.has(c);!v&&x.fromCache?h.reject(new nt(je.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&x.fromCache&&d&&d.source==="server"?h.reject(new nt(je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),m=new qb(qh(c.path),p,{includeMetadataChanges:!0,Ta:!0});return zb(i,m)})(await Vm(r),r.asyncQueue,e,t,n))),n.promise}function eV(r,e,t={}){const n=new Bi;return r.asyncQueue.enqueueAndForget((async()=>(function(i,a,c,d,h){const p=new Yb({next:x=>{p.su(),a.enqueueAndForget((()=>Hb(i,m))),x.fromCache&&d.source==="server"?h.reject(new nt(je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),m=new qb(c,p,{includeMetadataChanges:!0,Ta:!0});return zb(i,m)})(await Vm(r),r.asyncQueue,e,t,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(r,e,t){if(!t)throw new nt(je.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function tV(r,e,t,n){if(e===!0&&n===!0)throw new nt(je.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function LT(r){if(!ut.isDocumentKey(r))throw new nt(je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function MT(r){if(ut.isDocumentKey(r))throw new nt(je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Bg(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":xt()}function Is(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new nt(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Bg(r);throw new nt(je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function rV(r,e){if(e<=0)throw new nt(je.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV="firestore.googleapis.com",VT=!0;class $T{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new nt(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nV,this.ssl=VT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:VT;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=US;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qS)throw new nt(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v5((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new nt(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new nt(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new nt(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qb{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $T({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nt(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new nt(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $T(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new zF;switch(n.type){case"firstParty":return new qF(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new nt(je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=OT.get(t);n&&(Xe("ComponentProvider","Removing Datastore"),OT.delete(t),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new uo(this.firestore,e,this._query)}}class Wn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class tl extends uo{constructor(e,t,n){super(e,t,qh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new ut(e))}withConverter(e){return new tl(this.firestore,e,this._path)}}function At(r,e,...t){if(r=Cr(r),b5("collection","path",e),r instanceof Qb){const n=ur.fromString(e,...t);return MT(n),new tl(r,null,n)}{if(!(r instanceof Wn||r instanceof tl))throw new nt(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ur.fromString(e,...t));return MT(n),new tl(r.firestore,null,n)}}function ot(r,e,...t){if(r=Cr(r),arguments.length===1&&(e=I3.newId()),b5("doc","path",e),r instanceof Qb){const n=ur.fromString(e,...t);return LT(n),new Wn(r,null,new ut(n))}{if(!(r instanceof Wn||r instanceof tl))throw new nt(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ur.fromString(e,...t));return LT(n),new Wn(r.firestore,r instanceof tl?r.converter:null,new ut(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="AsyncQueue";class UT{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Ob(this,"async_queue_retry"),this.Su=()=>{const n=om();n&&Xe(BT,"Visibility state changed to "+n.visibilityState),this.a_.t_()},this.bu=e;const t=om();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=om();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise((()=>{}));const t=new Bi;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Vu.push(e),this.Cu())))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!xl(e))throw e;Xe(BT,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(e){const t=this.bu.then((()=>(this.pu=!0,e().catch((n=>{this.gu=n,this.pu=!1;const s=(function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c})(n);throw ms("INTERNAL UNHANDLED ERROR: ",s),n})).then((n=>(this.pu=!1,n))))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=Bb.createAndSchedule(this,e,t,n,(i=>this.Fu(i)));return this.fu.push(s),s}Du(){this.gu&&xt()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then((()=>{this.fu.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()}))}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function zT(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1})(r,["next","error","complete"])}class va extends Qb{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new UT,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new UT(e),this._firestoreClient=void 0,await e}}}function sV(r,e,t){t||(t=Cm);const n=ml(r,"firestore");if(n.isInitialized(t)){const s=n.getImmediate({identifier:t}),i=n.getOptions(t);if(nl(i,e))return s;throw new nt(je.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new nt(je.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qS)throw new nt(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:t})}function Zh(r){if(r._terminated)throw new nt(je.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||iV(r),r._firestoreClient}function iV(r){var e,t,n;const s=r._freezeSettings(),i=(function(c,d,h,p){return new IO(c,d,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,v5(p.experimentalLongPollingOptions),p.useFetchStreams)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,s);r._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),r._firestoreClient=new YM(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&(function(c){const d=c?._online.build();return{_offline:c?._offline.build(d),_online:d}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mc(hn.fromBase64String(e))}catch(t){throw new nt(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mc(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new nt(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new nt(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new nt(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=/^__.*__$/;class oV{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cd(e,this.data,t,this.fieldTransforms)}}class w5{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new co(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _5(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt()}}class e2{constructor(e,t,n,s,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new e2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:n,Qu:!1});return s.$u(e),s}Uu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:n,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return $m(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(_5(this.Lu)&&aV.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class lV{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Vg(e)}ju(e,t,n,s=!1){return new e2({Lu:e,methodName:t,zu:n,path:Gr.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rf(r){const e=r._freezeSettings(),t=Vg(r._databaseId);return new lV(r._databaseId,!!e.ignoreUndefinedProperties,t)}function t2(r,e,t,n,s,i={}){const a=r.ju(i.merge||i.mergeFields?2:0,e,t,s);s2("Data must be an object, but it was:",a,n);const c=A5(n,a);let d,h;if(i.merge)d=new ks(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const x=d1(e,m,t);if(!a.contains(x))throw new nt(je.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);k5(p,x)||p.push(x)}d=new ks(p),h=a.fieldTransforms.filter((m=>d.covers(m.field)))}else d=null,h=a.fieldTransforms;return new oV(new Un(c),d,h)}class Ug extends tf{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ug}}class r2 extends tf{_toFieldTransform(e){return new _b(e.path,new od)}isEqual(e){return e instanceof r2}}class n2 extends tf{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new ud(e.serializer,mS(e.serializer,this.Ju));return new _b(e.path,t)}isEqual(e){return e instanceof n2&&this.Ju===e.Ju}}function E5(r,e,t,n){const s=r.ju(1,e,t);s2("Data must be an object, but it was:",s,n);const i=[],a=Un.empty();yl(n,((d,h)=>{const p=i2(e,d,t);h=Cr(h);const m=s.Uu(p);if(h instanceof Ug)i.push(p);else{const x=nf(h,m);x!=null&&(i.push(p),a.set(p,x))}}));const c=new ks(i);return new w5(a,c,s.fieldTransforms)}function T5(r,e,t,n,s,i){const a=r.ju(1,e,t),c=[d1(e,n,t)],d=[s];if(i.length%2!=0)throw new nt(je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<i.length;x+=2)c.push(d1(e,i[x])),d.push(i[x+1]);const h=[],p=Un.empty();for(let x=c.length-1;x>=0;--x)if(!k5(h,c[x])){const v=c[x];let _=d[x];_=Cr(_);const w=a.Uu(v);if(_ instanceof Ug)h.push(v);else{const E=nf(_,w);E!=null&&(h.push(v),p.set(v,E))}}const m=new ks(h);return new w5(p,m,a.fieldTransforms)}function cV(r,e,t,n=!1){return nf(t,r.ju(n?4:3,e))}function nf(r,e){if(N5(r=Cr(r)))return s2("Unsupported field value:",e,r),A5(r,e);if(r instanceof tf)return(function(n,s){if(!_5(s.Lu))throw s.Wu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return(function(n,s){const i=[];let a=0;for(const c of n){let d=nf(c,s.Ku(a));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}})(r,e)}return(function(n,s){if((n=Cr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return mS(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=dr.fromDate(n);return{timestampValue:dd(s.serializer,i)}}if(n instanceof dr){const i=new dr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:dd(s.serializer,i)}}if(n instanceof Jb)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof mc)return{bytesValue:NS(s.serializer,n._byteString)};if(n instanceof Wn){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Sb(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Zb)return(function(a,c){return{mapValue:{fields:{[yb]:{stringValue:vb},[nd]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw c.Wu("VectorValues must only contain numeric values.");return wb(c.serializer,h)}))}}}}}})(n,s);throw s.Wu(`Unsupported field value: ${Bg(n)}`)})(r,e)}function A5(r,e){const t={};return W3(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yl(r,((n,s)=>{const i=nf(s,e.qu(n));i!=null&&(t[n]=i)})),{mapValue:{fields:t}}}function N5(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof dr||r instanceof Jb||r instanceof mc||r instanceof Wn||r instanceof tf||r instanceof Zb)}function s2(r,e,t){if(!N5(t)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(t)){const n=Bg(t);throw n==="an object"?e.Wu(r+" a custom object"):e.Wu(r+" "+n)}}function d1(r,e,t){if((e=Cr(e))instanceof ef)return e._internalPath;if(typeof e=="string")return i2(r,e);throw $m("Field path arguments must be of type string or ",r,!1,void 0,t)}const uV=new RegExp("[~\\*/\\[\\]]");function i2(r,e,t){if(e.search(uV)>=0)throw $m(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ef(...e.split("."))._internalPath}catch{throw $m(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function $m(r,e,t,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(i||a)&&(d+=" (found",i&&(d+=` in field ${n}`),a&&(d+=` in document ${s}`),d+=")"),new nt(je.INVALID_ARGUMENT,c+r+d)}function k5(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,t,n,s,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dV extends Bm{data(){return super.data()}}function zg(r,e){return typeof e=="string"?i2(r,e):e instanceof ef?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new nt(je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class a2{}class o2 extends a2{}function nr(r,e,...t){let n=[];e instanceof a2&&n.push(e),n=n.concat(t),(function(i){const a=i.filter((d=>d instanceof l2)).length,c=i.filter((d=>d instanceof Hg)).length;if(a>1||a>0&&c>0)throw new nt(je.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)r=s._apply(r);return r}class Hg extends o2{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Hg(e,t,n)}_apply(e){const t=this._parse(e);return I5(e._query,t),new uo(e.firestore,e.converter,Zv(e._query,t))}_parse(e){const t=rf(e.firestore);return(function(i,a,c,d,h,p,m){let x;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new nt(je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){WT(m,p);const _=[];for(const w of m)_.push(HT(d,i,w));x={arrayValue:{values:_}}}else x=HT(d,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||WT(m,p),x=cV(c,a,m,p==="in"||p==="not-in");return Zt.create(h,p,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function br(r,e,t){const n=e,s=zg("where",r);return Hg._create(s,n,t)}class l2 extends a2{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new l2(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:wr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,i){let a=s;const c=i.getFlattenedFilters();for(const d of c)I5(a,d),a=Zv(a,d)})(e._query,t),new uo(e.firestore,e.converter,Zv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class c2 extends o2{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new c2(e,t)}_apply(e){const t=(function(s,i,a){if(s.startAt!==null)throw new nt(je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new nt(je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ph(i,a)})(e._query,this._field,this._direction);return new uo(e.firestore,e.converter,(function(s,i){const a=s.explicitOrderBy.concat([i]);return new Sd(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function u2(r,e="asc"){const t=e,n=zg("orderBy",r);return c2._create(n,t)}class d2 extends o2{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new d2(e,t,n)}_apply(e){return new uo(e.firestore,e.converter,jm(e._query,this._limit,this._limitType))}}function C5(r){return rV("limit",r),d2._create("limit",r,"F")}function HT(r,e,t){if(typeof(t=Cr(t))=="string"){if(t==="")throw new nt(je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lS(e)&&t.indexOf("/")!==-1)throw new nt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(ur.fromString(t));if(!ut.isDocumentKey(n))throw new nt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return hh(r,new ut(n))}if(t instanceof Wn)return hh(r,t._key);throw new nt(je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bg(t)}.`)}function WT(r,e){if(!Array.isArray(r)||r.length===0)throw new nt(je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I5(r,e){const t=(function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(r.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new nt(je.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new nt(je.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class P5{convertValue(e,t="none"){switch(sl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return yl(e,((s,i)=>{n[s]=this.convertValue(i,t)})),n}convertVectorValue(e){var t,n,s;const i=(s=(n=(t=e.fields)===null||t===void 0?void 0:t[nd].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map((a=>Vr(a.doubleValue)));return new Zb(i)}convertGeoPoint(e){return new Jb(Vr(e.latitude),Vr(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ig(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(uh(e));default:return null}}convertTimestamp(e){const t=to(e);return new dr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ur.fromString(e);Et(OS(n));const s=new cc(n.get(1),n.get(3)),i=new ut(n.popFirst(5));return s.isEqual(t)||ms(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class hV extends P5{constructor(e){super(),this.firestore=e}convertBytes(e){return new mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class f2 extends Bm{constructor(e,t,n,s,i,a){super(e,t,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(zg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class lm extends f2{data(e={}){return super.data(e)}}class j5{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Lu(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new lm(this._firestore,this._userDataWriter,n.key,n,new Lu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new nt(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((c=>{const d=new lm(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Lu(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const d=new lm(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Lu(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:fV(c.type),doc:d,oldIndex:h,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fV(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(r){r=Is(r,Wn);const e=Is(r.firestore,va);return ZM(Zh(e),r._key).then((t=>R5(e,r,t)))}class Wg extends P5{constructor(e){super(),this.firestore=e}convertBytes(e){return new mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function sn(r){r=Is(r,uo);const e=Is(r.firestore,va),t=Zh(e),n=new Wg(e);return S5(r._query),eV(t,r._query).then((s=>new j5(e,n,r,s)))}function ba(r,e,t){r=Is(r,Wn);const n=Is(r.firestore,va),s=h2(r.converter,e,t);return qg(n,[t2(rf(n),"setDoc",r._key,s,r.converter!==null,t).toMutation(r._key,nn.none())])}function Rr(r,e,t,...n){r=Is(r,Wn);const s=Is(r.firestore,va),i=rf(s);let a;return a=typeof(e=Cr(e))=="string"||e instanceof ef?T5(i,"updateDoc",r._key,e,t,n):E5(i,"updateDoc",r._key,e),qg(s,[a.toMutation(r._key,nn.exists(!0))])}function Ha(r){return qg(Is(r.firestore,va),[new Kh(r._key,nn.none())])}function rl(r,e){const t=Is(r.firestore,va),n=ot(r),s=h2(r.converter,e);return qg(t,[t2(rf(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,nn.exists(!1))]).then((()=>n))}function cr(r,...e){var t,n,s;r=Cr(r);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||zT(e[a])||(i=e[a],a++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(zT(e[a])){const m=e[a];e[a]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[a+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[a+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let d,h,p;if(r instanceof Wn)h=Is(r.firestore,va),p=qh(r._key.path),d={next:m=>{e[a]&&e[a](R5(h,r,m))},error:e[a+1],complete:e[a+2]};else{const m=Is(r,uo);h=Is(m.firestore,va),p=m._query;const x=new Wg(h);d={next:v=>{e[a]&&e[a](new j5(h,x,m,v))},error:e[a+1],complete:e[a+2]},S5(r._query)}return(function(x,v,_,w){const E=new Yb(w),R=new qb(v,E,_);return x.asyncQueue.enqueueAndForget((async()=>zb(await Vm(x),R))),()=>{E.su(),x.asyncQueue.enqueueAndForget((async()=>Hb(await Vm(x),R)))}})(Zh(h),p,c,d)}function qg(r,e){return(function(n,s){const i=new Bi;return n.asyncQueue.enqueueAndForget((async()=>MM(await QM(n),s,i))),i.promise})(Zh(r),e)}function R5(r,e,t){const n=t.docs.get(e._key),s=new Wg(r);return new f2(r,s,e._key,n,new Lu(t.hasPendingWrites,t.fromCache),e.converter)}class pV{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=D5(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function mV(r){return new pV(r)}class gV{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Mm.provider,this._offlineComponentProvider={build:t=>new qM(t,e?.cacheSizeBytes,this.forceOwnership)}}}function D5(r){return new gV(void 0)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV={maxAttempts:5};function I0(r,e){if((r=Cr(r)).firestore!==e)throw new nt(je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=rf(e)}get(e){const t=I0(e,this._firestore),n=new hV(this._firestore);return this._transaction.lookup([t._key]).then((s=>{if(!s||s.length!==1)return xt();const i=s[0];if(i.isFoundDocument())return new Bm(this._firestore,n,i.key,i,t.converter);if(i.isNoDocument())return new Bm(this._firestore,n,t._key,null,t.converter);throw xt()}))}set(e,t,n){const s=I0(e,this._firestore),i=h2(s.converter,t,n),a=t2(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,n);return this._transaction.set(s._key,a),this}update(e,t,n,...s){const i=I0(e,this._firestore);let a;return a=typeof(t=Cr(t))=="string"||t instanceof ef?T5(this._dataReader,"Transaction.update",i._key,t,n,s):E5(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,a),this}delete(e){const t=I0(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV extends yV{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=I0(e,this._firestore),n=new Wg(this._firestore);return super.get(e).then((s=>new f2(this._firestore,n,t._key,s._document,new Lu(!1,!1),t.converter)))}}function Um(r,e,t){r=Is(r,va);const n=Object.assign(Object.assign({},xV),t);return(function(i){if(i.maxAttempts<1)throw new nt(je.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(i,a,c){const d=new Bi;return i.asyncQueue.enqueueAndForget((async()=>{const h=await JM(i);new KM(i.asyncQueue,h,c,a,d).Iu()})),d.promise})(Zh(r),(s=>e(new vV(r,s))),n)}function lr(){return new r2("serverTimestamp")}function bV(r){return new n2("increment",r)}(function(e,t=!0){(function(s){kd=s})(Ac),Hi(new xi("firestore",((n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),c=new va(new HF(n.getProvider("auth-internal")),new GF(a,n.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new nt(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cc(h.options.projectId,p)})(a,s),a);return i=Object.assign({useFetchStreams:t},i),c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),Cs(A4,N4,e),Cs(A4,N4,"esm2017")})();var wV="firebase",_V="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs(wV,_V,"app");const F5="@firebase/installations",p2="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=1e4,L5=`w:${p2}`,M5="FIS_v2",EV="https://firebaseinstallations.googleapis.com/v1",TV=3600*1e3,AV="installations",NV="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},gc=new Tc(AV,NV,kV);function V5(r){return r instanceof yi&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5({projectId:r}){return`${EV}/projects/${r}/installations`}function B5(r){return{token:r.token,requestStatus:2,expiresIn:CV(r.expiresIn),creationTime:Date.now()}}async function U5(r,e){const n=(await e.json()).error;return gc.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function z5({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function SV(r,{refreshToken:e}){const t=z5(r);return t.append("Authorization",IV(e)),t}async function H5(r){const e=await r();return e.status>=500&&e.status<600?r():e}function CV(r){return Number(r.replace("s","000"))}function IV(r){return`${M5} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PV({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const n=$5(r),s=z5(r),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const a={fid:t,authVersion:M5,appId:r.appId,sdkVersion:L5},c={method:"POST",headers:s,body:JSON.stringify(a)},d=await H5(()=>fetch(n,c));if(d.ok){const h=await d.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:B5(h.authToken)}}else throw await U5("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=/^[cdef][\w-]{21}$/,h1="";function DV(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=FV(r);return RV.test(t)?t:h1}catch{return h1}}function FV(r){return jV(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=new Map;function G5(r,e){const t=Gg(r);K5(t,e),OV(t,e)}function K5(r,e){const t=q5.get(r);if(t)for(const n of t)n(e)}function OV(r,e){const t=LV();t&&t.postMessage({key:r,fid:e}),MV()}let Ql=null;function LV(){return!Ql&&"BroadcastChannel"in self&&(Ql=new BroadcastChannel("[Firebase] FID Change"),Ql.onmessage=r=>{K5(r.data.key,r.data.fid)}),Ql}function MV(){q5.size===0&&Ql&&(Ql.close(),Ql=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV="firebase-installations-database",$V=1,xc="firebase-installations-store";let nv=null;function m2(){return nv||(nv=Mk(VV,$V,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(xc)}}})),nv}async function zm(r,e){const t=Gg(r),s=(await m2()).transaction(xc,"readwrite"),i=s.objectStore(xc),a=await i.get(t);return await i.put(e,t),await s.done,(!a||a.fid!==e.fid)&&G5(r,e.fid),e}async function Y5(r){const e=Gg(r),n=(await m2()).transaction(xc,"readwrite");await n.objectStore(xc).delete(e),await n.done}async function Kg(r,e){const t=Gg(r),s=(await m2()).transaction(xc,"readwrite"),i=s.objectStore(xc),a=await i.get(t),c=e(a);return c===void 0?await i.delete(t):await i.put(c,t),await s.done,c&&(!a||a.fid!==c.fid)&&G5(r,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g2(r){let e;const t=await Kg(r.appConfig,n=>{const s=BV(n),i=UV(r,s);return e=i.registrationPromise,i.installationEntry});return t.fid===h1?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function BV(r){const e=r||{fid:DV(),registrationStatus:0};return X5(e)}function UV(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(gc.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=zV(r,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:HV(r)}:{installationEntry:e}}async function zV(r,e){try{const t=await PV(r,e);return zm(r.appConfig,t)}catch(t){throw V5(t)&&t.customData.serverCode===409?await Y5(r.appConfig):await zm(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function HV(r){let e=await qT(r.appConfig);for(;e.registrationStatus===1;)await W5(100),e=await qT(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:n}=await g2(r);return n||t}return e}function qT(r){return Kg(r,e=>{if(!e)throw gc.create("installation-not-found");return X5(e)})}function X5(r){return WV(r)?{fid:r.fid,registrationStatus:0}:r}function WV(r){return r.registrationStatus===1&&r.registrationTime+O5<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qV({appConfig:r,heartbeatServiceProvider:e},t){const n=GV(r,t),s=SV(r,t),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const a={installation:{sdkVersion:L5,appId:r.appId}},c={method:"POST",headers:s,body:JSON.stringify(a)},d=await H5(()=>fetch(n,c));if(d.ok){const h=await d.json();return B5(h)}else throw await U5("Generate Auth Token",d)}function GV(r,{fid:e}){return`${$5(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(r,e=!1){let t;const n=await Kg(r.appConfig,i=>{if(!Q5(i))throw gc.create("not-registered");const a=i.authToken;if(!e&&XV(a))return i;if(a.requestStatus===1)return t=KV(r,e),i;{if(!navigator.onLine)throw gc.create("app-offline");const c=JV(i);return t=YV(r,c),c}});return t?await t:n.authToken}async function KV(r,e){let t=await GT(r.appConfig);for(;t.authToken.requestStatus===1;)await W5(100),t=await GT(r.appConfig);const n=t.authToken;return n.requestStatus===0?x2(r,e):n}function GT(r){return Kg(r,e=>{if(!Q5(e))throw gc.create("not-registered");const t=e.authToken;return ZV(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function YV(r,e){try{const t=await qV(r,e),n=Object.assign(Object.assign({},e),{authToken:t});return await zm(r.appConfig,n),t}catch(t){if(V5(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Y5(r.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await zm(r.appConfig,n)}throw t}}function Q5(r){return r!==void 0&&r.registrationStatus===2}function XV(r){return r.requestStatus===2&&!QV(r)}function QV(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+TV}function JV(r){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:e})}function ZV(r){return r.requestStatus===1&&r.requestTime+O5<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e$(r){const e=r,{installationEntry:t,registrationPromise:n}=await g2(e);return n?n.catch(console.error):x2(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t$(r,e=!1){const t=r;return await r$(t),(await x2(t,e)).token}async function r$(r){const{registrationPromise:e}=await g2(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n$(r){if(!r||!r.options)throw sv("App Configuration");if(!r.name)throw sv("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw sv(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function sv(r){return gc.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5="installations",s$="installations-internal",i$=r=>{const e=r.getProvider("app").getImmediate(),t=n$(e),n=ml(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},a$=r=>{const e=r.getProvider("app").getImmediate(),t=ml(e,J5).getImmediate();return{getId:()=>e$(t),getToken:s=>t$(t,s)}};function o$(){Hi(new xi(J5,i$,"PUBLIC")),Hi(new xi(s$,a$,"PRIVATE"))}o$();Cs(F5,p2);Cs(F5,p2,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="analytics",l$="firebase_id",c$="origin",u$=60*1e3,d$="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",y2="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new _g("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h$={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Qs=new Tc("analytics","Analytics",h$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f$(r){if(!r.startsWith(y2)){const e=Qs.create("invalid-gtag-resource",{gtagURL:r});return Ps.warn(e.message),""}return r}function Z5(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function p$(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function m$(r,e){const t=p$("firebase-js-sdk-policy",{createScriptURL:f$}),n=document.createElement("script"),s=`${y2}?l=${r}&id=${e}`;n.src=t?t?.createScriptURL(s):s,n.async=!0,document.head.appendChild(n)}function g$(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function x$(r,e,t,n,s,i){const a=n[s];try{if(a)await e[a];else{const d=(await Z5(t)).find(h=>h.measurementId===s);d&&await e[d.appId]}}catch(c){Ps.error(c)}r("config",s,i)}async function y$(r,e,t,n,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const c=await Z5(t);for(const d of a){const h=c.find(m=>m.measurementId===d),p=h&&e[h.appId];if(p)i.push(p);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),r("event",n,s||{})}catch(i){Ps.error(i)}}function v$(r,e,t,n){async function s(i,...a){try{if(i==="event"){const[c,d]=a;await y$(r,e,t,c,d)}else if(i==="config"){const[c,d]=a;await x$(r,e,t,n,c,d)}else if(i==="consent"){const[c,d]=a;r("consent",c,d)}else if(i==="get"){const[c,d,h]=a;r("get",c,d,h)}else if(i==="set"){const[c]=a;r("set",c)}else r(i,...a)}catch(c){Ps.error(c)}}return s}function b$(r,e,t,n,s){let i=function(...a){window[n].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=v$(i,r,e,t),{gtagCore:i,wrappedGtag:window[s]}}function w$(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(y2)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _$=30,E$=1e3;class T${constructor(e={},t=E$){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const eC=new T$;function A$(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function N$(r){var e;const{appId:t,apiKey:n}=r,s={method:"GET",headers:A$(n)},i=d$.replace("{app-id}",t),a=await fetch(i,s);if(a.status!==200&&a.status!==304){let c="";try{const d=await a.json();!((e=d.error)===null||e===void 0)&&e.message&&(c=d.error.message)}catch{}throw Qs.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function k$(r,e=eC,t){const{appId:n,apiKey:s,measurementId:i}=r.options;if(!n)throw Qs.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:n};throw Qs.create("no-api-key")}const a=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new I$;return setTimeout(async()=>{c.abort()},u$),tC({appId:n,apiKey:s,measurementId:i},a,c,e)}async function tC(r,{throttleEndTimeMillis:e,backoffCount:t},n,s=eC){var i;const{appId:a,measurementId:c}=r;try{await S$(n,e)}catch(d){if(c)return Ps.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:a,measurementId:c};throw d}try{const d=await N$(r);return s.deleteThrottleMetadata(a),d}catch(d){const h=d;if(!C$(h)){if(s.deleteThrottleMetadata(a),c)return Ps.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:a,measurementId:c};throw d}const p=Number((i=h?.customData)===null||i===void 0?void 0:i.httpStatus)===503?XE(t,s.intervalMillis,_$):XE(t,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return s.setThrottleMetadata(a,m),Ps.debug(`Calling attemptFetch again in ${p} millis`),tC(r,m,n,s)}}function S$(r,e){return new Promise((t,n)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(t,s);r.addEventListener(()=>{clearTimeout(i),n(Qs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function C$(r){if(!(r instanceof yi)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class I${constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function P$(r,e,t,n,s){if(s&&s.global){r("event",t,n);return}else{const i=await e,a=Object.assign(Object.assign({},n),{send_to:i});r("event",t,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j$(){if(X1())try{await Fk()}catch(r){return Ps.warn(Qs.create("indexeddb-unavailable",{errorInfo:r?.toString()}).message),!1}else return Ps.warn(Qs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function R$(r,e,t,n,s,i,a){var c;const d=k$(r);d.then(v=>{t[v.measurementId]=v.appId,r.options.measurementId&&v.measurementId!==r.options.measurementId&&Ps.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Ps.error(v)),e.push(d);const h=j$().then(v=>{if(v)return n.getId()}),[p,m]=await Promise.all([d,h]);w$(i)||m$(i,p.measurementId),s("js",new Date);const x=(c=a?.config)!==null&&c!==void 0?c:{};return x[c$]="firebase",x.update=!0,m!=null&&(x[l$]=m),s("config",p.measurementId,x),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e){this.app=e}_delete(){return delete B0[this.app.options.appId],Promise.resolve()}}let B0={},KT=[];const YT={};let iv="dataLayer",F$="gtag",XT,rC,QT=!1;function O$(){const r=[];if(Rk()&&r.push("This is a browser extension environment."),s8()||r.push("Cookies are not available."),r.length>0){const e=r.map((n,s)=>`(${s+1}) ${n}`).join(" "),t=Qs.create("invalid-analytics-context",{errorInfo:e});Ps.warn(t.message)}}function L$(r,e,t){O$();const n=r.options.appId;if(!n)throw Qs.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)Ps.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Qs.create("no-api-key");if(B0[n]!=null)throw Qs.create("already-exists",{id:n});if(!QT){g$(iv);const{wrappedGtag:i,gtagCore:a}=b$(B0,KT,YT,iv,F$);rC=i,XT=a,QT=!0}return B0[n]=R$(r,KT,YT,e,XT,iv,t),new D$(r)}function M$(r=J1()){r=Cr(r);const e=ml(r,Hm);return e.isInitialized()?e.getImmediate():V$(r)}function V$(r,e={}){const t=ml(r,Hm);if(t.isInitialized()){const s=t.getImmediate();if(nl(e,t.getOptions()))return s;throw Qs.create("already-initialized")}return t.initialize({options:e})}function $$(r,e,t,n){r=Cr(r),P$(rC,B0[r.app.options.appId],e,t,n).catch(s=>Ps.error(s))}const JT="@firebase/analytics",ZT="0.10.12";function B$(){Hi(new xi(Hm,(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return L$(n,s,t)},"PUBLIC")),Hi(new xi("analytics-internal",r,"PRIVATE")),Cs(JT,ZT),Cs(JT,ZT,"esm2017");function r(e){try{const t=e.getProvider(Hm).getImmediate();return{logEvent:(n,s,i)=>$$(t,n,s,i)}}catch(t){throw Qs.create("interop-component-reg-failed",{reason:t})}}}B$();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="firebasestorage.googleapis.com",U$="storageBucket",z$=120*1e3,H$=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends yi{constructor(e,t,n=0){super(av(e),`Firebase Storage: ${t} (${av(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Aa.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return av(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var wa;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(wa||(wa={}));function av(r){return"storage/"+r}function W$(){const r="An unknown error occurred, please check the error payload for server response.";return new Aa(wa.UNKNOWN,r)}function q$(){return new Aa(wa.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function G$(){return new Aa(wa.CANCELED,"User canceled the upload/download.")}function K$(r){return new Aa(wa.INVALID_URL,"Invalid URL '"+r+"'.")}function Y$(r){return new Aa(wa.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function eA(r){return new Aa(wa.INVALID_ARGUMENT,r)}function sC(){return new Aa(wa.APP_DELETED,"The Firebase app was deleted.")}function X$(r){return new Aa(wa.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Mi.makeFromUrl(e,t)}catch{return new Mi(e,"")}if(n.path==="")return n;throw Y$(e)}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),d={bucket:1,path:3};function h(L){L.path_=decodeURIComponent(L.path)}const p="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${p}/b/${s}/o${x}`,"i"),_={bucket:1,path:3},w=t===nC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,E="([^?#]*)",R=new RegExp(`^https?://${w}/${s}/${E}`,"i"),V=[{regex:c,indices:d,postModify:i},{regex:v,indices:_,postModify:h},{regex:R,indices:{bucket:1,path:2},postModify:h}];for(let L=0;L<V.length;L++){const K=V[L],H=K.regex.exec(e);if(H){const S=H[K.indices.bucket];let k=H[K.indices.path];k||(k=""),n=new Mi(S,k),K.postModify(n);break}}if(n==null)throw K$(e);return n}}class Q${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J$(r,e,t){let n=1,s=null,i=null,a=!1,c=0;function d(){return c===2}let h=!1;function p(...E){h||(h=!0,e.apply(null,E))}function m(E){s=setTimeout(()=>{s=null,r(v,d())},E)}function x(){i&&clearTimeout(i)}function v(E,...R){if(h){x();return}if(E){x(),p.call(null,E,...R);return}if(d()||a){x(),p.call(null,E,...R);return}n<64&&(n*=2);let V;c===1?(c=2,V=0):V=(n+Math.random())*1e3,m(V)}let _=!1;function w(E){_||(_=!0,x(),!h&&(s!==null?(E||(c=2),clearTimeout(s),m(0)):E||(c=1)))}return m(0),i=setTimeout(()=>{a=!0,w(!0)},t),w}function Z$(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eB(r){return r!==void 0}function tA(r,e,t,n){if(n<e)throw eA(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw eA(`Invalid value for '${r}'. Expected ${t} or less.`)}function tB(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const s=e(n)+"="+e(r[n]);t=t+s+"&"}return t=t.slice(0,-1),t}var Wm;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Wm||(Wm={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rB(r,e){const t=r>=500&&r<600,s=[408,429].indexOf(r)!==-1,i=e.indexOf(r)!==-1;return t||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e,t,n,s,i,a,c,d,h,p,m,x=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,_)=>{this.resolve_=v,this.reject_=_,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new Rp(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const c=i.getErrorCode()===Wm.NO_ERROR,d=i.getStatus();if(!c||rB(d,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===Wm.ABORT;n(!1,new Rp(!1,null,p));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new Rp(h,i))})},t=(n,s)=>{const i=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());eB(d)?i(d):i()}catch(d){a(d)}else if(c!==null){const d=W$();d.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,d)):a(d)}else if(s.canceled){const d=this.appDelete_?sC():G$();a(d)}else{const d=q$();a(d)}};this.canceled_?t(!1,new Rp(!1,null,!0)):this.backoffId_=J$(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Z$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Rp{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function sB(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function iB(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function aB(r,e){e&&(r["X-Firebase-GMPID"]=e)}function oB(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function lB(r,e,t,n,s,i,a=!0){const c=tB(r.urlParams),d=r.url+c,h=Object.assign({},r.headers);return aB(h,e),sB(h,t),iB(h,i),oB(h,n),new nB(d,r.method,h,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cB(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function uB(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,t){this._service=e,t instanceof Mi?this._location=t:this._location=Mi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new qm(e,t)}get root(){const e=new Mi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uB(this._location.path)}get storage(){return this._service}get parent(){const e=cB(this._location.path);if(e===null)return null;const t=new Mi(this._location.bucket,e);return new qm(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw X$(e)}}function rA(r,e){const t=e?.[U$];return t==null?null:Mi.makeFromBucketSpec(t,r)}function dB(r,e,t,n={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:s}=n;s&&(r._overrideAuthToken=typeof s=="string"?s:JD(s,r.app.options.projectId))}class hB{constructor(e,t,n,s,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=nC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=z$,this._maxUploadRetryTime=H$,this._requests=new Set,s!=null?this._bucket=Mi.makeFromBucketSpec(s,this._host):this._bucket=rA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mi.makeFromBucketSpec(this._url,e):this._bucket=rA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Gs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qm(this,e)}_makeRequest(e,t,n,s,i=!0){if(this._deleted)return new Q$(sC());{const a=lB(e,this._appId,n,s,t,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,s).getPromise()}}const nA="@firebase/storage",sA="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="storage";function fB(r=J1(),e){r=Cr(r);const n=ml(r,iC).getImmediate({identifier:e}),s=XD("storage");return s&&pB(n,...s),n}function pB(r,e,t,n={}){dB(r,e,t,n)}function mB(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),s=r.getProvider("app-check-internal");return new hB(t,n,s,e,Ac)}function gB(){Hi(new xi(iC,mB,"PUBLIC").setMultipleInstances(!0)),Cs(nA,sA,""),Cs(nA,sA,"esm2017")}gB();const xB={apiKey:"AIzaSyDYacL_WIzZUSP-Tjl3794P_jHocMDqN9g",authDomain:"blackkstreaming-55f0e.firebaseapp.com",projectId:"blackkstreaming-55f0e",storageBucket:"blackkstreaming-55f0e.firebasestorage.app",messagingSenderId:"998157647233",appId:"1:998157647233:web:3e5b8128a0275ae4553c80",measurementId:"G-GFM50WNMSP"},sf=Vk(xB);M$(sf);fB(sf);const Zr=cb(sf),Pe=sV(sf,{localCache:mV({tabManager:D5()})});C7(Zr,p3);console.time("Firebase Init Complete");console.timeEnd("Firebase Init Complete");const aC=A.createContext(),yB=({children:r})=>{const e=cb(sf),[t,n]=A.useState(null),[s,i]=A.useState(null),[a,c]=A.useState(!0);return A.useEffect(()=>{const d=Nc(e,async h=>{if(h){n(h);try{const p=await ha(ot(Pe,"users",h.uid));p.exists()?i(p.data().role):i("user")}catch(p){console.error("Error fetching role:",p),i("user")}}else n(null),i(null);c(!1)});return()=>d()},[]),o.jsx(aC.Provider,{value:{user:t,role:s,loading:a},children:!a&&r})},af=()=>{const r=A.useContext(aC);if(r===void 0)throw new Error("useAuth debe usarse dentro de un AuthProvider");return r},vB="modulepreload",bB=function(r){return"/"+r},iA={},fr=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let d=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");s=d(t.map(h=>{if(h=bB(h),h in iA)return;iA[h]=!0;const p=h.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":vB,p||(x.as="script"),x.crossOrigin="",x.href=h,c&&x.setAttribute("nonce",c),document.head.appendChild(x),p)return new Promise((v,_)=>{x.addEventListener("load",v),x.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return s.then(a=>{for(const c of a||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},v2=A.createContext({});function b2(r){const e=A.useRef(null);return e.current===null&&(e.current=r()),e.current}const w2=typeof window<"u",oC=w2?A.useLayoutEffect:A.useEffect,Yg=A.createContext(null);function _2(r,e){r.indexOf(e)===-1&&r.push(e)}function E2(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}const no=(r,e,t)=>t>e?e:t<r?r:t;let T2=()=>{};const so={},lC=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function cC(r){return typeof r=="object"&&r!==null}const uC=r=>/^0[^.\s]+$/u.test(r);function A2(r){let e;return()=>(e===void 0&&(e=r()),e)}const mi=r=>r,wB=(r,e)=>t=>e(r(t)),of=(...r)=>r.reduce(wB),yh=(r,e,t)=>{const n=e-r;return n===0?1:(t-r)/n};class N2{constructor(){this.subscriptions=[]}add(e){return _2(this.subscriptions,e),()=>E2(this.subscriptions,e)}notify(e,t,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,n);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fa=r=>r*1e3,pa=r=>r/1e3;function dC(r,e){return e?r*(1e3/e):0}const hC=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,_B=1e-7,EB=12;function TB(r,e,t,n,s){let i,a,c=0;do a=e+(t-e)/2,i=hC(a,n,s)-r,i>0?t=a:e=a;while(Math.abs(i)>_B&&++c<EB);return a}function lf(r,e,t,n){if(r===e&&t===n)return mi;const s=i=>TB(i,0,1,r,t);return i=>i===0||i===1?i:hC(s(i),e,n)}const fC=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,pC=r=>e=>1-r(1-e),mC=lf(.33,1.53,.69,.99),k2=pC(mC),gC=fC(k2),xC=r=>(r*=2)<1?.5*k2(r):.5*(2-Math.pow(2,-10*(r-1))),S2=r=>1-Math.sin(Math.acos(r)),yC=pC(S2),vC=fC(S2),AB=lf(.42,0,1,1),NB=lf(0,0,.58,1),bC=lf(.42,0,.58,1),kB=r=>Array.isArray(r)&&typeof r[0]!="number",wC=r=>Array.isArray(r)&&typeof r[0]=="number",SB={linear:mi,easeIn:AB,easeInOut:bC,easeOut:NB,circIn:S2,circInOut:vC,circOut:yC,backIn:k2,backInOut:gC,backOut:mC,anticipate:xC},CB=r=>typeof r=="string",aA=r=>{if(wC(r)){T2(r.length===4);const[e,t,n,s]=r;return lf(e,t,n,s)}else if(CB(r))return SB[r];return r},Dp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],oA={value:null};function IB(r,e){let t=new Set,n=new Set,s=!1,i=!1;const a=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},d=0;function h(m){a.has(m)&&(p.schedule(m),r()),d++,m(c)}const p={schedule:(m,x=!1,v=!1)=>{const w=v&&s?t:n;return x&&a.add(m),w.has(m)||w.add(m),m},cancel:m=>{n.delete(m),a.delete(m)},process:m=>{if(c=m,s){i=!0;return}s=!0,[t,n]=[n,t],t.forEach(h),e&&oA.value&&oA.value.frameloop[e].push(d),d=0,t.clear(),s=!1,i&&(i=!1,p.process(m))}};return p}const PB=40;function _C(r,e){let t=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>t=!0,a=Dp.reduce((V,L)=>(V[L]=IB(i,e?L:void 0),V),{}),{setup:c,read:d,resolveKeyframes:h,preUpdate:p,update:m,preRender:x,render:v,postRender:_}=a,w=()=>{const V=so.useManualTiming?s.timestamp:performance.now();t=!1,so.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(V-s.timestamp,PB),1)),s.timestamp=V,s.isProcessing=!0,c.process(s),d.process(s),h.process(s),p.process(s),m.process(s),x.process(s),v.process(s),_.process(s),s.isProcessing=!1,t&&e&&(n=!1,r(w))},E=()=>{t=!0,n=!0,s.isProcessing||r(w)};return{schedule:Dp.reduce((V,L)=>{const K=a[L];return V[L]=(H,S=!1,k=!1)=>(t||E(),K.schedule(H,S,k)),V},{}),cancel:V=>{for(let L=0;L<Dp.length;L++)a[Dp[L]].cancel(V)},state:s,steps:a}}const{schedule:Yr,cancel:ll,state:Vn,steps:ov}=_C(typeof requestAnimationFrame<"u"?requestAnimationFrame:mi,!0);let cm;function jB(){cm=void 0}const Ss={now:()=>(cm===void 0&&Ss.set(Vn.isProcessing||so.useManualTiming?Vn.timestamp:performance.now()),cm),set:r=>{cm=r,queueMicrotask(jB)}},EC=r=>e=>typeof e=="string"&&e.startsWith(r),C2=EC("--"),RB=EC("var(--"),I2=r=>RB(r)?DB.test(r.split("/*")[0].trim()):!1,DB=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Pd={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},vh={...Pd,transform:r=>no(0,1,r)},Fp={...Pd,default:1},U0=r=>Math.round(r*1e5)/1e5,P2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function FB(r){return r==null}const OB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,j2=(r,e)=>t=>!!(typeof t=="string"&&OB.test(t)&&t.startsWith(r)||e&&!FB(t)&&Object.prototype.hasOwnProperty.call(t,e)),TC=(r,e,t)=>n=>{if(typeof n!="string")return n;const[s,i,a,c]=n.match(P2);return{[r]:parseFloat(s),[e]:parseFloat(i),[t]:parseFloat(a),alpha:c!==void 0?parseFloat(c):1}},LB=r=>no(0,255,r),lv={...Pd,transform:r=>Math.round(LB(r))},Jl={test:j2("rgb","red"),parse:TC("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:n=1})=>"rgba("+lv.transform(r)+", "+lv.transform(e)+", "+lv.transform(t)+", "+U0(vh.transform(n))+")"};function MB(r){let e="",t="",n="",s="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),n=r.substring(5,7),s=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),n=r.substring(3,4),s=r.substring(4,5),e+=e,t+=t,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const f1={test:j2("#"),parse:MB,transform:Jl.transform},cf=r=>({test:e=>typeof e=="string"&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),Uo=cf("deg"),ma=cf("%"),Lt=cf("px"),VB=cf("vh"),$B=cf("vw"),lA={...ma,parse:r=>ma.parse(r)/100,transform:r=>ma.transform(r*100)},Mu={test:j2("hsl","hue"),parse:TC("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(r)+", "+ma.transform(U0(e))+", "+ma.transform(U0(t))+", "+U0(vh.transform(n))+")"},rs={test:r=>Jl.test(r)||f1.test(r)||Mu.test(r),parse:r=>Jl.test(r)?Jl.parse(r):Mu.test(r)?Mu.parse(r):f1.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Jl.transform(r):Mu.transform(r)},BB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function UB(r){return isNaN(r)&&typeof r=="string"&&(r.match(P2)?.length||0)+(r.match(BB)?.length||0)>0}const AC="number",NC="color",zB="var",HB="var(",cA="${}",WB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function bh(r){const e=r.toString(),t=[],n={color:[],number:[],var:[]},s=[];let i=0;const c=e.replace(WB,d=>(rs.test(d)?(n.color.push(i),s.push(NC),t.push(rs.parse(d))):d.startsWith(HB)?(n.var.push(i),s.push(zB),t.push(d)):(n.number.push(i),s.push(AC),t.push(parseFloat(d))),++i,cA)).split(cA);return{values:t,split:c,indexes:n,types:s}}function kC(r){return bh(r).values}function SC(r){const{split:e,types:t}=bh(r),n=e.length;return s=>{let i="";for(let a=0;a<n;a++)if(i+=e[a],s[a]!==void 0){const c=t[a];c===AC?i+=U0(s[a]):c===NC?i+=rs.transform(s[a]):i+=s[a]}return i}}const qB=r=>typeof r=="number"?0:r;function GB(r){const e=kC(r);return SC(r)(e.map(qB))}const cl={test:UB,parse:kC,createTransformer:SC,getAnimatableNone:GB};function cv(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function KB({hue:r,saturation:e,lightness:t,alpha:n}){r/=360,e/=100,t/=100;let s=0,i=0,a=0;if(!e)s=i=a=t;else{const c=t<.5?t*(1+e):t+e-t*e,d=2*t-c;s=cv(d,c,r+1/3),i=cv(d,c,r),a=cv(d,c,r-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:n}}function Gm(r,e){return t=>t>0?e:r}const Kr=(r,e,t)=>r+(e-r)*t,uv=(r,e,t)=>{const n=r*r,s=t*(e*e-n)+n;return s<0?0:Math.sqrt(s)},YB=[f1,Jl,Mu],XB=r=>YB.find(e=>e.test(r));function uA(r){const e=XB(r);if(!e)return!1;let t=e.parse(r);return e===Mu&&(t=KB(t)),t}const dA=(r,e)=>{const t=uA(r),n=uA(e);if(!t||!n)return Gm(r,e);const s={...t};return i=>(s.red=uv(t.red,n.red,i),s.green=uv(t.green,n.green,i),s.blue=uv(t.blue,n.blue,i),s.alpha=Kr(t.alpha,n.alpha,i),Jl.transform(s))},p1=new Set(["none","hidden"]);function QB(r,e){return p1.has(r)?t=>t<=0?r:e:t=>t>=1?e:r}function JB(r,e){return t=>Kr(r,e,t)}function R2(r){return typeof r=="number"?JB:typeof r=="string"?I2(r)?Gm:rs.test(r)?dA:tU:Array.isArray(r)?CC:typeof r=="object"?rs.test(r)?dA:ZB:Gm}function CC(r,e){const t=[...r],n=t.length,s=r.map((i,a)=>R2(i)(i,e[a]));return i=>{for(let a=0;a<n;a++)t[a]=s[a](i);return t}}function ZB(r,e){const t={...r,...e},n={};for(const s in t)r[s]!==void 0&&e[s]!==void 0&&(n[s]=R2(r[s])(r[s],e[s]));return s=>{for(const i in n)t[i]=n[i](s);return t}}function eU(r,e){const t=[],n={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],a=r.indexes[i][n[i]],c=r.values[a]??0;t[s]=c,n[i]++}return t}const tU=(r,e)=>{const t=cl.createTransformer(e),n=bh(r),s=bh(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?p1.has(r)&&!s.values.length||p1.has(e)&&!n.values.length?QB(r,e):of(CC(eU(n,s),s.values),t):Gm(r,e)};function IC(r,e,t){return typeof r=="number"&&typeof e=="number"&&typeof t=="number"?Kr(r,e,t):R2(r)(r,e)}const rU=r=>{const e=({timestamp:t})=>r(t);return{start:(t=!0)=>Yr.update(e,t),stop:()=>ll(e),now:()=>Vn.isProcessing?Vn.timestamp:Ss.now()}},PC=(r,e,t=10)=>{let n="";const s=Math.max(Math.round(e/t),2);for(let i=0;i<s;i++)n+=r(i/(s-1))+", ";return`linear(${n.substring(0,n.length-2)})`},Km=2e4;function D2(r){let e=0;const t=50;let n=r.next(e);for(;!n.done&&e<Km;)e+=t,n=r.next(e);return e>=Km?1/0:e}function nU(r,e=100,t){const n=t({...r,keyframes:[0,e]}),s=Math.min(D2(n),Km);return{type:"keyframes",ease:i=>n.next(s*i).value/e,duration:pa(s)}}const sU=5;function jC(r,e,t){const n=Math.max(e-sU,0);return dC(t-r(n),e-n)}const Qr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dv=.001;function iU({duration:r=Qr.duration,bounce:e=Qr.bounce,velocity:t=Qr.velocity,mass:n=Qr.mass}){let s,i,a=1-e;a=no(Qr.minDamping,Qr.maxDamping,a),r=no(Qr.minDuration,Qr.maxDuration,pa(r)),a<1?(s=h=>{const p=h*a,m=p*r,x=p-t,v=m1(h,a),_=Math.exp(-m);return dv-x/v*_},i=h=>{const m=h*a*r,x=m*t+t,v=Math.pow(a,2)*Math.pow(h,2)*r,_=Math.exp(-m),w=m1(Math.pow(h,2),a);return(-s(h)+dv>0?-1:1)*((x-v)*_)/w}):(s=h=>{const p=Math.exp(-h*r),m=(h-t)*r+1;return-dv+p*m},i=h=>{const p=Math.exp(-h*r),m=(t-h)*(r*r);return p*m});const c=5/r,d=oU(s,i,c);if(r=fa(r),isNaN(d))return{stiffness:Qr.stiffness,damping:Qr.damping,duration:r};{const h=Math.pow(d,2)*n;return{stiffness:h,damping:a*2*Math.sqrt(n*h),duration:r}}}const aU=12;function oU(r,e,t){let n=t;for(let s=1;s<aU;s++)n=n-r(n)/e(n);return n}function m1(r,e){return r*Math.sqrt(1-e*e)}const lU=["duration","bounce"],cU=["stiffness","damping","mass"];function hA(r,e){return e.some(t=>r[t]!==void 0)}function uU(r){let e={velocity:Qr.velocity,stiffness:Qr.stiffness,damping:Qr.damping,mass:Qr.mass,isResolvedFromDuration:!1,...r};if(!hA(r,cU)&&hA(r,lU))if(r.visualDuration){const t=r.visualDuration,n=2*Math.PI/(t*1.2),s=n*n,i=2*no(.05,1,1-(r.bounce||0))*Math.sqrt(s);e={...e,mass:Qr.mass,stiffness:s,damping:i}}else{const t=iU(r);e={...e,...t,mass:Qr.mass},e.isResolvedFromDuration=!0}return e}function Ym(r=Qr.visualDuration,e=Qr.bounce){const t=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:e}:r;let{restSpeed:n,restDelta:s}=t;const i=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],c={done:!1,value:i},{stiffness:d,damping:h,mass:p,duration:m,velocity:x,isResolvedFromDuration:v}=uU({...t,velocity:-pa(t.velocity||0)}),_=x||0,w=h/(2*Math.sqrt(d*p)),E=a-i,R=pa(Math.sqrt(d/p)),C=Math.abs(E)<5;n||(n=C?Qr.restSpeed.granular:Qr.restSpeed.default),s||(s=C?Qr.restDelta.granular:Qr.restDelta.default);let V;if(w<1){const K=m1(R,w);V=H=>{const S=Math.exp(-w*R*H);return a-S*((_+w*R*E)/K*Math.sin(K*H)+E*Math.cos(K*H))}}else if(w===1)V=K=>a-Math.exp(-R*K)*(E+(_+R*E)*K);else{const K=R*Math.sqrt(w*w-1);V=H=>{const S=Math.exp(-w*R*H),k=Math.min(K*H,300);return a-S*((_+w*R*E)*Math.sinh(k)+K*E*Math.cosh(k))/K}}const L={calculatedDuration:v&&m||null,next:K=>{const H=V(K);if(v)c.done=K>=m;else{let S=K===0?_:0;w<1&&(S=K===0?fa(_):jC(V,K,H));const k=Math.abs(S)<=n,P=Math.abs(a-H)<=s;c.done=k&&P}return c.value=c.done?a:H,c},toString:()=>{const K=Math.min(D2(L),Km),H=PC(S=>L.next(K*S).value,K,30);return K+"ms "+H},toTransition:()=>{}};return L}Ym.applyToOptions=r=>{const e=nU(r,100,Ym);return r.ease=e.ease,r.duration=fa(e.duration),r.type="keyframes",r};function g1({keyframes:r,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:c,max:d,restDelta:h=.5,restSpeed:p}){const m=r[0],x={done:!1,value:m},v=k=>c!==void 0&&k<c||d!==void 0&&k>d,_=k=>c===void 0?d:d===void 0||Math.abs(c-k)<Math.abs(d-k)?c:d;let w=t*e;const E=m+w,R=a===void 0?E:a(E);R!==E&&(w=R-m);const C=k=>-w*Math.exp(-k/n),V=k=>R+C(k),L=k=>{const P=C(k),j=V(k);x.done=Math.abs(P)<=h,x.value=x.done?R:j};let K,H;const S=k=>{v(x.value)&&(K=k,H=Ym({keyframes:[x.value,_(x.value)],velocity:jC(V,k,x.value),damping:s,stiffness:i,restDelta:h,restSpeed:p}))};return S(0),{calculatedDuration:null,next:k=>{let P=!1;return!H&&K===void 0&&(P=!0,L(k),S(k)),K!==void 0&&k>=K?H.next(k-K):(!P&&L(k),x)}}}function dU(r,e,t){const n=[],s=t||so.mix||IC,i=r.length-1;for(let a=0;a<i;a++){let c=s(r[a],r[a+1]);if(e){const d=Array.isArray(e)?e[a]||mi:e;c=of(d,c)}n.push(c)}return n}function hU(r,e,{clamp:t=!0,ease:n,mixer:s}={}){const i=r.length;if(T2(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const a=r[0]===r[1];r[0]>r[i-1]&&(r=[...r].reverse(),e=[...e].reverse());const c=dU(e,n,s),d=c.length,h=p=>{if(a&&p<r[0])return e[0];let m=0;if(d>1)for(;m<r.length-2&&!(p<r[m+1]);m++);const x=yh(r[m],r[m+1],p);return c[m](x)};return t?p=>h(no(r[0],r[i-1],p)):h}function fU(r,e){const t=r[r.length-1];for(let n=1;n<=e;n++){const s=yh(0,e,n);r.push(Kr(t,1,s))}}function pU(r){const e=[0];return fU(e,r.length-1),e}function mU(r,e){return r.map(t=>t*e)}function gU(r,e){return r.map(()=>e||bC).splice(0,r.length-1)}function z0({duration:r=300,keyframes:e,times:t,ease:n="easeInOut"}){const s=kB(n)?n.map(aA):aA(n),i={done:!1,value:e[0]},a=mU(t&&t.length===e.length?t:pU(e),r),c=hU(a,e,{ease:Array.isArray(s)?s:gU(e,s)});return{calculatedDuration:r,next:d=>(i.value=c(d),i.done=d>=r,i)}}const xU=r=>r!==null;function F2(r,{repeat:e,repeatType:t="loop"},n,s=1){const i=r.filter(xU),c=s<0||e&&t!=="loop"&&e%2===1?0:i.length-1;return!c||n===void 0?i[c]:n}const yU={decay:g1,inertia:g1,tween:z0,keyframes:z0,spring:Ym};function RC(r){typeof r.type=="string"&&(r.type=yU[r.type])}class O2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const vU=r=>r/100;class L2 extends O2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(t=!0)=>{if(t){const{motionValue:n}=this.options;n&&n.updatedAt!==Ss.now()&&this.tick(Ss.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;RC(e);const{type:t=z0,repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=e;let{keyframes:c}=e;const d=t||z0;d!==z0&&typeof c[0]!="number"&&(this.mixKeyframes=of(vU,IC(c[0],c[1])),c=[0,100]);const h=d({...e,keyframes:c});i==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...c].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=D2(h));const{calculatedDuration:p}=h;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=h}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:s,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return n.next(0);const{delay:h=0,keyframes:p,repeat:m,repeatType:x,repeatDelay:v,type:_,onUpdate:w,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const R=this.currentTime-h*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?R<0:R>s;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let V=this.currentTime,L=n;if(m){const k=Math.min(this.currentTime,s)/c;let P=Math.floor(k),j=k%1;!j&&k>=1&&(j=1),j===1&&P--,P=Math.min(P,m+1),!!(P%2)&&(x==="reverse"?(j=1-j,v&&(j-=v/c)):x==="mirror"&&(L=a)),V=no(0,1,j)*c}const K=C?{done:!1,value:p[0]}:L.next(V);i&&(K.value=i(K.value));let{done:H}=K;!C&&d!==null&&(H=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return S&&_!==g1&&(K.value=F2(p,this.options,E,this.speed)),w&&w(K.value),S&&this.finish(),K}then(e,t){return this.finished.then(e,t)}get duration(){return pa(this.calculatedDuration)}get time(){return pa(this.currentTime)}set time(e){e=fa(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ss.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=pa(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=rU,startTime:t}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ss.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function bU(r){for(let e=1;e<r.length;e++)r[e]??(r[e]=r[e-1])}const Zl=r=>r*180/Math.PI,x1=r=>{const e=Zl(Math.atan2(r[1],r[0]));return y1(e)},wU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:x1,rotateZ:x1,skewX:r=>Zl(Math.atan(r[1])),skewY:r=>Zl(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},y1=r=>(r=r%360,r<0&&(r+=360),r),fA=x1,pA=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),mA=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),_U={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:pA,scaleY:mA,scale:r=>(pA(r)+mA(r))/2,rotateX:r=>y1(Zl(Math.atan2(r[6],r[5]))),rotateY:r=>y1(Zl(Math.atan2(-r[2],r[0]))),rotateZ:fA,rotate:fA,skewX:r=>Zl(Math.atan(r[4])),skewY:r=>Zl(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function v1(r){return r.includes("scale")?1:0}function b1(r,e){if(!r||r==="none")return v1(e);const t=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(t)n=_U,s=t;else{const c=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=wU,s=c}if(!s)return v1(e);const i=n[e],a=s[1].split(",").map(TU);return typeof i=="function"?i(a):a[i]}const EU=(r,e)=>{const{transform:t="none"}=getComputedStyle(r);return b1(t,e)};function TU(r){return parseFloat(r.trim())}const jd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Rd=new Set(jd),gA=r=>r===Pd||r===Lt,AU=new Set(["x","y","z"]),NU=jd.filter(r=>!AU.has(r));function kU(r){const e=[];return NU.forEach(t=>{const n=r.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const rc={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:(r,{transform:e})=>b1(e,"x"),y:(r,{transform:e})=>b1(e,"y")};rc.translateX=rc.x;rc.translateY=rc.y;const nc=new Set;let w1=!1,_1=!1,E1=!1;function DC(){if(_1){const r=Array.from(nc).filter(n=>n.needsMeasurement),e=new Set(r.map(n=>n.element)),t=new Map;e.forEach(n=>{const s=kU(n);s.length&&(t.set(n,s),n.render())}),r.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=t.get(n);s&&s.forEach(([i,a])=>{n.getValue(i)?.set(a)})}),r.forEach(n=>n.measureEndState()),r.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}_1=!1,w1=!1,nc.forEach(r=>r.complete(E1)),nc.clear()}function FC(){nc.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(_1=!0)})}function SU(){E1=!0,FC(),DC(),E1=!1}class M2{constructor(e,t,n,s,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(nc.add(this),w1||(w1=!0,Yr.read(FC),Yr.resolveKeyframes(DC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:s}=this;if(e[0]===null){const i=s?.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(n&&t){const c=n.readValue(t,a);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=a),s&&i===void 0&&s.set(e[0])}bU(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),nc.delete(this)}cancel(){this.state==="scheduled"&&(nc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const CU=r=>r.startsWith("--");function IU(r,e,t){CU(e)?r.style.setProperty(e,t):r.style[e]=t}const PU=A2(()=>window.ScrollTimeline!==void 0),jU={};function RU(r,e){const t=A2(r);return()=>jU[e]??t()}const OC=RU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),P0=([r,e,t,n])=>`cubic-bezier(${r}, ${e}, ${t}, ${n})`,xA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:P0([0,.65,.55,1]),circOut:P0([.55,0,1,.45]),backIn:P0([.31,.01,.66,-.59]),backOut:P0([.33,1.53,.69,.99])};function LC(r,e){if(r)return typeof r=="function"?OC()?PC(r,e):"ease-out":wC(r)?P0(r):Array.isArray(r)?r.map(t=>LC(t,e)||xA.easeOut):xA[r]}function DU(r,e,t,{delay:n=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:c="easeOut",times:d}={},h=void 0){const p={[e]:t};d&&(p.offset=d);const m=LC(c,s);Array.isArray(m)&&(p.easing=m);const x={delay:n,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return h&&(x.pseudoElement=h),r.animate(p,x)}function MC(r){return typeof r=="function"&&"applyToOptions"in r}function FU({type:r,...e}){return MC(r)&&OC()?r.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class OU extends O2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:s,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:c,onComplete:d}=e;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=e,T2(typeof e.type!="string");const h=FU(e);this.animation=DU(t,n,s,h,i),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const p=F2(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):IU(t,n,p),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return pa(Number(e))}get time(){return pa(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=fa(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&PU()?(this.animation.timeline=e,mi):t(this)}}const VC={anticipate:xC,backInOut:gC,circInOut:vC};function LU(r){return r in VC}function MU(r){typeof r.ease=="string"&&LU(r.ease)&&(r.ease=VC[r.ease])}const yA=10;class VU extends OU{constructor(e){MU(e),RC(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:s,element:i,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new L2({...a,autoplay:!1}),d=fa(this.finishedTime??this.time);t.setWithVelocity(c.sample(d-yA).value,c.sample(d).value,yA),c.stop()}}const vA=(r,e)=>e==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(cl.test(r)||r==="0")&&!r.startsWith("url("));function $U(r){const e=r[0];if(r.length===1)return!0;for(let t=0;t<r.length;t++)if(r[t]!==e)return!0}function BU(r,e,t,n){const s=r[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=r[r.length-1],a=vA(s,e),c=vA(i,e);return!a||!c?!1:$U(r)||(t==="spring"||MC(t))&&n}function V2(r){return cC(r)&&"offsetHeight"in r}const UU=new Set(["opacity","clipPath","filter","transform"]),zU=A2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function HU(r){const{motionValue:e,name:t,repeatDelay:n,repeatType:s,damping:i,type:a}=r;if(!V2(e?.owner?.current))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return zU()&&t&&UU.has(t)&&(t!=="transform"||!d)&&!c&&!n&&s!=="mirror"&&i!==0&&a!=="inertia"}const WU=40;class qU extends O2{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",keyframes:c,name:d,motionValue:h,element:p,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ss.now();const x={autoplay:e,delay:t,type:n,repeat:s,repeatDelay:i,repeatType:a,name:d,motionValue:h,element:p,...m},v=p?.KeyframeResolver||M2;this.keyframeResolver=new v(c,(_,w,E)=>this.onKeyframesResolved(_,w,x,!E),d,h,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,s){this.keyframeResolver=void 0;const{name:i,type:a,velocity:c,delay:d,isHandoff:h,onUpdate:p}=n;this.resolvedAt=Ss.now(),BU(e,i,a,c)||((so.instantAnimations||!d)&&p?.(F2(e,n,t)),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const x={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>WU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},v=!h&&HU(x)?new VU({...x,element:x.motionValue.owner.current}):new L2(x);v.finished.then(()=>this.notifyFinished()).catch(mi),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),SU()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const GU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function KU(r){const e=GU.exec(r);if(!e)return[,];const[,t,n,s]=e;return[`--${t??n}`,s]}function $C(r,e,t=1){const[n,s]=KU(r);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const a=i.trim();return lC(a)?parseFloat(a):a}return I2(s)?$C(s,e,t+1):s}function $2(r,e){return r?.[e]??r?.default??r}const BC=new Set(["width","height","top","left","right","bottom",...jd]),YU={test:r=>r==="auto",parse:r=>r},UC=r=>e=>e.test(r),zC=[Pd,Lt,ma,Uo,$B,VB,YU],bA=r=>zC.find(UC(r));function XU(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||uC(r):!0}const QU=new Set(["brightness","contrast","saturate","opacity"]);function JU(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[n]=t.match(P2)||[];if(!n)return r;const s=t.replace(n,"");let i=QU.has(e)?1:0;return n!==t&&(i*=100),e+"("+i+s+")"}const ZU=/\b([a-z-]*)\(.*?\)/gu,T1={...cl,getAnimatableNone:r=>{const e=r.match(ZU);return e?e.map(JU).join(" "):r}},wA={...Pd,transform:Math.round},ez={rotate:Uo,rotateX:Uo,rotateY:Uo,rotateZ:Uo,scale:Fp,scaleX:Fp,scaleY:Fp,scaleZ:Fp,skew:Uo,skewX:Uo,skewY:Uo,distance:Lt,translateX:Lt,translateY:Lt,translateZ:Lt,x:Lt,y:Lt,z:Lt,perspective:Lt,transformPerspective:Lt,opacity:vh,originX:lA,originY:lA,originZ:Lt},B2={borderWidth:Lt,borderTopWidth:Lt,borderRightWidth:Lt,borderBottomWidth:Lt,borderLeftWidth:Lt,borderRadius:Lt,radius:Lt,borderTopLeftRadius:Lt,borderTopRightRadius:Lt,borderBottomRightRadius:Lt,borderBottomLeftRadius:Lt,width:Lt,maxWidth:Lt,height:Lt,maxHeight:Lt,top:Lt,right:Lt,bottom:Lt,left:Lt,padding:Lt,paddingTop:Lt,paddingRight:Lt,paddingBottom:Lt,paddingLeft:Lt,margin:Lt,marginTop:Lt,marginRight:Lt,marginBottom:Lt,marginLeft:Lt,backgroundPositionX:Lt,backgroundPositionY:Lt,...ez,zIndex:wA,fillOpacity:vh,strokeOpacity:vh,numOctaves:wA},tz={...B2,color:rs,backgroundColor:rs,outlineColor:rs,fill:rs,stroke:rs,borderColor:rs,borderTopColor:rs,borderRightColor:rs,borderBottomColor:rs,borderLeftColor:rs,filter:T1,WebkitFilter:T1},HC=r=>tz[r];function WC(r,e){let t=HC(r);return t!==T1&&(t=cl),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const rz=new Set(["auto","none","0"]);function nz(r,e,t){let n=0,s;for(;n<r.length&&!s;){const i=r[n];typeof i=="string"&&!rz.has(i)&&bh(i).values.length&&(s=r[n]),n++}if(s&&t)for(const i of e)r[i]=WC(t,s)}class sz extends M2{constructor(e,t,n,s,i){super(e,t,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),I2(h))){const p=$C(h,t.current);p!==void 0&&(e[d]=p),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!BC.has(n)||e.length!==2)return;const[s,i]=e,a=bA(s),c=bA(i);if(a!==c)if(gA(a)&&gA(c))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else rc[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let s=0;s<e.length;s++)(e[s]===null||XU(e[s]))&&n.push(s);n.length&&nz(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const i=n.length-1,a=n[i];n[i]=rc[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function iz(r,e,t){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let n=document;const s=t?.[r]??n.querySelectorAll(r);return s?Array.from(s):[]}return Array.from(r)}const _A=30,az=r=>!isNaN(parseFloat(r));class oz{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{const i=Ss.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty();s&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ss.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=az(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new N2);const n=this.events[e].add(t);return e==="change"?()=>{n(),Yr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ss.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>_A)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,_A);return dC(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fd(r,e){return new oz(r,e)}const qC=(r,e)=>e&&typeof r=="number"?e.transform(r):r,{schedule:U2}=_C(queueMicrotask,!1),Di={x:!1,y:!1};function GC(){return Di.x||Di.y}function lz(r){return r==="x"||r==="y"?Di[r]?null:(Di[r]=!0,()=>{Di[r]=!1}):Di.x||Di.y?null:(Di.x=Di.y=!0,()=>{Di.x=Di.y=!1})}function KC(r,e){const t=iz(r),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[t,s,()=>n.abort()]}function EA(r){return!(r.pointerType==="touch"||GC())}function cz(r,e,t={}){const[n,s,i]=KC(r,t),a=c=>{if(!EA(c))return;const{target:d}=c,h=e(d,c);if(typeof h!="function"||!d)return;const p=m=>{EA(m)&&(h(m),d.removeEventListener("pointerleave",p))};d.addEventListener("pointerleave",p,s)};return n.forEach(c=>{c.addEventListener("pointerenter",a,s)}),i}const YC=(r,e)=>e?r===e?!0:YC(r,e.parentElement):!1,z2=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,uz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function dz(r){return uz.has(r.tagName)||r.tabIndex!==-1}const um=new WeakSet;function TA(r){return e=>{e.key==="Enter"&&r(e)}}function hv(r,e){r.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const hz=(r,e)=>{const t=r.currentTarget;if(!t)return;const n=TA(()=>{if(um.has(t))return;hv(t,"down");const s=TA(()=>{hv(t,"up")}),i=()=>hv(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",i,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function AA(r){return z2(r)&&!GC()}function fz(r,e,t={}){const[n,s,i]=KC(r,t),a=c=>{const d=c.currentTarget;if(!AA(c))return;um.add(d);const h=e(d,c),p=(v,_)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",x),um.has(d)&&um.delete(d),AA(v)&&typeof h=="function"&&h(v,{success:_})},m=v=>{p(v,d===window||d===document||t.useGlobalTarget||YC(d,v.target))},x=v=>{p(v,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",x,s)};return n.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",a,s),V2(c)&&(c.addEventListener("focus",h=>hz(h,s)),!dz(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),i}function XC(r){return cC(r)&&"ownerSVGElement"in r}function pz(r){return XC(r)&&r.tagName==="svg"}const ss=r=>!!(r&&r.getVelocity),mz=[...zC,rs,cl],gz=r=>mz.find(UC(r)),H2=A.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class xz extends A.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const n=t.offsetParent,s=V2(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function yz({children:r,isPresent:e,anchorX:t}){const n=A.useId(),s=A.useRef(null),i=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=A.useContext(H2);return A.useInsertionEffect(()=>{const{width:c,height:d,top:h,left:p,right:m}=i.current;if(e||!s.current||!c||!d)return;const x=t==="left"?`left: ${p}`:`right: ${m}`;s.current.dataset.motionPopId=n;const v=document.createElement("style");return a&&(v.nonce=a),document.head.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            ${x}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.contains(v)&&document.head.removeChild(v)}},[e]),o.jsx(xz,{isPresent:e,childRef:s,sizeRef:i,children:A.cloneElement(r,{ref:s})})}const vz=({children:r,initial:e,isPresent:t,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:a,anchorX:c})=>{const d=b2(bz),h=A.useId();let p=!0,m=A.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:t,custom:s,onExitComplete:x=>{d.set(x,!0);for(const v of d.values())if(!v)return;n&&n()},register:x=>(d.set(x,!1),()=>d.delete(x))}),[t,d,n]);return i&&p&&(m={...m}),A.useMemo(()=>{d.forEach((x,v)=>d.set(v,!1))},[t]),A.useEffect(()=>{!t&&!d.size&&n&&n()},[t]),a==="popLayout"&&(r=o.jsx(yz,{isPresent:t,anchorX:c,children:r})),o.jsx(Yg.Provider,{value:m,children:r})};function bz(){return new Map}function QC(r=!0){const e=A.useContext(Yg);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,i=A.useId();A.useEffect(()=>{if(r)return s(i)},[r]);const a=A.useCallback(()=>r&&n&&n(i),[i,n,r]);return!t&&n?[!1,a]:[!0]}const Op=r=>r.key||"";function NA(r){const e=[];return A.Children.forEach(r,t=>{A.isValidElement(t)&&e.push(t)}),e}const Bt=({children:r,custom:e,initial:t=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:a=!1,anchorX:c="left"})=>{const[d,h]=QC(a),p=A.useMemo(()=>NA(r),[r]),m=a&&!d?[]:p.map(Op),x=A.useRef(!0),v=A.useRef(p),_=b2(()=>new Map),[w,E]=A.useState(p),[R,C]=A.useState(p);oC(()=>{x.current=!1,v.current=p;for(let K=0;K<R.length;K++){const H=Op(R[K]);m.includes(H)?_.delete(H):_.get(H)!==!0&&_.set(H,!1)}},[R,m.length,m.join("-")]);const V=[];if(p!==w){let K=[...p];for(let H=0;H<R.length;H++){const S=R[H],k=Op(S);m.includes(k)||(K.splice(H,0,S),V.push(S))}return i==="wait"&&V.length&&(K=V),C(NA(K)),E(p),null}const{forceRender:L}=A.useContext(v2);return o.jsx(o.Fragment,{children:R.map(K=>{const H=Op(K),S=a&&!d?!1:p===R||m.includes(H),k=()=>{if(_.has(H))_.set(H,!0);else return;let P=!0;_.forEach(j=>{j||(P=!1)}),P&&(L?.(),C(v.current),a&&h?.(),n&&n())};return o.jsx(vz,{isPresent:S,initial:!x.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,onExitComplete:S?void 0:k,anchorX:c,children:K},H)})})},JC=A.createContext({strict:!1}),kA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pd={};for(const r in kA)pd[r]={isEnabled:e=>kA[r].some(t=>!!e[t])};function wz(r){for(const e in r)pd[e]={...pd[e],...r[e]}}const _z=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xm(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||_z.has(r)}let ZC=r=>!Xm(r);function Ez(r){r&&(ZC=e=>e.startsWith("on")?!Xm(e):r(e))}try{Ez(require("@emotion/is-prop-valid").default)}catch{}function Tz(r,e,t){const n={};for(const s in r)s==="values"&&typeof r.values=="object"||(ZC(s)||t===!0&&Xm(s)||!e&&!Xm(s)||r.draggable&&s.startsWith("onDrag"))&&(n[s]=r[s]);return n}function Az(r){if(typeof Proxy>"u")return r;const e=new Map,t=(...n)=>r(...n);return new Proxy(t,{get:(n,s)=>s==="create"?r:(e.has(s)||e.set(s,r(s)),e.get(s))})}const Xg=A.createContext({});function Qg(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function wh(r){return typeof r=="string"||Array.isArray(r)}const W2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],q2=["initial",...W2];function Jg(r){return Qg(r.animate)||q2.some(e=>wh(r[e]))}function e6(r){return!!(Jg(r)||r.variants)}function Nz(r,e){if(Jg(r)){const{initial:t,animate:n}=r;return{initial:t===!1||wh(t)?t:void 0,animate:wh(n)?n:void 0}}return r.inherit!==!1?e:{}}function kz(r){const{initial:e,animate:t}=Nz(r,A.useContext(Xg));return A.useMemo(()=>({initial:e,animate:t}),[SA(e),SA(t)])}function SA(r){return Array.isArray(r)?r.join(" "):r}const Sz=Symbol.for("motionComponentSymbol");function Vu(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function Cz(r,e,t){return A.useCallback(n=>{n&&r.onMount&&r.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):Vu(t)&&(t.current=n))},[e])}const G2=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Iz="framerAppearId",t6="data-"+G2(Iz),r6=A.createContext({});function Pz(r,e,t,n,s){const{visualElement:i}=A.useContext(Xg),a=A.useContext(JC),c=A.useContext(Yg),d=A.useContext(H2).reducedMotion,h=A.useRef(null);n=n||a.renderer,!h.current&&n&&(h.current=n(r,{visualState:e,parent:i,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const p=h.current,m=A.useContext(r6);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&jz(h.current,t,s,m);const x=A.useRef(!1);A.useInsertionEffect(()=>{p&&x.current&&p.update(t,c)});const v=t[t6],_=A.useRef(!!v&&!window.MotionHandoffIsComplete?.(v)&&window.MotionHasOptimisedAnimation?.(v));return oC(()=>{p&&(x.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),U2.render(p.render),_.current&&p.animationState&&p.animationState.animateChanges())}),A.useEffect(()=>{p&&(!_.current&&p.animationState&&p.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(v)}),_.current=!1))}),p}function jz(r,e,t,n){const{layoutId:s,layout:i,drag:a,dragConstraints:c,layoutScroll:d,layoutRoot:h,layoutCrossfade:p}=e;r.projection=new t(r.latestValues,e["data-framer-portal-id"]?void 0:n6(r.parent)),r.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||c&&Vu(c),visualElement:r,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:d,layoutRoot:h})}function n6(r){if(r)return r.options.allowProjection!==!1?r.projection:n6(r.parent)}function Rz({preloadedFeatures:r,createVisualElement:e,useRender:t,useVisualState:n,Component:s}){r&&wz(r);function i(c,d){let h;const p={...A.useContext(H2),...c,layoutId:Dz(c)},{isStatic:m}=p,x=kz(c),v=n(c,m);if(!m&&w2){Fz();const _=Oz(p);h=_.MeasureLayout,x.visualElement=Pz(s,v,p,e,_.ProjectionNode)}return o.jsxs(Xg.Provider,{value:x,children:[h&&x.visualElement?o.jsx(h,{visualElement:x.visualElement,...p}):null,t(s,c,Cz(v,x.visualElement,d),v,m,x.visualElement)]})}i.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const a=A.forwardRef(i);return a[Sz]=s,a}function Dz({layoutId:r}){const e=A.useContext(v2).id;return e&&r!==void 0?e+"-"+r:r}function Fz(r,e){A.useContext(JC).strict}function Oz(r){const{drag:e,layout:t}=pd;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e?.isEnabled(r)||t?.isEnabled(r)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const _h={};function Lz(r){for(const e in r)_h[e]=r[e],C2(e)&&(_h[e].isCSSVariable=!0)}function s6(r,{layout:e,layoutId:t}){return Rd.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!_h[r]||r==="opacity")}const Mz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Vz=jd.length;function $z(r,e,t){let n="",s=!0;for(let i=0;i<Vz;i++){const a=jd[i],c=r[a];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(a.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||t){const h=qC(c,B2[a]);if(!d){s=!1;const p=Mz[a]||a;n+=`${p}(${h}) `}t&&(e[a]=h)}}return n=n.trim(),t?n=t(e,s?"":n):s&&(n="none"),n}function K2(r,e,t){const{style:n,vars:s,transformOrigin:i}=r;let a=!1,c=!1;for(const d in e){const h=e[d];if(Rd.has(d)){a=!0;continue}else if(C2(d)){s[d]=h;continue}else{const p=qC(h,B2[d]);d.startsWith("origin")?(c=!0,i[d]=p):n[d]=p}}if(e.transform||(a||t?n.transform=$z(e,r.transform,t):n.transform&&(n.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:p=0}=i;n.transformOrigin=`${d} ${h} ${p}`}}const Y2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function i6(r,e,t){for(const n in e)!ss(e[n])&&!s6(n,t)&&(r[n]=e[n])}function Bz({transformTemplate:r},e){return A.useMemo(()=>{const t=Y2();return K2(t,e,r),Object.assign({},t.vars,t.style)},[e])}function Uz(r,e){const t=r.style||{},n={};return i6(n,t,r),Object.assign(n,Bz(r,e)),n}function zz(r,e){const t={},n=Uz(r,e);return r.drag&&r.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(t.tabIndex=0),t.style=n,t}const Hz={offset:"stroke-dashoffset",array:"stroke-dasharray"},Wz={offset:"strokeDashoffset",array:"strokeDasharray"};function qz(r,e,t=1,n=0,s=!0){r.pathLength=1;const i=s?Hz:Wz;r[i.offset]=Lt.transform(-n);const a=Lt.transform(e),c=Lt.transform(t);r[i.array]=`${a} ${c}`}function a6(r,{attrX:e,attrY:t,attrScale:n,pathLength:s,pathSpacing:i=1,pathOffset:a=0,...c},d,h,p){if(K2(r,c,h),d){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:m,style:x}=r;m.transform&&(x.transform=m.transform,delete m.transform),(x.transform||m.transformOrigin)&&(x.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),x.transform&&(x.transformBox=p?.transformBox??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),n!==void 0&&(m.scale=n),s!==void 0&&qz(m,s,i,a,!1)}const o6=()=>({...Y2(),attrs:{}}),l6=r=>typeof r=="string"&&r.toLowerCase()==="svg";function Gz(r,e,t,n){const s=A.useMemo(()=>{const i=o6();return a6(i,e,l6(n),r.transformTemplate,r.style),{...i.attrs,style:{...i.style}}},[e]);if(r.style){const i={};i6(i,r.style,r),s.style={...i,...s.style}}return s}const Kz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function X2(r){return typeof r!="string"||r.includes("-")?!1:!!(Kz.indexOf(r)>-1||/[A-Z]/u.test(r))}function Yz(r=!1){return(t,n,s,{latestValues:i},a)=>{const d=(X2(t)?Gz:zz)(n,i,a,t),h=Tz(n,typeof t=="string",r),p=t!==A.Fragment?{...h,...d,ref:s}:{},{children:m}=n,x=A.useMemo(()=>ss(m)?m.get():m,[m]);return A.createElement(t,{...p,children:x})}}function CA(r){const e=[{},{}];return r?.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function Q2(r,e,t,n){if(typeof e=="function"){const[s,i]=CA(n);e=e(t!==void 0?t:r.custom,s,i)}if(typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"){const[s,i]=CA(n);e=e(t!==void 0?t:r.custom,s,i)}return e}function dm(r){return ss(r)?r.get():r}function Xz({scrapeMotionValuesFromProps:r,createRenderState:e},t,n,s){return{latestValues:Qz(t,n,s,r),renderState:e()}}const c6=r=>(e,t)=>{const n=A.useContext(Xg),s=A.useContext(Yg),i=()=>Xz(r,e,n,s);return t?i():b2(i)};function Qz(r,e,t,n){const s={},i=n(r,{});for(const x in i)s[x]=dm(i[x]);let{initial:a,animate:c}=r;const d=Jg(r),h=e6(r);e&&h&&!d&&r.inherit!==!1&&(a===void 0&&(a=e.initial),c===void 0&&(c=e.animate));let p=t?t.initial===!1:!1;p=p||a===!1;const m=p?c:a;if(m&&typeof m!="boolean"&&!Qg(m)){const x=Array.isArray(m)?m:[m];for(let v=0;v<x.length;v++){const _=Q2(r,x[v]);if(_){const{transitionEnd:w,transition:E,...R}=_;for(const C in R){let V=R[C];if(Array.isArray(V)){const L=p?V.length-1:0;V=V[L]}V!==null&&(s[C]=V)}for(const C in w)s[C]=w[C]}}}return s}function J2(r,e,t){const{style:n}=r,s={};for(const i in n)(ss(n[i])||e.style&&ss(e.style[i])||s6(i,r)||t?.getValue(i)?.liveStyle!==void 0)&&(s[i]=n[i]);return s}const Jz={useVisualState:c6({scrapeMotionValuesFromProps:J2,createRenderState:Y2})};function u6(r,e,t){const n=J2(r,e,t);for(const s in r)if(ss(r[s])||ss(e[s])){const i=jd.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=r[s]}return n}const Zz={useVisualState:c6({scrapeMotionValuesFromProps:u6,createRenderState:o6})};function eH(r,e){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const a={...X2(n)?Zz:Jz,preloadedFeatures:r,useRender:Yz(s),createVisualElement:e,Component:n};return Rz(a)}}function Eh(r,e,t){const n=r.getProps();return Q2(n,e,t!==void 0?t:n.custom,r)}const A1=r=>Array.isArray(r);function tH(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,fd(t))}function rH(r){return A1(r)?r[r.length-1]||0:r}function nH(r,e){const t=Eh(r,e);let{transitionEnd:n={},transition:s={},...i}=t||{};i={...i,...n};for(const a in i){const c=rH(i[a]);tH(r,a,c)}}function sH(r){return!!(ss(r)&&r.add)}function N1(r,e){const t=r.getValue("willChange");if(sH(t))return t.add(e);if(!t&&so.WillChange){const n=new so.WillChange("auto");r.addValue("willChange",n),n.add(e)}}function d6(r){return r.props[t6]}const iH=r=>r!==null;function aH(r,{repeat:e,repeatType:t="loop"},n){const s=r.filter(iH),i=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[i]}const oH={type:"spring",stiffness:500,damping:25,restSpeed:10},lH=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),cH={type:"keyframes",duration:.8},uH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},dH=(r,{keyframes:e})=>e.length>2?cH:Rd.has(r)?r.startsWith("scale")?lH(e[1]):oH:uH;function hH({when:r,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:c,from:d,elapsed:h,...p}){return!!Object.keys(p).length}const Z2=(r,e,t,n={},s,i)=>a=>{const c=$2(n,r)||{},d=c.delay||n.delay||0;let{elapsed:h=0}=n;h=h-fa(d);const p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:x=>{e.set(x),c.onUpdate&&c.onUpdate(x)},onComplete:()=>{a(),c.onComplete&&c.onComplete()},name:r,motionValue:e,element:i?void 0:s};hH(c)||Object.assign(p,dH(r,p)),p.duration&&(p.duration=fa(p.duration)),p.repeatDelay&&(p.repeatDelay=fa(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(m=!0)),(so.instantAnimations||so.skipAnimations)&&(m=!0,p.duration=0,p.delay=0),p.allowFlatten=!c.type&&!c.ease,m&&!i&&e.get()!==void 0){const x=aH(p.keyframes,c);if(x!==void 0){Yr.update(()=>{p.onUpdate(x),p.onComplete()});return}}return c.isSync?new L2(p):new qU(p)};function fH({protectedKeys:r,needsAnimating:e},t){const n=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function h6(r,e,{delay:t=0,transitionOverride:n,type:s}={}){let{transition:i=r.getDefaultTransition(),transitionEnd:a,...c}=e;n&&(i=n);const d=[],h=s&&r.animationState&&r.animationState.getState()[s];for(const p in c){const m=r.getValue(p,r.latestValues[p]??null),x=c[p];if(x===void 0||h&&fH(h,p))continue;const v={delay:t,...$2(i||{},p)},_=m.get();if(_!==void 0&&!m.isAnimating&&!Array.isArray(x)&&x===_&&!v.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const R=d6(r);if(R){const C=window.MotionHandoffAnimation(R,p,Yr);C!==null&&(v.startTime=C,w=!0)}}N1(r,p),m.start(Z2(p,m,x,r.shouldReduceMotion&&BC.has(p)?{type:!1}:v,r,w));const E=m.animation;E&&d.push(E)}return a&&Promise.all(d).then(()=>{Yr.update(()=>{a&&nH(r,a)})}),d}function k1(r,e,t={}){const n=Eh(r,e,t.type==="exit"?r.presenceContext?.custom:void 0);let{transition:s=r.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(s=t.transitionOverride);const i=n?()=>Promise.all(h6(r,n,t)):()=>Promise.resolve(),a=r.variantChildren&&r.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:m}=s;return pH(r,e,h+d,p,m,t)}:()=>Promise.resolve(),{when:c}=s;if(c){const[d,h]=c==="beforeChildren"?[i,a]:[a,i];return d().then(()=>h())}else return Promise.all([i(),a(t.delay)])}function pH(r,e,t=0,n=0,s=1,i){const a=[],c=(r.variantChildren.size-1)*n,d=s===1?(h=0)=>h*n:(h=0)=>c-h*n;return Array.from(r.variantChildren).sort(mH).forEach((h,p)=>{h.notify("AnimationStart",e),a.push(k1(h,e,{...i,delay:t+d(p)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(a)}function mH(r,e){return r.sortNodePosition(e)}function gH(r,e,t={}){r.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(i=>k1(r,i,t));n=Promise.all(s)}else if(typeof e=="string")n=k1(r,e,t);else{const s=typeof e=="function"?Eh(r,e,t.custom):e;n=Promise.all(h6(r,s,t))}return n.then(()=>{r.notify("AnimationComplete",e)})}function f6(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let n=0;n<t;n++)if(e[n]!==r[n])return!1;return!0}const xH=q2.length;function p6(r){if(!r)return;if(!r.isControllingVariants){const t=r.parent?p6(r.parent)||{}:{};return r.props.initial!==void 0&&(t.initial=r.props.initial),t}const e={};for(let t=0;t<xH;t++){const n=q2[t],s=r.props[n];(wh(s)||s===!1)&&(e[n]=s)}return e}const yH=[...W2].reverse(),vH=W2.length;function bH(r){return e=>Promise.all(e.map(({animation:t,options:n})=>gH(r,t,n)))}function wH(r){let e=bH(r),t=IA(),n=!0;const s=d=>(h,p)=>{const m=Eh(r,p,d==="exit"?r.presenceContext?.custom:void 0);if(m){const{transition:x,transitionEnd:v,..._}=m;h={...h,..._,...v}}return h};function i(d){e=d(r)}function a(d){const{props:h}=r,p=p6(r.parent)||{},m=[],x=new Set;let v={},_=1/0;for(let E=0;E<vH;E++){const R=yH[E],C=t[R],V=h[R]!==void 0?h[R]:p[R],L=wh(V),K=R===d?C.isActive:null;K===!1&&(_=E);let H=V===p[R]&&V!==h[R]&&L;if(H&&n&&r.manuallyAnimateOnMount&&(H=!1),C.protectedKeys={...v},!C.isActive&&K===null||!V&&!C.prevProp||Qg(V)||typeof V=="boolean")continue;const S=_H(C.prevProp,V);let k=S||R===d&&C.isActive&&!H&&L||E>_&&L,P=!1;const j=Array.isArray(V)?V:[V];let M=j.reduce(s(R),{});K===!1&&(M={});const{prevResolvedValues:D={}}=C,O={...D,...M},pe=Me=>{k=!0,x.has(Me)&&(P=!0,x.delete(Me)),C.needsAnimating[Me]=!0;const Ee=r.getValue(Me);Ee&&(Ee.liveStyle=!1)};for(const Me in O){const Ee=M[Me],Te=D[Me];if(v.hasOwnProperty(Me))continue;let Ne=!1;A1(Ee)&&A1(Te)?Ne=!f6(Ee,Te):Ne=Ee!==Te,Ne?Ee!=null?pe(Me):x.add(Me):Ee!==void 0&&x.has(Me)?pe(Me):C.protectedKeys[Me]=!0}C.prevProp=V,C.prevResolvedValues=M,C.isActive&&(v={...v,...M}),n&&r.blockInitialAnimation&&(k=!1),k&&(!(H&&S)||P)&&m.push(...j.map(Me=>({animation:Me,options:{type:R}})))}if(x.size){const E={};if(typeof h.initial!="boolean"){const R=Eh(r,Array.isArray(h.initial)?h.initial[0]:h.initial);R&&R.transition&&(E.transition=R.transition)}x.forEach(R=>{const C=r.getBaseTarget(R),V=r.getValue(R);V&&(V.liveStyle=!0),E[R]=C??null}),m.push({animation:E})}let w=!!m.length;return n&&(h.initial===!1||h.initial===h.animate)&&!r.manuallyAnimateOnMount&&(w=!1),n=!1,w?e(m):Promise.resolve()}function c(d,h){if(t[d].isActive===h)return Promise.resolve();r.variantChildren?.forEach(m=>m.animationState?.setActive(d,h)),t[d].isActive=h;const p=a(d);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:a,setActive:c,setAnimateFunction:i,getState:()=>t,reset:()=>{t=IA(),n=!0}}}function _H(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!f6(e,r):!1}function $l(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function IA(){return{animate:$l(!0),whileInView:$l(),whileHover:$l(),whileTap:$l(),whileDrag:$l(),whileFocus:$l(),exit:$l()}}class vl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class EH extends vl{constructor(e){super(e),e.animationState||(e.animationState=wH(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Qg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let TH=0;class AH extends vl{constructor(){super(...arguments),this.id=TH++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const NH={animation:{Feature:EH},exit:{Feature:AH}};function Th(r,e,t,n={passive:!0}){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t)}function uf(r){return{point:{x:r.pageX,y:r.pageY}}}const kH=r=>e=>z2(e)&&r(e,uf(e));function H0(r,e,t,n){return Th(r,e,kH(t),n)}function m6({top:r,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:r,max:n}}}function SH({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function CH(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),n=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}const g6=1e-4,IH=1-g6,PH=1+g6,x6=.01,jH=0-x6,RH=0+x6;function gs(r){return r.max-r.min}function DH(r,e,t){return Math.abs(r-e)<=t}function PA(r,e,t,n=.5){r.origin=n,r.originPoint=Kr(e.min,e.max,r.origin),r.scale=gs(t)/gs(e),r.translate=Kr(t.min,t.max,r.origin)-r.originPoint,(r.scale>=IH&&r.scale<=PH||isNaN(r.scale))&&(r.scale=1),(r.translate>=jH&&r.translate<=RH||isNaN(r.translate))&&(r.translate=0)}function W0(r,e,t,n){PA(r.x,e.x,t.x,n?n.originX:void 0),PA(r.y,e.y,t.y,n?n.originY:void 0)}function jA(r,e,t){r.min=t.min+e.min,r.max=r.min+gs(e)}function FH(r,e,t){jA(r.x,e.x,t.x),jA(r.y,e.y,t.y)}function RA(r,e,t){r.min=e.min-t.min,r.max=r.min+gs(e)}function q0(r,e,t){RA(r.x,e.x,t.x),RA(r.y,e.y,t.y)}const DA=()=>({translate:0,scale:1,origin:0,originPoint:0}),$u=()=>({x:DA(),y:DA()}),FA=()=>({min:0,max:0}),rn=()=>({x:FA(),y:FA()});function di(r){return[r("x"),r("y")]}function fv(r){return r===void 0||r===1}function S1({scale:r,scaleX:e,scaleY:t}){return!fv(r)||!fv(e)||!fv(t)}function Hl(r){return S1(r)||y6(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function y6(r){return OA(r.x)||OA(r.y)}function OA(r){return r&&r!=="0%"}function Qm(r,e,t){const n=r-t,s=e*n;return t+s}function LA(r,e,t,n,s){return s!==void 0&&(r=Qm(r,s,n)),Qm(r,t,n)+e}function C1(r,e=0,t=1,n,s){r.min=LA(r.min,e,t,n,s),r.max=LA(r.max,e,t,n,s)}function v6(r,{x:e,y:t}){C1(r.x,e.translate,e.scale,e.originPoint),C1(r.y,t.translate,t.scale,t.originPoint)}const MA=.999999999999,VA=1.0000000000001;function OH(r,e,t,n=!1){const s=t.length;if(!s)return;e.x=e.y=1;let i,a;for(let c=0;c<s;c++){i=t[c],a=i.projectionDelta;const{visualElement:d}=i.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Uu(r,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,v6(r,a)),n&&Hl(i.latestValues)&&Uu(r,i.latestValues))}e.x<VA&&e.x>MA&&(e.x=1),e.y<VA&&e.y>MA&&(e.y=1)}function Bu(r,e){r.min=r.min+e,r.max=r.max+e}function $A(r,e,t,n,s=.5){const i=Kr(r.min,r.max,s);C1(r,e,t,i,n)}function Uu(r,e){$A(r.x,e.x,e.scaleX,e.scale,e.originX),$A(r.y,e.y,e.scaleY,e.scale,e.originY)}function b6(r,e){return m6(CH(r.getBoundingClientRect(),e))}function LH(r,e,t){const n=b6(r,t),{scroll:s}=e;return s&&(Bu(n.x,s.offset.x),Bu(n.y,s.offset.y)),n}const w6=({current:r})=>r?r.ownerDocument.defaultView:null,BA=(r,e)=>Math.abs(r-e);function MH(r,e){const t=BA(r.x,e.x),n=BA(r.y,e.y);return Math.sqrt(t**2+n**2)}class _6{constructor(e,t,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=mv(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,v=MH(m.offset,{x:0,y:0})>=3;if(!x&&!v)return;const{point:_}=m,{timestamp:w}=Vn;this.history.push({..._,timestamp:w});const{onStart:E,onMove:R}=this.handlers;x||(E&&E(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,m)},this.handlePointerMove=(m,x)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=pv(x,this.transformPagePoint),Yr.update(this.updatePoint,!0)},this.handlePointerUp=(m,x)=>{this.end();const{onEnd:v,onSessionEnd:_,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=mv(m.type==="pointercancel"?this.lastMoveEventInfo:pv(x,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,E),_&&_(m,E)},!z2(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.contextWindow=s||window;const a=uf(e),c=pv(a,this.transformPagePoint),{point:d}=c,{timestamp:h}=Vn;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=t;p&&p(e,mv(c,this.history)),this.removeListeners=of(H0(this.contextWindow,"pointermove",this.handlePointerMove),H0(this.contextWindow,"pointerup",this.handlePointerUp),H0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ll(this.updatePoint)}}function pv(r,e){return e?{point:e(r.point)}:r}function UA(r,e){return{x:r.x-e.x,y:r.y-e.y}}function mv({point:r},e){return{point:r,delta:UA(r,E6(e)),offset:UA(r,VH(e)),velocity:$H(e,.1)}}function VH(r){return r[0]}function E6(r){return r[r.length-1]}function $H(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,n=null;const s=E6(r);for(;t>=0&&(n=r[t],!(s.timestamp-n.timestamp>fa(e)));)t--;if(!n)return{x:0,y:0};const i=pa(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function BH(r,{min:e,max:t},n){return e!==void 0&&r<e?r=n?Kr(e,r,n.min):Math.max(r,e):t!==void 0&&r>t&&(r=n?Kr(t,r,n.max):Math.min(r,t)),r}function zA(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function UH(r,{top:e,left:t,bottom:n,right:s}){return{x:zA(r.x,t,s),y:zA(r.y,e,n)}}function HA(r,e){let t=e.min-r.min,n=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,n]=[n,t]),{min:t,max:n}}function zH(r,e){return{x:HA(r.x,e.x),y:HA(r.y,e.y)}}function HH(r,e){let t=.5;const n=gs(r),s=gs(e);return s>n?t=yh(e.min,e.max-n,r.min):n>s&&(t=yh(r.min,r.max-s,e.min)),no(0,1,t)}function WH(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const I1=.35;function qH(r=I1){return r===!1?r=0:r===!0&&(r=I1),{x:WA(r,"left","right"),y:WA(r,"top","bottom")}}function WA(r,e,t){return{min:qA(r,e),max:qA(r,t)}}function qA(r,e){return typeof r=="number"?r:r[e]||0}const GH=new WeakMap;class KH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=rn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(uf(p).point)},i=(p,m)=>{const{drag:x,dragPropagation:v,onDragStart:_}=this.getProps();if(x&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=lz(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),di(E=>{let R=this.getAxisMotionValue(E).get()||0;if(ma.test(R)){const{projection:C}=this.visualElement;if(C&&C.layout){const V=C.layout.layoutBox[E];V&&(R=gs(V)*(parseFloat(R)/100))}}this.originPoint[E]=R}),_&&Yr.postRender(()=>_(p,m)),N1(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},a=(p,m)=>{const{dragPropagation:x,dragDirectionLock:v,onDirectionLock:_,onDrag:w}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:E}=m;if(v&&this.currentDirection===null){this.currentDirection=YH(E),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",m.point,E),this.updateAxis("y",m.point,E),this.visualElement.render(),w&&w(p,m)},c=(p,m)=>this.stop(p,m),d=()=>di(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new _6(e,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:w6(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Yr.postRender(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:s}=this.getProps();if(!n||!Lp(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=BH(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Vu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=UH(n.layoutBox,e):this.constraints=!1,this.elastic=qH(t),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&di(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=WH(n.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Vu(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=LH(n,s.root,this.visualElement.getTransformPagePoint());let a=zH(s.layout.layoutBox,i);if(t){const c=t(SH(a));this.hasMutatedConstraints=!!c,c&&(a=m6(c))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},h=di(p=>{if(!Lp(p,t,this.currentDirection))return;let m=d&&d[p]||{};a&&(m={min:0,max:0});const x=s?200:1e6,v=s?40:1e7,_={type:"inertia",velocity:n?e[p]:0,bounceStiffness:x,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(p,_)});return Promise.all(h).then(c)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return N1(this.visualElement,e),n.start(Z2(e,n,0,t,this.visualElement,!1))}stopAnimation(){di(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){di(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[t];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){di(t=>{const{drag:n}=this.getProps();if(!Lp(t,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(t);if(s&&s.layout){const{min:a,max:c}=s.layout.layoutBox[t];i.set(e[t]-Kr(a,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Vu(t)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};di(a=>{const c=this.getAxisMotionValue(a);if(c&&this.constraints!==!1){const d=c.get();s[a]=HH({min:d,max:d},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),di(a=>{if(!Lp(a,e,null))return;const c=this.getAxisMotionValue(a),{min:d,max:h}=this.constraints[a];c.set(Kr(d,h,s[a]))})}addListeners(){if(!this.visualElement.current)return;GH.set(this.visualElement,this);const e=this.visualElement.current,t=H0(e,"pointerdown",d=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();Vu(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Yr.read(n);const a=Th(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(di(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=d[p].translate,m.set(m.get()+d[p].translate))}),this.visualElement.render())}));return()=>{a(),t(),i(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=I1,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:c}}}function Lp(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function YH(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class XH extends vl{constructor(e){super(e),this.removeGroupControls=mi,this.removeListeners=mi,this.controls=new KH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||mi}unmount(){this.removeGroupControls(),this.removeListeners()}}const GA=r=>(e,t)=>{r&&Yr.postRender(()=>r(e,t))};class QH extends vl{constructor(){super(...arguments),this.removePointerDownListener=mi}onPointerDown(e){this.session=new _6(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:w6(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:GA(e),onStart:GA(t),onMove:n,onEnd:(i,a)=>{delete this.session,s&&Yr.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=H0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function KA(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const _0={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(Lt.test(r))r=parseFloat(r);else return r;const t=KA(r,e.target.x),n=KA(r,e.target.y);return`${t}% ${n}%`}},JH={correct:(r,{treeScale:e,projectionDelta:t})=>{const n=r,s=cl.parse(r);if(s.length>5)return n;const i=cl.createTransformer(r),a=typeof s[0]!="number"?1:0,c=t.x.scale*e.x,d=t.y.scale*e.y;s[0+a]/=c,s[1+a]/=d;const h=Kr(c,d,.5);return typeof s[2+a]=="number"&&(s[2+a]/=h),typeof s[3+a]=="number"&&(s[3+a]/=h),i(s)}};class ZH extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=e;Lz(eW),i&&(t.group&&t.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),hm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:s,isPresent:i}=this.props,{projection:a}=n;return a&&(a.isPresent=i,s||e.layoutDependency!==t||t===void 0||e.isPresent!==i?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||Yr.postRender(()=>{const c=a.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),U2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function T6(r){const[e,t]=QC(),n=A.useContext(v2);return o.jsx(ZH,{...r,layoutGroup:n,switchLayoutGroup:A.useContext(r6),isPresent:e,safeToRemove:t})}const eW={borderRadius:{..._0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_0,borderTopRightRadius:_0,borderBottomLeftRadius:_0,borderBottomRightRadius:_0,boxShadow:JH};function tW(r,e,t){const n=ss(r)?r:fd(r);return n.start(Z2("",n,e,t)),n.animation}const rW=(r,e)=>r.depth-e.depth;class nW{constructor(){this.children=[],this.isDirty=!1}add(e){_2(this.children,e),this.isDirty=!0}remove(e){E2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(rW),this.isDirty=!1,this.children.forEach(e)}}function sW(r,e){const t=Ss.now(),n=({timestamp:s})=>{const i=s-t;i>=e&&(ll(n),r(i-e))};return Yr.setup(n,!0),()=>ll(n)}const A6=["TopLeft","TopRight","BottomLeft","BottomRight"],iW=A6.length,YA=r=>typeof r=="string"?parseFloat(r):r,XA=r=>typeof r=="number"||Lt.test(r);function aW(r,e,t,n,s,i){s?(r.opacity=Kr(0,t.opacity??1,oW(n)),r.opacityExit=Kr(e.opacity??1,0,lW(n))):i&&(r.opacity=Kr(e.opacity??1,t.opacity??1,n));for(let a=0;a<iW;a++){const c=`border${A6[a]}Radius`;let d=QA(e,c),h=QA(t,c);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||XA(d)===XA(h)?(r[c]=Math.max(Kr(YA(d),YA(h),n),0),(ma.test(h)||ma.test(d))&&(r[c]+="%")):r[c]=h}(e.rotate||t.rotate)&&(r.rotate=Kr(e.rotate||0,t.rotate||0,n))}function QA(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const oW=N6(0,.5,yC),lW=N6(.5,.95,mi);function N6(r,e,t){return n=>n<r?0:n>e?1:t(yh(r,e,n))}function JA(r,e){r.min=e.min,r.max=e.max}function ci(r,e){JA(r.x,e.x),JA(r.y,e.y)}function ZA(r,e){r.translate=e.translate,r.scale=e.scale,r.originPoint=e.originPoint,r.origin=e.origin}function eN(r,e,t,n,s){return r-=e,r=Qm(r,1/t,n),s!==void 0&&(r=Qm(r,1/s,n)),r}function cW(r,e=0,t=1,n=.5,s,i=r,a=r){if(ma.test(e)&&(e=parseFloat(e),e=Kr(a.min,a.max,e/100)-a.min),typeof e!="number")return;let c=Kr(i.min,i.max,n);r===i&&(c-=e),r.min=eN(r.min,e,t,c,s),r.max=eN(r.max,e,t,c,s)}function tN(r,e,[t,n,s],i,a){cW(r,e[t],e[n],e[s],e.scale,i,a)}const uW=["x","scaleX","originX"],dW=["y","scaleY","originY"];function rN(r,e,t,n){tN(r.x,e,uW,t?t.x:void 0,n?n.x:void 0),tN(r.y,e,dW,t?t.y:void 0,n?n.y:void 0)}function nN(r){return r.translate===0&&r.scale===1}function k6(r){return nN(r.x)&&nN(r.y)}function sN(r,e){return r.min===e.min&&r.max===e.max}function hW(r,e){return sN(r.x,e.x)&&sN(r.y,e.y)}function iN(r,e){return Math.round(r.min)===Math.round(e.min)&&Math.round(r.max)===Math.round(e.max)}function S6(r,e){return iN(r.x,e.x)&&iN(r.y,e.y)}function aN(r){return gs(r.x)/gs(r.y)}function oN(r,e){return r.translate===e.translate&&r.scale===e.scale&&r.originPoint===e.originPoint}class fW{constructor(){this.members=[]}add(e){_2(this.members,e),e.scheduleRender()}remove(e){if(E2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let n;for(let s=t;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function pW(r,e,t){let n="";const s=r.x.translate/e.x,i=r.y.translate/e.y,a=t?.z||0;if((s||i||a)&&(n=`translate3d(${s}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:p,rotateX:m,rotateY:x,skewX:v,skewY:_}=t;h&&(n=`perspective(${h}px) ${n}`),p&&(n+=`rotate(${p}deg) `),m&&(n+=`rotateX(${m}deg) `),x&&(n+=`rotateY(${x}deg) `),v&&(n+=`skewX(${v}deg) `),_&&(n+=`skewY(${_}deg) `)}const c=r.x.scale*e.x,d=r.y.scale*e.y;return(c!==1||d!==1)&&(n+=`scale(${c}, ${d})`),n||"none"}const gv=["","X","Y","Z"],mW={visibility:"hidden"},gW=1e3;let xW=0;function xv(r,e,t,n){const{latestValues:s}=e;s[r]&&(t[r]=s[r],e.setStaticValue(r,0),n&&(n[r]=0))}function C6(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:e}=r.options;if(!e)return;const t=d6(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:i}=r.options;window.MotionCancelOptimisedAnimation(t,"transform",Yr,!(s||i))}const{parent:n}=r;n&&!n.hasCheckedOptimisedAppear&&C6(n)}function I6({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(a={},c=e?.()){this.id=xW++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(bW),this.nodes.forEach(AW),this.nodes.forEach(NW),this.nodes.forEach(wW)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new nW)}addEventListener(a,c){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new N2),this.eventHandlers.get(a).add(c)}notifyListeners(a,...c){const d=this.eventHandlers.get(a);d&&d.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=XC(a)&&!pz(a),this.instance=a;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),r){let p;const m=()=>this.root.updateBlockedByResize=!1;r(a,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=sW(m,250),hm.hasAnimatedSinceResize&&(hm.hasAnimatedSinceResize=!1,this.nodes.forEach(cN))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:x,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||h.getDefaultTransition()||PW,{onLayoutAnimationStart:w,onLayoutAnimationComplete:E}=h.getProps(),R=!this.targetLayout||!S6(this.targetLayout,v),C=!m&&x;if(this.options.layoutRoot||this.resumeFrom||C||m&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,C);const V={...$2(_,"layout"),onPlay:w,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V)}else m||cN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ll(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(kW),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&C6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lN);return}this.isUpdating||this.nodes.forEach(EW),this.isUpdating=!1,this.nodes.forEach(TW),this.nodes.forEach(yW),this.nodes.forEach(vW),this.clearAllSnapshots();const c=Ss.now();Vn.delta=no(0,1e3/60,c-Vn.timestamp),Vn.timestamp=c,Vn.isProcessing=!0,ov.update.process(Vn),ov.preRender.process(Vn),ov.render.process(Vn),Vn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,U2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(_W),this.sharedNodes.forEach(SW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Yr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Yr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!gs(this.snapshot.measuredBox.x)&&!gs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=rn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(c=!1),c&&this.instance){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!k6(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;a&&this.instance&&(c||Hl(this.latestValues)||p)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return a&&(d=this.removeTransform(d)),jW(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return rn();const c=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(RW))){const{scroll:h}=this.root;h&&(Bu(c.x,h.offset.x),Bu(c.y,h.offset.y))}return c}removeElementScroll(a){const c=rn();if(ci(c,a),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:p,options:m}=h;h!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&ci(c,a),Bu(c.x,p.offset.x),Bu(c.y,p.offset.y))}return c}applyTransform(a,c=!1){const d=rn();ci(d,a);for(let h=0;h<this.path.length;h++){const p=this.path[h];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Uu(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Hl(p.latestValues)&&Uu(d,p.latestValues)}return Hl(this.latestValues)&&Uu(d,this.latestValues),d}removeTransform(a){const c=rn();ci(c,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!Hl(h.latestValues))continue;S1(h.latestValues)&&h.updateSnapshot();const p=rn(),m=h.measurePageBox();ci(p,m),rN(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return Hl(this.latestValues)&&rN(c,this.latestValues),c}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(a||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=Vn.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rn(),this.relativeTargetOrigin=rn(),q0(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),ci(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=rn(),this.targetWithTransforms=rn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),FH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ci(this.target,this.layout.layoutBox),v6(this.target,this.targetDelta)):ci(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rn(),this.relativeTargetOrigin=rn(),q0(this.relativeTargetOrigin,this.target,x.target),ci(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||S1(this.parent.latestValues)||y6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const a=this.getLead(),c=!!this.resumingFrom||this!==a;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Vn.timestamp&&(d=!1),d)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;ci(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,x=this.treeScale.y;OH(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=rn());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ZA(this.prevProjectionDelta.x,this.projectionDelta.x),ZA(this.prevProjectionDelta.y,this.projectionDelta.y)),W0(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==x||!oN(this.projectionDelta.x,this.prevProjectionDelta.x)||!oN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$u(),this.projectionDelta=$u(),this.projectionDeltaWithTransform=$u()}setAnimationOrigin(a,c=!1){const d=this.snapshot,h=d?d.latestValues:{},p={...this.latestValues},m=$u();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const x=rn(),v=d?d.source:void 0,_=this.layout?this.layout.source:void 0,w=v!==_,E=this.getStack(),R=!E||E.members.length<=1,C=!!(w&&!R&&this.options.crossfade===!0&&!this.path.some(IW));this.animationProgress=0;let V;this.mixTargetDelta=L=>{const K=L/1e3;uN(m.x,a.x,K),uN(m.y,a.y,K),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(q0(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),CW(this.relativeTarget,this.relativeTargetOrigin,x,K),V&&hW(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=rn()),ci(V,this.relativeTarget)),w&&(this.animationValues=p,aW(p,h,this.latestValues,K,C,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(!1),this.resumingFrom?.currentAnimation?.stop(!1),this.pendingAnimation&&(ll(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Yr.update(()=>{hm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=fd(0)),this.currentAnimation=tW(this.motionValue,[0,1e3],{...a,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(gW),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:c,target:d,layout:h,latestValues:p}=a;if(!(!c||!d||!h)){if(this!==a&&this.layout&&h&&P6(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||rn();const m=gs(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+m;const x=gs(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+x}ci(c,d),Uu(c,p),W0(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(a,c){this.sharedNodes.has(a)||this.sharedNodes.set(a,new fW),this.sharedNodes.get(a).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:c,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let c=!1;const{latestValues:d}=a;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const h={};d.z&&xv("z",a,h,this.animationValues);for(let p=0;p<gv.length;p++)xv(`rotate${gv[p]}`,a,h,this.animationValues),xv(`skew${gv[p]}`,a,h,this.animationValues);a.render();for(const p in h)a.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return mW;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=dm(a?.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=dm(a?.pointerEvents)||""),this.hasProjected&&!Hl(this.latestValues)&&(v.transform=d?d({},""):"none",this.hasProjected=!1),v}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=pW(this.projectionDeltaWithTransform,this.treeScale,p),d&&(c.transform=d(p,c.transform));const{x:m,y:x}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${x.origin*100}% 0`,h.animationValues?c.opacity=h===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const v in _h){if(p[v]===void 0)continue;const{correct:_,applyTo:w,isCSSVariable:E}=_h[v],R=c.transform==="none"?p[v]:_(p[v],h);if(w){const C=w.length;for(let V=0;V<C;V++)c[w[V]]=R}else E?this.options.visualElement.renderState.vars[v]=R:c[v]=R}return this.options.layoutId&&(c.pointerEvents=h===this?dm(a?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop(!1)),this.root.nodes.forEach(lN),this.root.sharedNodes.clear()}}}function yW(r){r.updateLayout()}function vW(r){const e=r.resumeFrom?.snapshot||r.snapshot;if(r.isLead()&&r.layout&&e&&r.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=r.layout,{animationType:s}=r.options,i=e.source!==r.layout.source;s==="size"?di(p=>{const m=i?e.measuredBox[p]:e.layoutBox[p],x=gs(m);m.min=t[p].min,m.max=m.min+x}):P6(s,e.layoutBox,t)&&di(p=>{const m=i?e.measuredBox[p]:e.layoutBox[p],x=gs(t[p]);m.max=m.min+x,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[p].max=r.relativeTarget[p].min+x)});const a=$u();W0(a,t,e.layoutBox);const c=$u();i?W0(c,r.applyTransform(n,!0),e.measuredBox):W0(c,t,e.layoutBox);const d=!k6(a);let h=!1;if(!r.resumeFrom){const p=r.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:x}=p;if(m&&x){const v=rn();q0(v,e.layoutBox,m.layoutBox);const _=rn();q0(_,t,x.layoutBox),S6(v,_)||(h=!0),p.options.layoutRoot&&(r.relativeTarget=_,r.relativeTargetOrigin=v,r.relativeParent=p)}}}r.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:a,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(r.isLead()){const{onExitComplete:t}=r.options;t&&t()}r.options.transition=void 0}function bW(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function wW(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function _W(r){r.clearSnapshot()}function lN(r){r.clearMeasurements()}function EW(r){r.isLayoutDirty=!1}function TW(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function cN(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function AW(r){r.resolveTargetDelta()}function NW(r){r.calcProjection()}function kW(r){r.resetSkewAndRotation()}function SW(r){r.removeLeadSnapshot()}function uN(r,e,t){r.translate=Kr(e.translate,0,t),r.scale=Kr(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function dN(r,e,t,n){r.min=Kr(e.min,t.min,n),r.max=Kr(e.max,t.max,n)}function CW(r,e,t,n){dN(r.x,e.x,t.x,n),dN(r.y,e.y,t.y,n)}function IW(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const PW={duration:.45,ease:[.4,0,.1,1]},hN=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),fN=hN("applewebkit/")&&!hN("chrome/")?Math.round:mi;function pN(r){r.min=fN(r.min),r.max=fN(r.max)}function jW(r){pN(r.x),pN(r.y)}function P6(r,e,t){return r==="position"||r==="preserve-aspect"&&!DH(aN(e),aN(t),.2)}function RW(r){return r!==r.root&&r.scroll?.wasRoot}const DW=I6({attachResizeListener:(r,e)=>Th(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yv={current:void 0},j6=I6({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!yv.current){const r=new DW({});r.mount(window),r.setOptions({layoutScroll:!0}),yv.current=r}return yv.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),FW={pan:{Feature:QH},drag:{Feature:XH,ProjectionNode:j6,MeasureLayout:T6}};function mN(r,e,t){const{props:n}=r;r.animationState&&n.whileHover&&r.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,i=n[s];i&&Yr.postRender(()=>i(e,uf(e)))}class OW extends vl{mount(){const{current:e}=this.node;e&&(this.unmount=cz(e,(t,n)=>(mN(this.node,n,"Start"),s=>mN(this.node,s,"End"))))}unmount(){}}class LW extends vl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=of(Th(this.node.current,"focus",()=>this.onFocus()),Th(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function gN(r,e,t){const{props:n}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&n.whileTap&&r.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),i=n[s];i&&Yr.postRender(()=>i(e,uf(e)))}class MW extends vl{mount(){const{current:e}=this.node;e&&(this.unmount=fz(e,(t,n)=>(gN(this.node,n,"Start"),(s,{success:i})=>gN(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const P1=new WeakMap,vv=new WeakMap,VW=r=>{const e=P1.get(r.target);e&&e(r)},$W=r=>{r.forEach(VW)};function BW({root:r,...e}){const t=r||document;vv.has(t)||vv.set(t,{});const n=vv.get(t),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver($W,{root:r,...e})),n[s]}function UW(r,e,t){const n=BW(e);return P1.set(r,t),n.observe(r),()=>{P1.delete(r),n.unobserve(r)}}const zW={some:0,all:1};class HW extends vl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:s="some",once:i}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:zW[s]},c=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),x=h?p:m;x&&x(d)};return UW(this.node.current,a,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(WW(e,t))&&this.startObserver()}unmount(){}}function WW({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const qW={inView:{Feature:HW},tap:{Feature:MW},focus:{Feature:LW},hover:{Feature:OW}},GW={layout:{ProjectionNode:j6,MeasureLayout:T6}},j1={current:null},R6={current:!1};function KW(){if(R6.current=!0,!!w2)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>j1.current=r.matches;r.addListener(e),e()}else j1.current=!1}const YW=new WeakMap;function XW(r,e,t){for(const n in e){const s=e[n],i=t[n];if(ss(s))r.addValue(n,s);else if(ss(i))r.addValue(n,fd(s,{owner:r}));else if(i!==s)if(r.hasValue(n)){const a=r.getValue(n);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=r.getStaticValue(n);r.addValue(n,fd(a!==void 0?a:s,{owner:r}))}}for(const n in t)e[n]===void 0&&r.removeValue(n);return e}const xN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class QW{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=M2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Ss.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Yr.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=a;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!i,this.isControllingVariants=Jg(t),this.isVariantNode=e6(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in m){const v=m[x];d[x]!==void 0&&ss(v)&&v.set(d[x],!1)}}mount(e){this.current=e,YW.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),R6.current||KW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:j1.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ll(this.notifyUpdate),ll(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Rd.has(e);n&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Yr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),i(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in pd){const t=pd[e];if(!t)continue;const{isEnabled:n,Feature:s}=t;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):rn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<xN.length;n++){const s=xN[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=e[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=XW(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=fd(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(lC(n)||uC(n))?n=parseFloat(n):!gz(n)&&cl.test(t)&&(n=WC(e,t)),this.setBaseTarget(e,ss(n)?n.get():n)),ss(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if(typeof t=="string"||typeof t=="object"){const i=Q2(this.props,t,this.presenceContext?.custom);i&&(n=i[e])}if(t&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ss(s)?s:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new N2),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class D6 extends QW{constructor(){super(...arguments),this.KeyframeResolver=sz}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ss(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function F6(r,{style:e,vars:t},n,s){Object.assign(r.style,e,s&&s.getProjectionStyles(n));for(const i in t)r.style.setProperty(i,t[i])}function JW(r){return window.getComputedStyle(r)}class ZW extends D6{constructor(){super(...arguments),this.type="html",this.renderInstance=F6}readValueFromInstance(e,t){if(Rd.has(t))return this.projection?.isProjecting?v1(t):EU(e,t);{const n=JW(e),s=(C2(t)?n.getPropertyValue(t):n[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return b6(e,t)}build(e,t,n){K2(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return J2(e,t,n)}}const O6=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function eq(r,e,t,n){F6(r,e,void 0,n);for(const s in e.attrs)r.setAttribute(O6.has(s)?s:G2(s),e.attrs[s])}class tq extends D6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=rn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Rd.has(t)){const n=HC(t);return n&&n.default||0}return t=O6.has(t)?t:G2(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return u6(e,t,n)}build(e,t,n){a6(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,s){eq(e,t,n,s)}mount(e){this.isSVGTag=l6(e.tagName),super.mount(e)}}const rq=(r,e)=>X2(r)?new tq(e):new ZW(e,{allowProjection:r!==A.Fragment}),nq=eH({...NH,...qW,...FW,...GW},rq),Z=Az(nq),yN=(r,e,t,n)=>{r.style.transition=`${e} ${t}ms ${n}`},$a=(r,e,t)=>Math.min(Math.max(r,e),t);class sq{constructor(e,t){this.glareAngle=0,this.glareOpacity=0,this.calculateGlareSize=a=>{const{width:c,height:d}=a,h=Math.sqrt(c**2+d**2);return{width:h,height:h}},this.setSize=a=>{const c=this.calculateGlareSize(a);this.glareEl.style.width=`${c.width}px`,this.glareEl.style.height=`${c.height}px`},this.update=(a,c,d,h)=>{this.updateAngle(a,c.glareReverse),this.updateOpacity(a,c,d,h)},this.updateAngle=(a,c)=>{const{xPercentage:d,yPercentage:h}=a,p=180/Math.PI,m=d?Math.atan2(h,-d)*p:0;this.glareAngle=m-(c?180:0)},this.updateOpacity=(a,c,d,h)=>{const{xPercentage:p,yPercentage:m}=a,{glarePosition:x,glareReverse:v,glareMaxOpacity:_}=c,w=d?-1:1,E=h?-1:1,R=v?-1:1;let C=0;switch(x){case"top":C=-p*w*R;break;case"right":C=m*E*R;break;case"bottom":case void 0:C=p*w*R;break;case"left":C=-m*E*R;break;case"all":C=Math.hypot(p,m)}const V=$a(C,0,100);this.glareOpacity=V*_/100},this.render=a=>{const{glareColor:c}=a;this.glareEl.style.transform=`rotate(${this.glareAngle}deg) translate(-50%, -50%)`,this.glareEl.style.opacity=this.glareOpacity.toString(),this.glareEl.style.background=`linear-gradient(0deg, rgba(255,255,255,0) 0%, ${c} 100%)`},this.glareWrapperEl=document.createElement("div"),this.glareEl=document.createElement("div"),this.glareWrapperEl.appendChild(this.glareEl),this.glareWrapperEl.className="glare-wrapper",this.glareEl.className="glare";const n={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden",borderRadius:t,WebkitMaskImage:"-webkit-radial-gradient(white, black)",pointerEvents:"none"},s=this.calculateGlareSize(e),i={position:"absolute",top:"50%",left:"50%",transformOrigin:"0% 0%",pointerEvents:"none",width:`${s.width}px`,height:`${s.height}px`};Object.assign(this.glareWrapperEl.style,n),Object.assign(this.glareEl.style,i)}}class iq{constructor(){this.tiltAngleX=0,this.tiltAngleY=0,this.tiltAngleXPercentage=0,this.tiltAngleYPercentage=0,this.update=(e,t)=>{this.updateTilt(e,t),this.updateTiltManualInput(e,t),this.updateTiltReverse(t),this.updateTiltLimits(t)},this.updateTilt=(e,t)=>{const{xPercentage:n,yPercentage:s}=e,{tiltMaxAngleX:i,tiltMaxAngleY:a}=t;this.tiltAngleX=n*i/100,this.tiltAngleY=s*a/100*-1},this.updateTiltManualInput=(e,t)=>{const{tiltAngleXManual:n,tiltAngleYManual:s,tiltMaxAngleX:i,tiltMaxAngleY:a}=t;(n!==null||s!==null)&&(this.tiltAngleX=n!==null?n:0,this.tiltAngleY=s!==null?s:0,e.xPercentage=100*this.tiltAngleX/i,e.yPercentage=100*this.tiltAngleY/a)},this.updateTiltReverse=e=>{const t=e.tiltReverse?-1:1;this.tiltAngleX=t*this.tiltAngleX,this.tiltAngleY=t*this.tiltAngleY},this.updateTiltLimits=e=>{const{tiltAxis:t}=e;this.tiltAngleX=$a(this.tiltAngleX,-90,90),this.tiltAngleY=$a(this.tiltAngleY,-90,90),t&&(this.tiltAngleX=t==="x"?this.tiltAngleX:0,this.tiltAngleY=t==="y"?this.tiltAngleY:0)},this.updateTiltAnglesPercentage=e=>{const{tiltMaxAngleX:t,tiltMaxAngleY:n}=e;this.tiltAngleXPercentage=this.tiltAngleX/t*100,this.tiltAngleYPercentage=this.tiltAngleY/n*100},this.render=e=>{e.style.transform+=`rotateX(${this.tiltAngleX}deg) rotateY(${this.tiltAngleY}deg) `}}}const aq={scale:1,perspective:1e3,flipVertically:!1,flipHorizontally:!1,reset:!0,transitionEasing:"cubic-bezier(.03,.98,.52,.99)",transitionSpeed:400,trackOnWindow:!1,gyroscope:!1,tiltEnable:!0,tiltReverse:!1,tiltAngleXInitial:0,tiltAngleYInitial:0,tiltMaxAngleX:20,tiltMaxAngleY:20,tiltAxis:void 0,tiltAngleXManual:null,tiltAngleYManual:null,glareEnable:!1,glareMaxOpacity:.7,glareColor:"#ffffff",glarePosition:"bottom",glareReverse:!1,glareBorderRadius:"0"};class L6 extends A.PureComponent{constructor(){super(...arguments),this.wrapperEl={node:null,size:{width:0,height:0,left:0,top:0},clientPosition:{x:null,y:null,xPercentage:0,yPercentage:0},updateAnimationId:null,scale:1},this.tilt=null,this.glare=null,this.addDeviceOrientationEventListener=async()=>{if(!window.DeviceOrientationEvent)return;const e=DeviceOrientationEvent.requestPermission;typeof e=="function"?await e()==="granted"&&window.addEventListener("deviceorientation",this.onMove):window.addEventListener("deviceorientation",this.onMove)},this.setSize=()=>{this.setWrapperElSize(),this.glare&&this.glare.setSize(this.wrapperEl.size)},this.mainLoop=e=>{this.wrapperEl.updateAnimationId!==null&&cancelAnimationFrame(this.wrapperEl.updateAnimationId),this.processInput(e),this.update(e.type),this.wrapperEl.updateAnimationId=requestAnimationFrame(this.renderFrame)},this.onEnter=e=>{const{onEnter:t}=this.props;this.setSize(),this.wrapperEl.node.style.willChange="transform",this.setTransitions(),t&&t({event:e})},this.onMove=e=>{this.mainLoop(e),this.emitOnMove(e)},this.onLeave=e=>{const{onLeave:t}=this.props;if(this.setTransitions(),t&&t({event:e}),this.props.reset){const n=new CustomEvent("autoreset");this.onMove(n)}},this.processInput=e=>{const{scale:t}=this.props;switch(e.type){case"mousemove":this.wrapperEl.clientPosition.x=e.pageX,this.wrapperEl.clientPosition.y=e.pageY,this.wrapperEl.scale=t;break;case"touchmove":this.wrapperEl.clientPosition.x=e.touches[0].pageX,this.wrapperEl.clientPosition.y=e.touches[0].pageY,this.wrapperEl.scale=t;break;case"deviceorientation":this.processInputDeviceOrientation(e),this.wrapperEl.scale=t;break;case"autoreset":{const{tiltAngleXInitial:n,tiltAngleYInitial:s,tiltMaxAngleX:i,tiltMaxAngleY:a}=this.props,c=s/a*100;this.wrapperEl.clientPosition.xPercentage=$a(n/i*100,-100,100),this.wrapperEl.clientPosition.yPercentage=$a(c,-100,100),this.wrapperEl.scale=1;break}}},this.processInputDeviceOrientation=e=>{if(!e.gamma||!e.beta||!this.props.gyroscope)return;const{tiltMaxAngleX:t,tiltMaxAngleY:n}=this.props,s=e.gamma;this.wrapperEl.clientPosition.xPercentage=e.beta/t*100,this.wrapperEl.clientPosition.yPercentage=s/n*100,this.wrapperEl.clientPosition.xPercentage=$a(this.wrapperEl.clientPosition.xPercentage,-100,100),this.wrapperEl.clientPosition.yPercentage=$a(this.wrapperEl.clientPosition.yPercentage,-100,100)},this.update=e=>{const{tiltEnable:t,flipVertically:n,flipHorizontally:s}=this.props;e!=="autoreset"&&e!=="deviceorientation"&&e!=="propChange"&&this.updateClientInput(),t&&this.tilt.update(this.wrapperEl.clientPosition,this.props),this.updateFlip(),this.tilt.updateTiltAnglesPercentage(this.props),this.glare&&this.glare.update(this.wrapperEl.clientPosition,this.props,n,s)},this.updateClientInput=()=>{const{trackOnWindow:e}=this.props;let t,n;if(e){const{x:s,y:i}=this.wrapperEl.clientPosition;t=i/window.innerHeight*200-100,n=s/window.innerWidth*200-100}else{const{size:{width:s,height:i,left:a,top:c},clientPosition:{x:d,y:h}}=this.wrapperEl;t=(h-c)/i*200-100,n=(d-a)/s*200-100}this.wrapperEl.clientPosition.xPercentage=$a(t,-100,100),this.wrapperEl.clientPosition.yPercentage=$a(n,-100,100)},this.updateFlip=()=>{const{flipVertically:e,flipHorizontally:t}=this.props;e&&(this.tilt.tiltAngleX+=180,this.tilt.tiltAngleY*=-1),t&&(this.tilt.tiltAngleY+=180)},this.renderFrame=()=>{this.resetWrapperElTransform(),this.renderPerspective(),this.tilt.render(this.wrapperEl.node),this.renderScale(),this.glare&&this.glare.render(this.props)}}componentDidMount(){if(this.tilt=new iq,this.initGlare(),this.setSize(),this.addEventListeners(),typeof CustomEvent>"u")return;const e=new CustomEvent("autoreset");this.mainLoop(e);const t=new CustomEvent("initial");this.emitOnMove(t)}componentWillUnmount(){this.wrapperEl.updateAnimationId!==null&&cancelAnimationFrame(this.wrapperEl.updateAnimationId),this.removeEventListeners()}componentDidUpdate(){const e=new CustomEvent("propChange");this.mainLoop(e),this.emitOnMove(e)}addEventListeners(){const{trackOnWindow:e,gyroscope:t}=this.props;window.addEventListener("resize",this.setSize),e&&(window.addEventListener("mouseenter",this.onEnter),window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseout",this.onLeave),window.addEventListener("touchstart",this.onEnter),window.addEventListener("touchmove",this.onMove),window.addEventListener("touchend",this.onLeave)),t&&this.addDeviceOrientationEventListener()}removeEventListeners(){const{trackOnWindow:e,gyroscope:t}=this.props;window.removeEventListener("resize",this.setSize),e&&(window.removeEventListener("mouseenter",this.onEnter),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseout",this.onLeave),window.removeEventListener("touchstart",this.onEnter),window.removeEventListener("touchmove",this.onMove),window.removeEventListener("touchend",this.onLeave)),t&&window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",this.onMove)}setWrapperElSize(){const e=this.wrapperEl.node.getBoundingClientRect();this.wrapperEl.size.width=this.wrapperEl.node.offsetWidth,this.wrapperEl.size.height=this.wrapperEl.node.offsetHeight,this.wrapperEl.size.left=e.left+window.scrollX,this.wrapperEl.size.top=e.top+window.scrollY}initGlare(){const{glareEnable:e,glareBorderRadius:t}=this.props;e&&(this.glare=new sq(this.wrapperEl.size,t),this.wrapperEl.node.appendChild(this.glare.glareWrapperEl))}emitOnMove(e){const{onMove:t}=this.props;if(!t)return;let n=0,s=0;this.glare&&(n=this.glare.glareAngle,s=this.glare.glareOpacity),t({tiltAngleX:this.tilt.tiltAngleX,tiltAngleY:this.tilt.tiltAngleY,tiltAngleXPercentage:this.tilt.tiltAngleXPercentage,tiltAngleYPercentage:this.tilt.tiltAngleYPercentage,glareAngle:n,glareOpacity:s,event:e})}resetWrapperElTransform(){this.wrapperEl.node.style.transform=""}renderPerspective(){const{perspective:e}=this.props;this.wrapperEl.node.style.transform+=`perspective(${e}px) `}renderScale(){const{scale:e}=this.wrapperEl;this.wrapperEl.node.style.transform+=`scale3d(${e},${e},${e})`}setTransitions(){const{transitionSpeed:e,transitionEasing:t}=this.props;yN(this.wrapperEl.node,"all",e,t),this.glare&&yN(this.glare.glareEl,"opacity",e,t)}render(){const{children:e,className:t,style:n}=this.props;return o.jsx("div",{ref:s=>{this.wrapperEl.node=s},onMouseEnter:this.onEnter,onMouseMove:this.onMove,onMouseLeave:this.onLeave,onTouchStart:this.onEnter,onTouchMove:this.onMove,onTouchEnd:this.onLeave,className:t,style:n,children:e})}}L6.defaultProps=aq;var bv={exports:{}},wv,vN;function oq(){if(vN)return wv;vN=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return wv=r,wv}var _v,bN;function lq(){if(bN)return _v;bN=1;var r=oq();function e(){}function t(){}return t.resetWarningCache=e,_v=function(){function n(a,c,d,h,p,m){if(m!==r){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return i.PropTypes=i,i},_v}var wN;function cq(){return wN||(wN=1,bv.exports=lq()()),bv.exports}var uq=cq();const q=B1(uq);var M6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_N=$i.createContext&&$i.createContext(M6),dq=["attr","size","title"];function hq(r,e){if(r==null)return{};var t=fq(r,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function fq(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function Jm(){return Jm=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Jm.apply(this,arguments)}function EN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function Zm(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?EN(Object(t),!0).forEach(function(n){pq(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):EN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function pq(r,e,t){return e=mq(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function mq(r){var e=gq(r,"string");return typeof e=="symbol"?e:e+""}function gq(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function V6(r){return r&&r.map((e,t)=>$i.createElement(e.tag,Zm({key:t},e.attr),V6(e.child)))}function Ge(r){return e=>$i.createElement(xq,Jm({attr:Zm({},r.attr)},e),V6(r.child))}function xq(r){var e=t=>{var{attr:n,size:s,title:i}=r,a=hq(r,dq),c=s||t.size||"1em",d;return t.className&&(d=t.className),r.className&&(d=(d?d+" ":"")+r.className),$i.createElement("svg",Jm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,a,{className:d,style:Zm(Zm({color:r.color||t.color},t.style),r.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&$i.createElement("title",null,i),r.children)};return _N!==void 0?$i.createElement(_N.Consumer,null,t=>e(t)):e(M6)}function Cc(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(r)}function Ic(r){return Ge({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(r)}function Pc(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(r)}function Zg(r){return Ge({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(r)}function yq(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248 248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z"},child:[]}]})(r)}function ex(r){return Ge({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(r)}function yc(r){return Ge({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(r)}function vq(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(r)}function bq(r){return Ge({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"},child:[]}]})(r)}function j0(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(r)}function wq(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(r)}function _q(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(r)}function Eq(r){return Ge({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(r)}function Tq(r){return Ge({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(r)}function Aq(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(r)}function ga(r){return Ge({attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(r)}function G0(r){return Ge({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(r)}function md(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(r)}function vc(r){return Ge({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(r)}function $6(r){return Ge({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(r)}function B6(r){return Ge({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(r)}function ew(r){return Ge({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(r)}function tw(r){return Ge({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(r)}function jc(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(r)}function Nq(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(r)}function kq(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"},child:[]}]})(r)}function Sq(r){return Ge({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"},child:[]}]})(r)}function gd(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(r)}function R1(r){return Ge({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"},child:[]}]})(r)}function xd(r){return Ge({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(r)}function D1(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(r)}function yd(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(r)}function Rc(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(r)}function vn(r){return Ge({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(r)}function rw(r){return Ge({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(r)}function Cq(r){return Ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(r)}function eg(r){return Ge({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(r)}function F1(r){return Ge({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(r)}function bc(r){return Ge({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(r)}function _a(r){return Ge({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(r)}function Iq(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(r)}function Ys(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(r)}function Ah(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(r)}function Qte(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(r)}function nw(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(r)}function Pq(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(r)}function vd(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(r)}function jq(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(r)}function tx(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(r)}function rx(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(r)}function Dc(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(r)}function U6(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(r)}function TN(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},child:[]}]})(r)}function Xs(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(r)}function nx(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(r)}function z6(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(r)}function Rq(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(r)}function Dq(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(r)}function sw(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(r)}function Jte(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"},child:[]},{tag:"line",attr:{x1:"7",y1:"2",x2:"7",y2:"22"},child:[]},{tag:"line",attr:{x1:"17",y1:"2",x2:"17",y2:"22"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"2",y1:"7",x2:"7",y2:"7"},child:[]},{tag:"line",attr:{x1:"2",y1:"17",x2:"7",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"17",x2:"22",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"7",x2:"22",y2:"7"},child:[]}]})(r)}function Zte(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(r)}function Ka(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(r)}function Fq(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(r)}function H6(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(r)}function Oq(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(r)}function Lq(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"},child:[]}]})(r)}function W6(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},child:[]},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},child:[]}]})(r)}function Mq(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(r)}function tg(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(r)}function rg(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(r)}function iw(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(r)}function Vq(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(r)}function qr(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(r)}function ere(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(r)}function tre(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 18V5l12-2v13"},child:[]},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"16",r:"3"},child:[]}]})(r)}function $q(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(r)}function rre(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 19l7-7 3 3-7 7-3-3z"},child:[]},{tag:"path",attr:{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"},child:[]},{tag:"path",attr:{d:"M2 2l7.586 7.586"},child:[]},{tag:"circle",attr:{cx:"11",cy:"11",r:"2"},child:[]}]})(r)}function Nh(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(r)}function nre(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polygon",attr:{points:"10 8 16 12 10 16 10 8"},child:[]}]})(r)}function AN(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(r)}function O1(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(r)}function q6(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"17 1 21 5 17 9"},child:[]},{tag:"path",attr:{d:"M3 11V9a4 4 0 0 1 4-4h14"},child:[]},{tag:"polyline",attr:{points:"7 23 3 19 7 15"},child:[]},{tag:"path",attr:{d:"M21 13v2a4 4 0 0 1-4 4H3"},child:[]}]})(r)}function xa(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(r)}function G6(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(r)}function ul(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(r)}function bd(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(r)}function K6(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"},child:[]},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"},child:[]}]})(r)}function sre(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(r)}function aw(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(r)}function NN(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(r)}function ire(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"15",rx:"2",ry:"2"},child:[]},{tag:"polyline",attr:{points:"17 2 12 7 7 2"},child:[]}]})(r)}function ng(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(r)}function Bq(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(r)}function js(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(r)}function wd(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(r)}function are(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(r)}function Uq(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(r)}function Zs(r){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(r)}const Fc="/assets/logo-DFdgxMoO.webp",zq="/assets/brooklyn99-CRig83u8.webp",Hq="/assets/stranger-things-CgnouC0f.webp",Wq="/assets/breaking-bad-bqUVAyrc.webp",qq="/assets/naruto-DKDor6UB.webp",Gq="/assets/alice-BA5HPubx.webp",Kq="/assets/netflix-OezU_Jrg.webp",Yq="/assets/spotify-Bkt61dvX.webp",Xq="/assets/disney-CwAAFq8J.webp",Qq="/assets/max-DuvCHRsB.webp",Jq="/assets/prime-video-CjCvpr54.webp",Zq="/assets/vix-D-40sIBx.webp",eG="/assets/Canva-C4zols_B.webp",tG="/assets/ChatGPT-BrDd5yiZ.webp",rG="/assets/crunchyroll-TwNYMG6Z.webp",nG="/assets/redessociales-br9Cvt2I.webp",sG="/assets/dgo-rWjlD8fS.webp",iG="/assets/ligamax-BCMYHRJx.webp",aG="data:image/webp;base64,UklGRiAMAABXRUJQVlA4WAoAAAAwAAAA+QAAdwAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZBTFBITQQAAAFfoKBtJBS/BGaIiACMeeQ7aQe1bdvWts0jydyBxrx5vCVp66Mal8bMzHOWYy6MmbdiDrf6MqYyg75kBlnS/fP0vO/7CPx1i+j/BNB/bG6/09/oTK27YwDBhVOqkyAdOFPJjcA/NpV+hroyhdxYY3YK/QzNwJo+Ex3Uyqq90LtVqAPt2ZKaTwD4jsghvW/LqZsg7VsSoR6sMnJj8DMCbmJQLaPDUAa22dMwbGXS7fXsIriJCjNmB01mM1kCnCL8BM3ANhqZvKu10ONvs4sV6uBSo8gk0AqhDB4uUgfavkkbxrYI8GiBtuihZvCRWVUIFxdnaDBrcMisIeUXJzLYYzA2axk4RLTqswRArShtmNb0ErNZAaJ5AJcW5SOj1VodmK8WoRHwblEOGu3R+kjgXZktwJ6iDI1Q0/lXwJdpA7AKEprN6owF9shQAjgFic18nUQAQpFBx1u49dqcuBCsqDqQtGVCoKZaOIn07gqz0HtQsdB7UKAjcanqIw3/vGcTzskuBB84qRC+IoQv0JXwVQONKtHPucO7edgigYoiVD1GRB2uJhMBjgCcHBwUmeHaUFeIiKIsYq3Fjbd63n3HAVyagyWRwGZ+Un1L6XEGLgBLpRwDj+VgKIK7Uu5EdSkzzKALBGT0NOAXBRcR0a9QV5gB0xA5BLxrRgmCHIyF8LL3B9Q+sUtybgzMCoRADkIp/dVZuUcBNATGZdHMYEOv1+tFAAJbYFgWlQw0V1OxdscZBJSDwDHxPM8b5+hbq5PIvasYZHERaXUWocxNi+iw3KxiyNQk/OtJ6+4EuasS3S3XzOJWz/O8a4nn3Any5xBRJFbJwiFtbgvS/X4/zpFNRIfFLEXIVDMbAXuuIyIa5mKo0ZXyycDJLAGqlDeHiCgRekwV5aMNfEs5GugMhS4zoay6wGyelphaaotQQxWngjwsMwky2cI0Um2higppvwDI5COmlaKJjGXwbRHsLJ5mZplDInvI4LXMngZW6w2BWhYd5jGmK/KayerM2sAebsQMgBmmE4sQ4zOUSMyatDKjBLiJiNzfwPwEBBcSuZ8mkIlSATeUaGokqXp2IwAb7+vF4O4GgF39BBAKU3CYLRI1jQmAwM5uC3SJiCJoioyYGtOWsDUGAB6j7NxYsYv7WRHEMktMi6GJWUCadwOo5IC6CfPI05wbMnvOD2W2MLPcIbPXdOjT/g2kvcrzLL2O51lERM+cBHZfT67npai9CAQv2yT0NPMa97TZpVpFF2ozeziKjWplR3EKFjcwCawSmQiNmQrXNXmMSjQSGjB1jiKDepkk+FbkJ6al+Flvj1UibeBdkbuZZQo30rqESrQLrBZxk9RqBXV13qUyHQAtEQoN6IjKd8pkPgFqModTsxq0g/vGoZJc3NjrLQIILJmnUy0dunex3994PZXmBPwMCUcAqlplG3KBLTUPvEslPuIuIvF7X7TL7O2TAL4+n/7PKQBWUDgg3AUAANAiAJ0BKvoAeAA+bTKWR6QjIiElk6sYgA2JZG7hawDrjv/Rvyg8Nq0XVPyH9qStfz78Af0LmRjPeoPsN+a+4P3ef3b2Wfdp7gH6V/8f7c/gA9Q38l9AH88/x37Ae9h/nP1A9wHoAfyv/Bf/n2Qv77///cA/vHqAfsT6q3+6/Z3/3fIl+5H7ue5p/jf/5/0OwA/9vXb9AP4B+AH6Afn73+Fksuo22S2t8raJpulguWnrfPvQVHbfK2tTGs+AOXakyZX4d+B+GHpHdMPzj70OfehWu0nnZi5bXtOTJ3s0gB8vsHU+xZ3c0G0CXeMVZRexFwLYhpQfWs3wvg0Ng/6BEGH2nciy3WAEKKQ5u3jOJVOEll1CJKLI22S2t8ra3ySAAP7+ycAAaYzhBlbGo1tklY8O9pZCGu8C07+MN0xDrwQWEi8POvVlbad2sw3ZAI7+/rEZgwFEiJBzegXInbxZP+uyvAoJtyGnsMT/3NczjDaqajM+S+GCnRnnEMam+2xRnza9i8t9WLI/fU4LjXLNkfPIxwHH+6aUn511oE0Q5qek/9mUluTpSIyVnNPSIHRnIB0pV6Dx8HyXRkCWgNZ3DDAYXPBr0/ClWX3pVbO17lDjhS02x0cUoHf6wt//mYu4OTms3lEFtLr7IPEC0Wm31F/Xsoswh+yRpGQ1rZ6mOCuvwU1xHBn7J+TxZksHi57REFow4yojf9iEQWosAJhYKVr6DYTw7qHmw3EXdjaIQd5qtQ/MNHPlRTbCcTzVo89rAVtxwmvZ2PB409kX8eG71hghH5+rFXIpLkXVW3oNiAv2q6i0960OFWNOGmWVe82RdJSmvxspV6yhMnFCOHdzmWpC963juX3GU9/NNdXlSmQhgp3HHcFrmzTW8Y6Jk53uS+ih7Mrb9r3u43nSgumGAoOwRGWbqOVH/Sw3n+lw0POZnRxXlTIdCa/CJjXL/dTetI5PeS9oZP26ffTo6Mb3vCIDVwLHFDpNXiaQWvRtPbhhysze5gBCmrEWisOCXmyb72GHNxCX53DsRW2FxzZUypkoNKPfQLfbuvx4FLOZbL6ve/YtGf6A+OjWqcKwVamOUsBVeeuh0HjdPemygk5GKE4kPUJgL7wjsyO/F7MlE7EPc23qI9yNlGi0rZGL0kLGiRQZ41B+ftWc8OpjXi9n1kqEC8sLf4gzZQqduIoFO3BqXuC+9vzDzD1Uc5PAF+SxWVls7URZxBZBdO1LtnmlWcqS53V3XW8+82aLrjYLhahKzmya9OmDZJfYjDo3kTSpJbmuuXuP62iN+feYxvw/OEa52TdlfdABPn1N9Bzj2wL0nHe5LZJ/dGgOFlkVAe94yKvOt8JLHMzdRYUhlcji/n8ZF0i1YBcwWxmkGapImoDYOnlBMZH63AMFYhhRJiFZEDyvvB/hub9BtSjgS+6XLw6AfT2JrbMaYOhYthx8ZgLVm2rk9a9zFctqZMeLlbQpqlAZBbS6ZS2nwf6ygc5GcLZNkSgsjqupevcdywJV9XV//Pwu7A+dya12Zd0txxJmNmLvXnAvy+KCvhYyNIyVXpeRERddr0LMvLkSN7p1VegIuiyzypGT+e4OAZm/+18oVv7LFbwNgZIZIKH+nXzcCRtXkefpHpLh3wKjCKtW4iGsE/AM/ULebTkMcNUyD48HYjqIAz1Y44ZV+UCg2DA3PWm45tta/KgKIXwAjUpGEQR6WF2urYmstjsCzP3X0BYfn3oE7ayRmYG65TYgGY2Obpfs7FmGTgo9MZSYd+qb7O28WB8YNazEi2vyRqqKOCuvw2Fz5fYHMVDB1IW2S/o3a4uGsigYWTlZqLEtyCH6R61OQzrxgP8TEmyoE+gwLyuU4febYW1SP2dAxT7TsXWJvlRTbP+zXzPvynmfjwRzWIHcAWvJvM4jqNjH9anUwAMIfk0kj7Cw08l9qqv/+JiVYmSMNJX/gif3a3ePt85DS62Jmud7hPMqP82kaSNLI003n4sAAAAAAAAAAAAAAA==",oG="/assets/youtube-CyjXMWeA.webp",lG="/assets/deezer-A8B2Y9_p.webp",cG="/assets/tidal-DYYyAkwV.webp",uG="/assets/vpn-D3FZN68z.webp",dG="/assets/wintv-nyhMIfWe.webp",hG="/assets/applemusic-DIZM1VKJ.webp",fG="/assets/appletv-Di9nYvwP.webp",pG="/assets/iptv-qo_mgMvC.webp",mG="/assets/flujotv-FQulHY7R.webp",gG="/assets/vikirakuten-BedAzacT.webp",xG="/assets/pornhub-CNac7CBA.webp",yG="/assets/paramount-B9ERDaZl.webp",vG="data:image/webp;base64,UklGRuYPAABXRUJQVlA4WAoAAAAgAAAA/wAA/wAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZWUDgg+A0AAFBFAJ0BKgABAAE+bTaXSKQjIiEjOPjwgA2JZW7hdqvoX8lrK3ZPyj9oGwv37chiF9rH8Tzd+oD88f533Bf0//0vUA/cD1Afsb+zPuq/5D9pvcp6AH9V/0fq4f732OfQA8rj9xPgy/sf/R/aL2pf/prNnl3sY/t35P+evij8V+4PK33IehP8V+xP33+5/ujyM9274AvyP+R/5D8x+EHs36AXtV9U/4Pgafvn9A9V/ql7AH8m/rf+g44T7d/y/YC/mf9w8/3/r/2HoP+pf+v7h388/tH/T7FnpHih6oZuwjRuNsPbMAdzqhm7CNG42w9swB3OqGbsI0bjbABOxEeKoE/LVpmGDnfalNoTi/WQcV5Grfcjlfu5zEM3YLk8JiPAuL/cy904GSTW0fDPOPy0VqYjp6o37zUOhBRxW75R3q7TmYlG42cNwGPUJElIRtkyLoNtK9soZysN+yoXJzgnL/AwgZu7XcU9vdeJszPZ4vDeh0y9rLy01FwQzO1CAqNS6JIWoTTvHTF5t/MC9a+ONKepUVbiNsNnB+p/BHvHEYXjEGWaLAan8trl3YPB7smWQEfyew9Ii3/LUJ74rIfLQZ7b3QHjGQfwPKLZWzf7K3SaNW5teFctBI3inUAqzAC3o8NAnOK/b8G0SoeWf6gQWBru1LVcSLBu0DoH1zAkJOp2bcDIegLiFjPb2uDPfBzDqhm7CNG42w9swB3OqGbsI0bjbD2zAHc6oZuwjRuNsPbMAdYAAP7/3DgAABcPO+e131bg4s0inDdzkYvu/5y2Uh20jMn8jbctbVockPPOs+JJym7IPgcARL0t3N0m3LU2M22rr6RPcFuvgjwXDtvd59cn3BauhXjj8rQv/28HVtEhzN9Rf/EIYcawBEblejKea66z2hjp41yao7dd8qQyThYv6++nAf9K5ZNmlI/3iyvgzbfe0Iqa7TsXE6/pgFJ/Os/u5Wn5keh7OkAnbgMoBVdIO0zyd0zAe6uGN/jQ85iQSppHMqs+rsZe+wF1H1/B8f66NNIcS4/FkGdTc6VRNeVgCDQ05Hzp/f+t/LbD1jLS8qifebYUFBn8/fXLGDufG7rfKnyazuT9C3W2w6963T5kuFNWHSdDVCPuigwC0nR/6du//mz+SUyQfLe2hHBZ2WKuUQ6Lmy10CyQs95GZO0uauHBKN+NI+5IOZ4Pi5acnFJ/6jlYJw5iY+UbRFo7X2yxJofXzA7kGfzOrsdoTLJxlKp1UWhEiPIFA+G3I/gYo34d/gQn9Kx0aIXx6OSmexDlixXIjCwozZ8nyfg8+bQOIC2TJnKRT8vfVvL7QxkqiPcycIVbXuH7Nl6iM1l/ej2Mmt7G6R1EyszNKwIPjTB76kInHbAJU0/fnK/N2X+GkKgApHNBFqXaoK3HPMwTaXcXw/35aSZUEr9v15rp3lYTdkHvGtQ7rm4KiwsdtFLCQFWDLAwN/QMpHtxX4xAzjhOu5mrcu7zI8kgHw8gPL7GwmaAxDO3ss72TAi79U3/tcwuP5yD9M0XPqiPMlVLERN6b7yewapaUmFf+J1xv2/15uj6SpFeV7L2ACXDi8kM4XhBOddBeTBV1rPHK2mYQsIZZJ0RYIWEdHeV1TOpRR0Co1iSoJcQdebvL1dV+CbPYpalm3hq4BIGRfucpBb19E0md/MJA+YJDfZ+arispiSEZ9UJZwTW+fwO4mAM1B077sqWv6Ej9GbriqGffxed7RO/JWLM3oUZD/fYpGQkqBwDUOf1nYH3EyXraF7o7iYyNK/aIMrn07OyDPAzlAb2oI3nOe/YcRrbG9LL6fFaFy8EsdBOGnXSsHDjz+PVcDtbVUUfynnxPTQenABQbjq9yJopfKIKLrVIRtH0DLrOyBgcAJiN0Xq0Ra/Thnz8bP3Zf+GJpA/K6t0TW5lDLK/7NQCk/wwAVMa2AJk0oXrxGRsapMUJ5jaYcVvPszlP8eSMBgUCJ7fTnJHzSyrNd/oYEpSEAC2YOr2kzMRFz2Q+fM13uy2J5xXcDj6a2U0lmaHdsTd+rdGm80Z6f9D7hirv3kkUGWf4og/5y8lfvJSm8NqnicsYSfy6wqMofN+bxS+x72YOvH7q4xnjncNXyYwnxGOIHuBavm2dKXzmcW9GixL57U2z8Lzw9XarCcagymoKKUFIKaCf+142alOj3gLuPxXuN3c+XDdCp8VbdPgYIydnu8PUUqmWwBVJjEAaCE2h7EMl/3KrwSkoj+L/uoCO74vCI0Dl81q5EgB0FTnaoqcE9hvrqUjeZAOjHMjQEyIbQviFzfPD2udQ3bVWo8xNvzJBAI5eDGEnVvlt2bl7EhAkAkBTYau0hDhwmD7KvBYwCFUZFBgpT3cn4o5OxHS0czqNxCL6T7vlUBdX7wNcU6HkFjWM/OOAJNj/nvHNIpnYVWAB548r+sU1+1D4EixHd4K/VeRTHL0uGor67ukMFrvEegFlDTmkWy8x+Sswyl4Oi1sclWRsWFf3ha0YOtBFhgr+lxNjbnktVIMK/1rQ9+c0+fvBGfKP/YHkkLBlXIJt33YkrG2W+9O9a62C3W3QAK6hXesVrWVcf0b6X8vNda+ukEl5cBwmBTcHLlQqX5dP1gG5fSE0h2bD35/T+r6AzVUyux1Z+sZHk6Co2XVQsR7S/yx5bjTCX24GmjmkyWQ/jgKVZl0RyX/xzIPROiBVJ126VThYOVFnVj9ggxHPiWwdUPKkFU+/LA9WuCt+NB6vjKTt/kxEBw9hs/6gSQ0zddnjuWxxa6JcAeZbYNpi0oCR1As+Phz7a5kCialvNJq7Pk7x/5SXb7UHbE9stfTCT5x4p+1nUwyCCAX8sv3xCrAUEnMIr4ojDTl6Mf9rB0J9VL4unYP59igiBrSxOcNzwjQrpabcO9QBT0NbschmRxwzoeSFxBuTXs9RIk9D/o6mLpQ7GqSCLrQ6KAC5O2ndCQBup9PGmRLb2uCf1m+rMoH27Zz1PPwht5pBEJluHgjGZg2y1a3gAg2h8D06Cb5E8oEUrbvoAYkWpa3fbInFsow34gnY/f4bFjFEJsGtF/aGEE3aPGKdc8hvTDznR3UtKvEO6yVR7JpwD0RN1wGDthXwUgVKMKQaE9sMHNwCACGFOvYObJzVAjCA7mSRc+E+jhTf7B5dpAXVX8tLu/rNdrd/IFM/gGWHoOpeHtdPHalfIsJVhT/annvtpNhHmAaSem3fwDlfHCkyE9wOMHbzeL0gNLMi0J1caphIGKzJx2UH8BgzMR66lUbWhYXF+wjuHhsN8wuGFqZf9QfYmlWhyeF/9FkcZs6BVDnv/o/buOhDL9QPPZn4Tax0VR2DVkTmKkOWe5LU4uP5FCX195oPCn7xNcKTfVfl8wDl9YBV0st/CHuUOyDLihsV8M6LyuFHr3V4JLjJ2+k/3UpVY7djF0EJjFzL6vRiX3IuF4Tzl9ytC9pLFCNIfyiKN0LPylGZrS2PJYvtsCzB9hhS0LnlZEi51cB0eOzIbTENRAJTJ3bC6ft5mnHpsotTepQ8PyMdFvq/Ez7mdUzsfXswyIWIjNfc8uWMhXwU2uvWOm4rlzWXB3YQWNp4x1Sclf9gDZFoOEpxR39eqLypWOXCZjsWirtL5qh0noFzxFZ7BYBNHQmdAFUaL910LcgY4sJ0VPmvnsmYzcNUVK5qxQcBNZ2pmbNBVdB6Oil6yxMUx9PU+GU/WlHjlSZpcQgWEHhIat7su9Raby7T78EsvXe1jUfnpuKrUcmjsYTdrSCSnHjmNOc8ULd68q6VM6UYfWg0mr8mYDBf4Sdf0c+DKIKpWJ9qq2Bsebyth4BkxMqVm/5cBeapdGXrQdF1UrV2jYbBSelJWMlkcb/E5eYfHO9kEAZJ7lBglN1S92sMyeYCS8ugozlnvN9hjIzSCMGcrOyqtioeuuI788iJb2OWWr3Qio9kCcmcmQvnpjAqxWB2qnqrKHTM6RR+MbacVGoCdaoY9MwSilBFT27NrxIfw6YO1Oy2RWWcvWQ0rmPdZdi5l79MPG9YCZr3C9E4O0Rb6rOnQkN4FOWZYgjqAqgyrKikhoMKx7LqxAl28Kc8rdkQg4qNfvLv77LkmbhMidyldkh7z7Ck1KgIru+Qg1/C8rQeXh4yChGWT3GzUQkL/plSyWvMQdaHpn4UsF7XUg1Lb4yXnfeTahfmlu80wtMcdto2EAYt6PHVNIJn/HGh0GfFbnhWhTMcEiydYzUrPQnhMwo2bcUOJV5AGflHRlQ3zYyCXKZrnUZfBqJXwGD/FUGab/R32QEO4VFp+c+UVcy5vNvEBRZOhLCOdYdHrHJbBOkrscKzoSjSfXIOnFhb/iYg1EqAG9WegT9Ct75tBi9Ybi6e1jwj/cGBZkAlCiy9Rfzf7mDSSO+jstemSVZ1IC0wd7jDMDuSBGPU+M0/IaUFXVNzdsKKPpJESYK6hrlftmxceERS0Iynj/KJyIzBkBDP3BSvlFH+KkpUVD0/uF7eqThFJLDCxIDjkz5EA1meCVrJgbM/9P2gfoFUSlkhnPJTa4x1VOrL0VYmAQ8kNH8w94CpRkxw53V/uaK4JKjHbUDbZhoWs/3vJET5GdCc7anASmgJvxeuTC36YFKYdFn0WOyKyjaIEvyh5fna6NyAuksxtlXejvoemfMhQJ323CJqMilt3zMFVd8w43xvGfQDBDBAy/qQUpFX3Vaa/73nlr7Sc+DbDSgx+9wP6tPs2V36zmvrGZrho88HAWqmVp57DH3MsVlY18hPZFJuA/LL+q7ZNXUmPgAAAAAAAAAAAAAA==",bG="/assets/capcut-BHzV_tZm.webp",wG="/assets/duolingo-BNs4g7oM.webp",_G="/assets/buscapersonas-CDaqQL09.webp",Nu=[{src:zq,title:"Brooklyn Nine-Nine",description:"Comedia policial hilarante"},{src:Hq,title:"Stranger Things",description:"Misterio y nostalgia ochentera"},{src:Wq,title:"Breaking Bad",description:"Un descenso al mundo del crimen"},{src:qq,title:"Naruto",description:"Aventuras ninja picas"},{src:Gq,title:"Alice in Borderland",description:"Juego de supervivencia intenso"}],EG=[{name:"Netflix",logo:Kq,route:"/netflix",color:"#E50914"},{name:"Spotify",logo:Yq,route:"/spotify",color:"#1DB954"},{name:"Disney+",logo:Xq,route:"/disney",color:"#113CCF"},{name:"Max",logo:Qq,route:"/max",color:"#002BE7"},{name:"Prime Video",logo:Jq,route:"/primevideo",color:"#00A8E1"},{name:"Vix",logo:Zq,route:"/vix",color:"#FF2E63"},{name:"Canva",logo:eG,route:"/canva",color:"#00C4B4"},{name:"ChatGPT",logo:tG,route:"/chatgpt",color:"#10A37F"},{name:"Crunchyroll",logo:rG,route:"/crunchyroll",color:"#F47521"},{name:"Redes Sociales",logo:nG,route:"/redessociales",color:"#3B5998"},{name:"Dgo",logo:sG,route:"/dgo",color:"#00A1D6"},{name:"Liga Max",logo:iG,route:"/ligamax",color:"#FFD700"},{name:"Movistar Play",logo:aG,route:"/movistarplay",color:"#005566"},{name:"Youtube",logo:oG,route:"/youtube",color:"#FF0000"},{name:"Deezer",logo:lG,route:"/deezer",color:"#FEAA2D"},{name:"Tidal",logo:cG,route:"/tidal",color:"#000000"},{name:"Vpn",logo:uG,route:"/vpn",color:"#4CAF50"},{name:"Win Tv",logo:dG,route:"/wintv",color:"#9C27B0"},{name:"Cine Planet",logo:hG,route:"/applemusic",color:"#FA57C1"},{name:"Apple Tv",logo:fG,route:"/appletv",color:"#000000"},{name:"Iptv",logo:pG,route:"/iptv",color:"#607D8B"},{name:"Flujo Tv",logo:mG,route:"/flujotv",color:"#FF5722"},{name:"Viki Rakuten",logo:gG,route:"/vikirakuten",color:"#D81B60"},{name:"Pornhub",logo:xG,route:"/pornhub",color:"#FF9000"},{name:"Paramount",logo:yG,route:"/paramount",color:"#0064D2"},{name:"Licencias",logo:vG,route:"/licencias",color:"#795548"},{name:"Cap cut",logo:bG,route:"/capcut",color:"#00C4B4"},{name:"Duolingo",logo:wG,route:"/duolingo",color:"#58CC02"},{name:"Busca Personas",logo:_G,route:"/buscapersonas",color:"#3F51B5"}],TG=(r,e=5e3)=>{const[t,n]=A.useState(0),[s,i]=A.useState(0),[a,c]=A.useState(!1);A.useEffect(()=>{if(a)return;const m=setInterval(()=>{i(v=>v>=100?0:v+100/(e/100))},100),x=setInterval(()=>{n(v=>(v+1)%r.length),i(0)},e);return()=>{clearInterval(m),clearInterval(x)}},[a,r.length,e]);const d=A.useCallback(m=>{n(m),i(0)},[]),h=A.useCallback(()=>{n(m=>(m-1+r.length)%r.length),i(0)},[r.length]),p=A.useCallback(()=>{n(m=>(m+1)%r.length),i(0)},[r.length]);return{currentIndex:t,progress:s,isPaused:a,setIsPaused:c,goToSlide:d,prevSlide:h,nextSlide:p}},Y6=A.memo(({platform:r,theme:e})=>o.jsx(L6,{tiltMaxAngleX:8,tiltMaxAngleY:8,scale:1.03,transitionSpeed:300,children:o.jsx(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:`${e==="dark"?"bg-gray-900/30 border-gray-700/30":"bg-white/90 border-gray-200/30"} backdrop-blur-xl rounded-xl overflow-hidden shadow-md cursor-pointer hover:shadow-xl hover:border-blue-500/50 transition-all duration-300 relative`,children:o.jsxs(Ns,{to:r.route,title:r.name,className:"block",children:[o.jsx("img",{src:r.logo,alt:r.name,className:`w-full h-24 sm:h-28 lg:h-32 object-contain p-4 ${e==="dark"?"bg-white/95":"bg-gray-50/95"} transition-transform duration-300 hover:scale-105`,loading:"lazy",width:"200",height:"100"}),o.jsx("div",{className:"p-3 text-center",style:{background:`linear-gradient(180deg, ${r.color}20, ${r.color}50)`},children:o.jsx("h3",{className:`font-semibold text-sm sm:text-base ${e==="dark"?"text-gray-100":"text-gray-900"} tracking-tight`,children:r.name})})]})})}));Y6.propTypes={platform:q.shape({name:q.string.isRequired,logo:q.string.isRequired,route:q.string.isRequired,color:q.string.isRequired}).isRequired,theme:q.string.isRequired};const X6=A.memo(({show:r,onClose:e,notifications:t,theme:n})=>{const s=n==="dark",i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{scale:1.03,transition:{duration:.2}}},a=c=>c.toLocaleString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return o.jsx(Bt,{children:r&&o.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:e,role:"dialog","aria-labelledby":"notifications-title",children:o.jsxs(Z.div,{variants:i,initial:"hidden",animate:"visible",exit:"hidden",className:`w-full max-w-md mx-4 ${s?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} rounded-2xl shadow-2xl p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md`,onClick:c=>c.stopPropagation(),children:[o.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar notificaciones",children:o.jsx(vn,{size:20})}),o.jsx("h2",{id:"notifications-title",className:`text-2xl font-bold mb-6 ${s?"text-white":"text-gray-900"} bg-clip-text text-transparent bg-gradient-to-r ${s?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Notificaciones"}),t.length>0?t.map(c=>o.jsxs(Z.div,{variants:i,initial:"hidden",animate:"visible",whileHover:"hover",className:`border-b py-3 last:border-0 rounded-xl px-2 transition-all duration-300 ${s?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,children:[o.jsx("p",{className:`${s?"text-gray-300":"text-gray-700"}`,children:c.message}),o.jsx("p",{className:`text-xs mt-1 ${s?"text-gray-400":"text-gray-500"}`,children:a(c.updatedAt?.toDate?.()||new Date)})]},c.id)):o.jsx("p",{className:`py-2 ${s?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})]})})})});X6.propTypes={show:q.bool.isRequired,onClose:q.func.isRequired,notifications:q.arrayOf(q.shape({id:q.string.isRequired,message:q.string.isRequired,updatedAt:q.object})).isRequired,theme:q.string.isRequired};const Q6=A.memo(({isOpen:r,message:e,onClose:t,theme:n})=>o.jsx(Bt,{children:r&&o.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:t,role:"dialog","aria-labelledby":"modal-title",children:o.jsxs(Z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${n==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${n==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:s=>s.stopPropagation(),children:[o.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:o.jsx(vn,{size:20})}),o.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${n==="dark"?"text-white":"text-gray-900"}`,children:"Notificacin"}),o.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:e})]})})}));Q6.propTypes={isOpen:q.bool.isRequired,message:q.string.isRequired,onClose:q.func.isRequired,theme:q.string.isRequired};const J6=()=>{const{currentIndex:r,progress:e,setIsPaused:t,goToSlide:n,prevSlide:s,nextSlide:i}=TG(Nu,5e3),[a,c]=A.useState(""),[d,h]=A.useState(null),[p,m]=A.useState(0),[x,v]=A.useState(null),[_,w]=A.useState(!1),[E,R]=A.useState(!1),[C,V]=A.useState("dark"),[L,K]=A.useState(!1),[H,S]=A.useState(!1),[k,P]=A.useState([]),[j,M]=A.useState([]),[D,O]=A.useState([]),[pe,Ae]=A.useState([]),[Fe,Me]=A.useState(null),[Ee,Te]=A.useState(!1),[Ne,ae]=A.useState(null),[W,oe]=A.useState(null),[ie,ne]=A.useState(!1),[z,_e]=A.useState(null),[De,Se]=A.useState({}),we=Gi(),Qe=A.useRef(null);A.useEffect(()=>{const J=Nc(Zr,Ce=>{h(Ce),Ce?(ft(Ce.uid),zt(Ce.uid)):(m(0),v(null),P([]))});return()=>J()},[]);const ft=async J=>{try{const Ce=await ha(ot(Pe,"users",J));if(Ce.exists()){m(Ce.data().balance||0),v(Ce.data().role);const gt=Ce.data().username||"Usuario";h(fe=>({...fe,username:gt,id:J,name:gt,phone:Ce.data().phone||""}))}}catch(Ce){console.error("Error fetching user data:",Ce)}},zt=async J=>{try{const Ce=nr(At(Pe,"users",J,"notifications"),u2("updatedAt","desc")),fe=(await sn(Ce)).docs.map(Ie=>({id:Ie.id,message:Ie.data().message||"Sin mensaje",updatedAt:Ie.data().updatedAt}));P(fe)}catch(Ce){console.error("Error fetching notifications:",Ce)}};A.useEffect(()=>{(async()=>{try{const Ce=nr(At(Pe,"products")),fe=(await sn(Ce)).docs.map(Ie=>{const Le=Ie.data(),Ze=Le.accounts||[];return{id:Ie.id,...Le,price:Number(Le.price)||0,stock:Ze.length,accountDetails:Le.email||Le.details||"Detalles no disponibles",terms:Le.terms||"Trminos del proveedor",provider:Le.provider||"Anon",providerId:Le.providerId||"",providerPhone:Le.providerPhone||"",acceptsOrders:Le.status==="A pedido",duration:Le.duration||"1 mes",accountType:Le.accountType||"No especificado",status:Le.status||"En stock",image:Le.image||"../images/logo.webp",renewal:Le.renewal||!1,renewalPrice:Number(Le.renewalPrice)||Number(Le.price)*.9,accounts:Ze,category:Le.category||"General"}});O(fe)}catch(Ce){console.error("Error fetching all products:",Ce)}})()},[]),A.useEffect(()=>{(async()=>{try{const Ce=nr(At(Pe,"sales"),C5(200)),gt=await sn(Ce),fe={};gt.docs.forEach(vt=>{const at=vt.data().productId;fe[at]=(fe[at]||0)+1});const Le=Object.keys(fe).sort((vt,It)=>fe[It]-fe[vt]).slice(0,20).map(async vt=>{const It=await ha(ot(Pe,"products",vt));if(It.exists()){const at=It.data(),lt=at.accounts||[];let tt={provider:at.provider||"Anon",providerPhone:at.providerPhone||""};if(at.providerId){const Nt=await ha(ot(Pe,"users",at.providerId));Nt.exists()&&(tt.provider=Nt.data().username||Nt.data().email||at.provider,tt.providerPhone=Nt.data().phoneNumber||at.providerPhone)}return{id:vt,...at,category:at.category,price:Number(at.price)||0,stock:lt.length,accountDetails:at.email||at.details||"Detalles no disponibles",terms:at.terms||"Trminos del proveedor",...tt,acceptsOrders:at.status==="A pedido",duration:at.duration||"1 mes",accountType:at.accountType||"No especificado",status:at.status||"En stock",image:at.image||"../images/logo.webp",renewal:at.renewal||!1,renewalPrice:Number(at.renewalPrice)||Number(at.price)*.9,accounts:lt}}return null}),Ze=await Promise.all(Le);M(Ze.filter(vt=>vt))}catch(Ce){console.error("Error fetching top products:",Ce)}})()},[]),A.useEffect(()=>{if(a.trim()){const J=D.filter(Ce=>Ce.name.toLowerCase().includes(a.toLowerCase())||Ce.provider.toLowerCase().includes(a.toLowerCase()));Ae(J)}else Ae([])},[a,D]),A.useEffect(()=>{const J=nr(At(Pe,"ratings"));return cr(J,gt=>{const fe={};gt.docs.forEach(Le=>{const Ze=Le.data(),vt=Ze.providerId;fe[vt]||(fe[vt]=[]),fe[vt].push(Number(Ze.rating)||0)});const Ie={};Object.keys(fe).forEach(Le=>{const Ze=fe[Le];Ie[Le]=Ze.length?Ze.reduce((vt,It)=>vt+It,0)/Ze.length:1,Ie[Le]=Math.min(Math.max(Ie[Le],1),5)}),Se(Ie)},gt=>{console.error("Error al cargar calificaciones:",gt)})},[]);const wt=A.useCallback(J=>{if(!J)return 30;if(typeof J=="number")return J;if(typeof J!="string")return 30;const Ce=J.match(/(\d+)\s*(mes|meses)/i);if(Ce)return parseInt(Ce[1],10)*30;const gt=J.match(/(\d+)\s*(da|das|dia|dias)/i);if(gt)return parseInt(gt[1],10);const fe=J.match(/(\d+)/);return fe?parseInt(fe[1],10):30},[]),Yt=A.useCallback(J=>{const Ce=Number(J);return isNaN(Ce)?"0.00":Ce.toFixed(2)},[]),kt=A.useCallback(J=>{const Ce=Math.floor(J),gt=5-Ce;return o.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(Ce)].map((fe,Ie)=>o.jsx(bd,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${Ie}`)),[...Array(gt)].map((fe,Ie)=>o.jsx(bd,{className:C==="dark"?"text-gray-600":"text-gray-400",size:16},`empty-${Ie}`))]})},[C]),Oe=A.useCallback(J=>J.status==="A pedido"?o.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:o.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(J.stock)>0?o.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:o.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",J.stock]})}):o.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500/80 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:o.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),[]),Xt=A.useCallback(J=>{if(ae(null),!d){_e({message:"Por favor, inicia sesin para realizar una compra en BlackStreaming.",onClose:()=>we("/login")});return}if(x==="provider"){_e({message:"Los proveedores no pueden realizar compras en BlackStreaming."});return}if(p<J.price){_e({message:"Saldo insuficiente para realizar esta compra."});return}if(!J.providerId||J.providerId===""){_e({message:"Este producto no tiene un proveedor asociado. Contacta al administrador de BlackStreaming."});return}Me({product:J,customerName:d.name,phoneNumber:""})},[d,p,x,we]),Rt=A.useCallback(async()=>{if(!document.getElementById("termsCheck").checked){ae("Debes aceptar los trminos y condiciones");return}if(!/^\d{9}$/.test(Fe.phoneNumber)){ae("El nmero de WhatsApp debe tener 9 dgitos");return}try{Te(!0),ae(null);const J=Fe.product,Ce=wt(J.duration),gt=J.category||"general";if(!J.providerId||J.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let fe=null;J.status==="En stock"?fe=await Um(Pe,async Ie=>{const Le=ot(Pe,"products",J.id),Ze=await Ie.get(Le);if(!Ze.exists())throw new Error("Producto no encontrado");const It=Ze.data().accounts||[];if(It.length===0)throw new Error("No hay cuentas disponibles para este producto");const at=It[0],lt=It.slice(1),tt=ot(Pe,"users",d.id),Nt=await Ie.get(tt);if(!Nt.exists())throw new Error("Usuario no encontrado");const Ut=ot(Pe,"users",J.providerId),Qt=await Ie.get(Ut);if(!Qt.exists())throw new Error("Proveedor no encontrado");const Fr=ot(Pe,"providerBalances",J.providerId),Or=await Ie.get(Fr);let _n=0;Or.exists()?_n=parseFloat(Or.data().balance)||0:Ie.set(Fr,{balance:0,provider:J.providerId,updatedAt:lr()});let mr=J.providerPhone||"";mr||(mr=Qt.data().phoneNumber||"");const Kn={accounts:lt,stock:lt.length};lt.length===0&&(Kn.status="Agotado"),Ie.update(Le,Kn);const Rn=(Number(Nt.data().balance)||0)-J.price;if(Rn<0)throw new Error("Saldo insuficiente");const Nr=Nt.data().orderIds||[],En={productId:J.id,productName:J.name,price:J.price,renewalPrice:J.renewalPrice,provider:J.provider,providerId:J.providerId,providerPhone:mr,status:"active",customerName:Fe.customerName,customerId:d.id,phoneNumber:Fe.phoneNumber,buyerName:d.name,buyerId:d.id,buyerPhone:d.phone,createdAt:new Date().toISOString(),accountDetails:{email:at.email||"No proporcionado",password:at.password||"No proporcionado",profile:at.profile||"No proporcionado",pin:at.pin||"No proporcionado"},terms:J.terms,duration:J.duration,durationDays:Ce,type:gt},an=At(Pe,"users",d.id,"orders"),pn=ot(an);Ie.set(pn,{...En,id:pn.id}),Ie.update(tt,{balance:Rn,orderIds:[...Nr,pn.id]});const ee=(Number(Qt.data().balance)||0)+J.price,Y=Qt.data().salesIds||[],X={saleId:ot(At(Pe,"sales")).id,productId:J.id,productName:J.name,price:J.price,renewalPrice:J.renewalPrice,provider:J.provider,providerId:J.providerId,providerPhone:mr,customerId:d.id,customerName:Fe.customerName,customerPhone:Fe.phoneNumber,buyerName:d.name,buyerId:d.id,buyerPhone:d.phone,accountDetails:{email:at.email||"No proporcionado",password:at.password||"No proporcionado",profile:at.profile||"No proporcionado",pin:at.pin||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:J.terms,duration:J.duration,durationDays:Ce,generalDetails:J.accountDetails,productUrl:J.image},te=At(Pe,"users",J.providerId,"sales"),F=ot(te);Ie.set(F,{...X,id:F.id}),Ie.update(Ut,{balance:ee,salesIds:[...Y,F.id]});const Q=_n+J.price;Ie.set(Fr,{balance:Q,provider:J.providerId,updatedAt:lr()},{merge:!0});const le=ot(At(Pe,"sales"));return Ie.set(le,{...En,provider:J.provider,providerId:J.providerId,providerPhone:mr,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:at.email||"No proporcionado",password:at.password||"No proporcionado",profile:at.profile||"No proporcionado",pin:at.pin||"No proporcionado"},saleId:X.saleId,terms:J.terms,duration:J.duration,durationDays:Ce,generalDetails:J.accountDetails,productUrl:J.image}),at}):await Um(Pe,async Ie=>{const Le=ot(Pe,"users",d.id),Ze=await Ie.get(Le);if(!Ze.exists())throw new Error("Usuario no encontrado");const vt=ot(Pe,"users",J.providerId),It=await Ie.get(vt);if(!It.exists())throw new Error("Proveedor no encontrado");const at=ot(Pe,"providerBalances",J.providerId),lt=await Ie.get(at);let tt=0;lt.exists()?tt=parseFloat(lt.data().balance)||0:Ie.set(at,{balance:0,provider:J.providerId,updatedAt:lr()});let Nt=J.providerPhone||"";Nt||(Nt=It.data().phoneNumber||"");const Qt=(Number(Ze.data().balance)||0)-J.price;if(Qt<0)throw new Error("Saldo insuficiente");const Fr=Ze.data().orderIds||[],Or={productId:J.id,productName:J.name,price:J.price,renewalPrice:J.renewalPrice,provider:J.provider,providerId:J.providerId,providerPhone:Nt,status:"pending",customerName:Fe.customerName,customerId:d.id,phoneNumber:Fe.phoneNumber,buyerName:d.name,buyerId:d.id,buyerPhone:d.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:J.terms,duration:J.duration,durationDays:Ce,type:gt},_n=At(Pe,"users",d.id,"orders"),mr=ot(_n);Ie.set(mr,{...Or,id:mr.id}),Ie.update(Le,{balance:Qt,orderIds:[...Fr,mr.id]});const hr=(Number(It.data().balance)||0)+J.price,Rn=It.data().salesIds||[],Nr={saleId:ot(At(Pe,"sales")).id,productId:J.id,productName:J.name,price:J.price,renewalPrice:J.renewalPrice,provider:J.provider,providerId:J.providerId,providerPhone:Nt,customerId:d.id,customerName:Fe.customerName,customerPhone:Fe.phoneNumber,buyerName:d.name,buyerId:d.id,buyerPhone:d.phone,accountDetails:null,status:"pending",terms:J.terms,duration:J.duration,durationDays:Ce,generalDetails:J.accountDetails,productUrl:J.image},En=At(Pe,"users",J.providerId,"sales"),an=ot(En);Ie.set(an,{...Nr,id:an.id}),Ie.update(vt,{balance:hr,salesIds:[...Rn,an.id]});const pn=tt+J.price;Ie.set(at,{balance:pn,provider:J.providerId,updatedAt:lr()},{merge:!0});const U=ot(At(Pe,"sales"));Ie.set(U,{...Or,provider:J.provider,providerId:J.providerId,providerPhone:Nt,saleDate:new Date().toISOString(),status:"pending",saleId:Nr.saleId,terms:J.terms,duration:J.duration,durationDays:Ce,generalDetails:J.accountDetails,productUrl:J.image})}),m(Ie=>Ie-J.price),Me(null),_e({message:J.status==="En stock"?"Compra realizada con xito! Revisa tu panel para mas informacin.":"Pedido realizado con xito! Revisa tu panel para mas informacin."})}catch(J){ae(J.message||"Error al procesar la compra"),console.error("Error en la compra:",J)}finally{Te(!1)}},[Fe,d,wt]),He=A.useCallback(J=>{oe({name:J.name,accountDetails:J.accountDetails,provider:J.provider,terms:J.terms,accountType:J.accountType})},[]),de=A.useCallback(J=>{oe({name:J.name,terms:J.terms,provider:J.provider,accountType:J.accountType}),ne(!0)},[]);A.useEffect(()=>{const J=()=>{R(window.scrollY>300)};return window.addEventListener("scroll",J),()=>window.removeEventListener("scroll",J)},[]),A.useEffect(()=>{const J=Qe.current;let Ce=0;const gt=Ie=>{Ce=Ie.touches[0].clientX,t(!0)},fe=Ie=>{const Le=Ie.changedTouches[0].clientX;Ce-Le>50&&i(),Le-Ce>50&&s(),setTimeout(()=>t(!1),500)};return J?.addEventListener("touchstart",gt),J?.addEventListener("touchend",fe),()=>{J?.removeEventListener("touchstart",gt),J?.removeEventListener("touchend",fe)}},[s,i,t]);const et=A.useCallback(J=>{J.preventDefault()},[]),ct=A.useCallback(async()=>{try{await Bh(Zr),we("/")}catch(J){console.error("Error signing out:",J)}},[we]),pt=A.useCallback(()=>{V(J=>J==="dark"?"light":"dark")},[]),St=A.useCallback(J=>J?J.split(" ").map(gt=>gt[0]).join("").slice(0,2).toUpperCase():"U",[]),ht=A.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),jt=A.useCallback(()=>{switch(x){case"admin":return"/dashboard/admin";case"provider":return"/dashboard/provider";default:return"/dashboard/user"}},[x]),dt=A.useCallback(J=>{if(!x){J.preventDefault();const Ce={id:Date.now().toString(),message:"Usuario no activado",updatedAt:new Date};return P(gt=>[...gt,Ce]),S(!0),!1}return!0},[x]),gr=a?pe:j;return o.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${C==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-100 via-gray-50 to-white text-gray-900"} flex flex-col font-inter relative overflow-hidden`,children:[o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[o.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${C==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),o.jsx("div",{className:"particles",children:[...Array(25)].map((J,Ce)=>o.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},Ce))})]}),o.jsxs("header",{className:`${C==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-4 px-4 sm:px-6 flex items-center justify-between shadow-lg fixed top-0 left-0 right-0 z-50 transition-all duration-300`,children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(Z.img,{src:Fc,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${C==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},fetchpriority:"high",loading:"eager",width:"40",height:"40"}),o.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),o.jsx("div",{className:"flex-1 mx-4 max-w-md hidden lg:block",children:o.jsxs("div",{className:"relative group",children:[o.jsx("input",{type:"text",placeholder:"Buscar productos y proveedores...",value:a,onChange:J=>c(J.target.value),className:`w-full py-2.5 px-5 ${C==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${C==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar productos y proveedores",onKeyDown:J=>J.key==="Enter"&&et(J)}),o.jsx("button",{onClick:et,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${C==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:o.jsx(gd,{size:18})})]})}),o.jsxs("nav",{className:"flex items-center space-x-3 relative",children:[o.jsx("button",{onClick:pt,className:`p-2 rounded-full ${C==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${C==="dark"?"claro":"oscuro"}`,children:C==="dark"?o.jsx(Rc,{size:20}):o.jsx(jc,{size:20})}),d&&o.jsxs("button",{onClick:()=>S(!0),className:`p-2 rounded-full relative ${C==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Notificaciones (${k.length} nuevas)`,children:[o.jsx(yc,{size:20}),k.length>0&&o.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:k.length})]}),o.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition duration-300",onClick:()=>K(!L),"aria-label":"Abrir men mvil","aria-expanded":L,children:o.jsx(ex,{size:20,className:C==="dark"?"text-gray-300":"text-gray-600"})}),o.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:d?o.jsxs("div",{className:"relative flex items-center space-x-4",children:[o.jsx(Z.div,{className:`flex items-center space-x-2 ${C==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,whileHover:{scale:1.05},children:o.jsxs("span",{className:"text-sm font-semibold",children:["S/. ",p.toFixed(2)]})}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>w(!_),className:`flex items-center space-x-2 ${C==="dark"?"bg-gray-800/30 border-gray-600/30":"bg-gray-100/80 border-gray-200/30"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-lg transition-all duration-300`,"aria-label":"Men de usuario","aria-haspopup":"true","aria-expanded":_,children:[o.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:d.photoURL?o.jsx("img",{src:d.photoURL,alt:"Avatar de usuario",className:"h-full w-full rounded-full",loading:"lazy"}):St(d.username||d.email)}),o.jsx("span",{className:`text-sm font-semibold ${C==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[120px]`,children:d.username||"Usuario"}),o.jsx(bq,{className:`ml-1 ${C==="dark"?"text-gray-400":"text-gray-600"}`,size:14})]}),o.jsx(Bt,{children:_&&o.jsxs(Z.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 mt-2 w-56 ${C==="dark"?"bg-gray-900/95 border-gray-600/30":"bg-white/95 border-gray-200/30"} backdrop-blur-xl rounded-lg shadow-xl py-3 z-50`,role:"menu",children:[o.jsxs(Ns,{to:jt(),className:`w-full text-left px-4 py-2 text-sm hover:${C==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${C==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,onClick:J=>{dt(J),w(!1)},role:"menuitem","aria-label":"Ir al dashboard",children:[o.jsx(eg,{className:"mr-2"})," Dashboard"]}),o.jsxs("button",{onClick:ct,className:`w-full text-left px-4 py-2 text-sm hover:${C==="dark"?"bg-gray-800/80":"bg-gray-200/80"} flex items-center ${C==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesin",children:[o.jsx(yd,{className:"mr-2"})," Cerrar Sesin"]})]})})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs(Ns,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${C==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Iniciar sesin",children:[o.jsx(D1,{className:"mr-2"})," Ingresar"]}),o.jsxs(Ns,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${C==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,"aria-label":"Registrarse",children:[o.jsx(F1,{className:"mr-2"})," Registrarse"]})]})})]}),o.jsx(Bt,{children:L&&o.jsx(Z.nav,{initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:`lg:hidden absolute top-full left-0 right-0 ${C==="dark"?"bg-gray-900/95":"bg-white/95"} backdrop-blur-xl shadow-lg z-40 p-6`,role:"menu","aria-label":"Men mvil",children:o.jsxs("div",{className:"flex flex-col space-y-4",children:[o.jsxs("div",{className:"relative group",children:[o.jsx("input",{type:"text",placeholder:"Buscar productos y proveedores...",value:a,onChange:J=>c(J.target.value),className:`w-full py-2.5 px-5 ${C==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-lg group-hover:${C==="dark"?"bg-gray-800/50":"bg-gray-100/90"}`,"aria-label":"Buscar productos y proveedores",onKeyDown:J=>J.key==="Enter"&&et(J)}),o.jsx("button",{onClick:et,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${C==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Buscar",children:o.jsx(gd,{size:18})})]}),d&&o.jsxs("button",{onClick:()=>{S(!0),K(!1)},className:`text-sm flex items-center ${C==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Ver notificaciones",children:[o.jsx(yc,{className:"mr-2"})," Notificaciones"]}),d?o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:`text-sm ${C==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:["Saldo: S/. ",p.toFixed(2)]}),o.jsxs(Ns,{to:jt(),className:`text-sm flex items-center ${C==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,onClick:J=>{dt(J)&&K(!1)},role:"menuitem","aria-label":"Ir al dashboard",children:[o.jsx(eg,{className:"mr-2"})," Dashboard"]}),o.jsxs("button",{onClick:()=>{ct(),K(!1)},className:`text-sm flex items-center ${C==="dark"?"text-gray-200 hover:text-white":"text-gray-800 hover:text-black"} transition duration-200`,role:"menuitem","aria-label":"Cerrar sesin",children:[o.jsx(yd,{className:"mr-2"})," Cerrar Sesin"]})]}):o.jsxs(o.Fragment,{children:[o.jsxs(Ns,{to:"/login",className:`bg-blue-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-blue-700/95 text-sm border ${C==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>K(!1),role:"menuitem","aria-label":"Iniciar sesin",children:[o.jsx(D1,{className:"mr-2"})," Ingresar"]}),o.jsxs(Ns,{to:"/register",className:`bg-green-600/90 backdrop-blur-xl py-2 px-4 rounded-full hover:bg-green-700/95 text-sm border ${C==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center`,onClick:()=>K(!1),role:"menuitem","aria-label":"Registrarse",children:[o.jsx(F1,{className:"mr-2"})," Registrarse"]})]})]})})})]}),o.jsx(X6,{show:H&&!!d,onClose:()=>S(!1),notifications:k,theme:C}),o.jsx(Q6,{isOpen:!!z,message:z?.message||"",onClose:()=>{z?.onClose&&z.onClose(),_e(null)},theme:C}),o.jsx(Bt,{children:Fe&&o.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>Me(null),role:"dialog","aria-labelledby":"purchase-modal-title",children:o.jsxs(Z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${C==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${C==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:J=>J.stopPropagation(),children:[o.jsx("button",{onClick:()=>Me(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar modal de compra",children:o.jsx(vn,{size:20})}),o.jsx("h2",{id:"purchase-modal-title",className:`text-xl font-bold mb-4 ${C==="dark"?"text-white":"text-gray-900"}`,children:"Confirmar Compra"}),o.jsxs("p",{className:`mb-4 ${C==="dark"?"text-gray-300":"text-gray-700"}`,children:["Ests a punto de comprar: ",o.jsx("strong",{children:Fe.product.name})]}),o.jsxs("p",{className:`mb-4 ${C==="dark"?"text-gray-300":"text-gray-700"}`,children:["Precio: S/. ",Yt(Fe.product.price)]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{htmlFor:"customerName",className:`block text-sm font-medium ${C==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nombre"}),o.jsx("input",{id:"customerName",type:"text",value:Fe.customerName,onChange:J=>Me({...Fe,customerName:J.target.value}),className:`w-full py-2 px-3 rounded-lg ${C==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,"aria-required":"true"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{htmlFor:"phoneNumber",className:`block text-sm font-medium ${C==="dark"?"text-gray-300":"text-gray-700"} mb-1`,children:"Nmero de WhatsApp"}),o.jsx("input",{id:"phoneNumber",type:"tel",value:Fe.phoneNumber,onChange:J=>Me({...Fe,phoneNumber:J.target.value}),className:`w-full py-2 px-3 rounded-lg ${C==="dark"?"bg-gray-800/50 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"9 dgitos",pattern:"\\d{9}","aria-required":"true"})]}),o.jsx("div",{className:"mb-4",children:o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{id:"termsCheck",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-300 rounded","aria-required":"true"}),o.jsxs("span",{className:`text-sm ${C==="dark"?"text-gray-300":"text-gray-700"}`,children:["Acepto los"," ",o.jsx("button",{type:"button",onClick:()=>{de(Fe.product)},className:"underline text-blue-500 hover:text-blue-400",children:"trminos y condiciones"})]})]})}),Ne&&o.jsx("p",{className:`text-red-400 text-sm mb-4 ${C==="dark"?"text-red-300":"text-red-500"}`,children:Ne}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Z.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Me(null),className:`flex-1 py-2 px-4 rounded-xl ${C==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 text-gray-200 border-gray-600/30":"bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cancelar compra",children:"Cancelar"}),o.jsx(Z.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Rt,disabled:Ee,className:`flex-1 py-2 px-4 rounded-xl ${Ee?"bg-gray-500/50 cursor-not-allowed text-gray-400":C==="dark"?"bg-green-600/90 hover:bg-green-700/95 text-white border-green-500/30":"bg-green-500/90 hover:bg-green-600/95 text-white border-green-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Confirmar compra",children:Ee?o.jsxs(o.Fragment,{children:[o.jsx(Mq,{className:"animate-spin",size:16}),"Procesando..."]}):"Confirmar"})]})]})})}),o.jsx(Bt,{children:W&&!ie&&o.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>oe(null),role:"dialog","aria-labelledby":"detail-modal-title",children:o.jsxs(Z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${C==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${C==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:J=>J.stopPropagation(),children:[o.jsx("button",{onClick:()=>oe(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar detalles",children:o.jsx(vn,{size:20})}),o.jsxs("h2",{id:"detail-modal-title",className:`text-xl font-bold mb-4 ${C==="dark"?"text-white":"text-gray-900"}`,children:["Detalles de ",W.name]}),o.jsxs("p",{className:`text-sm ${C==="dark"?"text-gray-300":"text-gray-700"}`,children:[o.jsx("strong",{children:"Tipo de Cuenta:"})," ",W.accountType]}),o.jsxs("p",{className:`text-sm ${C==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[o.jsx("strong",{children:"Proveedor:"})," ",W.provider]}),o.jsxs("p",{className:`text-sm ${C==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[o.jsx("strong",{children:"Detalles:"})," ",W.accountDetails]}),o.jsx(Z.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>oe(null),className:`mt-6 w-full py-2 px-4 rounded-xl ${C==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar detalles",children:"Cerrar"})]})})}),o.jsx(Bt,{children:ie&&W&&o.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>{ne(!1),oe(null)},role:"dialog","aria-labelledby":"terms-modal-title",children:o.jsxs(Z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${C==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${C==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:J=>J.stopPropagation(),children:[o.jsx("button",{onClick:()=>{ne(!1),oe(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Cerrar trminos",children:o.jsx(vn,{size:20})}),o.jsx("h2",{id:"terms-modal-title",className:`text-xl font-bold mb-4 ${C==="dark"?"text-white":"text-gray-900"}`,children:"Trminos y Condiciones"}),o.jsxs("p",{className:`text-sm ${C==="dark"?"text-gray-300":"text-gray-700"}`,children:[o.jsx("strong",{children:"Producto:"})," ",W.name]}),o.jsxs("p",{className:`text-sm ${C==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[o.jsx("strong",{children:"Proveedor:"})," ",W.provider]}),o.jsxs("p",{className:`text-sm ${C==="dark"?"text-gray-300":"text-gray-700"} mt-2`,children:[o.jsx("strong",{children:"Trminos:"})," ",W.terms]}),o.jsx(Z.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{ne(!1),oe(null)},className:`mt-6 w-full py-2 px-4 rounded-xl ${C==="dark"?"bg-blue-600/90 hover:bg-blue-700/95 text-white border-blue-500/30":"bg-blue-500/90 hover:bg-blue-600/95 text-white border-blue-300/30"} backdrop-blur-md border text-sm font-medium transition-all duration-300`,"aria-label":"Cerrar trminos",children:"Cerrar"})]})})}),o.jsxs("main",{className:"flex-1 px-4 sm:px-6 lg:px-8 py-10 pt-24 relative z-10",children:[!a&&o.jsxs("section",{ref:Qe,className:"relative h-64 sm:h-80 md:h-96 lg:h-[600px] mb-12 overflow-hidden rounded-2xl shadow-2xl",onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),role:"region","aria-label":"Carrusel de contenido destacado",children:[o.jsx(Bt,{initial:!1,children:o.jsxs(Z.div,{className:"absolute inset-0 flex items-center justify-center",initial:{opacity:0,x:300,scale:1.1},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-300,scale:1.1},transition:{duration:.8,ease:"easeInOut"},children:[o.jsx("img",{src:Nu[r].src,alt:Nu[r].title,className:"absolute inset-0 w-full h-full object-cover object-center",fetchpriority:r===0?"high":"auto",loading:r===0?"eager":"lazy",width:"1200",height:"600"}),o.jsxs("div",{className:`absolute inset-0 bg-gradient-to-t ${C==="dark"?"from-black/90 via-black/60 to-transparent":"from-white/90 via-white/60 to-transparent"} flex flex-col justify-end p-6 sm:p-8 md:p-10 lg:p-12`,children:[o.jsx(Z.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.5},className:`text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold mb-2 bg-clip-text text-transparent bg-gradient-to-r ${C==="dark"?"from-white to-gray-200":"from-gray-900 to-gray-700"} tracking-tight drop-shadow-md`,children:Nu[r].title}),o.jsx(Z.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},className:`text-sm sm:text-base md:text-lg lg:text-xl max-w-md ${C==="dark"?"text-gray-300":"text-gray-700"} font-medium drop-shadow-sm`,children:Nu[r].description})]})]},r)}),o.jsx("button",{onClick:s,className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${C==="dark"?"bg-black/50 hover:bg-black/70":"bg-white/50 hover:bg-white/70"} backdrop-blur-lg p-3 rounded-full transition-all duration-300 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,"aria-label":"Diapositiva anterior",children:o.jsx(Eq,{size:20})}),o.jsx("button",{onClick:i,className:`absolute right-4 top-1/2 transform -translate-y-1/2 ${C==="dark"?"bg-black/50 hover:bg-black/70":"bg-white/50 hover:bg-white/70"} backdrop-blur-lg p-3 rounded-full transition-all duration-300 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,"aria-label":"Diapositiva siguiente",children:o.jsx(Tq,{size:20})}),o.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",role:"tablist",children:Nu.map((J,Ce)=>o.jsx("button",{className:`w-2 h-2 sm:w-3 sm:h-3 rounded-full transition-all duration-300 ${r===Ce?"bg-blue-500 scale-125":C==="dark"?"bg-gray-500/50":"bg-gray-400/50"} focus:outline-none focus:ring-2 focus:ring-blue-500`,onClick:()=>n(Ce),role:"tab","aria-selected":r===Ce,"aria-label":`Ir a diapositiva ${Ce+1}`},Ce))}),o.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 ${C==="dark"?"bg-gray-800/50":"bg-gray-200/50"}`,children:o.jsx(Z.div,{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600",style:{width:`${e}%`},initial:{width:0},animate:{width:`${e}%`},transition:{duration:.1}})})]}),!a&&o.jsxs("section",{className:"relative",children:[o.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold mb-10 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600 tracking-tight",children:"Categoras de Plataformas"}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4 sm:gap-6 lg:gap-8",children:EG.map((J,Ce)=>o.jsx(Y6,{platform:J,theme:C},Ce))})]}),o.jsxs("section",{className:"mt-16 relative",children:[o.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold mb-10 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600 tracking-tight",children:a?"Resultados de Bsqueda":"Productos Ms Vendidos"}),gr.length>0?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6",children:gr.map(J=>{const Ce=/^\d+$/.test(J.duration||"")?`${J.duration} das`:J.duration||"1 mes";return o.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`relative group rounded-2xl overflow-hidden border-2 ${C==="dark"?"bg-gradient-to-br from-gray-800/60 to-black/60 border-blue-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-purple-500/20"} shadow-xl hover:shadow-2xl transition-shadow duration-300 backdrop-blur-sm`,children:[o.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[o.jsx(Z.img,{whileHover:{scale:1.1},src:J.image,alt:J.name,className:"w-full h-full object-cover object-center transition-transform duration-500",style:{filter:"brightness(0.95)"},loading:"lazy",width:"400",height:"300"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-gray-900/20 to-transparent"}),Oe(J)]}),o.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[o.jsx("span",{className:`uppercase font-bold tracking-wide text-xs ${C==="dark"?"text-blue-400 bg-blue-500/20":"text-purple-600 bg-purple-600/20"} px-2 py-0.5 rounded-md`,children:J.accountType}),o.jsxs("span",{className:`text-xs flex items-center gap-1 ${C==="dark"?"text-gray-400":"text-gray-600"}`,children:[o.jsx(Dc,{className:"text-blue-500",size:13}),Ce]})]}),o.jsx("h3",{className:`font-extrabold text-lg ${C==="dark"?"text-white":"text-gray-900"} mb-2 truncate leading-tight drop-shadow`,children:J.name}),o.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[kt(De[J.providerId]||1),o.jsx("span",{className:`ml-1 text-xs ${C==="dark"?"text-gray-400":"text-gray-600"}`,children:(De[J.providerId]||1).toFixed(1)})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("span",{className:`flex items-center text-xs ${C==="dark"?"text-gray-300":"text-gray-600"} gap-1`,children:[o.jsx(Bq,{className:"text-blue-500",size:13}),J.provider]}),o.jsxs("span",{className:`flex items-center text-xs ${C==="dark"?"text-gray-400":"text-gray-600"} gap-1`,children:[o.jsx(Iq,{className:"text-blue-500",size:13}),J.status]})]}),o.jsx("div",{className:"flex items-center mb-2",children:J.renewal?o.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovacin S/. ",Yt(J.renewalPrice)]}):o.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"Sin renovacin"})}),o.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[o.jsx("div",{className:"flex items-end justify-between mb-2",children:o.jsxs("span",{className:`font-bold text-xl tracking-tight drop-shadow ${C==="dark"?"text-blue-400":"text-purple-600"}`,children:["S/. ",Yt(J.price)]})}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsxs(Z.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>He(J),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${C==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[o.jsx(Oq,{className:"text-blue-500",size:14}),o.jsx("span",{children:"Detalles"})]}),o.jsxs(Z.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>de(J),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg ${C==="dark"?"bg-gray-800/60 hover:bg-blue-500/20":"bg-gray-200/60 hover:bg-purple-600/20"} text-gray-100 transition-all border border-blue-500/40 text-xs font-medium shadow-inner focus:outline-none backdrop-blur-sm`,children:[o.jsx(sw,{className:"text-blue-500",size:14}),o.jsx("span",{children:"Trminos"})]})]}),o.jsxs(Z.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Xt(J),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200 ${Number(J.stock)>0||J.status==="A pedido"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white":"bg-gray-800/60 text-gray-400 cursor-not-allowed"}`,disabled:Number(J.stock)<=0&&J.status!=="A pedido",children:[o.jsx(ul,{size:16}),J.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},J.id)})}):o.jsx("p",{className:`text-center text-lg ${C==="dark"?"text-gray-400":"text-gray-600"} font-medium`,children:a?"No se encontraron productos que coincidan con tu bsqueda.":"No hay productos disponibles."})]})]}),o.jsx("footer",{className:`${C==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-10 px-4 sm:px-6 lg:px-8 text-center text-sm relative z-10`,children:o.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[o.jsxs("p",{className:`${C==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["BlackStreaming - Todos los derechos reservados. Desarrollado por"," ",o.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Saiph"}),"."]}),o.jsxs("div",{className:"flex justify-center space-x-8",children:[o.jsx("a",{href:"https://twitter.com",className:`${C==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Twitter de BlackStreaming",children:o.jsx(Pc,{size:24})}),o.jsx("a",{href:"https://instagram.com",className:`${C==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Instagram de BlackStreaming",children:o.jsx(Ic,{size:24})}),o.jsx("a",{href:"https://facebook.com",className:`${C==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Facebook de BlackStreaming",children:o.jsx(Cc,{size:24})})]})]})}),o.jsx(Bt,{children:E&&o.jsx(Z.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:ht,className:`fixed bottom-6 left-6 bg-blue-600/90 backdrop-blur-lg p-3 rounded-full hover:bg-blue-700/95 shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 ${C==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Volver al inicio de la pgina",children:o.jsx(Zg,{size:20})})})]})};J6.propTypes={};const AG=()=>{const[r,e]=A.useState(""),[t,n]=A.useState(""),[s,i]=A.useState(!1),[a,c]=A.useState(""),[d,h]=A.useState(!1),[p,m]=A.useState(()=>localStorage.getItem("theme")||"dark"),x=Gi(),v=A.useRef(null);A.useEffect(()=>{localStorage.setItem("theme",p),document.documentElement.classList.toggle("dark",p==="dark")},[p]),A.useEffect(()=>{const V=Zr.onAuthStateChanged(L=>{L&&x("/")});return()=>V()},[x]),A.useEffect(()=>{v.current?.focus()},[]);const _=A.useCallback(()=>r?t?t.length<6?"La contrasea debe tener al menos 6 caracteres":"":"Por favor, ingresa tu contrasea":"Por favor, ingresa tu nombre de usuario o correo electrnico",[r,t]),w=async V=>{try{const L=At(Pe,"users"),K=nr(L,br("username","==",V)),H=await sn(K);if(!H.empty){const S=H.docs[0].data();return{email:S.email,status:S.status||"active"}}return null}catch(L){return console.error("Error fetching username:",L),null}},E=A.useCallback(async V=>{V.preventDefault();const L=_();if(L){c(L);return}c(""),h(!0);try{let K=r,H="active";if(r.includes("@")){const S=At(Pe,"users"),k=nr(S,br("email","==",r)),P=await sn(k);P.empty||(H=P.docs[0].data().status||"active")}else{const S=await w(r);if(!S){c("Nombre de usuario no encontrado"),h(!1);return}K=S.email,H=S.status}if(H==="suspended"){c("Esta cuenta est suspendida y no se puede ingresar"),h(!1);return}await A7(Zr,K,t),e(""),n(""),x("/")}catch(K){c(K.code==="auth/wrong-password"?"Contrasea incorrecta":K.code==="auth/user-not-found"?"Usuario o correo electrnico no encontrado":K.code==="auth/too-many-requests"?"Demasiados intentos fallidos. Intenta de nuevo ms tarde.":"Error al iniciar sesin. Por favor, intenta de nuevo.")}finally{h(!1)}},[r,t,x,_]),R=A.useCallback(()=>{m(V=>V==="dark"?"light":"dark")},[]),C=A.useCallback(()=>{i(V=>!V)},[]);return o.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${p==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-100 via-gray-50 to-white text-gray-900"} flex flex-col items-center justify-between px-4 sm:px-6 lg:px-8 font-inter relative overflow-hidden`,children:[o.jsx("div",{className:"absolute bottom-4 right-4 z-20",children:o.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full backdrop-blur-sm ${p==="dark"?"bg-gray-800/50 text-gray-400 border border-gray-600/30":"bg-white/70 text-gray-600 border border-gray-300/30"}`,children:"V2.1.2"})}),o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[o.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${p==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),o.jsx("div",{className:"particles",children:[...Array(25)].map((V,L)=>o.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},L))})]}),o.jsx("main",{className:"flex-1 flex items-center justify-center w-full py-12 sm:py-16 relative z-10",children:o.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`${p==="dark"?"bg-gray-900/30 border-gray-700/30":"bg-white/90 border-gray-200/30"} backdrop-blur-xl rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md`,role:"form","aria-labelledby":"login-title",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Z.img,{src:Fc,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${p==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),o.jsx("h1",{className:"text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),o.jsx("button",{onClick:R,className:`p-2 rounded-full ${p==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${p==="dark"?"claro":"oscuro"}`,children:p==="dark"?o.jsx(Rc,{size:20}):o.jsx(jc,{size:20})})]}),o.jsx("h2",{id:"login-title",className:"text-2xl sm:text-3xl font-bold mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Iniciar Sesin"}),o.jsx(Bt,{children:a&&o.jsx(Z.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${p==="dark"?"bg-red-900/50 border-red-600/50":"bg-red-100/50 border-red-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-red-600 border-l-4`,role:"alert",children:a})}),o.jsxs("form",{onSubmit:E,className:"space-y-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(bc,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${p==="dark"?"text-gray-400":"text-gray-600"}`}),o.jsx(Z.input,{ref:v,type:"text",placeholder:"Nombre de usuario o correo electrnico",value:r,onChange:V=>e(V.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${p==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Nombre de usuario o correo electrnico",required:!0,whileFocus:{scale:1.02}})]}),o.jsxs("div",{className:"relative",children:[o.jsx(tw,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${p==="dark"?"text-gray-400":"text-gray-600"}`}),o.jsx(Z.input,{type:s?"text":"password",placeholder:"Contrasea",value:t,onChange:V=>n(V.target.value),className:`w-full pl-12 pr-12 py-3 rounded-full ${p==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Contrasea",required:!0,whileFocus:{scale:1.02}}),o.jsx("button",{type:"button",onClick:C,className:`absolute right-4 top-1/2 transform -translate-y-1/2 ${p==="dark"?"text-gray-400 hover:text-gray-200":"text-gray-600 hover:text-gray-800"} transition duration-200`,"aria-label":s?"Ocultar contrasea":"Mostrar contrasea",children:s?o.jsx($6,{size:18}):o.jsx(B6,{size:18})})]}),o.jsxs(Z.button,{type:"submit",disabled:d,className:`w-full bg-blue-600/90 backdrop-blur-xl py-3 rounded-full ${d?"opacity-50 cursor-not-allowed":"hover:bg-blue-700/95"} text-sm border ${p==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center justify-center text-white font-semibold`,"aria-label":"Iniciar sesin",whileHover:{scale:d?1:1.05},whileTap:{scale:d?1:.95},children:[d?o.jsxs(Z.svg,{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z"})]}):o.jsx(D1,{className:"mr-2"}),d?"Cargando...":"Iniciar Sesin"]})]}),o.jsxs("div",{className:"text-center text-sm mt-6 space-y-3",children:[o.jsxs("p",{className:`${p==="dark"?"text-gray-300":"text-gray-700"}`,children:["No tienes una cuenta?"," ",o.jsx(Ns,{to:"/register",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Ir a registrarse",children:"Regstrate aqu"})]}),o.jsxs("p",{className:`${p==="dark"?"text-gray-300":"text-gray-700"}`,children:["Olvidaste tu contrasea?"," ",o.jsx(Ns,{to:"/forgot-password",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Recuperar contrasea",children:"Recuprala aqu"})]})]})]})}),o.jsx("footer",{className:`${p==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-10 px-4 sm:px-6 lg:px-8 text-center text-sm relative z-10 w-full`,children:o.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[o.jsxs("p",{className:`${p==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["BlackStreaming - Todos los derechos reservados. Desarrollado por"," ",o.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Saiph"}),"."]}),o.jsxs("div",{className:"flex justify-center space-x-8",children:[o.jsx("a",{href:"https://twitter.com",className:`${p==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Twitter de BlackStreaming",children:o.jsx(Pc,{size:24})}),o.jsx("a",{href:"https://instagram.com",className:`${p==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Instagram de BlackStreaming",children:o.jsx(Ic,{size:24})}),o.jsx("a",{href:"https://facebook.com",className:`${p==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Facebook de BlackStreaming",children:o.jsx(Cc,{size:24})})]})]})})]})},NG=()=>{const r=[{name:"Per",code:"+51",flag:"",pattern:/^\d{9}$/,length:9},{name:"Estados Unidos",code:"+1",flag:"",pattern:/^\d{10}$/,length:10},{name:"Mxico",code:"+52",flag:"",pattern:/^\d{10}$/,length:10},{name:"Argentina",code:"+54",flag:"",pattern:/^\d{10}$/,length:10},{name:"Chile",code:"+56",flag:"",pattern:/^\d{9}$/,length:9},{name:"Colombia",code:"+57",flag:"",pattern:/^\d{10}$/,length:10}],[e,t]=A.useState(""),[n,s]=A.useState(""),[i,a]=A.useState(""),[c,d]=A.useState(""),[h,p]=A.useState(""),[m,x]=A.useState(r[0]),[v,_]=A.useState(!1),[w,E]=A.useState(""),[R,C]=A.useState(!1),[V,L]=A.useState(!1),[K,H]=A.useState(()=>localStorage.getItem("theme")||"dark"),S=Gi(),k=A.useRef(null);A.useEffect(()=>{localStorage.setItem("theme",K),document.documentElement.classList.toggle("dark",K==="dark")},[K]),A.useEffect(()=>{const pe=Zr.onAuthStateChanged(Ae=>{Ae&&!V&&S("/")});return()=>pe()},[S,V]),A.useEffect(()=>{k.current?.focus()},[]);const P=A.useCallback(async()=>e?/^[a-zA-Z0-9_]{3,20}$/.test(e)?(await ha(ot(Pe,"usernames",e.toLowerCase()))).exists()?"El nombre de usuario ya est en uso":n?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?i?m.pattern.test(i)?c?c.length<6?"La contrasea debe tener al menos 6 caracteres":"":"Por favor, ingresa una contrasea":`El nmero de telfono debe tener exactamente ${m.length} dgitos`:"Por favor, ingresa tu nmero de telfono":"Correo electrnico invlido":"Por favor, ingresa tu correo electrnico":"El nombre de usuario debe tener entre 3 y 20 caracteres alfanumricos":"Por favor, ingresa un nombre de usuario",[e,n,i,c,m]),j=A.useCallback(async pe=>{pe.preventDefault();const Ae=await P();if(Ae){E(Ae);return}E(""),C(!0),L(!0);try{const Me=(await T7(Zr,n,c)).user;console.log("Usuario creado en Auth:",Me.uid),await k7(Me,{displayName:e}),console.log("Perfil actualizado con username:",e);const Ee=Me.uid.slice(-6).toUpperCase();let Te=null;if(h){const Ne=nr(At(Pe,"users"),br("referralCode","==",h)),ae=await sn(Ne);if(!ae.empty)Te=ae.docs[0].id,console.log(`Referred by UID: ${Te}`);else{E("Cdigo de referido invlido"),console.warn(`Invalid referral code: ${h}`),C(!1),L(!1);return}}await ba(ot(Pe,"users",Me.uid),{username:e.toLowerCase(),email:n.toLowerCase(),phone:`${m.code}${i}`,phoneCountryCode:m.code,phoneCountryName:m.name,phoneDigits:i,referralCode:Ee,referredBy:Te,balance:0,createdAt:new Date}),console.log('Datos guardados en coleccin "users" con ID:',Me.uid),await ba(ot(Pe,"usernames",e.toLowerCase()),{email:n.toLowerCase(),uid:Me.uid}),console.log('Mapping guardado en coleccin "usernames" con ID:',e.toLowerCase()),t(""),s(""),a(""),d(""),p(""),S("/")}catch(Fe){console.error("Error en registro:",Fe),E(Fe.code==="auth/email-already-in-use"?"El correo electrnico ya est registrado":Fe.code==="auth/invalid-email"?"Correo electrnico invlido":Fe.code==="auth/weak-password"?"La contrasea es demasiado dbil":"Error al registrarse. Por favor, intenta de nuevo.")}finally{C(!1),L(!1)}},[e,n,i,c,h,m,S,P]),M=A.useCallback(()=>{H(pe=>pe==="dark"?"light":"dark")},[]),D=A.useCallback(()=>{_(pe=>!pe)},[]),O=A.useCallback(pe=>{const Ae=pe.target.value,Fe=r.find(Me=>Me.code===Ae)||m;x(Fe),i.length>Fe.length&&a(i.slice(0,Fe.length))},[m,i]);return o.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${K==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-100 via-gray-50 to-white text-gray-900"} flex flex-col items-center justify-between px-4 sm:px-6 lg:px-8 font-inter relative overflow-hidden`,children:[o.jsx("div",{className:"absolute bottom-4 right-4 z-20",children:o.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full backdrop-blur-sm ${K==="dark"?"bg-gray-800/50 text-gray-400 border border-gray-600/30":"bg-white/70 text-gray-600 border border-gray-300/30"}`,children:"V2.1.2"})}),o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[o.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${K==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),o.jsx("div",{className:"particles",children:[...Array(25)].map((pe,Ae)=>o.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},Ae))})]}),o.jsx("main",{className:"flex-1 flex items-center justify-center w-full py-12 sm:py-16 relative z-10",children:o.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`${K==="dark"?"bg-gray-900/30 border-gray-700/30":"bg-white/90 border-gray-200/30"} backdrop-blur-xl rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md`,role:"form","aria-labelledby":"register-title",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Z.img,{src:Fc,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${K==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),o.jsx("h1",{className:"text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),o.jsx("button",{onClick:M,className:`p-2 rounded-full ${K==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${K==="dark"?"claro":"oscuro"}`,children:K==="dark"?o.jsx(Rc,{size:20}):o.jsx(jc,{size:20})})]}),o.jsx(Bt,{children:o.jsx(Z.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,ease:"easeOut"},className:`${K==="dark"?"bg-green-900/30 border-green-600/30 text-green-200":"bg-green-100/50 border-green-300/30 text-green-800"} rounded-lg p-3 mb-6 text-center text-sm border-l-4 font-semibold`,role:"banner",children:"Regstrate gratis ahora!"})}),o.jsx("h2",{id:"register-title",className:"text-2xl sm:text-3xl font-bold mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Registrarse"}),o.jsx(Bt,{children:w&&o.jsx(Z.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${K==="dark"?"bg-red-900/50 border-red-600/50":"bg-red-100/50 border-red-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-red-600 border-l-4`,role:"alert",children:w})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(bc,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${K==="dark"?"text-gray-400":"text-gray-600"}`}),o.jsx(Z.input,{ref:k,type:"text",placeholder:"Elige un nombre de usuario",value:e,onChange:pe=>t(pe.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${K==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Nombre de usuario",required:!0,whileFocus:{scale:1.02}})]}),o.jsxs("div",{className:"relative",children:[o.jsx(md,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${K==="dark"?"text-gray-400":"text-gray-600"}`}),o.jsx(Z.input,{type:"email",placeholder:"Tu correo electrnico",value:n,onChange:pe=>s(pe.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${K==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Correo electrnico",required:!0,whileFocus:{scale:1.02}})]}),o.jsxs("div",{className:"relative flex items-center",children:[o.jsx(Nq,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${K==="dark"?"text-gray-400":"text-gray-600"}`}),o.jsxs("div",{className:"flex w-full",children:[o.jsx("select",{value:m.code,onChange:O,className:`flex items-center pl-3 pr-3 py-3 rounded-l-full text-sm font-medium cursor-pointer appearance-none bg-transparent border border-r-0 focus:outline-none focus:ring-2 focus:ring-blue-500/50 backdrop-blur-xl transition-all duration-300 hover:shadow-lg ${K==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"}`,children:r.map(pe=>o.jsxs("option",{value:pe.code,children:[pe.flag," ",pe.name," (",pe.code,")"]},pe.code))}),o.jsx(Z.input,{type:"tel",placeholder:`Nmero de telfono (${m.name})`,value:i,onChange:pe=>a(pe.target.value.replace(/\D/g,"")),className:`flex-1 pl-4 pr-4 py-3 rounded-r-full border border-l-0 focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg ${K==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"}`,"aria-label":"Nmero de telfono",required:!0,maxLength:m.length,whileFocus:{scale:1.02}})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx(tw,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${K==="dark"?"text-gray-400":"text-gray-600"}`}),o.jsx(Z.input,{type:v?"text":"password",placeholder:"Elige una contrasea",value:c,onChange:pe=>d(pe.target.value),className:`w-full pl-12 pr-12 py-3 rounded-full ${K==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Contrasea",required:!0,whileFocus:{scale:1.02}}),o.jsx("button",{onClick:D,className:`absolute right-4 top-1/2 transform -translate-y-1/2 ${K==="dark"?"text-gray-400 hover:text-gray-200":"text-gray-600 hover:text-gray-800"} transition duration-200`,"aria-label":v?"Ocultar contrasea":"Mostrar contrasea",children:v?o.jsx($6,{size:18}):o.jsx(B6,{size:18})})]}),o.jsxs("div",{className:"relative",children:[o.jsx(bc,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${K==="dark"?"text-gray-400":"text-gray-600"}`}),o.jsx(Z.input,{type:"text",placeholder:"Cdigo de referido (opcional)",value:h,onChange:pe=>p(pe.target.value.trim().toUpperCase()),className:`w-full pl-12 pr-4 py-3 rounded-full ${K==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Cdigo de referido",whileFocus:{scale:1.02}}),o.jsx("span",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-xs italic text-gray-500",children:"opcional"})]}),o.jsxs(Z.button,{onClick:j,disabled:R,className:`w-full bg-green-600/90 backdrop-blur-xl py-3 rounded-full ${R?"opacity-50 cursor-not-allowed":"hover:bg-green-700/95"} text-sm border ${K==="dark"?"border-green-500/30":"border-green-300/30"} hover:shadow-lg transition-all duration-300 flex items-center justify-center text-white font-semibold`,"aria-label":"Registrarse",whileHover:{scale:R?1:1.05},whileTap:{scale:R?1:.95},children:[R?o.jsxs(Z.svg,{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V8h8a8 8 0 01-16 0z"})]}):o.jsx(F1,{className:"mr-2"}),R?"Cargando...":"Registrarse"]})]}),o.jsxs("p",{className:`text-center text-sm mt-6 ${K==="dark"?"text-gray-300":"text-gray-700"}`,children:["Ya tienes una cuenta?"," ",o.jsx(Ns,{to:"/login",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Ir a iniciar sesin",children:"Inicia sesin aqu"})]})]})}),o.jsx("footer",{className:`${K==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-10 px-4 sm:px-6 lg:px-8 text-center text-sm relative z-10 w-full`,children:o.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[o.jsxs("p",{className:`${K==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["BlackStreaming - Todos los derechos reservados. Desarrollado por"," ",o.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Saiph"}),"."]}),o.jsxs("div",{className:"flex justify-center space-x-8",children:[o.jsx("a",{href:"https://twitter.com",className:`${K==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Twitter de BlackStreaming",children:o.jsx(Pc,{size:24})}),o.jsx("a",{href:"https://instagram.com",className:`${K==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Instagram de BlackStreaming",children:o.jsx(Ic,{size:24})}),o.jsx("a",{href:"https://facebook.com",className:`${K==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Facebook de BlackStreaming",children:o.jsx(Cc,{size:24})})]})]})})]})},kG=()=>{const[r,e]=A.useState(""),[t,n]=A.useState(""),[s,i]=A.useState(""),[a,c]=A.useState(!1),[d,h]=A.useState(()=>localStorage.getItem("theme")||"dark"),p=Gi(),m=A.useRef(null);A.useEffect(()=>{localStorage.setItem("theme",d),document.documentElement.classList.toggle("dark",d==="dark")},[d]),A.useEffect(()=>{const w=Zr.onAuthStateChanged(E=>{E&&p("/")});return()=>w()},[p]),A.useEffect(()=>{m.current?.focus()},[]);const x=A.useCallback(()=>r?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?"":"Correo electrnico invlido":"Por favor, ingresa tu correo electrnico",[r]),v=A.useCallback(async w=>{w.preventDefault();const E=x();if(E){n(E),i("");return}n(""),i(""),c(!0);try{await E7(Zr,r),i("Se ha enviado un enlace de restablecimiento de contrasea a tu correo electrnico."),e("")}catch(R){n(R.code==="auth/user-not-found"?"No se encontr un usuario con este correo electrnico":R.code==="auth/invalid-email"?"Correo electrnico invlido":R.code==="auth/too-many-requests"?"Demasiados intentos. Intenta de nuevo ms tarde.":"Error al enviar el enlace de restablecimiento. Por favor, intenta de nuevo.")}finally{c(!1)}},[r,x]),_=A.useCallback(()=>{h(w=>w==="dark"?"light":"dark")},[]);return o.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${d==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-100 via-gray-50 to-white text-gray-900"} flex flex-col items-center justify-between px-4 sm:px-6 lg:px-8 font-inter relative overflow-hidden`,children:[o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[o.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${d==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),o.jsx("div",{className:"particles",children:[...Array(25)].map((w,E)=>o.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},E))})]}),o.jsx("main",{className:"flex-1 flex items-center justify-center w-full py-12 sm:py-16 relative z-10",children:o.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`${d==="dark"?"bg-gray-900/30 border-gray-700/30":"bg-white/90 border-gray-200/30"} backdrop-blur-xl rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-md`,role:"form","aria-labelledby":"forgot-password-title",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Z.img,{src:Fc,alt:"Logo de BlackStreaming",className:`h-10 w-10 rounded-full border ${d==="dark"?"border-gray-700/50":"border-gray-200/50"} shadow-sm`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),o.jsx("h1",{className:"text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"BlackStreaming"})]}),o.jsx("button",{onClick:_,className:`p-2 rounded-full ${d==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200/50 hover:text-black"} transition duration-300`,"aria-label":`Cambiar a tema ${d==="dark"?"claro":"oscuro"}`,children:d==="dark"?o.jsx(Rc,{size:20}):o.jsx(jc,{size:20})})]}),o.jsx("h2",{id:"forgot-password-title",className:"text-2xl sm:text-3xl font-bold mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Recuperar Contrasea"}),o.jsxs(Bt,{children:[t&&o.jsx(Z.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${d==="dark"?"bg-red-900/50 border-red-600/50":"bg-red-100/50 border-red-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-red-600 border-l-4`,role:"alert",children:t}),s&&o.jsx(Z.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${d==="dark"?"bg-green-900/50 border-green-600/50":"bg-green-100/50 border-green-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-green-600 border-l-4`,role:"alert",children:s})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(md,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 ${d==="dark"?"text-gray-400":"text-gray-600"}`}),o.jsx(Z.input,{ref:m,type:"email",placeholder:"Tu correo electrnico",value:r,onChange:w=>e(w.target.value.trim()),className:`w-full pl-12 pr-4 py-3 rounded-full ${d==="dark"?"bg-gray-800/30 border-gray-600/30 text-gray-200":"bg-gray-100/80 border-gray-200/30 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm backdrop-blur-xl transition-all duration-300 hover:shadow-lg`,"aria-label":"Correo electrnico",required:!0,whileFocus:{scale:1.02}})]}),o.jsxs(Z.button,{onClick:v,disabled:a,className:`w-full bg-blue-600/90 backdrop-blur-xl py-3 rounded-full ${a?"opacity-50 cursor-not-allowed":"hover:bg-blue-700/95"} text-sm border ${d==="dark"?"border-blue-500/30":"border-blue-300/30"} hover:shadow-lg transition-all duration-300 flex items-center justify-center text-white font-semibold`,"aria-label":"Enviar enlace de restablecimiento",whileHover:{scale:a?1:1.05},whileTap:{scale:a?1:.95},children:[a?o.jsxs(Z.svg,{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z"})]}):o.jsx(md,{className:"mr-2"}),a?"Cargando...":"Enviar Enlace de Restablecimiento"]})]}),o.jsxs("div",{className:"text-center text-sm mt-6 space-y-3",children:[o.jsxs("p",{className:`${d==="dark"?"text-gray-300":"text-gray-700"}`,children:["Ya tienes una cuenta?"," ",o.jsx(Ns,{to:"/login",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Ir a iniciar sesin",children:"Inicia sesin aqu"})]}),o.jsxs("p",{className:`${d==="dark"?"text-gray-300":"text-gray-700"}`,children:["No tienes una cuenta?"," ",o.jsx(Ns,{to:"/register",className:"text-blue-500 hover:text-blue-400 font-semibold transition duration-200","aria-label":"Ir a registrarse",children:"Regstrate aqu"})]})]})]})}),o.jsx("footer",{className:`${d==="dark"?"bg-black/20":"bg-white/90"} backdrop-blur-xl py-10 px-4 sm:px-6 lg:px-8 text-center text-sm relative z-10 w-full`,children:o.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[o.jsxs("p",{className:`${d==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["BlackStreaming - Todos los derechos reservados. Desarrollado por"," ",o.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",children:"Saiph"}),"."]}),o.jsxs("div",{className:"flex justify-center space-x-8",children:[o.jsx("a",{href:"https://twitter.com",className:`${d==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Twitter de BlackStreaming",children:o.jsx(Pc,{size:24})}),o.jsx("a",{href:"https://instagram.com",className:`${d==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Instagram de BlackStreaming",children:o.jsx(Ic,{size:24})}),o.jsx("a",{href:"https://facebook.com",className:`${d==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-110`,"aria-label":"Visitar Facebook de BlackStreaming",children:o.jsx(Cc,{size:24})})]})]})})]})},SG=({isOpen:r,message:e,title:t,onClose:n})=>r?o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:t}),o.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-all duration-300",children:o.jsx(Zs,{size:20})})]}),o.jsx("p",{className:"text-gray-300 mb-6",children:e}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:n,className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,Z6=({isOpen:r,user:e,onClose:t,onSave:n,theme:s="dark"})=>{const i=s==="dark",[a,c]=A.useState(e?.username||""),[d,h]=A.useState(""),p={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,scale:.95,transition:{duration:.2}}},m={hover:{scale:1.05,transition:{duration:.2}},tap:{scale:.95}},x=v=>{if(v.preventDefault(),h(""),!a.trim()){h("El nombre de usuario no puede estar vaco.");return}n(e.id,a.trim())};return r?o.jsx(Z.div,{className:`fixed inset-0 ${i?"bg-black/70":"bg-black/50"} flex items-center justify-center z-50 p-4`,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},role:"dialog","aria-modal":"true","aria-labelledby":"edit-profile-title",children:o.jsx(Z.div,{className:`rounded-2xl shadow-md w-full max-w-md border ${i?"bg-gray-900/90 border-gray-700/50":"bg-white border-gray-300"}`,variants:p,initial:"hidden",animate:"visible",exit:"exit",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{id:"edit-profile-title",className:"text-xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Editar Perfil"}),o.jsx(Z.button,{onClick:t,className:`${i?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,variants:m,whileHover:"hover",whileTap:"tap","aria-label":"Cerrar modal",children:o.jsx(Zs,{size:20})})]}),o.jsxs("form",{onSubmit:x,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:`block mb-2 font-semibold ${i?"text-gray-300":"text-gray-700"}`,children:"Nombre de usuario"}),o.jsx("input",{type:"text",value:a,onChange:v=>c(v.target.value),className:`w-full px-4 py-2 rounded-xl ${i?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300`,required:!0,"aria-label":"Nombre de usuario"}),d&&o.jsx("p",{className:`text-sm mt-2 ${i?"text-red-400":"text-red-600"}`,children:d})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx(Z.button,{type:"button",onClick:t,className:`px-4 py-2 rounded-xl font-medium transition-all duration-300 ${i?"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-400":"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:m,whileHover:"hover",whileTap:"tap","aria-label":"Cancelar edicin",children:"Cancelar"}),o.jsx(Z.button,{type:"submit",className:`px-4 py-2 rounded-xl font-medium transition-all duration-300 ${i?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:m,whileHover:"hover",whileTap:"tap","aria-label":"Guardar perfil",children:"Guardar"})]})]})]})})}):null};Z6.propTypes={isOpen:q.bool.isRequired,user:q.shape({id:q.string.isRequired,username:q.string.isRequired}).isRequired,onClose:q.func.isRequired,onSave:q.func.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const eI=({isOpen:r,provider:e,onClose:t,onRate:n,theme:s="dark"})=>{const i=s==="dark",[a,c]=A.useState(0),[d,h]=A.useState(""),p={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.2}}},m={hidden:{opacity:0,scale:.95,y:20},visible:{opacity:1,scale:1,y:0,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,scale:.95,y:20,transition:{duration:.2}}},x={hover:{scale:1.2,y:-5,transition:{duration:.2,type:"spring"}},tap:{scale:.95}},v={hover:{scale:1.05,transition:{duration:.2}},tap:{scale:.95}},_=E=>{if(E.preventDefault(),h(""),a<1||a>5){h("Por favor, selecciona una calificacin entre 1 y 5 estrellas.");return}n(e.id,a),c(0)},w=E=>{c(E),h("")};return r?o.jsx(Bt,{children:o.jsx(Z.div,{className:`fixed inset-0 ${i?"bg-black/70 backdrop-blur-sm":"bg-black/50 backdrop-blur-sm"} flex items-center justify-center z-50 p-4`,variants:p,initial:"hidden",animate:"visible",exit:"exit",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"rate-provider-title",children:o.jsx(Z.div,{className:`rounded-3xl shadow-2xl w-full max-w-md border ${i?"bg-gradient-to-br from-gray-900/95 to-gray-800/95 border-gray-700/50":"bg-gradient-to-br from-white to-gray-50 border-gray-200/50"}`,variants:m,initial:"hidden",animate:"visible",exit:"exit",onClick:E=>E.stopPropagation(),children:o.jsxs("div",{className:"p-6 sm:p-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx(Z.h2,{id:"rate-provider-title",className:`text-xl sm:text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${i?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,initial:{x:-10},animate:{x:0},transition:{duration:.5},children:"Calificar Proveedor"}),o.jsx(Z.button,{onClick:t,className:`p-2 rounded-2xl ${i?"text-gray-400 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-200 hover:text-gray-900"} transition-all duration-300`,variants:v,whileHover:"hover",whileTap:"tap","aria-label":"Cerrar modal",children:o.jsx(Zs,{size:20})})]}),o.jsxs("form",{onSubmit:_,className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:`inline-flex items-center gap-2 p-3 rounded-2xl mb-4 ${i?"bg-gray-800/50":"bg-gray-100"}`,children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:o.jsx(js,{className:"text-white text-sm"})}),o.jsx("span",{className:`font-semibold ${i?"text-white":"text-gray-900"}`,children:e.name})]}),o.jsx("div",{className:"flex justify-center space-x-1 mb-4",children:[1,2,3,4,5].map(E=>o.jsx(Z.button,{type:"button",onClick:()=>w(E),className:`p-1 focus:outline-none focus:ring-2 focus:ring-yellow-500/50 rounded-full transition-all duration-200 ${E<=a?i?"text-yellow-400 hover:text-yellow-300":"text-yellow-600 hover:text-yellow-500":i?"text-gray-500 hover:text-gray-400":"text-gray-400 hover:text-gray-500"}`,variants:x,whileHover:"hover",whileTap:"tap","aria-label":`Seleccionar ${E} estrella${E>1?"s":""}`,children:o.jsx(bd,{size:28})},E))}),o.jsx("p",{className:`text-sm font-medium ${i?"text-gray-300":"text-gray-700"}`,children:a>0?`Calificacin seleccionada: ${a} estrella${a>1?"s":""}`:"Selecciona una calificacin"})]}),d&&o.jsx(Z.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-3 rounded-xl ${i?"bg-red-900/50 border border-red-500/30 text-red-300":"bg-red-50 border border-red-200 text-red-700"}`,children:d}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200/50 dark:border-gray-700/50",children:[o.jsx(Z.button,{type:"button",onClick:t,className:`px-6 py-3 rounded-2xl font-semibold transition-all duration-300 ${i?"bg-gray-600/70 hover:bg-gray-700/80 text-white focus:ring-gray-500/50":"bg-gray-400/70 hover:bg-gray-500/80 text-white focus:ring-gray-500/50"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:v,whileHover:"hover",whileTap:"tap","aria-label":"Cancelar calificacin",children:"Cancelar"}),o.jsxs(Z.button,{type:"submit",disabled:a===0,className:`px-6 py-3 rounded-2xl font-semibold flex items-center gap-2 transition-all duration-300 ${a>0?i?"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white focus:ring-green-400":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white focus:ring-green-500":i?"bg-gray-600/70 text-gray-400 cursor-not-allowed":"bg-gray-400/70 text-gray-500 cursor-not-allowed"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,variants:v,whileHover:a>0?"hover":{},whileTap:a>0?"tap":{},"aria-label":"Enviar calificacin",children:[o.jsx(bd,{size:18,className:"text-yellow-400"}),o.jsx("span",{children:"Enviar Calificacin"})]})]})]})]})})})}):null};eI.propTypes={isOpen:q.bool.isRequired,provider:q.shape({id:q.string.isRequired,name:q.string.isRequired}).isRequired,onClose:q.func.isRequired,onRate:q.func.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const CG=({userName:r,email:e,balance:t,orders:n,notifications:s,setActivePage:i,formatDate:a,theme:c="dark"})=>{const d=c==="dark",h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}},p={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}};return o.jsxs(Z.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${d?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:p,initial:"hidden",animate:"visible",children:[o.jsxs(Z.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-6 bg-clip-text text-transparent bg-gradient-to-r ${d?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:["Bienvenido, ",o.jsx("span",{className:"text-red-400",children:r.username})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${d?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:h,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${d?"text-blue-400":"text-blue-600"}`,children:[o.jsx(js,{size:20}),"Informacin de cuenta"]}),o.jsxs("div",{className:`space-y-4 ${d?"text-gray-300":"text-gray-700"}`,children:[o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-gray-800/20 dark:bg-gray-700/20",children:[o.jsx(js,{className:"text-blue-400 flex-shrink-0",size:20}),o.jsx("span",{className:"font-medium",children:r.username})]}),o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-gray-800/20 dark:bg-gray-700/20",children:[o.jsx(qr,{className:"text-blue-400 flex-shrink-0",size:20}),o.jsx("span",{className:"font-medium",children:e})]}),o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-gray-800/20 dark:bg-gray-700/20",children:[o.jsx(Nh,{className:"text-blue-400 flex-shrink-0",size:20}),o.jsx("span",{className:"font-medium",children:r.phone||"No especificado"})]})]})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${d?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:h,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${d?"text-green-400":"text-green-600"}`,children:[o.jsx(Nh,{size:20}),"Saldo disponible"]}),o.jsxs("p",{className:`text-4xl font-bold ${d?"text-white":"text-gray-900"}`,children:["S/ ",t.toFixed(2)]}),o.jsx(Z.button,{onClick:()=>i("recargar"),className:`mt-6 w-full px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-green-500/50 ${d?"from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700":"from-green-600 to-emerald-700 hover:from-green-700 hover:to-emerald-800"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Recargar Saldo"})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${d?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:h,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${d?"text-purple-400":"text-purple-600"}`,children:[o.jsx(qr,{size:20}),"Pedidos activos"]}),o.jsx("p",{className:`text-4xl font-bold ${d?"text-white":"text-gray-900"}`,children:n.filter(m=>new Date(m.endDate)>new Date&&(m.status==="completed"||m.status==="active")).length}),o.jsx(Z.button,{onClick:()=>i("pedidos"),className:`mt-6 w-full px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-purple-500/50 ${d?"from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700":"from-purple-600 to-pink-800 hover:from-purple-700 hover:to-pink-900"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Ver Pedidos"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[o.jsxs(Z.div,{className:`rounded-2xl p-6 shadow-xl border backdrop-blur-sm ${d?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:h,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${d?"text-white":"text-gray-900"}`,children:[o.jsx(qr,{size:20}),"Pedidos recientes"]}),o.jsx(Bt,{children:n.length>0?n.slice(0,3).map((m,x)=>{const v=new Date(m.endDate)>new Date&&(m.status==="completed"||m.status==="active"),_=m.status==="pending";return o.jsxs(Z.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:x*.1},className:`mb-4 p-4 rounded-xl transition-all duration-300 border ${d?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,whileHover:{scale:1.02},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("p",{className:`font-semibold ${d?"text-white":"text-gray-900"}`,children:m.productName||"Producto sin nombre"}),o.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${m.status==="pending"?d?"bg-yellow-900/80 text-yellow-300 border border-yellow-500/30":"bg-yellow-100 text-yellow-800 border border-yellow-300":v?d?"bg-green-900/80 text-green-300 border border-green-500/30":"bg-green-100 text-green-800 border border-green-300":d?"bg-red-900/80 text-red-300 border border-red-500/30":"bg-red-100 text-red-800 border border-red-300"}`,children:_?"A pedido":v?"Activo":"Expirado"})]}),o.jsxs("p",{className:`text-sm ${d?"text-gray-400":"text-gray-600"}`,children:["Vence: ",a(m.endDate)]})]},m.id)}):o.jsx(Z.p,{initial:{opacity:0},animate:{opacity:1},className:`py-8 text-center ${d?"text-gray-400":"text-gray-500"}`,children:"No tienes pedidos recientes"})}),n.length>3&&o.jsx(Z.button,{onClick:()=>i("pedidos"),className:`w-full mt-4 px-6 py-3 text-center text-sm transition-all duration-300 rounded-xl border-2 font-medium ${d?"border-blue-500/50 text-blue-400 hover:bg-blue-500/10":"border-blue-500/50 text-blue-600 hover:bg-blue-500/10"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Ver todos los pedidos"})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 shadow-xl border backdrop-blur-sm ${d?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:h,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${d?"text-white":"text-gray-900"}`,children:[o.jsx(Ys,{size:20}),"Notificaciones"]}),o.jsx(Bt,{children:s.length>0?s.map((m,x)=>o.jsxs(Z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3,delay:x*.1},className:`mb-4 p-4 rounded-xl transition-all duration-300 border ${d?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,whileHover:{scale:1.02},children:[o.jsx("p",{className:`font-medium ${d?"text-gray-300":"text-gray-700"}`,children:m.message}),o.jsx("p",{className:`text-xs mt-2 ${d?"text-gray-400":"text-gray-500"}`,children:a(m.updatedAt?.toDate?.()||new Date)})]},m.id)):o.jsx(Z.p,{initial:{opacity:0},animate:{opacity:1},className:`py-8 text-center ${d?"text-gray-400":"text-gray-500"}`,children:"No hay notificaciones"})})]})]}),o.jsxs(Z.div,{className:`rounded-3xl p-6 shadow-2xl border backdrop-blur-sm ${d?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:h,whileHover:"hover",children:[o.jsxs("h3",{className:`text-xl font-bold mb-6 flex items-center gap-2 ${d?"text-white":"text-gray-900"}`,children:[o.jsx(qr,{size:24}),"nete a nuestros grupos"]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[{href:"https://chat.whatsapp.com/IG8v1E00lAD6RIOo7ZB5Kv",icon:qr,title:"Avisos",subtitle:"Grupo de WhatsApp",color:"from-green-500 to-emerald-600"},{href:"https://chat.whatsapp.com/Gs6kTW4DBTi7dEMhnZV1yb",icon:qr,title:"General",subtitle:"Grupo de WhatsApp",color:"from-blue-500 to-cyan-600"},{href:"https://chat.whatsapp.com/BqCOR6w8002695hbYXf5KA",icon:qr,title:"Publicidad",subtitle:"Grupo de WhatsApp",color:"from-purple-500 to-pink-600"}].map((m,x)=>o.jsxs(Z.a,{href:m.href,target:"_blank",rel:"noopener noreferrer",className:`flex items-center p-4 rounded-2xl transition-all duration-300 border group ${d?"bg-gray-700/50 hover:bg-gray-600/70 border-gray-600/50":"bg-gray-200/50 hover:bg-gray-300/70 border-gray-300/50"}`,whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:[o.jsx(Z.div,{className:`flex-shrink-0 p-3 rounded-xl mr-4 bg-gradient-to-br ${m.color} text-white shadow-lg`,whileHover:{scale:1.1},children:o.jsx(m.icon,{size:24})}),o.jsxs("div",{children:[o.jsx("p",{className:`font-semibold ${d?"text-white":"text-gray-900"} group-hover:text-blue-500 transition-colors`,children:m.title}),o.jsx("p",{className:`text-sm ${d?"text-gray-300":"text-gray-600"}`,children:m.subtitle})]})]},x))})]})]})},tI=({notifications:r,formatDate:e,theme:t="dark"})=>{const n=t==="dark",s={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return o.jsxs(Z.div,{className:`p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${n?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:s,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"notifications-title",children:[o.jsxs(Z.h3,{id:"notifications-title",className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-8 bg-clip-text text-transparent bg-gradient-to-r ${n?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"} text-center`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:["Notificaciones",o.jsx("span",{className:`ml-2 bg-gradient-to-r ${n?"from-blue-400/20 to-purple-600/20":"from-blue-600/20 to-purple-800/20"} px-2 py-1 rounded-full text-sm font-medium`,children:r.length})]}),o.jsx(Bt,{children:r.length>0?o.jsx(Z.div,{className:"space-y-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:r.map((a,c)=>o.jsx(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm transition-all duration-300 ${n?"bg-gray-800/70 border-gray-700/50 hover:bg-gray-700/70":"bg-white/70 border-gray-200/50 hover:bg-gray-50/70"}`,variants:i,whileHover:"hover",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:c*.1},"aria-labelledby":`notification-${a.id}-title`,children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"flex-shrink-0 pt-1",children:o.jsx(Ah,{className:`text-xl ${n?"text-blue-400":"text-blue-600"}`})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{id:`notification-${a.id}-title`,className:`font-semibold text-base ${n?"text-white":"text-gray-900"} mb-2`,children:a.message}),o.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:e(a.updatedAt?.toDate?.()||new Date)})]})]})},a.id))}):o.jsxs(Z.div,{className:"text-center py-16",variants:i,initial:"hidden",animate:"visible",children:[o.jsx(Z.div,{className:`mx-auto w-20 h-20 rounded-2xl bg-gradient-to-br from-gray-400 to-gray-500 flex items-center justify-center mb-6 shadow-lg ${n?"bg-gray-700/50":"bg-gray-200/50"}`,animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:o.jsx(Ah,{className:"text-white",size:32})}),o.jsx("h4",{className:`text-xl font-semibold mb-2 ${n?"text-gray-300":"text-gray-700"}`,children:"No hay notificaciones"}),o.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"No tienes mensajes nuevos. Vuelve pronto para ver actualizaciones!"})]})})]})};tI.propTypes={notifications:q.arrayOf(q.shape({id:q.string.isRequired,message:q.string.isRequired,updatedAt:q.oneOfType([q.instanceOf(Date),q.shape({toDate:q.func})])})).isRequired,formatDate:q.func.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const IG="/assets/yape-sz-BXIcptMw.webp",PG="/assets/binance-sz-CWIZMLwL.webp",rI=({amount:r,setAmount:e,topUps:t,actionLoading:n,handleTopUpRequest:s,formatDate:i,theme:a="dark"})=>{const c=a==="dark",[d,h]=A.useState("PEN"),[p,m]=A.useState(3.75),[x,v]=A.useState(!1),[_,w]=A.useState(!1),[E,R]=A.useState(""),[C,V]=A.useState(5),L={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5}}};A.useEffect(()=>{(async()=>{v(!0),w(!1);try{const D=await fetch("https://api.exchangerate-api.com/v4/latest/USD");if(!D.ok)throw new Error("API request failed");const pe=(await D.json()).rates.PEN||3.75;m(pe*1.1)}catch(D){console.error("Error fetching exchange rate:",D),w(!0)}finally{v(!1)}})()},[]),A.useEffect(()=>{const M=Math.ceil(C/(p/1.1));V(d==="PEN"?5:M)},[d,p]),A.useEffect(()=>{const M=parseFloat(E);if(isNaN(M))e("");else{const D=d==="USD"?M*p:M;e(D.toFixed(2))}},[E,d,p,e]);const K=M=>{const D=M.target.value;(/^\d*\.?\d{0,2}$/.test(D)||D==="")&&R(D)},H=parseFloat(E),S=d==="USD"?H*p:H,k=isNaN(S)?"0.00":S.toFixed(2),P=!isNaN(H)&&H>=C,j=`Hola , he realizado una recarga a travs de ${d==="PEN"?"Yape":"Binance"} por ${d==="PEN"?`S/ ${k}`:`$ ${H?.toFixed(2)||"0.00"} (equivalente a S/ ${k})`}. Por favor, confirma mi pago.`;return o.jsxs(Z.div,{className:"space-y-8 max-w-6xl mx-auto px-4 sm:px-0",variants:L,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"topup-title",children:[o.jsxs("div",{className:`p-6 sm:p-8 rounded-3xl shadow-md border ${c?"bg-gray-900/80 border-gray-700/30":"bg-white border-gray-300"}`,children:[o.jsx("h3",{id:"topup-title",className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-6 text-center",children:"Recargar saldo"}),o.jsxs("div",{className:"max-w-lg mx-auto space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block mb-2 font-medium ${c?"text-gray-300":"text-gray-700"}`,children:"Moneda"}),o.jsxs("select",{value:d,onChange:M=>{h(M.target.value),R(""),e("")},className:`w-full px-4 py-3 rounded-xl ${c?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300`,"aria-label":"Seleccionar moneda",children:[o.jsx("option",{value:"PEN",children:"S/ (PEN)"}),o.jsx("option",{value:"USD",children:"$ (USD)"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block mb-2 font-medium ${c?"text-gray-300":"text-gray-700"}`,children:["Monto a recargar (",d==="PEN"?"S/":"$",")"]}),o.jsx("input",{type:"number",value:E,onChange:K,className:`w-full px-4 py-3 rounded-xl ${c?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300 ${!P&&E?"border-red-500 focus:ring-red-400":""}`,placeholder:`Mnimo ${d==="PEN"?"S/ 5.00":`$${C.toFixed(2)}`}`,min:C,step:"0.01","aria-label":`Monto a recargar en ${d}`,"aria-invalid":!P&&E}),d==="USD"&&!isNaN(H)&&o.jsxs("p",{className:`text-sm mt-2 ${_?"text-red-400":c?"text-gray-400":"text-gray-600"}`,children:[_?"Error al cargar tasa. Usando tasa por defecto.":`Equivalente: S/ ${k} (Tasa: 1 USD  ${p.toFixed(2)} PEN)`,x&&" (Cargando tasa...)"]}),!P&&E&&o.jsxs("p",{className:"text-sm text-red-400 mt-1",children:["Monto mnimo: ",d==="PEN"?"S/ 5.00":`$${C.toFixed(2)}`]})]}),o.jsx(Z.button,{onClick:s,disabled:n.topUp||!P,className:`w-full py-3 px-4 rounded-xl font-medium text-lg transition-all duration-300 ${P&&!n.topUp?c?"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400":"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-500":"bg-gray-300 text-gray-500 cursor-not-allowed"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,whileHover:{scale:P&&!n.topUp?1.05:1},whileTap:{scale:P&&!n.topUp?.95:1},"aria-label":"Solicitar recarga",children:n.topUp?o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("div",{className:"animate-spin h-6 w-6 border-3 border-white rounded-full border-t-transparent mr-2"}),"Procesando..."]}):"Solicitar recarga"})]}),o.jsx("div",{className:`mt-8 p-6 rounded-2xl border ${c?"bg-gray-800/50 border-gray-700/30":"bg-gray-100 border-gray-300"} max-w-lg mx-auto`,children:o.jsxs(Z.div,{className:"animate-fade-in",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[o.jsxs("h4",{className:`text-lg font-semibold ${c?"text-blue-400":"text-blue-600"} mb-4 flex items-center`,children:[o.jsx(Xs,{className:"mr-2"})," Pago con ",d==="PEN"?"Yape":"Binance"]}),o.jsxs("p",{className:`mb-3 ${c?"text-gray-300":"text-gray-700"}`,children:["Escanea el cdigo QR",d==="PEN"?" o usa Yape con el nmero:":"."]}),d==="PEN"&&o.jsx("p",{className:`text-xl font-bold ${c?"text-white":"text-gray-900"} mb-3 text-center`,children:" 990477711"}),o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:`p-4 rounded-xl shadow-md ${c?"bg-white border-4 border-blue-600":"bg-white border border-gray-300"}`,children:o.jsx("img",{src:d==="PEN"?IG:PG,alt:`${d==="PEN"?"Yape":"Binance"} QR Code`,className:"w-48 h-48 object-contain",loading:"lazy"})})}),o.jsxs("p",{className:`mb-4 ${c?"text-gray-300":"text-gray-700"} text-center`,children:["Realiza el pago de ",d==="PEN"?`S/ ${k}`:`$ ${H?.toFixed(2)||"0.00"} (S/ ${k})`,". Confirma tu recarga va WhatsApp."]}),o.jsxs(Z.a,{href:`https://wa.me/51940990278?text=${encodeURIComponent(j)}`,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center justify-center w-full px-6 py-3 rounded-xl font-medium transition-all duration-300 ${c?"bg-green-500 hover:bg-green-600 text-white focus:ring-green-400":"bg-green-500 hover:bg-green-600 text-white focus:ring-green-500"} shadow-md hover:shadow-lg focus:outline-none focus:ring-2`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Confirmar pago por WhatsApp con ${d==="PEN"?"Yape":"Binance"}`,children:[o.jsx(qr,{className:"mr-2"})," Confirmar por WhatsApp"]})]})})]}),o.jsxs("div",{className:`p-6 sm:p-8 rounded-3xl shadow-md border ${c?"bg-gray-900/80 border-gray-700/30":"bg-white border-gray-300"}`,children:[o.jsx("h3",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-6 text-center",children:"Historial de recargas"}),t.length>0?o.jsx("div",{className:"overflow-x-auto rounded-xl border",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[o.jsx("thead",{className:`${c?"bg-gray-800/50":"bg-gray-100"}`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${c?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Monto"}),o.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${c?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Estado"}),o.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${c?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Fecha"})]})}),o.jsx("tbody",{className:`${c?"bg-gray-800/50":"bg-white"} divide-y ${c?"divide-gray-600/50":"divide-gray-200"}`,children:t.map(M=>{const D=M.status==="aprobado"?"Aprobado":M.status==="pendiente"?"Pendiente":"Rechazado",O=M.status==="aprobado"?"green":M.status==="pendiente"?"yellow":"red";return o.jsxs("tr",{className:`${c?"hover:bg-gray-700/50":"hover:bg-gray-100"} transition-all duration-300`,children:[o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap font-medium ${c?"text-white":"text-gray-900"}`,children:["S/ ",M.amount.toFixed(2)]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full capitalize ${c?`bg-${O}-900/80 text-${O}-400`:`bg-${O}-500/20 text-${O}-600`}`,children:D})}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${c?"text-gray-400":"text-gray-600"}`,children:i(M.date)})]},M.id)})})]})}):o.jsxs(Z.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-12",children:[o.jsx(Xs,{className:`mx-auto text-4xl ${c?"text-gray-400":"text-gray-500"} mb-4`}),o.jsx("p",{className:`text-lg ${c?"text-gray-400":"text-gray-600"}`,children:"No hay recargas registradas"})]})]})]})};rI.propTypes={amount:q.oneOfType([q.string,q.number]).isRequired,setAmount:q.func.isRequired,topUps:q.arrayOf(q.shape({id:q.string.isRequired,amount:q.oneOfType([q.string,q.number]).isRequired,status:q.string.isRequired,date:q.oneOfType([q.instanceOf(Date),q.string]).isRequired})).isRequired,actionLoading:q.shape({topUp:q.bool}).isRequired,handleTopUpRequest:q.func.isRequired,formatDate:q.func.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const nI=({providers:r,openRateProviderModal:e,deleteRatingProvider:t,theme:n="dark"})=>{const s=n==="dark",i={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},a={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return o.jsxs(Z.div,{className:`p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${s?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:i,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"providers-title",children:[o.jsxs(Z.h3,{id:"providers-title",className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-8 bg-clip-text text-transparent bg-gradient-to-r ${s?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"} text-center`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:["Proveedores",o.jsx("span",{className:`ml-2 bg-gradient-to-r ${s?"from-blue-400/20 to-purple-600/20":"from-blue-600/20 to-purple-800/20"} px-2 py-1 rounded-full text-sm font-medium`,children:r.length})]}),o.jsx(Bt,{children:r.length>0?o.jsx(Z.div,{className:"space-y-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:r.map((c,d)=>o.jsx(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm transition-all duration-300 ${s?"bg-gray-800/70 border-gray-700/50 hover:bg-gray-700/70":"bg-white/70 border-gray-200/50 hover:bg-gray-50/70"}`,variants:a,whileHover:"hover","aria-labelledby":`provider-${c.id}-title`,children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:o.jsx(js,{className:"text-white",size:24})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{id:`provider-${c.id}-title`,className:`font-bold text-lg ${s?"text-white":"text-gray-900"}`,children:c.name}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(Nh,{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`}),o.jsx("span",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:c.phone})]}),c.hasRated&&o.jsx("div",{className:"flex items-center gap-2 mt-2",children:o.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((h,p)=>o.jsx(bd,{size:16,className:`${p<c.rating?"text-yellow-400 fill-current":s?"text-gray-600":"text-gray-400"}`},p))})})]})]}),c.hasRated?o.jsxs(Z.button,{onClick:()=>t(c),className:`px-4 py-2 rounded-xl font-semibold transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 ${s?"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white focus:ring-red-400":"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white focus:ring-red-500"}`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Eliminar valoracin del proveedor ${c.name}`,children:[o.jsx(aw,{size:16}),o.jsx("span",{className:"hidden sm:inline",children:"Eliminar"})]}):o.jsxs(Z.button,{onClick:()=>e(c),className:`px-6 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 ${s?"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white focus:ring-purple-400":"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white focus:ring-purple-500"}`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Calificar al proveedor ${c.name}`,children:[o.jsx(bd,{size:18}),o.jsx("span",{children:"Calificar"})]})]})},c.id))}):o.jsxs(Z.div,{className:"text-center py-16",variants:a,initial:"hidden",animate:"visible",children:[o.jsx(Z.div,{className:`mx-auto w-20 h-20 rounded-2xl bg-gradient-to-br from-gray-400 to-gray-500 flex items-center justify-center mb-6 shadow-lg ${s?"bg-gray-700/50":"bg-gray-200/50"}`,animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:o.jsx(js,{className:"text-white",size:32})}),o.jsx("h4",{className:`text-xl font-semibold mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"No hay proveedores"}),o.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"No has realizado compras con proveedores an. Tu primer pedido desbloquear esta seccin!"})]})})]})};nI.propTypes={providers:q.arrayOf(q.shape({id:q.string.isRequired,name:q.string.isRequired,phone:q.string.isRequired,hasRated:q.bool.isRequired,rating:q.number})).isRequired,openRateProviderModal:q.func.isRequired,deleteRatingProvider:q.func.isRequired,theme:q.oneOf(["light","dark"]).isRequired};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var sg={};sg.version="0.18.5";var sI=1252,jG=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],iI=function(r){jG.indexOf(r)!=-1&&(sI=r)};function RG(){iI(1252)}var kh=function(r){iI(r)};function DG(){kh(1200),RG()}var Mp=function(e){return String.fromCharCode(e)},kN=function(e){return String.fromCharCode(e)},ig,Yo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Sh(r){for(var e="",t=0,n=0,s=0,i=0,a=0,c=0,d=0,h=0;h<r.length;)t=r.charCodeAt(h++),i=t>>2,n=r.charCodeAt(h++),a=(t&3)<<4|n>>4,s=r.charCodeAt(h++),c=(n&15)<<2|s>>6,d=s&63,isNaN(n)?c=d=64:isNaN(s)&&(d=64),e+=Yo.charAt(i)+Yo.charAt(a)+Yo.charAt(c)+Yo.charAt(d);return e}function io(r){var e="",t=0,n=0,s=0,i=0,a=0,c=0,d=0;r=r.replace(/[^\w\+\/\=]/g,"");for(var h=0;h<r.length;)i=Yo.indexOf(r.charAt(h++)),a=Yo.indexOf(r.charAt(h++)),t=i<<2|a>>4,e+=String.fromCharCode(t),c=Yo.indexOf(r.charAt(h++)),n=(a&15)<<4|c>>2,c!==64&&(e+=String.fromCharCode(n)),d=Yo.indexOf(r.charAt(h++)),s=(c&3)<<6|d,d!==64&&(e+=String.fromCharCode(s));return e}var pr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),ho=(function(){if(typeof Buffer<"u"){var r=!Buffer.from;if(!r)try{Buffer.from("foo","utf8")}catch{r=!0}return r?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function wc(r){return pr?Buffer.alloc?Buffer.alloc(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}function SN(r){return pr?Buffer.allocUnsafe?Buffer.allocUnsafe(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}var Oi=function(e){return pr?ho(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function sx(r){if(typeof ArrayBuffer>"u")return Oi(r);for(var e=new ArrayBuffer(r.length),t=new Uint8Array(e),n=0;n!=r.length;++n)t[n]=r.charCodeAt(n)&255;return e}function df(r){if(Array.isArray(r))return r.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],t=0;t<r.length;++t)e[t]=String.fromCharCode(r[t]);return e.join("")}function FG(r){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(r)}var zn=pr?function(r){return Buffer.concat(r.map(function(e){return Buffer.isBuffer(e)?e:ho(e)}))}:function(r){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<r.length;++e)t+=r[e].length;var n=new Uint8Array(t),s=0;for(e=0,t=0;e<r.length;t+=s,++e)if(s=r[e].length,r[e]instanceof Uint8Array)n.set(r[e],t);else{if(typeof r[e]=="string")throw"wtf";n.set(new Uint8Array(r[e]),t)}return n}return[].concat.apply([],r.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function OG(r){for(var e=[],t=0,n=r.length+250,s=wc(r.length+255),i=0;i<r.length;++i){var a=r.charCodeAt(i);if(a<128)s[t++]=a;else if(a<2048)s[t++]=192|a>>6&31,s[t++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var c=r.charCodeAt(++i)&1023;s[t++]=240|a>>8&7,s[t++]=128|a>>2&63,s[t++]=128|c>>6&15|(a&3)<<4,s[t++]=128|c&63}else s[t++]=224|a>>12&15,s[t++]=128|a>>6&63,s[t++]=128|a&63;t>n&&(e.push(s.slice(0,t)),t=0,s=wc(65535),n=65530)}return e.push(s.slice(0,t)),zn(e)}var K0=/\u0000/g,Vp=/[\u0001-\u0006]/g;function Ku(r){for(var e="",t=r.length-1;t>=0;)e+=r.charAt(t--);return e}function Vi(r,e){var t=""+r;return t.length>=e?t:Jr("0",e-t.length)+t}function ow(r,e){var t=""+r;return t.length>=e?t:Jr(" ",e-t.length)+t}function ag(r,e){var t=""+r;return t.length>=e?t:t+Jr(" ",e-t.length)}function LG(r,e){var t=""+Math.round(r);return t.length>=e?t:Jr("0",e-t.length)+t}function MG(r,e){var t=""+r;return t.length>=e?t:Jr("0",e-t.length)+t}var CN=Math.pow(2,32);function ku(r,e){if(r>CN||r<-CN)return LG(r,e);var t=Math.round(r);return MG(t,e)}function og(r,e){return e=e||0,r.length>=7+e&&(r.charCodeAt(e)|32)===103&&(r.charCodeAt(e+1)|32)===101&&(r.charCodeAt(e+2)|32)===110&&(r.charCodeAt(e+3)|32)===101&&(r.charCodeAt(e+4)|32)===114&&(r.charCodeAt(e+5)|32)===97&&(r.charCodeAt(e+6)|32)===108}var IN=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Ev=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function VG(r){return r||(r={}),r[0]="General",r[1]="0",r[2]="0.00",r[3]="#,##0",r[4]="#,##0.00",r[9]="0%",r[10]="0.00%",r[11]="0.00E+00",r[12]="# ?/?",r[13]="# ??/??",r[14]="m/d/yy",r[15]="d-mmm-yy",r[16]="d-mmm",r[17]="mmm-yy",r[18]="h:mm AM/PM",r[19]="h:mm:ss AM/PM",r[20]="h:mm",r[21]="h:mm:ss",r[22]="m/d/yy h:mm",r[37]="#,##0 ;(#,##0)",r[38]="#,##0 ;[Red](#,##0)",r[39]="#,##0.00;(#,##0.00)",r[40]="#,##0.00;[Red](#,##0.00)",r[45]="mm:ss",r[46]="[h]:mm:ss",r[47]="mmss.0",r[48]="##0.0E+0",r[49]="@",r[56]='"/ "hh""mm""ss" "',r}var en={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},PN={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},$G={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function lg(r,e,t){for(var n=r<0?-1:1,s=r*n,i=0,a=1,c=0,d=1,h=0,p=0,m=Math.floor(s);h<e&&(m=Math.floor(s),c=m*a+i,p=m*h+d,!(s-m<5e-8));)s=1/(s-m),i=a,a=c,d=h,h=p;if(p>e&&(h>e?(p=d,c=i):(p=h,c=a)),!t)return[0,n*c,p];var x=Math.floor(n*c/p);return[x,n*c-x*p,p]}function $p(r,e,t){if(r>2958465||r<0)return null;var n=r|0,s=Math.floor(86400*(r-n)),i=0,a=[],c={D:n,T:s,u:86400*(r-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(c.u)<1e-6&&(c.u=0),e&&e.date1904&&(n+=1462),c.u>.9999&&(c.u=0,++s==86400&&(c.T=s=0,++n,++c.D)),n===60)a=t?[1317,10,29]:[1900,2,29],i=3;else if(n===0)a=t?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var d=new Date(1900,0,1);d.setDate(d.getDate()+n-1),a=[d.getFullYear(),d.getMonth()+1,d.getDate()],i=d.getDay(),n<60&&(i=(i+6)%7),t&&(i=GG(d,a))}return c.y=a[0],c.m=a[1],c.d=a[2],c.S=s%60,s=Math.floor(s/60),c.M=s%60,s=Math.floor(s/60),c.H=s,c.q=i,c}var aI=new Date(1899,11,31,0,0,0),BG=aI.getTime(),UG=new Date(1900,2,1,0,0,0);function oI(r,e){var t=r.getTime();return e?t-=1461*24*60*60*1e3:r>=UG&&(t+=1440*60*1e3),(t-(BG+(r.getTimezoneOffset()-aI.getTimezoneOffset())*6e4))/(1440*60*1e3)}function lw(r){return r.indexOf(".")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function zG(r){return r.indexOf("E")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function HG(r){var e=r<0?12:11,t=lw(r.toFixed(12));return t.length<=e||(t=r.toPrecision(10),t.length<=e)?t:r.toExponential(5)}function WG(r){var e=lw(r.toFixed(11));return e.length>(r<0?12:11)||e==="0"||e==="-0"?r.toPrecision(6):e}function qG(r){var e=Math.floor(Math.log(Math.abs(r))*Math.LOG10E),t;return e>=-4&&e<=-1?t=r.toPrecision(10+e):Math.abs(e)<=9?t=HG(r):e===10?t=r.toFixed(10).substr(0,12):t=WG(r),lw(zG(t.toUpperCase()))}function L1(r,e){switch(typeof r){case"string":return r;case"boolean":return r?"TRUE":"FALSE";case"number":return(r|0)===r?r.toString(10):qG(r);case"undefined":return"";case"object":if(r==null)return"";if(r instanceof Date)return dl(14,oI(r,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+r)}function GG(r,e){e[0]-=581;var t=r.getDay();return r<60&&(t=(t+6)%7),t}function KG(r,e,t,n){var s="",i=0,a=0,c=t.y,d,h=0;switch(r){case 98:c=t.y+543;case 121:switch(e.length){case 1:case 2:d=c%100,h=2;break;default:d=c%1e4,h=4;break}break;case 109:switch(e.length){case 1:case 2:d=t.m,h=e.length;break;case 3:return Ev[t.m-1][1];case 5:return Ev[t.m-1][0];default:return Ev[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:d=t.d,h=e.length;break;case 3:return IN[t.q][0];default:return IN[t.q][1]}break;case 104:switch(e.length){case 1:case 2:d=1+(t.H+11)%12,h=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:d=t.H,h=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:d=t.M,h=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?Vi(t.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,i=Math.round(a*(t.S+t.u)),i>=60*a&&(i=0),e==="s"?i===0?"0":""+i/a:(s=Vi(i,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":d=t.D*24+t.H;break;case"[m]":case"[mm]":d=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":d=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}h=e.length===3?1:2;break;case 101:d=c,h=1;break}var p=h>0?Vi(d,h):"";return p}function Xo(r){var e=3;if(r.length<=e)return r;for(var t=r.length%e,n=r.substr(0,t);t!=r.length;t+=e)n+=(n.length>0?",":"")+r.substr(t,e);return n}var lI=/%/g;function YG(r,e,t){var n=e.replace(lI,""),s=e.length-n.length;return Ya(r,n,t*Math.pow(10,2*s))+Jr("%",s)}function XG(r,e,t){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Ya(r,e.substr(0,n),t/Math.pow(10,3*(e.length-n)))}function cI(r,e){var t,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+cI(r,-e);var s=r.indexOf(".");s===-1&&(s=r.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),t=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),t.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+i):t+="E+"+(a-i);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,s)+"."+t.substr(2+s),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(c,d,h,p){return d+h+p.substr(0,(s+i)%s)+"."+p.substr(i)+"E"})}else t=e.toExponential(n);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var uI=/# (\?+)( ?)\/( ?)(\d+)/;function QG(r,e,t){var n=parseInt(r[4],10),s=Math.round(e*n),i=Math.floor(s/n),a=s-i*n,c=n;return t+(i===0?"":""+i)+" "+(a===0?Jr(" ",r[1].length+1+r[4].length):ow(a,r[1].length)+r[2]+"/"+r[3]+Vi(c,r[4].length))}function JG(r,e,t){return t+(e===0?"":""+e)+Jr(" ",r[1].length+2+r[4].length)}var dI=/^#*0*\.([0#]+)/,hI=/\).*[0#]/,fI=/\(###\) ###\\?-####/;function fs(r){for(var e="",t,n=0;n!=r.length;++n)switch(t=r.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function jN(r,e){var t=Math.pow(10,e);return""+Math.round(r*t)/t}function RN(r,e){var t=r-Math.floor(r),n=Math.pow(10,e);return e<(""+Math.round(t*n)).length?0:Math.round(t*n)}function ZG(r,e){return e<(""+Math.round((r-Math.floor(r))*Math.pow(10,e))).length?1:0}function eK(r){return r<2147483647&&r>-2147483648?""+(r>=0?r|0:r-1|0):""+Math.floor(r)}function ui(r,e,t){if(r.charCodeAt(0)===40&&!e.match(hI)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?ui("n",n,t):"("+ui("n",n,-t)+")"}if(e.charCodeAt(e.length-1)===44)return XG(r,e,t);if(e.indexOf("%")!==-1)return YG(r,e,t);if(e.indexOf("E")!==-1)return cI(e,t);if(e.charCodeAt(0)===36)return"$"+ui(r,e.substr(e.charAt(1)==" "?2:1),t);var s,i,a,c,d=Math.abs(t),h=t<0?"-":"";if(e.match(/^00+$/))return h+ku(d,e.length);if(e.match(/^[#?]+$/))return s=ku(t,0),s==="0"&&(s=""),s.length>e.length?s:fs(e.substr(0,e.length-s.length))+s;if(i=e.match(uI))return QG(i,d,h);if(e.match(/^#+0+$/))return h+ku(d,e.length-e.indexOf("0"));if(i=e.match(dI))return s=jN(t,i[1].length).replace(/^([^\.]+)$/,"$1."+fs(i[1])).replace(/\.$/,"."+fs(i[1])).replace(/\.(\d*)$/,function(_,w){return"."+w+Jr("0",fs(i[1]).length-w.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return h+jN(d,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return h+Xo(ku(d,0));if(i=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+ui(r,e,-t):Xo(""+(Math.floor(t)+ZG(t,i[1].length)))+"."+Vi(RN(t,i[1].length),i[1].length);if(i=e.match(/^#,#*,#0/))return ui(r,e.replace(/^#,#*,/,""),t);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Ku(ui(r,e.replace(/[\\-]/g,""),t)),a=0,Ku(Ku(e.replace(/\\/g,"")).replace(/[0#]/g,function(_){return a<s.length?s.charAt(a++):_==="0"?"0":""}));if(e.match(fI))return s=ui(r,"##########",t),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var p="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),c=lg(d,Math.pow(10,a)-1,!1),s=""+h,p=Ya("n",i[1],c[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),s+=p+i[2]+"/"+i[3],p=ag(c[2],a),p.length<i[4].length&&(p=fs(i[4].substr(i[4].length-p.length))+p),s+=p,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),c=lg(d,Math.pow(10,a)-1,!0),h+(c[0]||(c[1]?"":"0"))+" "+(c[1]?ow(c[1],a)+i[2]+"/"+i[3]+ag(c[2],a):Jr(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=ku(t,0),e.length<=s.length?s:fs(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+t.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var m=e.indexOf(".")-a,x=e.length-s.length-m;return fs(e.substr(0,m)+s+e.substr(e.length-x))}if(i=e.match(/^00,000\.([#0]*0)$/))return a=RN(t,i[1].length),t<0?"-"+ui(r,e,-t):Xo(eK(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(_){return"00,"+(_.length<3?Vi(0,3-_.length):"")+_})+"."+Vi(a,i[1].length);switch(e){case"###,##0.00":return ui(r,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var v=Xo(ku(d,0));return v!=="0"?h+v:"";case"###,###.00":return ui(r,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return ui(r,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function tK(r,e,t){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Ya(r,e.substr(0,n),t/Math.pow(10,3*(e.length-n)))}function rK(r,e,t){var n=e.replace(lI,""),s=e.length-n.length;return Ya(r,n,t*Math.pow(10,2*s))+Jr("%",s)}function pI(r,e){var t,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+pI(r,-e);var s=r.indexOf(".");s===-1&&(s=r.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),t=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!t.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+i):t+="E+"+(a-i),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(c,d,h,p){return d+h+p.substr(0,(s+i)%s)+"."+p.substr(i)+"E"})}else t=e.toExponential(n);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function ia(r,e,t){if(r.charCodeAt(0)===40&&!e.match(hI)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?ia("n",n,t):"("+ia("n",n,-t)+")"}if(e.charCodeAt(e.length-1)===44)return tK(r,e,t);if(e.indexOf("%")!==-1)return rK(r,e,t);if(e.indexOf("E")!==-1)return pI(e,t);if(e.charCodeAt(0)===36)return"$"+ia(r,e.substr(e.charAt(1)==" "?2:1),t);var s,i,a,c,d=Math.abs(t),h=t<0?"-":"";if(e.match(/^00+$/))return h+Vi(d,e.length);if(e.match(/^[#?]+$/))return s=""+t,t===0&&(s=""),s.length>e.length?s:fs(e.substr(0,e.length-s.length))+s;if(i=e.match(uI))return JG(i,d,h);if(e.match(/^#+0+$/))return h+Vi(d,e.length-e.indexOf("0"));if(i=e.match(dI))return s=(""+t).replace(/^([^\.]+)$/,"$1."+fs(i[1])).replace(/\.$/,"."+fs(i[1])),s=s.replace(/\.(\d*)$/,function(_,w){return"."+w+Jr("0",fs(i[1]).length-w.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return h+(""+d).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return h+Xo(""+d);if(i=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+ia(r,e,-t):Xo(""+t)+"."+Jr("0",i[1].length);if(i=e.match(/^#,#*,#0/))return ia(r,e.replace(/^#,#*,/,""),t);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Ku(ia(r,e.replace(/[\\-]/g,""),t)),a=0,Ku(Ku(e.replace(/\\/g,"")).replace(/[0#]/g,function(_){return a<s.length?s.charAt(a++):_==="0"?"0":""}));if(e.match(fI))return s=ia(r,"##########",t),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var p="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),c=lg(d,Math.pow(10,a)-1,!1),s=""+h,p=Ya("n",i[1],c[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),s+=p+i[2]+"/"+i[3],p=ag(c[2],a),p.length<i[4].length&&(p=fs(i[4].substr(i[4].length-p.length))+p),s+=p,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),c=lg(d,Math.pow(10,a)-1,!0),h+(c[0]||(c[1]?"":"0"))+" "+(c[1]?ow(c[1],a)+i[2]+"/"+i[3]+ag(c[2],a):Jr(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=""+t,e.length<=s.length?s:fs(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0]+)\.([#0]+)$/)){s=""+t.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var m=e.indexOf(".")-a,x=e.length-s.length-m;return fs(e.substr(0,m)+s+e.substr(e.length-x))}if(i=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+ia(r,e,-t):Xo(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(_){return"00,"+(_.length<3?Vi(0,3-_.length):"")+_})+"."+Vi(0,i[1].length);switch(e){case"###,###":case"##,###":case"#,###":var v=Xo(""+d);return v!=="0"?h+v:"";default:if(e.match(/\.[0#?]*$/))return ia(r,e.slice(0,e.lastIndexOf(".")),t)+fs(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Ya(r,e,t){return(t|0)===t?ia(r,e,t):ui(r,e,t)}function nK(r){for(var e=[],t=!1,n=0,s=0;n<r.length;++n)switch(r.charCodeAt(n)){case 34:t=!t;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=r.substr(s,n-s),s=n+1}if(e[e.length]=r.substr(s),t===!0)throw new Error("Format |"+r+"| unterminated string ");return e}var mI=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function gI(r){for(var e=0,t="",n="";e<r.length;)switch(t=r.charAt(e)){case"G":og(r,e)&&(e+=6),e++;break;case'"':for(;r.charCodeAt(++e)!==34&&e<r.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(r.charAt(e+1)==="1"||r.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(r.substr(e,3).toUpperCase()==="A/P"||r.substr(e,5).toUpperCase()==="AM/PM"||r.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=t;r.charAt(e++)!=="]"&&e<r.length;)n+=r.charAt(e);if(n.match(mI))return!0;break;case".":case"0":case"#":for(;e<r.length&&("0#?.,E+-%".indexOf(t=r.charAt(++e))>-1||t=="\\"&&r.charAt(e+1)=="-"&&"0#".indexOf(r.charAt(e+2))>-1););break;case"?":for(;r.charAt(++e)===t;);break;case"*":++e,(r.charAt(e)==" "||r.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<r.length&&"0123456789".indexOf(r.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function sK(r,e,t,n){for(var s=[],i="",a=0,c="",d="t",h,p,m,x="H";a<r.length;)switch(c=r.charAt(a)){case"G":if(!og(r,a))throw new Error("unrecognized character "+c+" in "+r);s[s.length]={t:"G",v:"General"},a+=7;break;case'"':for(i="";(m=r.charCodeAt(++a))!==34&&a<r.length;)i+=String.fromCharCode(m);s[s.length]={t:"t",v:i},++a;break;case"\\":var v=r.charAt(++a),_=v==="("||v===")"?v:"t";s[s.length]={t:_,v},++a;break;case"_":s[s.length]={t:"t",v:" "},a+=2;break;case"@":s[s.length]={t:"T",v:e},++a;break;case"B":case"b":if(r.charAt(a+1)==="1"||r.charAt(a+1)==="2"){if(h==null&&(h=$p(e,t,r.charAt(a+1)==="2"),h==null))return"";s[s.length]={t:"X",v:r.substr(a,2)},d=c,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":c=c.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||h==null&&(h=$p(e,t),h==null))return"";for(i=c;++a<r.length&&r.charAt(a).toLowerCase()===c;)i+=c;c==="m"&&d.toLowerCase()==="h"&&(c="M"),c==="h"&&(c=x),s[s.length]={t:c,v:i},d=c;break;case"A":case"a":case"":var w={t:c,v:c};if(h==null&&(h=$p(e,t)),r.substr(a,3).toUpperCase()==="A/P"?(h!=null&&(w.v=h.H>=12?"P":"A"),w.t="T",x="h",a+=3):r.substr(a,5).toUpperCase()==="AM/PM"?(h!=null&&(w.v=h.H>=12?"PM":"AM"),w.t="T",a+=5,x="h"):r.substr(a,5).toUpperCase()==="/"?(h!=null&&(w.v=h.H>=12?"":""),w.t="T",a+=5,x="h"):(w.t="t",++a),h==null&&w.t==="T")return"";s[s.length]=w,d=c;break;case"[":for(i=c;r.charAt(a++)!=="]"&&a<r.length;)i+=r.charAt(a);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(mI)){if(h==null&&(h=$p(e,t),h==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},d=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",gI(r)||(s[s.length]={t:"t",v:i}));break;case".":if(h!=null){for(i=c;++a<r.length&&(c=r.charAt(a))==="0";)i+=c;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=c;++a<r.length&&"0#?.,E+-%".indexOf(c=r.charAt(a))>-1;)i+=c;s[s.length]={t:"n",v:i};break;case"?":for(i=c;r.charAt(++a)===c;)i+=c;s[s.length]={t:c,v:i},d=c;break;case"*":++a,(r.charAt(a)==" "||r.charAt(a)=="*")&&++a;break;case"(":case")":s[s.length]={t:n===1?"t":c,v:c},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=c;a<r.length&&"0123456789".indexOf(r.charAt(++a))>-1;)i+=r.charAt(a);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:c,v:c},++a;break;case"$":s[s.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(c)===-1)throw new Error("unrecognized character "+c+" in "+r);s[s.length]={t:"t",v:c},++a;break}var E=0,R=0,C;for(a=s.length-1,d="t";a>=0;--a)switch(s[a].t){case"h":case"H":s[a].t=x,d="h",E<1&&(E=1);break;case"s":(C=s[a].v.match(/\.0+$/))&&(R=Math.max(R,C[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":d=s[a].t;break;case"m":d==="s"&&(s[a].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&s[a].v.match(/[Hh]/)&&(E=1),E<2&&s[a].v.match(/[Mm]/)&&(E=2),E<3&&s[a].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M),h.M>=60&&(h.M=0,++h.H);break;case 2:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M);break}var V="",L;for(a=0;a<s.length;++a)switch(s[a].t){case"t":case"T":case" ":case"D":break;case"X":s[a].v="",s[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[a].v=KG(s[a].t.charCodeAt(0),s[a].v,h,R),s[a].t="t";break;case"n":case"?":for(L=a+1;s[L]!=null&&((c=s[L].t)==="?"||c==="D"||(c===" "||c==="t")&&s[L+1]!=null&&(s[L+1].t==="?"||s[L+1].t==="t"&&s[L+1].v==="/")||s[a].t==="("&&(c===" "||c==="n"||c===")")||c==="t"&&(s[L].v==="/"||s[L].v===" "&&s[L+1]!=null&&s[L+1].t=="?"));)s[a].v+=s[L].v,s[L]={v:"",t:";"},++L;V+=s[a].v,a=L-1;break;case"G":s[a].t="t",s[a].v=L1(e,t);break}var K="",H,S;if(V.length>0){V.charCodeAt(0)==40?(H=e<0&&V.charCodeAt(0)===45?-e:e,S=Ya("n",V,H)):(H=e<0&&n>1?-e:e,S=Ya("n",V,H),H<0&&s[0]&&s[0].t=="t"&&(S=S.substr(1),s[0].v="-"+s[0].v)),L=S.length-1;var k=s.length;for(a=0;a<s.length;++a)if(s[a]!=null&&s[a].t!="t"&&s[a].v.indexOf(".")>-1){k=a;break}var P=s.length;if(k===s.length&&S.indexOf("E")===-1){for(a=s.length-1;a>=0;--a)s[a]==null||"n?".indexOf(s[a].t)===-1||(L>=s[a].v.length-1?(L-=s[a].v.length,s[a].v=S.substr(L+1,s[a].v.length)):L<0?s[a].v="":(s[a].v=S.substr(0,L+1),L=-1),s[a].t="t",P=a);L>=0&&P<s.length&&(s[P].v=S.substr(0,L+1)+s[P].v)}else if(k!==s.length&&S.indexOf("E")===-1){for(L=S.indexOf(".")-1,a=k;a>=0;--a)if(!(s[a]==null||"n?".indexOf(s[a].t)===-1)){for(p=s[a].v.indexOf(".")>-1&&a===k?s[a].v.indexOf(".")-1:s[a].v.length-1,K=s[a].v.substr(p+1);p>=0;--p)L>=0&&(s[a].v.charAt(p)==="0"||s[a].v.charAt(p)==="#")&&(K=S.charAt(L--)+K);s[a].v=K,s[a].t="t",P=a}for(L>=0&&P<s.length&&(s[P].v=S.substr(0,L+1)+s[P].v),L=S.indexOf(".")+1,a=k;a<s.length;++a)if(!(s[a]==null||"n?(".indexOf(s[a].t)===-1&&a!==k)){for(p=s[a].v.indexOf(".")>-1&&a===k?s[a].v.indexOf(".")+1:0,K=s[a].v.substr(0,p);p<s[a].v.length;++p)L<S.length&&(K+=S.charAt(L++));s[a].v=K,s[a].t="t",P=a}}}for(a=0;a<s.length;++a)s[a]!=null&&"n?".indexOf(s[a].t)>-1&&(H=n>1&&e<0&&a>0&&s[a-1].v==="-"?-e:e,s[a].v=Ya(s[a].t,s[a].v,H),s[a].t="t");var j="";for(a=0;a!==s.length;++a)s[a]!=null&&(j+=s[a].v);return j}var DN=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function FN(r,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(r==t)return!0;break;case">":if(r>t)return!0;break;case"<":if(r<t)return!0;break;case"<>":if(r!=t)return!0;break;case">=":if(r>=t)return!0;break;case"<=":if(r<=t)return!0;break}return!1}function iK(r,e){var t=nK(r),n=t.length,s=t[n-1].indexOf("@");if(n<4&&s>-1&&--n,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||s>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=s>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=s>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=s>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var i=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[n,i];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var a=t[0].match(DN),c=t[1].match(DN);return FN(e,a)?[n,t[0]]:FN(e,c)?[n,t[1]]:[n,t[a!=null&&c!=null?2:1]]}return[n,i]}function dl(r,e,t){t==null&&(t={});var n="";switch(typeof r){case"string":r=="m/d/yy"&&t.dateNF?n=t.dateNF:n=r;break;case"number":r==14&&t.dateNF?n=t.dateNF:n=(t.table!=null?t.table:en)[r],n==null&&(n=t.table&&t.table[PN[r]]||en[PN[r]]),n==null&&(n=$G[r]||"General");break}if(og(n,0))return L1(e,t);e instanceof Date&&(e=oI(e,t.date1904));var s=iK(n,e);if(og(s[1]))return L1(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return sK(s[1],e,t,s[0])}function xI(r,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(en[t]==null){e<0&&(e=t);continue}if(en[t]==r){e=t;break}}e<0&&(e=391)}return en[e]=r,e}function ix(r){for(var e=0;e!=392;++e)r[e]!==void 0&&xI(r[e],e)}function ax(){en=VG()}var yI=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function aK(r){var e=typeof r=="number"?en[r]:r;return e=e.replace(yI,"(\\d+)"),new RegExp("^"+e+"$")}function oK(r,e,t){var n=-1,s=-1,i=-1,a=-1,c=-1,d=-1;(e.match(yI)||[]).forEach(function(m,x){var v=parseInt(t[x+1],10);switch(m.toLowerCase().charAt(0)){case"y":n=v;break;case"d":i=v;break;case"h":a=v;break;case"s":d=v;break;case"m":a>=0?c=v:s=v;break}}),d>=0&&c==-1&&s>=0&&(c=s,s=-1);var h=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);h.length==7&&(h="0"+h),h.length==8&&(h="20"+h);var p=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2);return a==-1&&c==-1&&d==-1?h:n==-1&&s==-1&&i==-1?p:h+"T"+p}var lK=(function(){var r={};r.version="1.2.0";function e(){for(var S=0,k=new Array(256),P=0;P!=256;++P)S=P,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,k[P]=S;return typeof Int32Array<"u"?new Int32Array(k):k}var t=e();function n(S){var k=0,P=0,j=0,M=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(j=0;j!=256;++j)M[j]=S[j];for(j=0;j!=256;++j)for(P=S[j],k=256+j;k<4096;k+=256)P=M[k]=P>>>8^S[P&255];var D=[];for(j=1;j!=16;++j)D[j-1]=typeof Int32Array<"u"?M.subarray(j*256,j*256+256):M.slice(j*256,j*256+256);return D}var s=n(t),i=s[0],a=s[1],c=s[2],d=s[3],h=s[4],p=s[5],m=s[6],x=s[7],v=s[8],_=s[9],w=s[10],E=s[11],R=s[12],C=s[13],V=s[14];function L(S,k){for(var P=k^-1,j=0,M=S.length;j<M;)P=P>>>8^t[(P^S.charCodeAt(j++))&255];return~P}function K(S,k){for(var P=k^-1,j=S.length-15,M=0;M<j;)P=V[S[M++]^P&255]^C[S[M++]^P>>8&255]^R[S[M++]^P>>16&255]^E[S[M++]^P>>>24]^w[S[M++]]^_[S[M++]]^v[S[M++]]^x[S[M++]]^m[S[M++]]^p[S[M++]]^h[S[M++]]^d[S[M++]]^c[S[M++]]^a[S[M++]]^i[S[M++]]^t[S[M++]];for(j+=15;M<j;)P=P>>>8^t[(P^S[M++])&255];return~P}function H(S,k){for(var P=k^-1,j=0,M=S.length,D=0,O=0;j<M;)D=S.charCodeAt(j++),D<128?P=P>>>8^t[(P^D)&255]:D<2048?(P=P>>>8^t[(P^(192|D>>6&31))&255],P=P>>>8^t[(P^(128|D&63))&255]):D>=55296&&D<57344?(D=(D&1023)+64,O=S.charCodeAt(j++)&1023,P=P>>>8^t[(P^(240|D>>8&7))&255],P=P>>>8^t[(P^(128|D>>2&63))&255],P=P>>>8^t[(P^(128|O>>6&15|(D&3)<<4))&255],P=P>>>8^t[(P^(128|O&63))&255]):(P=P>>>8^t[(P^(224|D>>12&15))&255],P=P>>>8^t[(P^(128|D>>6&63))&255],P=P>>>8^t[(P^(128|D&63))&255]);return~P}return r.table=t,r.bstr=L,r.buf=K,r.str=H,r})(),Ar=(function(){var e={};e.version="1.2.1";function t(U,ee){for(var Y=U.split("/"),X=ee.split("/"),te=0,F=0,Q=Math.min(Y.length,X.length);te<Q;++te){if(F=Y[te].length-X[te].length)return F;if(Y[te]!=X[te])return Y[te]<X[te]?-1:1}return Y.length-X.length}function n(U){if(U.charAt(U.length-1)=="/")return U.slice(0,-1).indexOf("/")===-1?U:n(U.slice(0,-1));var ee=U.lastIndexOf("/");return ee===-1?U:U.slice(0,ee+1)}function s(U){if(U.charAt(U.length-1)=="/")return s(U.slice(0,-1));var ee=U.lastIndexOf("/");return ee===-1?U:U.slice(ee+1)}function i(U,ee){typeof ee=="string"&&(ee=new Date(ee));var Y=ee.getHours();Y=Y<<6|ee.getMinutes(),Y=Y<<5|ee.getSeconds()>>>1,U.write_shift(2,Y);var X=ee.getFullYear()-1980;X=X<<4|ee.getMonth()+1,X=X<<5|ee.getDate(),U.write_shift(2,X)}function a(U){var ee=U.read_shift(2)&65535,Y=U.read_shift(2)&65535,X=new Date,te=Y&31;Y>>>=5;var F=Y&15;Y>>>=4,X.setMilliseconds(0),X.setFullYear(Y+1980),X.setMonth(F-1),X.setDate(te);var Q=ee&31;ee>>>=5;var le=ee&63;return ee>>>=6,X.setHours(ee),X.setMinutes(le),X.setSeconds(Q<<1),X}function c(U){Hs(U,0);for(var ee={},Y=0;U.l<=U.length-4;){var X=U.read_shift(2),te=U.read_shift(2),F=U.l+te,Q={};switch(X){case 21589:Y=U.read_shift(1),Y&1&&(Q.mtime=U.read_shift(4)),te>5&&(Y&2&&(Q.atime=U.read_shift(4)),Y&4&&(Q.ctime=U.read_shift(4))),Q.mtime&&(Q.mt=new Date(Q.mtime*1e3));break}U.l=F,ee[X]=Q}return ee}var d;function h(){return d||(d={})}function p(U,ee){if(U[0]==80&&U[1]==75)return lt(U,ee);if((U[0]|32)==109&&(U[1]|32)==105)return Kn(U,ee);if(U.length<512)throw new Error("CFB file size "+U.length+" < 512");var Y=3,X=512,te=0,F=0,Q=0,le=0,se=0,ue=[],me=U.slice(0,512);Hs(me,0);var $e=m(me);switch(Y=$e[0],Y){case 3:X=512;break;case 4:X=4096;break;case 0:if($e[1]==0)return lt(U,ee);default:throw new Error("Major Version: Expected 3 or 4 saw "+Y)}X!==512&&(me=U.slice(0,X),Hs(me,28));var ze=U.slice(0,X);x(me,Y);var Ye=me.read_shift(4,"i");if(Y===3&&Ye!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ye);me.l+=4,Q=me.read_shift(4,"i"),me.l+=4,me.chk("00100000","Mini Stream Cutoff Size: "),le=me.read_shift(4,"i"),te=me.read_shift(4,"i"),se=me.read_shift(4,"i"),F=me.read_shift(4,"i");for(var Ve=-1,Be=0;Be<109&&(Ve=me.read_shift(4,"i"),!(Ve<0));++Be)ue[Be]=Ve;var Pt=v(U,X);E(se,F,Pt,X,ue);var Wt=C(Pt,Q,ue,X);Wt[Q].name="!Directory",te>0&&le!==O&&(Wt[le].name="!MiniFAT"),Wt[ue[0]].name="!FAT",Wt.fat_addrs=ue,Wt.ssz=X;var Ht={},ir=[],ls=[],Yn=[];V(Q,Wt,Pt,ir,te,Ht,ls,le),_(ls,Yn,ir),ir.shift();var Xn={FileIndex:ls,FullPaths:Yn};return ee&&ee.raw&&(Xn.raw={header:ze,sectors:Pt}),Xn}function m(U){if(U[U.l]==80&&U[U.l+1]==75)return[0,0];U.chk(pe,"Header Signature: "),U.l+=16;var ee=U.read_shift(2,"u");return[U.read_shift(2,"u"),ee]}function x(U,ee){var Y=9;switch(U.l+=2,Y=U.read_shift(2)){case 9:if(ee!=3)throw new Error("Sector Shift: Expected 9 saw "+Y);break;case 12:if(ee!=4)throw new Error("Sector Shift: Expected 12 saw "+Y);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Y)}U.chk("0600","Mini Sector Shift: "),U.chk("000000000000","Reserved: ")}function v(U,ee){for(var Y=Math.ceil(U.length/ee)-1,X=[],te=1;te<Y;++te)X[te-1]=U.slice(te*ee,(te+1)*ee);return X[Y-1]=U.slice(Y*ee),X}function _(U,ee,Y){for(var X=0,te=0,F=0,Q=0,le=0,se=Y.length,ue=[],me=[];X<se;++X)ue[X]=me[X]=X,ee[X]=Y[X];for(;le<me.length;++le)X=me[le],te=U[X].L,F=U[X].R,Q=U[X].C,ue[X]===X&&(te!==-1&&ue[te]!==te&&(ue[X]=ue[te]),F!==-1&&ue[F]!==F&&(ue[X]=ue[F])),Q!==-1&&(ue[Q]=X),te!==-1&&X!=ue[X]&&(ue[te]=ue[X],me.lastIndexOf(te)<le&&me.push(te)),F!==-1&&X!=ue[X]&&(ue[F]=ue[X],me.lastIndexOf(F)<le&&me.push(F));for(X=1;X<se;++X)ue[X]===X&&(F!==-1&&ue[F]!==F?ue[X]=ue[F]:te!==-1&&ue[te]!==te&&(ue[X]=ue[te]));for(X=1;X<se;++X)if(U[X].type!==0){if(le=X,le!=ue[le])do le=ue[le],ee[X]=ee[le]+"/"+ee[X];while(le!==0&&ue[le]!==-1&&le!=ue[le]);ue[X]=-1}for(ee[0]+="/",X=1;X<se;++X)U[X].type!==2&&(ee[X]+="/")}function w(U,ee,Y){for(var X=U.start,te=U.size,F=[],Q=X;Y&&te>0&&Q>=0;)F.push(ee.slice(Q*D,Q*D+D)),te-=D,Q=Yl(Y,Q*4);return F.length===0?Re(0):zn(F).slice(0,U.size)}function E(U,ee,Y,X,te){var F=O;if(U===O){if(ee!==0)throw new Error("DIFAT chain shorter than expected")}else if(U!==-1){var Q=Y[U],le=(X>>>2)-1;if(!Q)return;for(var se=0;se<le&&(F=Yl(Q,se*4))!==O;++se)te.push(F);E(Yl(Q,X-4),ee-1,Y,X,te)}}function R(U,ee,Y,X,te){var F=[],Q=[];te||(te=[]);var le=X-1,se=0,ue=0;for(se=ee;se>=0;){te[se]=!0,F[F.length]=se,Q.push(U[se]);var me=Y[Math.floor(se*4/X)];if(ue=se*4&le,X<4+ue)throw new Error("FAT boundary crossed: "+se+" 4 "+X);if(!U[me])break;se=Yl(U[me],ue)}return{nodes:F,data:zN([Q])}}function C(U,ee,Y,X){var te=U.length,F=[],Q=[],le=[],se=[],ue=X-1,me=0,$e=0,ze=0,Ye=0;for(me=0;me<te;++me)if(le=[],ze=me+ee,ze>=te&&(ze-=te),!Q[ze]){se=[];var Ve=[];for($e=ze;$e>=0;){Ve[$e]=!0,Q[$e]=!0,le[le.length]=$e,se.push(U[$e]);var Be=Y[Math.floor($e*4/X)];if(Ye=$e*4&ue,X<4+Ye)throw new Error("FAT boundary crossed: "+$e+" 4 "+X);if(!U[Be]||($e=Yl(U[Be],Ye),Ve[$e]))break}F[ze]={nodes:le,data:zN([se])}}return F}function V(U,ee,Y,X,te,F,Q,le){for(var se=0,ue=X.length?2:0,me=ee[U].data,$e=0,ze=0,Ye;$e<me.length;$e+=128){var Ve=me.slice($e,$e+128);Hs(Ve,64),ze=Ve.read_shift(2),Ye=fw(Ve,0,ze-ue),X.push(Ye);var Be={name:Ye,type:Ve.read_shift(1),color:Ve.read_shift(1),L:Ve.read_shift(4,"i"),R:Ve.read_shift(4,"i"),C:Ve.read_shift(4,"i"),clsid:Ve.read_shift(16),state:Ve.read_shift(4,"i"),start:0,size:0},Pt=Ve.read_shift(2)+Ve.read_shift(2)+Ve.read_shift(2)+Ve.read_shift(2);Pt!==0&&(Be.ct=L(Ve,Ve.l-8));var Wt=Ve.read_shift(2)+Ve.read_shift(2)+Ve.read_shift(2)+Ve.read_shift(2);Wt!==0&&(Be.mt=L(Ve,Ve.l-8)),Be.start=Ve.read_shift(4,"i"),Be.size=Ve.read_shift(4,"i"),Be.size<0&&Be.start<0&&(Be.size=Be.type=0,Be.start=O,Be.name=""),Be.type===5?(se=Be.start,te>0&&se!==O&&(ee[se].name="!StreamData")):Be.size>=4096?(Be.storage="fat",ee[Be.start]===void 0&&(ee[Be.start]=R(Y,Be.start,ee.fat_addrs,ee.ssz)),ee[Be.start].name=Be.name,Be.content=ee[Be.start].data.slice(0,Be.size)):(Be.storage="minifat",Be.size<0?Be.size=0:se!==O&&Be.start!==O&&ee[se]&&(Be.content=w(Be,ee[se].data,(ee[le]||{}).data))),Be.content&&Hs(Be.content,0),F[Ye]=Be,Q.push(Be)}}function L(U,ee){return new Date((qs(U,ee+4)/1e7*Math.pow(2,32)+qs(U,ee)/1e7-11644473600)*1e3)}function K(U,ee){return h(),p(d.readFileSync(U),ee)}function H(U,ee){var Y=ee&&ee.type;switch(Y||pr&&Buffer.isBuffer(U)&&(Y="buffer"),Y||"base64"){case"file":return K(U,ee);case"base64":return p(Oi(io(U)),ee);case"binary":return p(Oi(U),ee)}return p(U,ee)}function S(U,ee){var Y=ee||{},X=Y.root||"Root Entry";if(U.FullPaths||(U.FullPaths=[]),U.FileIndex||(U.FileIndex=[]),U.FullPaths.length!==U.FileIndex.length)throw new Error("inconsistent CFB structure");U.FullPaths.length===0&&(U.FullPaths[0]=X+"/",U.FileIndex[0]={name:X,type:5}),Y.CLSID&&(U.FileIndex[0].clsid=Y.CLSID),k(U)}function k(U){var ee="Sh33tJ5";if(!Ar.find(U,"/"+ee)){var Y=Re(4);Y[0]=55,Y[1]=Y[3]=50,Y[2]=54,U.FileIndex.push({name:ee,type:2,content:Y,size:4,L:69,R:69,C:69}),U.FullPaths.push(U.FullPaths[0]+ee),P(U)}}function P(U,ee){S(U);for(var Y=!1,X=!1,te=U.FullPaths.length-1;te>=0;--te){var F=U.FileIndex[te];switch(F.type){case 0:X?Y=!0:(U.FileIndex.pop(),U.FullPaths.pop());break;case 1:case 2:case 5:X=!0,isNaN(F.R*F.L*F.C)&&(Y=!0),F.R>-1&&F.L>-1&&F.R==F.L&&(Y=!0);break;default:Y=!0;break}}if(!(!Y&&!ee)){var Q=new Date(1987,1,19),le=0,se=Object.create?Object.create(null):{},ue=[];for(te=0;te<U.FullPaths.length;++te)se[U.FullPaths[te]]=!0,U.FileIndex[te].type!==0&&ue.push([U.FullPaths[te],U.FileIndex[te]]);for(te=0;te<ue.length;++te){var me=n(ue[te][0]);X=se[me],X||(ue.push([me,{name:s(me).replace("/",""),type:1,clsid:Fe,ct:Q,mt:Q,content:null}]),se[me]=!0)}for(ue.sort(function(Ye,Ve){return t(Ye[0],Ve[0])}),U.FullPaths=[],U.FileIndex=[],te=0;te<ue.length;++te)U.FullPaths[te]=ue[te][0],U.FileIndex[te]=ue[te][1];for(te=0;te<ue.length;++te){var $e=U.FileIndex[te],ze=U.FullPaths[te];if($e.name=s(ze).replace("/",""),$e.L=$e.R=$e.C=-($e.color=1),$e.size=$e.content?$e.content.length:0,$e.start=0,$e.clsid=$e.clsid||Fe,te===0)$e.C=ue.length>1?1:-1,$e.size=0,$e.type=5;else if(ze.slice(-1)=="/"){for(le=te+1;le<ue.length&&n(U.FullPaths[le])!=ze;++le);for($e.C=le>=ue.length?-1:le,le=te+1;le<ue.length&&n(U.FullPaths[le])!=n(ze);++le);$e.R=le>=ue.length?-1:le,$e.type=1}else n(U.FullPaths[te+1]||"")==n(ze)&&($e.R=te+1),$e.type=2}}}function j(U,ee){var Y=ee||{};if(Y.fileType=="mad")return hr(U,Y);switch(P(U),Y.fileType){case"zip":return Nt(U,Y)}var X=(function(Ye){for(var Ve=0,Be=0,Pt=0;Pt<Ye.FileIndex.length;++Pt){var Wt=Ye.FileIndex[Pt];if(Wt.content){var Ht=Wt.content.length;Ht>0&&(Ht<4096?Ve+=Ht+63>>6:Be+=Ht+511>>9)}}for(var ir=Ye.FullPaths.length+3>>2,ls=Ve+7>>3,Yn=Ve+127>>7,Xn=ls+Be+ir+Yn,zr=Xn+127>>7,Yi=zr<=109?0:Math.ceil((zr-109)/127);Xn+zr+Yi+127>>7>zr;)Yi=++zr<=109?0:Math.ceil((zr-109)/127);var kr=[1,Yi,zr,Yn,ir,Be,Ve,0];return Ye.FileIndex[0].size=Ve<<6,kr[7]=(Ye.FileIndex[0].start=kr[0]+kr[1]+kr[2]+kr[3]+kr[4]+kr[5])+(kr[6]+7>>3),kr})(U),te=Re(X[7]<<9),F=0,Q=0;{for(F=0;F<8;++F)te.write_shift(1,Ae[F]);for(F=0;F<8;++F)te.write_shift(2,0);for(te.write_shift(2,62),te.write_shift(2,3),te.write_shift(2,65534),te.write_shift(2,9),te.write_shift(2,6),F=0;F<3;++F)te.write_shift(2,0);for(te.write_shift(4,0),te.write_shift(4,X[2]),te.write_shift(4,X[0]+X[1]+X[2]+X[3]-1),te.write_shift(4,0),te.write_shift(4,4096),te.write_shift(4,X[3]?X[0]+X[1]+X[2]-1:O),te.write_shift(4,X[3]),te.write_shift(-4,X[1]?X[0]-1:O),te.write_shift(4,X[1]),F=0;F<109;++F)te.write_shift(-4,F<X[2]?X[1]+F:-1)}if(X[1])for(Q=0;Q<X[1];++Q){for(;F<236+Q*127;++F)te.write_shift(-4,F<X[2]?X[1]+F:-1);te.write_shift(-4,Q===X[1]-1?O:Q+1)}var le=function(Ye){for(Q+=Ye;F<Q-1;++F)te.write_shift(-4,F+1);Ye&&(++F,te.write_shift(-4,O))};for(Q=F=0,Q+=X[1];F<Q;++F)te.write_shift(-4,Me.DIFSECT);for(Q+=X[2];F<Q;++F)te.write_shift(-4,Me.FATSECT);le(X[3]),le(X[4]);for(var se=0,ue=0,me=U.FileIndex[0];se<U.FileIndex.length;++se)me=U.FileIndex[se],me.content&&(ue=me.content.length,!(ue<4096)&&(me.start=Q,le(ue+511>>9)));for(le(X[6]+7>>3);te.l&511;)te.write_shift(-4,Me.ENDOFCHAIN);for(Q=F=0,se=0;se<U.FileIndex.length;++se)me=U.FileIndex[se],me.content&&(ue=me.content.length,!(!ue||ue>=4096)&&(me.start=Q,le(ue+63>>6)));for(;te.l&511;)te.write_shift(-4,Me.ENDOFCHAIN);for(F=0;F<X[4]<<2;++F){var $e=U.FullPaths[F];if(!$e||$e.length===0){for(se=0;se<17;++se)te.write_shift(4,0);for(se=0;se<3;++se)te.write_shift(4,-1);for(se=0;se<12;++se)te.write_shift(4,0);continue}me=U.FileIndex[F],F===0&&(me.start=me.size?me.start-1:O);var ze=F===0&&Y.root||me.name;if(ue=2*(ze.length+1),te.write_shift(64,ze,"utf16le"),te.write_shift(2,ue),te.write_shift(1,me.type),te.write_shift(1,me.color),te.write_shift(-4,me.L),te.write_shift(-4,me.R),te.write_shift(-4,me.C),me.clsid)te.write_shift(16,me.clsid,"hex");else for(se=0;se<4;++se)te.write_shift(4,0);te.write_shift(4,me.state||0),te.write_shift(4,0),te.write_shift(4,0),te.write_shift(4,0),te.write_shift(4,0),te.write_shift(4,me.start),te.write_shift(4,me.size),te.write_shift(4,0)}for(F=1;F<U.FileIndex.length;++F)if(me=U.FileIndex[F],me.size>=4096)if(te.l=me.start+1<<9,pr&&Buffer.isBuffer(me.content))me.content.copy(te,te.l,0,me.size),te.l+=me.size+511&-512;else{for(se=0;se<me.size;++se)te.write_shift(1,me.content[se]);for(;se&511;++se)te.write_shift(1,0)}for(F=1;F<U.FileIndex.length;++F)if(me=U.FileIndex[F],me.size>0&&me.size<4096)if(pr&&Buffer.isBuffer(me.content))me.content.copy(te,te.l,0,me.size),te.l+=me.size+63&-64;else{for(se=0;se<me.size;++se)te.write_shift(1,me.content[se]);for(;se&63;++se)te.write_shift(1,0)}if(pr)te.l=te.length;else for(;te.l<te.length;)te.write_shift(1,0);return te}function M(U,ee){var Y=U.FullPaths.map(function(se){return se.toUpperCase()}),X=Y.map(function(se){var ue=se.split("/");return ue[ue.length-(se.slice(-1)=="/"?2:1)]}),te=!1;ee.charCodeAt(0)===47?(te=!0,ee=Y[0].slice(0,-1)+ee):te=ee.indexOf("/")!==-1;var F=ee.toUpperCase(),Q=te===!0?Y.indexOf(F):X.indexOf(F);if(Q!==-1)return U.FileIndex[Q];var le=!F.match(Vp);for(F=F.replace(K0,""),le&&(F=F.replace(Vp,"!")),Q=0;Q<Y.length;++Q)if((le?Y[Q].replace(Vp,"!"):Y[Q]).replace(K0,"")==F||(le?X[Q].replace(Vp,"!"):X[Q]).replace(K0,"")==F)return U.FileIndex[Q];return null}var D=64,O=-2,pe="d0cf11e0a1b11ae1",Ae=[208,207,17,224,161,177,26,225],Fe="00000000000000000000000000000000",Me={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:O,FREESECT:-1,HEADER_SIGNATURE:pe,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Fe,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Ee(U,ee,Y){h();var X=j(U,Y);d.writeFileSync(ee,X)}function Te(U){for(var ee=new Array(U.length),Y=0;Y<U.length;++Y)ee[Y]=String.fromCharCode(U[Y]);return ee.join("")}function Ne(U,ee){var Y=j(U,ee);switch(ee&&ee.type||"buffer"){case"file":return h(),d.writeFileSync(ee.filename,Y),Y;case"binary":return typeof Y=="string"?Y:Te(Y);case"base64":return Sh(typeof Y=="string"?Y:Te(Y));case"buffer":if(pr)return Buffer.isBuffer(Y)?Y:ho(Y);case"array":return typeof Y=="string"?Oi(Y):Y}return Y}var ae;function W(U){try{var ee=U.InflateRaw,Y=new ee;if(Y._processChunk(new Uint8Array([3,0]),Y._finishFlushFlag),Y.bytesRead)ae=U;else throw new Error("zlib does not expose bytesRead")}catch(X){console.error("cannot use native zlib: "+(X.message||X))}}function oe(U,ee){if(!ae)return It(U,ee);var Y=ae.InflateRaw,X=new Y,te=X._processChunk(U.slice(U.l),X._finishFlushFlag);return U.l+=X.bytesRead,te}function ie(U){return ae?ae.deflateRawSync(U):J(U)}var ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],_e=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function De(U){var ee=(U<<1|U<<11)&139536|(U<<5|U<<15)&558144;return(ee>>16|ee>>8|ee)&255}for(var Se=typeof Uint8Array<"u",we=Se?new Uint8Array(256):[],Qe=0;Qe<256;++Qe)we[Qe]=De(Qe);function ft(U,ee){var Y=we[U&255];return ee<=8?Y>>>8-ee:(Y=Y<<8|we[U>>8&255],ee<=16?Y>>>16-ee:(Y=Y<<8|we[U>>16&255],Y>>>24-ee))}function zt(U,ee){var Y=ee&7,X=ee>>>3;return(U[X]|(Y<=6?0:U[X+1]<<8))>>>Y&3}function wt(U,ee){var Y=ee&7,X=ee>>>3;return(U[X]|(Y<=5?0:U[X+1]<<8))>>>Y&7}function Yt(U,ee){var Y=ee&7,X=ee>>>3;return(U[X]|(Y<=4?0:U[X+1]<<8))>>>Y&15}function kt(U,ee){var Y=ee&7,X=ee>>>3;return(U[X]|(Y<=3?0:U[X+1]<<8))>>>Y&31}function Oe(U,ee){var Y=ee&7,X=ee>>>3;return(U[X]|(Y<=1?0:U[X+1]<<8))>>>Y&127}function Xt(U,ee,Y){var X=ee&7,te=ee>>>3,F=(1<<Y)-1,Q=U[te]>>>X;return Y<8-X||(Q|=U[te+1]<<8-X,Y<16-X)||(Q|=U[te+2]<<16-X,Y<24-X)||(Q|=U[te+3]<<24-X),Q&F}function Rt(U,ee,Y){var X=ee&7,te=ee>>>3;return X<=5?U[te]|=(Y&7)<<X:(U[te]|=Y<<X&255,U[te+1]=(Y&7)>>8-X),ee+3}function He(U,ee,Y){var X=ee&7,te=ee>>>3;return Y=(Y&1)<<X,U[te]|=Y,ee+1}function de(U,ee,Y){var X=ee&7,te=ee>>>3;return Y<<=X,U[te]|=Y&255,Y>>>=8,U[te+1]=Y,ee+8}function et(U,ee,Y){var X=ee&7,te=ee>>>3;return Y<<=X,U[te]|=Y&255,Y>>>=8,U[te+1]=Y&255,U[te+2]=Y>>>8,ee+16}function ct(U,ee){var Y=U.length,X=2*Y>ee?2*Y:ee+5,te=0;if(Y>=ee)return U;if(pr){var F=SN(X);if(U.copy)U.copy(F);else for(;te<U.length;++te)F[te]=U[te];return F}else if(Se){var Q=new Uint8Array(X);if(Q.set)Q.set(U);else for(;te<Y;++te)Q[te]=U[te];return Q}return U.length=X,U}function pt(U){for(var ee=new Array(U),Y=0;Y<U;++Y)ee[Y]=0;return ee}function St(U,ee,Y){var X=1,te=0,F=0,Q=0,le=0,se=U.length,ue=Se?new Uint16Array(32):pt(32);for(F=0;F<32;++F)ue[F]=0;for(F=se;F<Y;++F)U[F]=0;se=U.length;var me=Se?new Uint16Array(se):pt(se);for(F=0;F<se;++F)ue[te=U[F]]++,X<te&&(X=te),me[F]=0;for(ue[0]=0,F=1;F<=X;++F)ue[F+16]=le=le+ue[F-1]<<1;for(F=0;F<se;++F)le=U[F],le!=0&&(me[F]=ue[le+16]++);var $e=0;for(F=0;F<se;++F)if($e=U[F],$e!=0)for(le=ft(me[F],X)>>X-$e,Q=(1<<X+4-$e)-1;Q>=0;--Q)ee[le|Q<<$e]=$e&15|F<<4;return X}var ht=Se?new Uint16Array(512):pt(512),jt=Se?new Uint16Array(32):pt(32);if(!Se){for(var dt=0;dt<512;++dt)ht[dt]=0;for(dt=0;dt<32;++dt)jt[dt]=0}(function(){for(var U=[],ee=0;ee<32;ee++)U.push(5);St(U,jt,32);var Y=[];for(ee=0;ee<=143;ee++)Y.push(8);for(;ee<=255;ee++)Y.push(9);for(;ee<=279;ee++)Y.push(7);for(;ee<=287;ee++)Y.push(8);St(Y,ht,288)})();var gr=(function(){for(var ee=Se?new Uint8Array(32768):[],Y=0,X=0;Y<_e.length-1;++Y)for(;X<_e[Y+1];++X)ee[X]=Y;for(;X<32768;++X)ee[X]=29;var te=Se?new Uint8Array(259):[];for(Y=0,X=0;Y<z.length-1;++Y)for(;X<z[Y+1];++X)te[X]=Y;function F(le,se){for(var ue=0;ue<le.length;){var me=Math.min(65535,le.length-ue),$e=ue+me==le.length;for(se.write_shift(1,+$e),se.write_shift(2,me),se.write_shift(2,~me&65535);me-- >0;)se[se.l++]=le[ue++]}return se.l}function Q(le,se){for(var ue=0,me=0,$e=Se?new Uint16Array(32768):[];me<le.length;){var ze=Math.min(65535,le.length-me);if(ze<10){for(ue=Rt(se,ue,+(me+ze==le.length)),ue&7&&(ue+=8-(ue&7)),se.l=ue/8|0,se.write_shift(2,ze),se.write_shift(2,~ze&65535);ze-- >0;)se[se.l++]=le[me++];ue=se.l*8;continue}ue=Rt(se,ue,+(me+ze==le.length)+2);for(var Ye=0;ze-- >0;){var Ve=le[me];Ye=(Ye<<5^Ve)&32767;var Be=-1,Pt=0;if((Be=$e[Ye])&&(Be|=me&-32768,Be>me&&(Be-=32768),Be<me))for(;le[Be+Pt]==le[me+Pt]&&Pt<250;)++Pt;if(Pt>2){Ve=te[Pt],Ve<=22?ue=de(se,ue,we[Ve+1]>>1)-1:(de(se,ue,3),ue+=5,de(se,ue,we[Ve-23]>>5),ue+=3);var Wt=Ve<8?0:Ve-4>>2;Wt>0&&(et(se,ue,Pt-z[Ve]),ue+=Wt),Ve=ee[me-Be],ue=de(se,ue,we[Ve]>>3),ue-=3;var Ht=Ve<4?0:Ve-2>>1;Ht>0&&(et(se,ue,me-Be-_e[Ve]),ue+=Ht);for(var ir=0;ir<Pt;++ir)$e[Ye]=me&32767,Ye=(Ye<<5^le[me])&32767,++me;ze-=Pt-1}else Ve<=143?Ve=Ve+48:ue=He(se,ue,1),ue=de(se,ue,we[Ve]),$e[Ye]=me&32767,++me}ue=de(se,ue,0)-1}return se.l=(ue+7)/8|0,se.l}return function(se,ue){return se.length<8?F(se,ue):Q(se,ue)}})();function J(U){var ee=Re(50+Math.floor(U.length*1.1)),Y=gr(U,ee);return ee.slice(0,Y)}var Ce=Se?new Uint16Array(32768):pt(32768),gt=Se?new Uint16Array(32768):pt(32768),fe=Se?new Uint16Array(128):pt(128),Ie=1,Le=1;function Ze(U,ee){var Y=kt(U,ee)+257;ee+=5;var X=kt(U,ee)+1;ee+=5;var te=Yt(U,ee)+4;ee+=4;for(var F=0,Q=Se?new Uint8Array(19):pt(19),le=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],se=1,ue=Se?new Uint8Array(8):pt(8),me=Se?new Uint8Array(8):pt(8),$e=Q.length,ze=0;ze<te;++ze)Q[ne[ze]]=F=wt(U,ee),se<F&&(se=F),ue[F]++,ee+=3;var Ye=0;for(ue[0]=0,ze=1;ze<=se;++ze)me[ze]=Ye=Ye+ue[ze-1]<<1;for(ze=0;ze<$e;++ze)(Ye=Q[ze])!=0&&(le[ze]=me[Ye]++);var Ve=0;for(ze=0;ze<$e;++ze)if(Ve=Q[ze],Ve!=0){Ye=we[le[ze]]>>8-Ve;for(var Be=(1<<7-Ve)-1;Be>=0;--Be)fe[Ye|Be<<Ve]=Ve&7|ze<<3}var Pt=[];for(se=1;Pt.length<Y+X;)switch(Ye=fe[Oe(U,ee)],ee+=Ye&7,Ye>>>=3){case 16:for(F=3+zt(U,ee),ee+=2,Ye=Pt[Pt.length-1];F-- >0;)Pt.push(Ye);break;case 17:for(F=3+wt(U,ee),ee+=3;F-- >0;)Pt.push(0);break;case 18:for(F=11+Oe(U,ee),ee+=7;F-- >0;)Pt.push(0);break;default:Pt.push(Ye),se<Ye&&(se=Ye);break}var Wt=Pt.slice(0,Y),Ht=Pt.slice(Y);for(ze=Y;ze<286;++ze)Wt[ze]=0;for(ze=X;ze<30;++ze)Ht[ze]=0;return Ie=St(Wt,Ce,286),Le=St(Ht,gt,30),ee}function vt(U,ee){if(U[0]==3&&!(U[1]&3))return[wc(ee),2];for(var Y=0,X=0,te=SN(ee||1<<18),F=0,Q=te.length>>>0,le=0,se=0;(X&1)==0;){if(X=wt(U,Y),Y+=3,X>>>1)X>>1==1?(le=9,se=5):(Y=Ze(U,Y),le=Ie,se=Le);else{Y&7&&(Y+=8-(Y&7));var ue=U[Y>>>3]|U[(Y>>>3)+1]<<8;if(Y+=32,ue>0)for(!ee&&Q<F+ue&&(te=ct(te,F+ue),Q=te.length);ue-- >0;)te[F++]=U[Y>>>3],Y+=8;continue}for(;;){!ee&&Q<F+32767&&(te=ct(te,F+32767),Q=te.length);var me=Xt(U,Y,le),$e=X>>>1==1?ht[me]:Ce[me];if(Y+=$e&15,$e>>>=4,($e>>>8&255)===0)te[F++]=$e;else{if($e==256)break;$e-=257;var ze=$e<8?0:$e-4>>2;ze>5&&(ze=0);var Ye=F+z[$e];ze>0&&(Ye+=Xt(U,Y,ze),Y+=ze),me=Xt(U,Y,se),$e=X>>>1==1?jt[me]:gt[me],Y+=$e&15,$e>>>=4;var Ve=$e<4?0:$e-2>>1,Be=_e[$e];for(Ve>0&&(Be+=Xt(U,Y,Ve),Y+=Ve),!ee&&Q<Ye&&(te=ct(te,Ye+100),Q=te.length);F<Ye;)te[F]=te[F-Be],++F}}}return ee?[te,Y+7>>>3]:[te.slice(0,F),Y+7>>>3]}function It(U,ee){var Y=U.slice(U.l||0),X=vt(Y,ee);return U.l+=X[1],X[0]}function at(U,ee){if(U)typeof console<"u"&&console.error(ee);else throw new Error(ee)}function lt(U,ee){var Y=U;Hs(Y,0);var X=[],te=[],F={FileIndex:X,FullPaths:te};S(F,{root:ee.root});for(var Q=Y.length-4;(Y[Q]!=80||Y[Q+1]!=75||Y[Q+2]!=5||Y[Q+3]!=6)&&Q>=0;)--Q;Y.l=Q+4,Y.l+=4;var le=Y.read_shift(2);Y.l+=6;var se=Y.read_shift(4);for(Y.l=se,Q=0;Q<le;++Q){Y.l+=20;var ue=Y.read_shift(4),me=Y.read_shift(4),$e=Y.read_shift(2),ze=Y.read_shift(2),Ye=Y.read_shift(2);Y.l+=8;var Ve=Y.read_shift(4),Be=c(Y.slice(Y.l+$e,Y.l+$e+ze));Y.l+=$e+ze+Ye;var Pt=Y.l;Y.l=Ve+4,tt(Y,ue,me,F,Be),Y.l=Pt}return F}function tt(U,ee,Y,X,te){U.l+=2;var F=U.read_shift(2),Q=U.read_shift(2),le=a(U);if(F&8257)throw new Error("Unsupported ZIP encryption");for(var se=U.read_shift(4),ue=U.read_shift(4),me=U.read_shift(4),$e=U.read_shift(2),ze=U.read_shift(2),Ye="",Ve=0;Ve<$e;++Ve)Ye+=String.fromCharCode(U[U.l++]);if(ze){var Be=c(U.slice(U.l,U.l+ze));(Be[21589]||{}).mt&&(le=Be[21589].mt),((te||{})[21589]||{}).mt&&(le=te[21589].mt)}U.l+=ze;var Pt=U.slice(U.l,U.l+ue);switch(Q){case 8:Pt=oe(U,me);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Q)}var Wt=!1;F&8&&(se=U.read_shift(4),se==134695760&&(se=U.read_shift(4),Wt=!0),ue=U.read_shift(4),me=U.read_shift(4)),ue!=ee&&at(Wt,"Bad compressed size: "+ee+" != "+ue),me!=Y&&at(Wt,"Bad uncompressed size: "+Y+" != "+me),Nr(X,Ye,Pt,{unsafe:!0,mt:le})}function Nt(U,ee){var Y=ee||{},X=[],te=[],F=Re(1),Q=Y.compression?8:0,le=0,se=0,ue=0,me=0,$e=0,ze=U.FullPaths[0],Ye=ze,Ve=U.FileIndex[0],Be=[],Pt=0;for(se=1;se<U.FullPaths.length;++se)if(Ye=U.FullPaths[se].slice(ze.length),Ve=U.FileIndex[se],!(!Ve.size||!Ve.content||Ye=="Sh33tJ5")){var Wt=me,Ht=Re(Ye.length);for(ue=0;ue<Ye.length;++ue)Ht.write_shift(1,Ye.charCodeAt(ue)&127);Ht=Ht.slice(0,Ht.l),Be[$e]=lK.buf(Ve.content,0);var ir=Ve.content;Q==8&&(ir=ie(ir)),F=Re(30),F.write_shift(4,67324752),F.write_shift(2,20),F.write_shift(2,le),F.write_shift(2,Q),Ve.mt?i(F,Ve.mt):F.write_shift(4,0),F.write_shift(-4,Be[$e]),F.write_shift(4,ir.length),F.write_shift(4,Ve.content.length),F.write_shift(2,Ht.length),F.write_shift(2,0),me+=F.length,X.push(F),me+=Ht.length,X.push(Ht),me+=ir.length,X.push(ir),F=Re(46),F.write_shift(4,33639248),F.write_shift(2,0),F.write_shift(2,20),F.write_shift(2,le),F.write_shift(2,Q),F.write_shift(4,0),F.write_shift(-4,Be[$e]),F.write_shift(4,ir.length),F.write_shift(4,Ve.content.length),F.write_shift(2,Ht.length),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(4,0),F.write_shift(4,Wt),Pt+=F.l,te.push(F),Pt+=Ht.length,te.push(Ht),++$e}return F=Re(22),F.write_shift(4,101010256),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(2,$e),F.write_shift(2,$e),F.write_shift(4,Pt),F.write_shift(4,me),F.write_shift(2,0),zn([zn(X),zn(te),F])}var Ut={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Qt(U,ee){if(U.ctype)return U.ctype;var Y=U.name||"",X=Y.match(/\.([^\.]+)$/);return X&&Ut[X[1]]||ee&&(X=(Y=ee).match(/[\.\\]([^\.\\])+$/),X&&Ut[X[1]])?Ut[X[1]]:"application/octet-stream"}function Fr(U){for(var ee=Sh(U),Y=[],X=0;X<ee.length;X+=76)Y.push(ee.slice(X,X+76));return Y.join(`\r
`)+`\r
`}function Or(U){var ee=U.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ue){var me=ue.charCodeAt(0).toString(16).toUpperCase();return"="+(me.length==1?"0"+me:me)});ee=ee.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ee.charAt(0)==`
`&&(ee="=0D"+ee.slice(1)),ee=ee.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Y=[],X=ee.split(`\r
`),te=0;te<X.length;++te){var F=X[te];if(F.length==0){Y.push("");continue}for(var Q=0;Q<F.length;){var le=76,se=F.slice(Q,Q+le);se.charAt(le-1)=="="?le--:se.charAt(le-2)=="="?le-=2:se.charAt(le-3)=="="&&(le-=3),se=F.slice(Q,Q+le),Q+=le,Q<F.length&&(se+="="),Y.push(se)}}return Y.join(`\r
`)}function _n(U){for(var ee=[],Y=0;Y<U.length;++Y){for(var X=U[Y];Y<=U.length&&X.charAt(X.length-1)=="=";)X=X.slice(0,X.length-1)+U[++Y];ee.push(X)}for(var te=0;te<ee.length;++te)ee[te]=ee[te].replace(/[=][0-9A-Fa-f]{2}/g,function(F){return String.fromCharCode(parseInt(F.slice(1),16))});return Oi(ee.join(`\r
`))}function mr(U,ee,Y){for(var X="",te="",F="",Q,le=0;le<10;++le){var se=ee[le];if(!se||se.match(/^\s*$/))break;var ue=se.match(/^(.*?):\s*([^\s].*)$/);if(ue)switch(ue[1].toLowerCase()){case"content-location":X=ue[2].trim();break;case"content-type":F=ue[2].trim();break;case"content-transfer-encoding":te=ue[2].trim();break}}switch(++le,te.toLowerCase()){case"base64":Q=Oi(io(ee.slice(le).join("")));break;case"quoted-printable":Q=_n(ee.slice(le));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+te)}var me=Nr(U,X.slice(Y.length),Q,{unsafe:!0});F&&(me.ctype=F)}function Kn(U,ee){if(Te(U.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Y=ee&&ee.root||"",X=(pr&&Buffer.isBuffer(U)?U.toString("binary"):Te(U)).split(`\r
`),te=0,F="";for(te=0;te<X.length;++te)if(F=X[te],!!/^Content-Location:/i.test(F)&&(F=F.slice(F.indexOf("file")),Y||(Y=F.slice(0,F.lastIndexOf("/")+1)),F.slice(0,Y.length)!=Y))for(;Y.length>0&&(Y=Y.slice(0,Y.length-1),Y=Y.slice(0,Y.lastIndexOf("/")+1),F.slice(0,Y.length)!=Y););var Q=(X[1]||"").match(/boundary="(.*?)"/);if(!Q)throw new Error("MAD cannot find boundary");var le="--"+(Q[1]||""),se=[],ue=[],me={FileIndex:se,FullPaths:ue};S(me);var $e,ze=0;for(te=0;te<X.length;++te){var Ye=X[te];Ye!==le&&Ye!==le+"--"||(ze++&&mr(me,X.slice($e,te),Y),$e=te)}return me}function hr(U,ee){var Y=ee||{},X=Y.boundary||"SheetJS";X="------="+X;for(var te=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+X.slice(2)+'"',"","",""],F=U.FullPaths[0],Q=F,le=U.FileIndex[0],se=1;se<U.FullPaths.length;++se)if(Q=U.FullPaths[se].slice(F.length),le=U.FileIndex[se],!(!le.size||!le.content||Q=="Sh33tJ5")){Q=Q.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Pt){return"_x"+Pt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Pt){return"_u"+Pt.charCodeAt(0).toString(16)+"_"});for(var ue=le.content,me=pr&&Buffer.isBuffer(ue)?ue.toString("binary"):Te(ue),$e=0,ze=Math.min(1024,me.length),Ye=0,Ve=0;Ve<=ze;++Ve)(Ye=me.charCodeAt(Ve))>=32&&Ye<128&&++$e;var Be=$e>=ze*4/5;te.push(X),te.push("Content-Location: "+(Y.root||"file:///C:/SheetJS/")+Q),te.push("Content-Transfer-Encoding: "+(Be?"quoted-printable":"base64")),te.push("Content-Type: "+Qt(le,Q)),te.push(""),te.push(Be?Or(me):Fr(me))}return te.push(X+`--\r
`),te.join(`\r
`)}function Rn(U){var ee={};return S(ee,U),ee}function Nr(U,ee,Y,X){var te=X&&X.unsafe;te||S(U);var F=!te&&Ar.find(U,ee);if(!F){var Q=U.FullPaths[0];ee.slice(0,Q.length)==Q?Q=ee:(Q.slice(-1)!="/"&&(Q+="/"),Q=(Q+ee).replace("//","/")),F={name:s(ee),type:2},U.FileIndex.push(F),U.FullPaths.push(Q),te||Ar.utils.cfb_gc(U)}return F.content=Y,F.size=Y?Y.length:0,X&&(X.CLSID&&(F.clsid=X.CLSID),X.mt&&(F.mt=X.mt),X.ct&&(F.ct=X.ct)),F}function En(U,ee){S(U);var Y=Ar.find(U,ee);if(Y){for(var X=0;X<U.FileIndex.length;++X)if(U.FileIndex[X]==Y)return U.FileIndex.splice(X,1),U.FullPaths.splice(X,1),!0}return!1}function an(U,ee,Y){S(U);var X=Ar.find(U,ee);if(X){for(var te=0;te<U.FileIndex.length;++te)if(U.FileIndex[te]==X)return U.FileIndex[te].name=s(Y),U.FullPaths[te]=Y,!0}return!1}function pn(U){P(U,!0)}return e.find=M,e.read=H,e.parse=p,e.write=Ne,e.writeFile=Ee,e.utils={cfb_new:Rn,cfb_add:Nr,cfb_del:En,cfb_mov:an,cfb_gc:pn,ReadShift:X0,CheckField:OI,prep_blob:Hs,bconcat:zn,use_zlib:W,_deflateRaw:J,_inflateRaw:It,consts:Me},e})();function cK(r){return typeof r=="string"?sx(r):Array.isArray(r)?FG(r):r}function hf(r,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=sx(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(r,e)}var n=t=="utf8"?Ih(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,r);if(typeof Blob<"u"){var s=new Blob([cK(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,r);if(typeof saveAs<"u")return saveAs(s,r);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:r,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=r,a.href=i,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var c=File(r);return c.open("w"),c.encoding="binary",Array.isArray(e)&&(e=df(e)),c.write(e),c.close(),e}catch(d){if(!d.message||!d.message.match(/onstruct/))throw d}throw new Error("cannot save file "+r)}function Gn(r){for(var e=Object.keys(r),t=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(r,e[n])&&t.push(e[n]);return t}function ON(r,e){for(var t=[],n=Gn(r),s=0;s!==n.length;++s)t[r[n[s]][e]]==null&&(t[r[n[s]][e]]=n[s]);return t}function cw(r){for(var e=[],t=Gn(r),n=0;n!==t.length;++n)e[r[t[n]]]=t[n];return e}function ox(r){for(var e=[],t=Gn(r),n=0;n!==t.length;++n)e[r[t[n]]]=parseInt(t[n],10);return e}function uK(r){for(var e=[],t=Gn(r),n=0;n!==t.length;++n)e[r[t[n]]]==null&&(e[r[t[n]]]=[]),e[r[t[n]]].push(t[n]);return e}var cg=new Date(1899,11,30,0,0,0);function Ds(r,e){var t=r.getTime(),n=cg.getTime()+(r.getTimezoneOffset()-cg.getTimezoneOffset())*6e4;return(t-n)/(1440*60*1e3)}var vI=new Date,dK=cg.getTime()+(vI.getTimezoneOffset()-cg.getTimezoneOffset())*6e4,LN=vI.getTimezoneOffset();function bI(r){var e=new Date;return e.setTime(r*24*60*60*1e3+dK),e.getTimezoneOffset()!==LN&&e.setTime(e.getTime()+(e.getTimezoneOffset()-LN)*6e4),e}var MN=new Date("2017-02-19T19:06:09.000Z"),wI=isNaN(MN.getFullYear())?new Date("2/19/17"):MN,hK=wI.getFullYear()==2017;function xs(r,e){var t=new Date(r);if(hK)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(r instanceof Date)return r;if(wI.getFullYear()==1917&&!isNaN(t.getFullYear())){var n=t.getFullYear();return r.indexOf(""+n)>-1||t.setFullYear(t.getFullYear()+100),t}var s=r.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return r.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function lx(r,e){if(pr&&Buffer.isBuffer(r))return r.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(r)&&(r=new Uint8Array(r)),new TextDecoder("latin1").decode(r).replace(/[]/g,function(i){return t[i]||i})}catch{}for(var n=[],s=0;s!=r.length;++s)n.push(String.fromCharCode(r[s]));return n.join("")}function Fs(r){if(typeof JSON<"u"&&!Array.isArray(r))return JSON.parse(JSON.stringify(r));if(typeof r!="object"||r==null)return r;if(r instanceof Date)return new Date(r.getTime());var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=Fs(r[t]));return e}function Jr(r,e){for(var t="";t.length<e;)t+=r;return t}function Xa(r){var e=Number(r);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(r))return e;var t=1,n=r.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return t=-t,i}),!isNaN(e=Number(n)))?e/t:e}var fK=["january","february","march","april","may","june","july","august","september","october","november","december"];function Ch(r){var e=new Date(r),t=new Date(NaN),n=e.getYear(),s=e.getMonth(),i=e.getDate();if(isNaN(i))return t;var a=r.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&fK.indexOf(a)==-1)return t}else if(a.match(/[a-z]/))return t;return n<0||n>8099?t:(s>0||i>1)&&n!=101?e:r.match(/[^-0-9:,\/\\]/)?t:e}function qt(r,e,t){if(r.FullPaths){if(typeof t=="string"){var n;return pr?n=ho(t):n=OG(t),Ar.utils.cfb_add(r,e,n)}Ar.utils.cfb_add(r,e,t)}else r.file(e,t)}function uw(){return Ar.utils.cfb_new()}var fn=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,pK={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},dw=cw(pK),hw=/[&<>'"]/g,mK=/[\u0000-\u0008\u000b-\u001f]/g;function _r(r){var e=r+"";return e.replace(hw,function(t){return dw[t]}).replace(mK,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function VN(r){return _r(r).replace(/ /g,"_x0020_")}var _I=/[\u0000-\u001f]/g;function gK(r){var e=r+"";return e.replace(hw,function(t){return dw[t]}).replace(/\n/g,"<br/>").replace(_I,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function xK(r){var e=r+"";return e.replace(hw,function(t){return dw[t]}).replace(_I,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function yK(r){return r.replace(/(\r\n|[\r\n])/g,"&#10;")}function vK(r){switch(r){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Tv(r){for(var e="",t=0,n=0,s=0,i=0,a=0,c=0;t<r.length;){if(n=r.charCodeAt(t++),n<128){e+=String.fromCharCode(n);continue}if(s=r.charCodeAt(t++),n>191&&n<224){a=(n&31)<<6,a|=s&63,e+=String.fromCharCode(a);continue}if(i=r.charCodeAt(t++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}a=r.charCodeAt(t++),c=((n&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(c>>>10&1023)),e+=String.fromCharCode(56320+(c&1023))}return e}function $N(r){var e=wc(2*r.length),t,n,s=1,i=0,a=0,c;for(n=0;n<r.length;n+=s)s=1,(c=r.charCodeAt(n))<128?t=c:c<224?(t=(c&31)*64+(r.charCodeAt(n+1)&63),s=2):c<240?(t=(c&15)*4096+(r.charCodeAt(n+1)&63)*64+(r.charCodeAt(n+2)&63),s=3):(s=4,t=(c&7)*262144+(r.charCodeAt(n+1)&63)*4096+(r.charCodeAt(n+2)&63)*64+(r.charCodeAt(n+3)&63),t-=65536,a=55296+(t>>>10&1023),t=56320+(t&1023)),a!==0&&(e[i++]=a&255,e[i++]=a>>>8,a=0),e[i++]=t%256,e[i++]=t>>>8;return e.slice(0,i).toString("ucs2")}function BN(r){return ho(r,"binary").toString("utf8")}var Bp="foo bar baz",Y0=pr&&(BN(Bp)==Tv(Bp)&&BN||$N(Bp)==Tv(Bp)&&$N)||Tv,Ih=pr?function(r){return ho(r,"utf8").toString("binary")}:function(r){for(var e=[],t=0,n=0,s=0;t<r.length;)switch(n=r.charCodeAt(t++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=r.charCodeAt(t++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},bK=(function(){var r=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<r.length;++s)n=n.replace(r[s][0],r[s][1]);return n}})(),EI=/(^\s|\s$|\n)/;function Hn(r,e){return"<"+r+(e.match(EI)?' xml:space="preserve"':"")+">"+e+"</"+r+">"}function Ph(r){return Gn(r).map(function(e){return" "+e+'="'+r[e]+'"'}).join("")}function rt(r,e,t){return"<"+r+(t!=null?Ph(t):"")+(e!=null?(e.match(EI)?' xml:space="preserve"':"")+">"+e+"</"+r:"/")+">"}function M1(r,e){try{return r.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function wK(r,e){switch(typeof r){case"string":var t=rt("vt:lpwstr",_r(r));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return rt((r|0)==r?"vt:i4":"vt:r8",_r(String(r)));case"boolean":return rt("vt:bool",r?"true":"false")}if(r instanceof Date)return rt("vt:filetime",M1(r));throw new Error("Unable to serialize "+r)}var Cn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Dd=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ws={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function _K(r,e){for(var t=1-2*(r[e+7]>>>7),n=((r[e+7]&127)<<4)+(r[e+6]>>>4&15),s=r[e+6]&15,i=5;i>=0;--i)s=s*256+r[e+i];return n==2047?s==0?t*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),t*Math.pow(2,n-52)*s)}function EK(r,e,t){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,i=0,a=n?-e:e;isFinite(a)?a==0?s=i=0:(s=Math.floor(Math.log(a)/Math.LN2),i=a*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(e)?26985:0);for(var c=0;c<=5;++c,i/=256)r[t+c]=i&255;r[t+6]=(s&15)<<4|i&15,r[t+7]=s>>4|n}var UN=function(r){for(var e=[],t=10240,n=0;n<r[0].length;++n)if(r[0][n])for(var s=0,i=r[0][n].length;s<i;s+=t)e.push.apply(e,r[0][n].slice(s,s+t));return e},zN=pr?function(r){return r[0].length>0&&Buffer.isBuffer(r[0][0])?Buffer.concat(r[0].map(function(e){return Buffer.isBuffer(e)?e:ho(e)})):UN(r)}:UN,HN=function(r,e,t){for(var n=[],s=e;s<t;s+=2)n.push(String.fromCharCode(R0(r,s)));return n.join("").replace(K0,"")},fw=pr?function(r,e,t){return Buffer.isBuffer(r)?r.toString("utf16le",e,t).replace(K0,""):HN(r,e,t)}:HN,WN=function(r,e,t){for(var n=[],s=e;s<e+t;++s)n.push(("0"+r[s].toString(16)).slice(-2));return n.join("")},TI=pr?function(r,e,t){return Buffer.isBuffer(r)?r.toString("hex",e,e+t):WN(r,e,t)}:WN,qN=function(r,e,t){for(var n=[],s=e;s<t;s++)n.push(String.fromCharCode(Fu(r,s)));return n.join("")},ff=pr?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):qN(e,t,n)}:qN,AI=function(r,e){var t=qs(r,e);return t>0?ff(r,e+4,e+4+t-1):""},NI=AI,kI=function(r,e){var t=qs(r,e);return t>0?ff(r,e+4,e+4+t-1):""},SI=kI,CI=function(r,e){var t=2*qs(r,e);return t>0?ff(r,e+4,e+4+t-1):""},II=CI,PI=function(e,t){var n=qs(e,t);return n>0?fw(e,t+4,t+4+n):""},jI=PI,RI=function(r,e){var t=qs(r,e);return t>0?ff(r,e+4,e+4+t):""},DI=RI,FI=function(r,e){return _K(r,e)},ug=FI,pw=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};pr&&(NI=function(e,t){if(!Buffer.isBuffer(e))return AI(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},SI=function(e,t){if(!Buffer.isBuffer(e))return kI(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},II=function(e,t){if(!Buffer.isBuffer(e))return CI(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},jI=function(e,t){if(!Buffer.isBuffer(e))return PI(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},DI=function(e,t){if(!Buffer.isBuffer(e))return RI(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},ug=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):FI(e,t)},pw=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Fu=function(r,e){return r[e]},R0=function(r,e){return r[e+1]*256+r[e]},TK=function(r,e){var t=r[e+1]*256+r[e];return t<32768?t:(65535-t+1)*-1},qs=function(r,e){return r[e+3]*(1<<24)+(r[e+2]<<16)+(r[e+1]<<8)+r[e]},Yl=function(r,e){return r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]},AK=function(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]};function X0(r,e){var t="",n,s,i=[],a,c,d,h;switch(e){case"dbcs":if(h=this.l,pr&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*r).toString("utf16le");else for(d=0;d<r;++d)t+=String.fromCharCode(R0(this,h)),h+=2;r*=2;break;case"utf8":t=ff(this,this.l,this.l+r);break;case"utf16le":r*=2,t=fw(this,this.l,this.l+r);break;case"wstr":return X0.call(this,r,"dbcs");case"lpstr-ansi":t=NI(this,this.l),r=4+qs(this,this.l);break;case"lpstr-cp":t=SI(this,this.l),r=4+qs(this,this.l);break;case"lpwstr":t=II(this,this.l),r=4+2*qs(this,this.l);break;case"lpp4":r=4+qs(this,this.l),t=jI(this,this.l),r&2&&(r+=2);break;case"8lpp4":r=4+qs(this,this.l),t=DI(this,this.l),r&3&&(r+=4-(r&3));break;case"cstr":for(r=0,t="";(a=Fu(this,this.l+r++))!==0;)i.push(Mp(a));t=i.join("");break;case"_wstr":for(r=0,t="";(a=R0(this,this.l+r))!==0;)i.push(Mp(a)),r+=2;r+=2,t=i.join("");break;case"dbcs-cont":for(t="",h=this.l,d=0;d<r;++d){if(this.lens&&this.lens.indexOf(h)!==-1)return a=Fu(this,h),this.l=h+1,c=X0.call(this,r-d,a?"dbcs-cont":"sbcs-cont"),i.join("")+c;i.push(Mp(R0(this,h))),h+=2}t=i.join(""),r*=2;break;case"cpstr":case"sbcs-cont":for(t="",h=this.l,d=0;d!=r;++d){if(this.lens&&this.lens.indexOf(h)!==-1)return a=Fu(this,h),this.l=h+1,c=X0.call(this,r-d,a?"dbcs-cont":"sbcs-cont"),i.join("")+c;i.push(Mp(Fu(this,h))),h+=1}t=i.join("");break;default:switch(r){case 1:return n=Fu(this,this.l),this.l++,n;case 2:return n=(e==="i"?TK:R0)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(r>0?Yl:AK)(this,this.l),this.l+=4,n):(s=qs(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return r==8?s=ug(this,this.l):s=ug([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;r=8;case 16:t=TI(this,this.l,r);break}}return this.l+=r,t}var NK=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24&255},kK=function(r,e,t){r[t]=e&255,r[t+1]=e>>8&255,r[t+2]=e>>16&255,r[t+3]=e>>24&255},SK=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255};function CK(r,e,t){var n=0,s=0;if(t==="dbcs"){for(s=0;s!=e.length;++s)SK(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(t==="hex"){for(;s<r;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(t==="utf16le"){var i=Math.min(this.l+r,this.length);for(s=0;s<Math.min(e.length,r);++s){var a=e.charCodeAt(s);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(r){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,NK(this,e,this.l);break;case 8:if(n=8,t==="f"){EK(this,e,this.l);break}case 16:break;case-4:n=4,kK(this,e,this.l);break}return this.l+=n,this}function OI(r,e){var t=TI(this,this.l,r.length>>1);if(t!==r)throw new Error(e+"Expected "+r+" saw "+t);this.l+=r.length>>1}function Hs(r,e){r.l=e,r.read_shift=X0,r.chk=OI,r.write_shift=CK}function Ea(r,e){r.l+=e}function Re(r){var e=wc(r);return Hs(e,0),e}function Rs(){var r=[],e=pr?256:2048,t=function(h){var p=Re(h);return Hs(p,0),p},n=t(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&r.push(n),n=null)},i=function(h){return n&&h<n.length-n.l?n:(s(),n=t(Math.max(h+1,e)))},a=function(){return s(),zn(r)},c=function(h){s(),n=h,n.l==null&&(n.l=n.length),i(e)};return{next:i,push:c,end:a,_bufs:r}}function Ue(r,e,t,n){var s=+e,i;if(!isNaN(s)){n||(n=_ee[s].p||(t||[]).length||0),i=1+(s>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var a=r.next(i);s<=127?a.write_shift(1,s):(a.write_shift(1,(s&127)+128),a.write_shift(1,s>>7));for(var c=0;c!=4;++c)if(n>=128)a.write_shift(1,(n&127)+128),n>>=7;else{a.write_shift(1,n);break}n>0&&pw(t)&&r.push(t)}}function Q0(r,e,t){var n=Fs(r);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!t||t.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function GN(r,e,t){var n=Fs(r);return n.s=Q0(n.s,e.s,t),n.e=Q0(n.e,e.s,t),n}function J0(r,e){if(r.cRel&&r.c<0)for(r=Fs(r);r.c<0;)r.c+=e>8?16384:256;if(r.rRel&&r.r<0)for(r=Fs(r);r.r<0;)r.r+=e>8?1048576:e>5?65536:16384;var t=Tr(r);return!r.cRel&&r.cRel!=null&&(t=jK(t)),!r.rRel&&r.rRel!=null&&(t=IK(t)),t}function Av(r,e){return r.s.r==0&&!r.s.rRel&&r.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!r.e.rRel?(r.s.cRel?"":"$")+as(r.s.c)+":"+(r.e.cRel?"":"$")+as(r.e.c):r.s.c==0&&!r.s.cRel&&r.e.c==(e.biff>=12?16383:255)&&!r.e.cRel?(r.s.rRel?"":"$")+qn(r.s.r)+":"+(r.e.rRel?"":"$")+qn(r.e.r):J0(r.s,e.biff)+":"+J0(r.e,e.biff)}function mw(r){return parseInt(PK(r),10)-1}function qn(r){return""+(r+1)}function IK(r){return r.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function PK(r){return r.replace(/\$(\d+)$/,"$1")}function gw(r){for(var e=RK(r),t=0,n=0;n!==e.length;++n)t=26*t+e.charCodeAt(n)-64;return t-1}function as(r){if(r<0)throw new Error("invalid column "+r);var e="";for(++r;r;r=Math.floor((r-1)/26))e=String.fromCharCode((r-1)%26+65)+e;return e}function jK(r){return r.replace(/^([A-Z])/,"$$$1")}function RK(r){return r.replace(/^\$([A-Z])/,"$1")}function DK(r){return r.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function In(r){for(var e=0,t=0,n=0;n<r.length;++n){var s=r.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(t=26*t+(s-64))}return{c:t-1,r:e-1}}function Tr(r){for(var e=r.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(r.r+1)}function ei(r){var e=r.indexOf(":");return e==-1?{s:In(r),e:In(r)}:{s:In(r.slice(0,e)),e:In(r.slice(e+1))}}function dn(r,e){return typeof e>"u"||typeof e=="number"?dn(r.s,r.e):(typeof r!="string"&&(r=Tr(r)),typeof e!="string"&&(e=Tr(e)),r==e?r:r+":"+e)}function Dr(r){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,n=0,s=0,i=r.length;for(t=0;n<i&&!((s=r.charCodeAt(n)-64)<1||s>26);++n)t=26*t+s;for(e.s.c=--t,t=0;n<i&&!((s=r.charCodeAt(n)-48)<0||s>9);++n)t=10*t+s;if(e.s.r=--t,n===i||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,t=0;n!=i&&!((s=r.charCodeAt(n)-64)<1||s>26);++n)t=26*t+s;for(e.e.c=--t,t=0;n!=i&&!((s=r.charCodeAt(n)-48)<0||s>9);++n)t=10*t+s;return e.e.r=--t,e}function KN(r,e){var t=r.t=="d"&&e instanceof Date;if(r.z!=null)try{return r.w=dl(r.z,t?Ds(e):e)}catch{}try{return r.w=dl((r.XF||{}).numFmtId||(t?14:0),t?Ds(e):e)}catch{return""+e}}function ao(r,e,t){return r==null||r.t==null||r.t=="z"?"":r.w!==void 0?r.w:(r.t=="d"&&!r.z&&t&&t.dateNF&&(r.z=t.dateNF),r.t=="e"?pf[r.v]||r.v:e==null?KN(r,r.v):KN(r,e))}function Oc(r,e){var t=e&&e.sheet?e.sheet:"Sheet1",n={};return n[t]=r,{SheetNames:[t],Sheets:n}}function LI(r,e,t){var n=t||{},s=r?Array.isArray(r):n.dense,i=r||(s?[]:{}),a=0,c=0;if(i&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var d=typeof n.origin=="string"?In(n.origin):n.origin;a=d.r,c=d.c}i["!ref"]||(i["!ref"]="A1:A1")}var h={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var p=Dr(i["!ref"]);h.s.c=p.s.c,h.s.r=p.s.r,h.e.c=Math.max(h.e.c,p.e.c),h.e.r=Math.max(h.e.r,p.e.r),a==-1&&(h.e.r=a=p.e.r+1)}for(var m=0;m!=e.length;++m)if(e[m]){if(!Array.isArray(e[m]))throw new Error("aoa_to_sheet expects an array of arrays");for(var x=0;x!=e[m].length;++x)if(!(typeof e[m][x]>"u")){var v={v:e[m][x]},_=a+m,w=c+x;if(h.s.r>_&&(h.s.r=_),h.s.c>w&&(h.s.c=w),h.e.r<_&&(h.e.r=_),h.e.c<w&&(h.e.c=w),e[m][x]&&typeof e[m][x]=="object"&&!Array.isArray(e[m][x])&&!(e[m][x]instanceof Date))v=e[m][x];else if(Array.isArray(v.v)&&(v.f=e[m][x][1],v.v=v.v[0]),v.v===null)if(v.f)v.t="n";else if(n.nullError)v.t="e",v.v=0;else if(n.sheetStubs)v.t="z";else continue;else typeof v.v=="number"?v.t="n":typeof v.v=="boolean"?v.t="b":v.v instanceof Date?(v.z=n.dateNF||en[14],n.cellDates?(v.t="d",v.w=dl(v.z,Ds(v.v))):(v.t="n",v.v=Ds(v.v),v.w=dl(v.z,v.v))):v.t="s";if(s)i[_]||(i[_]=[]),i[_][w]&&i[_][w].z&&(v.z=i[_][w].z),i[_][w]=v;else{var E=Tr({c:w,r:_});i[E]&&i[E].z&&(v.z=i[E].z),i[E]=v}}}return h.s.c<1e7&&(i["!ref"]=dn(h)),i}function Fd(r,e){return LI(null,r,e)}function FK(r){return r.read_shift(4,"i")}function Ui(r,e){return e||(e=Re(4)),e.write_shift(4,r),e}function os(r){var e=r.read_shift(4);return e===0?"":r.read_shift(e,"dbcs")}function Pn(r,e){var t=!1;return e==null&&(t=!0,e=Re(4+2*r.length)),e.write_shift(4,r.length),r.length>0&&e.write_shift(0,r,"dbcs"),t?e.slice(0,e.l):e}function OK(r){return{ich:r.read_shift(2),ifnt:r.read_shift(2)}}function LK(r,e){return e||(e=Re(4)),e.write_shift(2,0),e.write_shift(2,0),e}function xw(r,e){var t=r.l,n=r.read_shift(1),s=os(r),i=[],a={t:s,h:s};if((n&1)!==0){for(var c=r.read_shift(4),d=0;d!=c;++d)i.push(OK(r));a.r=i}else a.r=[{ich:0,ifnt:0}];return r.l=t+e,a}function MK(r,e){var t=!1;return e==null&&(t=!0,e=Re(15+4*r.t.length)),e.write_shift(1,0),Pn(r.t,e),t?e.slice(0,e.l):e}var VK=xw;function $K(r,e){var t=!1;return e==null&&(t=!0,e=Re(23+4*r.t.length)),e.write_shift(1,1),Pn(r.t,e),e.write_shift(4,1),LK({},e),t?e.slice(0,e.l):e}function vi(r){var e=r.read_shift(4),t=r.read_shift(2);return t+=r.read_shift(1)<<16,r.l++,{c:e,iStyleRef:t}}function Lc(r,e){return e==null&&(e=Re(8)),e.write_shift(-4,r.c),e.write_shift(3,r.iStyleRef||r.s),e.write_shift(1,0),e}function Mc(r){var e=r.read_shift(2);return e+=r.read_shift(1)<<16,r.l++,{c:-1,iStyleRef:e}}function Vc(r,e){return e==null&&(e=Re(4)),e.write_shift(3,r.iStyleRef||r.s),e.write_shift(1,0),e}var BK=os,MI=Pn;function yw(r){var e=r.read_shift(4);return e===0||e===4294967295?"":r.read_shift(e,"dbcs")}function dg(r,e){var t=!1;return e==null&&(t=!0,e=Re(127)),e.write_shift(4,r.length>0?r.length:4294967295),r.length>0&&e.write_shift(0,r,"dbcs"),t?e.slice(0,e.l):e}var UK=os,V1=yw,vw=dg;function VI(r){var e=r.slice(r.l,r.l+4),t=e[0]&1,n=e[0]&2;r.l+=4;var s=n===0?ug([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Yl(e,0)>>2;return t?s/100:s}function $I(r,e){e==null&&(e=Re(4));var t=0,n=0,s=r*100;if(r==(r|0)&&r>=-536870912&&r<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,t=1),n)e.write_shift(-4,((t?s:r)<<2)+(t+2));else throw new Error("unsupported RkNumber "+r)}function BI(r){var e={s:{},e:{}};return e.s.r=r.read_shift(4),e.e.r=r.read_shift(4),e.s.c=r.read_shift(4),e.e.c=r.read_shift(4),e}function zK(r,e){return e||(e=Re(16)),e.write_shift(4,r.s.r),e.write_shift(4,r.e.r),e.write_shift(4,r.s.c),e.write_shift(4,r.e.c),e}var $c=BI,Od=zK;function Ld(r){if(r.length-r.l<8)throw"XLS Xnum Buffer underflow";return r.read_shift(8,"f")}function _c(r,e){return(e||Re(8)).write_shift(8,r,"f")}function HK(r){var e={},t=r.read_shift(1),n=t>>>1,s=r.read_shift(1),i=r.read_shift(2,"i"),a=r.read_shift(1),c=r.read_shift(1),d=r.read_shift(1);switch(r.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var h=ZK[s];h&&(e.rgb=ik(h));break;case 2:e.rgb=ik([a,c,d]);break;case 3:e.theme=s;break}return i!=0&&(e.tint=i>0?i/32767:i/32768),e}function hg(r,e){if(e||(e=Re(8)),!r||r.auto)return e.write_shift(4,0),e.write_shift(4,0),e;r.index!=null?(e.write_shift(1,2),e.write_shift(1,r.index)):r.theme!=null?(e.write_shift(1,6),e.write_shift(1,r.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=r.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!r.rgb||r.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=r.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function WK(r){var e=r.read_shift(1);r.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function qK(r,e){e||(e=Re(2));var t=(r.italic?2:0)|(r.strike?8:0)|(r.outline?16:0)|(r.shadow?32:0)|(r.condense?64:0)|(r.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var UI=2,Us=3,Up=11,fg=19,zp=64,GK=65,KK=71,YK=4108,XK=4126,$n=80,YN={1:{n:"CodePage",t:UI},2:{n:"Category",t:$n},3:{n:"PresentationFormat",t:$n},4:{n:"ByteCount",t:Us},5:{n:"LineCount",t:Us},6:{n:"ParagraphCount",t:Us},7:{n:"SlideCount",t:Us},8:{n:"NoteCount",t:Us},9:{n:"HiddenCount",t:Us},10:{n:"MultimediaClipCount",t:Us},11:{n:"ScaleCrop",t:Up},12:{n:"HeadingPairs",t:YK},13:{n:"TitlesOfParts",t:XK},14:{n:"Manager",t:$n},15:{n:"Company",t:$n},16:{n:"LinksUpToDate",t:Up},17:{n:"CharacterCount",t:Us},19:{n:"SharedDoc",t:Up},22:{n:"HyperlinksChanged",t:Up},23:{n:"AppVersion",t:Us,p:"version"},24:{n:"DigSig",t:GK},26:{n:"ContentType",t:$n},27:{n:"ContentStatus",t:$n},28:{n:"Language",t:$n},29:{n:"Version",t:$n},255:{},2147483648:{n:"Locale",t:fg},2147483651:{n:"Behavior",t:fg},1919054434:{}},XN={1:{n:"CodePage",t:UI},2:{n:"Title",t:$n},3:{n:"Subject",t:$n},4:{n:"Author",t:$n},5:{n:"Keywords",t:$n},6:{n:"Comments",t:$n},7:{n:"Template",t:$n},8:{n:"LastAuthor",t:$n},9:{n:"RevNumber",t:$n},10:{n:"EditTime",t:zp},11:{n:"LastPrinted",t:zp},12:{n:"CreatedDate",t:zp},13:{n:"ModifiedDate",t:zp},14:{n:"PageCount",t:Us},15:{n:"WordCount",t:Us},16:{n:"CharCount",t:Us},17:{n:"Thumbnail",t:KK},18:{n:"Application",t:$n},19:{n:"DocSecurity",t:Us},255:{},2147483648:{n:"Locale",t:fg},2147483651:{n:"Behavior",t:fg},1919054434:{}};function QK(r){return r.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var JK=QK([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ZK=Fs(JK),pf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},eY={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Hp={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function zI(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function HI(r,e){var t=uK(eY),n=[],s;n[n.length]=fn,n[n.length]=rt("Types",null,{xmlns:Cn.CT,"xmlns:xsd":Cn.xsd,"xmlns:xsi":Cn.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(d){return rt("Default",null,{Extension:d[0],ContentType:d[1]})}));var i=function(d){r[d]&&r[d].length>0&&(s=r[d][0],n[n.length]=rt("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Hp[d][e.bookType]||Hp[d].xlsx}))},a=function(d){(r[d]||[]).forEach(function(h){n[n.length]=rt("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:Hp[d][e.bookType]||Hp[d].xlsx})})},c=function(d){(r[d]||[]).forEach(function(h){n[n.length]=rt("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:t[d][0]})})};return i("workbooks"),a("sheets"),a("charts"),c("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(c),c("vba"),c("comments"),c("threadedcomments"),c("drawings"),a("metadata"),c("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var or={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function WI(r){var e=r.lastIndexOf("/");return r.slice(0,e+1)+"_rels/"+r.slice(e+1)+".rels"}function Yu(r){var e=[fn,rt("Relationships",null,{xmlns:Cn.RELS})];return Gn(r["!id"]).forEach(function(t){e[e.length]=rt("Relationship",null,r["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function vr(r,e,t,n,s,i){if(s||(s={}),r["!id"]||(r["!id"]={}),r["!idx"]||(r["!idx"]=1),e<0)for(e=r["!idx"];r["!id"]["rId"+e];++e);if(r["!idx"]=e+1,s.Id="rId"+e,s.Type=n,s.Target=t,[or.HLINK,or.XPATH,or.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),r["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return r["!id"][s.Id]=s,r[("/"+s.Target).replace("//","/")]=s,e}function tY(r){var e=[fn];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<r.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+r[t][0]+'" manifest:media-type="'+r[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function QN(r,e,t){return['  <rdf:Description rdf:about="'+r+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function rY(r,e){return['  <rdf:Description rdf:about="'+r+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function nY(r){var e=[fn];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=r.length;++t)e.push(QN(r[t][0],r[t][1])),e.push(rY("",r[t][0]));return e.push(QN("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function qI(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+sg.version+"</meta:generator></office:meta></office:document-meta>"}var sc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Nv(r,e,t,n,s){s[r]!=null||e==null||e===""||(s[r]=e,e=_r(e),n[n.length]=t?rt(r,e,t):Hn(r,e))}function GI(r,e){var t=e||{},n=[fn,rt("cp:coreProperties",null,{"xmlns:cp":Cn.CORE_PROPS,"xmlns:dc":Cn.dc,"xmlns:dcterms":Cn.dcterms,"xmlns:dcmitype":Cn.dcmitype,"xmlns:xsi":Cn.xsi})],s={};if(!r&&!t.Props)return n.join("");r&&(r.CreatedDate!=null&&Nv("dcterms:created",typeof r.CreatedDate=="string"?r.CreatedDate:M1(r.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),r.ModifiedDate!=null&&Nv("dcterms:modified",typeof r.ModifiedDate=="string"?r.ModifiedDate:M1(r.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var i=0;i!=sc.length;++i){var a=sc[i],c=t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:r?r[a[1]]:null;c===!0?c="1":c===!1?c="0":typeof c=="number"&&(c=String(c)),c!=null&&Nv(a[0],c,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Xu=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],KI=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function YI(r){var e=[],t=rt;return r||(r={}),r.Application="SheetJS",e[e.length]=fn,e[e.length]=rt("Properties",null,{xmlns:Cn.EXT_PROPS,"xmlns:vt":Cn.vt}),Xu.forEach(function(n){if(r[n[1]]!==void 0){var s;switch(n[2]){case"string":s=_r(String(r[n[1]]));break;case"bool":s=r[n[1]]?"true":"false";break}s!==void 0&&(e[e.length]=t(n[0],s))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(r.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",r.SheetNames.map(function(n){return"<vt:lpstr>"+_r(n)+"</vt:lpstr>"}).join(""),{size:r.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function XI(r){var e=[fn,rt("Properties",null,{xmlns:Cn.CUST_PROPS,"xmlns:vt":Cn.vt})];if(!r)return e.join("");var t=1;return Gn(r).forEach(function(s){++t,e[e.length]=rt("property",wK(r[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:_r(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var JN={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function sY(r,e){var t=[];return Gn(JN).map(function(n){for(var s=0;s<sc.length;++s)if(sc[s][1]==n)return sc[s];for(s=0;s<Xu.length;++s)if(Xu[s][1]==n)return Xu[s];throw n}).forEach(function(n){if(r[n[1]]!=null){var s=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:r[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),t.push(Hn(JN[n[1]]||n[1],s))}}),rt("DocumentProperties",t.join(""),{xmlns:Ws.o})}function iY(r,e){var t=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return r&&Gn(r).forEach(function(i){if(Object.prototype.hasOwnProperty.call(r,i)){for(var a=0;a<sc.length;++a)if(i==sc[a][1])return;for(a=0;a<Xu.length;++a)if(i==Xu[a][1])return;for(a=0;a<t.length;++a)if(i==t[a])return;var c=r[i],d="string";typeof c=="number"?(d="float",c=String(c)):c===!0||c===!1?(d="boolean",c=c?"1":"0"):c=String(c),s.push(rt(VN(i),c,{"dt:dt":d}))}}),e&&Gn(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)&&!(r&&Object.prototype.hasOwnProperty.call(r,i))){var a=e[i],c="string";typeof a=="number"?(c="float",a=String(a)):a===!0||a===!1?(c="boolean",a=a?"1":"0"):a instanceof Date?(c="dateTime.tz",a=a.toISOString()):a=String(a),s.push(rt(VN(i),a,{"dt:dt":c}))}}),"<"+n+' xmlns="'+Ws.o+'">'+s.join("")+"</"+n+">"}function aY(r){var e=typeof r=="string"?new Date(Date.parse(r)):r,t=e.getTime()/1e3+11644473600,n=t%Math.pow(2,32),s=(t-n)/Math.pow(2,32);n*=1e7,s*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),s+=i);var a=Re(8);return a.write_shift(4,n),a.write_shift(4,s),a}function ZN(r,e){var t=Re(4),n=Re(4);switch(t.write_shift(4,r==80?31:r),r){case 3:n.write_shift(-4,e);break;case 5:n=Re(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=aY(e);break;case 31:case 80:for(n=Re(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+r+" "+e)}return zn([t,n])}var QI=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function oY(r){switch(typeof r){case"boolean":return 11;case"number":return(r|0)==r?3:5;case"string":return 31;case"object":if(r instanceof Date)return 64;break}return-1}function ek(r,e,t){var n=Re(8),s=[],i=[],a=8,c=0,d=Re(8),h=Re(8);if(d.write_shift(4,2),d.write_shift(4,1200),h.write_shift(4,1),i.push(d),s.push(h),a+=8+d.length,!e){h=Re(8),h.write_shift(4,0),s.unshift(h);var p=[Re(4)];for(p[0].write_shift(4,r.length),c=0;c<r.length;++c){var m=r[c][0];for(d=Re(8+2*(m.length+1)+(m.length%2?0:2)),d.write_shift(4,c+2),d.write_shift(4,m.length+1),d.write_shift(0,m,"dbcs");d.l!=d.length;)d.write_shift(1,0);p.push(d)}d=zn(p),i.unshift(d),a+=8+d.length}for(c=0;c<r.length;++c)if(!(e&&!e[r[c][0]])&&!(QI.indexOf(r[c][0])>-1||KI.indexOf(r[c][0])>-1)&&r[c][1]!=null){var x=r[c][1],v=0;if(e){v=+e[r[c][0]];var _=t[v];if(_.p=="version"&&typeof x=="string"){var w=x.split(".");x=(+w[0]<<16)+(+w[1]||0)}d=ZN(_.t,x)}else{var E=oY(x);E==-1&&(E=31,x=String(x)),d=ZN(E,x)}i.push(d),h=Re(8),h.write_shift(4,e?v:2+c),s.push(h),a+=8+d.length}var R=8*(i.length+1);for(c=0;c<i.length;++c)s[c].write_shift(4,R),R+=i[c].length;return n.write_shift(4,a),n.write_shift(4,i.length),zn([n].concat(s).concat(i))}function tk(r,e,t,n,s,i){var a=Re(s?68:48),c=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,Ar.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,s?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,s?68:48);var d=ek(r,t,n);if(c.push(d),s){var h=ek(s,null,null);a.write_shift(16,i,"hex"),a.write_shift(4,68+d.length),c.push(h)}return zn(c)}function lY(r,e){e||(e=Re(r));for(var t=0;t<r;++t)e.write_shift(1,0);return e}function cY(r,e){return r.read_shift(e)===1}function ps(r,e){return e||(e=Re(2)),e.write_shift(2,+!!r),e}function JI(r){return r.read_shift(2,"u")}function hi(r,e){return e||(e=Re(2)),e.write_shift(2,r),e}function ZI(r,e,t){return t||(t=Re(2)),t.write_shift(1,e=="e"?+r:+!!r),t.write_shift(1,e=="e"?1:0),t}function eP(r,e,t){var n=r.read_shift(t&&t.biff>=12?2:1),s="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var i=r.read_shift(1);i&&(s="dbcs-cont")}else t.biff==12&&(s="wstr");t.biff>=2&&t.biff<=5&&(s="cpstr");var a=n?r.read_shift(n,s):"";return a}function uY(r){var e=r.t||"",t=Re(3);t.write_shift(2,e.length),t.write_shift(1,1);var n=Re(2*e.length);n.write_shift(2*e.length,e,"utf16le");var s=[t,n];return zn(s)}function dY(r,e,t){var n;if(t){if(t.biff>=2&&t.biff<=5)return r.read_shift(e,"cpstr");if(t.biff>=12)return r.read_shift(e,"dbcs-cont")}var s=r.read_shift(1);return s===0?n=r.read_shift(e,"sbcs-cont"):n=r.read_shift(e,"dbcs-cont"),n}function hY(r,e,t){var n=r.read_shift(t&&t.biff==2?1:2);return n===0?(r.l++,""):dY(r,n,t)}function fY(r,e,t){if(t.biff>5)return hY(r,e,t);var n=r.read_shift(1);return n===0?(r.l++,""):r.read_shift(n,t.biff<=4||!r.lens?"cpstr":"sbcs-cont")}function tP(r,e,t){return t||(t=Re(3+2*r.length)),t.write_shift(2,r.length),t.write_shift(1,1),t.write_shift(31,r,"utf16le"),t}function rk(r,e){e||(e=Re(6+r.length*2)),e.write_shift(4,1+r.length);for(var t=0;t<r.length;++t)e.write_shift(2,r.charCodeAt(t));return e.write_shift(2,0),e}function pY(r){var e=Re(512),t=0,n=r.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),i=s>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}e.write_shift(4,2),e.write_shift(4,i);var a=[8,6815827,6619237,4849780,83];for(t=0;t<a.length;++t)e.write_shift(4,a[t]);if(i==28)n=n.slice(1),rk(n,e);else if(i&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));var c=s>-1?n.slice(0,s):n;for(e.write_shift(4,2*(c.length+1)),t=0;t<c.length;++t)e.write_shift(2,c.charCodeAt(t));e.write_shift(2,0),i&8&&rk(s>-1?n.slice(s+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));for(var d=0;n.slice(d*3,d*3+3)=="../"||n.slice(d*3,d*3+3)=="..\\";)++d;for(e.write_shift(2,d),e.write_shift(4,n.length-3*d+1),t=0;t<n.length-3*d;++t)e.write_shift(1,n.charCodeAt(t+3*d)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function Ec(r,e,t,n){return n||(n=Re(6)),n.write_shift(2,r),n.write_shift(2,e),n.write_shift(2,t||0),n}function mY(r,e,t){var n=t.biff>8?4:2,s=r.read_shift(n),i=r.read_shift(n,"i"),a=r.read_shift(n,"i");return[s,i,a]}function gY(r){var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(2),s=r.read_shift(2);return{s:{c:n,r:e},e:{c:s,r:t}}}function rP(r,e){return e||(e=Re(8)),e.write_shift(2,r.s.r),e.write_shift(2,r.e.r),e.write_shift(2,r.s.c),e.write_shift(2,r.e.c),e}function bw(r,e,t){var n=1536,s=16;switch(t.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Re(s);return i.write_shift(2,n),i.write_shift(2,e),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function xY(r,e){var t=!e||e.biff==8,n=Re(t?112:54);for(n.write_shift(e.biff==8?2:1,7),t&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(t?0:536870912));n.l<n.length;)n.write_shift(1,t?0:32);return n}function yY(r,e){var t=!e||e.biff>=8?2:1,n=Re(8+t*r.name.length);n.write_shift(4,r.pos),n.write_shift(1,r.hs||0),n.write_shift(1,r.dt),n.write_shift(1,r.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(t*r.name.length,r.name,e.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function vY(r,e){var t=Re(8);t.write_shift(4,r.Count),t.write_shift(4,r.Unique);for(var n=[],s=0;s<r.length;++s)n[s]=uY(r[s]);var i=zn([t].concat(n));return i.parts=[t.length].concat(n.map(function(a){return a.length})),i}function bY(){var r=Re(18);return r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,29280),r.write_shift(2,17600),r.write_shift(2,56),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,1),r.write_shift(2,500),r}function wY(r){var e=Re(18),t=1718;return r&&r.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function _Y(r,e){var t=r.name||"Arial",n=e&&e.biff==5,s=n?15+t.length:16+2*t.length,i=Re(s);return i.write_shift(2,r.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,t.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*t.length,t,n?"sbcs":"utf16le"),i}function EY(r,e,t,n){var s=Re(10);return Ec(r,e,n,s),s.write_shift(4,t),s}function TY(r,e,t,n,s){var i=!s||s.biff==8,a=Re(8+ +i+(1+i)*t.length);return Ec(r,e,n,a),a.write_shift(2,t.length),i&&a.write_shift(1,1),a.write_shift((1+i)*t.length,t,i?"utf16le":"sbcs"),a}function AY(r,e,t,n){var s=t&&t.biff==5;n||(n=Re(s?3+e.length:5+2*e.length)),n.write_shift(2,r),n.write_shift(s?1:2,e.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}function NY(r,e){var t=e.biff==8||!e.biff?4:2,n=Re(2*t+6);return n.write_shift(t,r.s.r),n.write_shift(t,r.e.r+1),n.write_shift(2,r.s.c),n.write_shift(2,r.e.c+1),n.write_shift(2,0),n}function nk(r,e,t,n){var s=t&&t.biff==5;n||(n=Re(s?16:20)),n.write_shift(2,0),r.style?(n.write_shift(2,r.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,r.numFmtId||0),n.write_shift(2,e<<4));var i=0;return r.numFmtId>0&&s&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function kY(r){var e=Re(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function SY(r,e,t,n,s,i){var a=Re(8);return Ec(r,e,n,a),ZI(t,i,a),a}function CY(r,e,t,n){var s=Re(14);return Ec(r,e,n,s),_c(t,s),s}function IY(r,e,t){if(t.biff<8)return PY(r,e,t);for(var n=[],s=r.l+e,i=r.read_shift(t.biff>8?4:2);i--!==0;)n.push(mY(r,t.biff>8?12:6,t));if(r.l!=s)throw new Error("Bad ExternSheet: "+r.l+" != "+s);return n}function PY(r,e,t){r[r.l+1]==3&&r[r.l]++;var n=eP(r,e,t);return n.charCodeAt(0)==3?n.slice(1):n}function jY(r){var e=Re(2+r.length*8);e.write_shift(2,r.length);for(var t=0;t<r.length;++t)rP(r[t],e);return e}function RY(r){var e=Re(24),t=In(r[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(n[s],16));return zn([e,pY(r[1])])}function DY(r){var e=r[1].Tooltip,t=Re(10+2*(e.length+1));t.write_shift(2,2048);var n=In(r[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var s=0;s<e.length;++s)t.write_shift(2,e.charCodeAt(s));return t.write_shift(2,0),t}function FY(r){return r||(r=Re(4)),r.write_shift(2,1),r.write_shift(2,1),r}function OY(r,e,t){if(!t.cellStyles)return Ea(r,e);var n=t&&t.biff>=12?4:2,s=r.read_shift(n),i=r.read_shift(n),a=r.read_shift(n),c=r.read_shift(n),d=r.read_shift(2);n==2&&(r.l+=2);var h={s,e:i,w:a,ixfe:c,flags:d};return(t.biff>=5||!t.biff)&&(h.level=d>>8&7),h}function LY(r,e){var t=Re(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,r.width*256),t.write_shift(2,0);var n=0;return r.hidden&&(n|=1),t.write_shift(1,n),n=r.level||0,t.write_shift(1,n),t.write_shift(2,0),t}function MY(r){for(var e=Re(2*r),t=0;t<r;++t)e.write_shift(2,t+1);return e}function VY(r,e,t){var n=Re(15);return gf(n,r,e),n.write_shift(8,t,"f"),n}function $Y(r,e,t){var n=Re(9);return gf(n,r,e),n.write_shift(2,t),n}var BY=(function(){var r={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=cw({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(c,d){var h=[],p=wc(1);switch(d.type){case"base64":p=Oi(io(c));break;case"binary":p=Oi(c);break;case"buffer":case"array":p=c;break}Hs(p,0);var m=p.read_shift(1),x=!!(m&136),v=!1,_=!1;switch(m){case 2:break;case 3:break;case 48:v=!0,x=!0;break;case 49:v=!0,x=!0;break;case 131:break;case 139:break;case 140:_=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+m.toString(16))}var w=0,E=521;m==2&&(w=p.read_shift(2)),p.l+=3,m!=2&&(w=p.read_shift(4)),w>1048576&&(w=1e6),m!=2&&(E=p.read_shift(2));var R=p.read_shift(2),C=d.codepage||1252;m!=2&&(p.l+=16,p.read_shift(1),p[p.l]!==0&&(C=r[p[p.l]]),p.l+=1,p.l+=2),_&&(p.l+=36);for(var V=[],L={},K=Math.min(p.length,m==2?521:E-10-(v?264:0)),H=_?32:11;p.l<K&&p[p.l]!=13;)switch(L={},L.name=ig.utils.decode(C,p.slice(p.l,p.l+H)).replace(/[\u0000\r\n].*$/g,""),p.l+=H,L.type=String.fromCharCode(p.read_shift(1)),m!=2&&!_&&(L.offset=p.read_shift(4)),L.len=p.read_shift(1),m==2&&(L.offset=p.read_shift(2)),L.dec=p.read_shift(1),L.name.length&&V.push(L),m!=2&&(p.l+=_?13:14),L.type){case"B":(!v||L.len!=8)&&d.WTF&&console.log("Skipping "+L.name+":"+L.type);break;case"G":case"P":d.WTF&&console.log("Skipping "+L.name+":"+L.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+L.type)}if(p[p.l]!==13&&(p.l=E-1),p.read_shift(1)!==13)throw new Error("DBF Terminator not found "+p.l+" "+p[p.l]);p.l=E;var S=0,k=0;for(h[0]=[],k=0;k!=V.length;++k)h[0][k]=V[k].name;for(;w-- >0;){if(p[p.l]===42){p.l+=R;continue}for(++p.l,h[++S]=[],k=0,k=0;k!=V.length;++k){var P=p.slice(p.l,p.l+V[k].len);p.l+=V[k].len,Hs(P,0);var j=ig.utils.decode(C,P);switch(V[k].type){case"C":j.trim().length&&(h[S][k]=j.replace(/\s+$/,""));break;case"D":j.length===8?h[S][k]=new Date(+j.slice(0,4),+j.slice(4,6)-1,+j.slice(6,8)):h[S][k]=j;break;case"F":h[S][k]=parseFloat(j.trim());break;case"+":case"I":h[S][k]=_?P.read_shift(-4,"i")^2147483648:P.read_shift(4,"i");break;case"L":switch(j.trim().toUpperCase()){case"Y":case"T":h[S][k]=!0;break;case"N":case"F":h[S][k]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+j+"|")}break;case"M":if(!x)throw new Error("DBF Unexpected MEMO for type "+m.toString(16));h[S][k]="##MEMO##"+(_?parseInt(j.trim(),10):P.read_shift(4));break;case"N":j=j.replace(/\u0000/g,"").trim(),j&&j!="."&&(h[S][k]=+j||0);break;case"@":h[S][k]=new Date(P.read_shift(-8,"f")-621356832e5);break;case"T":h[S][k]=new Date((P.read_shift(4)-2440588)*864e5+P.read_shift(4));break;case"Y":h[S][k]=P.read_shift(4,"i")/1e4+P.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":h[S][k]=-P.read_shift(-8,"f");break;case"B":if(v&&V[k].len==8){h[S][k]=P.read_shift(8,"f");break}case"G":case"P":P.l+=V[k].len;break;case"0":if(V[k].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+V[k].type)}}}if(m!=2&&p.l<p.length&&p[p.l++]!=26)throw new Error("DBF EOF Marker missing "+(p.l-1)+" of "+p.length+" "+p[p.l-1].toString(16));return d&&d.sheetRows&&(h=h.slice(0,d.sheetRows)),d.DBF=V,h}function n(c,d){var h=d||{};h.dateNF||(h.dateNF="yyyymmdd");var p=Fd(t(c,h),h);return p["!cols"]=h.DBF.map(function(m){return{wch:m.len,DBF:m}}),delete h.DBF,p}function s(c,d){try{return Oc(n(c,d),d)}catch(h){if(d&&d.WTF)throw h}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function a(c,d){var h=d||{};if(+h.codepage>=0&&kh(+h.codepage),h.type=="string")throw new Error("Cannot write DBF to JS string");var p=Rs(),m=yg(c,{header:1,raw:!0,cellDates:!0}),x=m[0],v=m.slice(1),_=c["!cols"]||[],w=0,E=0,R=0,C=1;for(w=0;w<x.length;++w){if(((_[w]||{}).DBF||{}).name){x[w]=_[w].DBF.name,++R;continue}if(x[w]!=null){if(++R,typeof x[w]=="number"&&(x[w]=x[w].toString(10)),typeof x[w]!="string")throw new Error("DBF Invalid column name "+x[w]+" |"+typeof x[w]+"|");if(x.indexOf(x[w])!==w){for(E=0;E<1024;++E)if(x.indexOf(x[w]+"_"+E)==-1){x[w]+="_"+E;break}}}}var V=Dr(c["!ref"]),L=[],K=[],H=[];for(w=0;w<=V.e.c-V.s.c;++w){var S="",k="",P=0,j=[];for(E=0;E<v.length;++E)v[E][w]!=null&&j.push(v[E][w]);if(j.length==0||x[w]==null){L[w]="?";continue}for(E=0;E<j.length;++E){switch(typeof j[E]){case"number":k="B";break;case"string":k="C";break;case"boolean":k="L";break;case"object":k=j[E]instanceof Date?"D":"C";break;default:k="C"}P=Math.max(P,String(j[E]).length),S=S&&S!=k?"C":k}P>250&&(P=250),k=((_[w]||{}).DBF||{}).type,k=="C"&&_[w].DBF.len>P&&(P=_[w].DBF.len),S=="B"&&k=="N"&&(S="N",H[w]=_[w].DBF.dec,P=_[w].DBF.len),K[w]=S=="C"||k=="N"?P:i[S]||0,C+=K[w],L[w]=S}var M=p.next(32);for(M.write_shift(4,318902576),M.write_shift(4,v.length),M.write_shift(2,296+32*R),M.write_shift(2,C),w=0;w<4;++w)M.write_shift(4,0);for(M.write_shift(4,0|(+e[sI]||3)<<8),w=0,E=0;w<x.length;++w)if(x[w]!=null){var D=p.next(32),O=(x[w].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);D.write_shift(1,O,"sbcs"),D.write_shift(1,L[w]=="?"?"C":L[w],"sbcs"),D.write_shift(4,E),D.write_shift(1,K[w]||i[L[w]]||0),D.write_shift(1,H[w]||0),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(1,0),D.write_shift(4,0),D.write_shift(4,0),E+=K[w]||i[L[w]]||0}var pe=p.next(264);for(pe.write_shift(4,13),w=0;w<65;++w)pe.write_shift(4,0);for(w=0;w<v.length;++w){var Ae=p.next(C);for(Ae.write_shift(1,0),E=0;E<x.length;++E)if(x[E]!=null)switch(L[E]){case"L":Ae.write_shift(1,v[w][E]==null?63:v[w][E]?84:70);break;case"B":Ae.write_shift(8,v[w][E]||0,"f");break;case"N":var Fe="0";for(typeof v[w][E]=="number"&&(Fe=v[w][E].toFixed(H[E]||0)),R=0;R<K[E]-Fe.length;++R)Ae.write_shift(1,32);Ae.write_shift(1,Fe,"sbcs");break;case"D":v[w][E]?(Ae.write_shift(4,("0000"+v[w][E].getFullYear()).slice(-4),"sbcs"),Ae.write_shift(2,("00"+(v[w][E].getMonth()+1)).slice(-2),"sbcs"),Ae.write_shift(2,("00"+v[w][E].getDate()).slice(-2),"sbcs")):Ae.write_shift(8,"00000000","sbcs");break;case"C":var Me=String(v[w][E]!=null?v[w][E]:"").slice(0,K[E]);for(Ae.write_shift(1,Me,"sbcs"),R=0;R<K[E]-Me.length;++R)Ae.write_shift(1,32);break}}return p.next(1).write_shift(1,26),p.end()}return{to_workbook:s,to_sheet:n,from_sheet:a}})(),UY=(function(){var r={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Gn(r).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(x,v){var _=r[v];return typeof _=="number"?kN(_):_},n=function(x,v,_){var w=v.charCodeAt(0)-32<<4|_.charCodeAt(0)-48;return w==59?x:kN(w)};r["|"]=254;function s(x,v){switch(v.type){case"base64":return i(io(x),v);case"binary":return i(x,v);case"buffer":return i(pr&&Buffer.isBuffer(x)?x.toString("binary"):df(x),v);case"array":return i(lx(x),v)}throw new Error("Unrecognized type "+v.type)}function i(x,v){var _=x.split(/[\n\r]+/),w=-1,E=-1,R=0,C=0,V=[],L=[],K=null,H={},S=[],k=[],P=[],j=0,M;for(+v.codepage>=0&&kh(+v.codepage);R!==_.length;++R){j=0;var D=_[R].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,t),O=D.replace(/;;/g,"\0").split(";").map(function(ne){return ne.replace(/\u0000/g,";")}),pe=O[0],Ae;if(D.length>0)switch(pe){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":O[1].charAt(0)=="P"&&L.push(D.slice(3).replace(/;;/g,";"));break;case"C":var Fe=!1,Me=!1,Ee=!1,Te=!1,Ne=-1,ae=-1;for(C=1;C<O.length;++C)switch(O[C].charAt(0)){case"A":break;case"X":E=parseInt(O[C].slice(1))-1,Me=!0;break;case"Y":for(w=parseInt(O[C].slice(1))-1,Me||(E=0),M=V.length;M<=w;++M)V[M]=[];break;case"K":Ae=O[C].slice(1),Ae.charAt(0)==='"'?Ae=Ae.slice(1,Ae.length-1):Ae==="TRUE"?Ae=!0:Ae==="FALSE"?Ae=!1:isNaN(Xa(Ae))?isNaN(Ch(Ae).getDate())||(Ae=xs(Ae)):(Ae=Xa(Ae),K!==null&&gI(K)&&(Ae=bI(Ae))),Fe=!0;break;case"E":Te=!0;var W=$X(O[C].slice(1),{r:w,c:E});V[w][E]=[V[w][E],W];break;case"S":Ee=!0,V[w][E]=[V[w][E],"S5S"];break;case"G":break;case"R":Ne=parseInt(O[C].slice(1))-1;break;case"C":ae=parseInt(O[C].slice(1))-1;break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+D)}if(Fe&&(V[w][E]&&V[w][E].length==2?V[w][E][0]=Ae:V[w][E]=Ae,K=null),Ee){if(Te)throw new Error("SYLK shared formula cannot have own formula");var oe=Ne>-1&&V[Ne][ae];if(!oe||!oe[1])throw new Error("SYLK shared formula cannot find base");V[w][E][1]=BX(oe[1],{r:w-Ne,c:E-ae})}break;case"F":var ie=0;for(C=1;C<O.length;++C)switch(O[C].charAt(0)){case"X":E=parseInt(O[C].slice(1))-1,++ie;break;case"Y":for(w=parseInt(O[C].slice(1))-1,M=V.length;M<=w;++M)V[M]=[];break;case"M":j=parseInt(O[C].slice(1))/20;break;case"F":break;case"G":break;case"P":K=L[parseInt(O[C].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(P=O[C].slice(1).split(" "),M=parseInt(P[0],10);M<=parseInt(P[1],10);++M)j=parseInt(P[2],10),k[M-1]=j===0?{hidden:!0}:{wch:j},ww(k[M-1]);break;case"C":E=parseInt(O[C].slice(1))-1,k[E]||(k[E]={});break;case"R":w=parseInt(O[C].slice(1))-1,S[w]||(S[w]={}),j>0?(S[w].hpt=j,S[w].hpx=oP(j)):j===0&&(S[w].hidden=!0);break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+D)}ie<1&&(K=null);break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+D)}}return S.length>0&&(H["!rows"]=S),k.length>0&&(H["!cols"]=k),v&&v.sheetRows&&(V=V.slice(0,v.sheetRows)),[V,H]}function a(x,v){var _=s(x,v),w=_[0],E=_[1],R=Fd(w,v);return Gn(E).forEach(function(C){R[C]=E[C]}),R}function c(x,v){return Oc(a(x,v),v)}function d(x,v,_,w){var E="C;Y"+(_+1)+";X"+(w+1)+";K";switch(x.t){case"n":E+=x.v||0,x.f&&!x.F&&(E+=";E"+Ew(x.f,{r:_,c:w}));break;case"b":E+=x.v?"TRUE":"FALSE";break;case"e":E+=x.w||x.v;break;case"d":E+='"'+(x.w||x.v)+'"';break;case"s":E+='"'+x.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function h(x,v){v.forEach(function(_,w){var E="F;W"+(w+1)+" "+(w+1)+" ";_.hidden?E+="0":(typeof _.width=="number"&&!_.wpx&&(_.wpx=pg(_.width)),typeof _.wpx=="number"&&!_.wch&&(_.wch=mg(_.wpx)),typeof _.wch=="number"&&(E+=Math.round(_.wch))),E.charAt(E.length-1)!=" "&&x.push(E)})}function p(x,v){v.forEach(function(_,w){var E="F;";_.hidden?E+="M0;":_.hpt?E+="M"+20*_.hpt+";":_.hpx&&(E+="M"+20*gg(_.hpx)+";"),E.length>2&&x.push(E+"R"+(w+1))})}function m(x,v){var _=["ID;PWXL;N;E"],w=[],E=Dr(x["!ref"]),R,C=Array.isArray(x),V=`\r
`;_.push("P;PGeneral"),_.push("F;P0;DG0G8;M255"),x["!cols"]&&h(_,x["!cols"]),x["!rows"]&&p(_,x["!rows"]),_.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var L=E.s.r;L<=E.e.r;++L)for(var K=E.s.c;K<=E.e.c;++K){var H=Tr({r:L,c:K});R=C?(x[L]||[])[K]:x[H],!(!R||R.v==null&&(!R.f||R.F))&&w.push(d(R,x,L,K))}return _.join(V)+V+w.join(V)+V+"E"+V}return{to_workbook:c,to_sheet:a,from_sheet:m}})(),zY=(function(){function r(i,a){switch(a.type){case"base64":return e(io(i),a);case"binary":return e(i,a);case"buffer":return e(pr&&Buffer.isBuffer(i)?i.toString("binary"):df(i),a);case"array":return e(lx(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){for(var c=i.split(`
`),d=-1,h=-1,p=0,m=[];p!==c.length;++p){if(c[p].trim()==="BOT"){m[++d]=[],h=0;continue}if(!(d<0)){var x=c[p].trim().split(","),v=x[0],_=x[1];++p;for(var w=c[p]||"";(w.match(/["]/g)||[]).length&1&&p<c.length-1;)w+=`
`+c[++p];switch(w=w.trim(),+v){case-1:if(w==="BOT"){m[++d]=[],h=0;continue}else if(w!=="EOD")throw new Error("Unrecognized DIF special command "+w);break;case 0:w==="TRUE"?m[d][h]=!0:w==="FALSE"?m[d][h]=!1:isNaN(Xa(_))?isNaN(Ch(_).getDate())?m[d][h]=_:m[d][h]=xs(_):m[d][h]=Xa(_),++h;break;case 1:w=w.slice(1,w.length-1),w=w.replace(/""/g,'"'),w&&w.match(/^=".*"$/)&&(w=w.slice(2,-1)),m[d][h++]=w!==""?w:null;break}if(w==="EOD")break}}return a&&a.sheetRows&&(m=m.slice(0,a.sheetRows)),m}function t(i,a){return Fd(r(i,a),a)}function n(i,a){return Oc(t(i,a),a)}var s=(function(){var i=function(d,h,p,m,x){d.push(h),d.push(p+","+m),d.push('"'+x.replace(/"/g,'""')+'"')},a=function(d,h,p,m){d.push(h+","+p),d.push(h==1?'"'+m.replace(/"/g,'""')+'"':m)};return function(d){var h=[],p=Dr(d["!ref"]),m,x=Array.isArray(d);i(h,"TABLE",0,1,"sheetjs"),i(h,"VECTORS",0,p.e.r-p.s.r+1,""),i(h,"TUPLES",0,p.e.c-p.s.c+1,""),i(h,"DATA",0,0,"");for(var v=p.s.r;v<=p.e.r;++v){a(h,-1,0,"BOT");for(var _=p.s.c;_<=p.e.c;++_){var w=Tr({r:v,c:_});if(m=x?(d[v]||[])[_]:d[w],!m){a(h,1,0,"");continue}switch(m.t){case"n":var E=m.w;!E&&m.v!=null&&(E=m.v),E==null?m.f&&!m.F?a(h,1,0,"="+m.f):a(h,1,0,""):a(h,0,E,"V");break;case"b":a(h,0,m.v?1:0,m.v?"TRUE":"FALSE");break;case"s":a(h,1,0,isNaN(m.v)?m.v:'="'+m.v+'"');break;case"d":m.w||(m.w=dl(m.z||en[14],Ds(xs(m.v)))),a(h,0,m.w,"V");break;default:a(h,1,0,"")}}}a(h,-1,0,"EOD");var R=`\r
`,C=h.join(R);return C}})();return{to_workbook:n,to_sheet:t,from_sheet:s}})(),nP=(function(){function r(m){return m.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(m){return m.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(m,x){for(var v=m.split(`
`),_=-1,w=-1,E=0,R=[];E!==v.length;++E){var C=v[E].trim().split(":");if(C[0]==="cell"){var V=In(C[1]);if(R.length<=V.r)for(_=R.length;_<=V.r;++_)R[_]||(R[_]=[]);switch(_=V.r,w=V.c,C[2]){case"t":R[_][w]=r(C[3]);break;case"v":R[_][w]=+C[3];break;case"vtf":var L=C[C.length-1];case"vtc":switch(C[3]){case"nl":R[_][w]=!!+C[4];break;default:R[_][w]=+C[4];break}C[2]=="vtf"&&(R[_][w]=[R[_][w],L])}}}return x&&x.sheetRows&&(R=R.slice(0,x.sheetRows)),R}function n(m,x){return Fd(t(m,x),x)}function s(m,x){return Oc(n(m,x),x)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,c=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),d="--SocialCalcSpreadsheetControlSave--";function h(m){if(!m||!m["!ref"])return"";for(var x=[],v=[],_,w="",E=ei(m["!ref"]),R=Array.isArray(m),C=E.s.r;C<=E.e.r;++C)for(var V=E.s.c;V<=E.e.c;++V)if(w=Tr({r:C,c:V}),_=R?(m[C]||[])[V]:m[w],!(!_||_.v==null||_.t==="z")){switch(v=["cell",w,"t"],_.t){case"s":case"str":v.push(e(_.v));break;case"n":_.f?(v[2]="vtf",v[3]="n",v[4]=_.v,v[5]=e(_.f)):(v[2]="v",v[3]=_.v);break;case"b":v[2]="vt"+(_.f?"f":"c"),v[3]="nl",v[4]=_.v?"1":"0",v[5]=e(_.f||(_.v?"TRUE":"FALSE"));break;case"d":var L=Ds(xs(_.v));v[2]="vtc",v[3]="nd",v[4]=""+L,v[5]=_.w||dl(_.z||en[14],L);break;case"e":continue}x.push(v.join(":"))}return x.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),x.push("valueformat:1:text-wiki"),x.join(`
`)}function p(m){return[i,a,c,a,h(m),d].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:p}})(),HY=(function(){function r(p,m,x,v,_){_.raw?m[x][v]=p:p===""||(p==="TRUE"?m[x][v]=!0:p==="FALSE"?m[x][v]=!1:isNaN(Xa(p))?isNaN(Ch(p).getDate())?m[x][v]=p:m[x][v]=xs(p):m[x][v]=Xa(p))}function e(p,m){var x=m||{},v=[];if(!p||p.length===0)return v;for(var _=p.split(/[\r\n]/),w=_.length-1;w>=0&&_[w].length===0;)--w;for(var E=10,R=0,C=0;C<=w;++C)R=_[C].indexOf(" "),R==-1?R=_[C].length:R++,E=Math.max(E,R);for(C=0;C<=w;++C){v[C]=[];var V=0;for(r(_[C].slice(0,E).trim(),v,C,V,x),V=1;V<=(_[C].length-E)/10+1;++V)r(_[C].slice(E+(V-1)*10,E+V*10).trim(),v,C,V,x)}return x.sheetRows&&(v=v.slice(0,x.sheetRows)),v}var t={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(p){for(var m={},x=!1,v=0,_=0;v<p.length;++v)(_=p.charCodeAt(v))==34?x=!x:!x&&_ in t&&(m[_]=(m[_]||0)+1);_=[];for(v in m)Object.prototype.hasOwnProperty.call(m,v)&&_.push([m[v],v]);if(!_.length){m=n;for(v in m)Object.prototype.hasOwnProperty.call(m,v)&&_.push([m[v],v])}return _.sort(function(w,E){return w[0]-E[0]||n[w[1]]-n[E[1]]}),t[_.pop()[1]]||44}function i(p,m){var x=m||{},v="",_=x.dense?[]:{},w={s:{c:0,r:0},e:{c:0,r:0}};p.slice(0,4)=="sep="?p.charCodeAt(5)==13&&p.charCodeAt(6)==10?(v=p.charAt(4),p=p.slice(7)):p.charCodeAt(5)==13||p.charCodeAt(5)==10?(v=p.charAt(4),p=p.slice(6)):v=s(p.slice(0,1024)):x&&x.FS?v=x.FS:v=s(p.slice(0,1024));var E=0,R=0,C=0,V=0,L=0,K=v.charCodeAt(0),H=!1,S=0,k=p.charCodeAt(0);p=p.replace(/\r\n/mg,`
`);var P=x.dateNF!=null?aK(x.dateNF):null;function j(){var M=p.slice(V,L),D={};if(M.charAt(0)=='"'&&M.charAt(M.length-1)=='"'&&(M=M.slice(1,-1).replace(/""/g,'"')),M.length===0)D.t="z";else if(x.raw)D.t="s",D.v=M;else if(M.trim().length===0)D.t="s",D.v=M;else if(M.charCodeAt(0)==61)M.charCodeAt(1)==34&&M.charCodeAt(M.length-1)==34?(D.t="s",D.v=M.slice(2,-1).replace(/""/g,'"')):UX(M)?(D.t="n",D.f=M.slice(1)):(D.t="s",D.v=M);else if(M=="TRUE")D.t="b",D.v=!0;else if(M=="FALSE")D.t="b",D.v=!1;else if(!isNaN(C=Xa(M)))D.t="n",x.cellText!==!1&&(D.w=M),D.v=C;else if(!isNaN(Ch(M).getDate())||P&&M.match(P)){D.z=x.dateNF||en[14];var O=0;P&&M.match(P)&&(M=oK(M,x.dateNF,M.match(P)||[]),O=1),x.cellDates?(D.t="d",D.v=xs(M,O)):(D.t="n",D.v=Ds(xs(M,O))),x.cellText!==!1&&(D.w=dl(D.z,D.v instanceof Date?Ds(D.v):D.v)),x.cellNF||delete D.z}else D.t="s",D.v=M;if(D.t=="z"||(x.dense?(_[E]||(_[E]=[]),_[E][R]=D):_[Tr({c:R,r:E})]=D),V=L+1,k=p.charCodeAt(V),w.e.c<R&&(w.e.c=R),w.e.r<E&&(w.e.r=E),S==K)++R;else if(R=0,++E,x.sheetRows&&x.sheetRows<=E)return!0}e:for(;L<p.length;++L)switch(S=p.charCodeAt(L)){case 34:k===34&&(H=!H);break;case K:case 10:case 13:if(!H&&j())break e;break}return L-V>0&&j(),_["!ref"]=dn(w),_}function a(p,m){return!(m&&m.PRN)||m.FS||p.slice(0,4)=="sep="||p.indexOf("	")>=0||p.indexOf(",")>=0||p.indexOf(";")>=0?i(p,m):Fd(e(p,m),m)}function c(p,m){var x="",v=m.type=="string"?[0,0,0,0]:rte(p,m);switch(m.type){case"base64":x=io(p);break;case"binary":x=p;break;case"buffer":m.codepage==65001?x=p.toString("utf8"):m.codepage&&typeof ig<"u"||(x=pr&&Buffer.isBuffer(p)?p.toString("binary"):df(p));break;case"array":x=lx(p);break;case"string":x=p;break;default:throw new Error("Unrecognized type "+m.type)}return v[0]==239&&v[1]==187&&v[2]==191?x=Y0(x.slice(3)):m.type!="string"&&m.type!="buffer"&&m.codepage==65001?x=Y0(x):m.type=="binary"&&typeof ig<"u",x.slice(0,19)=="socialcalc:version:"?nP.to_sheet(m.type=="string"?x:Y0(x),m):a(x,m)}function d(p,m){return Oc(c(p,m),m)}function h(p){for(var m=[],x=Dr(p["!ref"]),v,_=Array.isArray(p),w=x.s.r;w<=x.e.r;++w){for(var E=[],R=x.s.c;R<=x.e.c;++R){var C=Tr({r:w,c:R});if(v=_?(p[w]||[])[R]:p[C],!v||v.v==null){E.push("          ");continue}for(var V=(v.w||(ao(v),v.w)||"").slice(0,10);V.length<10;)V+=" ";E.push(V+(R===0?" ":""))}m.push(E.join(""))}return m.join(`
`)}return{to_workbook:d,to_sheet:c,from_sheet:h}})(),sk=(function(){function r(W,oe,ie){if(W){Hs(W,W.l||0);for(var ne=ie.Enum||Ne;W.l<W.length;){var z=W.read_shift(2),_e=ne[z]||ne[65535],De=W.read_shift(2),Se=W.l+De,we=_e.f&&_e.f(W,De,ie);if(W.l=Se,oe(we,_e,z))return}}}function e(W,oe){switch(oe.type){case"base64":return t(Oi(io(W)),oe);case"binary":return t(Oi(W),oe);case"buffer":case"array":return t(W,oe)}throw"Unsupported type "+oe.type}function t(W,oe){if(!W)return W;var ie=oe||{},ne=ie.dense?[]:{},z="Sheet1",_e="",De=0,Se={},we=[],Qe=[],ft={s:{r:0,c:0},e:{r:0,c:0}},zt=ie.sheetRows||0;if(W[2]==0&&(W[3]==8||W[3]==9)&&W.length>=16&&W[14]==5&&W[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(W[2]==2)ie.Enum=Ne,r(W,function(Oe,Xt,Rt){switch(Rt){case 0:ie.vers=Oe,Oe>=4096&&(ie.qpro=!0);break;case 6:ft=Oe;break;case 204:Oe&&(_e=Oe);break;case 222:_e=Oe;break;case 15:case 51:ie.qpro||(Oe[1].v=Oe[1].v.slice(1));case 13:case 14:case 16:Rt==14&&(Oe[2]&112)==112&&(Oe[2]&15)>1&&(Oe[2]&15)<15&&(Oe[1].z=ie.dateNF||en[14],ie.cellDates&&(Oe[1].t="d",Oe[1].v=bI(Oe[1].v))),ie.qpro&&Oe[3]>De&&(ne["!ref"]=dn(ft),Se[z]=ne,we.push(z),ne=ie.dense?[]:{},ft={s:{r:0,c:0},e:{r:0,c:0}},De=Oe[3],z=_e||"Sheet"+(De+1),_e="");var He=ie.dense?(ne[Oe[0].r]||[])[Oe[0].c]:ne[Tr(Oe[0])];if(He){He.t=Oe[1].t,He.v=Oe[1].v,Oe[1].z!=null&&(He.z=Oe[1].z),Oe[1].f!=null&&(He.f=Oe[1].f);break}ie.dense?(ne[Oe[0].r]||(ne[Oe[0].r]=[]),ne[Oe[0].r][Oe[0].c]=Oe[1]):ne[Tr(Oe[0])]=Oe[1];break}},ie);else if(W[2]==26||W[2]==14)ie.Enum=ae,W[2]==14&&(ie.qpro=!0,W.l=0),r(W,function(Oe,Xt,Rt){switch(Rt){case 204:z=Oe;break;case 22:Oe[1].v=Oe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Oe[3]>De&&(ne["!ref"]=dn(ft),Se[z]=ne,we.push(z),ne=ie.dense?[]:{},ft={s:{r:0,c:0},e:{r:0,c:0}},De=Oe[3],z="Sheet"+(De+1)),zt>0&&Oe[0].r>=zt)break;ie.dense?(ne[Oe[0].r]||(ne[Oe[0].r]=[]),ne[Oe[0].r][Oe[0].c]=Oe[1]):ne[Tr(Oe[0])]=Oe[1],ft.e.c<Oe[0].c&&(ft.e.c=Oe[0].c),ft.e.r<Oe[0].r&&(ft.e.r=Oe[0].r);break;case 27:Oe[14e3]&&(Qe[Oe[14e3][0]]=Oe[14e3][1]);break;case 1537:Qe[Oe[0]]=Oe[1],Oe[0]==De&&(z=Oe[1]);break}},ie);else throw new Error("Unrecognized LOTUS BOF "+W[2]);if(ne["!ref"]=dn(ft),Se[_e||z]=ne,we.push(_e||z),!Qe.length)return{SheetNames:we,Sheets:Se};for(var wt={},Yt=[],kt=0;kt<Qe.length;++kt)Se[we[kt]]?(Yt.push(Qe[kt]||we[kt]),wt[Qe[kt]]=Se[Qe[kt]]||Se[we[kt]]):(Yt.push(Qe[kt]),wt[Qe[kt]]={"!ref":"A1"});return{SheetNames:Yt,Sheets:wt}}function n(W,oe){var ie=oe||{};if(+ie.codepage>=0&&kh(+ie.codepage),ie.type=="string")throw new Error("Cannot write WK1 to JS string");var ne=Rs(),z=Dr(W["!ref"]),_e=Array.isArray(W),De=[];st(ne,0,i(1030)),st(ne,6,d(z));for(var Se=Math.min(z.e.r,8191),we=z.s.r;we<=Se;++we)for(var Qe=qn(we),ft=z.s.c;ft<=z.e.c;++ft){we===z.s.r&&(De[ft]=as(ft));var zt=De[ft]+Qe,wt=_e?(W[we]||[])[ft]:W[zt];if(!(!wt||wt.t=="z"))if(wt.t=="n")(wt.v|0)==wt.v&&wt.v>=-32768&&wt.v<=32767?st(ne,13,v(we,ft,wt.v)):st(ne,14,w(we,ft,wt.v));else{var Yt=ao(wt);st(ne,15,m(we,ft,Yt.slice(0,239)))}}return st(ne,1),ne.end()}function s(W,oe){var ie=oe||{};if(+ie.codepage>=0&&kh(+ie.codepage),ie.type=="string")throw new Error("Cannot write WK3 to JS string");var ne=Rs();st(ne,0,a(W));for(var z=0,_e=0;z<W.SheetNames.length;++z)(W.Sheets[W.SheetNames[z]]||{})["!ref"]&&st(ne,27,Te(W.SheetNames[z],_e++));var De=0;for(z=0;z<W.SheetNames.length;++z){var Se=W.Sheets[W.SheetNames[z]];if(!(!Se||!Se["!ref"])){for(var we=Dr(Se["!ref"]),Qe=Array.isArray(Se),ft=[],zt=Math.min(we.e.r,8191),wt=we.s.r;wt<=zt;++wt)for(var Yt=qn(wt),kt=we.s.c;kt<=we.e.c;++kt){wt===we.s.r&&(ft[kt]=as(kt));var Oe=ft[kt]+Yt,Xt=Qe?(Se[wt]||[])[kt]:Se[Oe];if(!(!Xt||Xt.t=="z"))if(Xt.t=="n")st(ne,23,j(wt,kt,De,Xt.v));else{var Rt=ao(Xt);st(ne,22,S(wt,kt,De,Rt.slice(0,239)))}}++De}}return st(ne,1),ne.end()}function i(W){var oe=Re(2);return oe.write_shift(2,W),oe}function a(W){var oe=Re(26);oe.write_shift(2,4096),oe.write_shift(2,4),oe.write_shift(4,0);for(var ie=0,ne=0,z=0,_e=0;_e<W.SheetNames.length;++_e){var De=W.SheetNames[_e],Se=W.Sheets[De];if(!(!Se||!Se["!ref"])){++z;var we=ei(Se["!ref"]);ie<we.e.r&&(ie=we.e.r),ne<we.e.c&&(ne=we.e.c)}}return ie>8191&&(ie=8191),oe.write_shift(2,ie),oe.write_shift(1,z),oe.write_shift(1,ne),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(1,1),oe.write_shift(1,2),oe.write_shift(4,0),oe.write_shift(4,0),oe}function c(W,oe,ie){var ne={s:{c:0,r:0},e:{c:0,r:0}};return oe==8&&ie.qpro?(ne.s.c=W.read_shift(1),W.l++,ne.s.r=W.read_shift(2),ne.e.c=W.read_shift(1),W.l++,ne.e.r=W.read_shift(2),ne):(ne.s.c=W.read_shift(2),ne.s.r=W.read_shift(2),oe==12&&ie.qpro&&(W.l+=2),ne.e.c=W.read_shift(2),ne.e.r=W.read_shift(2),oe==12&&ie.qpro&&(W.l+=2),ne.s.c==65535&&(ne.s.c=ne.e.c=ne.s.r=ne.e.r=0),ne)}function d(W){var oe=Re(8);return oe.write_shift(2,W.s.c),oe.write_shift(2,W.s.r),oe.write_shift(2,W.e.c),oe.write_shift(2,W.e.r),oe}function h(W,oe,ie){var ne=[{c:0,r:0},{t:"n",v:0},0,0];return ie.qpro&&ie.vers!=20768?(ne[0].c=W.read_shift(1),ne[3]=W.read_shift(1),ne[0].r=W.read_shift(2),W.l+=2):(ne[2]=W.read_shift(1),ne[0].c=W.read_shift(2),ne[0].r=W.read_shift(2)),ne}function p(W,oe,ie){var ne=W.l+oe,z=h(W,oe,ie);if(z[1].t="s",ie.vers==20768){W.l++;var _e=W.read_shift(1);return z[1].v=W.read_shift(_e,"utf8"),z}return ie.qpro&&W.l++,z[1].v=W.read_shift(ne-W.l,"cstr"),z}function m(W,oe,ie){var ne=Re(7+ie.length);ne.write_shift(1,255),ne.write_shift(2,oe),ne.write_shift(2,W),ne.write_shift(1,39);for(var z=0;z<ne.length;++z){var _e=ie.charCodeAt(z);ne.write_shift(1,_e>=128?95:_e)}return ne.write_shift(1,0),ne}function x(W,oe,ie){var ne=h(W,oe,ie);return ne[1].v=W.read_shift(2,"i"),ne}function v(W,oe,ie){var ne=Re(7);return ne.write_shift(1,255),ne.write_shift(2,oe),ne.write_shift(2,W),ne.write_shift(2,ie,"i"),ne}function _(W,oe,ie){var ne=h(W,oe,ie);return ne[1].v=W.read_shift(8,"f"),ne}function w(W,oe,ie){var ne=Re(13);return ne.write_shift(1,255),ne.write_shift(2,oe),ne.write_shift(2,W),ne.write_shift(8,ie,"f"),ne}function E(W,oe,ie){var ne=W.l+oe,z=h(W,oe,ie);if(z[1].v=W.read_shift(8,"f"),ie.qpro)W.l=ne;else{var _e=W.read_shift(2);L(W.slice(W.l,W.l+_e),z),W.l+=_e}return z}function R(W,oe,ie){var ne=oe&32768;return oe&=-32769,oe=(ne?W:0)+(oe>=8192?oe-16384:oe),(ne?"":"$")+(ie?as(oe):qn(oe))}var C={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},V=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function L(W,oe){Hs(W,0);for(var ie=[],ne=0,z="",_e="",De="",Se="";W.l<W.length;){var we=W[W.l++];switch(we){case 0:ie.push(W.read_shift(8,"f"));break;case 1:_e=R(oe[0].c,W.read_shift(2),!0),z=R(oe[0].r,W.read_shift(2),!1),ie.push(_e+z);break;case 2:{var Qe=R(oe[0].c,W.read_shift(2),!0),ft=R(oe[0].r,W.read_shift(2),!1);_e=R(oe[0].c,W.read_shift(2),!0),z=R(oe[0].r,W.read_shift(2),!1),ie.push(Qe+ft+":"+_e+z)}break;case 3:if(W.l<W.length){console.error("WK1 premature formula end");return}break;case 4:ie.push("("+ie.pop()+")");break;case 5:ie.push(W.read_shift(2));break;case 6:{for(var zt="";we=W[W.l++];)zt+=String.fromCharCode(we);ie.push('"'+zt.replace(/"/g,'""')+'"')}break;case 8:ie.push("-"+ie.pop());break;case 23:ie.push("+"+ie.pop());break;case 22:ie.push("NOT("+ie.pop()+")");break;case 20:case 21:Se=ie.pop(),De=ie.pop(),ie.push(["AND","OR"][we-20]+"("+De+","+Se+")");break;default:if(we<32&&V[we])Se=ie.pop(),De=ie.pop(),ie.push(De+V[we]+Se);else if(C[we]){if(ne=C[we][1],ne==69&&(ne=W[W.l++]),ne>ie.length){console.error("WK1 bad formula parse 0x"+we.toString(16)+":|"+ie.join("|")+"|");return}var wt=ie.slice(-ne);ie.length-=ne,ie.push(C[we][0]+"("+wt.join(",")+")")}else return we<=7?console.error("WK1 invalid opcode "+we.toString(16)):we<=24?console.error("WK1 unsupported op "+we.toString(16)):we<=30?console.error("WK1 invalid opcode "+we.toString(16)):we<=115?console.error("WK1 unsupported function opcode "+we.toString(16)):console.error("WK1 unrecognized opcode "+we.toString(16))}}ie.length==1?oe[1].f=""+ie[0]:console.error("WK1 bad formula parse |"+ie.join("|")+"|")}function K(W){var oe=[{c:0,r:0},{t:"n",v:0},0];return oe[0].r=W.read_shift(2),oe[3]=W[W.l++],oe[0].c=W[W.l++],oe}function H(W,oe){var ie=K(W);return ie[1].t="s",ie[1].v=W.read_shift(oe-4,"cstr"),ie}function S(W,oe,ie,ne){var z=Re(6+ne.length);z.write_shift(2,W),z.write_shift(1,ie),z.write_shift(1,oe),z.write_shift(1,39);for(var _e=0;_e<ne.length;++_e){var De=ne.charCodeAt(_e);z.write_shift(1,De>=128?95:De)}return z.write_shift(1,0),z}function k(W,oe){var ie=K(W);ie[1].v=W.read_shift(2);var ne=ie[1].v>>1;if(ie[1].v&1)switch(ne&7){case 0:ne=(ne>>3)*5e3;break;case 1:ne=(ne>>3)*500;break;case 2:ne=(ne>>3)/20;break;case 3:ne=(ne>>3)/200;break;case 4:ne=(ne>>3)/2e3;break;case 5:ne=(ne>>3)/2e4;break;case 6:ne=(ne>>3)/16;break;case 7:ne=(ne>>3)/64;break}return ie[1].v=ne,ie}function P(W,oe){var ie=K(W),ne=W.read_shift(4),z=W.read_shift(4),_e=W.read_shift(2);if(_e==65535)return ne===0&&z===3221225472?(ie[1].t="e",ie[1].v=15):ne===0&&z===3489660928?(ie[1].t="e",ie[1].v=42):ie[1].v=0,ie;var De=_e&32768;return _e=(_e&32767)-16446,ie[1].v=(1-De*2)*(z*Math.pow(2,_e+32)+ne*Math.pow(2,_e)),ie}function j(W,oe,ie,ne){var z=Re(14);if(z.write_shift(2,W),z.write_shift(1,ie),z.write_shift(1,oe),ne==0)return z.write_shift(4,0),z.write_shift(4,0),z.write_shift(2,65535),z;var _e=0,De=0,Se=0,we=0;return ne<0&&(_e=1,ne=-ne),De=Math.log2(ne)|0,ne/=Math.pow(2,De-31),we=ne>>>0,(we&2147483648)==0&&(ne/=2,++De,we=ne>>>0),ne-=we,we|=2147483648,we>>>=0,ne*=Math.pow(2,32),Se=ne>>>0,z.write_shift(4,Se),z.write_shift(4,we),De+=16383+(_e?32768:0),z.write_shift(2,De),z}function M(W,oe){var ie=P(W);return W.l+=oe-14,ie}function D(W,oe){var ie=K(W),ne=W.read_shift(4);return ie[1].v=ne>>6,ie}function O(W,oe){var ie=K(W),ne=W.read_shift(8,"f");return ie[1].v=ne,ie}function pe(W,oe){var ie=O(W);return W.l+=oe-10,ie}function Ae(W,oe){return W[W.l+oe-1]==0?W.read_shift(oe,"cstr"):""}function Fe(W,oe){var ie=W[W.l++];ie>oe-1&&(ie=oe-1);for(var ne="";ne.length<ie;)ne+=String.fromCharCode(W[W.l++]);return ne}function Me(W,oe,ie){if(!(!ie.qpro||oe<21)){var ne=W.read_shift(1);W.l+=17,W.l+=1,W.l+=2;var z=W.read_shift(oe-21,"cstr");return[ne,z]}}function Ee(W,oe){for(var ie={},ne=W.l+oe;W.l<ne;){var z=W.read_shift(2);if(z==14e3){for(ie[z]=[0,""],ie[z][0]=W.read_shift(2);W[W.l];)ie[z][1]+=String.fromCharCode(W[W.l]),W.l++;W.l++}}return ie}function Te(W,oe){var ie=Re(5+W.length);ie.write_shift(2,14e3),ie.write_shift(2,oe);for(var ne=0;ne<W.length;++ne){var z=W.charCodeAt(ne);ie[ie.l++]=z>127?95:z}return ie[ie.l++]=0,ie}var Ne={0:{n:"BOF",f:JI},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:c},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:x},14:{n:"NUMBER",f:_},15:{n:"LABEL",f:p},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:p},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Ae},222:{n:"SHEETNAMELP",f:Fe},65535:{n:""}},ae={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:H},23:{n:"NUMBER17",f:P},24:{n:"NUMBER18",f:k},25:{n:"FORMULA19",f:M},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Ee},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:D},38:{n:"??"},39:{n:"NUMBER27",f:O},40:{n:"FORMULA28",f:pe},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Ae},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Me},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}})(),WY=/^\s|\s$|[\t\n\r]/;function sP(r,e){if(!e.bookSST)return"";var t=[fn];t[t.length]=rt("sst",null,{xmlns:Dd[0],count:r.Count,uniqueCount:r.Unique});for(var n=0;n!=r.length;++n)if(r[n]!=null){var s=r[n],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(WY)&&(i+=' xml:space="preserve"'),i+=">"+_r(s.t)+"</t>"),i+="</si>",t[t.length]=i}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function qY(r){return[r.read_shift(4),r.read_shift(4)]}function GY(r,e){return e||(e=Re(8)),e.write_shift(4,r.Count),e.write_shift(4,r.Unique),e}var KY=MK;function YY(r){var e=Rs();Ue(e,159,GY(r));for(var t=0;t<r.length;++t)Ue(e,19,KY(r[t]));return Ue(e,160),e.end()}function XY(r){for(var e=[],t=r.split(""),n=0;n<t.length;++n)e[n]=t[n].charCodeAt(0);return e}function iP(r){var e=0,t,n=XY(r),s=n.length+1,i,a,c,d,h;for(t=wc(s),t[0]=n.length,i=1;i!=s;++i)t[i]=n[i-1];for(i=s-1;i>=0;--i)a=t[i],c=(e&16384)===0?0:1,d=e<<1&32767,h=c|d,e=h^a;return e^52811}var QY=(function(){function r(s,i){switch(i.type){case"base64":return e(io(s),i);case"binary":return e(s,i);case"buffer":return e(pr&&Buffer.isBuffer(s)?s.toString("binary"):df(s),i);case"array":return e(lx(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){var a=i||{},c=a.dense?[]:{},d=s.match(/\\trowd.*?\\row\b/g);if(!d.length)throw new Error("RTF missing table");var h={s:{c:0,r:0},e:{c:0,r:d.length-1}};return d.forEach(function(p,m){Array.isArray(c)&&(c[m]=[]);for(var x=/\\\w+\b/g,v=0,_,w=-1;_=x.exec(p);){switch(_[0]){case"\\cell":var E=p.slice(v,x.lastIndex-_[0].length);if(E[0]==" "&&(E=E.slice(1)),++w,E.length){var R={v:E,t:"s"};Array.isArray(c)?c[m][w]=R:c[Tr({r:m,c:w})]=R}break}v=x.lastIndex}w>h.e.c&&(h.e.c=w)}),c["!ref"]=dn(h),c}function t(s,i){return Oc(r(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],a=Dr(s["!ref"]),c,d=Array.isArray(s),h=a.s.r;h<=a.e.r;++h){i.push("\\trowd\\trautofit1");for(var p=a.s.c;p<=a.e.c;++p)i.push("\\cellx"+(p+1));for(i.push("\\pard\\intbl"),p=a.s.c;p<=a.e.c;++p){var m=Tr({r:h,c:p});c=d?(s[h]||[])[p]:s[m],!(!c||c.v==null&&(!c.f||c.F))&&(i.push(" "+(c.w||(ao(c),c.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:t,to_sheet:r,from_sheet:n}})();function ik(r){for(var e=0,t=1;e!=3;++e)t=t*256+(r[e]>255?255:r[e]<0?0:r[e]);return t.toString(16).toUpperCase().slice(1)}var JY=6,Qa=JY;function pg(r){return Math.floor((r+Math.round(128/Qa)/256)*Qa)}function mg(r){return Math.floor((r-5)/Qa*100+.5)/100}function $1(r){return Math.round((r*Qa+5)/Qa*256)/256}function ww(r){r.width?(r.wpx=pg(r.width),r.wch=mg(r.wpx),r.MDW=Qa):r.wpx?(r.wch=mg(r.wpx),r.width=$1(r.wch),r.MDW=Qa):typeof r.wch=="number"&&(r.width=$1(r.wch),r.wpx=pg(r.width),r.MDW=Qa),r.customWidth&&delete r.customWidth}var ZY=96,aP=ZY;function gg(r){return r*96/aP}function oP(r){return r*aP/96}function eX(r){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var n=t[0];n<=t[1];++n)r[n]!=null&&(e[e.length]=rt("numFmt",null,{numFmtId:n,formatCode:_r(r[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=rt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function tX(r){var e=[];return e[e.length]=rt("cellXfs",null),r.forEach(function(t){e[e.length]=rt("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=rt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function lP(r,e){var t=[fn,rt("styleSheet",null,{xmlns:Dd[0],"xmlns:vt":Cn.vt})],n;return r.SSF&&(n=eX(r.SSF))!=null&&(t[t.length]=n),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=tX(e.cellXfs))&&(t[t.length]=n),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function rX(r,e){var t=r.read_shift(2),n=os(r);return[t,n]}function nX(r,e,t){t||(t=Re(6+4*e.length)),t.write_shift(2,r),Pn(e,t);var n=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),n}function sX(r,e,t){var n={};n.sz=r.read_shift(2)/20;var s=WK(r);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=r.read_shift(2);switch(i===700&&(n.bold=1),r.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=r.read_shift(1);a!=0&&(n.underline=a);var c=r.read_shift(1);c>0&&(n.family=c);var d=r.read_shift(1);switch(d>0&&(n.charset=d),r.l++,n.color=HK(r),r.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=os(r),n}function iX(r,e){e||(e=Re(153)),e.write_shift(2,r.sz*20),qK(r,e),e.write_shift(2,r.bold?700:400);var t=0;r.vertAlign=="superscript"?t=1:r.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,r.underline||0),e.write_shift(1,r.family||0),e.write_shift(1,r.charset||0),e.write_shift(1,0),hg(r.color,e);var n=0;return n=2,e.write_shift(1,n),Pn(r.name,e),e.length>e.l?e.slice(0,e.l):e}var aX=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],kv,oX=Ea;function ak(r,e){e||(e=Re(84)),kv||(kv=cw(aX));var t=kv[r.patternType];t==null&&(t=40),e.write_shift(4,t);var n=0;if(t!=40)for(hg({auto:1},e),hg({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function lX(r,e){var t=r.l+e,n=r.read_shift(2),s=r.read_shift(2);return r.l=t,{ixfe:n,numFmtId:s}}function cP(r,e,t){t||(t=Re(16)),t.write_shift(2,e||0),t.write_shift(2,r.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var n=0;return t.write_shift(1,n),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function E0(r,e){return e||(e=Re(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var cX=Ea;function uX(r,e){return e||(e=Re(51)),e.write_shift(1,0),E0(null,e),E0(null,e),E0(null,e),E0(null,e),E0(null,e),e.length>e.l?e.slice(0,e.l):e}function dX(r,e){return e||(e=Re(52)),e.write_shift(4,r.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),dg(r.name||"",e),e.length>e.l?e.slice(0,e.l):e}function hX(r,e,t){var n=Re(2052);return n.write_shift(4,r),dg(e,n),dg(t,n),n.length>n.l?n.slice(0,n.l):n}function fX(r,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&++t}),t!=0&&(Ue(r,615,Ui(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&Ue(r,44,nX(s,e[s]))}),Ue(r,616))}}function pX(r){var e=1;Ue(r,611,Ui(e)),Ue(r,43,iX({sz:12,color:{theme:1},name:"Calibri",family:2})),Ue(r,612)}function mX(r){var e=2;Ue(r,603,Ui(e)),Ue(r,45,ak({patternType:"none"})),Ue(r,45,ak({patternType:"gray125"})),Ue(r,604)}function gX(r){var e=1;Ue(r,613,Ui(e)),Ue(r,46,uX()),Ue(r,614)}function xX(r){var e=1;Ue(r,626,Ui(e)),Ue(r,47,cP({numFmtId:0},65535)),Ue(r,627)}function yX(r,e){Ue(r,617,Ui(e.length)),e.forEach(function(t){Ue(r,47,cP(t,0))}),Ue(r,618)}function vX(r){var e=1;Ue(r,619,Ui(e)),Ue(r,48,dX({xfId:0,name:"Normal"})),Ue(r,620)}function bX(r){var e=0;Ue(r,505,Ui(e)),Ue(r,506)}function wX(r){var e=0;Ue(r,508,hX(e,"TableStyleMedium9","PivotStyleMedium4")),Ue(r,509)}function _X(r,e){var t=Rs();return Ue(t,278),fX(t,r.SSF),pX(t),mX(t),gX(t),xX(t),yX(t,e.cellXfs),vX(t),bX(t),wX(t),Ue(t,279),t.end()}function uP(r,e){if(e&&e.themeXLSX)return e.themeXLSX;if(r&&typeof r.raw=="string")return r.raw;var t=[fn];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function EX(r,e){return{flags:r.read_shift(4),version:r.read_shift(4),name:os(r)}}function TX(r){var e=Re(12+2*r.name.length);return e.write_shift(4,r.flags),e.write_shift(4,r.version),Pn(r.name,e),e.slice(0,e.l)}function AX(r){for(var e=[],t=r.read_shift(4);t-- >0;)e.push([r.read_shift(4),r.read_shift(4)]);return e}function NX(r){var e=Re(4+8*r.length);e.write_shift(4,r.length);for(var t=0;t<r.length;++t)e.write_shift(4,r[t][0]),e.write_shift(4,r[t][1]);return e}function kX(r,e){var t=Re(8+2*e.length);return t.write_shift(4,r),Pn(e,t),t.slice(0,t.l)}function SX(r){return r.l+=4,r.read_shift(4)!=0}function CX(r,e){var t=Re(8);return t.write_shift(4,r),t.write_shift(4,1),t}function IX(){var r=Rs();return Ue(r,332),Ue(r,334,Ui(1)),Ue(r,335,TX({name:"XLDAPR",version:12e4,flags:3496657072})),Ue(r,336),Ue(r,339,kX(1,"XLDAPR")),Ue(r,52),Ue(r,35,Ui(514)),Ue(r,4096,Ui(0)),Ue(r,4097,hi(1)),Ue(r,36),Ue(r,53),Ue(r,340),Ue(r,337,CX(1)),Ue(r,51,NX([[1,0]])),Ue(r,338),Ue(r,333),r.end()}function dP(){var r=[fn];return r.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),r.join("")}function PX(r){var e={};e.i=r.read_shift(4);var t={};t.r=r.read_shift(4),t.c=r.read_shift(4),e.r=Tr(t);var n=r.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var zu=1024;function hP(r,e){for(var t=[21600,21600],n=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),s=[rt("xml",null,{"xmlns:v":Ws.v,"xmlns:o":Ws.o,"xmlns:x":Ws.x,"xmlns:mv":Ws.mv}).replace(/\/>/,">"),rt("o:shapelayout",rt("o:idmap",null,{"v:ext":"edit",data:r}),{"v:ext":"edit"}),rt("v:shapetype",[rt("v:stroke",null,{joinstyle:"miter"}),rt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:n})];zu<r*1e3;)zu+=1e3;return e.forEach(function(i){var a=In(i[0]),c={color2:"#BEFF82",type:"gradient"};c.type=="gradient"&&(c.angle="-180");var d=c.type=="gradient"?rt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,h=rt("v:fill",d,c),p={on:"t",obscured:"t"};++zu,s=s.concat(["<v:shape"+Ph({id:"_x0000_s"+zu,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",h,rt("v:shadow",null,p),rt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Hn("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),Hn("x:AutoFill","False"),Hn("x:Row",String(a.r)),Hn("x:Column",String(a.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function fP(r){var e=[fn,rt("comments",null,{xmlns:Dd[0]})],t=[];return e.push("<authors>"),r.forEach(function(n){n[1].forEach(function(s){var i=_r(s.a);t.indexOf(i)==-1&&(t.push(i),e.push("<author>"+i+"</author>")),s.T&&s.ID&&t.indexOf("tc="+s.ID)==-1&&(t.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),r.forEach(function(n){var s=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=t.indexOf("tc="+n[1][0].ID):n[1].forEach(function(d){d.a&&(s=t.indexOf(_r(d.a))),i.push(d.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),i.length<=1)e.push(Hn("t",_r(i[0]||"")));else{for(var a=`Comment:
    `+i[0]+`
`,c=1;c<i.length;++c)a+=`Reply:
    `+i[c]+`
`;e.push(Hn("t",_r(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function jX(r,e,t){var n=[fn,rt("ThreadedComments",null,{xmlns:Cn.TCMNT}).replace(/[\/]>/,">")];return r.forEach(function(s){var i="";(s[1]||[]).forEach(function(a,c){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var d={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};c==0?i=d.id:d.parentId=i,a.ID=d.id,a.a&&(d.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),n.push(rt("threadedComment",Hn("text",a.t||""),d))})}),n.push("</ThreadedComments>"),n.join("")}function RX(r){var e=[fn,rt("personList",null,{xmlns:Cn.TCMNT,"xmlns:x":Dd[0]}).replace(/[\/]>/,">")];return r.forEach(function(t,n){e.push(rt("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function DX(r){var e={};e.iauthor=r.read_shift(4);var t=$c(r);return e.rfx=t.s,e.ref=Tr(t.s),r.l+=16,e}function FX(r,e){return e==null&&(e=Re(36)),e.write_shift(4,r[1].iauthor),Od(r[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var OX=os;function LX(r){return Pn(r.slice(0,54))}function MX(r){var e=Rs(),t=[];return Ue(e,628),Ue(e,630),r.forEach(function(n){n[1].forEach(function(s){t.indexOf(s.a)>-1||(t.push(s.a.slice(0,54)),Ue(e,632,LX(s.a)))})}),Ue(e,631),Ue(e,633),r.forEach(function(n){n[1].forEach(function(s){s.iauthor=t.indexOf(s.a);var i={s:In(n[0]),e:In(n[0])};Ue(e,635,FX([i,s])),s.t&&s.t.length>0&&Ue(e,637,$K(s)),Ue(e,636),delete s.iauthor})}),Ue(e,634),Ue(e,629),e.end()}function VX(r,e){e.FullPaths.forEach(function(t,n){if(n!=0){var s=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Ar.utils.cfb_add(r,s,e.FileIndex[n].content)}})}var pP=["xlsb","xlsm","xlam","biff8","xla"],$X=(function(){var r=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(n,s,i,a){var c=!1,d=!1;i.length==0?d=!0:i.charAt(0)=="["&&(d=!0,i=i.slice(1,-1)),a.length==0?c=!0:a.charAt(0)=="["&&(c=!0,a=a.slice(1,-1));var h=i.length>0?parseInt(i,10)|0:0,p=a.length>0?parseInt(a,10)|0:0;return c?p+=e.c:--p,d?h+=e.r:--h,s+(c?"":"$")+as(p)+(d?"":"$")+qn(h)}return function(s,i){return e=i,s.replace(r,t)}})(),_w=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Ew=(function(){return function(e,t){return e.replace(_w,function(n,s,i,a,c,d){var h=gw(a)-(i?0:t.c),p=mw(d)-(c?0:t.r),m=p==0?"":c?p+1:"["+p+"]",x=h==0?"":i?h+1:"["+h+"]";return s+"R"+m+"C"+x})}})();function BX(r,e){return r.replace(_w,function(t,n,s,i,a,c){return n+(s=="$"?s+i:as(gw(i)+e.c))+(a=="$"?a+c:qn(mw(c)+e.r))})}function UX(r){return r.length!=1}function cn(r){r.l+=1}function hl(r,e){var t=r.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function mP(r,e,t){var n=2;if(t){if(t.biff>=2&&t.biff<=5)return gP(r);t.biff==12&&(n=4)}var s=r.read_shift(n),i=r.read_shift(n),a=hl(r),c=hl(r);return{s:{r:s,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:c[0],cRel:c[1],rRel:c[2]}}}function gP(r){var e=hl(r),t=hl(r),n=r.read_shift(1),s=r.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:t[0],c:s,cRel:t[1],rRel:t[2]}}}function zX(r,e,t){if(t.biff<8)return gP(r);var n=r.read_shift(t.biff==12?4:2),s=r.read_shift(t.biff==12?4:2),i=hl(r),a=hl(r);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function xP(r,e,t){if(t&&t.biff>=2&&t.biff<=5)return HX(r);var n=r.read_shift(t&&t.biff==12?4:2),s=hl(r);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function HX(r){var e=hl(r),t=r.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function WX(r){var e=r.read_shift(2),t=r.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function qX(r,e,t){var n=t&&t.biff?t.biff:8;if(n>=2&&n<=5)return GX(r);var s=r.read_shift(n>=12?4:2),i=r.read_shift(2),a=(i&16384)>>14,c=(i&32768)>>15;if(i&=16383,c==1)for(;s>524287;)s-=1048576;if(a==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:a,rRel:c}}function GX(r){var e=r.read_shift(2),t=r.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:s,rRel:n}}function KX(r,e,t){var n=(r[r.l++]&96)>>5,s=mP(r,t.biff>=2&&t.biff<=5?6:8,t);return[n,s]}function YX(r,e,t){var n=(r[r.l++]&96)>>5,s=r.read_shift(2,"i"),i=8;if(t)switch(t.biff){case 5:r.l+=12,i=6;break;case 12:i=12;break}var a=mP(r,i,t);return[n,s,a]}function XX(r,e,t){var n=(r[r.l++]&96)>>5;return r.l+=t&&t.biff>8?12:t.biff<8?6:8,[n]}function QX(r,e,t){var n=(r[r.l++]&96)>>5,s=r.read_shift(2),i=8;if(t)switch(t.biff){case 5:r.l+=12,i=6;break;case 12:i=12;break}return r.l+=i,[n,s]}function JX(r,e,t){var n=(r[r.l++]&96)>>5,s=zX(r,e-1,t);return[n,s]}function ZX(r,e,t){var n=(r[r.l++]&96)>>5;return r.l+=t.biff==2?6:t.biff==12?14:7,[n]}function ok(r){var e=r[r.l+1]&1,t=1;return r.l+=4,[e,t]}function eQ(r,e,t){r.l+=2;for(var n=r.read_shift(t&&t.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(r.read_shift(t&&t.biff==2?1:2));return s}function tQ(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(t&&t.biff==2?1:2)]}function rQ(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(t&&t.biff==2?1:2)]}function nQ(r){var e=r[r.l+1]&255?1:0;return r.l+=2,[e,r.read_shift(2)]}function sQ(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=t&&t.biff==2?3:4,[n]}function yP(r){var e=r.read_shift(1),t=r.read_shift(1);return[e,t]}function iQ(r){return r.read_shift(2),yP(r)}function aQ(r){return r.read_shift(2),yP(r)}function oQ(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var s=xP(r,0,t);return[n,s]}function lQ(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var s=qX(r,0,t);return[n,s]}function cQ(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var s=r.read_shift(2);t&&t.biff==5&&(r.l+=12);var i=xP(r,0,t);return[n,s,i]}function uQ(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var s=r.read_shift(t&&t.biff<=3?1:2);return[uJ[s],wP[s],n]}function dQ(r,e,t){var n=r[r.l++],s=r.read_shift(1),i=t&&t.biff<=3?[n==88?-1:0,r.read_shift(1)]:hQ(r);return[s,(i[0]===0?wP:cJ)[i[1]]]}function hQ(r){return[r[r.l+1]>>7,r.read_shift(2)&32767]}function fQ(r,e,t){r.l+=t&&t.biff==2?3:4}function pQ(r,e,t){if(r.l++,t&&t.biff==12)return[r.read_shift(4,"i"),0];var n=r.read_shift(2),s=r.read_shift(t&&t.biff==2?1:2);return[n,s]}function mQ(r){return r.l++,pf[r.read_shift(1)]}function gQ(r){return r.l++,r.read_shift(2)}function xQ(r){return r.l++,r.read_shift(1)!==0}function yQ(r){return r.l++,Ld(r)}function vQ(r,e,t){return r.l++,eP(r,e-1,t)}function bQ(r,e){var t=[r.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=cY(r,1)?"TRUE":"FALSE",e!=12&&(r.l+=7);break;case 37:case 16:t[1]=pf[r[r.l]],r.l+=e==12?4:8;break;case 0:r.l+=8;break;case 1:t[1]=Ld(r);break;case 2:t[1]=fY(r,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function wQ(r,e,t){for(var n=r.read_shift(t.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((t.biff==12?$c:gY)(r));return s}function _Q(r,e,t){var n=0,s=0;t.biff==12?(n=r.read_shift(4),s=r.read_shift(4)):(s=1+r.read_shift(1),n=1+r.read_shift(2)),t.biff>=2&&t.biff<8&&(--n,--s==0&&(s=256));for(var i=0,a=[];i!=n&&(a[i]=[]);++i)for(var c=0;c!=s;++c)a[i][c]=bQ(r,t.biff);return a}function EQ(r,e,t){var n=r.read_shift(1)>>>5&3,s=!t||t.biff>=8?4:2,i=r.read_shift(s);switch(t.biff){case 2:r.l+=5;break;case 3:case 4:r.l+=8;break;case 5:r.l+=12;break}return[n,0,i]}function TQ(r,e,t){if(t.biff==5)return AQ(r);var n=r.read_shift(1)>>>5&3,s=r.read_shift(2),i=r.read_shift(4);return[n,s,i]}function AQ(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2,"i");r.l+=8;var n=r.read_shift(2);return r.l+=12,[e,t,n]}function NQ(r,e,t){var n=r.read_shift(1)>>>5&3;r.l+=t&&t.biff==2?3:4;var s=r.read_shift(t&&t.biff==2?1:2);return[n,s]}function kQ(r,e,t){var n=r.read_shift(1)>>>5&3,s=r.read_shift(t&&t.biff==2?1:2);return[n,s]}function SQ(r,e,t){var n=r.read_shift(1)>>>5&3;return r.l+=4,t.biff<8&&r.l--,t.biff==12&&(r.l+=2),[n]}function CQ(r,e,t){var n=(r[r.l++]&96)>>5,s=r.read_shift(2),i=4;if(t)switch(t.biff){case 5:i=15;break;case 12:i=6;break}return r.l+=i,[n,s]}var IQ=Ea,PQ=Ea,jQ=Ea;function mf(r,e,t){return r.l+=2,[WX(r)]}function Tw(r){return r.l+=6,[]}var RQ=mf,DQ=Tw,FQ=Tw,OQ=mf;function vP(r){return r.l+=2,[JI(r),r.read_shift(2)&1]}var LQ=mf,MQ=vP,VQ=Tw,$Q=mf,BQ=mf,UQ=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function zQ(r){r.l+=2;var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(4),s=r.read_shift(2),i=r.read_shift(2),a=UQ[t>>2&31];return{ixti:e,coltype:t&3,rt:a,idx:n,c:s,C:i}}function HQ(r){return r.l+=2,[r.read_shift(4)]}function WQ(r,e,t){return r.l+=5,r.l+=2,r.l+=t.biff==2?1:4,["PTGSHEET"]}function qQ(r,e,t){return r.l+=t.biff==2?4:5,["PTGENDSHEET"]}function GQ(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2);return[e,t]}function KQ(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2);return[e,t]}function YQ(r){return r.l+=4,[0,0]}var lk={1:{n:"PtgExp",f:pQ},2:{n:"PtgTbl",f:jQ},3:{n:"PtgAdd",f:cn},4:{n:"PtgSub",f:cn},5:{n:"PtgMul",f:cn},6:{n:"PtgDiv",f:cn},7:{n:"PtgPower",f:cn},8:{n:"PtgConcat",f:cn},9:{n:"PtgLt",f:cn},10:{n:"PtgLe",f:cn},11:{n:"PtgEq",f:cn},12:{n:"PtgGe",f:cn},13:{n:"PtgGt",f:cn},14:{n:"PtgNe",f:cn},15:{n:"PtgIsect",f:cn},16:{n:"PtgUnion",f:cn},17:{n:"PtgRange",f:cn},18:{n:"PtgUplus",f:cn},19:{n:"PtgUminus",f:cn},20:{n:"PtgPercent",f:cn},21:{n:"PtgParen",f:cn},22:{n:"PtgMissArg",f:cn},23:{n:"PtgStr",f:vQ},26:{n:"PtgSheet",f:WQ},27:{n:"PtgEndSheet",f:qQ},28:{n:"PtgErr",f:mQ},29:{n:"PtgBool",f:xQ},30:{n:"PtgInt",f:gQ},31:{n:"PtgNum",f:yQ},32:{n:"PtgArray",f:ZX},33:{n:"PtgFunc",f:uQ},34:{n:"PtgFuncVar",f:dQ},35:{n:"PtgName",f:EQ},36:{n:"PtgRef",f:oQ},37:{n:"PtgArea",f:KX},38:{n:"PtgMemArea",f:NQ},39:{n:"PtgMemErr",f:IQ},40:{n:"PtgMemNoMem",f:PQ},41:{n:"PtgMemFunc",f:kQ},42:{n:"PtgRefErr",f:SQ},43:{n:"PtgAreaErr",f:XX},44:{n:"PtgRefN",f:lQ},45:{n:"PtgAreaN",f:JX},46:{n:"PtgMemAreaN",f:GQ},47:{n:"PtgMemNoMemN",f:KQ},57:{n:"PtgNameX",f:TQ},58:{n:"PtgRef3d",f:cQ},59:{n:"PtgArea3d",f:YX},60:{n:"PtgRefErr3d",f:CQ},61:{n:"PtgAreaErr3d",f:QX},255:{}},XQ={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},QQ={1:{n:"PtgElfLel",f:vP},2:{n:"PtgElfRw",f:$Q},3:{n:"PtgElfCol",f:RQ},6:{n:"PtgElfRwV",f:BQ},7:{n:"PtgElfColV",f:OQ},10:{n:"PtgElfRadical",f:LQ},11:{n:"PtgElfRadicalS",f:VQ},13:{n:"PtgElfColS",f:DQ},15:{n:"PtgElfColSV",f:FQ},16:{n:"PtgElfRadicalLel",f:MQ},25:{n:"PtgList",f:zQ},29:{n:"PtgSxName",f:HQ},255:{}},JQ={0:{n:"PtgAttrNoop",f:YQ},1:{n:"PtgAttrSemi",f:sQ},2:{n:"PtgAttrIf",f:rQ},4:{n:"PtgAttrChoose",f:eQ},8:{n:"PtgAttrGoto",f:tQ},16:{n:"PtgAttrSum",f:fQ},32:{n:"PtgAttrBaxcel",f:ok},33:{n:"PtgAttrBaxcel",f:ok},64:{n:"PtgAttrSpace",f:iQ},65:{n:"PtgAttrSpaceSemi",f:aQ},128:{n:"PtgAttrIfError",f:nQ},255:{}};function ZQ(r,e,t,n){if(n.biff<8)return Ea(r,e);for(var s=r.l+e,i=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=_Q(r,0,n),i.push(t[a][1]);break;case"PtgMemArea":t[a][2]=wQ(r,t[a][1],n),i.push(t[a][2]);break;case"PtgExp":n&&n.biff==12&&(t[a][1][1]=r.read_shift(4),i.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return e=s-r.l,e!==0&&i.push(Ea(r,e)),i}function eJ(r,e,t){for(var n=r.l+e,s,i,a=[];n!=r.l;)e=n-r.l,i=r[r.l],s=lk[i]||lk[XQ[i]],(i===24||i===25)&&(s=(i===24?QQ:JQ)[r[r.l+1]]),!s||!s.f?Ea(r,e):a.push([s.n,s.f(r,e,t)]);return a}function tJ(r){for(var e=[],t=0;t<r.length;++t){for(var n=r[t],s=[],i=0;i<n.length;++i){var a=n[i];if(a)switch(a[0]){case 2:s.push('"'+a[1].replace(/"/g,'""')+'"');break;default:s.push(a[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var rJ={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function nJ(r,e){if(!r&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(r)?"'"+r+"'":r}function bP(r,e,t){if(!r)return"SH33TJSERR0";if(t.biff>8&&(!r.XTI||!r.XTI[e]))return r.SheetNames[e];if(!r.XTI)return"SH33TJSERR6";var n=r.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":r.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(t.biff>8)switch(r[n[0]][0]){case 357:return s=n[1]==-1?"#REF":r.SheetNames[n[1]],n[1]==n[2]?s:s+":"+r.SheetNames[n[2]];case 358:return t.SID!=null?r.SheetNames[t.SID]:"SH33TJSSAME"+r[n[0]][0];case 355:default:return"SH33TJSSRC"+r[n[0]][0]}switch(r[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":r.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+r.SheetNames[n[2]];case 14849:return r[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return r[n[0]][0][3]?(s=n[1]==-1?"#REF":r[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+r[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function ck(r,e,t){var n=bP(r,e,t);return n=="#REF"?n:nJ(n,t)}function _d(r,e,t,n,s){var i=s&&s.biff||8,a={s:{c:0,r:0}},c=[],d,h,p,m=0,x=0,v,_="";if(!r[0]||!r[0][0])return"";for(var w=-1,E="",R=0,C=r[0].length;R<C;++R){var V=r[0][R];switch(V[0]){case"PtgUminus":c.push("-"+c.pop());break;case"PtgUplus":c.push("+"+c.pop());break;case"PtgPercent":c.push(c.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(d=c.pop(),h=c.pop(),w>=0){switch(r[0][w][1][0]){case 0:E=Jr(" ",r[0][w][1][1]);break;case 1:E=Jr("\r",r[0][w][1][1]);break;default:if(E="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][w][1][0])}h=h+E,w=-1}c.push(h+rJ[V[0]]+d);break;case"PtgIsect":d=c.pop(),h=c.pop(),c.push(h+" "+d);break;case"PtgUnion":d=c.pop(),h=c.pop(),c.push(h+","+d);break;case"PtgRange":d=c.pop(),h=c.pop(),c.push(h+":"+d);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":p=Q0(V[1][1],a,s),c.push(J0(p,i));break;case"PtgRefN":p=t?Q0(V[1][1],t,s):V[1][1],c.push(J0(p,i));break;case"PtgRef3d":m=V[1][1],p=Q0(V[1][2],a,s),_=ck(n,m,s),c.push(_+"!"+J0(p,i));break;case"PtgFunc":case"PtgFuncVar":var L=V[1][0],K=V[1][1];L||(L=0),L&=127;var H=L==0?[]:c.slice(-L);c.length-=L,K==="User"&&(K=H.shift()),c.push(K+"("+H.join(",")+")");break;case"PtgBool":c.push(V[1]?"TRUE":"FALSE");break;case"PtgInt":c.push(V[1]);break;case"PtgNum":c.push(String(V[1]));break;case"PtgStr":c.push('"'+V[1].replace(/"/g,'""')+'"');break;case"PtgErr":c.push(V[1]);break;case"PtgAreaN":v=GN(V[1][1],t?{s:t}:a,s),c.push(Av(v,s));break;case"PtgArea":v=GN(V[1][1],a,s),c.push(Av(v,s));break;case"PtgArea3d":m=V[1][1],v=V[1][2],_=ck(n,m,s),c.push(_+"!"+Av(v,s));break;case"PtgAttrSum":c.push("SUM("+c.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":x=V[1][2];var S=(n.names||[])[x-1]||(n[0]||[])[x],k=S?S.Name:"SH33TJSNAME"+String(x);k&&k.slice(0,6)=="_xlfn."&&!s.xlfn&&(k=k.slice(6)),c.push(k);break;case"PtgNameX":var P=V[1][1];x=V[1][2];var j;if(s.biff<=5)P<0&&(P=-P),n[P]&&(j=n[P][x]);else{var M="";if(((n[P]||[])[0]||[])[0]==14849||(((n[P]||[])[0]||[])[0]==1025?n[P][x]&&n[P][x].itab>0&&(M=n.SheetNames[n[P][x].itab-1]+"!"):M=n.SheetNames[x-1]+"!"),n[P]&&n[P][x])M+=n[P][x].Name;else if(n[0]&&n[0][x])M+=n[0][x].Name;else{var D=(bP(n,P,s)||"").split(";;");D[x-1]?M=D[x-1]:M+="SH33TJSERRX"}c.push(M);break}j||(j={Name:"SH33TJSERRY"}),c.push(j.Name);break;case"PtgParen":var O="(",pe=")";if(w>=0){switch(E="",r[0][w][1][0]){case 2:O=Jr(" ",r[0][w][1][1])+O;break;case 3:O=Jr("\r",r[0][w][1][1])+O;break;case 4:pe=Jr(" ",r[0][w][1][1])+pe;break;case 5:pe=Jr("\r",r[0][w][1][1])+pe;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][w][1][0])}w=-1}c.push(O+c.pop()+pe);break;case"PtgRefErr":c.push("#REF!");break;case"PtgRefErr3d":c.push("#REF!");break;case"PtgExp":p={c:V[1][1],r:V[1][0]};var Ae={c:t.c,r:t.r};if(n.sharedf[Tr(p)]){var Fe=n.sharedf[Tr(p)];c.push(_d(Fe,a,Ae,n,s))}else{var Me=!1;for(d=0;d!=n.arrayf.length;++d)if(h=n.arrayf[d],!(p.c<h[0].s.c||p.c>h[0].e.c)&&!(p.r<h[0].s.r||p.r>h[0].e.r)){c.push(_d(h[1],a,Ae,n,s)),Me=!0;break}Me||c.push(V[1])}break;case"PtgArray":c.push("{"+tJ(V[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":w=R;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":c.push("");break;case"PtgAreaErr":c.push("#REF!");break;case"PtgAreaErr3d":c.push("#REF!");break;case"PtgList":c.push("Table"+V[1].idx+"[#"+V[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(V));default:throw new Error("Unrecognized Formula Token: "+String(V))}var Ee=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&w>=0&&Ee.indexOf(r[0][R][0])==-1){V=r[0][w];var Te=!0;switch(V[1][0]){case 4:Te=!1;case 0:E=Jr(" ",V[1][1]);break;case 5:Te=!1;case 1:E=Jr("\r",V[1][1]);break;default:if(E="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+V[1][0])}c.push((Te?E:"")+c.pop()+(Te?"":E)),w=-1}}if(c.length>1&&s.WTF)throw new Error("bad formula stack");return c[0]}function sJ(r){if(r==null){var e=Re(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof r=="number")return _c(r);return _c(0)}function iJ(r,e,t,n,s){var i=Ec(e,t,s),a=sJ(r.v),c=Re(6),d=33;c.write_shift(2,d),c.write_shift(4,0);for(var h=Re(r.bf.length),p=0;p<r.bf.length;++p)h[p]=r.bf[p];var m=zn([i,a,c,h]);return m}function cx(r,e,t){var n=r.read_shift(4),s=eJ(r,n,t),i=r.read_shift(4),a=i>0?ZQ(r,i,s,t):null;return[s,a]}var aJ=cx,ux=cx,oJ=cx,lJ=cx,cJ={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},wP={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},uJ={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function dJ(r){var e="of:="+r.replace(_w,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function hJ(r){return r.replace(/\./,"!")}var Z0=typeof Map<"u";function Aw(r,e,t){var n=0,s=r.length;if(t){if(Z0?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var i=Z0?t.get(e):t[e];n<i.length;++n)if(r[i[n]].t===e)return r.Count++,i[n]}}else for(;n<s;++n)if(r[n].t===e)return r.Count++,n;return r[s]={t:e},r.Count++,r.Unique++,t&&(Z0?(t.has(e)||t.set(e,[]),t.get(e).push(s)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(s))),s}function dx(r,e){var t={min:r+1,max:r+1},n=-1;return e.MDW&&(Qa=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?n=mg(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(t.width=$1(n),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function _P(r,e){if(r){var t=[.7,.7,.75,.75,.3,.3];r.left==null&&(r.left=t[0]),r.right==null&&(r.right=t[1]),r.top==null&&(r.top=t[2]),r.bottom==null&&(r.bottom=t[3]),r.header==null&&(r.header=t[4]),r.footer==null&&(r.footer=t[5])}}function bl(r,e,t){var n=t.revssf[e.z!=null?e.z:"General"],s=60,i=r.length;if(n==null&&t.ssf){for(;s<392;++s)if(t.ssf[s]==null){xI(e.z,s),t.ssf[s]=e.z,t.revssf[e.z]=n=s;break}}for(s=0;s!=i;++s)if(r[s].numFmtId===n)return s;return r[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function fJ(r,e,t){if(r&&r["!ref"]){var n=Dr(r["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+t+"): "+r["!ref"])}}function pJ(r){if(r.length===0)return"";for(var e='<mergeCells count="'+r.length+'">',t=0;t!=r.length;++t)e+='<mergeCell ref="'+dn(r[t])+'"/>';return e+"</mergeCells>"}function mJ(r,e,t,n,s){var i=!1,a={},c=null;if(n.bookType!=="xlsx"&&e.vbaraw){var d=e.SheetNames[t];try{e.Workbook&&(d=e.Workbook.Sheets[t].CodeName||d)}catch{}i=!0,a.codeName=Ih(_r(d))}if(r&&r["!outline"]){var h={summaryBelow:1,summaryRight:1};r["!outline"].above&&(h.summaryBelow=0),r["!outline"].left&&(h.summaryRight=0),c=(c||"")+rt("outlinePr",null,h)}!i&&!c||(s[s.length]=rt("sheetPr",c,a))}var gJ=["objects","scenarios","selectLockedCells","selectUnlockedCells"],xJ=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function yJ(r){var e={sheet:1};return gJ.forEach(function(t){r[t]!=null&&r[t]&&(e[t]="1")}),xJ.forEach(function(t){r[t]!=null&&!r[t]&&(e[t]="0")}),r.password&&(e.password=iP(r.password).toString(16).toUpperCase()),rt("sheetProtection",null,e)}function vJ(r){return _P(r),rt("pageMargins",null,r)}function bJ(r,e){for(var t=["<cols>"],n,s=0;s!=e.length;++s)(n=e[s])&&(t[t.length]=rt("col",null,dx(s,n)));return t[t.length]="</cols>",t.join("")}function wJ(r,e,t,n){var s=typeof r.ref=="string"?r.ref:dn(r.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var i=t.Workbook.Names,a=ei(s);a.s.r==a.e.r&&(a.e.r=ei(e["!ref"]).e.r,s=dn(a));for(var c=0;c<i.length;++c){var d=i[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==n){d.Ref="'"+t.SheetNames[n]+"'!"+s;break}}return c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+s}),rt("autoFilter",null,{ref:s})}function _J(r,e,t,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),rt("sheetViews",rt("sheetView",null,s),{})}function EJ(r,e,t,n){if(r.c&&t["!comments"].push([e,r.c]),r.v===void 0&&typeof r.f!="string"||r.t==="z"&&!r.f)return"";var s="",i=r.t,a=r.v;if(r.t!=="z")switch(r.t){case"b":s=r.v?"1":"0";break;case"n":s=""+r.v;break;case"e":s=pf[r.v];break;case"d":n&&n.cellDates?s=xs(r.v,-1).toISOString():(r=Fs(r),r.t="n",s=""+(r.v=Ds(xs(r.v)))),typeof r.z>"u"&&(r.z=en[14]);break;default:s=r.v;break}var c=Hn("v",_r(s)),d={r:e},h=bl(n.cellXfs,r,n);switch(h!==0&&(d.s=h),r.t){case"n":break;case"d":d.t="d";break;case"b":d.t="b";break;case"e":d.t="e";break;case"z":break;default:if(r.v==null){delete r.t;break}if(r.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){c=Hn("v",""+Aw(n.Strings,r.v,n.revStrings)),d.t="s";break}d.t="str";break}if(r.t!=i&&(r.t=i,r.v=a),typeof r.f=="string"&&r.f){var p=r.F&&r.F.slice(0,e.length)==e?{t:"array",ref:r.F}:null;c=rt("f",_r(r.f),p)+(r.v!=null?c:"")}return r.l&&t["!links"].push([e,r.l]),r.D&&(d.cm=1),rt("c",c,d)}function TJ(r,e,t,n){var s=[],i=[],a=Dr(r["!ref"]),c="",d,h="",p=[],m=0,x=0,v=r["!rows"],_=Array.isArray(r),w={r:h},E,R=-1;for(x=a.s.c;x<=a.e.c;++x)p[x]=as(x);for(m=a.s.r;m<=a.e.r;++m){for(i=[],h=qn(m),x=a.s.c;x<=a.e.c;++x){d=p[x]+h;var C=_?(r[m]||[])[x]:r[d];C!==void 0&&(c=EJ(C,d,r,e))!=null&&i.push(c)}(i.length>0||v&&v[m])&&(w={r:h},v&&v[m]&&(E=v[m],E.hidden&&(w.hidden=1),R=-1,E.hpx?R=gg(E.hpx):E.hpt&&(R=E.hpt),R>-1&&(w.ht=R,w.customHeight=1),E.level&&(w.outlineLevel=E.level)),s[s.length]=rt("row",i.join(""),w))}if(v)for(;m<v.length;++m)v&&v[m]&&(w={r:m+1},E=v[m],E.hidden&&(w.hidden=1),R=-1,E.hpx?R=gg(E.hpx):E.hpt&&(R=E.hpt),R>-1&&(w.ht=R,w.customHeight=1),E.level&&(w.outlineLevel=E.level),s[s.length]=rt("row","",w));return s.join("")}function EP(r,e,t,n){var s=[fn,rt("worksheet",null,{xmlns:Dd[0],"xmlns:r":Cn.r})],i=t.SheetNames[r],a=0,c="",d=t.Sheets[i];d==null&&(d={});var h=d["!ref"]||"A1",p=Dr(h);if(p.e.c>16383||p.e.r>1048575){if(e.WTF)throw new Error("Range "+h+" exceeds format limit A1:XFD1048576");p.e.c=Math.min(p.e.c,16383),p.e.r=Math.min(p.e.c,1048575),h=dn(p)}n||(n={}),d["!comments"]=[];var m=[];mJ(d,t,r,e,s),s[s.length]=rt("dimension",null,{ref:h}),s[s.length]=_J(d,e,r,t),e.sheetFormat&&(s[s.length]=rt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),d["!cols"]!=null&&d["!cols"].length>0&&(s[s.length]=bJ(d,d["!cols"])),s[a=s.length]="<sheetData/>",d["!links"]=[],d["!ref"]!=null&&(c=TJ(d,e),c.length>0&&(s[s.length]=c)),s.length>a+1&&(s[s.length]="</sheetData>",s[a]=s[a].replace("/>",">")),d["!protect"]&&(s[s.length]=yJ(d["!protect"])),d["!autofilter"]!=null&&(s[s.length]=wJ(d["!autofilter"],d,t,r)),d["!merges"]!=null&&d["!merges"].length>0&&(s[s.length]=pJ(d["!merges"]));var x=-1,v,_=-1;return d["!links"].length>0&&(s[s.length]="<hyperlinks>",d["!links"].forEach(function(w){w[1].Target&&(v={ref:w[0]},w[1].Target.charAt(0)!="#"&&(_=vr(n,-1,_r(w[1].Target).replace(/#.*$/,""),or.HLINK),v["r:id"]="rId"+_),(x=w[1].Target.indexOf("#"))>-1&&(v.location=_r(w[1].Target.slice(x+1))),w[1].Tooltip&&(v.tooltip=_r(w[1].Tooltip)),s[s.length]=rt("hyperlink",null,v))}),s[s.length]="</hyperlinks>"),delete d["!links"],d["!margins"]!=null&&(s[s.length]=vJ(d["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=Hn("ignoredErrors",rt("ignoredError",null,{numberStoredAsText:1,sqref:h}))),m.length>0&&(_=vr(n,-1,"../drawings/drawing"+(r+1)+".xml",or.DRAW),s[s.length]=rt("drawing",null,{"r:id":"rId"+_}),d["!drawing"]=m),d["!comments"].length>0&&(_=vr(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",or.VML),s[s.length]=rt("legacyDrawing",null,{"r:id":"rId"+_}),d["!legacy"]=_),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function AJ(r,e){var t={},n=r.l+e;t.r=r.read_shift(4),r.l+=4;var s=r.read_shift(2);r.l+=1;var i=r.read_shift(1);return r.l=n,i&7&&(t.level=i&7),i&16&&(t.hidden=!0),i&32&&(t.hpt=s/20),t}function NJ(r,e,t){var n=Re(145),s=(t["!rows"]||[])[r]||{};n.write_shift(4,r),n.write_shift(4,0);var i=320;s.hpx?i=gg(s.hpx)*20:s.hpt&&(i=s.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var a=0;s.level&&(a|=s.level),s.hidden&&(a|=16),(s.hpx||s.hpt)&&(a|=32),n.write_shift(1,a),n.write_shift(1,0);var c=0,d=n.l;n.l+=4;for(var h={r,c:0},p=0;p<16;++p)if(!(e.s.c>p+1<<10||e.e.c<p<<10)){for(var m=-1,x=-1,v=p<<10;v<p+1<<10;++v){h.c=v;var _=Array.isArray(t)?(t[h.r]||[])[h.c]:t[Tr(h)];_&&(m<0&&(m=v),x=v)}m<0||(++c,n.write_shift(4,m),n.write_shift(4,x))}var w=n.l;return n.l=d,n.write_shift(4,c),n.l=w,n.length>n.l?n.slice(0,n.l):n}function kJ(r,e,t,n){var s=NJ(n,t,e);(s.length>17||(e["!rows"]||[])[n])&&Ue(r,0,s)}var SJ=$c,CJ=Od;function IJ(){}function PJ(r,e){var t={},n=r[r.l];return++r.l,t.above=!(n&64),t.left=!(n&128),r.l+=18,t.name=BK(r),t}function jJ(r,e,t){t==null&&(t=Re(84+4*r.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),t.write_shift(1,n);for(var s=1;s<3;++s)t.write_shift(1,0);return hg({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),MI(r,t),t.slice(0,t.l)}function RJ(r){var e=vi(r);return[e]}function DJ(r,e,t){return t==null&&(t=Re(8)),Lc(e,t)}function FJ(r){var e=Mc(r);return[e]}function OJ(r,e,t){return t==null&&(t=Re(4)),Vc(e,t)}function LJ(r){var e=vi(r),t=r.read_shift(1);return[e,t,"b"]}function MJ(r,e,t){return t==null&&(t=Re(9)),Lc(e,t),t.write_shift(1,r.v?1:0),t}function VJ(r){var e=Mc(r),t=r.read_shift(1);return[e,t,"b"]}function $J(r,e,t){return t==null&&(t=Re(5)),Vc(e,t),t.write_shift(1,r.v?1:0),t}function BJ(r){var e=vi(r),t=r.read_shift(1);return[e,t,"e"]}function UJ(r,e,t){return t==null&&(t=Re(9)),Lc(e,t),t.write_shift(1,r.v),t}function zJ(r){var e=Mc(r),t=r.read_shift(1);return[e,t,"e"]}function HJ(r,e,t){return t==null&&(t=Re(8)),Vc(e,t),t.write_shift(1,r.v),t.write_shift(2,0),t.write_shift(1,0),t}function WJ(r){var e=vi(r),t=r.read_shift(4);return[e,t,"s"]}function qJ(r,e,t){return t==null&&(t=Re(12)),Lc(e,t),t.write_shift(4,e.v),t}function GJ(r){var e=Mc(r),t=r.read_shift(4);return[e,t,"s"]}function KJ(r,e,t){return t==null&&(t=Re(8)),Vc(e,t),t.write_shift(4,e.v),t}function YJ(r){var e=vi(r),t=Ld(r);return[e,t,"n"]}function XJ(r,e,t){return t==null&&(t=Re(16)),Lc(e,t),_c(r.v,t),t}function QJ(r){var e=Mc(r),t=Ld(r);return[e,t,"n"]}function JJ(r,e,t){return t==null&&(t=Re(12)),Vc(e,t),_c(r.v,t),t}function ZJ(r){var e=vi(r),t=VI(r);return[e,t,"n"]}function eZ(r,e,t){return t==null&&(t=Re(12)),Lc(e,t),$I(r.v,t),t}function tZ(r){var e=Mc(r),t=VI(r);return[e,t,"n"]}function rZ(r,e,t){return t==null&&(t=Re(8)),Vc(e,t),$I(r.v,t),t}function nZ(r){var e=vi(r),t=xw(r);return[e,t,"is"]}function sZ(r){var e=vi(r),t=os(r);return[e,t,"str"]}function iZ(r,e,t){return t==null&&(t=Re(12+4*r.v.length)),Lc(e,t),Pn(r.v,t),t.length>t.l?t.slice(0,t.l):t}function aZ(r){var e=Mc(r),t=os(r);return[e,t,"str"]}function oZ(r,e,t){return t==null&&(t=Re(8+4*r.v.length)),Vc(e,t),Pn(r.v,t),t.length>t.l?t.slice(0,t.l):t}function lZ(r,e,t){var n=r.l+e,s=vi(r);s.r=t["!row"];var i=r.read_shift(1),a=[s,i,"b"];if(t.cellFormula){r.l+=2;var c=ux(r,n-r.l,t);a[3]=_d(c,null,s,t.supbooks,t)}else r.l=n;return a}function cZ(r,e,t){var n=r.l+e,s=vi(r);s.r=t["!row"];var i=r.read_shift(1),a=[s,i,"e"];if(t.cellFormula){r.l+=2;var c=ux(r,n-r.l,t);a[3]=_d(c,null,s,t.supbooks,t)}else r.l=n;return a}function uZ(r,e,t){var n=r.l+e,s=vi(r);s.r=t["!row"];var i=Ld(r),a=[s,i,"n"];if(t.cellFormula){r.l+=2;var c=ux(r,n-r.l,t);a[3]=_d(c,null,s,t.supbooks,t)}else r.l=n;return a}function dZ(r,e,t){var n=r.l+e,s=vi(r);s.r=t["!row"];var i=os(r),a=[s,i,"str"];if(t.cellFormula){r.l+=2;var c=ux(r,n-r.l,t);a[3]=_d(c,null,s,t.supbooks,t)}else r.l=n;return a}var hZ=$c,fZ=Od;function pZ(r,e){return e==null&&(e=Re(4)),e.write_shift(4,r),e}function mZ(r,e){var t=r.l+e,n=$c(r),s=yw(r),i=os(r),a=os(r),c=os(r);r.l=t;var d={rfx:n,relId:s,loc:i,display:c};return a&&(d.Tooltip=a),d}function gZ(r,e){var t=Re(50+4*(r[1].Target.length+(r[1].Tooltip||"").length));Od({s:In(r[0]),e:In(r[0])},t),vw("rId"+e,t);var n=r[1].Target.indexOf("#"),s=n==-1?"":r[1].Target.slice(n+1);return Pn(s||"",t),Pn(r[1].Tooltip||"",t),Pn("",t),t.slice(0,t.l)}function xZ(){}function yZ(r,e,t){var n=r.l+e,s=BI(r),i=r.read_shift(1),a=[s];if(a[2]=i,t.cellFormula){var c=aJ(r,n-r.l,t);a[1]=c}else r.l=n;return a}function vZ(r,e,t){var n=r.l+e,s=$c(r),i=[s];if(t.cellFormula){var a=lJ(r,n-r.l,t);i[1]=a,r.l=n}else r.l=n;return i}function bZ(r,e,t){t==null&&(t=Re(18));var n=dx(r,e);t.write_shift(-4,r),t.write_shift(-4,r),t.write_shift(4,(n.width||10)*256),t.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),t.write_shift(2,s),t}var TP=["left","right","top","bottom","header","footer"];function wZ(r){var e={};return TP.forEach(function(t){e[t]=Ld(r)}),e}function _Z(r,e){return e==null&&(e=Re(48)),_P(r),TP.forEach(function(t){_c(r[t],e)}),e}function EZ(r){var e=r.read_shift(2);return r.l+=28,{RTL:e&32}}function TZ(r,e,t){t==null&&(t=Re(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function AZ(r){var e=Re(24);return e.write_shift(4,4),e.write_shift(4,1),Od(r,e),e}function NZ(r,e){return e==null&&(e=Re(66)),e.write_shift(2,r.password?iP(r.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,r[t[0]]!=null&&!r[t[0]]?1:0):e.write_shift(4,r[t[0]]!=null&&r[t[0]]?0:1)}),e}function kZ(){}function SZ(){}function CZ(r,e,t,n,s,i,a){if(e.v===void 0)return!1;var c="";switch(e.t){case"b":c=e.v?"1":"0";break;case"d":e=Fs(e),e.z=e.z||en[14],e.v=Ds(xs(e.v)),e.t="n";break;case"n":case"e":c=""+e.v;break;default:c=e.v;break}var d={r:t,c:n};switch(d.s=bl(s.cellXfs,e,s),e.l&&i["!links"].push([Tr(d),e.l]),e.c&&i["!comments"].push([Tr(d),e.c]),e.t){case"s":case"str":return s.bookSST?(c=Aw(s.Strings,e.v,s.revStrings),d.t="s",d.v=c,a?Ue(r,18,KJ(e,d)):Ue(r,7,qJ(e,d))):(d.t="str",a?Ue(r,17,oZ(e,d)):Ue(r,6,iZ(e,d))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?Ue(r,13,rZ(e,d)):Ue(r,2,eZ(e,d)):a?Ue(r,16,JJ(e,d)):Ue(r,5,XJ(e,d)),!0;case"b":return d.t="b",a?Ue(r,15,$J(e,d)):Ue(r,4,MJ(e,d)),!0;case"e":return d.t="e",a?Ue(r,14,HJ(e,d)):Ue(r,3,UJ(e,d)),!0}return a?Ue(r,12,OJ(e,d)):Ue(r,1,DJ(e,d)),!0}function IZ(r,e,t,n){var s=Dr(e["!ref"]||"A1"),i,a="",c=[];Ue(r,145);var d=Array.isArray(e),h=s.e.r;e["!rows"]&&(h=Math.max(s.e.r,e["!rows"].length-1));for(var p=s.s.r;p<=h;++p){a=qn(p),kJ(r,e,s,p);var m=!1;if(p<=s.e.r)for(var x=s.s.c;x<=s.e.c;++x){p===s.s.r&&(c[x]=as(x)),i=c[x]+a;var v=d?(e[p]||[])[x]:e[i];if(!v){m=!1;continue}m=CZ(r,v,p,x,n,e,m)}}Ue(r,146)}function PZ(r,e){!e||!e["!merges"]||(Ue(r,177,pZ(e["!merges"].length)),e["!merges"].forEach(function(t){Ue(r,176,fZ(t))}),Ue(r,178))}function jZ(r,e){!e||!e["!cols"]||(Ue(r,390),e["!cols"].forEach(function(t,n){t&&Ue(r,60,bZ(n,t))}),Ue(r,391))}function RZ(r,e){!e||!e["!ref"]||(Ue(r,648),Ue(r,649,AZ(Dr(e["!ref"]))),Ue(r,650))}function DZ(r,e,t){e["!links"].forEach(function(n){if(n[1].Target){var s=vr(t,-1,n[1].Target.replace(/#.*$/,""),or.HLINK);Ue(r,494,gZ(n,s))}}),delete e["!links"]}function FZ(r,e,t,n){if(e["!comments"].length>0){var s=vr(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",or.VML);Ue(r,551,vw("rId"+s)),e["!legacy"]=s}}function OZ(r,e,t,n){if(e["!autofilter"]){var s=e["!autofilter"],i=typeof s.ref=="string"?s.ref:dn(s.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,c=ei(i);c.s.r==c.e.r&&(c.e.r=ei(e["!ref"]).e.r,i=dn(c));for(var d=0;d<a.length;++d){var h=a[d];if(h.Name=="_xlnm._FilterDatabase"&&h.Sheet==n){h.Ref="'"+t.SheetNames[n]+"'!"+i;break}}d==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+i}),Ue(r,161,Od(Dr(i))),Ue(r,162)}}function LZ(r,e,t){Ue(r,133),Ue(r,137,TZ(e,t)),Ue(r,138),Ue(r,134)}function MZ(r,e){e["!protect"]&&Ue(r,535,NZ(e["!protect"]))}function VZ(r,e,t,n){var s=Rs(),i=t.SheetNames[r],a=t.Sheets[i]||{},c=i;try{t&&t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}var d=Dr(a["!ref"]||"A1");if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],Ue(s,129),(t.vbaraw||a["!outline"])&&Ue(s,147,jJ(c,a["!outline"])),Ue(s,148,CJ(d)),LZ(s,a,t.Workbook),jZ(s,a),IZ(s,a,r,e),MZ(s,a),OZ(s,a,t,r),PZ(s,a),DZ(s,a,n),a["!margins"]&&Ue(s,476,_Z(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&RZ(s,a),FZ(s,a,r,n),Ue(s,130),s.end()}function $Z(r,e){r.l+=10;var t=os(r);return{name:t}}var BZ=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function UZ(r){return!r.Workbook||!r.Workbook.WBProps?"false":vK(r.Workbook.WBProps.date1904)?"true":"false"}var zZ="][*?/\\".split("");function AP(r,e){if(r.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return zZ.forEach(function(n){if(r.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function HZ(r,e,t){r.forEach(function(n,s){AP(n);for(var i=0;i<s;++i)if(n==r[i])throw new Error("Duplicate Sheet Name: "+n);if(t){var a=e&&e[s]&&e[s].CodeName||n;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function WZ(r){if(!r||!r.SheetNames||!r.Sheets)throw new Error("Invalid Workbook");if(!r.SheetNames.length)throw new Error("Workbook is empty");var e=r.Workbook&&r.Workbook.Sheets||[];HZ(r.SheetNames,e,!!r.vbaraw);for(var t=0;t<r.SheetNames.length;++t)fJ(r.Sheets[r.SheetNames[t]],r.SheetNames[t],t)}function NP(r){var e=[fn];e[e.length]=rt("workbook",null,{xmlns:Dd[0],"xmlns:r":Cn.r});var t=r.Workbook&&(r.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};r.Workbook&&r.Workbook.WBProps&&(BZ.forEach(function(c){r.Workbook.WBProps[c[0]]!=null&&r.Workbook.WBProps[c[0]]!=c[1]&&(n[c[0]]=r.Workbook.WBProps[c[0]])}),r.Workbook.WBProps.CodeName&&(n.codeName=r.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=rt("workbookPr",null,n);var s=r.Workbook&&r.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",i=0;i!=r.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==r.SheetNames.length&&(i=0),e[e.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",i=0;i!=r.SheetNames.length;++i){var a={name:_r(r.SheetNames[i].slice(0,31))};if(a.sheetId=""+(i+1),a["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=rt("sheet",null,a)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",r.Workbook&&r.Workbook.Names&&r.Workbook.Names.forEach(function(c){var d={name:c.Name};c.Comment&&(d.comment=c.Comment),c.Sheet!=null&&(d.localSheetId=""+c.Sheet),c.Hidden&&(d.hidden="1"),c.Ref&&(e[e.length]=rt("definedName",_r(c.Ref),d))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function qZ(r,e){var t={};return t.Hidden=r.read_shift(4),t.iTabID=r.read_shift(4),t.strRelID=V1(r),t.name=os(r),t}function GZ(r,e){return e||(e=Re(127)),e.write_shift(4,r.Hidden),e.write_shift(4,r.iTabID),vw(r.strRelID,e),Pn(r.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function KZ(r,e){var t={},n=r.read_shift(4);t.defaultThemeVersion=r.read_shift(4);var s=e>8?os(r):"";return s.length>0&&(t.CodeName=s),t.autoCompressPictures=!!(n&65536),t.backupFile=!!(n&64),t.checkCompatibility=!!(n&4096),t.date1904=!!(n&1),t.filterPrivacy=!!(n&8),t.hidePivotFieldList=!!(n&1024),t.promptedSolutions=!!(n&16),t.publishItems=!!(n&2048),t.refreshAllConnections=!!(n&262144),t.saveExternalLinkValues=!!(n&128),t.showBorderUnselectedTables=!!(n&4),t.showInkAnnotation=!!(n&32),t.showObjects=["all","placeholders","none"][n>>13&3],t.showPivotChartFilter=!!(n&32768),t.updateLinks=["userSet","never","always"][n>>8&3],t}function YZ(r,e){e||(e=Re(72));var t=0;return r&&r.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),MI(r&&r.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function XZ(r,e,t){var n=r.l+e;r.l+=4,r.l+=1;var s=r.read_shift(4),i=UK(r),a=oJ(r,0,t),c=yw(r);r.l=n;var d={Name:i,Ptg:a};return s<268435455&&(d.Sheet=s),c&&(d.Comment=c),d}function QZ(r,e){Ue(r,143);for(var t=0;t!=e.SheetNames.length;++t){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,s={Hidden:n,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};Ue(r,156,GZ(s))}Ue(r,144)}function JZ(r,e){e||(e=Re(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return Pn("SheetJS",e),Pn(sg.version,e),Pn(sg.version,e),Pn("7262",e),e.length>e.l?e.slice(0,e.l):e}function ZZ(r,e){e||(e=Re(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,r),e.write_shift(4,r);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function eee(r,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,n=0,s=-1,i=-1;n<t.length;++n)!t[n]||!t[n].Hidden&&s==-1?s=n:t[n].Hidden==1&&i==-1&&(i=n);i>s||(Ue(r,135),Ue(r,158,ZZ(s)),Ue(r,136))}}function tee(r,e){var t=Rs();return Ue(t,131),Ue(t,128,JZ()),Ue(t,153,YZ(r.Workbook&&r.Workbook.WBProps||null)),eee(t,r),QZ(t,r),Ue(t,132),t.end()}function ree(r,e,t){return(e.slice(-4)===".bin"?tee:NP)(r)}function nee(r,e,t,n,s){return(e.slice(-4)===".bin"?VZ:EP)(r,t,n,s)}function see(r,e,t){return(e.slice(-4)===".bin"?_X:lP)(r,t)}function iee(r,e,t){return(e.slice(-4)===".bin"?YY:sP)(r,t)}function aee(r,e,t){return(e.slice(-4)===".bin"?MX:fP)(r)}function oee(r){return(r.slice(-4)===".bin"?IX:dP)()}function lee(r,e){var t=[];return r.Props&&t.push(sY(r.Props,e)),r.Custprops&&t.push(iY(r.Props,r.Custprops)),t.join("")}function cee(){return""}function uee(r,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,s){var i=[];i.push(rt("NumberFormat",null,{"ss:Format":_r(en[n.numFmtId])}));var a={"ss:ID":"s"+(21+s)};t.push(rt("Style",i.join(""),a))}),rt("Styles",t.join(""))}function kP(r){return rt("NamedRange",null,{"ss:Name":r.Name,"ss:RefersTo":"="+Ew(r.Ref,{r:0,c:0})})}function dee(r){if(!((r||{}).Workbook||{}).Names)return"";for(var e=r.Workbook.Names,t=[],n=0;n<e.length;++n){var s=e[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||t.push(kP(s)))}return rt("Names",t.join(""))}function hee(r,e,t,n){if(!r||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,i=[],a=0;a<s.length;++a){var c=s[a];c.Sheet==t&&(c.Name.match(/^_xlfn\./)||i.push(kP(c)))}return i.join("")}function fee(r,e,t,n){if(!r)return"";var s=[];if(r["!margins"]&&(s.push("<PageSetup>"),r["!margins"].header&&s.push(rt("Header",null,{"x:Margin":r["!margins"].header})),r["!margins"].footer&&s.push(rt("Footer",null,{"x:Margin":r["!margins"].footer})),s.push(rt("PageMargins",null,{"x:Bottom":r["!margins"].bottom||"0.75","x:Left":r["!margins"].left||"0.7","x:Right":r["!margins"].right||"0.7","x:Top":r["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[t])if(n.Workbook.Sheets[t].Hidden)s.push(rt("Visible",n.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<t&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==t&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),r["!protect"]&&(s.push(Hn("ProtectContents","True")),r["!protect"].objects&&s.push(Hn("ProtectObjects","True")),r["!protect"].scenarios&&s.push(Hn("ProtectScenarios","True")),r["!protect"].selectLockedCells!=null&&!r["!protect"].selectLockedCells?s.push(Hn("EnableSelection","NoSelection")):r["!protect"].selectUnlockedCells!=null&&!r["!protect"].selectUnlockedCells&&s.push(Hn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){r["!protect"][a[0]]&&s.push("<"+a[1]+"/>")})),s.length==0?"":rt("WorksheetOptions",s.join(""),{xmlns:Ws.x})}function pee(r){return r.map(function(e){var t=yK(e.t||""),n=rt("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return rt("Comment",n,{"ss:Author":e.a})}).join("")}function mee(r,e,t,n,s,i,a){if(!r||r.v==null&&r.f==null)return"";var c={};if(r.f&&(c["ss:Formula"]="="+_r(Ew(r.f,a))),r.F&&r.F.slice(0,e.length)==e){var d=In(r.F.slice(e.length+1));c["ss:ArrayRange"]="RC:R"+(d.r==a.r?"":"["+(d.r-a.r)+"]")+"C"+(d.c==a.c?"":"["+(d.c-a.c)+"]")}if(r.l&&r.l.Target&&(c["ss:HRef"]=_r(r.l.Target),r.l.Tooltip&&(c["x:HRefScreenTip"]=_r(r.l.Tooltip))),t["!merges"])for(var h=t["!merges"],p=0;p!=h.length;++p)h[p].s.c!=a.c||h[p].s.r!=a.r||(h[p].e.c>h[p].s.c&&(c["ss:MergeAcross"]=h[p].e.c-h[p].s.c),h[p].e.r>h[p].s.r&&(c["ss:MergeDown"]=h[p].e.r-h[p].s.r));var m="",x="";switch(r.t){case"z":if(!n.sheetStubs)return"";break;case"n":m="Number",x=String(r.v);break;case"b":m="Boolean",x=r.v?"1":"0";break;case"e":m="Error",x=pf[r.v];break;case"d":m="DateTime",x=new Date(r.v).toISOString(),r.z==null&&(r.z=r.z||en[14]);break;case"s":m="String",x=xK(r.v||"");break}var v=bl(n.cellXfs,r,n);c["ss:StyleID"]="s"+(21+v),c["ss:Index"]=a.c+1;var _=r.v!=null?x:"",w=r.t=="z"?"":'<Data ss:Type="'+m+'">'+_+"</Data>";return(r.c||[]).length>0&&(w+=pee(r.c)),rt("Cell",w,c)}function gee(r,e){var t='<Row ss:Index="'+(r+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=oP(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function xee(r,e,t,n){if(!r["!ref"])return"";var s=Dr(r["!ref"]),i=r["!merges"]||[],a=0,c=[];r["!cols"]&&r["!cols"].forEach(function(E,R){ww(E);var C=!!E.width,V=dx(R,E),L={"ss:Index":R+1};C&&(L["ss:Width"]=pg(V.width)),E.hidden&&(L["ss:Hidden"]="1"),c.push(rt("Column",null,L))});for(var d=Array.isArray(r),h=s.s.r;h<=s.e.r;++h){for(var p=[gee(h,(r["!rows"]||[])[h])],m=s.s.c;m<=s.e.c;++m){var x=!1;for(a=0;a!=i.length;++a)if(!(i[a].s.c>m)&&!(i[a].s.r>h)&&!(i[a].e.c<m)&&!(i[a].e.r<h)){(i[a].s.c!=m||i[a].s.r!=h)&&(x=!0);break}if(!x){var v={r:h,c:m},_=Tr(v),w=d?(r[h]||[])[m]:r[_];p.push(mee(w,_,r,e,t,n,v))}}p.push("</Row>"),p.length>2&&c.push(p.join(""))}return c.join("")}function yee(r,e,t){var n=[],s=t.SheetNames[r],i=t.Sheets[s],a=i?hee(i,e,r,t):"";return a.length>0&&n.push("<Names>"+a+"</Names>"),a=i?xee(i,e,r,t):"",a.length>0&&n.push("<Table>"+a+"</Table>"),n.push(fee(i,e,r,t)),n.join("")}function vee(r,e){e||(e={}),r.SSF||(r.SSF=Fs(en)),r.SSF&&(ax(),ix(r.SSF),e.revssf=ox(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF,e.cellXfs=[],bl(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(lee(r,e)),t.push(cee()),t.push(""),t.push("");for(var n=0;n<r.SheetNames.length;++n)t.push(rt("Worksheet",yee(n,e,r),{"ss:Name":_r(r.SheetNames[n])}));return t[2]=uee(r,e),t[3]=dee(r),fn+rt("Workbook",t.join(""),{xmlns:Ws.ss,"xmlns:o":Ws.o,"xmlns:x":Ws.x,"xmlns:ss":Ws.ss,"xmlns:dt":Ws.dt,"xmlns:html":Ws.html})}var Sv={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function bee(r,e){var t=[],n=[],s=[],i=0,a,c=ON(YN,"n"),d=ON(XN,"n");if(r.Props)for(a=Gn(r.Props),i=0;i<a.length;++i)(Object.prototype.hasOwnProperty.call(c,a[i])?t:Object.prototype.hasOwnProperty.call(d,a[i])?n:s).push([a[i],r.Props[a[i]]]);if(r.Custprops)for(a=Gn(r.Custprops),i=0;i<a.length;++i)Object.prototype.hasOwnProperty.call(r.Props||{},a[i])||(Object.prototype.hasOwnProperty.call(c,a[i])?t:Object.prototype.hasOwnProperty.call(d,a[i])?n:s).push([a[i],r.Custprops[a[i]]]);var h=[];for(i=0;i<s.length;++i)QI.indexOf(s[i][0])>-1||KI.indexOf(s[i][0])>-1||s[i][1]!=null&&h.push(s[i]);n.length&&Ar.utils.cfb_add(e,"/SummaryInformation",tk(n,Sv.SI,d,XN)),(t.length||h.length)&&Ar.utils.cfb_add(e,"/DocumentSummaryInformation",tk(t,Sv.DSI,c,YN,h.length?h:null,Sv.UDI))}function wee(r,e){var t=e||{},n=Ar.utils.cfb_new({root:"R"}),s="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":s="/Workbook",t.biff=8;break;case"biff5":s="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Ar.utils.cfb_add(n,s,SP(r,t)),t.biff==8&&(r.Props||r.Custprops)&&bee(r,n),t.biff==8&&r.vbaraw&&VX(n,Ar.read(r.vbaraw,{type:typeof r.vbaraw=="string"?"binary":"buffer"})),n}var _ee={0:{f:AJ},1:{f:RJ},2:{f:ZJ},3:{f:BJ},4:{f:LJ},5:{f:YJ},6:{f:sZ},7:{f:WJ},8:{f:dZ},9:{f:uZ},10:{f:lZ},11:{f:cZ},12:{f:FJ},13:{f:tZ},14:{f:zJ},15:{f:VJ},16:{f:QJ},17:{f:aZ},18:{f:GJ},19:{f:xw},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:XZ},40:{},42:{},43:{f:sX},44:{f:rX},45:{f:oX},46:{f:cX},47:{f:lX},48:{},49:{f:FK},50:{},51:{f:AX},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:OY},62:{f:nZ},63:{f:PX},64:{f:kZ},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ea,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:EZ},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:PJ},148:{f:SJ,p:16},151:{f:xZ},152:{},153:{f:KZ},154:{},155:{},156:{f:qZ},157:{},158:{},159:{T:1,f:qY},160:{T:-1},161:{T:1,f:$c},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:hZ},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:EX},336:{T:-1},337:{f:SX,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:V1},357:{},358:{},359:{},360:{T:1},361:{},362:{f:IY},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:yZ},427:{f:vZ},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:wZ},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:IJ},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:mZ},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:V1},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:OX},633:{T:1},634:{T:-1},635:{T:1,f:DX},636:{T:-1},637:{f:VK},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:$Z},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:SZ},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function st(r,e,t,n){var s=e;if(!isNaN(s)){var i=n||(t||[]).length||0,a=r.next(4);a.write_shift(2,s),a.write_shift(2,i),i>0&&pw(t)&&r.push(t)}}function Eee(r,e,t,n){var s=(t||[]).length||0;if(s<=8224)return st(r,e,t,s);var i=e;if(!isNaN(i)){for(var a=t.parts||[],c=0,d=0,h=0;h+(a[c]||8224)<=8224;)h+=a[c]||8224,c++;var p=r.next(4);for(p.write_shift(2,i),p.write_shift(2,h),r.push(t.slice(d,d+h)),d+=h;d<s;){for(p=r.next(4),p.write_shift(2,60),h=0;h+(a[c]||8224)<=8224;)h+=a[c]||8224,c++;p.write_shift(2,h),r.push(t.slice(d,d+h)),d+=h}}}function gf(r,e,t){return r||(r=Re(7)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,0),r.write_shift(1,0),r}function Tee(r,e,t,n){var s=Re(9);return gf(s,r,e),ZI(t,n||"b",s),s}function Aee(r,e,t){var n=Re(8+2*t.length);return gf(n,r,e),n.write_shift(1,t.length),n.write_shift(t.length,t,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Nee(r,e,t,n){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?Ds(xs(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?st(r,2,$Y(t,n,s)):st(r,3,VY(t,n,s));return;case"b":case"e":st(r,5,Tee(t,n,e.v,e.t));return;case"s":case"str":st(r,4,Aee(t,n,(e.v||"").slice(0,255)));return}st(r,1,gf(null,t,n))}function kee(r,e,t,n){var s=Array.isArray(e),i=Dr(e["!ref"]||"A1"),a,c="",d=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),a=dn(i)}for(var h=i.s.r;h<=i.e.r;++h){c=qn(h);for(var p=i.s.c;p<=i.e.c;++p){h===i.s.r&&(d[p]=as(p)),a=d[p]+c;var m=s?(e[h]||[])[p]:e[a];m&&Nee(r,m,h,p)}}}function See(r,e){for(var t=e||{},n=Rs(),s=0,i=0;i<r.SheetNames.length;++i)r.SheetNames[i]==t.sheet&&(s=i);if(s==0&&t.sheet&&r.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return st(n,t.biff==4?1033:t.biff==3?521:9,bw(r,16,t)),kee(n,r.Sheets[r.SheetNames[s]],s,t),st(n,10),n.end()}function Cee(r,e,t){st(r,49,_Y({sz:12,name:"Arial"},t))}function Iee(r,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&st(r,1054,AY(s,e[s],t))})}function Pee(r,e){var t=Re(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),st(r,2151,t),t=Re(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),rP(Dr(e["!ref"]||"A1"),t),t.write_shift(4,4),st(r,2152,t)}function jee(r,e){for(var t=0;t<16;++t)st(r,224,nk({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){st(r,224,nk(n,0,e))})}function Ree(r,e){for(var t=0;t<e["!links"].length;++t){var n=e["!links"][t];st(r,440,RY(n)),n[1].Tooltip&&st(r,2048,DY(n))}delete e["!links"]}function Dee(r,e){if(e){var t=0;e.forEach(function(n,s){++t<=256&&n&&st(r,125,LY(dx(s,n),s))})}}function Fee(r,e,t,n,s){var i=16+bl(s.cellXfs,e,s);if(e.v==null&&!e.bf){st(r,513,Ec(t,n,i));return}if(e.bf)st(r,6,iJ(e,t,n,s,i));else switch(e.t){case"d":case"n":var a=e.t=="d"?Ds(xs(e.v)):e.v;st(r,515,CY(t,n,a,i));break;case"b":case"e":st(r,517,SY(t,n,e.v,i,s,e.t));break;case"s":case"str":if(s.bookSST){var c=Aw(s.Strings,e.v,s.revStrings);st(r,253,EY(t,n,c,i))}else st(r,516,TY(t,n,(e.v||"").slice(0,255),i,s));break;default:st(r,513,Ec(t,n,i))}}function Oee(r,e,t){var n=Rs(),s=t.SheetNames[r],i=t.Sheets[s]||{},a=(t||{}).Workbook||{},c=(a.Sheets||[])[r]||{},d=Array.isArray(i),h=e.biff==8,p,m="",x=[],v=Dr(i["!ref"]||"A1"),_=h?65536:16384;if(v.e.c>255||v.e.r>=_){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");v.e.c=Math.min(v.e.c,255),v.e.r=Math.min(v.e.c,_-1)}st(n,2057,bw(t,16,e)),st(n,13,hi(1)),st(n,12,hi(100)),st(n,15,ps(!0)),st(n,17,ps(!1)),st(n,16,_c(.001)),st(n,95,ps(!0)),st(n,42,ps(!1)),st(n,43,ps(!1)),st(n,130,hi(1)),st(n,128,kY()),st(n,131,ps(!1)),st(n,132,ps(!1)),h&&Dee(n,i["!cols"]),st(n,512,NY(v,e)),h&&(i["!links"]=[]);for(var w=v.s.r;w<=v.e.r;++w){m=qn(w);for(var E=v.s.c;E<=v.e.c;++E){w===v.s.r&&(x[E]=as(E)),p=x[E]+m;var R=d?(i[w]||[])[E]:i[p];R&&(Fee(n,R,w,E,e),h&&R.l&&i["!links"].push([p,R.l]))}}var C=c.CodeName||c.name||s;return h&&st(n,574,wY((a.Views||[])[0])),h&&(i["!merges"]||[]).length&&st(n,229,jY(i["!merges"])),h&&Ree(n,i),st(n,442,tP(C)),h&&Pee(n,i),st(n,10),n.end()}function Lee(r,e,t){var n=Rs(),s=(r||{}).Workbook||{},i=s.Sheets||[],a=s.WBProps||{},c=t.biff==8,d=t.biff==5;if(st(n,2057,bw(r,5,t)),t.bookType=="xla"&&st(n,135),st(n,225,c?hi(1200):null),st(n,193,lY(2)),d&&st(n,191),d&&st(n,192),st(n,226),st(n,92,xY("SheetJS",t)),st(n,66,hi(c?1200:1252)),c&&st(n,353,hi(0)),c&&st(n,448),st(n,317,MY(r.SheetNames.length)),c&&r.vbaraw&&st(n,211),c&&r.vbaraw){var h=a.CodeName||"ThisWorkbook";st(n,442,tP(h))}st(n,156,hi(17)),st(n,25,ps(!1)),st(n,18,ps(!1)),st(n,19,hi(0)),c&&st(n,431,ps(!1)),c&&st(n,444,hi(0)),st(n,61,bY()),st(n,64,ps(!1)),st(n,141,hi(0)),st(n,34,ps(UZ(r)=="true")),st(n,14,ps(!0)),c&&st(n,439,ps(!1)),st(n,218,hi(0)),Cee(n,r,t),Iee(n,r.SSF,t),jee(n,t),c&&st(n,352,ps(!1));var p=n.end(),m=Rs();c&&st(m,140,FY()),c&&t.Strings&&Eee(m,252,vY(t.Strings)),st(m,10);var x=m.end(),v=Rs(),_=0,w=0;for(w=0;w<r.SheetNames.length;++w)_+=(c?12:11)+(c?2:1)*r.SheetNames[w].length;var E=p.length+_+x.length;for(w=0;w<r.SheetNames.length;++w){var R=i[w]||{};st(v,133,yY({pos:E,hs:R.Hidden||0,dt:0,name:r.SheetNames[w]},t)),E+=e[w].length}var C=v.end();if(_!=C.length)throw new Error("BS8 "+_+" != "+C.length);var V=[];return p.length&&V.push(p),C.length&&V.push(C),x.length&&V.push(x),zn(V)}function Mee(r,e){var t=e||{},n=[];r&&!r.SSF&&(r.SSF=Fs(en)),r&&r.SSF&&(ax(),ix(r.SSF),t.revssf=ox(r.SSF),t.revssf[r.SSF[65535]]=0,t.ssf=r.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Nw(t),t.cellXfs=[],bl(t.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={});for(var s=0;s<r.SheetNames.length;++s)n[n.length]=Oee(s,t,r);return n.unshift(Lee(r,n,t)),zn(n)}function SP(r,e){for(var t=0;t<=r.SheetNames.length;++t){var n=r.Sheets[r.SheetNames[t]];if(!(!n||!n["!ref"])){var s=ei(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+r.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var i=e||{};switch(i.biff||2){case 8:case 5:return Mee(r,e);case 4:case 3:case 2:return See(r,e)}throw new Error("invalid type "+i.bookType+" for BIFF")}function Vee(r,e,t,n){for(var s=r["!merges"]||[],i=[],a=e.s.c;a<=e.e.c;++a){for(var c=0,d=0,h=0;h<s.length;++h)if(!(s[h].s.r>t||s[h].s.c>a)&&!(s[h].e.r<t||s[h].e.c<a)){if(s[h].s.r<t||s[h].s.c<a){c=-1;break}c=s[h].e.r-s[h].s.r+1,d=s[h].e.c-s[h].s.c+1;break}if(!(c<0)){var p=Tr({r:t,c:a}),m=n.dense?(r[t]||[])[a]:r[p],x=m&&m.v!=null&&(m.h||gK(m.w||(ao(m),m.w)||""))||"",v={};c>1&&(v.rowspan=c),d>1&&(v.colspan=d),n.editable?x='<span contenteditable="true">'+x+"</span>":m&&(v["data-t"]=m&&m.t||"z",m.v!=null&&(v["data-v"]=m.v),m.z!=null&&(v["data-z"]=m.z),m.l&&(m.l.Target||"#").charAt(0)!="#"&&(x='<a href="'+m.l.Target+'">'+x+"</a>")),v.id=(n.id||"sjs")+"-"+p,i.push(rt("td",x,v))}}var _="<tr>";return _+i.join("")+"</tr>"}var $ee='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Bee="</body></html>";function Uee(r,e,t){var n=[];return n.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function CP(r,e){var t=e||{},n=t.header!=null?t.header:$ee,s=t.footer!=null?t.footer:Bee,i=[n],a=ei(r["!ref"]);t.dense=Array.isArray(r),i.push(Uee(r,a,t));for(var c=a.s.r;c<=a.e.r;++c)i.push(Vee(r,a,c,t));return i.push("</table>"+s),i.join("")}function IP(r,e,t){var n=t||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var a=typeof n.origin=="string"?In(n.origin):n.origin;s=a.r,i=a.c}var c=e.getElementsByTagName("tr"),d=Math.min(n.sheetRows||1e7,c.length),h={s:{r:0,c:0},e:{r:s,c:i}};if(r["!ref"]){var p=ei(r["!ref"]);h.s.r=Math.min(h.s.r,p.s.r),h.s.c=Math.min(h.s.c,p.s.c),h.e.r=Math.max(h.e.r,p.e.r),h.e.c=Math.max(h.e.c,p.e.c),s==-1&&(h.e.r=s=p.e.r+1)}var m=[],x=0,v=r["!rows"]||(r["!rows"]=[]),_=0,w=0,E=0,R=0,C=0,V=0;for(r["!cols"]||(r["!cols"]=[]);_<c.length&&w<d;++_){var L=c[_];if(uk(L)){if(n.display)continue;v[w]={hidden:!0}}var K=L.children;for(E=R=0;E<K.length;++E){var H=K[E];if(!(n.display&&uk(H))){var S=H.hasAttribute("data-v")?H.getAttribute("data-v"):H.hasAttribute("v")?H.getAttribute("v"):bK(H.innerHTML),k=H.getAttribute("data-z")||H.getAttribute("z");for(x=0;x<m.length;++x){var P=m[x];P.s.c==R+i&&P.s.r<w+s&&w+s<=P.e.r&&(R=P.e.c+1-i,x=-1)}V=+H.getAttribute("colspan")||1,((C=+H.getAttribute("rowspan")||1)>1||V>1)&&m.push({s:{r:w+s,c:R+i},e:{r:w+s+(C||1)-1,c:R+i+(V||1)-1}});var j={t:"s",v:S},M=H.getAttribute("data-t")||H.getAttribute("t")||"";S!=null&&(S.length==0?j.t=M||"z":n.raw||S.trim().length==0||M=="s"||(S==="TRUE"?j={t:"b",v:!0}:S==="FALSE"?j={t:"b",v:!1}:isNaN(Xa(S))?isNaN(Ch(S).getDate())||(j={t:"d",v:xs(S)},n.cellDates||(j={t:"n",v:Ds(j.v)}),j.z=n.dateNF||en[14]):j={t:"n",v:Xa(S)})),j.z===void 0&&k!=null&&(j.z=k);var D="",O=H.getElementsByTagName("A");if(O&&O.length)for(var pe=0;pe<O.length&&!(O[pe].hasAttribute("href")&&(D=O[pe].getAttribute("href"),D.charAt(0)!="#"));++pe);D&&D.charAt(0)!="#"&&(j.l={Target:D}),n.dense?(r[w+s]||(r[w+s]=[]),r[w+s][R+i]=j):r[Tr({c:R+i,r:w+s})]=j,h.e.c<R+i&&(h.e.c=R+i),R+=V}}++w}return m.length&&(r["!merges"]=(r["!merges"]||[]).concat(m)),h.e.r=Math.max(h.e.r,w-1+s),r["!ref"]=dn(h),w>=d&&(r["!fullref"]=dn((h.e.r=c.length-_+w-1+s,h))),r}function PP(r,e){var t=e||{},n=t.dense?[]:{};return IP(n,r,e)}function zee(r,e){return Oc(PP(r,e),e)}function uk(r){var e="",t=Hee(r);return t&&(e=t(r).getPropertyValue("display")),e||(e=r.style&&r.style.display),e==="none"}function Hee(r){return r.ownerDocument.defaultView&&typeof r.ownerDocument.defaultView.getComputedStyle=="function"?r.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Wee=(function(){var r=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Ph({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+r+"</office:document-styles>";return function(){return fn+e}})(),dk=(function(){var r=function(i){return _r(i).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,n=function(i,a,c){var d=[];d.push('      <table:table table:name="'+_r(a.SheetNames[c])+`" table:style-name="ta1">
`);var h=0,p=0,m=ei(i["!ref"]||"A1"),x=i["!merges"]||[],v=0,_=Array.isArray(i);if(i["!cols"])for(p=0;p<=m.e.c;++p)d.push("        <table:table-column"+(i["!cols"][p]?' table:style-name="co'+i["!cols"][p].ods+'"':"")+`></table:table-column>
`);var w="",E=i["!rows"]||[];for(h=0;h<m.s.r;++h)w=E[h]?' table:style-name="ro'+E[h].ods+'"':"",d.push("        <table:table-row"+w+`></table:table-row>
`);for(;h<=m.e.r;++h){for(w=E[h]?' table:style-name="ro'+E[h].ods+'"':"",d.push("        <table:table-row"+w+`>
`),p=0;p<m.s.c;++p)d.push(e);for(;p<=m.e.c;++p){var R=!1,C={},V="";for(v=0;v!=x.length;++v)if(!(x[v].s.c>p)&&!(x[v].s.r>h)&&!(x[v].e.c<p)&&!(x[v].e.r<h)){(x[v].s.c!=p||x[v].s.r!=h)&&(R=!0),C["table:number-columns-spanned"]=x[v].e.c-x[v].s.c+1,C["table:number-rows-spanned"]=x[v].e.r-x[v].s.r+1;break}if(R){d.push(t);continue}var L=Tr({r:h,c:p}),K=_?(i[h]||[])[p]:i[L];if(K&&K.f&&(C["table:formula"]=_r(dJ(K.f)),K.F&&K.F.slice(0,L.length)==L)){var H=ei(K.F);C["table:number-matrix-columns-spanned"]=H.e.c-H.s.c+1,C["table:number-matrix-rows-spanned"]=H.e.r-H.s.r+1}if(!K){d.push(e);continue}switch(K.t){case"b":V=K.v?"TRUE":"FALSE",C["office:value-type"]="boolean",C["office:boolean-value"]=K.v?"true":"false";break;case"n":V=K.w||String(K.v||0),C["office:value-type"]="float",C["office:value"]=K.v||0;break;case"s":case"str":V=K.v==null?"":K.v,C["office:value-type"]="string";break;case"d":V=K.w||xs(K.v).toISOString(),C["office:value-type"]="date",C["office:date-value"]=xs(K.v).toISOString(),C["table:style-name"]="ce1";break;default:d.push(e);continue}var S=r(V);if(K.l&&K.l.Target){var k=K.l.Target;k=k.charAt(0)=="#"?"#"+hJ(k.slice(1)):k,k.charAt(0)!="#"&&!k.match(/^\w+:/)&&(k="../"+k),S=rt("text:a",S,{"xlink:href":k.replace(/&/g,"&amp;")})}d.push("          "+rt("table:table-cell",rt("text:p",S,{}),C)+`
`)}d.push(`        </table:table-row>
`)}return d.push(`      </table:table>
`),d.join("")},s=function(i,a){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var c=0;a.SheetNames.map(function(h){return a.Sheets[h]}).forEach(function(h){if(h&&h["!cols"]){for(var p=0;p<h["!cols"].length;++p)if(h["!cols"][p]){var m=h["!cols"][p];if(m.width==null&&m.wpx==null&&m.wch==null)continue;ww(m),m.ods=c;var x=h["!cols"][p].wpx+"px";i.push('  <style:style style:name="co'+c+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+x+`"/>
`),i.push(`  </style:style>
`),++c}}});var d=0;a.SheetNames.map(function(h){return a.Sheets[h]}).forEach(function(h){if(h&&h["!rows"]){for(var p=0;p<h["!rows"].length;++p)if(h["!rows"][p]){h["!rows"][p].ods=d;var m=h["!rows"][p].hpx+"px";i.push('  <style:style style:name="ro'+d+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+m+`"/>
`),i.push(`  </style:style>
`),++d}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(a,c){var d=[fn],h=Ph({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),p=Ph({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});c.bookType=="fods"?(d.push("<office:document"+h+p+`>
`),d.push(qI().replace(/office:document-meta/g,"office:meta"))):d.push("<office:document-content"+h+`>
`),s(d,a),d.push(`  <office:body>
`),d.push(`    <office:spreadsheet>
`);for(var m=0;m!=a.SheetNames.length;++m)d.push(n(a.Sheets[a.SheetNames[m]],a,m));return d.push(`    </office:spreadsheet>
`),d.push(`  </office:body>
`),c.bookType=="fods"?d.push("</office:document>"):d.push("</office:document-content>"),d.join("")}})();function jP(r,e){if(e.bookType=="fods")return dk(r,e);var t=uw(),n="",s=[],i=[];return n="mimetype",qt(t,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",qt(t,n,dk(r,e)),s.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",qt(t,n,Wee(r,e)),s.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",qt(t,n,fn+qI()),s.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",qt(t,n,nY(i)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",qt(t,n,tY(s)),t}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function xg(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function qee(r){return typeof TextEncoder<"u"?new TextEncoder().encode(r):Oi(Ih(r))}function Gee(r,e){e:for(var t=0;t<=r.length-e.length;++t){for(var n=0;n<e.length;++n)if(r[t+n]!=e[n])continue e;return!0}return!1}function fl(r){var e=r.reduce(function(s,i){return s+i.length},0),t=new Uint8Array(e),n=0;return r.forEach(function(s){t.set(s,n),n+=s.length}),t}function Kee(r,e,t){var n=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,s=t/Math.pow(10,n-6176);r[e+15]|=n>>7,r[e+14]|=(n&127)<<1;for(var i=0;s>=1;++i,s/=256)r[e+i]=s&255;r[e+15]|=t>=0?0:128}function jh(r,e){var t=e?e[0]:0,n=r[t]&127;e:if(r[t++]>=128&&(n|=(r[t]&127)<<7,r[t++]<128||(n|=(r[t]&127)<<14,r[t++]<128)||(n|=(r[t]&127)<<21,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,28),++t,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,35),++t,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,42),++t,r[t++]<128)))break e;return e&&(e[0]=t),n}function yr(r){var e=new Uint8Array(7);e[0]=r&127;var t=1;e:if(r>127){if(e[t-1]|=128,e[t]=r>>7&127,++t,r<=16383||(e[t-1]|=128,e[t]=r>>14&127,++t,r<=2097151)||(e[t-1]|=128,e[t]=r>>21&127,++t,r<=268435455)||(e[t-1]|=128,e[t]=r/256>>>21&127,++t,r<=34359738367)||(e[t-1]|=128,e[t]=r/65536>>>21&127,++t,r<=4398046511103))break e;e[t-1]|=128,e[t]=r/16777216>>>21&127,++t}return e.slice(0,t)}function Qu(r){var e=0,t=r[e]&127;e:if(r[e++]>=128){if(t|=(r[e]&127)<<7,r[e++]<128||(t|=(r[e]&127)<<14,r[e++]<128)||(t|=(r[e]&127)<<21,r[e++]<128))break e;t|=(r[e]&127)<<28}return t}function yn(r){for(var e=[],t=[0];t[0]<r.length;){var n=t[0],s=jh(r,t),i=s&7;s=Math.floor(s/8);var a=0,c;if(s==0)break;switch(i){case 0:{for(var d=t[0];r[t[0]++]>=128;);c=r.slice(d,t[0])}break;case 5:a=4,c=r.slice(t[0],t[0]+a),t[0]+=a;break;case 1:a=8,c=r.slice(t[0],t[0]+a),t[0]+=a;break;case 2:a=jh(r,t),c=r.slice(t[0],t[0]+a),t[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var h={data:c,type:i};e[s]==null?e[s]=[h]:e[s].push(h)}return e}function Mn(r){var e=[];return r.forEach(function(t,n){t.forEach(function(s){s.data&&(e.push(yr(n*8+s.type)),s.type==2&&e.push(yr(s.data.length)),e.push(s.data))})}),fl(e)}function Pi(r){for(var e,t=[],n=[0];n[0]<r.length;){var s=jh(r,n),i=yn(r.slice(n[0],n[0]+s));n[0]+=s;var a={id:Qu(i[1][0].data),messages:[]};i[2].forEach(function(c){var d=yn(c.data),h=Qu(d[3][0].data);a.messages.push({meta:d,data:r.slice(n[0],n[0]+h)}),n[0]+=h}),(e=i[3])!=null&&e[0]&&(a.merge=Qu(i[3][0].data)>>>0>0),t.push(a)}return t}function Su(r){var e=[];return r.forEach(function(t){var n=[];n[1]=[{data:yr(t.id),type:0}],n[2]=[],t.merge!=null&&(n[3]=[{data:yr(+!!t.merge),type:0}]);var s=[];t.messages.forEach(function(a){s.push(a.data),a.meta[3]=[{type:0,data:yr(a.data.length)}],n[2].push({data:Mn(a.meta),type:2})});var i=Mn(n);e.push(yr(i.length)),e.push(i),s.forEach(function(a){return e.push(a)})}),fl(e)}function Yee(r,e){if(r!=0)throw new Error("Unexpected Snappy chunk type ".concat(r));for(var t=[0],n=jh(e,t),s=[];t[0]<e.length;){var i=e[t[0]]&3;if(i==0){var a=e[t[0]++]>>2;if(a<60)++a;else{var c=a-59;a=e[t[0]],c>1&&(a|=e[t[0]+1]<<8),c>2&&(a|=e[t[0]+2]<<16),c>3&&(a|=e[t[0]+3]<<24),a>>>=0,a++,t[0]+=c}s.push(e.slice(t[0],t[0]+a)),t[0]+=a;continue}else{var d=0,h=0;if(i==1?(h=(e[t[0]]>>2&7)+4,d=(e[t[0]++]&224)<<3,d|=e[t[0]++]):(h=(e[t[0]++]>>2)+1,i==2?(d=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(d=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),s=[fl(s)],d==0)throw new Error("Invalid offset 0");if(d>s[0].length)throw new Error("Invalid offset beyond length");if(h>=d)for(s.push(s[0].slice(-d)),h-=d;h>=s[s.length-1].length;)s.push(s[s.length-1]),h-=s[s.length-1].length;s.push(s[0].slice(-d,-d+h))}}var p=fl(s);if(p.length!=n)throw new Error("Unexpected length: ".concat(p.length," != ").concat(n));return p}function ji(r){for(var e=[],t=0;t<r.length;){var n=r[t++],s=r[t]|r[t+1]<<8|r[t+2]<<16;t+=3,e.push(Yee(n,r.slice(t,t+s))),t+=s}if(t!==r.length)throw new Error("data is not a valid framed stream!");return fl(e)}function Cu(r){for(var e=[],t=0;t<r.length;){var n=Math.min(r.length-t,268435455),s=new Uint8Array(4);e.push(s);var i=yr(n),a=i.length;e.push(i),n<=60?(a++,e.push(new Uint8Array([n-1<<2]))):n<=256?(a+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(a+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(a+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(a+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(r.slice(t,t+n)),a+=n,s[0]=0,s[1]=a&255,s[2]=a>>8&255,s[3]=a>>16&255,t+=n}return fl(e)}function Cv(r,e){var t=new Uint8Array(32),n=xg(t),s=12,i=0;switch(t[0]=5,r.t){case"n":t[1]=2,Kee(t,s,r.v),i|=1,s+=16;break;case"b":t[1]=6,n.setFloat64(s,r.v?1:0,!0),i|=2,s+=8;break;case"s":if(e.indexOf(r.v)==-1)throw new Error("Value ".concat(r.v," missing from SST!"));t[1]=3,n.setUint32(s,e.indexOf(r.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+r.t}return n.setUint32(8,i,!0),t.slice(0,s)}function Iv(r,e){var t=new Uint8Array(32),n=xg(t),s=12,i=0;switch(t[0]=3,r.t){case"n":t[2]=2,n.setFloat64(s,r.v,!0),i|=32,s+=8;break;case"b":t[2]=6,n.setFloat64(s,r.v?1:0,!0),i|=32,s+=8;break;case"s":if(e.indexOf(r.v)==-1)throw new Error("Value ".concat(r.v," missing from SST!"));t[2]=3,n.setUint32(s,e.indexOf(r.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+r.t}return n.setUint32(4,i,!0),t.slice(0,s)}function Bo(r){var e=yn(r);return jh(e[1][0].data)}function Xee(r,e,t){var n,s,i,a;if(!((n=r[6])!=null&&n[0])||!((s=r[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var c=((a=(i=r[8])==null?void 0:i[0])==null?void 0:a.data)&&Qu(r[8][0].data)>0||!1;if(c)throw"Math only works with normal offsets";for(var d=0,h=xg(r[7][0].data),p=0,m=[],x=xg(r[4][0].data),v=0,_=[],w=0;w<e.length;++w){if(e[w]==null){h.setUint16(w*2,65535,!0),x.setUint16(w*2,65535);continue}h.setUint16(w*2,p,!0),x.setUint16(w*2,v,!0);var E,R;switch(typeof e[w]){case"string":E=Cv({t:"s",v:e[w]},t),R=Iv({t:"s",v:e[w]},t);break;case"number":E=Cv({t:"n",v:e[w]},t),R=Iv({t:"n",v:e[w]},t);break;case"boolean":E=Cv({t:"b",v:e[w]},t),R=Iv({t:"b",v:e[w]},t);break;default:throw new Error("Unsupported value "+e[w])}m.push(E),p+=E.length,_.push(R),v+=R.length,++d}for(r[2][0].data=yr(d);w<r[7][0].data.length/2;++w)h.setUint16(w*2,65535,!0),x.setUint16(w*2,65535,!0);return r[6][0].data=fl(m),r[3][0].data=fl(_),d}function Qee(r,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=r.Sheets[r.SheetNames[0]];r.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=ei(t["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(dn(n)));var i=yg(t,{range:n,header:1}),a=["~Sh33tJ5~"];i.forEach(function(oe){return oe.forEach(function(ie){typeof ie=="string"&&a.push(ie)})});var c={},d=[],h=Ar.read(e.numbers,{type:"base64"});h.FileIndex.map(function(oe,ie){return[oe,h.FullPaths[ie]]}).forEach(function(oe){var ie=oe[0],ne=oe[1];if(ie.type==2&&ie.name.match(/\.iwa/)){var z=ie.content,_e=ji(z),De=Pi(_e);De.forEach(function(Se){d.push(Se.id),c[Se.id]={deps:[],location:ne,type:Qu(Se.messages[0].meta[1][0].data)}})}}),d.sort(function(oe,ie){return oe-ie});var p=d.filter(function(oe){return oe>1}).map(function(oe){return[oe,yr(oe)]});h.FileIndex.map(function(oe,ie){return[oe,h.FullPaths[ie]]}).forEach(function(oe){var ie=oe[0];if(oe[1],!!ie.name.match(/\.iwa/)){var ne=Pi(ji(ie.content));ne.forEach(function(z){z.messages.forEach(function(_e){p.forEach(function(De){z.messages.some(function(Se){return Qu(Se.meta[1][0].data)!=11006&&Gee(Se.data,De[1])})&&c[De[0]].deps.push(z.id)})})})}});for(var m=Ar.find(h,c[1].location),x=Pi(ji(m.content)),v,_=0;_<x.length;++_){var w=x[_];w.id==1&&(v=w)}var E=Bo(yn(v.messages[0].data)[1][0].data);for(m=Ar.find(h,c[E].location),x=Pi(ji(m.content)),_=0;_<x.length;++_)w=x[_],w.id==E&&(v=w);for(E=Bo(yn(v.messages[0].data)[2][0].data),m=Ar.find(h,c[E].location),x=Pi(ji(m.content)),_=0;_<x.length;++_)w=x[_],w.id==E&&(v=w);for(E=Bo(yn(v.messages[0].data)[2][0].data),m=Ar.find(h,c[E].location),x=Pi(ji(m.content)),_=0;_<x.length;++_)w=x[_],w.id==E&&(v=w);var R=yn(v.messages[0].data);{R[6][0].data=yr(n.e.r+1),R[7][0].data=yr(n.e.c+1);var C=Bo(R[46][0].data),V=Ar.find(h,c[C].location),L=Pi(ji(V.content));{for(var K=0;K<L.length&&L[K].id!=C;++K);if(L[K].id!=C)throw"Bad ColumnRowUIDMapArchive";var H=yn(L[K].messages[0].data);H[1]=[],H[2]=[],H[3]=[];for(var S=0;S<=n.e.c;++S){var k=[];k[1]=k[2]=[{type:0,data:yr(S+420690)}],H[1].push({type:2,data:Mn(k)}),H[2].push({type:0,data:yr(S)}),H[3].push({type:0,data:yr(S)})}H[4]=[],H[5]=[],H[6]=[];for(var P=0;P<=n.e.r;++P)k=[],k[1]=k[2]=[{type:0,data:yr(P+726270)}],H[4].push({type:2,data:Mn(k)}),H[5].push({type:0,data:yr(P)}),H[6].push({type:0,data:yr(P)});L[K].messages[0].data=Mn(H)}V.content=Cu(Su(L)),V.size=V.content.length,delete R[46];var j=yn(R[4][0].data);{j[7][0].data=yr(n.e.r+1);var M=yn(j[1][0].data),D=Bo(M[2][0].data);V=Ar.find(h,c[D].location),L=Pi(ji(V.content));{if(L[0].id!=D)throw"Bad HeaderStorageBucket";var O=yn(L[0].messages[0].data);for(P=0;P<i.length;++P){var pe=yn(O[2][0].data);pe[1][0].data=yr(P),pe[4][0].data=yr(i[P].length),O[2][P]={type:O[2][0].type,data:Mn(pe)}}L[0].messages[0].data=Mn(O)}V.content=Cu(Su(L)),V.size=V.content.length;var Ae=Bo(j[2][0].data);V=Ar.find(h,c[Ae].location),L=Pi(ji(V.content));{if(L[0].id!=Ae)throw"Bad HeaderStorageBucket";for(O=yn(L[0].messages[0].data),S=0;S<=n.e.c;++S)pe=yn(O[2][0].data),pe[1][0].data=yr(S),pe[4][0].data=yr(n.e.r+1),O[2][S]={type:O[2][0].type,data:Mn(pe)};L[0].messages[0].data=Mn(O)}V.content=Cu(Su(L)),V.size=V.content.length;var Fe=Bo(j[4][0].data);(function(){for(var oe=Ar.find(h,c[Fe].location),ie=Pi(ji(oe.content)),ne,z=0;z<ie.length;++z){var _e=ie[z];_e.id==Fe&&(ne=_e)}var De=yn(ne.messages[0].data);{De[3]=[];var Se=[];a.forEach(function(ft,zt){Se[1]=[{type:0,data:yr(zt)}],Se[2]=[{type:0,data:yr(1)}],Se[3]=[{type:2,data:qee(ft)}],De[3].push({type:2,data:Mn(Se)})})}ne.messages[0].data=Mn(De);var we=Su(ie),Qe=Cu(we);oe.content=Qe,oe.size=oe.content.length})();var Me=yn(j[3][0].data);{var Ee=Me[1][0];delete Me[2];var Te=yn(Ee.data);{var Ne=Bo(Te[2][0].data);(function(){for(var oe=Ar.find(h,c[Ne].location),ie=Pi(ji(oe.content)),ne,z=0;z<ie.length;++z){var _e=ie[z];_e.id==Ne&&(ne=_e)}var De=yn(ne.messages[0].data);{delete De[6],delete Me[7];var Se=new Uint8Array(De[5][0].data);De[5]=[];for(var we=0,Qe=0;Qe<=n.e.r;++Qe){var ft=yn(Se);we+=Xee(ft,i[Qe],a),ft[1][0].data=yr(Qe),De[5].push({data:Mn(ft),type:2})}De[1]=[{type:0,data:yr(n.e.c+1)}],De[2]=[{type:0,data:yr(n.e.r+1)}],De[3]=[{type:0,data:yr(we)}],De[4]=[{type:0,data:yr(n.e.r+1)}]}ne.messages[0].data=Mn(De);var zt=Su(ie),wt=Cu(zt);oe.content=wt,oe.size=oe.content.length})()}Ee.data=Mn(Te)}j[3][0].data=Mn(Me)}R[4][0].data=Mn(j)}v.messages[0].data=Mn(R);var ae=Su(x),W=Cu(ae);return m.content=W,m.size=m.content.length,h}function Jee(r){return function(t){for(var n=0;n!=r.length;++n){var s=r[n];t[s[0]]===void 0&&(t[s[0]]=s[1]),s[2]==="n"&&(t[s[0]]=Number(t[s[0]]))}}}function Nw(r){Jee([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(r)}function Zee(r,e){return e.bookType=="ods"?jP(r,e):e.bookType=="numbers"?Qee(r,e):e.bookType=="xlsb"?ete(r,e):tte(r,e)}function ete(r,e){zu=1024,r&&!r.SSF&&(r.SSF=Fs(en)),r&&r.SSF&&(ax(),ix(r.SSF),e.revssf=ox(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Z0?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",n=pP.indexOf(e.bookType)>-1,s=zI();Nw(e=e||{});var i=uw(),a="",c=0;if(e.cellXfs=[],bl(e.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),a="docProps/core.xml",qt(i,a,GI(r.Props,e)),s.coreprops.push(a),vr(e.rels,2,a,or.CORE_PROPS),a="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var d=[],h=0;h<r.SheetNames.length;++h)(r.Workbook.Sheets[h]||{}).Hidden!=2&&d.push(r.SheetNames[h]);r.Props.SheetNames=d}for(r.Props.Worksheets=r.Props.SheetNames.length,qt(i,a,YI(r.Props)),s.extprops.push(a),vr(e.rels,3,a,or.EXT_PROPS),r.Custprops!==r.Props&&Gn(r.Custprops||{}).length>0&&(a="docProps/custom.xml",qt(i,a,XI(r.Custprops)),s.custprops.push(a),vr(e.rels,4,a,or.CUST_PROPS)),c=1;c<=r.SheetNames.length;++c){var p={"!id":{}},m=r.Sheets[r.SheetNames[c-1]],x=(m||{})["!type"]||"sheet";switch(x){case"chart":default:a="xl/worksheets/sheet"+c+"."+t,qt(i,a,nee(c-1,a,e,r,p)),s.sheets.push(a),vr(e.wbrels,-1,"worksheets/sheet"+c+"."+t,or.WS[0])}if(m){var v=m["!comments"],_=!1,w="";v&&v.length>0&&(w="xl/comments"+c+"."+t,qt(i,w,aee(v,w)),s.comments.push(w),vr(p,-1,"../comments"+c+"."+t,or.CMNT),_=!0),m["!legacy"]&&_&&qt(i,"xl/drawings/vmlDrawing"+c+".vml",hP(c,m["!comments"])),delete m["!comments"],delete m["!legacy"]}p["!id"].rId1&&qt(i,WI(a),Yu(p))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,qt(i,a,iee(e.Strings,a,e)),s.strs.push(a),vr(e.wbrels,-1,"sharedStrings."+t,or.SST)),a="xl/workbook."+t,qt(i,a,ree(r,a)),s.workbooks.push(a),vr(e.rels,1,a,or.WB),a="xl/theme/theme1.xml",qt(i,a,uP(r.Themes,e)),s.themes.push(a),vr(e.wbrels,-1,"theme/theme1.xml",or.THEME),a="xl/styles."+t,qt(i,a,see(r,a,e)),s.styles.push(a),vr(e.wbrels,-1,"styles."+t,or.STY),r.vbaraw&&n&&(a="xl/vbaProject.bin",qt(i,a,r.vbaraw),s.vba.push(a),vr(e.wbrels,-1,"vbaProject.bin",or.VBA)),a="xl/metadata."+t,qt(i,a,oee(a)),s.metadata.push(a),vr(e.wbrels,-1,"metadata."+t,or.XLMETA),qt(i,"[Content_Types].xml",HI(s,e)),qt(i,"_rels/.rels",Yu(e.rels)),qt(i,"xl/_rels/workbook."+t+".rels",Yu(e.wbrels)),delete e.revssf,delete e.ssf,i}function tte(r,e){zu=1024,r&&!r.SSF&&(r.SSF=Fs(en)),r&&r.SSF&&(ax(),ix(r.SSF),e.revssf=ox(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Z0?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",n=pP.indexOf(e.bookType)>-1,s=zI();Nw(e=e||{});var i=uw(),a="",c=0;if(e.cellXfs=[],bl(e.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),a="docProps/core.xml",qt(i,a,GI(r.Props,e)),s.coreprops.push(a),vr(e.rels,2,a,or.CORE_PROPS),a="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var d=[],h=0;h<r.SheetNames.length;++h)(r.Workbook.Sheets[h]||{}).Hidden!=2&&d.push(r.SheetNames[h]);r.Props.SheetNames=d}r.Props.Worksheets=r.Props.SheetNames.length,qt(i,a,YI(r.Props)),s.extprops.push(a),vr(e.rels,3,a,or.EXT_PROPS),r.Custprops!==r.Props&&Gn(r.Custprops||{}).length>0&&(a="docProps/custom.xml",qt(i,a,XI(r.Custprops)),s.custprops.push(a),vr(e.rels,4,a,or.CUST_PROPS));var p=["SheetJ5"];for(e.tcid=0,c=1;c<=r.SheetNames.length;++c){var m={"!id":{}},x=r.Sheets[r.SheetNames[c-1]],v=(x||{})["!type"]||"sheet";switch(v){case"chart":default:a="xl/worksheets/sheet"+c+"."+t,qt(i,a,EP(c-1,e,r,m)),s.sheets.push(a),vr(e.wbrels,-1,"worksheets/sheet"+c+"."+t,or.WS[0])}if(x){var _=x["!comments"],w=!1,E="";if(_&&_.length>0){var R=!1;_.forEach(function(C){C[1].forEach(function(V){V.T==!0&&(R=!0)})}),R&&(E="xl/threadedComments/threadedComment"+c+"."+t,qt(i,E,jX(_,p,e)),s.threadedcomments.push(E),vr(m,-1,"../threadedComments/threadedComment"+c+"."+t,or.TCMNT)),E="xl/comments"+c+"."+t,qt(i,E,fP(_)),s.comments.push(E),vr(m,-1,"../comments"+c+"."+t,or.CMNT),w=!0}x["!legacy"]&&w&&qt(i,"xl/drawings/vmlDrawing"+c+".vml",hP(c,x["!comments"])),delete x["!comments"],delete x["!legacy"]}m["!id"].rId1&&qt(i,WI(a),Yu(m))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,qt(i,a,sP(e.Strings,e)),s.strs.push(a),vr(e.wbrels,-1,"sharedStrings."+t,or.SST)),a="xl/workbook."+t,qt(i,a,NP(r)),s.workbooks.push(a),vr(e.rels,1,a,or.WB),a="xl/theme/theme1.xml",qt(i,a,uP(r.Themes,e)),s.themes.push(a),vr(e.wbrels,-1,"theme/theme1.xml",or.THEME),a="xl/styles."+t,qt(i,a,lP(r,e)),s.styles.push(a),vr(e.wbrels,-1,"styles."+t,or.STY),r.vbaraw&&n&&(a="xl/vbaProject.bin",qt(i,a,r.vbaraw),s.vba.push(a),vr(e.wbrels,-1,"vbaProject.bin",or.VBA)),a="xl/metadata."+t,qt(i,a,dP()),s.metadata.push(a),vr(e.wbrels,-1,"metadata."+t,or.XLMETA),p.length>1&&(a="xl/persons/person.xml",qt(i,a,RX(p)),s.people.push(a),vr(e.wbrels,-1,"persons/person.xml",or.PEOPLE)),qt(i,"[Content_Types].xml",HI(s,e)),qt(i,"_rels/.rels",Yu(e.rels)),qt(i,"xl/_rels/workbook."+t+".rels",Yu(e.wbrels)),delete e.revssf,delete e.ssf,i}function rte(r,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];case"base64":t=io(r.slice(0,12));break;case"binary":t=r;break;case"array":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function RP(r,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return hf(e.file,Ar.write(r,{type:pr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Ar.write(r,e)}function nte(r,e){var t=Fs(e||{}),n=Zee(r,t);return ste(n,t)}function ste(r,e){var t={},n=pr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=n;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var s=r.FullPaths?Ar.write(r,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):r.generate(t);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(sx(s))}return e.password&&typeof encrypt_agile<"u"?RP(encrypt_agile(s,e.password),e):e.type==="file"?hf(e.file,s):e.type=="string"?Y0(s):s}function ite(r,e){var t=e||{},n=wee(r,t);return RP(n,t)}function aa(r,e,t){t||(t="");var n=t+r;switch(e.type){case"base64":return Sh(Ih(n));case"binary":return Ih(n);case"string":return r;case"file":return hf(e.file,n,"utf8");case"buffer":return pr?ho(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):aa(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function ate(r,e){switch(e.type){case"base64":return Sh(r);case"binary":return r;case"string":return r;case"file":return hf(e.file,r,"binary");case"buffer":return pr?ho(r,"binary"):r.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Wp(r,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",n=0;n<r.length;++n)t+=String.fromCharCode(r[n]);return e.type=="base64"?Sh(t):e.type=="string"?Y0(t):t;case"file":return hf(e.file,r);case"buffer":return r;default:throw new Error("Unrecognized type "+e.type)}}function DP(r,e){DG(),WZ(r);var t=Fs(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var n=DP(r,t);return t.type="array",sx(n)}var s=0;if(t.sheet&&(typeof t.sheet=="number"?s=t.sheet:s=r.SheetNames.indexOf(t.sheet),!r.SheetNames[s]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return aa(vee(r,t),t);case"slk":case"sylk":return aa(UY.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"htm":case"html":return aa(CP(r.Sheets[r.SheetNames[s]],t),t);case"txt":return ate(FP(r.Sheets[r.SheetNames[s]],t),t);case"csv":return aa(kw(r.Sheets[r.SheetNames[s]],t),t,"\uFEFF");case"dif":return aa(zY.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"dbf":return Wp(BY.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"prn":return aa(HY.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"rtf":return aa(QY.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"eth":return aa(nP.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"fods":return aa(jP(r,t),t);case"wk1":return Wp(sk.sheet_to_wk1(r.Sheets[r.SheetNames[s]],t),t);case"wk3":return Wp(sk.book_to_wk3(r,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),Wp(SP(r,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),ite(r,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return nte(r,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function ote(r){if(!r.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=r.file.slice(r.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(r.bookType=t.slice(1)),r.bookType=e[r.bookType]||r.bookType}}function hx(r,e,t){var n={};return n.type="file",n.file=e,ote(n),DP(r,n)}function lte(r,e,t,n,s,i,a,c){var d=qn(t),h=c.defval,p=c.raw||!Object.prototype.hasOwnProperty.call(c,"raw"),m=!0,x=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(x,"__rowNum__",{value:t,enumerable:!1})}catch{x.__rowNum__=t}else x.__rowNum__=t;if(!a||r[t])for(var v=e.s.c;v<=e.e.c;++v){var _=a?r[t][v]:r[n[v]+d];if(_===void 0||_.t===void 0){if(h===void 0)continue;i[v]!=null&&(x[i[v]]=h);continue}var w=_.v;switch(_.t){case"z":if(w==null)break;continue;case"e":w=w==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+_.t)}if(i[v]!=null){if(w==null)if(_.t=="e"&&w===null)x[i[v]]=null;else if(h!==void 0)x[i[v]]=h;else if(p&&w===null)x[i[v]]=null;else continue;else x[i[v]]=p&&(_.t!=="n"||_.t==="n"&&c.rawNumbers!==!1)?w:ao(_,w,c);w!=null&&(m=!1)}}return{row:x,isempty:m}}function yg(r,e){if(r==null||r["!ref"]==null)return[];var t={t:"n",v:0},n=0,s=1,i=[],a=0,c="",d={s:{r:0,c:0},e:{r:0,c:0}},h=e||{},p=h.range!=null?h.range:r["!ref"];switch(h.header===1?n=1:h.header==="A"?n=2:Array.isArray(h.header)?n=3:h.header==null&&(n=0),typeof p){case"string":d=Dr(p);break;case"number":d=Dr(r["!ref"]),d.s.r=p;break;default:d=p}n>0&&(s=0);var m=qn(d.s.r),x=[],v=[],_=0,w=0,E=Array.isArray(r),R=d.s.r,C=0,V={};E&&!r[R]&&(r[R]=[]);var L=h.skipHidden&&r["!cols"]||[],K=h.skipHidden&&r["!rows"]||[];for(C=d.s.c;C<=d.e.c;++C)if(!(L[C]||{}).hidden)switch(x[C]=as(C),t=E?r[R][C]:r[x[C]+m],n){case 1:i[C]=C-d.s.c;break;case 2:i[C]=x[C];break;case 3:i[C]=h.header[C-d.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),c=a=ao(t,null,h),w=V[a]||0,!w)V[a]=1;else{do c=a+"_"+w++;while(V[c]);V[a]=w,V[c]=1}i[C]=c}for(R=d.s.r+s;R<=d.e.r;++R)if(!(K[R]||{}).hidden){var H=lte(r,d,R,x,n,i,E,h);(H.isempty===!1||(n===1?h.blankrows!==!1:h.blankrows))&&(v[_++]=H.row)}return v.length=_,v}var hk=/"/g;function cte(r,e,t,n,s,i,a,c){for(var d=!0,h=[],p="",m=qn(t),x=e.s.c;x<=e.e.c;++x)if(n[x]){var v=c.dense?(r[t]||[])[x]:r[n[x]+m];if(v==null)p="";else if(v.v!=null){d=!1,p=""+(c.rawNumbers&&v.t=="n"?v.v:ao(v,null,c));for(var _=0,w=0;_!==p.length;++_)if((w=p.charCodeAt(_))===s||w===i||w===34||c.forceQuotes){p='"'+p.replace(hk,'""')+'"';break}p=="ID"&&(p='"ID"')}else v.f!=null&&!v.F?(d=!1,p="="+v.f,p.indexOf(",")>=0&&(p='"'+p.replace(hk,'""')+'"')):p="";h.push(p)}return c.blankrows===!1&&d?null:h.join(a)}function kw(r,e){var t=[],n=e??{};if(r==null||r["!ref"]==null)return"";var s=Dr(r["!ref"]),i=n.FS!==void 0?n.FS:",",a=i.charCodeAt(0),c=n.RS!==void 0?n.RS:`
`,d=c.charCodeAt(0),h=new RegExp((i=="|"?"\\|":i)+"+$"),p="",m=[];n.dense=Array.isArray(r);for(var x=n.skipHidden&&r["!cols"]||[],v=n.skipHidden&&r["!rows"]||[],_=s.s.c;_<=s.e.c;++_)(x[_]||{}).hidden||(m[_]=as(_));for(var w=0,E=s.s.r;E<=s.e.r;++E)(v[E]||{}).hidden||(p=cte(r,s,E,m,a,d,i,n),p!=null&&(n.strip&&(p=p.replace(h,"")),(p||n.blankrows!==!1)&&t.push((w++?c:"")+p)));return delete n.dense,t.join("")}function FP(r,e){e||(e={}),e.FS="	",e.RS=`
`;var t=kw(r,e);return t}function ute(r){var e="",t,n="";if(r==null||r["!ref"]==null)return[];var s=Dr(r["!ref"]),i="",a=[],c,d=[],h=Array.isArray(r);for(c=s.s.c;c<=s.e.c;++c)a[c]=as(c);for(var p=s.s.r;p<=s.e.r;++p)for(i=qn(p),c=s.s.c;c<=s.e.c;++c)if(e=a[c]+i,t=h?(r[p]||[])[c]:r[e],n="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;n=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)n=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)n=""+t.v;else if(t.t=="b")n=t.v?"TRUE":"FALSE";else if(t.w!==void 0)n="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?n="'"+t.v:n=""+t.v}}d[d.length]=e+"="+n}return d}function OP(r,e,t){var n=t||{},s=+!n.skipHeader,i=r||{},a=0,c=0;if(i&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var d=typeof n.origin=="string"?In(n.origin):n.origin;a=d.r,c=d.c}var h,p={s:{c:0,r:0},e:{c,r:a+e.length-1+s}};if(i["!ref"]){var m=Dr(i["!ref"]);p.e.c=Math.max(p.e.c,m.e.c),p.e.r=Math.max(p.e.r,m.e.r),a==-1&&(a=m.e.r+1,p.e.r=a+e.length-1+s)}else a==-1&&(a=0,p.e.r=e.length-1+s);var x=n.header||[],v=0;e.forEach(function(w,E){Gn(w).forEach(function(R){(v=x.indexOf(R))==-1&&(x[v=x.length]=R);var C=w[R],V="z",L="",K=Tr({c:c+v,r:a+E+s});h=Rh(i,K),C&&typeof C=="object"&&!(C instanceof Date)?i[K]=C:(typeof C=="number"?V="n":typeof C=="boolean"?V="b":typeof C=="string"?V="s":C instanceof Date?(V="d",n.cellDates||(V="n",C=Ds(C)),L=n.dateNF||en[14]):C===null&&n.nullError&&(V="e",C=0),h?(h.t=V,h.v=C,delete h.w,delete h.R,L&&(h.z=L)):i[K]=h={t:V,v:C},L&&(h.z=L))})}),p.e.c=Math.max(p.e.c,c+x.length-1);var _=qn(a);if(s)for(v=0;v<x.length;++v)i[as(v+c)+_]={t:"s",v:x[v]};return i["!ref"]=dn(p),i}function dte(r,e){return OP(null,r,e)}function Rh(r,e,t){if(typeof e=="string"){if(Array.isArray(r)){var n=In(e);return r[n.r]||(r[n.r]=[]),r[n.r][n.c]||(r[n.r][n.c]={t:"z"})}return r[e]||(r[e]={t:"z"})}return typeof e!="number"?Rh(r,Tr(e)):Rh(r,Tr({r:e,c:t||0}))}function hte(r,e){if(typeof e=="number"){if(e>=0&&r.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=r.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function fte(){return{SheetNames:[],Sheets:{}}}function pte(r,e,t,n){var s=1;if(!t)for(;s<=65535&&r.SheetNames.indexOf(t="Sheet"+s)!=-1;++s,t=void 0);if(!t||r.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&r.SheetNames.indexOf(t)>=0){var i=t.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var a=i&&i[1]||t;for(++s;s<=65535&&r.SheetNames.indexOf(t=a+s)!=-1;++s);}if(AP(t),r.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return r.SheetNames.push(t),r.Sheets[t]=e,t}function mte(r,e,t){r.Workbook||(r.Workbook={}),r.Workbook.Sheets||(r.Workbook.Sheets=[]);var n=hte(r,e);switch(r.Workbook.Sheets[n]||(r.Workbook.Sheets[n]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}r.Workbook.Sheets[n].Hidden=t}function gte(r,e){return r.z=e,r}function LP(r,e,t){return e?(r.l={Target:e},t&&(r.l.Tooltip=t)):delete r.l,r}function xte(r,e,t){return LP(r,"#"+e,t)}function yte(r,e,t){r.c||(r.c=[]),r.c.push({t:e,a:t||"SheetJS"})}function vte(r,e,t,n){for(var s=typeof e!="string"?e:Dr(e),i=typeof e=="string"?e:dn(e),a=s.s.r;a<=s.e.r;++a)for(var c=s.s.c;c<=s.e.c;++c){var d=Rh(r,a,c);d.t="n",d.F=i,delete d.v,a==s.s.r&&c==s.s.c&&(d.f=t,n&&(d.D=!0))}return r}var gi={encode_col:as,encode_row:qn,encode_cell:Tr,encode_range:dn,decode_col:gw,decode_row:mw,split_cell:DK,decode_cell:In,decode_range:ei,format_cell:ao,sheet_add_aoa:LI,sheet_add_json:OP,sheet_add_dom:IP,aoa_to_sheet:Fd,json_to_sheet:dte,table_to_sheet:PP,table_to_book:zee,sheet_to_csv:kw,sheet_to_txt:FP,sheet_to_json:yg,sheet_to_html:CP,sheet_to_formulae:ute,sheet_to_row_object_array:yg,sheet_get_cell:Rh,book_new:fte,book_append_sheet:pte,book_set_sheet_visibility:mte,cell_set_number_format:gte,cell_set_hyperlink:LP,cell_set_internal_link:xte,cell_add_comment:yte,sheet_set_array_formula:vte,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const MP=({orders:r,setOrders:e,fetchOrders:t,searchQuery:n,setSearchQuery:s,formatDate:i,handleRenewal:a,actionLoading:c,balance:d,theme:h="dark"})=>{const[p,m]=A.useState(!1),[x,v]=A.useState(null),[_,w]=A.useState(""),[E,R]=A.useState(!1),[C,V]=A.useState(!1),[L,K]=A.useState(null),[H,S]=A.useState({key:null,direction:"asc"}),k=h==="dark",P={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},j={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:k?"#1F2937":"#F3F4F6",transition:{duration:.2},scale:1.005}},M={hidden:{opacity:0,scale:.95,y:20},visible:{opacity:1,scale:1,y:0,transition:{duration:.25,ease:"easeOut"}},exit:{opacity:0,scale:.95,y:20,transition:{duration:.15}}},D={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.2}},exit:{opacity:0,transition:{duration:.15}}},O=A.useMemo(()=>{let z=[...r].filter(_e=>(_e.productName||"").toLowerCase().includes(n.toLowerCase())||(_e.orderId||"").toLowerCase().includes(n.toLowerCase()));return H.key&&z.sort((_e,De)=>{let Se=_e[H.key]||"",we=De[H.key]||"";return typeof Se=="string"&&(Se=Se.toLowerCase()),typeof we=="string"&&(we=we.toLowerCase()),Se<we?H.direction==="asc"?-1:1:Se>we?H.direction==="asc"?1:-1:0}),z},[r,n,H]),pe=z=>{const _e={netflix:{bg:k?"bg-red-900/30":"bg-red-100",text:k?"text-red-300":"text-red-800"},disney:{bg:k?"bg-blue-900/30":"bg-blue-100",text:k?"text-blue-300":"text-blue-800"},max:{bg:k?"bg-yellow-900/30":"bg-yellow-100",text:k?"text-yellow-300":"text-yellow-800"},spotify:{bg:k?"bg-green-900/30":"bg-green-100",text:k?"text-green-300":"text-green-800"},default:{bg:k?"bg-gray-900/30":"bg-gray-100",text:k?"text-gray-300":"text-gray-700"}};return _e[z?.toLowerCase()]||_e.default},Ae=z=>({netflix:"Netflix",disney:"Disney+",max:"Max",spotify:"Spotify"})[z?.toLowerCase()]||z||"N/A",Fe=(z,_e)=>{const De=z.status||"pending",Se=new Date(z.endDate)>new Date;let we,Qe,ft;return De==="soporte"?(we="En soporte",Qe=_e?"text-blue-400":"text-blue-600",ft=o.jsx(Ka,{className:Qe,title:"En Soporte"})):De==="rechazado"?(we="No aplica soporte",Qe=_e?"text-amber-700":"text-amber-900",ft=o.jsx(Ys,{className:Qe,title:"No aplica soporte"})):De==="pending"?(we="Pendiente a activacion",Qe=_e?"text-yellow-400":"text-yellow-600",ft=o.jsx(Dc,{className:Qe,title:"Pendiente a activacion"})):Se?(we="Activo",Qe=_e?"text-green-400":"text-green-600",ft=o.jsx(vd,{className:Qe,title:"Activo"})):(we="Expirado",Qe=_e?"text-red-400":"text-red-600",ft=o.jsx(Ys,{className:Qe,title:"Expirado"})),{text:we,color:Qe,icon:ft}},Me=z=>{S(_e=>({key:z,direction:_e.key===z&&_e.direction==="asc"?"desc":"asc"}))},Ee=z=>H.key!==z?null:H.direction==="asc"?o.jsx(rx,{className:"ml-1"}):o.jsx(tx,{className:"ml-1"}),Te=()=>{const z=O.map(we=>{const Qe=parseFloat(we.price)||0,ft=parseFloat(we.renewalPrice)||Qe,zt=we.status||"pending",wt=zt==="pending",Yt=zt==="soporte",kt=zt==="rechazado",Oe=new Date(we.endDate)>new Date,Xt=Math.max(0,we.daysRemaining||0);let Rt;Yt?Rt="En soporte":kt?Rt="No aplica soporte":wt?Rt="Pendiente a activacion":Oe?Rt="Activo":Rt="Expirado";const He=Yt||kt||wt;let de;return He?de=Rt:de=`${Xt} da${Xt===1?"":"s"}`,{Estado:Rt,Producto:we.productName||"Sin nombre",Categora:Ae(we.category),"N Pedido":we.orderId||"N/A",Precio:`S/ ${Qe.toFixed(2)}`,"Precio Renovacin":ft!==Qe?`S/ ${ft.toFixed(2)}`:"N/A","Tiempo Restante":de,"Fecha de Inicio":i(we.startDate),"Fecha de Vencimiento":i(we.endDate),Email:we.account?.email||"N/A",Contrasea:we.account?.password||"N/A",Perfil:we.account?.profile||"N/A",PIN:we.account?.pin||"N/A",Proveedor:we.provider||"N/A",Nombre:we.client?.customerName||"N/A","Telfono Cliente":we.client?.phone||"N/A"}}),_e=gi.json_to_sheet(z),De=gi.book_new();gi.book_append_sheet(De,_e,"Pedidos");const Se=new Date().toISOString().slice(0,10).replace(/-/g,"");hx(De,`mis_pedidos_export_${Se}.xlsx`)},Ne=z=>{v(z),w(""),m(!0)},ae=()=>{m(!1),v(null),w(""),R(!1)},W=z=>{K(z),V(!0)},oe=()=>{V(!1),K(null)},ie=async()=>{L&&typeof a=="function"&&await a(L),oe()},ne=async()=>{if(!_.trim()){alert("El mensaje es obligatorio.");return}if(!x||!x.id){alert("Error: No se encontr el ID del pedido.");return}R(!0);try{await ba(ot(Pe,"sales",x.id),{status:"soporte",soporteMessage:_,soporteCreatedAt:new Date},{merge:!0}),console.log(`Documento actualizado exitosamente para order ID: ${x.id}`),typeof e=="function"&&e(z=>{const _e=z.map(Se=>String(Se.id)===String(x.id)?{...Se,status:"soporte",soporteMessage:_,soporteCreatedAt:new Date}:Se);console.log("Orders actualizados localmente:",_e);const De=_e.find(Se=>String(Se.id)===String(x.id));return console.log(`Mensaje agregado localmente para ${x.id}:`,De?.soporteMessage),_e}),typeof t=="function"&&setTimeout(async()=>{await t()},500),alert(`Soporte enviado para "${x.productName}". El pedido ahora est en estado "En soporte".`)}catch(z){console.error("Error detallado en sendSupport:",z),alert("Hubo un error al enviar a soporte. Verifica la consola del navegador para ms detalles. Asegrate de que el ID del pedido sea correcto y que tengas permisos en Firebase.")}finally{R(!1)}ae()};return o.jsxs(Z.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-7xl mx-auto border ${k?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:P,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"orders-title",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 gap-4",children:[o.jsxs("h3",{id:"orders-title",className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight flex items-center bg-clip-text text-transparent bg-gradient-to-r ${k?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,children:[o.jsx(xa,{className:"mr-2"})," Mis Pedidos",o.jsx("span",{className:`ml-2 bg-gradient-to-r ${k?"from-blue-400/20 to-purple-600/20":"from-blue-600/20 to-purple-800/20"} px-2 py-1 rounded-full text-sm font-medium`,children:O.length})]}),o.jsxs("div",{className:"flex items-center gap-4 w-full lg:w-auto",children:[o.jsxs("div",{className:"relative flex-1 lg:w-80",children:[o.jsx("input",{type:"text",placeholder:"Buscar pedidos por nombre o ID...",className:`w-full pl-10 pr-4 py-3 rounded-2xl shadow-md transition-all duration-300 ${k?"bg-gray-800/70 text-white border border-gray-600/50 placeholder-gray-400 focus:border-blue-500/50":"bg-white/70 text-gray-900 border border-gray-300/50 placeholder-gray-500 focus:border-blue-500/50"} focus:ring-2 focus:ring-blue-500/30 focus:outline-none`,value:n,onChange:z=>s(z.target.value),"aria-label":"Buscar pedidos por nombre o ID"}),o.jsx(xa,{className:`absolute left-3 top-3.5 ${k?"text-gray-400":"text-gray-500"}`,size:18})]}),o.jsxs(Z.button,{onClick:Te,className:`p-3 rounded-2xl shadow-lg flex items-center gap-2 ${k?"bg-green-600/80 hover:bg-green-700/90 text-white":"bg-green-500/80 hover:bg-green-600/90 text-white"} transition-all duration-300`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Descargar pedidos como Excel","aria-label":"Exportar pedidos a Excel",children:[o.jsx(nx,{size:18}),o.jsx("span",{className:"hidden sm:inline text-sm",children:"Exportar"})]})]})]}),o.jsx(Bt,{children:O.length>0?o.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:o.jsx("div",{className:"overflow-x-auto rounded-2xl border border-gray-200/50 shadow-lg",children:o.jsxs("table",{className:`min-w-full divide-y divide-gray-200/30 ${k?"bg-gray-800/50":"bg-white/50"}`,children:[o.jsx("thead",{className:`${k?"bg-gray-700/60":"bg-gray-50/60"}`,children:o.jsx("tr",{children:[{key:"status",label:"Estado"},{key:"productName",label:"Producto"},{key:"category",label:"Categora"},{key:"orderId",label:"N Pedido"},{key:"price",label:"Precio"},{key:"daysRemaining",label:"Tiempo Restante"},{key:"startDate",label:"Inicio"},{key:"endDate",label:"Vencimiento"},{key:"email",label:"Email"},{key:"password",label:"Contrasea"},{key:"profile",label:"Perfil"},{key:"pin",label:"PIN"},{key:"provider",label:"Proveedor"},{key:"customerName",label:"Nombre Cliente"},{key:"phone",label:"Telfono Cliente"},{label:"Acciones"}].map(({key:z,label:_e})=>o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${k?"text-gray-300":"text-gray-700"} cursor-pointer hover:text-blue-400 transition-colors`,onClick:()=>z&&Me(z),children:o.jsxs("div",{className:"flex items-center justify-between",children:[_e,z&&Ee(z)]})},z||_e))})}),o.jsx("tbody",{className:"divide-y divide-gray-200/30",children:O.map(z=>{const _e=parseFloat(z.price)||0,De=parseFloat(z.renewalPrice)||_e,Se=z.status||"pending",we=Se==="pending",Qe=Se==="soporte",ft=Se==="rechazado",zt=new Date(z.endDate)>new Date,wt=Math.max(0,z.daysRemaining||0),Yt=Math.min(z.timeElapsedPercentage||0,100),kt=Fe(z,k),Oe=pe(z.category);let Xt;Yt<70?Xt=k?"bg-green-500":"bg-green-600":Yt<90?Xt=k?"bg-orange-500":"bg-orange-600":Xt=k?"bg-red-500":"bg-red-600";const Rt=!["En soporte","No aplica soporte","Pendiente a activacion"].includes(kt.text),de=Qe||ft||we?kt.text:`${wt} da${wt===1?"":"s"}`,et=Rt?Xt.replace("bg-","text-"):kt.color,ct=kt.text,pt=encodeURIComponent(`*Consulta sobre Pedido - ${z.productName||"Sin nombre"}*

*N Pedido:* ${z.orderId||"No especificado"}
*Producto:* ${z.productName||"Sin nombre"}
*Precio:* S/ ${_e.toFixed(2)}
`+(De?`*Precio de Renovacin:* S/ ${De.toFixed(2)}
`:"")+`*Estado:* ${ct}
*Fecha de Inicio:* ${i(z.startDate)}
*Fecha de Vencimiento:* ${i(z.endDate)}
`+(we?`Hola , he comprado un producto a pedido (${z.productName}). En cuntos das estar listo? Por favor, indqueme los detalles para coordinar.`:"Por favor indqueme cmo puedo resolver mi consulta sobre este pedido.")),St=!(we||Qe||ft),ht=we?`*Nota:* Este pedido est "A pedido". El proveedor se contactar contigo para coordinar los detalles.

`:Qe?`*Nota:* Este pedido est "En Soporte". El proveedor lo est revisando.

`:ft?`*Nota:* Este pedido ha sido rechazado. No aplica soporte.

`:"",jt=encodeURIComponent(` Estimado/a ${z.client?.customerName||"Cliente"} 

Le enviamos la informacin de su suscripcin a nuestro servicio de streaming:
 Tipo: ${z.productName||"Sin nombre"}.
 Cdigo: ${z.orderId||"No especificado"}
`+(St?` Correo: ${z.account?.email||"No especificado"}
 Contrasea: ${z.account?.password||"No especificado"}
 Perfil: ${z.account?.profile||"No especificado"}
 PIN: ${z.account?.pin||"No especificado"}
`:"")+` URL: Sin URL
 Fecha de creacin: ${i(z.startDate)}
 Fecha de vencimiento: ${i(z.endDate)}
 Das contratados: ${z.durationDays||30} das.

`+ht+`*Trminos y Condiciones:*
${z.termsAndConditions||"No se especificaron trminos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),dt=z.providerPhone?z.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999",gr=z.client?.phone?z.client.phone.replace(/^\+/,"").replace(/\D/g,""):"51999999999",J=zt&&z.renewable&&wt<=3;return o.jsxs(Z.tr,{className:`transition-colors duration-200 ${k?"text-gray-300 hover:bg-gray-700/50":"text-gray-700 hover:bg-gray-50/50"}`,variants:j,initial:"hidden",animate:"visible",whileHover:"hover","aria-labelledby":`order-${z.id}-title`,children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`p-1.5 rounded-full ${kt.color.replace("text-","bg-").replace("-600","/20").replace("-400","/20")}`,children:kt.icon}),o.jsx("span",{className:`${kt.color} font-medium`,children:kt.text})]})}),o.jsx("td",{className:"px-4 py-4",children:o.jsx("h4",{id:`order-${z.id}-title`,className:"font-semibold text-blue-500 hover:text-blue-600 transition-colors",children:z.productName||"Sin nombre"})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Oe.bg} ${Oe.text}`,children:Ae(z.category)})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap font-mono text-sm",children:z.orderId||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"space-y-1",children:[o.jsxs("p",{className:"font-bold text-lg",children:["S/ ",_e.toFixed(2)]}),De!==_e&&o.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 bg-gray-100/50 dark:bg-gray-800/50 px-2 py-1 rounded-full",children:[o.jsx(q6,{size:12,className:"text-gray-400"}),o.jsxs("span",{children:["S/ ",De.toFixed(2)]})]})]})}),o.jsx("td",{className:"px-4 py-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[Rt&&o.jsx("div",{className:"relative",children:o.jsx("div",{className:`w-20 h-2 rounded-full overflow-hidden ${k?"bg-gray-600/40":"bg-gray-300/40"}`,children:o.jsx(Z.div,{className:`h-2 rounded-full ${Xt}`,initial:{width:0},animate:{width:`${Yt}%`},transition:{duration:1.5,ease:"easeInOut"}})})}),o.jsx("span",{className:`text-sm font-medium ${et}`,children:de})]})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:i(z.startDate)}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:i(z.endDate)}),o.jsx("td",{className:"px-4 py-4 max-w-xs truncate",title:z.account?.email||"N/A",children:z.account?.email||"N/A"}),o.jsx("td",{className:"px-4 py-4 max-w-xs truncate",title:z.account?.password||"N/A",children:z.account?.password||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:z.account?.profile||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-mono",children:z.account?.pin||"N/A"}),o.jsx("td",{className:"px-4 py-4 text-sm font-medium text-teal-600",children:z.provider||"N/A"}),o.jsx("td",{className:"px-4 py-4 max-w-xs truncate",title:z.client?.customerName||"N/A",children:z.client?.customerName||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:z.client?.phone||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:["soporte","rechazado"].includes(Se)?o.jsx("div",{className:"flex gap-2",children:o.jsx("span",{className:"text-gray-400 text-xs",children:"Sin acciones"})}):o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Z.a,{href:`https://wa.me/51${dt}?text=${pt}`,target:"_blank",rel:"noopener noreferrer",className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-teal-500/80 hover:bg-teal-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Contactar proveedor","aria-label":`Contactar proveedor para el pedido ${z.orderId||z.productName}`,children:o.jsx(qr,{size:16})}),J&&o.jsx(Z.button,{onClick:()=>W(z),disabled:c[`renew_${z.id}`]||d<De,className:`p-2.5 rounded-xl shadow-md flex items-center justify-center ${c[`renew_${z.id}`]||d<De?"bg-gray-300/50 text-gray-500 cursor-not-allowed":"bg-blue-500/80 hover:bg-blue-600/90 text-white"} transition-all duration-200`,whileHover:{scale:c[`renew_${z.id}`]||d<De?1:1.1},whileTap:{scale:c[`renew_${z.id}`]||d<De?1:.9},title:"Renovar pedido","aria-label":`Renovar pedido ${z.orderId||z.productName} por S/ ${De.toFixed(2)}`,children:c[`renew_${z.id}`]?o.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):o.jsx(O1,{size:16})}),o.jsx(Z.a,{href:`https://wa.me/51${gr}?text=${jt}`,target:"_blank",rel:"noopener noreferrer",className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-amber-500/80 hover:bg-amber-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Contactar cliente","aria-label":`Contactar cliente para el pedido ${z.orderId||z.productName}`,children:o.jsx(qr,{size:16})}),o.jsx(Z.button,{onClick:()=>Ne(z),className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-purple-500/80 hover:bg-purple-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Soporte","aria-label":`Abrir soporte para el pedido ${z.orderId||z.productName}`,children:o.jsx(Ka,{size:16})})]})})]},z.id)})})]})})}):o.jsxs(Z.div,{className:"text-center py-16",variants:P,initial:"hidden",animate:"visible",children:[o.jsx(Z.div,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:o.jsx(xa,{className:`mx-auto text-6xl ${k?"text-gray-400":"text-gray-500"} mb-4`,"aria-hidden":"true"})}),o.jsx("h4",{className:`text-xl font-semibold ${k?"text-gray-300":"text-gray-700"} mb-2`,children:"No hay pedidos encontrados"}),o.jsx("p",{className:`text-sm ${k?"text-gray-400":"text-gray-600"}`,children:"Intenta ajustar tu bsqueda o realiza tu primer pedido."})]})}),o.jsx(Bt,{children:p&&x&&o.jsxs(o.Fragment,{children:[o.jsx(Z.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",variants:D,initial:"hidden",animate:"visible",exit:"exit",onClick:ae}),o.jsxs(Z.div,{className:`relative w-full max-w-md p-6 rounded-3xl shadow-2xl border z-[10000] ${k?"bg-gray-800/95 border-gray-700/50 text-white":"bg-white/95 border-gray-200/50 text-gray-900"}`,variants:M,initial:"hidden",animate:"visible",exit:"exit",onClick:z=>z.stopPropagation(),children:[o.jsx("div",{className:"absolute top-4 right-4",children:o.jsx(Z.button,{onClick:ae,className:`p-2 rounded-full ${k?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-200/50 hover:bg-gray-300/50"}`,whileHover:{scale:1.1},whileTap:{scale:.9},children:o.jsx(Ys,{size:18,className:k?"text-gray-300":"text-gray-600"})})}),o.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[o.jsx(Ka,{className:"text-purple-500"}),"Soporte para: ",x.productName||"Sin nombre"]}),o.jsx("textarea",{value:_,onChange:z=>w(z.target.value),placeholder:"Escribe tu mensaje de soporte detallado (obligatorio)...",className:`w-full p-4 rounded-2xl resize-none transition-all duration-200 ${k?"bg-gray-700/70 text-white border border-gray-600/50 placeholder-gray-400 focus:border-purple-500/50":"bg-gray-100/70 text-gray-900 border border-gray-300/50 placeholder-gray-500 focus:border-purple-500/50"} focus:ring-2 focus:ring-purple-500/30 focus:outline-none`,rows:5,required:!0,disabled:E}),o.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[o.jsx(Z.button,{onClick:ae,className:`px-6 py-2.5 rounded-xl font-medium transition-all duration-200 ${k?"bg-gray-600/70 hover:bg-gray-700/80 text-white":"bg-gray-300/70 hover:bg-gray-400/80 text-gray-900"}`,whileHover:{scale:1.05},whileTap:{scale:.95},disabled:E,children:"Cancelar"}),o.jsx(Z.button,{onClick:ne,className:`px-6 py-2.5 rounded-xl font-medium flex items-center gap-2 transition-all duration-200 ${!_.trim()||E?"bg-gray-400/70 cursor-not-allowed text-gray-500":"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white"}`,whileHover:!_.trim()||E?{}:{scale:1.05},whileTap:!_.trim()||E?{}:{scale:.95},disabled:!_.trim()||E,children:E?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}),"Enviando..."]}):"Enviar Soporte"})]})]})]})}),o.jsx(Bt,{children:C&&L&&o.jsxs(o.Fragment,{children:[o.jsx(Z.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",variants:D,initial:"hidden",animate:"visible",exit:"exit",onClick:oe}),o.jsxs(Z.div,{className:`relative w-full max-w-md p-6 rounded-3xl shadow-2xl border z-[10000] ${k?"bg-gray-800/95 border-gray-700/50 text-white":"bg-white/95 border-gray-200/50 text-gray-900"}`,variants:M,initial:"hidden",animate:"visible",exit:"exit",onClick:z=>z.stopPropagation(),children:[o.jsx("div",{className:"absolute top-4 right-4",children:o.jsx(Z.button,{onClick:oe,className:`p-2 rounded-full ${k?"bg-gray-700/50 hover:bg-gray-600/50":"bg-gray-200/50 hover:bg-gray-300/50"}`,whileHover:{scale:1.1},whileTap:{scale:.9},children:o.jsx(Ys,{size:18,className:k?"text-gray-300":"text-gray-600"})})}),o.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[o.jsx(O1,{className:"text-blue-500"}),"Ests seguro de renovar el pedido?"]}),o.jsxs("div",{className:"mb-6 text-center",children:[o.jsxs("p",{className:"text-sm mb-2",children:["Se descontar ",o.jsxs("span",{className:"font-bold text-blue-500",children:["S/ ",parseFloat(L.renewalPrice||L.price||0).toFixed(2)]})," de tu saldo actual."]}),o.jsxs("p",{className:"text-xs text-gray-500",children:["Pedido: ",L.productName||"Sin nombre"," (",L.orderId||"N/A",")"]})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(Z.button,{onClick:oe,className:`px-6 py-2.5 rounded-xl font-medium transition-all duration-200 ${k?"bg-gray-600/70 hover:bg-gray-700/80 text-white":"bg-gray-300/70 hover:bg-gray-400/80 text-gray-900"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Cancelar"}),o.jsx(Z.button,{onClick:ie,className:`px-6 py-2.5 rounded-xl font-medium flex items-center gap-2 transition-all duration-200 ${c[`renew_${L.id}`]||d<parseFloat(L.renewalPrice||L.price||0)?"bg-gray-400/70 cursor-not-allowed text-gray-500":"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white"}`,whileHover:c[`renew_${L.id}`]||d<parseFloat(L.renewalPrice||L.price||0)?{}:{scale:1.05},whileTap:c[`renew_${L.id}`]||d<parseFloat(L.renewalPrice||L.price||0)?{}:{scale:.95},disabled:c[`renew_${L.id}`]||d<parseFloat(L.renewalPrice||L.price||0),children:c[`renew_${L.id}`]?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}),"Renovando..."]}):"Renovar"})]})]})]})})]})};MP.propTypes={orders:q.arrayOf(q.shape({id:q.string.isRequired,productName:q.string,category:q.string,orderId:q.string,price:q.oneOfType([q.string,q.number]),renewalPrice:q.oneOfType([q.string,q.number]),status:q.string,startDate:q.oneOfType([q.string,q.instanceOf(Date)]),endDate:q.oneOfType([q.string,q.instanceOf(Date)]),daysRemaining:q.number,timeElapsedPercentage:q.number,account:q.shape({email:q.string,password:q.string,profile:q.string,pin:q.string}),client:q.shape({customerName:q.string,phone:q.string}),provider:q.string,providerPhone:q.string,renewable:q.bool,termsAndConditions:q.string,durationDays:q.number,soporteMessage:q.string,soporteCreatedAt:q.oneOfType([q.string,q.instanceOf(Date)])})).isRequired,setOrders:q.func.isRequired,fetchOrders:q.func,searchQuery:q.string.isRequired,setSearchQuery:q.func.isRequired,formatDate:q.func.isRequired,handleRenewal:q.func.isRequired,actionLoading:q.object.isRequired,balance:q.number.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const VP=({userName:r,email:e,actionLoading:t,handleUpdatePassword:n,openEditProfileModal:s,handleLogout:i,theme:a="dark"})=>{const c=a==="dark",d={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}},p={hover:{scale:1.05,transition:{duration:.2}},tap:{scale:.95}};return o.jsxs(Z.div,{className:`p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${c?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:d,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"settings-title",children:[o.jsx(Z.h3,{id:"settings-title",className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-8 bg-clip-text text-transparent bg-gradient-to-r ${c?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"} text-center`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:"Configuracin"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${c?"bg-gray-800/70 border-gray-700/50 hover:bg-gray-700/70":"bg-white/70 border-gray-200/50 hover:bg-gray-50/70"}`,variants:h,whileHover:"hover",children:[o.jsxs("h4",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${c?"text-blue-400":"text-blue-600"}`,children:[o.jsx(js,{size:20}),"Perfil"]}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl ${c?"bg-gray-800/30":"bg-gray-100"}`,children:[o.jsx(js,{className:"text-blue-400 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("span",{className:`font-medium ${c?"text-white":"text-gray-900"}`,children:"Nombre:"}),o.jsx("span",{className:`ml-2 ${c?"text-gray-300":"text-gray-700"}`,children:r.username})]})]}),o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl ${c?"bg-gray-800/30":"bg-gray-100"}`,children:[o.jsx(iw,{className:"text-blue-400 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("span",{className:`font-medium ${c?"text-white":"text-gray-900"}`,children:"Correo:"}),o.jsx("span",{className:`ml-2 ${c?"text-gray-300":"text-gray-700"}`,children:e})]})]}),o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl ${c?"bg-gray-800/30":"bg-gray-100"}`,children:[o.jsx(Nh,{className:"text-blue-400 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("span",{className:`font-medium ${c?"text-white":"text-gray-900"}`,children:"Telfono:"}),o.jsx("span",{className:`ml-2 ${c?"text-gray-300":"text-gray-700"}`,children:r.phone||"No especificado"})]})]})]}),o.jsxs(Z.button,{onClick:()=>s({id:r.id,username:r.username,phone:r.phone}),className:`w-full px-6 py-3 rounded-xl font-semibold transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 ${c?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white focus:ring-blue-400":"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white focus:ring-blue-500"}`,variants:p,whileHover:"hover",whileTap:"tap","aria-label":"Editar perfil",children:[o.jsx(Rq,{size:18,className:"inline mr-2"}),"Editar Perfil"]})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${c?"bg-gray-800/70 border-gray-700/50 hover:bg-gray-700/70":"bg-white/70 border-gray-200/50 hover:bg-gray-50/70"}`,variants:h,whileHover:"hover",children:[o.jsxs("h4",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${c?"text-green-400":"text-green-600"}`,children:[o.jsx(tg,{size:20}),"Seguridad"]}),o.jsxs("form",{onSubmit:n,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block mb-2 font-medium ${c?"text-gray-300":"text-gray-700"}`,children:"Nueva Contrasea"}),o.jsx("input",{type:"password",name:"password",className:`w-full px-4 py-3 rounded-xl ${c?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all duration-300`,placeholder:"Ingrese nueva contrasea (mnimo 6 caracteres)","aria-label":"Nueva contrasea"})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block mb-2 font-medium ${c?"text-gray-300":"text-gray-700"}`,children:"Nuevo Telfono"}),o.jsx("input",{type:"tel",name:"phone",className:`w-full px-4 py-3 rounded-xl ${c?"bg-gray-800/50 border-gray-600/50 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-800 placeholder-gray-600"} focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all duration-300`,placeholder:"Ingrese nuevo telfono (ej: +51 940 505 969)",defaultValue:r.phone||"","aria-label":"Nuevo telfono"})]}),o.jsx(Z.button,{type:"submit",disabled:t.password,className:`w-full py-3 px-6 rounded-xl font-semibold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 ${t.password?"bg-gray-300 text-gray-500 cursor-not-allowed":c?"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white focus:ring-green-400":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white focus:ring-green-500"}`,variants:p,whileHover:t.password?{}:"hover",whileTap:t.password?{}:"tap","aria-label":"Guardar cambios de seguridad",children:t.password?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}),o.jsx("span",{children:"Guardando..."})]}):"Guardar Cambios"})]})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${c?"bg-gray-800/70 border-gray-700/50 hover:bg-gray-700/70":"bg-white/70 border-gray-200/50 hover:bg-gray-50/70"}`,variants:h,whileHover:"hover",children:[o.jsxs("h4",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${c?"text-red-400":"text-red-600"}`,children:[o.jsx(rg,{size:20}),"Sesin"]}),o.jsxs(Z.button,{onClick:i,className:`w-full py-3 px-6 rounded-xl font-semibold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 ${c?"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white focus:ring-red-400":"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white focus:ring-red-500"}`,variants:p,whileHover:"hover",whileTap:"tap","aria-label":"Cerrar sesin",children:[o.jsx(rg,{size:18}),"Cerrar Sesin"]})]})]})]})};VP.propTypes={userName:q.shape({id:q.string.isRequired,username:q.string.isRequired,phone:q.string}).isRequired,email:q.string.isRequired,actionLoading:q.shape({password:q.bool}).isRequired,handleUpdatePassword:q.func.isRequired,openEditProfileModal:q.func.isRequired,handleLogout:q.func.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const $P=({orders:r=[],setOrders:e=()=>{},fetchOrders:t,searchQuery:n="",setSearchQuery:s=()=>{},formatDate:i=p=>p?new Date(p).toLocaleDateString("es-PE"):"",handleRenewal:a=()=>{},actionLoading:c={},balance:d=0,theme:h="dark"})=>{const[p,m]=A.useState({key:null,direction:"asc"}),x=h==="dark",v={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},_={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:x?"#1F2937":"#F3F4F6",transition:{duration:.2},scale:1.005}},w=A.useMemo(()=>{let S=[...r.filter(k=>k.status==="soporte")].filter(k=>(k.productName||"").toLowerCase().includes(n.toLowerCase())||(k.orderId||"").toLowerCase().includes(n.toLowerCase()));return p.key&&S.sort((k,P)=>{let j=k[p.key]||"",M=P[p.key]||"";return p.key==="soporteMessage"?(j=k.soporteMessage||"",M=P.soporteMessage||""):p.key==="category"&&(j=R(k.category),M=R(P.category)),typeof j=="string"&&(j=j.toLowerCase()),typeof M=="string"&&(M=M.toLowerCase()),j<M?p.direction==="asc"?-1:1:j>M?p.direction==="asc"?1:-1:0}),S},[r,n,p]),E=H=>{const S={netflix:{bg:x?"bg-red-900/30":"bg-red-100",text:x?"text-red-300":"text-red-800"},disney:{bg:x?"bg-blue-900/30":"bg-blue-100",text:x?"text-blue-300":"text-blue-800"},max:{bg:x?"bg-yellow-900/30":"bg-yellow-100",text:x?"text-yellow-300":"text-yellow-800"},spotify:{bg:x?"bg-green-900/30":"bg-green-100",text:x?"text-green-300":"text-green-800"},default:{bg:x?"bg-gray-900/30":"bg-gray-100",text:x?"text-gray-300":"text-gray-700"}};return S[H?.toLowerCase()]||S.default},R=H=>({netflix:"Netflix",disney:"Disney+",max:"Max",spotify:"Spotify"})[H?.toLowerCase()]||H||"N/A",C=(H,S)=>{const k=H.status||"pending",P=new Date(H.endDate)>new Date;let j,M,D;return k==="soporte"?(j="En soporte",M=S?"text-blue-400":"text-blue-600",D=o.jsx(Ka,{className:M,title:"En Soporte"})):k==="rechazado"?(j="No aplica soporte",M=S?"text-amber-700":"text-amber-900",D=o.jsx(Ys,{className:M,title:"No aplica soporte"})):P?(j="Activo",M=S?"text-green-400":"text-green-600",D=o.jsx(vd,{className:M,title:"Activo"})):k==="pending"?(j="Pendiente a activacion",M=S?"text-yellow-400":"text-yellow-600",D=o.jsx(Dc,{className:M,title:"Pendiente a activacion"})):(j="Expirado",M=S?"text-red-400":"text-red-600",D=o.jsx(Ys,{className:M,title:"Expirado"})),{text:j,color:M,icon:D}},V=H=>{m(S=>({key:H,direction:S.key===H&&S.direction==="asc"?"desc":"asc"}))},L=H=>p.key!==H?null:p.direction==="asc"?o.jsx(rx,{className:"ml-1"}):o.jsx(tx,{className:"ml-1"}),K=()=>{const H=w.map(j=>{const M=parseFloat(j.price)||0,D=parseFloat(j.renewalPrice)||M,O=j.status||"pending",pe=O==="pending",Ae=O==="soporte",Fe=O==="rechazado",Me=new Date(j.endDate)>new Date,Ee=Math.max(0,j.daysRemaining||0);let Te;Ae?Te="En Soporte":Fe?Te="No aplica soporte":Me?Te="Activo":pe?Te="Pendiente a activacion":Te="Expirado";const Ne=Ae||Fe||pe&&!Me;let ae;return Ne?ae=Te:ae=`${Ee} da${Ee===1?"":"s"}`,{Estado:Te,Producto:j.productName||"Sin nombre",Categora:R(j.category),"N Pedido":j.orderId||"N/A",Precio:`S/ ${M.toFixed(2)}`,"Precio Renovacin":D!==M?`S/ ${D.toFixed(2)}`:"N/A","Tiempo Restante":ae,"Fecha de Inicio":i(j.startDate),"Fecha de Vencimiento":i(j.endDate),Email:j.account?.email||"N/A",Contrasea:j.account?.password||"N/A",Perfil:j.account?.profile||"N/A",PIN:j.account?.pin||"N/A",Proveedor:j.provider||"N/A","Mensaje de Soporte":j.soporteMessage||"Sin mensaje"}}),S=gi.json_to_sheet(H),k=gi.book_new();gi.book_append_sheet(k,S,"Pedidos");const P=new Date().toISOString().slice(0,10).replace(/-/g,"");hx(k,`mis_pedidos_soporte_export_${P}.xlsx`)};return o.jsxs(Z.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-7xl mx-auto border ${x?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:v,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"support-title",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 gap-4",children:[o.jsxs("h3",{id:"support-title",className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight flex items-center bg-clip-text text-transparent bg-gradient-to-r ${x?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,children:[o.jsx(Ka,{className:"mr-2"})," Pedidos en Soporte",o.jsx("span",{className:`ml-2 bg-gradient-to-r ${x?"from-blue-400/20 to-purple-600/20":"from-blue-600/20 to-purple-800/20"} px-2 py-1 rounded-full text-sm font-medium`,children:w.length})]}),o.jsxs("div",{className:"flex items-center gap-4 w-full lg:w-auto",children:[o.jsxs("div",{className:"relative flex-1 lg:w-80",children:[o.jsx("input",{type:"text",placeholder:"Buscar pedidos en soporte por nombre o ID...",className:`w-full pl-10 pr-4 py-3 rounded-2xl shadow-md transition-all duration-300 ${x?"bg-gray-800/70 text-white border border-gray-600/50 placeholder-gray-400 focus:border-blue-500/50":"bg-white/70 text-gray-900 border border-gray-300/50 placeholder-gray-500 focus:border-blue-500/50"} focus:ring-2 focus:ring-blue-500/30 focus:outline-none`,value:n,onChange:H=>s(H.target.value),"aria-label":"Buscar pedidos en soporte por nombre o ID"}),o.jsx(xa,{className:`absolute left-3 top-3.5 ${x?"text-gray-400":"text-gray-500"}`,size:18})]}),o.jsxs(Z.button,{onClick:K,className:`p-3 rounded-2xl shadow-lg flex items-center gap-2 ${x?"bg-green-600/80 hover:bg-green-700/90 text-white":"bg-green-500/80 hover:bg-green-600/90 text-white"} transition-all duration-300`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Descargar pedidos en soporte como Excel","aria-label":"Exportar pedidos en soporte a Excel",children:[o.jsx(nx,{size:18}),o.jsx("span",{className:"hidden sm:inline text-sm",children:"Exportar"})]})]})]}),o.jsx(Bt,{children:w.length>0?o.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:o.jsx("div",{className:"overflow-x-auto rounded-2xl border border-gray-200/50 shadow-lg",children:o.jsxs("table",{className:`min-w-full divide-y divide-gray-200/30 ${x?"bg-gray-800/50":"bg-white/50"}`,children:[o.jsx("thead",{className:`${x?"bg-gray-700/60":"bg-gray-50/60"}`,children:o.jsx("tr",{children:[{key:null,label:"Estado"},{key:"productName",label:"Producto"},{key:"category",label:"Categora"},{key:"orderId",label:"N Pedido"},{key:"price",label:"Precio"},{key:"daysRemaining",label:"Tiempo Restante"},{key:"startDate",label:"Inicio"},{key:"endDate",label:"Vencimiento"},{key:"email",label:"Email"},{key:"password",label:"Contrasea"},{key:"profile",label:"Perfil"},{key:"pin",label:"PIN"},{key:"provider",label:"Proveedor"},{key:"soporteMessage",label:"Mensaje de Soporte"},{label:"Acciones"}].map(({key:H,label:S})=>o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${x?"text-gray-300":"text-gray-700"} ${H?"cursor-pointer hover:text-blue-400 transition-colors":""}`,onClick:()=>H&&V(H),children:o.jsxs("div",{className:"flex items-center justify-between",children:[S,H&&L(H)]})},H||S))})}),o.jsx("tbody",{className:"divide-y divide-gray-200/30",children:w.map(H=>{const S=parseFloat(H.price)||0,k=parseFloat(H.renewalPrice)||S,P=H.status||"pending",j=P==="pending",M=P==="soporte",D=P==="rechazado",O=new Date(H.endDate)>new Date,pe=Math.max(0,H.daysRemaining||0),Ae=Math.min(H.timeElapsedPercentage||0,100),Fe=C(H,x),Me=E(H.category);let Ee;Ae<70?Ee=x?"bg-green-500":"bg-green-600":Ae<90?Ee=x?"bg-orange-500":"bg-orange-600":Ee=x?"bg-red-500":"bg-red-600";const Te=!["En soporte","No aplica soporte","Pendiente a activacion"].includes(Fe.text),ae=M||D||j&&!O?Fe.text:`${pe} da${pe===1?"":"s"}`,W=Te?Ee.replace("bg-","text-"):Fe.color,oe=encodeURIComponent(`*Consulta de Soporte - Pedido ${H.orderId||"N/A"}*

*Producto:* ${H.productName||"Sin nombre"}
*Cliente:* ${H.client?.customerName||"N/A"}
*Mensaje del Cliente:* ${H.soporteMessage||"Sin mensaje"}

Por favor, proporciona una solucin o actualizacin para este soporte. Gracias!`),ie=H.providerPhone?H.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return o.jsxs(Z.tr,{className:`transition-colors duration-200 ${x?"text-gray-300 hover:bg-gray-700/50":"text-gray-700 hover:bg-gray-50/50"}`,variants:_,initial:"hidden",animate:"visible",whileHover:"hover","aria-labelledby":`order-${H.id}-title`,children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`p-1.5 rounded-full ${Fe.color.replace("text-","bg-").replace("-600","/20").replace("-400","/20")}`,children:Fe.icon}),o.jsx("span",{className:`${Fe.color} font-medium`,children:Fe.text})]})}),o.jsx("td",{className:"px-4 py-4",children:o.jsx("h4",{id:`order-${H.id}-title`,className:"font-semibold text-blue-500 hover:text-blue-600 transition-colors",children:H.productName||"Sin nombre"})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Me.bg} ${Me.text}`,children:R(H.category)})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap font-mono text-sm",children:H.orderId||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"space-y-1",children:[o.jsxs("p",{className:"font-bold text-lg",children:["S/ ",S.toFixed(2)]}),k!==S&&o.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 bg-gray-100/50 dark:bg-gray-800/50 px-2 py-1 rounded-full",children:[o.jsx(q6,{size:12,className:"text-gray-400"}),o.jsxs("span",{children:["S/ ",k.toFixed(2)]})]})]})}),o.jsx("td",{className:"px-4 py-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[Te&&o.jsx("div",{className:"relative",children:o.jsx("div",{className:`w-20 h-2 rounded-full overflow-hidden ${x?"bg-gray-600/40":"bg-gray-300/40"}`,children:o.jsx(Z.div,{className:`h-2 rounded-full ${Ee}`,initial:{width:0},animate:{width:`${Ae}%`},transition:{duration:1.5,ease:"easeInOut"}})})}),o.jsx("span",{className:`text-sm font-medium ${W}`,children:ae})]})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:i(H.startDate)}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:i(H.endDate)}),o.jsx("td",{className:"px-4 py-4 max-w-xs truncate",title:H.account?.email||"N/A",children:H.account?.email||"N/A"}),o.jsx("td",{className:"px-4 py-4 max-w-xs truncate",title:H.account?.password||"N/A",children:H.account?.password||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:H.account?.profile||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-mono",children:H.account?.pin||"N/A"}),o.jsx("td",{className:"px-4 py-4 text-sm font-medium text-teal-600",children:H.provider||"N/A"}),o.jsxs("td",{className:"px-4 py-4 max-w-xs",children:[o.jsx("p",{className:"text-sm break-words line-clamp-3 bg-gray-100/30 dark:bg-gray-800/30 p-2 rounded",title:H.soporteMessage||"Sin mensaje",children:H.soporteMessage||"Sin mensaje"}),H.soporteCreatedAt&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i(H.soporteCreatedAt)})]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("div",{className:"flex gap-2",children:o.jsx(Z.a,{href:`https://wa.me/51${ie}?text=${oe}`,target:"_blank",rel:"noopener noreferrer",className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-teal-500/80 hover:bg-teal-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Contactar proveedor por WhatsApp","aria-label":`Contactar proveedor para el pedido ${H.orderId||H.productName}`,children:o.jsx(qr,{size:16})})})})]},H.id)})})]})})}):o.jsxs(Z.div,{className:"text-center py-16",variants:v,initial:"hidden",animate:"visible",children:[o.jsx(Z.div,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:o.jsx(Ka,{className:`mx-auto text-6xl ${x?"text-gray-400":"text-gray-500"} mb-4`,"aria-hidden":"true"})}),o.jsx("h4",{className:`text-xl font-semibold ${x?"text-gray-300":"text-gray-700"} mb-2`,children:"No hay pedidos en soporte encontrados"}),o.jsx("p",{className:`text-sm ${x?"text-gray-400":"text-gray-600"}`,children:"Intenta ajustar tu bsqueda o verifica si hay pedidos en estado de soporte."})]})})]})};$P.propTypes={orders:q.arrayOf(q.shape({id:q.string.isRequired,productName:q.string,category:q.string,orderId:q.string,price:q.oneOfType([q.string,q.number]),renewalPrice:q.oneOfType([q.string,q.number]),status:q.string,startDate:q.oneOfType([q.string,q.instanceOf(Date)]),endDate:q.oneOfType([q.string,q.instanceOf(Date)]),daysRemaining:q.number,timeElapsedPercentage:q.number,account:q.shape({email:q.string,password:q.string,profile:q.string,pin:q.string}),client:q.shape({customerName:q.string}),provider:q.string,providerPhone:q.string,renewable:q.bool,termsAndConditions:q.string,durationDays:q.number,soporteMessage:q.string,soporteCreatedAt:q.oneOfType([q.string,q.instanceOf(Date)])})),setOrders:q.func,fetchOrders:q.func,searchQuery:q.string,setSearchQuery:q.func,formatDate:q.func,handleRenewal:q.func,actionLoading:q.object,balance:q.number,theme:q.oneOf(["light","dark"])};const bte=({referralCode:r,affiliates:e,formatDate:t,theme:n="dark"})=>{const[s,i]=A.useState(!1),a=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}},d={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},h=async()=>{try{await navigator.clipboard.writeText(r),i(!0),setTimeout(()=>i(!1),2e3)}catch(p){console.error("Failed to copy code:",p)}};return o.jsxs(Z.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${a?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:d,initial:"hidden",animate:"visible",children:[o.jsx(Z.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-6 bg-clip-text text-transparent bg-gradient-to-r ${a?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:"Afiliados"}),o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm mb-8 ${a?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:c,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${a?"text-blue-400":"text-blue-600"}`,children:[o.jsx(wd,{size:20}),"Tu Cdigo de Referido"]}),o.jsxs("div",{className:"relative",children:[o.jsx("p",{className:`text-3xl font-bold text-center mb-4 px-4 py-3 rounded-xl bg-gradient-to-r ${a?"from-blue-500/20 to-purple-500/20 text-blue-300 border-blue-500/30":"from-blue-100/50 to-purple-100/50 text-blue-700 border-blue-300/50"} border`,children:r||"Cargando..."}),o.jsx(Z.button,{onClick:h,className:`absolute -top-2 -right-2 p-2 rounded-full bg-blue-500 text-white shadow-lg hover:bg-blue-600 transition-all duration-300 ${a?"hover:shadow-blue-500/25":"hover:shadow-blue-500/50"}`,whileHover:{scale:1.1},whileTap:{scale:.95},"aria-label":"Copiar cdigo",disabled:!r,children:o.jsx(U6,{size:16})}),o.jsx(Bt,{children:s&&o.jsx(Z.p,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:`absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs ${a?"text-green-400":"text-green-600"}`,children:"Cdigo copiado!"})})]}),o.jsx("p",{className:`text-sm text-center mt-4 ${a?"text-gray-400":"text-gray-600"}`,children:"Comparte este cdigo con tus amigos para que se unan a travs de ti."})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 shadow-xl border backdrop-blur-sm ${a?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:c,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${a?"text-white":"text-gray-900"}`,children:[o.jsx(wd,{size:20}),"Usuarios Afiliados"]}),o.jsx(Bt,{children:e.length>0?e.map((p,m)=>o.jsxs(Z.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:m*.1},className:`mb-4 p-4 rounded-xl transition-all duration-300 border ${a?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,whileHover:{scale:1.02},children:[o.jsx("div",{className:"flex items-start justify-between mb-2",children:o.jsx("p",{className:`font-semibold flex-1 ${a?"text-white":"text-gray-900"}`,children:p.username})}),o.jsxs("div",{className:`space-y-2 ${a?"text-gray-300":"text-gray-700"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(qr,{className:"text-blue-400 flex-shrink-0",size:16}),o.jsx("span",{className:"text-sm",children:p.email})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Nh,{className:"text-blue-400 flex-shrink-0",size:16}),o.jsx("span",{className:"text-sm",children:p.phone||"No especificado"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Pq,{className:"text-blue-400 flex-shrink-0",size:16}),o.jsx("span",{className:"text-sm",children:t(p.createdAt)})]})]})]},p.id)):o.jsx(Z.p,{initial:{opacity:0},animate:{opacity:1},className:`py-8 text-center ${a?"text-gray-400":"text-gray-500"}`,children:"SERVICIO QUE VA A LLEGAR MUY PRONTO"})})]})]})},wte=$i.memo(({show:r,onClose:e,title:t,message:n,theme:s})=>o.jsx(Bt,{children:r&&o.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:e,role:"dialog","aria-labelledby":"modal-title",children:o.jsxs(Z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${s==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${s==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[o.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:o.jsx(vn,{size:20})}),o.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${s==="dark"?"text-white":"text-gray-900"}`,children:t}),o.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:n})]})})}));wte.propTypes={show:q.bool.isRequired,onClose:q.func.isRequired,title:q.string.isRequired,message:q.string.isRequired,theme:q.string.isRequired};const BP=()=>{const[r,e]=A.useState(!1),[t,n]=A.useState(""),[s,i]=A.useState([]),[a,c]=A.useState({username:"",phone:""}),[d,h]=A.useState(""),[p,m]=A.useState(0),[x,v]=A.useState(null),[_,w]=A.useState("inicio"),[E,R]=A.useState([]),[C,V]=A.useState({}),[L,K]=A.useState([]),[H,S]=A.useState([]),[k,P]=A.useState(""),[j,M]=A.useState(!0),[D,O]=A.useState({}),[pe,Ae]=A.useState(null),[Fe,Me]=A.useState({isOpen:!1,message:"",title:""}),[Ee,Te]=A.useState({isOpen:!1,user:null}),[Ne,ae]=A.useState({isOpen:!1,provider:null}),[W,oe]=A.useState(""),[ie,ne]=A.useState([]),[z,_e]=A.useState("dark"),[De,Se]=A.useState(!1),[we,Qe]=A.useState(!1),[ft,zt]=A.useState(!1),wt=Gi();A.useEffect(()=>{const fe=()=>zt(window.innerWidth<1024);return fe(),window.addEventListener("resize",fe),()=>window.removeEventListener("resize",fe)},[]);const Yt=A.useCallback(()=>{_e(fe=>fe==="dark"?"light":"dark")},[]),kt=A.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),Oe=A.useCallback((fe,Ie)=>{Me({isOpen:!0,title:fe,message:Ie})},[]),Xt=A.useCallback(()=>{Me({isOpen:!1,message:"",title:""})},[]),Rt=A.useCallback(fe=>{Te({isOpen:!0,user:fe})},[]),He=A.useCallback(()=>{Te({isOpen:!1,user:null})},[]),de=A.useCallback(fe=>{ae({isOpen:!0,provider:fe})},[]),et=A.useCallback(()=>{ae({isOpen:!1,provider:null})},[]),ct=A.useCallback(fe=>{if(!fe)return"No especificada";try{const Ie=fe instanceof Date?fe:new Date(fe);return isNaN(Ie.getTime())?"Fecha invlida":Ie.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha invlida"}},[]),pt=A.useCallback(async()=>{if(x)try{const fe=nr(At(Pe,"sales"),br("customerId","==",x)),Ie=await sn(fe),Le=new Set,Ze=[];Ie.forEach(lt=>{const tt=lt.data();tt.providerId&&!Le.has(tt.providerId)&&(Le.add(tt.providerId),Ze.push({id:tt.providerId,name:tt.provider||"Proveedor desconocido",phone:tt.providerPhone||"No especificado"}))});const vt=nr(At(Pe,"ratings"),br("userId","==",x)),at=(await sn(vt)).docs.map(lt=>lt.data().providerId);Ze.forEach(lt=>{lt.hasRated=at.includes(lt.id)}),ne(Ze)}catch(fe){console.error("Error fetching providers:",fe),Ae("Error al cargar proveedores: "+fe.message)}},[x]),St=A.useCallback(async(fe,Ie)=>{try{O(Ze=>({...Ze,profile:!0}));const Le=ot(Pe,"users",fe);await Rr(Le,{username:Ie,updatedAt:lr()}),c(Ze=>({...Ze,username:Ie})),Oe("xito","Perfil actualizado exitosamente"),He()}catch(Le){console.error("Error al actualizar perfil:",Le),Oe("Error",Le.message||"Error al actualizar el perfil")}finally{O(Le=>({...Le,profile:!1}))}},[Oe,He]),ht=A.useCallback(async(fe,Ie)=>{try{O(Le=>({...Le,[`rate_${fe}`]:!0})),await rl(At(Pe,"ratings"),{userId:x,providerId:fe,rating:Ie,ratedAt:lr()}),ne(Le=>Le.map(Ze=>Ze.id===fe?{...Ze,hasRated:!0}:Ze)),Oe("xito","Calificacin enviada exitosamente"),et()}catch(Le){console.error("Error al calificar proveedor:",Le),Oe("Error",Le.message||"Error al enviar la calificacin")}finally{O(Le=>({...Le,[`rate_${fe}`]:!1}))}},[x,Oe,et]),jt=A.useCallback(async fe=>{try{O(Ze=>({...Ze,[`delete_${fe.id}`]:!0}));const Ie=nr(At(Pe,"ratings"),br("userId","==",x),br("providerId","==",fe.id)),Le=await sn(Ie);if(Le.empty){Oe("Error","No se encontr la calificacin para eliminar");return}await Ha(Le.docs[0].ref),ne(Ze=>Ze.map(vt=>vt.id===fe.id?{...vt,hasRated:!1}:vt)),de(fe),Oe("xito","Calificacin anterior eliminada. Ahora puedes volver a calificar.")}catch(Ie){console.error("Error al eliminar calificacin:",Ie),Oe("Error",Ie.message||"Error al eliminar la calificacin")}finally{O(Ie=>({...Ie,[`delete_${fe.id}`]:!1}))}},[x,Oe,de]),dt=A.useCallback(async fe=>{try{O(Ut=>({...Ut,[`renew_${fe.id}`]:!0}));const Ie=parseFloat(fe.renewalPrice)||parseFloat(fe.price)||0;if(p<Ie){Oe("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const Le=parseInt(fe.durationDays)||30,Ze=dr.now(),vt=Ze.toDate(),It=vt,at=new Date(It.getTime()+Le*24*60*60*1e3),lt=dr.fromDate(at),tt=ot(Pe,"sales",fe.id);await Rr(tt,{startDate:Ze,endDate:lt,renewedAt:Ze,status:"completed",updatedAt:lr()});const Nt=ot(Pe,"users",x);await Rr(Nt,{balance:p-Ie}),m(Ut=>Ut-Ie),R(Ut=>Ut.map(Qt=>Qt.id===fe.id?{...Qt,startDate:It,endDate:at,renewedAt:vt,status:"completed",daysRemaining:Le,totalDays:Le,timeElapsedPercentage:0}:Qt)),Oe("xito",`Pedido renovado exitosamente! Nueva fecha de vencimiento: ${ct(at)}`)}catch(Ie){console.error("Error al renovar el pedido:",Ie),Oe("Error","Error al renovar el pedido: "+Ie.message)}finally{O(Ie=>({...Ie,[`renew_${fe.id}`]:!1}))}},[p,x,Oe,ct]);A.useEffect(()=>{(async()=>{try{const Ie=nr(At(Pe,"products")),Le=await sn(Ie),Ze={};Le.forEach(vt=>{Ze[vt.id]=vt.data()}),V(Ze)}catch(Ie){console.error("Error fetching products:",Ie),Ae("Error al cargar productos: "+Ie.message)}})()},[]),A.useEffect(()=>{const fe=cr(ot(Pe,"notifications","adminMessage"),Ie=>{if(Ie.exists()){const Le=Ie.data();Le.roles&&Le.roles.includes("user")?K([{id:Ie.id,...Le,timestamp:Le.updatedAt?.toDate()}]):K([])}else K([])},Ie=>{console.error("Error in notifications listener:",Ie),Ae("Error al cargar notificaciones: "+Ie.message)});return()=>fe()},[]),A.useEffect(()=>{if(!x){console.log("No userId disponible para fetch affiliates");return}console.log("Iniciando fetch de affiliates para userId:",x);const fe=nr(At(Pe,"users"),br("referredBy","==",x)),Ie=cr(fe,Le=>{console.log(`Affiliates snapshot recibido. Docs length: ${Le.docs.length}`);const Ze=Le.docs.map(vt=>{const It=vt.data();return console.log(`Affiliate doc: ID=${vt.id}, referredBy=${It.referredBy}, username=${It.username}`),{id:vt.id,username:It.username||"Desconocido",email:It.email||"No especificado",phone:It.phone||"No especificado",createdAt:It.createdAt?.toDate?.()||new Date}});console.log("Affiliates procesados:",Ze),S(Ze)},Le=>{console.error("Error fetching affiliates:",Le),Ae("Error al cargar afiliados: "+Le.message)});return()=>{console.log("Desuscribiendo affiliates listener"),Ie()}},[x]),A.useEffect(()=>{pt()},[pt]);const gr=A.useCallback(async()=>{try{await Bh(Zr),wt("/")}catch(fe){console.error("Error al cerrar sesin:",fe),Oe("Error",fe.message||"Error al cerrar sesin")}},[wt,Oe]);A.useEffect(()=>{const fe=Nc(Zr,Ie=>{Ie?(console.log("Auth user loaded:",Ie.uid),v(Ie.uid),h(Ie.email||"No especificado"),P(""),M(!1)):wt("/login")});return()=>fe()},[wt]),A.useEffect(()=>{if(!x)return;console.log("Iniciando fetch de user data para:",x);const fe=ot(Pe,"users",x),Ie=cr(fe,Le=>{if(Le.exists()){const Ze=Le.data();console.log("User data loaded:",{username:Ze.username,referralCode:Ze.referralCode}),c({username:Ze.username||"Usuario",phone:Ze.phone||""}),h(Ze.email||"No especificado"),m(Number(Ze.balance)||0),P(Ze.referralCode||x.slice(-6).toUpperCase())}else console.error("User doc no existe para:",x),Ae("Usuario no encontrado")},Le=>{console.error("Error in user data listener:",Le),Ae("Error al cargar datos del usuario: "+Le.message)});return()=>Ie()},[x]),A.useEffect(()=>{if(!x)return;const fe=nr(At(Pe,"sales"),br("customerId","==",x)),Ie=cr(fe,async Ze=>{if(Ze.empty){R([]),M(!1);return}const vt=new Date,It=7200*60*1e3;for(const lt of Ze.docs){const Nt=lt.data().endDate?.toDate?.()||new Date;if(Nt<vt&&vt.getTime()-Nt.getTime()>It)try{await Ha(ot(Pe,"sales",lt.id)),console.log(`Deleted expired order: ${lt.id}`)}catch(Ut){console.error(`Error deleting order ${lt.id}:`,Ut)}}const at=Ze.docs.map(lt=>{const tt=lt.data(),Ut=tt.saleDate?.toDate?.()||tt.createdAt?.toDate?.()||new Date;let Qt=tt.startDate?.toDate?.(),Fr=Qt||Ut,Or=!1;Qt||(Or=!0);const _n=tt.durationDays||30;let mr;tt.endDate?mr=tt.endDate.toDate?tt.endDate.toDate():new Date(tt.endDate):(mr=new Date(Fr.getTime()+_n*24*60*60*1e3),Or=!0),Or&&Rr(ot(Pe,"sales",lt.id),{startDate:Qt||dr.fromDate(Ut),endDate:dr.fromDate(mr),durationDays:_n}).catch(ee=>{console.error("Error al actualizar startDate/endDate en Firestore:",ee)});const Kn=mr.getTime()-Fr.getTime(),hr=vt.getTime()-Fr.getTime(),Rn=mr.getTime()-vt.getTime(),Nr=Math.ceil(Kn/(1e3*60*60*24)),En=Math.max(0,Math.ceil(Rn/(1e3*60*60*24))),an=Math.ceil(hr/(1e3*60*60*24)),pn=Nr>0?an/Nr*100:100,U=C[tt.providerId]?.terms||"No se especificaron trminos y condiciones.";return{id:lt.id,productName:tt.productName||"Producto sin nombre",category:tt.type||"netflix",price:parseFloat(tt.price)||0,renewalPrice:parseFloat(tt.renewalPrice)||0,provider:tt.provider||"No especificado",providerId:tt.providerId||"",providerPhone:tt.providerPhone||tt.providerWhatsapp||"51999999999",status:tt.status||"completed",saleDate:Ut,startDate:Fr,endDate:mr,durationDays:_n,daysRemaining:En,totalDays:Nr,timeElapsedPercentage:pn,account:{email:tt.accountDetails?.email||"No especificado",password:tt.accountDetails?.password||"No especificado",profile:tt.accountDetails?.profile||"No especificado",pin:tt.accountDetails?.pin||"No especificado"},client:{customerName:tt.customerName||"Cliente desconocido",email:tt.customerEmail||"No especificado",phone:tt.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BLK-${lt.id.slice(0,8).toUpperCase()}`,termsAndConditions:U,renewable:tt.renewable!==void 0?tt.renewable:!0}}).filter(lt=>{const tt=new Date(lt.endDate);return!(tt<vt&&vt.getTime()-tt.getTime()>It)});R(at),M(!1)},Ze=>{console.error("Error al obtener pedidos:",Ze),Ae("Error al cargar pedidos: "+Ze.message),M(!1)}),Le=setInterval(()=>{const Ze=new Date,vt=7200*60*1e3;R(It=>It.map(at=>{const lt=new Date(at.endDate).getTime()-new Date(at.startDate).getTime(),tt=Ze.getTime()-new Date(at.startDate).getTime(),Nt=new Date(at.endDate).getTime()-Ze.getTime(),Ut=Math.ceil(lt/(1e3*60*60*24)),Qt=Math.max(0,Math.ceil(Nt/(1e3*60*60*24))),Fr=Math.ceil(tt/(1e3*60*60*24)),Or=Ut>0?Fr/Ut*100:100;return{...at,daysRemaining:Qt,totalDays:Ut,timeElapsedPercentage:Or}}).filter(at=>{const lt=new Date(at.endDate);return!(lt<Ze&&Ze.getTime()-lt.getTime()>vt)}))},6e4);return()=>{Ie(),clearInterval(Le)}},[x,C]),A.useEffect(()=>{if(!x)return;const fe=nr(At(Pe,"pendingTopUps"),br("userId","==",x)),Ie=cr(fe,Le=>{const Ze=Le.docs.map(vt=>({id:vt.id,...vt.data(),date:vt.data().requestedAt?.toDate?.()||new Date,amount:parseFloat(vt.data().amount)||0}));i(Ze)},Le=>{console.error("Error al obtener recargas:",Le),Ae("Error al cargar recargas: "+Le.message)});return()=>Ie()},[x]);const J=A.useCallback(async()=>{try{if(O(Ie=>({...Ie,topUp:!0})),!t||isNaN(t)){Oe("Error","Ingrese un monto vlido");return}const fe=parseFloat(t);if(fe<5){Oe("Error","El monto mnimo de recarga es S/ 5.00");return}await rl(At(Pe,"pendingTopUps"),{userId:x,username:a.username,amount:fe,status:"pendiente",requestedAt:lr()}),n(""),Oe("xito","Solicitud de recarga enviada correctamente")}catch(fe){console.error("Error al solicitar recarga:",fe),Oe("Error",fe.message||"Error al enviar solicitud de recarga")}finally{O(fe=>({...fe,topUp:!1}))}},[t,x,a.username,Oe]),Ce=A.useCallback(async fe=>{fe.preventDefault();try{O(at=>({...at,password:!0}));const Ie=fe.target.password.value,Le=fe.target.phone.value,Ze=Zr.currentUser,vt=ot(Pe,"users",x),It={};if(Ie){if(Ie.length<6){Oe("Error","La contrasea debe tener al menos 6 caracteres");return}await ab(Ze,Ie),It.updatedAt=lr()}Le&&(It.phone=Le,It.updatedAt=lr()),Object.keys(It).length>0&&await Rr(vt,It),c(at=>({...at,phone:Le||at.phone})),Oe("xito","Cambios guardados correctamente"),fe.target.reset()}catch(Ie){console.error("Error al actualizar los datos:",Ie),Oe("Error",Ie.message||"Error al guardar los cambios")}finally{O(Ie=>({...Ie,password:!1}))}},[x,Oe]);A.useEffect(()=>{const fe=()=>{Se(window.scrollY>300)};return window.addEventListener("scroll",fe),()=>window.removeEventListener("scroll",fe)},[]);const gt=()=>j?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):pe?o.jsxs("div",{className:`bg-${z==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${z==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsx(vc,{className:"mx-auto text-4xl text-red-400 mb-4"}),o.jsx("h3",{className:`text-xl font-bold ${z==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Error"}),o.jsx("p",{className:`text-base ${z==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:pe}),o.jsx("button",{onClick:()=>Ae(null),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Aceptar"})]}):o.jsx("div",{className:`bg-${z==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${z==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:(()=>{switch(_){case"inicio":return o.jsx(CG,{userName:a,email:d,balance:p,orders:E,notifications:L,setActivePage:w,formatDate:ct});case"notificaciones":return o.jsx(tI,{notifications:L,formatDate:ct});case"recargar":return o.jsx(rI,{amount:t,setAmount:n,topUps:s,actionLoading:D,handleTopUpRequest:J,formatDate:ct,showModal:Oe});case"proveedores":return o.jsx(nI,{providers:ie,openRateProviderModal:de,deleteRatingProvider:jt,theme:z});case"afiliados":return console.log("Rendering AffiliatesSection with:",{referralCode:k,affiliatesLength:H.length}),o.jsx(bte,{referralCode:k,affiliates:H,formatDate:ct,theme:z});case"pedidos":return o.jsx(MP,{orders:E,setOrders:R,balance:p,searchQuery:W,setSearchQuery:oe,formatDate:ct,handleRenewal:dt,actionLoading:D,theme:z});case"configuracion":return o.jsx(VP,{userName:a,email:d,actionLoading:D,handleUpdatePassword:Ce,openEditProfileModal:Rt,handleLogout:gr});case"soporte":return o.jsx($P,{orders:E,setOrders:R,searchQuery:W,setSearchQuery:oe,formatDate:ct,handleRenewal:dt,actionLoading:D,balance:p,theme:z});default:return o.jsxs("div",{className:`bg-${z==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${z==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsx(vc,{className:"mx-auto text-4xl text-red-400 mb-4"}),o.jsx("h3",{className:`text-xl font-bold ${z==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Seccin no encontrada"}),o.jsx("p",{className:`text-base ${z==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:"La seccin que ests buscando no existe o no est disponible."}),o.jsx("button",{onClick:()=>w("inicio"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Volver al inicio"})]})}})()});return o.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${z==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-50 to-gray-50 text-gray-900"} font-inter relative overflow-x-hidden`,children:[o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[o.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${z==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),o.jsx("div",{className:"particles",children:[...Array(15)].map((fe,Ie)=>o.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},Ie))})]}),o.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${z==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r overflow-y-auto lg:shadow-md`,children:o.jsxs("div",{className:"p-4 flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("button",{onClick:()=>{wt("/"),e(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),o.jsx("button",{onClick:()=>e(!1),className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:o.jsx(vn,{className:"text-lg"})})]}),o.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${z==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:a.username.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("p",{className:`font-medium ${z==="dark"?"text-white":"text-gray-900"}`,children:a.username}),o.jsx("p",{className:`text-xs ${z==="dark"?"text-gray-400":"text-gray-600"}`,children:"Usuario"})]})]}),o.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:ew},{id:"notificaciones",label:"Notificaciones",icon:yc},{id:"recargar",label:"Recargar saldo",icon:ga},{id:"pedidos",label:"Mis pedidos",icon:xd},{id:"proveedores",label:"Proveedores",icon:bc},{id:"afiliados",label:"Afiliados",icon:_a},{id:"soporte",label:"Soporte",icon:Sq},{id:"configuracion",label:"Configuracin",icon:eg}].map(fe=>o.jsxs("button",{onClick:()=>{w(fe.id),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${_===fe.id?"bg-blue-100 text-blue-600 border border-blue-300":z==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":_===fe.id?"page":void 0,children:[o.jsx(fe.icon,{className:"text-lg"}),o.jsx("span",{children:fe.label})]},fe.id))}),o.jsx("div",{className:"mt-auto pt-6",children:o.jsxs("button",{onClick:()=>{gr(),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${z==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[o.jsx(yd,{className:"text-lg"}),o.jsx("span",{children:"Cerrar Sesin"})]})})]})}),o.jsxs("header",{className:`${z==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md py-4 px-4 sm:px-6 lg:px-8 flex items-center justify-between shadow-md fixed top-0 left-0 right-0 z-50 lg:ml-64`,children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(Z.img,{src:Fc,alt:"BlackStreaming logo",className:`h-10 w-10 rounded-full border cursor-pointer ${z==="dark"?"border-gray-700/50":"border-gray-300"} shadow-sm lg:hidden`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy",onClick:()=>wt("/")}),o.jsx("button",{onClick:()=>{ft?wt("/"):w("inicio")},className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300 cursor-pointer","aria-label":ft?"Go to BlackStreaming homepage":"Ir al inicio del dashboard",children:"BlackStreaming"})]}),o.jsx("div",{className:"flex-1 mx-4 max-w-lg",children:o.jsxs("div",{className:"relative group",children:[o.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:W,onChange:fe=>oe(fe.target.value),className:`w-full py-2.5 px-5 ${z==="dark"?"bg-gray-800/50 border-gray-600/50 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-md`,"aria-label":"Search orders",onKeyDown:fe=>fe.key==="Enter"&&w("pedidos")}),o.jsx("button",{onClick:()=>w("pedidos"),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${z==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Search",children:o.jsx(gd,{size:18})})]})}),o.jsxs("nav",{className:"flex items-center space-x-4 relative",children:[o.jsx("button",{onClick:Yt,className:`p-2 rounded-full ${z==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Switch to ${z==="dark"?"light":"dark"} theme`,children:z==="dark"?o.jsx(Rc,{size:20}):o.jsx(jc,{size:20})}),o.jsxs("button",{onClick:()=>Qe(!0),className:`p-2 rounded-full relative ${z==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Notifications (${L.length} new)`,children:[o.jsx(yc,{size:20}),L.length>0&&o.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:L.length})]}),o.jsx("button",{className:`lg:hidden p-2 rounded-full ${z==="dark"?"hover:bg-gray-700/50":"hover:bg-gray-100"} transition-all duration-300`,onClick:()=>e(!r),"aria-label":"Toggle mobile menu","aria-expanded":r,children:o.jsx(ex,{size:20,className:z==="dark"?"text-gray-300":"text-gray-600"})}),o.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o.jsx("div",{className:"relative",children:o.jsxs("button",{className:`flex items-center space-x-2 ${z==="dark"?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-md transition-all duration-300`,"aria-label":"User menu",children:[o.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:a.username.charAt(0).toUpperCase()}),o.jsx("span",{className:`text-sm font-semibold ${z==="dark"?"text-gray-200":"text-gray-800"}`,children:a.username})]})})})]})]}),o.jsx(Bt,{children:we&&o.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>Qe(!1),role:"dialog","aria-labelledby":"notifications-title",children:o.jsxs(Z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 lg:max-w-lg ${z==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${z==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:fe=>fe.stopPropagation(),children:[o.jsx("button",{onClick:()=>Qe(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notifications",children:o.jsx(vn,{size:20})}),o.jsx("h2",{id:"notifications-title",className:`text-xl font-bold mb-4 ${z==="dark"?"text-white":"text-gray-900"}`,children:"Notificaciones"}),L.length>0?L.map(fe=>o.jsxs("div",{className:`p-4 mb-2 rounded-md ${z==="dark"?"bg-gray-800/50":"bg-gray-100/80"} border-l-4 ${z==="dark"?"border-blue-500/50":"border-blue-300/50"}`,children:[o.jsx("h3",{className:`font-semibold ${z==="dark"?"text-gray-200":"text-gray-800"}`,children:fe.title||"Nueva Notificacin"}),o.jsx("p",{className:`text-sm ${z==="dark"?"text-gray-300":"text-gray-700"} mt-1`,children:fe.message}),fe.roles&&fe.roles.length>0&&o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Roles: ",fe.roles.join(", ")]}),fe.timestamp&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ct(fe.timestamp)})]},fe.id)):o.jsx("p",{className:`text-center ${z==="dark"?"text-gray-400":"text-gray-600"} mt-4`,children:"No hay notificaciones."})]})})}),o.jsx("main",{className:"lg:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start",children:gt()}),o.jsxs("footer",{className:`${z==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md px-4 sm:px-6 lg:px-8 py-12 text-center relative z-10 lg:ml-64 max-w-6xl mx-auto rounded-2xl border ${z==="dark"?"border-gray-700/50":"border-gray-300"} mt-8 shadow-md`,children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-4",children:"BlackStreaming"}),o.jsxs("p",{className:`text-base sm:text-lg ${z==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["Todos los derechos reservados. Desarrollado por"," ",o.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Saiph"}),"."]}),o.jsxs("div",{className:"flex justify-center space-x-6 sm:space-x-8 mb-6",children:[o.jsx("a",{href:"https://twitter.com",className:`${z==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Twitter",children:o.jsx(Pc,{size:28})}),o.jsx("a",{href:"https://instagram.com",className:`${z==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Instagram",children:o.jsx(Ic,{size:28})}),o.jsx("a",{href:"https://facebook.com",className:`${z==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Facebook",children:o.jsx(Cc,{size:28})})]}),o.jsxs("div",{className:"flex justify-center space-x-4 sm:space-x-6",children:[o.jsx("a",{href:"#",className:`text-sm ${z==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Privacy Policy",children:"Poltica de Privacidad"}),o.jsx("a",{href:"#",className:`text-sm ${z==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Terms of Service",children:"Trminos de Servicio"}),o.jsx("a",{href:"#",className:`text-sm ${z==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Contact Us",children:"Contctanos"})]})]}),o.jsxs("p",{className:`text-sm ${z==="dark"?"text-gray-500":"text-gray-600"}`,children:[" ",new Date().getFullYear()," BlackStreaming. Hecho con pasin."]})]}),o.jsx(Bt,{children:De&&o.jsx(Z.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:kt,className:"fixed bottom-6 right-6 bg-blue-600/90 backdrop-blur-md p-3 rounded-full hover:bg-blue-700/95 shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 lg:bottom-8 lg:right-8","aria-label":"Back to top",children:o.jsx(Zg,{size:20})})}),o.jsx(SG,{isOpen:Fe.isOpen,title:Fe.title,message:Fe.message,onClose:Xt,theme:z}),Ee.isOpen&&o.jsx(Z6,{isOpen:Ee.isOpen,user:Ee.user,onClose:He,onSave:St,theme:z}),Ne.isOpen&&o.jsx(eI,{isOpen:Ne.isOpen,provider:Ne.provider,onClose:et,onRate:ht,theme:z}),r&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden",onClick:()=>e(!1),"aria-hidden":"true"})]})};BP.propTypes={};const _te=({isOpen:r,message:e,title:t,onClose:n})=>r?o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:t}),o.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-all duration-300",children:o.jsx(Zs,{size:20})})]}),o.jsx("p",{className:"text-gray-300 mb-6",children:e}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:n,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,Ete=({isOpen:r,user:e,onClose:t,onSave:n})=>{const[s,i]=A.useState(e?.username||""),[a,c]=A.useState(""),d=h=>{if(h.preventDefault(),c(""),!s.trim()){c("El nombre de usuario no puede estar vaco.");return}n(e.id,s.trim())};return r?o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Perfil"}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-all duration-300",children:o.jsx(Zs,{size:20})})]}),o.jsxs("form",{onSubmit:d,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),o.jsx("input",{type:"text",value:s,onChange:h=>i(h.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0}),a&&o.jsx("p",{className:"text-red-400 text-sm mt-2",children:a})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},Tte=()=>{const[r,e]=A.useState(!1),[t,n]=A.useState("inicio"),[s,i]=A.useState(""),[a,c]=A.useState(""),[d,h]=A.useState(""),[p,m]=A.useState([]),[x,v]=A.useState(0),[_,w]=A.useState(0),[E,R]=A.useState(null),[C,V]=A.useState(!0),[L,K]=A.useState({}),[H,S]=A.useState(null),[k,P]=A.useState([]),[j,M]=A.useState(!1),[D,O]=A.useState(""),[pe,Ae]=A.useState(""),[Fe,Me]=A.useState([]),[Ee,Te]=A.useState([]),[Ne,ae]=A.useState({}),[W,oe]=A.useState([]),[ie,ne]=A.useState({isOpen:!1,message:"",title:""}),[z,_e]=A.useState({isOpen:!1,user:null}),De=Gi(),Se=(de,et)=>{ne({isOpen:!0,title:de,message:et})},we=()=>{ne({isOpen:!1,message:"",title:""})},Qe=de=>{_e({isOpen:!0,user:de})},ft=()=>{_e({isOpen:!1,user:null})},zt=async(de,et)=>{try{K(St=>({...St,profile:!0}));const ct=ot(Pe,"users",de),pt=ot(Pe,"affiliates",de);await Rr(ct,{username:et,updatedAt:lr()}),await Rr(pt,{username:et,updatedAt:lr()}),i(et),Se("xito","Perfil actualizado exitosamente"),ft()}catch(ct){console.error("Error al actualizar perfil:",ct),Se("Error",ct.message||"Error al actualizar el perfil")}finally{K(ct=>({...ct,profile:!1}))}};A.useEffect(()=>{const de=Nc(Zr,et=>{et?(R(et.uid),c(et.email||"No especificado"),V(!1)):De("/login")});return()=>de()},[De]),A.useEffect(()=>{(async()=>{try{const et=nr(At(Pe,"products")),ct=await sn(et),pt={};ct.forEach(St=>{pt[St.id]=St.data()}),ae(pt)}catch(et){console.error("Error fetching products:",et),S("Error al cargar productos")}})()},[]),A.useEffect(()=>{cr(ot(Pe,"notifications","adminMessage"),ct=>{if(ct.exists()){const pt=ct.data();pt.roles&&pt.roles.includes("affiliate")?oe([{id:ct.id,...pt}]):oe([])}else oe([])})},[]),A.useEffect(()=>{(async()=>{if(E)try{const et=ot(Pe,"users",E),ct=await ha(et);if(ct.exists()){const ht=ct.data();i(ht.username||"Usuario"),w(Number(ht.balance)||0)}const pt=ot(Pe,"affiliates",E),St=await ha(pt);if(St.exists()){const ht=St.data();h(ht.affiliateCode||""),v(Number(ht.earnings)||0)}else{const ht=`AFF-${Math.random().toString(36).substring(2,8).toUpperCase()}`;await ba(pt,{username:s||"Nuevo Afiliado",email:a,affiliateCode:ht,earnings:0,createdAt:lr(),updatedAt:lr()}),h(ht)}}catch(et){console.error("Error al manejar datos:",et),S("Error al cargar datos")}finally{V(!1)}})()},[E,a,s]),A.useEffect(()=>{if(!E)return;(()=>{const et=nr(At(Pe,"pendingTopUps"),br("userId","==",E));return cr(et,pt=>{const St=pt.docs.map(ht=>({id:ht.id,...ht.data(),date:ht.data().requestedAt?.toDate?.()||new Date,amount:parseFloat(ht.data().amount)||0}));Me(St)},pt=>{console.error("Error al obtener recargas:",pt),S("Error al cargar recargas")})})()},[E]),A.useEffect(()=>{if(!d)return;const de=nr(At(Pe,"users"),br("referrerCode","==",d),u2("createdAt","desc"),C5(5)),et=cr(de,ct=>{const pt=ct.docs.map(St=>({id:St.id,...St.data(),joinDate:St.data().createdAt?.toDate()||new Date}));P(pt)});return()=>et()},[d]),A.useEffect(()=>{if(!d)return;const de=nr(At(Pe,"users"),br("referrerCode","==",d)),et=cr(de,ct=>{const pt=ct.docs.map(St=>({id:St.id,...St.data(),joinDate:St.data().createdAt?.toDate()||new Date}));m(pt)});return()=>et()},[d]),A.useEffect(()=>{if(!E)return;(()=>{const et=nr(At(Pe,"sales"),br("customerId","==",E)),ct=cr(et,St=>{if(St.empty){Te([]),V(!1);return}const ht=St.docs.map(jt=>{const dt=jt.data(),J=dt.saleDate?.toDate?.()||dt.createdAt?.toDate?.()||new Date;let Ce=dt.startDate?.toDate?.(),gt=Ce||J,fe=!1;Ce||(fe=!0);const Ie=dt.durationDays||30;let Le;dt.endDate?Le=new Date(dt.endDate):(Le=new Date(gt.getTime()+Ie*24*60*60*1e3),fe=!0),fe&&Rr(ot(Pe,"sales",jt.id),{startDate:Ce||dr.fromDate(J),endDate:Le.toISOString(),durationDays:Ie}).catch(Fr=>{console.error("Error al actualizar startDate/endDate en Firestore:",Fr)});const Ze=new Date,vt=Le.getTime()-gt.getTime(),It=Ze.getTime()-gt.getTime(),at=Le.getTime()-Ze.getTime(),lt=Math.ceil(vt/(1e3*60*60*24)),tt=Math.max(0,Math.ceil(at/(1e3*60*60*24))),Nt=Math.ceil(It/(1e3*60*60*24)),Ut=lt>0?Nt/lt*100:100,Qt=Ne[dt.providerId]?.terms||"No se especificaron trminos y condiciones.";return{id:jt.id,productName:dt.productName||"Producto sin nombre",category:dt.type||"netflix",price:parseFloat(dt.price)||0,provider:dt.provider||"No especificado",providerId:dt.providerId||"",providerPhone:dt.providerPhone||dt.providerWhatsapp||"51999999999",status:dt.status||"completed",saleDate:J,startDate:gt,endDate:Le,durationDays:Ie,daysRemaining:tt,totalDays:lt,timeElapsedPercentage:Ut,account:{email:dt.accountDetails?.email||"No especificado",password:dt.accountDetails?.password||"No especificado",profile:dt.accountDetails?.profile||"No especificado",pin:dt.accountDetails?.pin||"No especificado"},client:{name:dt.customerName||"Cliente desconocido",email:dt.customerEmail||"No especificado",phone:dt.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BS-${jt.id.slice(0,8).toUpperCase()}`,termsAndConditions:Qt,renewable:dt.renewable!==void 0?dt.renewable:!0}});Te(ht),V(!1)},St=>{console.error("Error al obtener pedidos:",St),S("Error al cargar pedidos: "+St.message),V(!1)}),pt=setInterval(()=>{Te(St=>St.map(ht=>{const jt=new Date,dt=new Date(ht.endDate).getTime()-new Date(ht.startDate).getTime(),gr=jt.getTime()-new Date(ht.startDate).getTime(),J=new Date(ht.endDate).getTime()-jt.getTime(),Ce=Math.ceil(dt/(1e3*60*60*24)),gt=Math.max(0,Math.ceil(J/(1e3*60*60*24))),fe=Math.ceil(gr/(1e3*60*60*24)),Ie=Ce>0?fe/Ce*100:100;return{...ht,daysRemaining:gt,totalDays:Ce,timeElapsedPercentage:Ie}}))},6e4);return()=>{ct(),clearInterval(pt)}})()},[E,Ne]);const wt=async()=>{try{if(K(et=>({...et,topUp:!0})),!pe||isNaN(pe)){Se("Error","Ingrese un monto vlido");return}const de=parseFloat(pe);if(de<10){Se("Error","El monto mnimo de recarga es S/ 10.00");return}await rl(At(Pe,"pendingTopUps"),{userId:E,username:s,amount:de,status:"pendiente",requestedAt:lr(),processed:!1}),Ae(""),Se("xito","Solicitud de recarga enviada correctamente")}catch(de){console.error("Error al solicitar recarga:",de),Se("Error",de.message||"Error al enviar solicitud de recarga")}finally{K(de=>({...de,topUp:!1}))}},Yt=async de=>{try{K(Ce=>({...Ce,[`renew_${de.id}`]:!0}));const et=parseFloat(de.price)||0;if(_<et){Se("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const ct=parseInt(de.durationDays)||30,pt=dr.now(),St=pt.toDate(),ht=new Date(St.getTime()+ct*24*60*60*1e3),jt=ht.toISOString(),dt={customerId:E,customerName:de.client?.name||"Cliente desconocido",customerEmail:de.client?.email||a,phoneNumber:de.client?.phone||"No especificado",productName:de.productName||"Producto sin nombre",type:de.category||"netflix",price:et,accountDetails:{email:de.account?.email||"No especificado",password:de.account?.password||"No especificado",profile:de.account?.profile||"No especificado",pin:de.account?.pin||"No especificado"},provider:de.provider||"Proveedor desconocido",providerId:de.providerId||"",providerPhone:de.providerPhone||de.providerWhatsapp||"51999999999",status:"completed",createdAt:pt,saleDate:pt,startDate:pt,endDate:jt,durationDays:ct,renewedAt:pt,renewable:de.renewable!==void 0?de.renewable:!0},gr=await rl(At(Pe,"sales"),dt),J=ot(Pe,"users",E);await Rr(J,{balance:_-et}),w(Ce=>Ce-et),Te(Ce=>[...Ce,{...dt,id:gr.id,saleDate:St,startDate:St,endDate:ht,account:dt.accountDetails,client:{name:dt.customerName,email:dt.customerEmail,phone:dt.phoneNumber},orderId:`BS-${gr.id.slice(0,8).toUpperCase()}`,renewable:dt.renewable,daysRemaining:ct,totalDays:ct,timeElapsedPercentage:0,termsAndConditions:Ne[dt.providerId]?.terms||"No se especificaron trminos y condiciones."}]),Se("xito","Pedido renovado exitosamente!")}catch(et){console.error("Error al renovar el pedido:",et),Se("Error","Error al renovar el pedido: "+et.message)}finally{K(et=>({...et,[`renew_${de.id}`]:!1}))}},kt=()=>{d&&(navigator.clipboard.writeText(d),M(!0),setTimeout(()=>M(!1),2e3))},Oe=de=>{if(!de)return"No especificada";try{const et=de instanceof Date?de:new Date(de);return isNaN(et.getTime())?"Fecha invlida":et.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha invlida"}},Xt=async()=>{try{await Bh(Zr),De("/")}catch(de){console.error("Error al cerrar sesin:",de),Se("Error",de.message||"Error al cerrar sesin")}},Rt=async de=>{de.preventDefault();try{K(pt=>({...pt,password:!0}));const et=de.target.password.value;if(!et){Se("Error","Por favor, ingrese una nueva contrasea");return}if(et.length<6){Se("Error","La contrasea debe tener al menos 6 caracteres");return}const ct=Zr.currentUser;ct&&(await ab(ct,et),Se("xito","Contrasea actualizada correctamente"),de.target.reset())}catch(et){console.error("Error al actualizar la contrasea:",et),Se("Error",et.message||"Error al actualizar la contrasea")}finally{K(et=>({...et,password:!1}))}},He=()=>{if(C)return o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(H)return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[o.jsx(Ys,{className:"mx-auto text-4xl text-red-400 mb-4"}),o.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),o.jsx("p",{className:"text-gray-300 mb-4",children:H}),o.jsx("button",{onClick:()=>S(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(t){case"inicio":return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[o.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",o.jsx("span",{className:"text-cyan-400",children:s})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[o.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Informacin de cuenta"}),o.jsxs("div",{className:"space-y-2 text-gray-300",children:[o.jsxs("p",{className:"flex items-center",children:[o.jsx(js,{className:"mr-2 text-cyan-400"}),o.jsx("span",{children:s})]}),o.jsxs("p",{className:"flex items-center",children:[o.jsx(qr,{className:"mr-2 text-cyan-400"}),o.jsx("span",{children:a})]})]})]}),o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[o.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Saldo disponible"}),o.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",_.toFixed(2)]}),o.jsx("button",{onClick:()=>n("recargas"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Recargar"})]}),o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[o.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Ganancias totales"}),o.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",x.toFixed(2)]}),o.jsx("button",{onClick:()=>n("ganancias"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Ver ganancias"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-white",children:"Tu cdigo de afiliado"}),o.jsxs("button",{onClick:kt,disabled:!d,className:`flex items-center gap-2 px-3 py-1 rounded-xl transition-all duration-300 ${d?"bg-cyan-900/80 text-cyan-400 hover:bg-cyan-800/80":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[o.jsx(U6,{size:16}),j?"Copiado!":"Copiar"]})]}),o.jsx("div",{className:"bg-gray-800/50 p-4 rounded-xl mb-6 border border-gray-600/50",children:o.jsx("p",{className:"text-2xl font-bold text-center tracking-wider text-white",children:d||"Generando cdigo..."})}),o.jsx("p",{className:"text-gray-300 mb-4",children:"Comparte este cdigo con tus amigos para que se registren y ganes comisiones por sus compras."}),o.jsxs("div",{className:"bg-cyan-900/30 p-4 rounded-xl border border-cyan-800/50",children:[o.jsx("h4",{className:"font-medium text-cyan-400 mb-2",children:"Enlace de afiliado:"}),o.jsx("p",{className:"text-sm bg-gray-800/50 p-2 rounded-xl border border-gray-600/50 overflow-x-auto text-gray-300",children:d?`https://blackkstreaming.com/register?ref=${d}`:"Generando enlace..."})]})]}),o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[o.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Referidos recientes"}),k.length>0?k.map(de=>o.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("p",{className:"font-medium text-white",children:de.username||"Sin nombre"}),o.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-900/80 text-green-400",children:"Activo"})]}),o.jsxs("p",{className:"text-sm text-gray-400",children:["Unido: ",Oe(de.joinDate)]})]},de.id)):o.jsx("p",{className:"text-gray-400 py-2",children:"No tienes referidos recientes"}),k.length>0&&o.jsx("button",{onClick:()=>n("referidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los referidos"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[o.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),Ee.length>0?Ee.slice(0,3).map(de=>{const et=new Date(de.endDate)>new Date&&de.status==="completed",ct=de.status==="pending";return o.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("p",{className:"font-medium text-white",children:de.productName}),o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ct?"bg-yellow-900/80 text-yellow-400":et?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:ct?"A pedido":et?"Activo":"Expirado"})]}),o.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",Oe(de.endDate)]})]},de.id)}):o.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),Ee.length>3&&o.jsx("button",{onClick:()=>n("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]}),o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[o.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Notificaciones"}),W.length>0?W.map(de=>o.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[o.jsx("p",{className:"text-gray-300",children:de.message}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:Oe(de.updatedAt)})]},de.id)):o.jsx("p",{className:"text-gray-400 py-2",children:"No hay notificaciones"})]})]})]});case"notificaciones":return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[o.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Notificaciones"}),W.length>0?o.jsx("div",{className:"space-y-4",children:W.map(de=>o.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[o.jsx("p",{className:"text-gray-300",children:de.message}),o.jsx("p",{className:"text-xs text-gray-400 mt-2",children:Oe(de.updatedAt)})]},de.id))}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Ah,{className:"mx-auto text-4xl text-gray-400 mb-3"}),o.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),o.jsx("p",{className:"text-gray-400",children:"No tienes mensajes nuevos"})]})]});case"recargas":return o.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[o.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargar saldo"}),o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),o.jsx("input",{type:"number",value:pe,onChange:de=>Ae(de.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Mnimo S/ 10.00",min:"10",step:"0.01"})]}),o.jsx("button",{onClick:wt,disabled:L.topUp||!pe||parseFloat(pe)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${pe&&parseFloat(pe)>=10&&!L.topUp?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:L.topUp?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"}),o.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[o.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[o.jsx(Xs,{className:"mr-2"})," Cmo realizar tu recarga?"]}),o.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",o.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al nmero:"]}),o.jsx("p",{className:"text-xl font-bold text-white mb-2",children:" 931757531"}),o.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contctanos va WhatsApp al mismo nmero para confirmar tu recarga."}),o.jsxs("a",{href:`https://wa.me/51931757531?text=${encodeURIComponent("Hola , he realizado una recarga a travs de Yape. Por favor, confirma mi pago.")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[o.jsx(qr,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]})]}),o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[o.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de recargas"}),Fe.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[o.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Accin"})]})}),o.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:Fe.map(de=>{const et=encodeURIComponent(`Hola, he pedido una recarga de S/ ${de.amount?.toFixed(2)||"0.00"} con el nombre ${s}. Adjunto la captura de mi pago, por favor.`);return o.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",de.amount?.toFixed(2)||"0.00"]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${de.status==="aprobado"?"bg-green-900/80 text-green-400":de.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:de.status})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:Oe(de.date)}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:de.status==="pendiente"?o.jsxs("a",{href:`https://wa.me/51940505969?text=${et}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 text-sm",children:[o.jsx(qr,{className:"mr-2"})," Enviar captura"]}):o.jsx("span",{className:"text-gray-400 text-sm",children:""})})]},de.id)})})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Xs,{className:"mx-auto text-4xl text-gray-400 mb-3"}),o.jsx("p",{className:"text-gray-400",children:"No hay recargas registradas"})]})]})]});case"pedidos":return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:D,onChange:de=>O(de.target.value)}),o.jsx(xa,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),Ee.length>0?o.jsx("div",{className:"space-y-6",children:Ee.filter(de=>(de.productName||"").toLowerCase().includes(D.toLowerCase())||(de.orderId||"").toLowerCase().includes(D.toLowerCase())).map(de=>{const et=parseFloat(de.price)||0,ct=new Date(de.endDate)>new Date&&de.status==="completed",pt=de.status==="pending",St=de.daysRemaining||0,ht=de.timeElapsedPercentage||0;let jt="bg-green-400";ht>70&&ht<=90?jt="bg-yellow-400":ht>90&&(jt="bg-red-400");const dt=pt?o.jsx(Dc,{className:"text-yellow-400"}):ct?o.jsx(vd,{className:"text-green-400"}):o.jsx(Ys,{className:"text-red-400"}),gr=encodeURIComponent(`*Consulta sobre Pedido - ${de.productName||"Sin nombre"}*

*N Pedido:* ${de.orderId||"No especificado"}
*Producto:* ${de.productName||"No especificado"}
*Precio:* S/ ${et.toFixed(2)}
*Estado:* ${pt?"A pedido":ct?"Activo":"Expirado"}
*Fecha de Inicio:* ${Oe(de.startDate)}
*Fecha de Vencimiento:* ${Oe(de.endDate)}

`+(pt?`Hola , he comprado un producto a pedido (${de.productName}). En cuntos das estar listo? Por favor, indqueme los detalles para coordinar.`:"Por favor indqueme cmo puedo resolver mi consulta sobre este pedido.")),J=encodeURIComponent(` Estimado/a ${de.client?.name||"Cliente"} 

Le enviamos la informacin de su suscripcin a nuestro servicio de streaming:
 Tipo: ${de.productName||"Sin nombre"}.
 Cdigo: ${de.orderId||"No especificado"}
`+(pt?"":` Correo: ${de.account?.email||"No especificado"}
 Contrasea: ${de.account?.password||"No especificado"}
 Perfil: ${de.account?.profile||"No especificado"}
 PIN: ${de.account?.pin||"No especificado"}
`)+` URL: Sin URL
 Fecha de creacin: ${Oe(de.startDate)}
 Fecha de vencimiento: ${Oe(de.endDate)}
 Das contratados: ${de.durationDays||30} das.

`+(pt?`*Nota:* Este pedido est "A pedido". El proveedor se contactar contigo para coordinar los detalles.

`:"")+`*Trminos y Condiciones:*
${de.termsAndConditions||"No se especificaron trminos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),Ce=de.providerPhone?de.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return o.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[dt,o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-white",children:de.productName||"Producto sin nombre"}),de.orderId&&o.jsxs("p",{className:"text-xs text-gray-400",children:["N Pedido: ",de.orderId]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",et.toFixed(2)]}),o.jsx("p",{className:`text-xs font-medium ${pt?"text-yellow-400":jt.replace("bg-","text-")}`,children:pt?"Pendiente de activacin":`${St} da${St===1?"":"s"} restante${St===1?"":"s"}`})]})]}),o.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2.5",children:o.jsx("div",{className:`h-2.5 rounded-full ${jt}`,style:{width:`${Math.min(ht,100)}%`}})}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[ht.toFixed(0),"% completado"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[o.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[o.jsx(js,{className:"mr-2"})," Detalles de la Cuenta"]}),o.jsx("div",{className:"space-y-2 text-gray-300",children:pt?o.jsxs(o.Fragment,{children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Usuario:"}),o.jsx("span",{className:"block text-white",children:"Por completar"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Contrasea:"}),o.jsx("span",{className:"block text-white",children:"Por completar"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),o.jsx("span",{className:"block text-white",children:"Por completar"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),o.jsx("span",{className:"block text-white",children:"Por completar"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),o.jsx("span",{className:"block text-white break-all",children:de.account?.email||"No especificado"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Contrasea:"}),o.jsx("span",{className:"block text-white break-all",children:de.account?.password||"No especificado"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),o.jsx("span",{className:"block text-white",children:de.account?.profile||"No especificado"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),o.jsx("span",{className:"block text-white",children:de.account?.pin||"No especificado"})]})]})})]}),o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[o.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[o.jsx(sw,{className:"mr-2"})," Informacin del Pedido"]}),o.jsxs("div",{className:"space-y-2 text-gray-300",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),o.jsx("span",{className:"block text-white",children:de.provider||"No especificado"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Telfono del Proveedor:"}),o.jsx("span",{className:"block text-white",children:de.providerPhone||"No especificado"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Estado:"}),o.jsx("span",{className:`block px-2 py-1 text-xs rounded-full ${pt?"bg-yellow-900/80 text-yellow-400":ct?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:pt?"A pedido":ct?"Activo":"Expirado"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Mtodo de Pago:"}),o.jsx("span",{className:"block text-white",children:"BlackStreaming"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de inicio:"}),o.jsx("span",{className:"block text-white",children:Oe(de.startDate)})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de vencimiento:"}),o.jsx("span",{className:"block text-white",children:Oe(de.endDate)})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Das restantes:"}),o.jsx("span",{className:`block ${jt.replace("bg-","text-")}`,children:St})]})]})]}),o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[o.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[o.jsx(js,{className:"mr-2"})," Informacin del Cliente"]}),o.jsxs("div",{className:"space-y-2 text-gray-300",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Nombre:"}),o.jsx("span",{className:"block text-white",children:de.client?.name||"No especificado"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Telfono:"}),o.jsx("span",{className:"block text-white",children:de.client?.phone||"No especificado"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),o.jsx("span",{className:"block text-white",children:de.client?.email||"No especificado"})]})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsxs("a",{href:`https://wa.me/51${Ce}?text=${gr}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[o.jsx(qr,{size:18})," Contactar Proveedor"]}),de.renewable&&o.jsx("button",{onClick:()=>Yt(de),disabled:L[`renew_${de.id}`],className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${L[`renew_${de.id}`]?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:L[`renew_${de.id}`]?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):o.jsxs(o.Fragment,{children:[o.jsx(O1,{size:18})," Renovar Pedido"]})}),de.client?.phone&&o.jsxs("a",{href:`https://wa.me/${de.client.phone.replace(/^\+/,"")}?text=${J}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[o.jsx(qr,{size:18})," Contactar Cliente"]})]})]})]},de.id)})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(ul,{className:"mx-auto text-4xl text-gray-400 mb-3"}),o.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes pedidos registrados"}),o.jsx("p",{className:"text-gray-400",children:"Realiza tu primer pedido en nuestra tienda"})]})]});case"referidos":return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Todos tus referidos (",p.length,")"]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"Buscar referidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:D,onChange:de=>O(de.target.value)}),o.jsx(xa,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),p.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[o.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha de registro"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),o.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:p.filter(de=>{const et=de.username||"",ct=de.email||"";return et.toLowerCase().includes(D.toLowerCase())||ct.toLowerCase().includes(D.toLowerCase())}).map(de=>o.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:de.username||"Sin nombre"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:de.email||"Sin email"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:de.joinDate?Oe(de.joinDate):"No especificada"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/80 text-green-400",children:de.status||"Activo"})})]},de.id))})]})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(wd,{className:"mx-auto text-4xl text-gray-400 mb-3"}),o.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes referidos an"}),o.jsx("p",{className:"text-gray-400",children:"Comparte tu cdigo de afiliado para empezar a ganar comisiones"})]})]});case"ganancias":return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[o.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Reporte de ganancias"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[o.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias hoy"}),o.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),o.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde ayer"})]}),o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[o.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias esta semana"}),o.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),o.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde la semana pasada"})]}),o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[o.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias totales"}),o.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",x.toFixed(2)]}),o.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[p.length," referidos"]})]})]}),o.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(NN,{className:"mr-2 text-cyan-400"})," Historial de comisiones"]}),p.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[o.jsx("thead",{className:"bg-gray-800/50 backdrop-blur-sm",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Referido"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Origen"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),o.jsx("tbody",{className:"bg-gray-700/50 divide-y divide-gray-600/50",children:p.map(de=>o.jsxs("tr",{className:"hover:bg-gray-600/50 transition-all duration-300",children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:de.username||"Usuario sin nombre"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:de.joinDate?Oe(de.joinDate):"No especificada"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:"S/ 0.00"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:"Registro"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-900/80 text-yellow-400",children:"Pendiente"})})]},de.id))})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Xs,{className:"mx-auto text-4xl text-gray-400 mb-3"}),o.jsx("p",{className:"text-gray-400",children:"No hay comisiones registradas"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gana comisiones cuando tus referidos realicen compras"})]})]})]});case"configuracion":return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[o.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuracin de cuenta"}),o.jsxs("form",{onSubmit:Rt,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"text",value:s,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"}),o.jsx("button",{type:"button",onClick:()=>Qe({id:E,username:s}),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300",title:"Editar Nombre",children:o.jsx(Dq,{size:16})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrnico"}),o.jsx("input",{type:"email",value:a,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contrasea (opcional)"}),o.jsx("input",{type:"password",name:"password",placeholder:"Nueva contrasea",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),o.jsx("button",{type:"submit",disabled:L.password,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-cyan-800",children:L.password?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),o.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:o.jsxs("button",{onClick:Xt,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[o.jsx(rg,{})," Cerrar sesin"]})})]});default:return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[o.jsx(Ys,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),o.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Seccin no encontrada"}),o.jsx("p",{className:"text-gray-300 mb-4",children:"La seccin que ests buscando no existe o no est disponible."}),o.jsx("button",{onClick:()=>n("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[o.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:o.jsx("button",{onClick:()=>e(!r),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:o.jsx(Vq,{className:"text-xl"})})}),o.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:o.jsxs("div",{className:"p-4 flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),o.jsx("button",{onClick:()=>e(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:o.jsx(Zs,{className:"text-lg"})})]}),o.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:s.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-white",children:s}),o.jsx("p",{className:"text-xs text-gray-400",children:"Afiliador"})]})]}),o.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Fq},{id:"notificaciones",label:"Notificaciones",icon:Ah},{id:"recargas",label:"Recargas",icon:Xs},{id:"pedidos",label:"Pedidos",icon:ul},{id:"referidos",label:"Referidos",icon:wd},{id:"ganancias",label:"Ganancias",icon:NN},{id:"configuracion",label:"Configuracin",icon:G6}].map(de=>o.jsxs("button",{onClick:()=>{n(de.id),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${t===de.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[o.jsx(de.icon,{className:"text-lg"}),o.jsx("span",{children:de.label})]},de.id))}),o.jsx("div",{className:"mt-auto pt-6",children:o.jsxs("button",{onClick:Xt,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[o.jsx(rg,{className:"text-lg"}),o.jsx("span",{children:"Cerrar Sesin"})]})})]})}),o.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:He()}),o.jsx(_te,{isOpen:ie.isOpen,title:ie.title,message:ie.message,onClose:we}),o.jsx(Ete,{isOpen:z.isOpen,user:z.user,onClose:ft,onSave:zt}),r&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>e(!1)})]})},Ate=({isOpen:r,message:e,title:t,onClose:n})=>r?o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:t}),o.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-all duration-300",children:o.jsx(Zs,{size:20})})]}),o.jsx("p",{className:"text-gray-300 mb-6",children:e}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:n,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,UP=({username:r="Usuario",products:e=[],orders:t=[],providerBalance:n=0,balanceLoading:s=!1,totalStock:i=0,totalEarnings:a=0,isAdmin:c=!1,email:d="",notifications:h=[],setActiveSection:p=()=>{},formatDate:m=v=>new Date(v).toLocaleDateString(),theme:x="dark"})=>{const v=x==="dark",_={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},w={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return o.jsxs(Z.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${v?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:_,initial:"hidden",animate:"visible",children:[o.jsxs(Z.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-8 bg-clip-text text-transparent bg-gradient-to-r ${v?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"} text-center`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:["Bienvenido, ",o.jsx("span",{className:"text-red-400",children:r})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${v?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:w,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${v?"text-blue-400":"text-blue-600"}`,children:[o.jsx(nw,{size:20}),"Inventario"]}),o.jsx("p",{className:`text-4xl font-bold ${v?"text-white":"text-gray-900"} mb-2`,children:e.length}),o.jsx("p",{className:`text-sm ${v?"text-gray-400":"text-gray-600"} mb-1`,children:"Productos registrados"}),o.jsxs("p",{className:`text-sm ${v?"text-gray-400":"text-gray-600"}`,children:["Stock total: ",i]}),o.jsx(Z.button,{onClick:()=>p("inventario"),className:`mt-6 w-full px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 ${v?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Ver Inventario"})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${v?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:w,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${v?"text-green-400":"text-green-600"}`,children:[o.jsx(Xs,{size:20}),"Ganancias"]}),s?o.jsxs("div",{className:"flex items-center justify-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"}),o.jsx("span",{className:`ml-2 ${v?"text-gray-400":"text-gray-600"}`,children:"Cargando..."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:`text-4xl font-bold ${v?"text-white":"text-gray-900"} mb-2`,children:["S/ ",a.toFixed(2)]}),o.jsxs("p",{className:`text-sm ${v?"text-gray-400":"text-gray-600"} mb-1`,children:[t.length," ventas realizadas"]}),o.jsxs("p",{className:`text-sm ${v?"text-gray-400":"text-gray-600"}`,children:["Disponible: S/ ",n.toFixed(2)]}),o.jsx(Z.button,{onClick:()=>p("ganancias"),className:`mt-6 w-full px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-green-500/50 ${v?"from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700":"from-green-600 to-emerald-700 hover:from-green-700 hover:to-emerald-800"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Ver Ganancias"})]})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${v?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:w,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${v?"text-purple-400":"text-purple-600"}`,children:[o.jsx(js,{size:20}),"Mi Cuenta"]}),o.jsxs("div",{className:`space-y-3 ${v?"text-gray-300":"text-gray-700"} mb-6`,children:[o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-gray-800/20 dark:bg-gray-700/20",children:[o.jsx(js,{className:"text-purple-400 flex-shrink-0",size:18}),o.jsx("span",{className:"font-medium",children:r})]}),o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-gray-800/20 dark:bg-gray-700/20",children:[o.jsx(qr,{className:"text-purple-400 flex-shrink-0",size:18}),o.jsx("span",{className:"font-medium",children:d})]}),o.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-medium ${c?v?"bg-purple-900/50 text-purple-300 border border-purple-500/30":"bg-purple-100 text-purple-800 border border-purple-300":v?"bg-gray-700/50 text-gray-300 border border-gray-500/30":"bg-gray-200 text-gray-700 border border-gray-300"}`,children:c?"Administrador":"Proveedor"})]}),o.jsx(Z.button,{onClick:()=>p("configuracion"),className:`w-full px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-purple-500/50 ${v?"from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700":"from-purple-600 to-pink-800 hover:from-purple-700 hover:to-pink-900"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Editar Perfil"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[o.jsxs(Z.div,{className:`rounded-2xl p-6 shadow-xl border backdrop-blur-sm ${v?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:w,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${v?"text-indigo-400":"text-indigo-600"}`,children:[o.jsx(ul,{size:20}),"Pedidos recientes"]}),o.jsx(Bt,{children:t.length===0?o.jsxs(Z.div,{className:"text-center py-12",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[o.jsx(Z.div,{className:"mx-auto w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center mb-4 shadow-lg",animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:o.jsx(ul,{className:"text-white",size:24})}),o.jsx("h4",{className:`text-xl font-semibold mb-2 ${v?"text-gray-300":"text-gray-700"}`,children:"No hay pedidos recientes"}),o.jsx("p",{className:`text-sm ${v?"text-gray-400":"text-gray-600"}`,children:"Tus pedidos aparecern aqu"})]}):o.jsxs("div",{className:"overflow-x-auto rounded-xl border",children:[o.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[o.jsx("thead",{className:`${v?"bg-gray-900/80":"bg-gray-200/80"} backdrop-blur-sm`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${v?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Producto"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${v?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Comprador"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${v?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Monto"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${v?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Estado"})]})}),o.jsx("tbody",{className:`${v?"bg-gray-800/70":"bg-white/70"} divide-y divide-gray-700/50`,children:t.slice(0,3).map((E,R)=>{const C=new Date(E.endDate)>new Date&&E.status==="completed",V=E.status==="pending";return o.jsxs(Z.tr,{className:"transition-all duration-300 hover:bg-indigo-500/5",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:R*.1},children:[o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm font-medium ${v?"text-white":"text-gray-900"} truncate max-w-xs`,children:E.productName}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${v?"text-gray-300":"text-gray-700"}`,children:E.buyer}),o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap text-sm font-semibold ${v?"text-indigo-400":"text-indigo-600"}`,children:["S/ ",(E.amount||0).toFixed(2)]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${V?v?"bg-yellow-900/80 text-yellow-300 border border-yellow-500/30":"bg-yellow-100 text-yellow-800 border border-yellow-300":C?v?"bg-green-900/80 text-green-300 border border-green-500/30":"bg-green-100 text-green-800 border border-green-300":v?"bg-red-900/80 text-red-300 border border-red-500/30":"bg-red-100 text-red-800 border border-red-300"}`,children:V?"A pedido":C?"Activo":"Expirado"})})]},E.id||R)})})]}),t.length>3&&o.jsx(Z.button,{onClick:()=>p("pedidos"),className:`w-full mt-4 px-6 py-3 text-center text-sm transition-all duration-300 rounded-xl border-2 font-medium ${v?"border-indigo-500/50 text-indigo-400 hover:bg-indigo-500/10":"border-indigo-500/50 text-indigo-600 hover:bg-indigo-500/10"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Ver todos los pedidos"})]})})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 shadow-xl border backdrop-blur-sm ${v?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:w,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${v?"text-pink-400":"text-pink-600"}`,children:[o.jsx(qr,{size:20}),"Notificaciones"]}),o.jsx(Bt,{children:h.length>0?h.map((E,R)=>o.jsx(Z.div,{className:`border-b py-4 last:border-0 hover:rounded-xl hover:px-2 transition-all duration-300 ${v?"border-gray-600/50 hover:bg-gray-700/50":"border-gray-300/50 hover:bg-gray-200/50"}`,initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3,delay:R*.1},whileHover:{backgroundColor:v?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.5)"},children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex-shrink-0 pt-1",children:o.jsx(qr,{className:"text-pink-400",size:18})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:`font-medium ${v?"text-gray-300":"text-gray-700"} mb-1`,children:E.message}),o.jsx("p",{className:`text-xs ${v?"text-gray-400":"text-gray-500"}`,children:m(E.updatedAt?.toDate?.()||new Date)})]})]})},E.id)):o.jsxs(Z.div,{className:"text-center py-12",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[o.jsx(Z.div,{className:"mx-auto w-16 h-16 rounded-2xl bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center mb-4 shadow-lg",animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:o.jsx(qr,{className:"text-white",size:24})}),o.jsx("h4",{className:`text-xl font-semibold mb-2 ${v?"text-gray-300":"text-gray-700"}`,children:"No hay notificaciones"}),o.jsx("p",{className:`text-sm ${v?"text-gray-400":"text-gray-600"}`,children:"Tus notificaciones aparecern aqu"})]})})]})]})]})};UP.propTypes={username:q.string.isRequired,products:q.arrayOf(q.object).isRequired,orders:q.arrayOf(q.object).isRequired,providerBalance:q.number.isRequired,balanceLoading:q.bool.isRequired,totalStock:q.number.isRequired,totalEarnings:q.number.isRequired,isAdmin:q.bool.isRequired,email:q.string.isRequired,notifications:q.arrayOf(q.object).isRequired,setActiveSection:q.func.isRequired,formatDate:q.func.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const zP=({products:r,setActiveSection:e,handleEdit:t,handleDelete:n,getCategoryDisplayName:s,totalStock:i,theme:a="dark"})=>{const c=a==="dark",d=x=>{const v={netflix:{bg:c?"bg-red-900/30":"bg-red-100",text:c?"text-red-300":"text-red-800"},disney:{bg:c?"bg-blue-900/30":"bg-blue-100",text:c?"text-blue-300":"text-blue-800"},max:{bg:c?"bg-yellow-900/30":"bg-yellow-100",text:c?"text-yellow-300":"text-yellow-800"},spotify:{bg:c?"bg-green-900/30":"bg-green-100",text:c?"text-green-300":"text-green-800"},default:{bg:c?"bg-gray-900/30":"bg-gray-100",text:c?"text-gray-300":"text-gray-700"}};return v[x?.toLowerCase()]||v.default},h={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},p={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}},m={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:c?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.5)",transition:{duration:.2}}};return o.jsxs(Z.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${c?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:h,initial:"hidden",animate:"visible",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-4",children:[o.jsxs(Z.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${c?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:["Inventario",o.jsxs("span",{className:`ml-2 bg-gradient-to-r ${c?"from-blue-400/20 to-purple-600/20":"from-blue-600/20 to-purple-800/20"} px-2 py-1 rounded-full text-sm font-medium`,children:[r.length," productos"]})]}),o.jsxs(Z.button,{onClick:()=>e("subirProducto"),className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 flex items-center ${c?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[o.jsx(AN,{className:"mr-2",size:18}),"Nuevo Producto"]})]}),r.length>0?o.jsx("div",{className:"overflow-x-auto rounded-2xl border shadow-lg",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200/30",children:[o.jsx("thead",{className:`${c?"bg-gray-700/60":"bg-gray-50/60"}`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Producto"}),o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Precio"}),o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Stock"}),o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Categora"}),o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Estado"}),o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200/30",children:o.jsx(Bt,{children:r.map((x,v)=>{const _=d(x.category);return o.jsxs(Z.tr,{className:`transition-colors duration-200 ${c?"text-gray-300 hover:bg-gray-700/50":"text-gray-700 hover:bg-gray-50/50"}`,variants:m,initial:"hidden",animate:"visible",whileHover:"hover",exit:{opacity:0,x:-20},transition:{duration:.3,delay:v*.05},children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-3",children:[x.image?o.jsx("div",{className:"flex-shrink-0",children:o.jsx("img",{className:"w-10 h-10 rounded-full object-cover shadow-md",src:x.image,alt:x.name,loading:"lazy"})}):o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-md",children:o.jsx($q,{className:"text-white",size:16})}),o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx("div",{className:`text-sm font-semibold ${c?"text-white":"text-gray-900"} truncate`,children:x.name})})]})}),o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[o.jsxs("div",{className:"text-sm font-semibold text-green-500",children:["S/ ",(parseFloat(x.price)||0).toFixed(2)]}),x.renewalPrice&&parseFloat(x.renewalPrice)!==parseFloat(x.price)&&o.jsxs("div",{className:`text-xs ${c?"text-gray-400":"text-gray-600"}`,children:["Ren: S/ ",parseFloat(x.renewalPrice).toFixed(2)]})]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(x.stock||0)>0?c?"bg-green-900/50 text-green-400":"bg-green-100 text-green-800":c?"bg-red-900/50 text-red-400":"bg-red-100 text-red-800"}`,children:x.stock||0})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_.bg} ${_.text}`,children:s(x.category)})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${x.status==="En stock"?c?"bg-green-900/80 text-green-400 border border-green-500/30":"bg-green-100 text-green-800 border border-green-300":x.status==="A pedido"?c?"bg-yellow-900/80 text-yellow-400 border border-yellow-500/30":"bg-yellow-100 text-yellow-800 border border-yellow-300":c?"bg-red-900/80 text-red-400 border border-red-500/30":"bg-red-100 text-red-800 border border-red-300"}`,children:x.status||"En stock"})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Z.button,{onClick:()=>t(x),className:"p-2 rounded-xl bg-blue-500/80 hover:bg-blue-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Editar","aria-label":"Editar producto",children:o.jsx(z6,{size:16})}),o.jsx(Z.button,{onClick:()=>n(x.id),className:"p-2 rounded-xl bg-red-500/80 hover:bg-red-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Eliminar","aria-label":"Eliminar producto",children:o.jsx(aw,{size:16})})]})})]},x.id||v)})})})]})}):o.jsxs(Z.div,{className:`text-center py-16 rounded-2xl border shadow-xl backdrop-blur-sm ${c?"bg-gray-800/50 border-gray-700/50":"bg-gray-100/50 border-gray-200/50"}`,variants:p,initial:"hidden",animate:"visible",whileHover:"hover",children:[o.jsx(Z.div,{className:`mx-auto w-20 h-20 rounded-2xl bg-gradient-to-br from-gray-400 to-gray-500 flex items-center justify-center mb-6 shadow-lg ${c?"bg-gray-700/50":"bg-gray-200/50"}`,animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:o.jsx(nw,{className:"text-white",size:32})}),o.jsx("h4",{className:`text-xl font-semibold mb-2 ${c?"text-gray-300":"text-gray-700"}`,children:"No tienes productos registrados"}),o.jsx("p",{className:`text-sm ${c?"text-gray-400":"text-gray-600"} mb-6`,children:"Agrega tu primer producto para comenzar a vender"}),o.jsxs(Z.button,{onClick:()=>e("subirProducto"),className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 flex items-center ${c?"from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"from-blue-600 to-purple-800 hover:from-blue-700 hover:to-purple-900"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[o.jsx(AN,{className:"mr-2",size:18}),"Agregar Producto"]})]})]})};zP.propTypes={products:q.arrayOf(q.shape({id:q.string.isRequired,name:q.string.isRequired,price:q.oneOfType([q.string,q.number]).isRequired,stock:q.oneOfType([q.string,q.number]),status:q.string,category:q.string,image:q.string})).isRequired,setActiveSection:q.func.isRequired,handleEdit:q.func.isRequired,handleDelete:q.func.isRequired,getCategoryDisplayName:q.func.isRequired,totalStock:q.number.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const Nte=({soldAccounts:r,formatDate:e,theme:t="dark"})=>{const n=t==="dark",s={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return o.jsxs(Z.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${n?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:s,initial:"hidden",animate:"visible",children:[o.jsxs(Z.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-8 bg-clip-text text-transparent bg-gradient-to-r ${n?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"} text-center`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:[o.jsx(TN,{className:"inline mr-2",size:32}),"Cuentas Vendidas"]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${n?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:i,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${n?"text-blue-400":"text-blue-600"}`,children:[o.jsx(nw,{size:20}),"Registro de Ventas"]}),o.jsx(Bt,{children:r.length===0?o.jsxs(Z.div,{className:"text-center py-12",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[o.jsx(Z.div,{className:"mx-auto w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center mb-4 shadow-lg",animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:o.jsx(TN,{className:"text-white",size:24})}),o.jsx("h4",{className:`text-xl font-semibold mb-2 ${n?"text-gray-300":"text-gray-700"}`,children:"No hay cuentas vendidas"}),o.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"Las cuentas vendidas aparecern aqu"})]}):o.jsx("div",{className:"overflow-x-auto rounded-xl border",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[o.jsx("thead",{className:`${n?"bg-gray-900/80":"bg-gray-200/80"} backdrop-blur-sm`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${n?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Producto"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${n?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Email"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${n?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Perfil"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${n?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Fecha de Venta"})]})}),o.jsx("tbody",{className:`${n?"bg-gray-800/70":"bg-white/70"} divide-y divide-gray-700/50`,children:r.map((a,c)=>o.jsxs(Z.tr,{className:"transition-all duration-300 hover:bg-blue-500/5",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:c*.1},children:[o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm font-medium ${n?"text-white":"text-gray-900"} truncate max-w-xs`,children:a.productName}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-gray-300":"text-gray-700"}`,children:a.email}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-gray-300":"text-gray-700"}`,children:a.profile||"N/A"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-gray-300":"text-gray-700"}`,children:e(a.saleDate)})]},a.id||c))})]})})})]})]})},kte=({product:r,setProduct:e,handleChange:t,handleFileChange:n,handleStockChange:s,handleAccountFieldChange:i,handleSubmit:a,setActiveSection:c,theme:d="dark"})=>{const h=d==="dark",p={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},m={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return o.jsxs(Z.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${h?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:p,initial:"hidden",animate:"visible",children:[o.jsxs(Z.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-8 bg-clip-text text-transparent bg-gradient-to-r ${h?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:[o.jsx(ng,{className:"inline mr-2",size:32}),"Subir Nuevo Producto"]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${h?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:m,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${h?"text-blue-400":"text-blue-600"}`,children:[o.jsx(H6,{size:20}),"Imagen del producto"]}),o.jsx("div",{className:`flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-xl ${h?"bg-gray-900/80 border-gray-700/50":"bg-gray-200/80 border-gray-300/50"}`,children:r.image?o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:r.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain",loading:"lazy"}),o.jsx(Z.button,{type:"button",onClick:()=>e({...r,image:""}),className:`absolute top-0 right-0 ${h?"bg-blue-500":"bg-blue-600"} text-white rounded-full p-1 shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},children:o.jsx(Zs,{size:16})})]}):o.jsxs(o.Fragment,{children:[o.jsx(ng,{className:`mx-auto h-12 w-12 ${h?"text-gray-400":"text-gray-500"}`}),o.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:o.jsxs("label",{htmlFor:"file-upload",className:`relative cursor-pointer rounded-xl font-medium ${h?"bg-gray-900/50 text-blue-400 hover:text-blue-500":"bg-gray-200/50 text-blue-600 hover:text-blue-700"} focus-within:outline-none`,children:[o.jsx("span",{children:"Subir una imagen"}),o.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:x=>n(x),accept:"image/*"})]})}),o.jsx("p",{className:`text-xs ${h?"text-gray-500":"text-gray-600"}`,children:"PNG, JPG, GIF hasta 10MB"})]})})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${h?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:m,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${h?"text-purple-400":"text-purple-600"}`,children:[o.jsx(K6,{size:20}),"Informacin Bsica"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Nombre del producto*"}),o.jsx("input",{type:"text",name:"name",value:r.name,onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500`,placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Categora*"}),o.jsxs("select",{name:"category",value:r.category,onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all`,children:[o.jsx("option",{value:"Netflix",children:"Netflix"}),o.jsx("option",{value:"Spotify",children:"Spotify"}),o.jsx("option",{value:"Disney",children:"Disney+"}),o.jsx("option",{value:"Max",children:"Max"}),o.jsx("option",{value:"Prime Video",children:"Prime Video"}),o.jsx("option",{value:"Vix",children:"Vix"}),o.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),o.jsx("option",{value:"Canva",children:"Canva"}),o.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),o.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),o.jsx("option",{value:"Dgo",children:"DGO"}),o.jsx("option",{value:"Liga Max",children:"Liga Max"}),o.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),o.jsx("option",{value:"Youtube",children:"YouTube"}),o.jsx("option",{value:"Deezer",children:"Deezer"}),o.jsx("option",{value:"Tidal",children:"Tidal"}),o.jsx("option",{value:"Vpn",children:"VPN"}),o.jsx("option",{value:"WinTv",children:"WinTV"}),o.jsx("option",{value:"Apple Music",children:"CinePlanet "}),o.jsx("option",{value:"Apple Tv",children:"Apple TV"}),o.jsx("option",{value:"Iptv",children:"IPTV"}),o.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),o.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),o.jsx("option",{value:"Pornhub",children:"Pornhub"}),o.jsx("option",{value:"Paramount",children:"Paramount"}),o.jsx("option",{value:"Licencias",children:"Licencias"}),o.jsx("option",{value:"Capcut",children:"Capcut"}),o.jsx("option",{value:"Duolingo",children:"Duolingo"}),o.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Tipo de cuenta*"}),o.jsxs("select",{name:"accountType",value:r.accountType,onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all`,children:[o.jsx("option",{value:"Premium",children:"Premium"}),o.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Estado*"}),o.jsxs("select",{name:"status",value:r.status,onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all`,children:[o.jsx("option",{value:"En stock",children:"En stock"}),o.jsx("option",{value:"A pedido",children:"A pedido"}),o.jsx("option",{value:"Agotado",children:"Agotado"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Stock*"}),o.jsx("input",{type:"number",name:"stock",value:r.status==="Agotado"?0:r.stock,onChange:s,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all ${r.status==="Agotado"?"opacity-50 cursor-not-allowed":""} placeholder-gray-500`,min:"0",required:!0,disabled:r.status==="Agotado"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Precio (S/)*"}),o.jsx("input",{type:"number",name:"price",value:r.price,onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500`,placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",name:"renewal",checked:r.renewal,onChange:t,className:`h-4 w-4 rounded ${h?"text-purple-400 focus:ring-purple-400 border-gray-600/50":"text-purple-600 focus:ring-purple-600 border-gray-300/50"}`}),o.jsx("label",{className:`ml-2 text-sm ${h?"text-gray-300":"text-gray-700"}`,children:"Tiene renovacin?"})]})]}),r.renewal&&o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Precio de renovacin (S/)*"}),o.jsx("input",{type:"number",name:"renewalPrice",value:r.renewalPrice,onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500`,placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-6 mb-8",children:[o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${h?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:m,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${h?"text-green-400":"text-green-600"}`,children:[o.jsx(Dc,{size:20}),"Duracin y Contacto"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Duracin (das)"}),o.jsx("input",{type:"number",name:"duration",value:r.duration,onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500`,placeholder:"Dejar vaco para ilimitado",min:"1"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:["Telfono de contacto ",r.status==="A pedido"?"*":""]}),o.jsx("input",{type:"text",name:"providerPhone",value:r.providerPhone,onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500`,placeholder:"Ej: +51 987654321",required:r.status==="A pedido"})]})]})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${h?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:m,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${h?"text-indigo-400":"text-indigo-600"}`,children:[o.jsx(W6,{size:20}),"Enlaces y Descripciones"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"URL del producto (opcional)"}),o.jsx("input",{type:"url",name:"productUrl",value:r.productUrl||"",onChange:t,className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition-all placeholder-gray-500`,placeholder:"Ej: https://www.ejemplo.com/producto"})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Detalles del producto"}),o.jsx("textarea",{name:"details",value:r.details,onChange:t,rows:"3",className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition-all placeholder-gray-500`,placeholder:"Describe los detalles y caractersticas del producto"})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Trminos y condiciones"}),o.jsx("textarea",{name:"terms",value:r.terms,onChange:t,rows:"3",className:`w-full px-4 py-2 rounded-xl border ${h?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition-all placeholder-gray-500`,placeholder:"Especifica los trminos y condiciones de uso"})]})]})]}),r.status==="En stock"&&o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${h?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:m,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${h?"text-pink-400":"text-pink-600"}`,children:[o.jsx(wd,{size:20}),"Cuentas Asociadas"]}),o.jsx("p",{className:`text-sm mb-4 ${h?"text-gray-400":"text-gray-600"}`,children:"Debe completar todas las cuentas segn el stock indicado"}),o.jsx(Bt,{children:o.jsx("div",{className:"space-y-4",children:r.accounts.map((x,v)=>o.jsxs(Z.div,{className:`border rounded-xl p-4 ${h?"bg-gray-900/70 border-gray-700/50":"bg-gray-200/70 border-gray-300/50"} backdrop-blur-sm`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:v*.1},children:[o.jsxs("h4",{className:`text-sm font-medium ${h?"text-white":"text-gray-900"} mb-3 flex items-center gap-2`,children:["Cuenta ",v+1]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-medium ${h?"text-gray-400":"text-gray-600"} mb-1`,children:"Correo electrnico*"}),o.jsx("input",{type:"email",value:x.email,onChange:_=>i(v,"email",_.target.value),className:`w-full px-3 py-2 rounded-xl border ${h?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all text-sm`,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-medium ${h?"text-gray-400":"text-gray-600"} mb-1`,children:"Contrasea*"}),o.jsx("input",{type:"text",value:x.password,onChange:_=>i(v,"password",_.target.value),className:`w-full px-3 py-2 rounded-xl border ${h?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all text-sm`,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-medium ${h?"text-gray-400":"text-gray-600"} mb-1`,children:"Perfil (opcional)"}),o.jsx("input",{type:"text",value:x.profile,onChange:_=>i(v,"profile",_.target.value),className:`w-full px-3 py-2 rounded-xl border ${h?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all text-sm`,placeholder:"Ej: Perfil 1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-medium ${h?"text-gray-400":"text-gray-600"} mb-1`,children:"PIN (opcional)"}),o.jsx("input",{type:"text",value:x.pin,onChange:_=>i(v,"pin",_.target.value),className:`w-full px-3 py-2 rounded-xl border ${h?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all text-sm`,placeholder:"Ej: 1234"})]})]})]},v))})})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[o.jsx(Z.button,{onClick:()=>c("inventario"),className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 ${h?"from-gray-700 to-gray-600 hover:from-gray-600 hover:to-gray-500":"from-gray-300 to-gray-400 hover:from-gray-400 hover:to-gray-500"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancelar"}),o.jsx(Z.button,{onClick:a,className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-pink-500/50 ${h?"from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700":"from-pink-600 to-purple-800 hover:from-pink-700 hover:to-purple-900"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Subir Producto"})]})]})},Ste=({orders:r,totalEarnings:e,providerBalance:t,balanceLoading:n,getCategoryDisplayName:s,formatDate:i,theme:a="dark"})=>{const c=a==="dark",d={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return o.jsxs(Z.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${c?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:d,initial:"hidden",animate:"visible",children:[o.jsxs(Z.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-8 bg-clip-text text-transparent bg-gradient-to-r ${c?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"} text-center`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:[o.jsx(Xs,{className:"inline mr-2",size:32}),"Ganancias"]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${c?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:h,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${c?"text-green-400":"text-green-600"}`,children:[o.jsx(Xs,{size:20}),"Resumen Financiero"]}),o.jsxs("p",{className:`text-4xl font-bold ${c?"text-white":"text-gray-900"} mb-2`,children:["S/ ",e.toFixed(2)]}),o.jsxs("p",{className:`text-sm ${c?"text-gray-400":"text-gray-600"} mb-1`,children:[r.length," ventas realizadas"]}),n?o.jsxs("div",{className:"flex items-center justify-center py-4",children:[o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-500 mr-2"}),o.jsx("span",{className:`text-sm ${c?"text-gray-400":"text-gray-600"}`,children:"Cargando saldo..."})]}):o.jsxs("p",{className:`text-sm ${c?"text-gray-400":"text-gray-600"}`,children:["Disponible: S/ ",t.toFixed(2)]})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${c?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:h,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${c?"text-indigo-400":"text-indigo-600"}`,children:[o.jsx(ul,{size:20}),"Historial de Ventas"]}),o.jsx(Bt,{children:r.length===0?o.jsxs(Z.div,{className:"text-center py-12",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[o.jsx(Z.div,{className:"mx-auto w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center mb-4 shadow-lg",animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:o.jsx(ul,{className:"text-white",size:24})}),o.jsx("h4",{className:`text-xl font-semibold mb-2 ${c?"text-gray-300":"text-gray-700"}`,children:"No hay ventas registradas"}),o.jsx("p",{className:`text-sm ${c?"text-gray-400":"text-gray-600"}`,children:"Tus ventas aparecern aqu"})]}):o.jsxs("div",{className:"overflow-x-auto rounded-xl border",children:[o.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[o.jsx("thead",{className:`${c?"bg-gray-900/80":"bg-gray-200/80"} backdrop-blur-sm`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${c?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Producto"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${c?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Categora"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${c?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Comprador"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${c?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Contacto"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${c?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Fecha"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${c?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Monto"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${c?"text-gray-300":"text-gray-600"} uppercase tracking-wider`,children:"Estado"})]})}),o.jsx("tbody",{className:`${c?"bg-gray-800/70":"bg-white/70"} divide-y divide-gray-700/50`,children:r.slice(0,10).map((p,m)=>o.jsxs(Z.tr,{className:"transition-all duration-300 hover:bg-indigo-500/5",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:m*.1},children:[o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm font-medium ${c?"text-white":"text-gray-900"} truncate max-w-xs`,children:p.productName}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${c?"text-gray-300":"text-gray-700"}`,children:s(p.category)}),o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[o.jsx("div",{className:`text-sm font-medium ${c?"text-white":"text-gray-900"}`,children:p.buyer}),o.jsx("div",{className:`text-xs ${c?"text-gray-400":"text-gray-600"}`,children:p.buyerEmail})]}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${c?"text-gray-300":"text-gray-700"}`,children:p.buyerPhone}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${c?"text-gray-300":"text-gray-700"}`,children:i(p.saleDate)}),o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap text-sm font-semibold ${c?"text-indigo-400":"text-indigo-600"}`,children:["S/ ",(p.amount||0).toFixed(2)]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${c?"bg-green-900/80 text-green-300 border border-green-500/30":"bg-green-100 text-green-800 border border-green-300"}`,children:"Completado"})})]},p.id||m))})]}),r.length>10&&o.jsxs("p",{className:`text-center mt-4 text-sm ${c?"text-gray-400":"text-gray-600"}`,children:["Mostrando las primeras 10 ventas. Hay ",r.length," en total."]})]})})]})]})]})},HP=({orders:r,searchQuery:e,setSearchQuery:t,getCategoryDisplayName:n,formatDate:s,handleEditOrder:i,handleActivateOrder:a,handleDeleteOrder:c,theme:d="dark"})=>{const[h,p]=A.useState({key:null,direction:"asc"}),m=d==="dark",x={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},v={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:m?"#1F2937":"#F3F4F6",transition:{duration:.2},scale:1.005}},_=A.useMemo(()=>{let L=[...r].filter(K=>(K.productName||"").toLowerCase().includes(e.toLowerCase())||(K.category||"").toLowerCase().includes(e.toLowerCase())||(K.provider||"").toLowerCase().includes(e.toLowerCase())||(K.buyer||"").toLowerCase().includes(e.toLowerCase())||(K.accountDetails?.email||"").toLowerCase().includes(e.toLowerCase()));return h.key&&L.sort((K,H)=>{let S=K[h.key]||"",k=H[h.key]||"";return typeof S=="string"&&(S=S.toLowerCase()),typeof k=="string"&&(k=k.toLowerCase()),S<k?h.direction==="asc"?-1:1:S>k?h.direction==="asc"?1:-1:0}),L},[r,e,h]),w=L=>{const K={netflix:{bg:m?"bg-red-900/30":"bg-red-100",text:m?"text-red-300":"text-red-800"},disney:{bg:m?"bg-blue-900/30":"bg-blue-100",text:m?"text-blue-300":"text-blue-800"},max:{bg:m?"bg-yellow-900/30":"bg-yellow-100",text:m?"text-yellow-300":"text-yellow-800"},spotify:{bg:m?"bg-green-900/30":"bg-green-100",text:m?"text-green-300":"text-green-800"},default:{bg:m?"bg-gray-900/30":"bg-gray-100",text:m?"text-gray-300":"text-gray-700"}};return K[L?.toLowerCase()]||K.default},E=(L,K)=>{const H=L.status||"pending",k=(L.daysRemaining||0)>0;let P,j,M;return H==="soporte"?(P="En soporte",j=K?"text-blue-400":"text-blue-600",M=o.jsx(Ka,{className:j,title:"En Soporte"})):H==="rechazado"?(P="No aplica soporte",j=K?"text-amber-700":"text-amber-900",M=o.jsx(Ys,{className:j,title:"No aplica soporte"})):H==="refunded"?(P="Reembolsado",j=K?"text-gray-400":"text-gray-600",M=o.jsx(Ys,{className:j,title:"Reembolsado"})):H==="pending"?(P="Pendiente",j=K?"text-yellow-400":"text-yellow-600",M=o.jsx(Dc,{className:j,title:"Pendiente"})):k?(P="Activo",j=K?"text-green-400":"text-green-600",M=o.jsx(vd,{className:j,title:"Activo"})):(P="Expirado",j=K?"text-red-400":"text-red-600",M=o.jsx(Ys,{className:j,title:"Expirado"})),{text:P,color:j,icon:M}},R=L=>{p(K=>({key:L,direction:K.key===L&&K.direction==="asc"?"desc":"asc"}))},C=L=>h.key!==L?null:h.direction==="asc"?o.jsx(rx,{className:"ml-1"}):o.jsx(tx,{className:"ml-1"}),V=()=>{const L=_.map(k=>{const P=k.status||"pending",j=P==="pending",M=P==="soporte",D=P==="rechazado",O=P==="refunded",pe=k.daysRemaining||0,Ae=pe>0;let Fe;M?Fe="En Soporte":D?Fe="No aplica soporte":O?Fe="Reembolsado":Ae?Fe="Activo":j?Fe="Pendiente":Fe="Expirado";const Me=M||D||O||j&&!Ae;let Ee;return Me?Ee=Fe:Ee=`${pe} da${pe===1?"":"s"}`,{Estado:Fe,Producto:k.productName||"Sin nombre",Categora:n(k.category),Proveedor:k.provider||"N/A",Monto:`S/ ${(k.amount||0).toFixed(2)}`,"Tiempo Restante":Ee,"Fecha de Inicio":k.startDate?s(k.startDate):"N/A","Fecha de Vencimiento":k.endDate?s(k.endDate):"N/A",Comprador:k.buyer||"N/A",Telfono:k.buyerPhone||"N/A",Email:k.accountDetails?.email||"N/A",Contrasea:k.accountDetails?.password||"N/A",Perfil:k.accountDetails?.profile||"N/A",PIN:k.accountDetails?.pin||"N/A"}}),K=gi.json_to_sheet(L),H=gi.book_new();gi.book_append_sheet(H,K,"Pedidos");const S=new Date().toISOString().slice(0,10).replace(/-/g,"");hx(H,`orders_export_${S}.xlsx`)};return o.jsxs(Z.div,{className:`backdrop-blur-md p-2 sm:p-4 md:p-6 lg:p-8 rounded-3xl shadow-2xl w-full border ${m?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:x,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"orders-title",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 gap-4",children:[o.jsxs("h3",{id:"orders-title",className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight flex items-center bg-clip-text text-transparent bg-gradient-to-r ${m?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,children:[o.jsx(ul,{className:"mr-2"})," Mis Pedidos",o.jsx("span",{className:`ml-2 bg-gradient-to-r ${m?"from-blue-400/20 to-purple-600/20":"from-blue-600/20 to-purple-800/20"} px-2 py-1 rounded-full text-sm font-medium`,children:_.length})]}),o.jsxs("div",{className:"flex items-center gap-4 w-full lg:w-auto",children:[o.jsxs("div",{className:"relative flex-1 md:w-64 lg:w-80",children:[o.jsx("input",{type:"text",placeholder:"Buscar pedidos por nombre, categora, proveedor, cliente o email...",className:`w-full pl-10 pr-4 py-3 rounded-2xl shadow-md transition-all duration-300 ${m?"bg-gray-800/70 text-white border border-gray-600/50 placeholder-gray-400 focus:border-blue-500/50":"bg-white/70 text-gray-900 border border-gray-300/50 placeholder-gray-500 focus:border-blue-500/50"} focus:ring-2 focus:ring-blue-500/30 focus:outline-none`,value:e,onChange:L=>t(L.target.value),"aria-label":"Buscar pedidos por nombre, categora, proveedor, cliente o email"}),o.jsx(xa,{className:`absolute left-3 top-3.5 ${m?"text-gray-400":"text-gray-500"}`,size:18})]}),o.jsxs(Z.button,{onClick:V,className:`p-3 rounded-2xl shadow-lg flex items-center gap-2 ${m?"bg-green-600/80 hover:bg-green-700/90 text-white":"bg-green-500/80 hover:bg-green-600/90 text-white"} transition-all duration-300`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Descargar pedidos como Excel","aria-label":"Exportar pedidos a Excel",children:[o.jsx(nx,{size:18}),o.jsx("span",{className:"hidden sm:inline text-sm",children:"Exportar"})]})]})]}),o.jsx(Bt,{children:_.length>0?o.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:o.jsx("div",{className:"overflow-x-auto rounded-2xl border border-gray-200/50 shadow-lg",children:o.jsxs("table",{className:`min-w-full divide-y divide-gray-200/30 ${m?"bg-gray-800/50":"bg-white/50"}`,children:[o.jsx("thead",{className:`${m?"bg-gray-700/60":"bg-gray-50/60"}`,children:o.jsx("tr",{children:[{key:"status",label:"Estado"},{key:"productName",label:"Producto"},{key:"category",label:"Categora"},{key:"provider",label:"Proveedor"},{key:"amount",label:"Monto"},{key:"daysRemaining",label:"Tiempo Restante"},{key:"startDate",label:"Inicio"},{key:"endDate",label:"Vencimiento"},{key:"buyer",label:"Comprador"},{key:"buyerPhone",label:"Telfono"},{key:"email",label:"Email"},{key:"password",label:"Contrasea"},{key:"profile",label:"Perfil"},{key:"pin",label:"PIN"},{label:"Acciones"}].map(({key:L,label:K})=>o.jsx("th",{className:`px-2 sm:px-3 md:px-4 py-3 sm:py-4 text-left text-xs font-semibold uppercase tracking-wider ${m?"text-gray-300":"text-gray-700"} cursor-pointer hover:text-blue-400 transition-colors`,onClick:()=>L&&R(L),children:o.jsxs("div",{className:"flex items-center justify-between",children:[K,L&&C(L)]})},L||K))})}),o.jsx("tbody",{className:"divide-y divide-gray-200/30",children:_.map(L=>{const K=parseFloat(L.amount)||0,H=L.status||"pending",S=H==="pending",k=H==="soporte",P=H==="rechazado",j=H==="refunded",M=L.daysRemaining||0,D=Math.min(L.timeElapsedPercentage||0,100),O=E(L,m),pe=w(L.category);let Ae;D<70?Ae=m?"bg-green-500":"bg-green-600":D<90?Ae=m?"bg-orange-500":"bg-orange-600":Ae=m?"bg-red-500":"bg-red-600";const Fe=!["En soporte","No aplica soporte","Reembolsado","Pendiente"].includes(O.text),Me=k||P||j||S,Ee=Me?O.text:`${M} da${M===1?"":"s"}`,Te=Fe?Ae.replace("bg-","text-"):O.color,Ne=L.provider||"BlackStreaming",ae=L.buyerPhone?L.buyerPhone.replace(/[^0-9]/g,""):null,W=L.soporteMessage?`

 *Nota de Soporte*: ${L.soporteMessage}`:"",oe=encodeURIComponent(`Hola!  Soy ${Ne} de BlackStreaming.

 *Necesito contactarte* sobre tu pedido de *${L.productName||"Sin nombre"}*.
 *Pedido*: ${L.id||"N/A"}
 Podras confirmarme algunos detalles o resolver una duda rpida?

Gracias por tu paciencia! `),ie=encodeURIComponent(`Hola!  *${Ne}* de BlackStreaming aqu.

 *Tu cuenta est lista!* Has adquirido:
 *${L.productName||"Sin nombre"}*
 *Precio*: S/ ${K.toFixed(2)}
 *Duracin*: ${L.durationDays||30} das

 Tu suscripcin a *${L.productName||"Sin nombre"}* (${Ne}) sigue activa! 
 *Te quedan*: ${Me?k?"En Soporte":P?"No aplica soporte":j?"Reembolsado":"Pendiente de activacin":`${M} da${M===1?"":"s"}`} para disfrutar! 
 *Detalles*:
 *Usuario*: ${L.accountDetails?.email||"N/A"}
 *Contrasea*: ${L.accountDetails?.password||"N/A"}
 *Perfil*: ${L.accountDetails?.profile||"N/A"}
 *PIN*: ${L.accountDetails?.pin||"N/A"}
 *Compra*: ${L.startDate?s(L.startDate):"N/A"}
 *Vencimiento*: ${L.endDate?s(L.endDate):"N/A"}
 *Telfono*: ${L.buyerPhone||"N/A"}

`+W+` *${Ne}* te recomienda renovar a tiempo para no perderte nada! 
 Sigue disfrutando y contctanos si necesitas ayuda! `);return o.jsxs(Z.tr,{className:`transition-colors duration-200 ${m?"text-gray-300 hover:bg-gray-700/50":"text-gray-700 hover:bg-gray-50/50"}`,variants:v,initial:"hidden",animate:"visible",whileHover:"hover","aria-labelledby":`order-${L.id}-title`,children:[o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`p-1.5 rounded-full ${O.color.replace("text-","bg-").replace("-600","/20").replace("-400","/20")}`,children:O.icon}),o.jsx("span",{className:`${O.color} font-medium`,children:O.text})]})}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4",children:o.jsx("h4",{id:`order-${L.id}-title`,className:"font-semibold text-blue-500 hover:text-blue-600 transition-colors",children:L.productName||"Sin nombre"})}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${pe.bg} ${pe.text}`,children:n(L.category)})}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap font-mono text-sm",children:L.provider||"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap",children:o.jsx("div",{className:"space-y-1",children:o.jsxs("p",{className:"font-bold text-lg",children:["S/ ",K.toFixed(2)]})})}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[Fe&&o.jsx("div",{className:"relative",children:o.jsx("div",{className:`w-20 h-2 rounded-full overflow-hidden ${m?"bg-gray-600/40":"bg-gray-300/40"}`,children:o.jsx(Z.div,{className:`h-2 rounded-full ${Ae}`,initial:{width:0},animate:{width:`${D}%`},transition:{duration:1.5,ease:"easeInOut"}})})}),o.jsx("span",{className:`text-sm font-medium ${Te}`,children:Ee})]})}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap text-sm text-gray-500",children:L.startDate?s(L.startDate):"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap text-sm text-gray-500",children:L.endDate?s(L.endDate):"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 max-w-sm md:max-w-md truncate",title:L.buyer||"N/A",children:L.buyer||"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap text-sm text-gray-500",children:L.buyerPhone||"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 max-w-sm md:max-w-md truncate",title:L.accountDetails?.email||"N/A",children:L.accountDetails?.email||"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 max-w-sm md:max-w-md truncate",title:L.accountDetails?.password||"N/A",children:L.accountDetails?.password||"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap text-sm",children:L.accountDetails?.profile||"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap text-sm font-mono",children:L.accountDetails?.pin||"N/A"}),o.jsx("td",{className:"px-2 sm:px-3 md:px-4 py-3 sm:py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Z.button,{onClick:()=>i(L),className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-blue-500/80 hover:bg-blue-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Editar cuenta","aria-label":`Editar cuenta para el pedido ${L.id}`,children:o.jsx(z6,{size:16})}),S&&o.jsx(Z.button,{onClick:()=>a(L.id),className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-green-500/80 hover:bg-green-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Activar pedido","aria-label":`Activar pedido ${L.id}`,children:o.jsx(vd,{size:16})}),ae&&o.jsxs(o.Fragment,{children:[o.jsx(Z.a,{href:`https://wa.me/${ae}?text=${oe}`,target:"_blank",rel:"noopener noreferrer",className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-teal-500/80 hover:bg-teal-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Contactar cliente","aria-label":`Contactar cliente para el pedido ${L.id}`,children:o.jsx(qr,{size:16})}),!j&&!k&&!P&&o.jsx(Z.a,{href:`https://wa.me/${ae}?text=${ie}`,target:"_blank",rel:"noopener noreferrer",className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-amber-500/80 hover:bg-amber-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Notificar cliente sobre estado o vencimiento","aria-label":`Notificar cliente para el pedido ${L.id}`,children:o.jsx(Ah,{size:16})})]}),o.jsx(Z.button,{onClick:()=>c(L.id),className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-red-500/80 hover:bg-red-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Eliminar pedido","aria-label":`Eliminar pedido ${L.id}`,children:o.jsx(aw,{size:16})})]})})]},L.id)})})]})})}):o.jsxs(Z.div,{className:"text-center py-16",variants:x,initial:"hidden",animate:"visible",children:[o.jsx(Z.div,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:o.jsx(xa,{className:`mx-auto text-6xl ${m?"text-gray-400":"text-gray-500"} mb-4`,"aria-hidden":"true"})}),o.jsx("h4",{className:`text-xl font-semibold ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"No hay pedidos encontrados"}),o.jsx("p",{className:`text-sm ${m?"text-gray-400":"text-gray-600"}`,children:"Intenta ajustar tu bsqueda o realiza tu primer pedido."})]})})]})};HP.propTypes={orders:q.arrayOf(q.shape({id:q.string.isRequired,productName:q.string,category:q.string,provider:q.string,amount:q.oneOfType([q.string,q.number]),status:q.string,startDate:q.oneOfType([q.string,q.instanceOf(Date)]),endDate:q.oneOfType([q.string,q.instanceOf(Date)]),daysRemaining:q.number,timeElapsedPercentage:q.number,accountDetails:q.shape({email:q.string,password:q.string,profile:q.string,pin:q.string}),buyer:q.string,buyerPhone:q.string,durationDays:q.number,soporteMessage:q.string})).isRequired,searchQuery:q.string.isRequired,setSearchQuery:q.func.isRequired,getCategoryDisplayName:q.func.isRequired,formatDate:q.func.isRequired,handleEditOrder:q.func.isRequired,handleActivateOrder:q.func.isRequired,handleDeleteOrder:q.func.isRequired,theme:q.oneOf(["light","dark"]).isRequired};const Cte=({accountDetails:r,handleAccountChange:e,handleUpdateAccount:t,theme:n="dark"})=>{const s=n==="dark",i={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},a={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return o.jsxs(Z.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${s?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:i,initial:"hidden",animate:"visible",children:[o.jsxs(Z.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-8 bg-clip-text text-transparent bg-gradient-to-r ${s?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"} text-center`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:[o.jsx(G6,{className:"inline mr-2",size:32}),"Configuracin"]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${s?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:a,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${s?"text-blue-400":"text-blue-600"}`,children:[o.jsx(iw,{size:20}),"Informacin de Cuenta"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${s?"text-gray-300":"text-gray-700"} mb-2`,children:"Correo electrnico"}),o.jsx("input",{type:"email",value:r.email,disabled:!0,className:`w-full px-4 py-2 rounded-xl border ${s?"bg-gray-700/50 text-gray-400 border-gray-600/50":"bg-gray-200/50 text-gray-600 border-gray-300/50"} cursor-not-allowed focus:ring-0`})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium ${s?"text-gray-300":"text-gray-700"} mb-2 flex items-center gap-2`,children:[o.jsx(tg,{size:16}),"Nueva contrasea (opcional)"]}),o.jsx("input",{type:"password",name:"password",value:r.password,onChange:e,className:`w-full px-4 py-2 rounded-xl border ${s?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Dejar en blanco para no cambiar"})]})]})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${s?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:a,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${s?"text-purple-400":"text-purple-600"}`,children:[o.jsx(sw,{size:20}),"Preferencias"]}),o.jsx("textarea",{name:"preferences",value:r.preferences,onChange:e,rows:"6",className:`w-full px-4 py-2 rounded-xl border resize-none ${s?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500`,placeholder:"Especifica tus preferencias o notas"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx(Z.button,{onClick:t,className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-pink-500/50 ${s?"from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700":"from-pink-600 to-purple-800 hover:from-pink-700 hover:to-purple-900"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Guardar Cambios"})})]})},WP=({orders:r=[],setOrders:e,fetchOrders:t,searchQuery:n,setSearchQuery:s,getCategoryDisplayName:i,formatDate:a,theme:c="dark"})=>{const[d,h]=A.useState({}),[p,m]=A.useState({key:null,direction:"asc"}),x=c==="dark",v={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},_={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},hover:{backgroundColor:x?"#1F2937":"#F3F4F6",transition:{duration:.2},scale:1.005}},w=H=>{const S={netflix:{bg:x?"bg-red-900/30":"bg-red-100",text:x?"text-red-300":"text-red-800"},disney:{bg:x?"bg-blue-900/30":"bg-blue-100",text:x?"text-blue-300":"text-blue-800"},max:{bg:x?"bg-yellow-900/30":"bg-yellow-100",text:x?"text-yellow-300":"text-yellow-800"},spotify:{bg:x?"bg-green-900/30":"bg-green-100",text:x?"text-green-300":"text-green-800"},default:{bg:x?"bg-gray-900/30":"bg-gray-100",text:x?"text-gray-300":"text-gray-700"}};return S[H?.toLowerCase()]||S.default},E=A.useMemo(()=>{let S=[...r.filter(k=>k.status==="soporte")].filter(k=>(k.productName||"").toLowerCase().includes(n.toLowerCase())||(k.customerName||k.buyerName||"").toLowerCase().includes(n.toLowerCase()));return p.key&&S.sort((k,P)=>{let j=k[p.key]||"",M=P[p.key]||"";return p.key==="soporteMessage"?(j=k.soporteMessage||"",M=P.soporteMessage||""):p.key==="category"&&(j=i(k.category),M=i(P.category)),typeof j=="string"&&(j=j.toLowerCase()),typeof M=="string"&&(M=M.toLowerCase()),j<M?p.direction==="asc"?-1:1:j>M?p.direction==="asc"?1:-1:0}),S},[r,n,p,i]),R=H=>{m(S=>({key:H,direction:S.key===H&&S.direction==="asc"?"desc":"asc"}))},C=H=>p.key!==H?null:p.direction==="asc"?o.jsx(rx,{className:"ml-1"}):o.jsx(tx,{className:"ml-1"}),V=()=>{const H=E.map(j=>{const M=j.customerName||j.buyerName||"N/A";return{Producto:j.productName||"Sin nombre",Categora:i(j.category),Comprador:M,Telfono:j.buyerPhone||"N/A",Email:j.accountDetails?.email||"N/A","Mensaje de Soporte":j.soporteMessage||"Sin mensaje","Fecha de Inicio":j.startDate?a(j.startDate):"N/A","Fecha de Vencimiento":j.endDate?a(j.endDate):"N/A"}}),S=gi.json_to_sheet(H),k=gi.book_new();gi.book_append_sheet(k,S,"Pedidos en Soporte");const P=new Date().toISOString().slice(0,10).replace(/-/g,"");hx(k,`pedidos_soporte_export_${P}.xlsx`)},L=async H=>{h(S=>({...S,[`reject_${H}`]:!0}));try{await ba(ot(Pe,"sales",H),{status:"rechazado"},{merge:!0}),e(S=>S.map(k=>k.id===H?{...k,status:"rechazado"}:k)),t&&await t(),alert("Pedido rechazado exitosamente.")}catch(S){console.error("Error rejecting support:",S),alert("Error al rechazar el soporte.")}finally{h(S=>({...S,[`reject_${H}`]:!1}))}},K=async H=>{h(S=>({...S,[`solve_${H}`]:!0}));try{await ba(ot(Pe,"sales",H),{status:"active"},{merge:!0}),e(S=>S.map(k=>k.id===H?{...k,status:"active"}:k)),t&&await t(),alert("Soporte solucionado y pedido activado exitosamente.")}catch(S){console.error("Error solving support:",S),alert("Error al solucionar el soporte.")}finally{h(S=>({...S,[`solve_${H}`]:!1}))}};return o.jsxs(Z.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-7xl mx-auto border ${x?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:v,initial:"hidden",animate:"visible",role:"region","aria-labelledby":"support-title",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 gap-4",children:[o.jsxs("h3",{id:"support-title",className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight flex items-center bg-clip-text text-transparent bg-gradient-to-r ${x?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,children:[o.jsx(Ka,{className:"mr-2"})," Pedidos en Soporte",o.jsx("span",{className:`ml-2 bg-gradient-to-r ${x?"from-blue-400/20 to-purple-600/20":"from-blue-600/20 to-purple-800/20"} px-2 py-1 rounded-full text-sm font-medium`,children:E.length})]}),o.jsxs("div",{className:"flex items-center gap-4 w-full lg:w-auto",children:[o.jsxs("div",{className:"relative flex-1 lg:w-80",children:[o.jsx("input",{type:"text",placeholder:"Buscar en soporte...",className:`w-full pl-10 pr-4 py-3 rounded-2xl shadow-md transition-all duration-300 ${x?"bg-gray-800/70 text-white border border-gray-600/50 placeholder-gray-400 focus:border-blue-500/50":"bg-white/70 text-gray-900 border border-gray-300/50 placeholder-gray-500 focus:border-blue-500/50"} focus:ring-2 focus:ring-blue-500/30 focus:outline-none`,value:n,onChange:H=>s(H.target.value),"aria-label":"Buscar en soporte"}),o.jsx(xa,{className:`absolute left-3 top-3.5 ${x?"text-gray-400":"text-gray-500"}`,size:18})]}),o.jsxs(Z.button,{onClick:V,className:`p-3 rounded-2xl shadow-lg flex items-center gap-2 ${x?"bg-green-600/80 hover:bg-green-700/90 text-white":"bg-green-500/80 hover:bg-green-600/90 text-white"} transition-all duration-300`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Descargar pedidos en soporte como Excel","aria-label":"Exportar pedidos en soporte a Excel",children:[o.jsx(nx,{size:18}),o.jsx("span",{className:"hidden sm:inline text-sm",children:"Exportar"})]})]})]}),o.jsx(Bt,{children:E.length>0?o.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:o.jsx("div",{className:"overflow-x-auto rounded-2xl border border-gray-200/50 shadow-lg",children:o.jsxs("table",{className:`min-w-full divide-y divide-gray-200/30 ${x?"bg-gray-800/50":"bg-white/50"}`,children:[o.jsx("thead",{className:`${x?"bg-gray-700/60":"bg-gray-50/60"}`,children:o.jsx("tr",{children:[{key:"productName",label:"Producto"},{key:"category",label:"Categora"},{key:null,label:"Comprador"},{key:null,label:"Telfono"},{key:null,label:"Email"},{key:"soporteMessage",label:"Mensaje de Soporte"},{key:"startDate",label:"Fecha de Inicio"},{key:"endDate",label:"Fecha de Vencimiento"},{label:"Acciones"}].map(({key:H,label:S})=>o.jsx("th",{className:`px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider ${x?"text-gray-300":"text-gray-700"} ${H?"cursor-pointer hover:text-blue-400 transition-colors":""}`,onClick:()=>H&&R(H),children:o.jsxs("div",{className:"flex items-center justify-between",children:[S,H&&C(H)]})},H||S))})}),o.jsx("tbody",{className:"divide-y divide-gray-200/30",children:E.map(H=>{const S=H.buyerPhone?H.buyerPhone.replace(/^\+/,"").replace(/\D/g,""):null,k=H.customerName||H.buyerName||"N/A",P=encodeURIComponent(`Hola ${k}! 

 *Soporte para tu pedido de ${H.productName||"Sin nombre"}*:

Estamos revisando tu consulta. Por favor, describe el problema o pregunta para ayudarte mejor.

Detalles del pedido:
 *Usuario*: ${H.accountDetails?.email||"N/A"}
 *Inicio*: ${H.startDate?a(H.startDate):"N/A"}
 *Vencimiento*: ${H.endDate?a(H.endDate):"N/A"}

Gracias por tu paciencia! `),j=w(H.category);return o.jsxs(Z.tr,{className:`transition-colors duration-200 ${x?"text-gray-300 hover:bg-gray-700/50":"text-gray-700 hover:bg-gray-50/50"}`,variants:_,initial:"hidden",animate:"visible",whileHover:"hover","aria-labelledby":`order-${H.id}-title`,children:[o.jsx("td",{className:"px-4 py-4",children:o.jsx("h4",{id:`order-${H.id}-title`,className:"font-semibold text-blue-500 hover:text-blue-600 transition-colors",children:H.productName||"Sin nombre"})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j.bg} ${j.text}`,children:i(H.category)})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap font-mono text-sm",children:k}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap font-mono text-sm",children:H.buyerPhone||"N/A"}),o.jsx("td",{className:"px-4 py-4 max-w-xs truncate",title:H.accountDetails?.email||"N/A",children:H.accountDetails?.email||"N/A"}),o.jsxs("td",{className:"px-4 py-4 max-w-xs",children:[o.jsx("p",{className:"text-sm break-words line-clamp-3 bg-gray-100/30 dark:bg-gray-800/30 p-2 rounded",title:H.soporteMessage||"Sin mensaje",children:H.soporteMessage||"Sin mensaje"}),H.soporteCreatedAt&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a(H.soporteCreatedAt)})]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:H.startDate?a(H.startDate):"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:H.endDate?a(H.endDate):"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex gap-2",children:[S&&o.jsx(Z.a,{href:`https://wa.me/${S}?text=${P}`,target:"_blank",rel:"noopener noreferrer",className:"p-2.5 rounded-xl shadow-md flex items-center justify-center bg-teal-500/80 hover:bg-teal-600/90 text-white transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Comunicarse con el usuario","aria-label":`Comunicarse con el usuario para el pedido ${H.productName}`,children:o.jsx(qr,{size:16})}),o.jsx(Z.button,{onClick:()=>L(H.id),disabled:d[`reject_${H.id}`],className:`p-2.5 rounded-xl shadow-md flex items-center justify-center ${d[`reject_${H.id}`]?"bg-gray-400 text-gray-500 cursor-not-allowed":"bg-red-500/80 hover:bg-red-600/90 text-white"} transition-all duration-200`,whileHover:d[`reject_${H.id}`]?{}:{scale:1.1},whileTap:d[`reject_${H.id}`]?{}:{scale:.9},title:"Rechazar soporte","aria-label":"Rechazar soporte",children:d[`reject_${H.id}`]?o.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):o.jsx(Uq,{size:16})}),o.jsx(Z.button,{onClick:()=>K(H.id),disabled:d[`solve_${H.id}`],className:`p-2.5 rounded-xl shadow-md flex items-center justify-center ${d[`solve_${H.id}`]?"bg-gray-400 text-gray-500 cursor-not-allowed":"bg-green-500/80 hover:bg-green-600/90 text-white"} transition-all duration-200`,whileHover:d[`solve_${H.id}`]?{}:{scale:1.1},whileTap:d[`solve_${H.id}`]?{}:{scale:.9},title:"Solucionar soporte","aria-label":"Solucionar soporte",children:d[`solve_${H.id}`]?o.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):o.jsx(vd,{size:16})})]})})]},H.id)})})]})})}):o.jsxs(Z.div,{className:"text-center py-16",variants:v,initial:"hidden",animate:"visible",children:[o.jsx(Z.div,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:o.jsx(Ka,{className:`mx-auto text-6xl ${x?"text-gray-400":"text-gray-500"} mb-4`,"aria-hidden":"true"})}),o.jsx("h4",{className:`text-xl font-semibold ${x?"text-gray-300":"text-gray-700"} mb-2`,children:"No hay pedidos en soporte"}),o.jsx("p",{className:`text-sm ${x?"text-gray-400":"text-gray-600"}`,children:"Los pedidos en soporte aparecern aqu"})]})})]})};WP.propTypes={orders:q.array.isRequired,setOrders:q.func,fetchOrders:q.func,searchQuery:q.string,setSearchQuery:q.func,getCategoryDisplayName:q.func.isRequired,formatDate:q.func.isRequired,theme:q.oneOf(["light","dark"])};const Ite=({editModalOpen:r,setEditModalOpen:e,selectedProduct:t,setSelectedProduct:n,editError:s,setEditError:i,handleFileChange:a,handleEditStockChange:c,handleEditAccountFieldChange:d,handleUpdateProduct:h,theme:p="dark"})=>{const m=p==="dark",x={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}}},v={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},_={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}},w=E=>{const{name:R,value:C,type:V,checked:L}=E.target;n(K=>({...K,[R]:V==="checkbox"?L:C,...R==="status"&&{stock:C==="Agotado"?0:K.stock||1,accounts:C==="En stock"?K.accounts.length?K.accounts:Array(K.stock||1).fill({email:"",password:"",profile:"",pin:""}):[]}}))};return r?o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(Z.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl w-full max-w-6xl border max-h-[90vh] overflow-y-auto ${m?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:x,initial:"hidden",animate:"visible",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs(Z.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${m?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:[o.jsx(ng,{className:"inline mr-2",size:32}),"Editar Producto"]}),o.jsx(Z.button,{onClick:()=>e(!1),className:`${m?"bg-blue-500":"bg-blue-600"} text-white rounded-full p-1 shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},children:o.jsx(Zs,{size:20})})]}),o.jsx(Bt,{children:s&&o.jsx(Z.div,{className:`mb-8 p-4 border rounded-2xl ${m?"bg-red-900/30 border-red-700/50 text-red-300":"bg-red-100/30 border-red-300/50 text-red-700"}`,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:s})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",variants:v,initial:"hidden",animate:"visible",children:[o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${m?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:_,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${m?"text-blue-400":"text-blue-600"}`,children:[o.jsx(H6,{size:20}),"Imagen del producto"]}),o.jsx("div",{className:`flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-xl ${m?"bg-gray-900/80 border-gray-700/50":"bg-gray-200/80 border-gray-300/50"}`,children:t.image?o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:t.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain",loading:"lazy"}),o.jsx(Z.button,{type:"button",onClick:()=>n({...t,image:""}),className:`absolute top-0 right-0 ${m?"bg-blue-500":"bg-blue-600"} text-white rounded-full p-1 shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},children:o.jsx(Zs,{size:16})})]}):o.jsxs(o.Fragment,{children:[o.jsx(ng,{className:`mx-auto h-12 w-12 ${m?"text-gray-400":"text-gray-500"}`}),o.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:o.jsxs("label",{htmlFor:"edit-file-upload",className:`relative cursor-pointer rounded-xl font-medium ${m?"bg-gray-900/50 text-blue-400 hover:text-blue-500":"bg-gray-200/50 text-blue-600 hover:text-blue-700"} focus-within:outline-none`,children:[o.jsx("span",{children:"Subir una imagen"}),o.jsx("input",{id:"edit-file-upload",name:"edit-file-upload",type:"file",className:"sr-only",onChange:E=>a(E,!0),accept:"image/*"})]})}),o.jsx("p",{className:`text-xs ${m?"text-gray-500":"text-gray-600"}`,children:"PNG, JPG, GIF hasta 10MB"})]})})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${m?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:_,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${m?"text-purple-400":"text-purple-600"}`,children:[o.jsx(K6,{size:20}),"Informacin Bsica"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Nombre del producto*"}),o.jsx("input",{type:"text",name:"name",value:t.name,onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500`,placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Categora*"}),o.jsxs("select",{name:"category",value:t.category,onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all`,children:[o.jsx("option",{value:"Netflix",children:"Netflix"}),o.jsx("option",{value:"Spotify",children:"Spotify"}),o.jsx("option",{value:"Disney",children:"Disney+"}),o.jsx("option",{value:"Max",children:"Max"}),o.jsx("option",{value:"Prime Video",children:"Prime Video"}),o.jsx("option",{value:"Vix",children:"Vix"}),o.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),o.jsx("option",{value:"Canva",children:"Canva"}),o.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),o.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),o.jsx("option",{value:"Dgo",children:"DGO"}),o.jsx("option",{value:"Liga Max",children:"Liga Max"}),o.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),o.jsx("option",{value:"Youtube",children:"YouTube"}),o.jsx("option",{value:"Deezer",children:"Deezer"}),o.jsx("option",{value:"Tidal",children:"Tidal"}),o.jsx("option",{value:"Vpn",children:"VPN"}),o.jsx("option",{value:"WinTv",children:"WinTV"}),o.jsx("option",{value:"Apple Music",children:"CinePlanet"}),o.jsx("option",{value:"Apple Tv",children:"Apple TV"}),o.jsx("option",{value:"Iptv",children:"IPTV"}),o.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),o.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),o.jsx("option",{value:"Pornhub",children:"Pornhub"}),o.jsx("option",{value:"Paramount",children:"Paramount"}),o.jsx("option",{value:"Licencias",children:"Licencias"}),o.jsx("option",{value:"Capcut",children:"Capcut"}),o.jsx("option",{value:"Duolingo",children:"Duolingo"}),o.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Tipo de cuenta*"}),o.jsxs("select",{name:"accountType",value:t.accountType,onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all`,children:[o.jsx("option",{value:"Premium",children:"Premium"}),o.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Estado*"}),o.jsxs("select",{name:"status",value:t.status,onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all`,children:[o.jsx("option",{value:"En stock",children:"En stock"}),o.jsx("option",{value:"A pedido",children:"A pedido"}),o.jsx("option",{value:"Agotado",children:"Agotado"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Stock*"}),o.jsx("input",{type:"number",name:"stock",value:t.status==="Agotado"?0:t.stock,onChange:c,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all ${t.status==="Agotado"?"opacity-50 cursor-not-allowed":""} placeholder-gray-500`,min:"0",required:!0,disabled:t.status==="Agotado"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Precio (S/)*"}),o.jsx("input",{type:"number",name:"price",value:t.price,onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500`,placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",name:"renewal",checked:t.renewal,onChange:w,className:`h-4 w-4 rounded ${m?"text-purple-400 focus:ring-purple-400 border-gray-600/50":"text-purple-600 focus:ring-purple-600 border-gray-300/50"}`}),o.jsx("label",{className:`ml-2 text-sm ${m?"text-gray-300":"text-gray-700"}`,children:"Tiene renovacin?"})]})]}),t.renewal&&o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Precio de renovacin (S/)*"}),o.jsx("input",{type:"number",name:"renewalPrice",value:t.renewalPrice,onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500`,placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-6 mb-8",variants:v,initial:"hidden",animate:"visible",children:[o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${m?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:_,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${m?"text-green-400":"text-green-600"}`,children:[o.jsx(Dc,{size:20}),"Duracin y Contacto"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Duracin (das)"}),o.jsx("input",{type:"number",name:"duration",value:t.duration,onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500`,placeholder:"Dejar vaco para ilimitado",min:"1"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:["Telfono de contacto ",t.status==="A pedido"?"*":""]}),o.jsx("input",{type:"text",name:"providerPhone",value:t.providerPhone,onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500`,placeholder:"Ej: +51 987654321",required:t.status==="A pedido"})]})]})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${m?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:_,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${m?"text-indigo-400":"text-indigo-600"}`,children:[o.jsx(W6,{size:20}),"Enlaces y Descripciones"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"URL del producto (opcional)"}),o.jsx("input",{type:"url",name:"productUrl",value:t.productUrl||"",onChange:w,className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition-all placeholder-gray-500`,placeholder:"Ej: https://www.ejemplo.com/producto"})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Detalles del producto"}),o.jsx("textarea",{name:"details",value:t.details,onChange:w,rows:"3",className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition-all placeholder-gray-500`,placeholder:"Describe los detalles y caractersticas del producto"})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${m?"text-gray-300":"text-gray-700"} mb-2`,children:"Trminos y condiciones"}),o.jsx("textarea",{name:"terms",value:t.terms,onChange:w,rows:"3",className:`w-full px-4 py-2 rounded-xl border ${m?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition-all placeholder-gray-500`,placeholder:"Especifica los trminos y condiciones de uso"})]})]})]}),t.status==="En stock"&&o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${m?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:_,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${m?"text-pink-400":"text-pink-600"}`,children:[o.jsx(wd,{size:20}),"Cuentas Asociadas"]}),o.jsx("p",{className:`text-sm mb-4 ${m?"text-gray-400":"text-gray-600"}`,children:"Debe completar todas las cuentas segn el stock indicado"}),o.jsx(Bt,{children:o.jsx("div",{className:"space-y-4",children:t.accounts.map((E,R)=>o.jsxs(Z.div,{className:`border rounded-xl p-4 ${m?"bg-gray-900/70 border-gray-700/50":"bg-gray-200/70 border-gray-300/50"} backdrop-blur-sm`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:R*.1},children:[o.jsxs("h4",{className:`text-sm font-medium ${m?"text-white":"text-gray-900"} mb-3 flex items-center gap-2`,children:["Cuenta ",R+1]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-medium ${m?"text-gray-400":"text-gray-600"} mb-1`,children:"Correo electrnico*"}),o.jsx("input",{type:"email",value:E.email,onChange:C=>d(R,"email",C.target.value),className:`w-full px-3 py-2 rounded-xl border ${m?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all text-sm`,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-medium ${m?"text-gray-400":"text-gray-600"} mb-1`,children:"Contrasea*"}),o.jsx("input",{type:"text",value:E.password,onChange:C=>d(R,"password",C.target.value),className:`w-full px-3 py-2 rounded-xl border ${m?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all text-sm`,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-medium ${m?"text-gray-400":"text-gray-600"} mb-1`,children:"Perfil (opcional)"}),o.jsx("input",{type:"text",value:E.profile,onChange:C=>d(R,"profile",C.target.value),className:`w-full px-3 py-2 rounded-xl border ${m?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all text-sm`,placeholder:"Ej: Perfil 1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-medium ${m?"text-gray-400":"text-gray-600"} mb-1`,children:"PIN (opcional)"}),o.jsx("input",{type:"text",value:E.pin,onChange:C=>d(R,"pin",C.target.value),className:`w-full px-3 py-2 rounded-xl border ${m?"bg-gray-800/50 text-white border-gray-700/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all text-sm`,placeholder:"Ej: 1234"})]})]})]},R))})})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[o.jsx(Z.button,{onClick:()=>e(!1),className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 ${m?"from-gray-700 to-gray-600 hover:from-gray-600 hover:to-gray-500":"from-gray-300 to-gray-400 hover:from-gray-400 hover:to-gray-500"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancelar"}),o.jsx(Z.button,{onClick:h,className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-purple-500/50 ${m?"from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700":"from-purple-600 to-pink-800 hover:from-purple-700 hover:to-pink-900"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Actualizar Producto"})]})]})}):null},Pte=({editOrderModalOpen:r,setEditOrderModalOpen:e,selectedOrder:t,handleOrderAccountChange:n,editOrderError:s,setEditOrderError:i,handleUpdateOrder:a,theme:c="dark"})=>{const d=c==="dark",h={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}}},p={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},m={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}};return r?o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(Z.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl w-full max-w-md border max-h-[90vh] overflow-y-auto ${d?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:h,initial:"hidden",animate:"visible",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs(Z.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${d?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:[o.jsx(tg,{className:"inline mr-2",size:32}),"Editar Detalles de Cuenta"]}),o.jsx(Z.button,{onClick:()=>e(!1),className:`${d?"bg-blue-500":"bg-blue-600"} text-white rounded-full p-1 shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},children:o.jsx(Zs,{size:20})})]}),o.jsx(Bt,{children:s&&o.jsx(Z.div,{className:`mb-8 p-4 border rounded-2xl ${d?"bg-red-900/30 border-red-700/50 text-red-300":"bg-red-100/30 border-red-300/50 text-red-700"}`,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:s})}),o.jsx(Z.div,{className:`border rounded-2xl p-6 shadow-xl backdrop-blur-sm ${d?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"} space-y-4`,variants:p,initial:"hidden",animate:"visible",children:o.jsxs(Z.div,{className:"space-y-4",variants:m,whileHover:"hover",children:[o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium mb-2 flex items-center gap-2 ${d?"text-gray-300":"text-gray-700"}`,children:[o.jsx(iw,{size:16}),"Correo electrnico*"]}),o.jsx("input",{type:"email",name:"email",value:t.accountDetails.email,onChange:n,className:`w-full px-4 py-2 rounded-xl border ${d?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: usuario@ejemplo.com",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium mb-2 flex items-center gap-2 ${d?"text-gray-300":"text-gray-700"}`,children:[o.jsx(tg,{size:16}),"Contrasea*"]}),o.jsx("input",{type:"text",name:"password",value:t.accountDetails.password,onChange:n,className:`w-full px-4 py-2 rounded-xl border ${d?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: contrasea123",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium mb-2 flex items-center gap-2 ${d?"text-gray-300":"text-gray-700"}`,children:[o.jsx(js,{size:16}),"Perfil (opcional)"]}),o.jsx("input",{type:"text",name:"profile",value:t.accountDetails.profile,onChange:n,className:`w-full px-4 py-2 rounded-xl border ${d?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: Perfil 1"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium mb-2 flex items-center gap-2 ${d?"text-gray-300":"text-gray-700"}`,children:[o.jsx(Lq,{size:16}),"PIN (opcional)"]}),o.jsx("input",{type:"text",name:"pin",value:t.accountDetails.pin,onChange:n,className:`w-full px-4 py-2 rounded-xl border ${d?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500`,placeholder:"Ej: 1234"})]})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[o.jsx(Z.button,{onClick:()=>e(!1),className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 ${d?"from-gray-700 to-gray-600 hover:from-gray-600 hover:to-gray-500":"from-gray-300 to-gray-400 hover:from-gray-400 hover:to-gray-500"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancelar"}),o.jsx(Z.button,{onClick:a,className:`px-6 py-3 text-white rounded-2xl transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-purple-500/50 ${d?"from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700":"from-purple-600 to-pink-800 hover:from-purple-700 hover:to-pink-900"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Guardar Cambios"})]})]})}):null},jte=({users:r,providerBalance:e,handleRecharge:t,theme:n,userSearch:s,setUserSearch:i})=>{const a=n==="dark",c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},hover:{scale:1.02,transition:{duration:.2}}},d={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},[h,p]=A.useState({}),m=(v,_)=>{p(w=>({...w,[v]:_}))},x=v=>{const _=parseFloat(h[v]);_&&_>0&&_<=e&&(t(v,_),p(w=>({...w,[v]:""})))};return o.jsxs(Z.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-3xl shadow-2xl max-w-6xl mx-auto border ${a?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-700/50":"bg-gradient-to-br from-white/80 to-gray-50/80 border-gray-200/50"}`,variants:d,initial:"hidden",animate:"visible",children:[o.jsx(Z.h2,{className:`text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight mb-6 bg-clip-text text-transparent bg-gradient-to-r ${a?"from-blue-400 via-purple-500 to-pink-500":"from-blue-600 via-purple-700 to-pink-600"}`,initial:{y:-10},animate:{y:0},transition:{duration:.5},children:"Gestin de Recargas"}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"relative group",children:[o.jsx(xa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${a?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,size:18}),o.jsx("input",{type:"text",placeholder:"Buscar usuarios por nombre o email...",value:s,onChange:v=>i(v.target.value),className:`w-full pl-10 pr-4 py-2.5 ${a?"bg-gray-800/50 border-gray-600/50 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-md`})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${a?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:c,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${a?"text-green-400":"text-green-600"}`,children:[o.jsx(Xs,{size:20}),"Tu Saldo Disponible"]}),o.jsxs("p",{className:`text-4xl font-bold ${a?"text-white":"text-gray-900"}`,children:["S/ ",e.toFixed(2)]}),o.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"} mt-2`,children:"Usa para recargar saldos de usuarios"})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${a?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:c,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${a?"text-blue-400":"text-blue-600"}`,children:[o.jsx(js,{size:20}),"Total Usuarios"]}),o.jsx("p",{className:`text-4xl font-bold ${a?"text-white":"text-gray-900"}`,children:r.length}),o.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"} mt-2`,children:'Usuarios con rol "Usuario"'})]}),o.jsxs(Z.div,{className:`rounded-2xl p-6 border shadow-xl backdrop-blur-sm ${a?"bg-gray-800/70 border-gray-700/50":"bg-white/70 border-gray-200/50"}`,variants:c,whileHover:"hover",children:[o.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${a?"text-purple-400":"text-purple-600"}`,children:[o.jsx(Xs,{size:20}),"Saldo Total Distribuido"]}),o.jsxs("p",{className:`text-4xl font-bold ${a?"text-white":"text-gray-900"}`,children:["S/ ",r.reduce((v,_)=>v+(_.balance||0),0).toFixed(2)]}),o.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"} mt-2`,children:"Suma de saldos de usuarios"})]})]}),o.jsxs(Z.div,{className:`bg-${a?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md border ${a?"border-gray-700/50":"border-gray-300"}`,variants:c,whileHover:"hover",children:[o.jsx("div",{className:"flex justify-between items-center mb-4",children:o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${a?"text-white":"text-gray-900"}`,children:["Lista de"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Usuarios"})," ","(",r.length,")"]})}),r.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[o.jsx("thead",{className:`${a?"bg-gray-800/50":"bg-gray-100"} backdrop-blur-sm`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${a?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(bc,{})," Usuario"]})}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${a?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(md,{})," Email"]})}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${a?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Xs,{})," Saldo"]})}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${a?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Acciones"})]})}),o.jsx("tbody",{className:`${a?"bg-gray-800/50":"bg-white"} divide-y divide-gray-600/50`,children:r.map(v=>o.jsxs("tr",{className:`hover:bg-${a?"gray-700/50":"gray-100"} transition-all duration-300`,children:[o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${a?"text-white":"text-gray-900"}`,children:v.username||"Sin nombre"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${a?"text-gray-300":"text-gray-600"}`,children:v.email}),o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap ${a?"text-white":"text-gray-900"}`,children:["S/ ",(v.balance||0).toFixed(2)]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap flex space-x-2",children:o.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[o.jsx("input",{type:"number",placeholder:"Monto",value:h[v.id]||"",onChange:_=>m(v.id,_.target.value),className:`w-20 px-2 py-1 rounded ${a?"bg-gray-700/50 border-gray-500/50 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800"} text-sm focus:outline-none focus:ring-2 focus:ring-blue-400`,min:"0",step:"0.01",max:e}),o.jsx(Z.button,{onClick:()=>x(v.id),className:`px-3 py-1 text-white rounded text-xs transition-all duration-300 bg-gradient-to-r shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-green-500/50 ${a?"from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700":"from-green-600 to-emerald-700 hover:from-green-700 hover:to-emerald-800"}`,whileHover:{scale:1.02},whileTap:{scale:.98},disabled:!h[v.id]||parseFloat(h[v.id])<=0||parseFloat(h[v.id])>e,children:"Recargar"})]})})]},v.id))})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(_a,{className:`mx-auto text-4xl ${a?"text-blue-400":"text-blue-600"} mb-3`}),o.jsx("p",{className:`${a?"text-gray-300":"text-gray-600"}`,children:"No hay usuarios disponibles"})]})]})]})},Rte=$i.memo(({show:r,onClose:e,title:t,message:n,theme:s})=>o.jsx(Bt,{children:r&&o.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:e,role:"dialog","aria-labelledby":"modal-title",children:o.jsxs(Z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${s==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${s==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[o.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:o.jsx(vn,{size:20})}),o.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${s==="dark"?"text-white":"text-gray-900"}`,children:t}),o.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:n})]})})}));Rte.propTypes={show:q.bool.isRequired,onClose:q.func.isRequired,title:q.string.isRequired,message:q.string.isRequired,theme:q.string.isRequired};const qP=()=>{const[r,e]=A.useState(!1),[t,n]=A.useState("inicio"),[s,i]=A.useState("Usuario"),[a,c]=A.useState(""),[d,h]=A.useState(""),[p,m]=A.useState([]),[x,v]=A.useState([]),[_,w]=A.useState([]),[E,R]=A.useState([]),[C,V]=A.useState([]),[L,K]=A.useState(0),[H,S]=A.useState(0),[k,P]=A.useState(!0),[j,M]=A.useState(""),[D,O]=A.useState({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:Array(1).fill({email:"",password:"",profile:"",pin:""})}),[pe,Ae]=A.useState(null),[Fe,Me]=A.useState(!1),[Ee,Te]=A.useState(""),[Ne,ae]=A.useState(""),[W,oe]=A.useState(""),[ie,ne]=A.useState({isOpen:!1,message:"",title:""}),[z,_e]=A.useState({email:"",password:"",preferences:"",balance:0}),[De,Se]=A.useState(!1),[we,Qe]=A.useState(!0),[ft,zt]=A.useState(0),[wt,Yt]=A.useState(!1),[kt,Oe]=A.useState(null),[Xt,Rt]=A.useState(""),[He,de]=A.useState("dark"),[et,ct]=A.useState(!1),[pt,St]=A.useState(!1),[ht,jt]=A.useState([]),dt=Gi(),gr=cb(),J=A.useCallback(F=>{const Q=new Date(F);return Q.setUTCHours(23,59,59,999),Q},[]),Ce=A.useCallback(()=>{de(F=>F==="dark"?"light":"dark")},[]),gt=A.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),fe=A.useCallback((F,Q)=>{ne({isOpen:!0,title:F,message:Q})},[]),Ie=A.useCallback(()=>{ne({isOpen:!1,message:"",title:""})},[]),Le=A.useCallback(F=>{if(!F)return"No especificada";try{const Q=F instanceof Date?F:F?.toDate?.()||new Date(F);return isNaN(Q.getTime())?"Fecha invlida":Q.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(Q){return console.error("Error formatting date:",Q),"Fecha invlida"}},[]),Ze=A.useCallback(F=>({netflix:"Netflix",spotify:"Spotify",disney:"Disney",max:"Max",primevideo:"Prime Video",vix:"Vix",crunchyroll:"Crunchyroll",canva:"Canva",chatgpt:"ChatGPT",redessociales:"Redes Sociales",dgo:"Dgo",ligamax:"Liga Max",movistarplay:"Movistar Play",youtube:"Youtube",deezer:"Deezer",tidal:"Tidal",vpn:"Vpn",wintv:"WinTv",applemusic:"Apple Music",appletv:"Apple TV",iptv:"Iptv",flujotv:"Flujo Tv",vikirakuten:"Viki Rakuten",pornhub:"Pornhub",paramount:"Paramount",licencias:"Licencias",capcut:"Capcut",duolingo:"Duolingo",buscapersonas:"BuscaPersonas"})[F?.toLowerCase()]||"Otro",[]);A.useEffect(()=>{const F=Nc(gr,Q=>{Q?(c(Q.email||""),h(Q.uid),vt(Q.uid)):dt("/login")});return()=>F()},[gr,dt]);const vt=async F=>{try{const Q=ot(Pe,"users",F),le=await ha(Q);if(le.exists()){const se=le.data();i(se.username||"Usuario"),_e({email:se.email||"",password:"",preferences:se.preferences||"",balance:se.balance||0})}P(!1)}catch(Q){M("Error al cargar datos del usuario"),console.error("Error fetching user data:",Q),P(!1)}};A.useEffect(()=>{if(!d)return;const F=ot(Pe,"users",d);return cr(F,le=>{if(le.exists()){const se=le.data();_e(ue=>({...ue,email:se.email||ue.email,preferences:se.preferences||ue.preferences,balance:se.balance||0})),i(se.username||prev.username),K(se.userAssignmentLimit||0),S(se.assignedUsersCount||0)}},le=>{console.error("Error listening to user data:",le)})},[d]),A.useEffect(()=>{a&&(async Q=>{try{const le=await ha(ot(Pe,"admins",Q));Se(le.exists())}catch(le){console.error("Error checking admin status:",le)}})(a)},[a]),A.useEffect(()=>{const F=cr(ot(Pe,"notifications","adminMessage"),Q=>{if(Q.exists()){const le=Q.data(),se=De?"admin":"provider";le.roles&&le.roles.includes(se)?jt([{id:Q.id,...le,timestamp:le.updatedAt?.toDate()}]):jt([])}else jt([])},Q=>{console.error("Error in notifications listener:",Q),M("Error al cargar notificaciones: "+Q.message)});return()=>F()},[De]),A.useEffect(()=>{const F=nr(At(Pe,"users"),br("role","==","user")),Q=cr(F,le=>{const se=le.docs.map(ue=>({id:ue.id,...ue.data()}));R(se)},le=>{console.error("Error fetching users:",le),M("Error al cargar usuarios")});return()=>Q()},[]),A.useEffect(()=>{const F=At(Pe,"users"),Q=cr(F,le=>{const ue=le.docs.map(me=>({id:me.id,...me.data()})).filter(me=>!me.role);V(ue)},le=>{console.error("Error fetching unassigned users:",le),M("Error al cargar usuarios sin rol")});return()=>Q()},[]),A.useEffect(()=>{if(!s)return;const F=nr(At(Pe,"products"),br("provider","==",s)),Q=cr(F,le=>{const se=le.docs.map(ue=>({id:ue.id,...ue.data()}));v(se)},le=>{console.error("Error fetching products:",le),M("Error al cargar productos")});return()=>Q()},[s]),A.useEffect(()=>{if(!d)return;const F=nr(At(Pe,"sales"),br("providerId","==",d)),Q=cr(F,async se=>{if(se.empty){m([]),Qe(!1);return}const ue=new Date,me=7200*60*1e3;for(const Ye of se.docs){let Be=Ye.data().endDate,Pt=Be instanceof dr?Be.toDate():typeof Be=="string"?new Date(Be):new Date(Be);const Wt=J(Pt);if(Wt<ue&&ue.getTime()-Wt.getTime()>me)try{await Ha(ot(Pe,"sales",Ye.id)),console.log(`Deleted expired order: ${Ye.id}`)}catch(Ht){console.error(`Error deleting order ${Ye.id}:`,Ht)}}const $e=se.docs.map(Ye=>{const Ve=Ye.data(),Pt=Ve.saleDate?.toDate?.()||Ve.createdAt?.toDate?.()||new Date;let Wt=Ve.startDate?.toDate?.(),Ht=Wt||Pt,ir=!Wt;const ls=Number(Ve.durationDays)||30;let Yn;Ve.endDate?Yn=typeof Ve.endDate=="string"?new Date(Ve.endDate):Ve.endDate.toDate?.()||new Date(Ve.endDate):(Yn=new Date(Ht.getTime()+ls*24*60*60*1e3),ir=!0),ir&&Rr(ot(Pe,"sales",Ye.id),{startDate:Wt||dr.fromDate(Pt),endDate:dr.fromDate(J(Yn)),durationDays:ls}).catch(po=>{console.error("Error al actualizar startDate/endDate en Firestore:",po)});const Xn=J(Yn),zr=Xn.getTime()-Ht.getTime(),Yi=ue.getTime()-Ht.getTime(),kr=Xn.getTime()-ue.getTime(),Na=Math.max(1,Math.ceil(zr/(1e3*60*60*24))),Bc=Math.max(0,Math.ceil(kr/(1e3*60*60*24))),Uc=Math.ceil(Yi/(1e3*60*60*24)),fo=Na>0?Math.min(100,Uc/Na*100):100;return{id:Ye.id,...Ve,productName:Ve.productName||"Producto sin nombre",category:Ve.type||"netflix",amount:parseFloat(Ve.price)||0,buyer:Ve.buyerName||Ve.customerName||"Comprador desconocido",buyerPhone:Ve.buyerPhone||"No especificado",buyerEmail:Ve.customerEmail||"No especificado",status:Ve.status||"completed",saleDate:Pt,startDate:Ht,endDate:Yn,durationDays:ls,daysRemaining:Bc,totalDays:Na,timeElapsedPercentage:fo,accountDetails:Ve.accountDetails||{email:"No disponible",password:"No disponible",profile:"N/A",pin:""},balance:parseFloat(Ve.price)||0}}).filter(Ye=>{const Ve=J(Ye.endDate);return!(Ve<ue&&ue.getTime()-Ve.getTime()>me)});m($e);const ze=$e.filter(Ye=>Ye.status==="completed"&&Ye.accountDetails).map(Ye=>({...Ye.accountDetails,productName:Ye.productName,saleDate:Ye.saleDate,orderId:Ye.id}));w(ze),Qe(!1)},se=>{console.error("Error fetching sales:",se),M("Error al cargar ventas"),Qe(!1)}),le=setInterval(()=>{m(se=>se.map(ue=>{const me=new Date,$e=J(ue.endDate),ze=$e.getTime()-new Date(ue.startDate).getTime(),Ye=me.getTime()-new Date(ue.startDate).getTime(),Ve=$e.getTime()-me.getTime(),Be=Math.max(1,Math.ceil(ze/(1e3*60*60*24))),Pt=Math.max(0,Math.ceil(Ve/(1e3*60*60*24))),Wt=Math.ceil(Ye/(1e3*60*60*24)),Ht=Be>0?Math.min(100,Wt/Be*100):100;return{...ue,daysRemaining:Pt,totalDays:Be,timeElapsedPercentage:Ht}}).filter(ue=>{const me=J(ue.endDate),$e=new Date,ze=7200*60*1e3;return!(me<$e&&$e.getTime()-me.getTime()>ze)}))},6e4);return()=>{Q(),clearInterval(le)}},[d,J]),A.useEffect(()=>{if(!s)return;const F=ot(Pe,"providerBalances",s),Q=cr(F,le=>{le.exists()?zt(le.data().balance||0):(ba(F,{balance:0,provider:s,updatedAt:lr()}),zt(0)),Qe(!1)},le=>{console.error("Error fetching provider balance:",le),M("Error al cargar el saldo del proveedor"),Qe(!1)});return()=>Q()},[s]);const It=A.useCallback(async F=>{if(H>=L){fe("Error","Has alcanzado el lmite de asignaciones de roles");return}try{await Um(Pe,async Q=>{const le=ot(Pe,"users",F),se=ot(Pe,"users",d),ue=await Q.get(le),me=await Q.get(se);if(!ue.exists()||ue.data().role)throw new Error("Usuario no vlido o ya tiene rol");Q.update(le,{role:"user",updatedAt:lr()}),Q.update(se,{assignedUsersCount:(me.data().assignedUsersCount||0)+1,updatedAt:lr()})}),V(Q=>Q.filter(le=>le.id!==F)),S(Q=>Q+1),fe("xito","Rol de usuario asignado correctamente")}catch(Q){console.error("Error assigning role:",Q),fe("Error",Q.message||"Error al asignar rol")}},[d,H,L,fe]),at=A.useCallback(async(F,Q)=>{if(!Q||Q<=0){fe("Error","El monto debe ser mayor a 0");return}if(Q>z.balance){fe("Error","Saldo insuficiente en tu cuenta");return}try{await Um(Pe,async le=>{const se=ot(Pe,"users",d),ue=ot(Pe,"users",F),me=await le.get(se),$e=await le.get(ue);if(!me.exists())throw new Error("Cuenta no encontrada");if(!$e.exists())throw new Error("Usuario destino no encontrado");const ze=(me.data().balance||0)-Q,Ye=($e.data().balance||0)+Q;if(ze<0)throw new Error("Saldo insuficiente");le.update(se,{balance:ze,updatedAt:lr()}),le.update(ue,{balance:Ye,updatedAt:lr()})}),_e(le=>({...le,balance:le.balance-Q})),R(le=>le.map(se=>se.id===F?{...se,balance:(se.balance||0)+Q}:se)),fe("xito",`Transferencia de S/ ${Q.toFixed(2)} exitosa`)}catch(le){console.error("Error en recarga:",le),fe("Error",le.message||"Error al procesar la recarga")}},[z.balance,d,fe]),lt=A.useCallback(async()=>{try{await Bh(gr),dt("/login")}catch(F){console.error("Error al cerrar sesin:",F),fe("Error",F.message||"Error al cerrar sesin")}},[dt,fe]),tt=A.useCallback(F=>{const{name:Q,value:le,type:se,checked:ue}=F.target;O(me=>({...me,[Q]:se==="checkbox"?ue:le}))},[]),Nt=A.useCallback(F=>{const{name:Q,value:le}=F.target;_e(se=>({...se,[Q]:le}))},[]),Ut=A.useCallback((F,Q=!1)=>{const le=F.target.files[0];if(le){if(le.size>10485760){Q?Te("La imagen no debe exceder los 10MB"):M("La imagen no debe exceder los 10MB");return}const ue=new FileReader;ue.onloadend=()=>{Q?Ae(me=>({...me,image:ue.result})):O(me=>({...me,image:ue.result}))},ue.readAsDataURL(le)}},[]),Qt=A.useCallback(F=>{const Q=parseInt(F.target.value)||1,le=D.accounts||[];if(Q>le.length){const se=[...le];for(;se.length<Q;)se.push({email:"",password:"",profile:"",pin:""});O({...D,stock:Q,accounts:se})}else if(Q<le.length){const se=le.slice(0,Math.max(Q,1));O({...D,stock:Q,accounts:se})}else O({...D,stock:Q})},[D]),Fr=A.useCallback(F=>{const Q=parseInt(F.target.value)||1;let se=[...pe.accounts||[]];if(Q>se.length)for(;se.length<Q;)se.push({email:"",password:"",profile:"",pin:""});else Q<se.length&&(se=se.slice(0,Math.max(Q,1)));Ae({...pe,stock:Q,accounts:se})},[pe]),Or=A.useCallback((F,Q,le)=>{const se=[...D.accounts];se[F]={...se[F],[Q]:le},O({...D,accounts:se})},[D]),_n=A.useCallback((F,Q,le)=>{Ae(se=>({...se,accounts:se.accounts.map((ue,me)=>me===F?{...ue,[Q]:le}:ue)}))},[]),mr=A.useCallback(F=>{const{name:Q,value:le}=F.target;Oe(se=>({...se,accountDetails:{...se.accountDetails,[Q]:le}}))},[]),Kn=A.useCallback(async()=>{if(M(""),!D.name||!D.price){fe("Error","Por favor complete todos los campos obligatorios");return}if(D.renewal&&!D.renewalPrice){fe("Error","Por favor ingrese el precio de renovacin");return}if(D.status==="En stock"&&D.accounts.some(Q=>!Q.email||!Q.password)){fe("Error","Por favor complete todos los campos de las cuentas");return}try{const F={...D,provider:s,providerId:d,providerPhone:D.status==="En stock"?D.providerPhone||"":D.providerPhone||"No especificado",createdAt:lr(),availableAccounts:D.status==="En stock"?D.accounts.length:0},Q=await rl(At(Pe,"products"),F);if(D.status==="En stock"){const le=At(Pe,`products/${Q.id}/accounts`);for(const se of D.accounts)await rl(le,{email:se.email,password:se.password,profile:se.profile||"",pin:se.pin||"",status:"available"})}O({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:[{email:"",password:"",profile:"",pin:""}]}),n("inventario"),fe("xito","Producto subido exitosamente!")}catch(F){console.error("Error al subir el producto:",F),fe("Error",`Error al subir el producto: ${F.message}`)}},[D,s,d,fe]),hr=A.useCallback(async F=>{Te("");try{const Q=nr(At(Pe,"sales"),br("providerId","==",d),br("productName","==",F.name)),se=(await sn(Q)).docs.filter(ze=>ze.data().status==="completed"&&ze.data().accountDetails?.email).map(ze=>ze.data().accountDetails.email),ue=At(Pe,`products/${F.id}/accounts`),$e=(await sn(ue)).docs.filter(ze=>ze.data().status==="available").map(ze=>({email:ze.data().email||"",password:ze.data().password||"",profile:ze.data().profile||"",pin:ze.data().pin||""}));Ae({id:F.id,name:F.name||"",image:F.image||"",category:F.category||"Netflix",accountType:F.accountType||"Premium",status:F.status||"En stock",stock:$e.length||F.stock||1,price:F.price||"",renewal:F.renewal||!1,renewalPrice:F.renewalPrice||"",duration:F.duration||"",providerPhone:F.providerPhone||"",details:F.details||"",terms:F.terms||"",providerId:F.providerId||d,accounts:F.status==="En stock"?$e.length>0?$e:Array(Math.max(F.stock||1,1)).fill({email:"",password:"",profile:"",pin:""}):[]}),Me(!0)}catch(Q){console.error("Error al preparar edicin del producto:",Q),Te("Error al preparar edicin del producto")}},[d]),Rn=A.useCallback(async()=>{if(Te(""),!pe.name||!pe.price){Te("Por favor complete todos los campos obligatorios");return}if(pe.renewal&&!pe.renewalPrice){Te("Por favor ingrese el precio de renovacin");return}if(pe.status==="En stock"&&pe.accounts.some(Q=>!Q.email||!Q.password)){Te("Por favor complete todos los campos de las cuentas");return}try{const F=ot(Pe,"products",pe.id);if(await ba(F,{...pe,providerId:pe.providerId||d,availableAccounts:pe.status==="En stock"&&pe.accounts?.length||0},{merge:!0}),pe.status==="En stock"){const Q=At(Pe,`products/${pe.id}/accounts`),le=await sn(Q);for(const se of le.docs)await Ha(se.ref);for(const se of pe.accounts)await rl(Q,{email:se.email,password:se.password,profile:se.profile||"",pin:se.pin||"",status:"available"})}Me(!1),fe("xito","Producto actualizado exitosamente!")}catch(F){console.error("Error al actualizar el producto:",F),Te(`Error al actualizar el producto: ${F.message}`)}},[pe,d,fe]),Nr=A.useCallback(F=>{Oe(F),Yt(!0)},[]),En=A.useCallback(async()=>{if(kt)try{const F=ot(Pe,"sales",kt.id);await Rr(F,{...kt,updatedAt:lr()}),Yt(!1),fe("xito","Pedido actualizado exitosamente!")}catch(F){console.error("Error al actualizar el pedido:",F),Rt(`Error al actualizar el pedido: ${F.message}`)}},[kt,fe]),an=A.useCallback(async F=>{try{const Q=ot(Pe,"sales",F);await Rr(Q,{status:"completed"}),fe("xito","Pedido activado exitosamente!")}catch(Q){console.error("Error al activar el pedido:",Q),fe("Error",`Error al activar el pedido: ${Q.message}`)}},[fe]),pn=A.useCallback(async F=>{try{await Ha(ot(Pe,"sales",F)),fe("xito","Pedido eliminado exitosamente!")}catch(Q){console.error("Error al eliminar el pedido:",Q),fe("Error",`Error al eliminar el pedido: ${Q.message}`)}},[fe]),U=A.useCallback(async F=>{F.preventDefault();try{const Q={updatedAt:lr()};z.email&&(Q.email=z.email),z.preferences&&(Q.preferences=z.preferences),await Rr(ot(Pe,"users",d),Q),fe("xito","Cuenta actualizada exitosamente!")}catch(Q){console.error("Error al actualizar la cuenta:",Q),fe("Error",`Error al actualizar la cuenta: ${Q.message}`)}},[z,d,fe]),ee=A.useCallback(async F=>{try{await Ha(ot(Pe,"products",F)),fe("xito","Producto eliminado exitosamente!")}catch(Q){console.error("Error al eliminar el producto:",Q),fe("Error",`Error al eliminar el producto: ${Q.message}`)}},[fe]),Y=A.useMemo(()=>x.reduce((F,Q)=>F+(Q.availableAccounts||0),0),[x]),X=A.useMemo(()=>p.reduce((F,Q)=>F+(Q.balance||0),0),[p]),te=A.useCallback(()=>{if(k)return o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(j)return o.jsxs("div",{className:`bg-${He==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${He==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsx(vc,{className:"mx-auto text-4xl text-red-400 mb-4"}),o.jsx("h3",{className:`text-xl font-bold ${He==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Error"}),o.jsx("p",{className:`text-base ${He==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:j}),o.jsx("button",{onClick:()=>M(null),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Aceptar"})]});const F=E.filter(Q=>Q.username?.toLowerCase().includes(W.toLowerCase())||Q.email?.toLowerCase().includes(W.toLowerCase()));return o.jsx("div",{className:`bg-${He==="dark"?"black/50":"white"}
    backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md 
    w-full xl:max-w-full border ${He==="dark"?"border-gray-700/50":"border-gray-300"} overflow-x-auto`,children:(()=>{switch(t){case"inicio":return o.jsx(UP,{username:s,products:x,orders:p,providerBalance:ft,balanceLoading:we,totalStock:Y,totalEarnings:X,isAdmin:De,email:a,setActiveSection:n,formatDate:Le,notifications:ht,theme:He});case"inventario":return o.jsx(zP,{products:x,setActiveSection:n,handleEdit:hr,handleDelete:ee,getCategoryDisplayName:Ze,totalStock:Y,theme:He});case"cuentas":return o.jsx(Nte,{soldAccounts:_,formatDate:Le});case"subirProducto":return o.jsx(kte,{product:D,setProduct:O,handleChange:tt,handleFileChange:Ut,handleStockChange:Qt,handleAccountFieldChange:Or,handleSubmit:Kn,setActiveSection:n});case"ganancias":return o.jsx(Ste,{orders:p,totalEarnings:X,providerBalance:ft,balanceLoading:we,getCategoryDisplayName:Ze,formatDate:Le});case"pedidos":return o.jsx(HP,{orders:p,searchQuery:Ne,setSearchQuery:ae,getCategoryDisplayName:Ze,formatDate:Le,handleEditOrder:Nr,handleActivateOrder:an,handleDeleteOrder:pn,theme:He});case"recargas":return o.jsx(jte,{users:F,providerBalance:z.balance||0,handleRecharge:at,formatDate:Le,theme:He,userSearch:W,setUserSearch:oe});case"afiliar":return o.jsxs("div",{className:`bg-${He==="dark"?"black/50":"white"} backdrop-blur-md p-6 rounded-2xl shadow-md border ${He==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[o.jsx("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${He==="dark"?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Afiliar Usuarios"}),o.jsx("div",{className:"mt-4 sm:mt-0",children:o.jsxs("p",{className:`text-sm ${He==="dark"?"text-gray-400":"text-gray-600"}`,children:["Asignados: ",H," / ",L," | Restantes: ",Math.max(0,L-H)]})})]}),C.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[o.jsx("thead",{className:`backdrop-blur-sm ${He==="dark"?"bg-gray-900/80":"bg-gray-200/80"}`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${He==="dark"?"text-gray-300":"text-gray-700"}`,children:"Nombre"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${He==="dark"?"text-gray-300":"text-gray-700"}`,children:"Email"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${He==="dark"?"text-gray-300":"text-gray-700"}`,children:"Fecha Creacin"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${He==="dark"?"text-gray-300":"text-gray-700"}`,children:"Asignar"})]})}),o.jsx("tbody",{className:`divide-y divide-gray-700/50 ${He==="dark"?"bg-gray-800/70":"bg-gray-100/70"}`,children:C.map(Q=>o.jsxs("tr",{className:"hover:bg-blue-500/10 transition-all duration-300",children:[o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${He==="dark"?"text-white":"text-gray-900"}`,children:Q.username||"Sin nombre"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${He==="dark"?"text-gray-300":"text-gray-600"}`,children:Q.email||"No especificado"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${He==="dark"?"text-gray-300":"text-gray-600"}`,children:Le(Q.createdAt)}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:o.jsx("input",{type:"checkbox",onChange:le=>{le.target.checked&&It(Q.id)},disabled:H>=L,className:`h-4 w-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 ${He==="dark"?"bg-gray-700 border-gray-600 text-blue-400":""} ${H>=L?"cursor-not-allowed opacity-50":"cursor-pointer"}`})})]},Q.id))})]})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(_a,{className:`mx-auto text-4xl ${He==="dark"?"text-gray-400":"text-gray-500"} mb-3`}),o.jsx("h4",{className:`text-lg font-medium ${He==="dark"?"text-gray-300":"text-gray-700"}`,children:"No hay usuarios sin rol"}),o.jsx("p",{className:`text-sm ${He==="dark"?"text-gray-400":"text-gray-600"}`,children:"Todos los usuarios disponibles han sido afiliados."})]})]});case"configuracion":return o.jsx(Cte,{accountDetails:z,handleAccountChange:Nt,handleUpdateAccount:U});case"soporte":return o.jsx(WP,{orders:p,setOrders:m,searchQuery:Ne,setSearchQuery:ae,getCategoryDisplayName:Ze,formatDate:Le,theme:He,username:s,email:a,showModal:fe});default:return o.jsxs("div",{className:`bg-${He==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${He==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsx(vc,{className:"mx-auto text-4xl text-red-400 mb-4"}),o.jsx("h3",{className:`text-xl font-bold ${He==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Seccin no encontrada"}),o.jsx("p",{className:`text-base ${He==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:"La seccin que ests buscando no existe o no est disponible."}),o.jsx("button",{onClick:()=>n("inicio"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Volver al inicio"})]})}})()})},[k,j,He,t,s,x,p,ft,we,Y,X,De,a,n,Le,hr,ee,Ze,_,D,O,tt,Ut,Qt,Or,Kn,Ne,ae,Nr,an,pn,z,Nt,U,fe,ht,E,W,at,C,H,L,It]);return A.useEffect(()=>{const F=()=>{ct(window.scrollY>300)};return window.addEventListener("scroll",F),()=>window.removeEventListener("scroll",F)},[]),o.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${He==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-50 to-gray-50 text-gray-900"} font-inter relative overflow-x-hidden`,children:[o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[o.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${He==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),o.jsx("div",{className:"particles",children:[...Array(15)].map((F,Q)=>o.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},Q))})]}),o.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${He==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r overflow-y-auto lg:shadow-md`,children:o.jsxs("div",{className:"p-4 flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("button",{onClick:()=>{dt("/"),e(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),o.jsx("button",{onClick:()=>e(!1),className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:o.jsx(vn,{className:"text-lg"})})]}),o.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${He==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:s.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("p",{className:`font-medium ${He==="dark"?"text-white":"text-gray-900"}`,children:s}),o.jsx("p",{className:`text-xs ${He==="dark"?"text-gray-400":"text-gray-600"}`,children:De?"Admin":"Proveedor"})]})]}),o.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:ew},{id:"inventario",label:"Inventario",icon:vq},{id:"cuentas",label:"Cuentas Vendidas",icon:xd},{id:"pedidos",label:"Pedidos",icon:xd},{id:"recargas",label:"Recargas",icon:ga},{id:"ganancias",label:"Ganancias",icon:ga},{id:"subirProducto",label:"Subir Producto",icon:Cq},{id:"afiliar",label:"Afiliar",icon:_a},{id:"soporte",label:"Soporte",icon:kq},{id:"configuracion",label:"Configuracin",icon:eg}].map(F=>o.jsxs("button",{onClick:()=>{n(F.id),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${t===F.id?"bg-blue-100 text-blue-600 border border-blue-300":He==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":t===F.id?"page":void 0,children:[o.jsx(F.icon,{className:"text-lg"}),o.jsx("span",{children:F.label})]},F.id))}),o.jsx("div",{className:"mt-auto pt-6",children:o.jsxs("button",{onClick:()=>{lt(),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${He==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[o.jsx(yd,{className:"text-lg"}),o.jsx("span",{children:"Cerrar Sesin"})]})})]})}),o.jsxs("header",{className:`${He==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md py-4 px-4 sm:px-6 lg:px-8 flex items-center justify-between shadow-md fixed top-0 left-0 right-0 z-50 lg:ml-64`,children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(Z.img,{src:Fc,alt:"BlackStreaming logo",className:`h-10 w-10 rounded-full border ${He==="dark"?"border-gray-700/50":"border-gray-300"} shadow-sm lg:hidden`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),o.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),o.jsx("div",{className:"flex-1 mx-4 max-w-lg",children:o.jsxs("div",{className:"relative group",children:[o.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:Ne,onChange:F=>ae(F.target.value),className:`w-full py-2.5 px-5 ${He==="dark"?"bg-gray-800/50 border-gray-600/50 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-md`,"aria-label":"Search orders",onKeyDown:F=>F.key==="Enter"&&n("pedidos")}),o.jsx("button",{onClick:()=>n("pedidos"),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${He==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Search",children:o.jsx(gd,{size:18})})]})}),o.jsxs("nav",{className:"flex items-center space-x-4 relative",children:[o.jsx("button",{onClick:Ce,className:`p-2 rounded-full ${He==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Switch to ${He==="dark"?"light":"dark"} theme`,children:He==="dark"?o.jsx(Rc,{size:20}):o.jsx(jc,{size:20})}),o.jsxs("button",{onClick:()=>St(!0),className:`p-2 rounded-full relative ${He==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Notifications (${ht.length} new)`,children:[o.jsx(yc,{size:20}),ht.length>0&&o.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:ht.length})]}),o.jsx("button",{className:`lg:hidden p-2 rounded-full ${He==="dark"?"hover:bg-gray-700/50":"hover:bg-gray-100"} transition-all duration-300`,onClick:()=>e(!r),"aria-label":"Toggle mobile menu","aria-expanded":r,children:o.jsx(ex,{size:20,className:He==="dark"?"text-gray-300":"text-gray-600"})}),o.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o.jsx("div",{className:"relative",children:o.jsxs("button",{className:`flex items-center space-x-2 ${He==="dark"?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-md transition-all duration-300`,"aria-label":"User menu",children:[o.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:s.charAt(0).toUpperCase()}),o.jsx("span",{className:`text-sm font-semibold ${He==="dark"?"text-gray-200":"text-gray-800"}`,children:s})]})})})]})]}),o.jsx(Bt,{children:pt&&o.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>St(!1),role:"dialog","aria-labelledby":"notifications-title",children:o.jsxs(Z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 lg:max-w-lg ${He==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${He==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:F=>F.stopPropagation(),children:[o.jsx("button",{onClick:()=>St(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notifications",children:o.jsx(vn,{size:20})}),o.jsx("h2",{id:"notifications-title",className:`text-xl font-bold mb-4 ${He==="dark"?"text-white":"text-gray-900"}`,children:"Notificaciones"}),ht.length>0?ht.map(F=>o.jsxs("div",{className:`p-4 mb-2 rounded-md ${He==="dark"?"bg-gray-800/50":"bg-gray-100/80"} border-l-4 ${He==="dark"?"border-blue-500/50":"border-blue-300/50"}`,children:[o.jsx("h3",{className:`font-semibold ${He==="dark"?"text-gray-200":"text-gray-800"}`,children:F.title||"Nueva Notificacin"}),o.jsx("p",{className:`text-sm ${He==="dark"?"text-gray-300":"text-gray-700"} mt-1`,children:F.message}),F.roles&&F.roles.length>0&&o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Roles: ",F.roles.join(", ")]}),F.timestamp&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Le(F.timestamp)})]},F.id)):o.jsx("p",{className:`text-center ${He==="dark"?"text-gray-400":"text-gray-600"} mt-4`,children:"No hay notificaciones."})]})})}),o.jsx("main",{className:"lg:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start",children:te()}),o.jsxs("footer",{className:`${He==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md px-4 sm:px-6 lg:px-8 py-12 text-center relative z-10 lg:ml-64 max-w-6xl mx-auto rounded-2xl border ${He==="dark"?"border-gray-700/50":"border-gray-300"} mt-8 shadow-md`,children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-4",children:"BlackStreaming"}),o.jsxs("p",{className:`text-base sm:text-lg ${He==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["Todos los derechos reservados. Desarrollado por"," ",o.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Saiph"}),"."]}),o.jsxs("div",{className:"flex justify-center space-x-6 sm:space-x-8 mb-6",children:[o.jsx("a",{href:"https://twitter.com",className:`${He==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Twitter",children:o.jsx(Pc,{size:28})}),o.jsx("a",{href:"https://instagram.com",className:`${He==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Instagram",children:o.jsx(Ic,{size:28})}),o.jsx("a",{href:"https://facebook.com",className:`${He==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Facebook",children:o.jsx(Cc,{size:28})})]}),o.jsxs("div",{className:"flex justify-center space-x-4 sm:space-x-6",children:[o.jsx("a",{href:"#",className:`text-sm ${He==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Privacy Policy",children:"Poltica de Privacidad"}),o.jsx("a",{href:"#",className:`text-sm ${He==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Terms of Service",children:"Trminos de Servicio"}),o.jsx("a",{href:"#",className:`text-sm ${He==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Contact Us",children:"Contctanos"})]})]}),o.jsxs("p",{className:`text-sm ${He==="dark"?"text-gray-500":"text-gray-600"}`,children:[" ",new Date().getFullYear()," BlackStreaming. Hecho con pasin."]})]}),o.jsx(Bt,{children:et&&o.jsx(Z.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:gt,className:"fixed bottom-6 right-6 bg-blue-600/90 backdrop-blur-md p-3 rounded-full hover:bg-blue-700/95 shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 lg:bottom-8 lg:right-8","aria-label":"Back to top",children:o.jsx(Zg,{size:20})})}),o.jsx(Ate,{isOpen:ie.isOpen,title:ie.title,message:ie.message,onClose:Ie}),o.jsx(Ite,{editModalOpen:Fe,setEditModalOpen:Me,selectedProduct:pe,setSelectedProduct:Ae,editError:Ee,setEditError:Te,handleFileChange:Ut,handleEditStockChange:Fr,handleEditAccountFieldChange:_n,handleUpdateProduct:Rn}),o.jsx(Pte,{editOrderModalOpen:wt,setEditOrderModalOpen:Yt,selectedOrder:kt,handleOrderAccountChange:mr,editOrderError:Xt,setEditOrderError:Rt,handleUpdateOrder:En}),r&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden",onClick:()=>e(!1),"aria-hidden":"true"})]})};qP.propTypes={};const Dte=()=>{const[r,e]=A.useState(""),[t,n]=A.useState(""),[s,i]=A.useState(0),[a,c]=A.useState([]),[d,h]=A.useState([]),[p,m]=A.useState([]),[x,v]=A.useState([]),[_,w]=A.useState([]),[E,R]=A.useState(0),[C,V]=A.useState({day:0,week:0,month:0,total:0}),[L,K]=A.useState(!0),[H,S]=A.useState(null),[k,P]=A.useState("dark"),j=Gi();A.useEffect(()=>{const O=Nc(Zr,pe=>{pe?(n(pe.email||"No especificado"),M(pe.uid),K(!1)):j("/login")});return()=>O()},[j]);const M=async O=>{try{const pe=ot(Pe,"users",O),Ae=await ha(pe);if(Ae.exists()){const Fe=Ae.data();e(Fe.username||Fe.email.split("@")[0])}else S("Usuario no encontrado en la base de datos")}catch(pe){console.error("Error al obtener el nombre de usuario:",pe),S("Error al cargar datos del usuario")}},D=O=>{const Ae=O*5,Fe=Ae*.25,Me=Ae*.05;V({day:Me,week:Fe,month:Ae,total:Ae})};return A.useEffect(()=>{(async()=>{try{const Te=await sn(At(Pe,"users")),Ne=Te.size,ae=Te.docs.map(Qe=>({id:Qe.id,...Qe.data()}));i(Ne),c(ae.slice(-5)),D(Ne);const W=nr(At(Pe,"pendingRegistrations"),br("status","==","pending")),oe=await sn(W);h(oe.docs.map(Qe=>({id:Qe.id,...Qe.data()})));const ie=nr(At(Pe,"pendingTopUps"),br("status","==","pendiente")),ne=await sn(ie);m(ne.docs.map(Qe=>({id:Qe.id,...Qe.data()})));const z=nr(At(Pe,"withdrawals"),br("status","==","pending")),_e=await sn(z);v(_e.docs.map(Qe=>({id:Qe.id,...Qe.data()})));const Se=(await sn(At(Pe,"sales"))).docs.map(Qe=>({id:Qe.id,...Qe.data()}));w(Se);const we=Se.reduce((Qe,ft)=>Qe+(parseFloat(ft.price)||0),0);R(we)}catch(Te){console.error("Error al obtener datos:",Te),S("Error al cargar datos")}})();const pe=cr(At(Pe,"users"),Te=>{const Ne=Te.size,ae=Te.docs.map(W=>({id:W.id,...W.data()}));i(Ne),c(ae.slice(-5)),D(Ne)}),Ae=cr(nr(At(Pe,"pendingRegistrations"),br("status","==","pending")),Te=>{h(Te.docs.map(Ne=>({id:Ne.id,...Ne.data()})))}),Fe=cr(nr(At(Pe,"pendingTopUps"),br("status","==","pendiente")),Te=>{m(Te.docs.map(Ne=>({id:Ne.id,...Ne.data()})))}),Me=cr(nr(At(Pe,"withdrawals"),br("status","==","pending")),Te=>{v(Te.docs.map(Ne=>({id:Ne.id,...Ne.data()})))}),Ee=cr(At(Pe,"sales"),Te=>{const Ne=Te.docs.map(W=>({id:W.id,...W.data()}));w(Ne);const ae=Ne.reduce((W,oe)=>W+(parseFloat(oe.price)||0),0);R(ae)});return()=>{pe(),Ae(),Fe(),Me(),Ee()}},[]),L?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):H?o.jsxs("div",{className:`bg-${k==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${k==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsx(vc,{className:"mx-auto text-4xl text-blue-400 mb-4"}),o.jsx("h3",{className:`text-xl font-bold ${k==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Error"}),o.jsx("p",{className:`text-base ${k==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:H}),o.jsx("button",{onClick:()=>S(null),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Aceptar"})]}):o.jsxs("div",{className:`bg-${k==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${k==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("h2",{className:`text-2xl sm:text-3xl font-bold ${k==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Bienvenido a BlackStreaming,"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:r})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:`${k==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 border shadow-lg`,children:[o.jsxs("h3",{className:"text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-3 flex items-center",children:[o.jsx(_a,{className:"mr-2"})," Total Usuarios"]}),o.jsx("p",{className:`text-3xl font-bold ${k==="dark"?"text-white":"text-gray-900"}`,children:s}),o.jsx("button",{className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",onClick:()=>j("/usuarios"),children:"Ver usuarios"})]}),o.jsxs("div",{className:`${k==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 border shadow-lg`,children:[o.jsxs("h3",{className:"text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-3 flex items-center",children:[o.jsx(xd,{className:"mr-2"})," Total Ventas"]}),o.jsxs("p",{className:`text-3xl font-bold ${k==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",E.toFixed(2)]}),o.jsx("button",{className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",onClick:()=>j("/pedidos"),children:"Ver ventas"})]}),o.jsxs("div",{className:`${k==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 border shadow-lg`,children:[o.jsxs("h3",{className:"text-lg font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-3 flex items-center",children:[o.jsx(ga,{className:"mr-2"})," Ganancias del Mes"]}),o.jsxs("p",{className:`text-3xl font-bold ${k==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",C.month.toFixed(2)]}),o.jsx("p",{className:`text-sm ${k==="dark"?"text-gray-300":"text-gray-700"} mt-1`,children:"(5 soles por usuario)"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:`${k==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 shadow-lg border`,children:[o.jsx("h3",{className:`text-lg font-semibold ${k==="dark"?"text-white":"text-gray-900"} mb-3`,children:"ltimos Usuarios"}),a.length>0?a.map(O=>o.jsxs("div",{className:`border-b ${k==="dark"?"border-gray-600/50":"border-gray-300"} py-3 last:border-0 hover:bg-${k==="dark"?"gray-700/50":"gray-200/50"} transition-all duration-300 rounded-xl px-2`,children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("p",{className:`font-medium ${k==="dark"?"text-white":"text-gray-900"}`,children:O.username||"Sin nombre"}),o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${k==="dark"?"bg-blue-900/80 text-blue-400":"bg-blue-100/80 text-blue-600"}`,children:O.role||"usuario"})]}),o.jsx("p",{className:`text-sm ${k==="dark"?"text-gray-400":"text-gray-600"}`,children:O.email})]},O.id)):o.jsx("p",{className:`text-${k==="dark"?"gray-400":"gray-600"} py-2`,children:"No hay usuarios registrados"})]}),o.jsxs("div",{className:`${k==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 shadow-lg border`,children:[o.jsx("h3",{className:`text-lg font-semibold ${k==="dark"?"text-white":"text-gray-900"} mb-3`,children:"Solicitudes Pendientes"}),d.length>0?d.slice(0,3).map(O=>o.jsxs("div",{className:`border-b ${k==="dark"?"border-gray-600/50":"border-gray-300"} py-3 last:border-0 hover:bg-${k==="dark"?"gray-700/50":"gray-200/50"} transition-all duration-300 rounded-xl px-2`,children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("p",{className:`font-medium ${k==="dark"?"text-white":"text-gray-900"}`,children:O.username||"Sin nombre"}),o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${k==="dark"?"bg-purple-900/80 text-purple-400":"bg-purple-100/80 text-purple-600"}`,children:O.role||"usuario"})]}),o.jsx("p",{className:`text-sm ${k==="dark"?"text-gray-400":"text-gray-600"}`,children:O.email})]},O.id)):o.jsx("p",{className:`text-${k==="dark"?"gray-400":"gray-600"} py-2`,children:"No hay solicitudes pendientes"})]}),o.jsxs("div",{className:`${k==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-2xl p-4 shadow-lg border`,children:[o.jsx("h3",{className:`text-lg font-semibold ${k==="dark"?"text-white":"text-gray-900"} mb-3`,children:"Retiros Pendientes"}),x.length>0?x.slice(0,3).map(O=>o.jsxs("div",{className:`border-b ${k==="dark"?"border-gray-600/50":"border-gray-300"} py-3 last:border-0 hover:bg-${k==="dark"?"gray-700/50":"gray-200/50"} transition-all duration-300 rounded-xl px-2`,children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("p",{className:`font-medium ${k==="dark"?"text-white":"text-gray-900"}`,children:O.provider||"Sin proveedor"}),o.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${k==="dark"?"bg-yellow-900/80 text-yellow-400":"bg-yellow-100/80 text-yellow-600"}`,children:["S/ ",(O.amount||0).toFixed(2)]})]}),o.jsxs("p",{className:`text-sm ${k==="dark"?"text-gray-400":"text-gray-600"}`,children:["Mtodo: ",O.method||"No especificado"]})]},O.id)):o.jsx("p",{className:`text-${k==="dark"?"gray-400":"gray-600"} py-2`,children:"No hay retiros pendientes"})]})]})]})},Fte=({notificationForm:r={message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}},setNotificationForm:e=()=>{},theme:t="dark"})=>{const[n,s]=A.useState(""),[i,a]=A.useState(""),[c,d]=A.useState(!1),h=r.roles||{user:!1,affiliate:!1,provider:!1,admin:!1},p=Object.values(h).some(x=>x),m=A.useCallback(async x=>{if(x.preventDefault(),!p){s("Selecciona al menos un rol para enviar la notificacin");return}if(!r.message.trim()){s("El mensaje de la notificacin no puede estar vaco");return}s(""),a(""),d(!0);try{await rl(At(Pe,"notifications"),{message:r.message.trim(),roles:{user:h.user,affiliate:h.affiliate,provider:h.provider,admin:h.admin},createdAt:lr()}),e({message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}}),a("Notificacin enviada exitosamente")}catch(v){s("Error al enviar la notificacin. Por favor, intenta de nuevo."),console.error("Error sending notification:",v)}finally{d(!1)}},[r,h,e]);return o.jsxs("div",{className:`bg-${t==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-2xl mx-auto border ${t==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Enviar Notificacin -"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),o.jsxs(Bt,{children:[n&&o.jsx(Z.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${t==="dark"?"bg-red-900/50 border-red-600/50":"bg-red-100/50 border-red-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-red-600 border-l-4`,role:"alert",children:n}),i&&o.jsx(Z.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:`${t==="dark"?"bg-green-900/50 border-green-600/50":"bg-green-100/50 border-green-300/50"} rounded-lg p-4 mb-6 text-center text-sm text-green-600 border-l-4`,role:"alert",children:i})]}),o.jsxs("form",{onSubmit:m,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Mensaje de la Notificacin"}),o.jsx("textarea",{value:r.message||"",onChange:x=>e({...r,message:x.target.value}),className:`w-full px-4 py-2 rounded-xl ${t==="dark"?"bg-gray-800/50 text-gray-200 border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-800 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all resize-y`,rows:"5",placeholder:"Escribe el mensaje para los usuarios...",required:!0,"aria-label":"Mensaje de la notificacin"})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Enviar a los siguientes roles"}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:["user","affiliate","provider","admin"].map(x=>o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",checked:h[x]||!1,onChange:v=>e({...r,roles:{...h,[x]:v.target.checked}}),className:`h-4 w-4 ${t==="dark"?"text-blue-400 focus:ring-blue-400 border-gray-600":"text-blue-600 focus:ring-blue-600 border-gray-300"} rounded`,"aria-label":`Enviar a rol ${x}`}),o.jsx("span",{className:`text-sm capitalize ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:x})]},x))})]}),o.jsx(Z.button,{type:"submit",disabled:c||!p,className:`w-full py-3 px-4 ${c||!p?t==="dark"?"bg-blue-800 cursor-not-allowed":"bg-blue-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"} text-white rounded-xl font-medium transition-all duration-300`,"aria-label":"Enviar notificacin",whileHover:{scale:c||!p?1:1.05},whileTap:{scale:c||!p?1:.95},children:c?o.jsx(Z.div,{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}):"Enviar Notificacin"}),!p&&o.jsx("p",{className:`text-sm text-center ${t==="dark"?"text-blue-400":"text-blue-600"}`,children:"Selecciona al menos un rol para enviar la notificacin"})]})]})},GP=[{value:"user",label:"Usuario"},{value:"affiliate",label:"Afiliador"},{value:"provider",label:"Proveedor"},{value:"admin",label:"Administrador"}],Ote=r=>{const e=GP.find(t=>t.value===r);return e?e.label:r},KP=({isOpen:r,user:e,onClose:t,onSave:n,loading:s,theme:i})=>{const[a,c]=A.useState(e?.balance||0),[d,h]=A.useState("");A.useEffect(()=>{c(e?.balance||0),h("")},[e]);const p=m=>{if(m.preventDefault(),h(""),isNaN(a)||a<0){h("Por favor, ingrese un saldo vlido (nmero no negativo).");return}n(e.id,parseFloat(a))};return!r||!e?null:o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:`bg-${i==="dark"?"gray-900/90":"white"} backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border ${i==="dark"?"border-gray-800/50":"border-gray-300"}`,children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h2",{className:`text-xl font-bold ${i==="dark"?"text-white":"text-gray-900"}`,children:["Editar Saldo de ",e.username]}),o.jsx("button",{onClick:t,className:`${i==="dark"?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,"aria-label":"Cerrar modal",children:""})]}),o.jsxs("form",{onSubmit:p,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:`block text-sm font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Nuevo Saldo (S/)"}),o.jsx("input",{type:"number",value:a,onChange:m=>c(m.target.value),className:`w-full px-4 py-2 rounded-xl ${i==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,min:"0",step:"0.01",required:!0,"aria-label":"Nuevo saldo"}),d&&o.jsx("p",{className:`text-sm mt-2 ${i==="dark"?"text-blue-400":"text-blue-600"}`,children:d})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:t,className:`px-4 py-2 ${i==="dark"?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"} rounded-xl transition-all duration-300`,"aria-label":"Cancelar",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:s,className:`px-4 py-2 ${s?i==="dark"?"bg-blue-800 cursor-not-allowed":"bg-blue-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"} rounded-xl transition-all duration-300`,"aria-label":"Guardar saldo",children:s?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar"})]})]})]})})})};KP.propTypes={isOpen:q.bool.isRequired,user:q.object,onClose:q.func.isRequired,onSave:q.func.isRequired,loading:q.bool,theme:q.oneOf(["dark","light"])};const YP=({isOpen:r,user:e,onClose:t,onSave:n,loading:s,theme:i})=>{const[a,c]=A.useState(e?.role||"user");return A.useEffect(()=>{c(e?.role||"user")},[e]),!r||!e?null:o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:`bg-${i==="dark"?"gray-900/90":"white"} backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border ${i==="dark"?"border-gray-800/50":"border-gray-300"}`,children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h2",{className:`text-xl font-bold ${i==="dark"?"text-white":"text-gray-900"}`,children:["Cambiar Rol de ",e.username]}),o.jsx("button",{onClick:t,className:`${i==="dark"?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,"aria-label":"Cerrar modal",children:""})]}),o.jsxs("form",{onSubmit:d=>{d.preventDefault(),n(e.id,a)},children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:`block text-sm font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Nuevo Rol"}),o.jsx("select",{value:a,onChange:d=>c(d.target.value),className:`w-full px-4 py-2 rounded-xl ${i==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,"aria-label":"Seleccionar nuevo rol",children:GP.map(d=>o.jsx("option",{value:d.value,children:d.label},d.value))})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:t,className:`px-4 py-2 ${i==="dark"?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"} rounded-xl transition-all duration-300`,"aria-label":"Cancelar",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:s,className:`px-4 py-2 ${s?i==="dark"?"bg-blue-800 cursor-not-allowed":"bg-blue-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"} rounded-xl transition-all duration-300`,"aria-label":"Guardar rol",children:s?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar"})]})]})]})})})};YP.propTypes={isOpen:q.bool.isRequired,user:q.object,onClose:q.func.isRequired,onSave:q.func.isRequired,loading:q.bool,theme:q.oneOf(["dark","light"])};const XP=({isOpen:r,user:e,onClose:t,onSave:n,loading:s,theme:i})=>{const[a,c]=A.useState(e?.username||""),[d,h]=A.useState("");A.useEffect(()=>{c(e?.username||""),h("")},[e]);const p=m=>{m.preventDefault(),h("");const x=a.trim();if(!x){h("Por favor, ingrese un nombre de usuario vlido.");return}n(e.id,x)};return!r||!e?null:o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:`bg-${i==="dark"?"gray-900/90":"white"} backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border ${i==="dark"?"border-gray-800/50":"border-gray-300"}`,children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h2",{className:`text-xl font-bold ${i==="dark"?"text-white":"text-gray-900"}`,children:["Editar Nombre de Usuario de ",e.username]}),o.jsx("button",{onClick:t,className:`${i==="dark"?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,"aria-label":"Cerrar modal",children:""})]}),o.jsxs("form",{onSubmit:p,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:`block text-sm font-medium ${i==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Nuevo Nombre de Usuario"}),o.jsx("input",{type:"text",value:a,onChange:m=>c(m.target.value),className:`w-full px-4 py-2 rounded-xl ${i==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,required:!0,"aria-label":"Nuevo nombre de usuario"}),d&&o.jsx("p",{className:`text-sm mt-2 ${i==="dark"?"text-blue-400":"text-blue-600"}`,children:d})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:t,className:`px-4 py-2 ${i==="dark"?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"} rounded-xl transition-all duration-300`,"aria-label":"Cancelar",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:s,className:`px-4 py-2 ${s?i==="dark"?"bg-blue-800 cursor-not-allowed":"bg-blue-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"} rounded-xl transition-all duration-300`,"aria-label":"Guardar nombre de usuario",children:s?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar"})]})]})]})})})};XP.propTypes={isOpen:q.bool.isRequired,user:q.object,onClose:q.func.isRequired,onSave:q.func.isRequired,loading:q.bool,theme:q.oneOf(["dark","light"])};const QP=({theme:r="dark"})=>{const[e,t]=A.useState([]),[n,s]=A.useState(""),[i,a]=A.useState({isOpen:!1,user:null}),[c,d]=A.useState({isOpen:!1,user:null}),[h,p]=A.useState({isOpen:!1,user:null}),[m,x]=A.useState(!0),[v,_]=A.useState({}),[w,E]=A.useState(null);A.useEffect(()=>{(async()=>{x(!0);try{const O=await sn(At(Pe,"users")),pe=await Promise.all(O.docs.map(async Ae=>{const Fe={id:Ae.id,...Ae.data()},Me=nr(At(Pe,"sales"),br("userId","==",Ae.id)),Ee=await sn(Me);return{...Fe,orderCount:Ee.size}}));t(pe)}catch(O){E("No se pudieron obtener los usuarios: "+O.message)}x(!1)})()},[]);const R=D=>a({isOpen:!0,user:D}),C=()=>a({isOpen:!1,user:null}),V=D=>d({isOpen:!0,user:D}),L=()=>d({isOpen:!1,user:null}),K=D=>p({isOpen:!0,user:D}),H=()=>p({isOpen:!1,user:null}),S=async(D,O)=>{_(pe=>({...pe,[`balance_${D}`]:!0}));try{const pe=ot(Pe,"users",D);await Rr(pe,{balance:O}),t(Ae=>Ae.map(Fe=>Fe.id===D?{...Fe,balance:O}:Fe)),C()}catch(pe){E("Error al actualizar saldo: "+pe.message)}_(pe=>({...pe,[`balance_${D}`]:!1}))},k=async(D,O)=>{_(pe=>({...pe,[`role_${D}`]:!0}));try{const pe=ot(Pe,"users",D);await Rr(pe,{role:O}),t(Ae=>Ae.map(Fe=>Fe.id===D?{...Fe,role:O}:Fe)),L()}catch(pe){E("Error al actualizar rol: "+pe.message)}_(pe=>({...pe,[`role_${D}`]:!1}))},P=async(D,O)=>{_(pe=>({...pe,[`username_${D}`]:!0}));try{const pe=ot(Pe,"users",D);await Rr(pe,{username:O}),t(Ae=>Ae.map(Fe=>Fe.id===D?{...Fe,username:O}:Fe)),H()}catch(pe){E("Error al actualizar nombre de usuario: "+pe.message)}_(pe=>({...pe,[`username_${D}`]:!1}))},j=async(D,O)=>{_(pe=>({...pe,[`status_${D}`]:!0}));try{const pe=ot(Pe,"users",D),Ae=O==="suspended"?"active":"suspended";await Rr(pe,{status:Ae}),t(Fe=>Fe.map(Me=>Me.id===D?{...Me,status:Ae}:Me))}catch(pe){E("Error al cambiar estado: "+pe.message)}_(pe=>({...pe,[`status_${D}`]:!1}))},M=async D=>{_(O=>({...O,[`delete_${D}`]:!0}));try{const O=ot(Pe,"users",D);await Ha(O),t(pe=>pe.filter(Ae=>Ae.id!==D))}catch(O){E("Error al eliminar usuario: "+O.message)}_(O=>({...O,[`delete_${D}`]:!1}))};return o.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[o.jsxs("div",{className:`bg-${r==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md border ${r==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${r==="dark"?"text-white":"text-gray-900"}`,children:["Lista de"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Usuarios"})," ","(",e.length,")"]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"Buscar usuarios...",className:`px-4 py-2 rounded-xl ${r==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400 placeholder-gray-500":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600 placeholder-gray-400"} focus:ring-2 transition-all text-sm`,value:n,onChange:D=>s(D.target.value),"aria-label":"Buscar usuarios"}),o.jsx(gd,{className:`absolute right-3 top-2.5 ${r==="dark"?"text-blue-400":"text-blue-600"}`})]})]}),m?o.jsx("div",{className:"flex justify-center items-center h-40",children:o.jsx("div",{className:`animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 ${r==="dark"?"border-blue-500":"border-blue-600"}`})}):w?o.jsx("div",{className:`text-center py-4 ${r==="dark"?"text-blue-400":"text-blue-600"}`,children:w}):e.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[o.jsx("thead",{className:`${r==="dark"?"bg-gray-800/50":"bg-gray-100"} backdrop-blur-sm`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(bc,{})," Usuario"]})}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(md,{})," Email"]})}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(_a,{})," Rol"]})}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(ga,{})," Saldo"]})}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"rdenes"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${r==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Acciones"})]})}),o.jsx("tbody",{className:`${r==="dark"?"bg-gray-800/50":"bg-white"} divide-y divide-gray-600/50`,children:e.filter(D=>(D.username||"").toLowerCase().includes(n.toLowerCase())||(D.email||"").toLowerCase().includes(n.toLowerCase())).map(D=>o.jsxs("tr",{className:`${D.status==="suspended"?r==="dark"?"bg-red-900/20":"bg-red-100/50":""} hover:bg-${r==="dark"?"gray-700/50":"gray-100"} transition-all duration-300`,children:[o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap ${r==="dark"?"text-white":"text-gray-900"}`,children:[o.jsx("span",{children:D.username||"Sin nombre"}),o.jsx("button",{onClick:()=>K(D),disabled:v[`username_${D.id}`],className:`ml-2 p-1 ${r==="dark"?"bg-blue-700 hover:bg-blue-800 text-blue-200 disabled:bg-blue-900":"bg-blue-500 hover:bg-blue-600 text-white disabled:bg-blue-300"} rounded-xl transition-all duration-300`,title:"Editar Nombre de Usuario","aria-label":`Editar nombre de usuario de ${D.username}`,children:o.jsx(G0,{size:14})})]}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:D.email}),o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[o.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${r==="dark"?"bg-blue-900/80 text-blue-400":"bg-blue-100/80 text-blue-600"}`,children:Ote(D.role)}),o.jsx("button",{onClick:()=>V(D),disabled:v[`role_${D.id}`],className:`ml-2 p-1 ${r==="dark"?"bg-blue-700 hover:bg-blue-800 text-blue-200 disabled:bg-blue-900":"bg-blue-500 hover:bg-blue-600 text-white disabled:bg-blue-300"} rounded-xl transition-all duration-300`,title:"Editar Rol","aria-label":`Editar rol de ${D.username}`,children:o.jsx(G0,{size:14})})]}),o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap ${r==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",(D.balance||0).toFixed(2)]}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${r==="dark"?"text-white":"text-gray-900"}`,children:D.orderCount||0}),o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap flex space-x-2",children:[o.jsx("button",{onClick:()=>R(D),disabled:v[`balance_${D.id}`],className:`p-2 ${r==="dark"?"bg-blue-600 hover:bg-blue-700 text-white disabled:bg-blue-800":"bg-blue-500 hover:bg-blue-600 text-white disabled:bg-blue-300"} rounded-xl transition-all duration-300`,title:"Editar Saldo","aria-label":`Editar saldo de ${D.username}`,children:o.jsx(G0,{size:16})}),o.jsx("button",{onClick:()=>j(D.id,D.status),disabled:v[`status_${D.id}`],className:`p-2 ${D.status==="suspended"?r==="dark"?"bg-green-600 hover:bg-green-700 text-white disabled:bg-green-800":"bg-green-500 hover:bg-green-600 text-white disabled:bg-green-300":r==="dark"?"bg-yellow-600 hover:bg-yellow-700 text-white disabled:bg-yellow-800":"bg-yellow-500 hover:bg-yellow-600 text-white disabled:bg-yellow-300"} rounded-xl transition-all duration-300`,title:D.status==="suspended"?"Activar Cuenta":"Suspender Cuenta","aria-label":D.status==="suspended"?`Activar cuenta de ${D.username}`:`Suspender cuenta de ${D.username}`,children:D.status==="suspended"?o.jsx(wq,{size:16}):o.jsx(yq,{size:16})}),o.jsx("button",{onClick:()=>M(D.id),disabled:v[`delete_${D.id}`],className:`p-2 ${r==="dark"?"bg-red-600 hover:bg-red-700 text-white disabled:bg-red-800":"bg-red-500 hover:bg-red-600 text-white disabled:bg-red-300"} rounded-xl transition-all duration-300`,title:"Eliminar Cuenta","aria-label":`Eliminar cuenta de ${D.username}`,children:o.jsx(rw,{size:16})})]})]},D.id))})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(_a,{className:`mx-auto text-4xl ${r==="dark"?"text-blue-400":"text-blue-600"} mb-3`}),o.jsx("p",{className:`${r==="dark"?"text-gray-300":"text-gray-600"}`,children:"No hay usuarios registrados"})]})]}),o.jsx(KP,{isOpen:i.isOpen,user:i.user,onClose:C,onSave:S,loading:v[`balance_${i.user?.id}`],theme:r}),o.jsx(YP,{isOpen:c.isOpen,user:c.user,onClose:L,onSave:k,loading:v[`role_${c.user?.id}`],theme:r}),o.jsx(XP,{isOpen:h.isOpen,user:h.user,onClose:H,onSave:P,loading:v[`username_${h.user?.id}`],theme:r})]})};QP.propTypes={theme:q.oneOf(["dark","light"])};const JP=({isOpen:r,message:e,title:t,onClose:n})=>r?o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:t}),o.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-all duration-300",children:o.jsx(vn,{size:20})})]}),o.jsx("p",{className:"text-gray-300 mb-6",children:e}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:n,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null;JP.propTypes={isOpen:q.bool.isRequired,message:q.string.isRequired,title:q.string.isRequired,onClose:q.func.isRequired};const ZP=({formatDate:r=t=>{if(!t)return"No especificada";try{const n=t.toDate?t.toDate():new Date(t);return isNaN(n.getTime())?"Fecha invlida":n.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha invlida"}},theme:e="dark"})=>{const[t,n]=A.useState([]),[s,i]=A.useState([]),[a,c]=A.useState({}),[d,h]=A.useState({isOpen:!1,message:"",title:""}),p=(_,w)=>{h({isOpen:!0,title:_,message:w})},m=()=>{h({isOpen:!1,message:"",title:""})};A.useEffect(()=>{const _=cr(nr(At(Pe,"pendingTopUps"),br("status","==","pendiente")),E=>{n(E.docs.map(R=>({id:R.id,...R.data()})))}),w=cr(At(Pe,"topUpsHistory"),E=>{i(E.docs.map(R=>({id:R.id,...R.data()})))});return()=>{_(),w()}},[]);const x=async _=>{try{c(C=>({...C,[_]:!0}));const w=ot(Pe,"pendingTopUps",_),E=t.find(C=>C.id===_);if(!E?.userId)throw new Error("Usuario no encontrado para la recarga");await Rr(w,{status:"aprobado",updatedAt:lr()});const R=ot(Pe,"users",E.userId);await Rr(R,{balance:bV(E.amount||0)}),await ba(ot(Pe,"topUpsHistory",_),{...E,status:"aprobado",updatedAt:lr()}),p("xito","Recarga aprobada exitosamente")}catch(w){console.error("Error al aprobar recarga:",w),p("Error",w.message||"Error al aprobar la recarga")}finally{c(w=>({...w,[_]:!1}))}},v=async _=>{try{c(R=>({...R,[_]:!0}));const w=ot(Pe,"pendingTopUps",_);await Rr(w,{status:"rechazado",updatedAt:lr()});const E=t.find(R=>R.id===_);await ba(ot(Pe,"topUpsHistory",_),{...E,status:"rechazado",updatedAt:lr()}),p("xito","Recarga rechazada exitosamente")}catch(w){console.error("Error al rechazar recarga:",w),p("Error",w.message||"Error al rechazar la recarga")}finally{c(w=>({...w,[_]:!1}))}};return o.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[o.jsxs("div",{className:`bg-${e==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md border ${e==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${e==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Recargas"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Pendientes - BlackStreaming"})]}),Array.isArray(t)&&t.length>0?o.jsx("div",{className:"space-y-4",children:t.map(_=>o.jsxs("div",{className:`border ${e==="dark"?"border-gray-600/50":"border-gray-300"} rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300`,children:[o.jsxs("div",{className:`${e==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm px-4 py-3 border-b ${e==="dark"?"border-gray-600/50":"border-gray-300"} flex justify-between items-center`,children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-10 h-10 ${e==="dark"?"bg-blue-900/80":"bg-blue-100/80"} rounded-full flex items-center justify-center ${e==="dark"?"text-blue-400":"text-blue-600"}`,children:o.jsx(ga,{size:18})}),o.jsxs("div",{children:[o.jsx("h4",{className:`font-semibold ${e==="dark"?"text-white":"text-gray-900"}`,children:_.username||"Sin nombre"}),o.jsxs("p",{className:`text-xs ${e==="dark"?"text-gray-400":"text-gray-600"}`,children:["Solicitado: ",r(_.requestedAt)]})]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("p",{className:`text-lg font-medium ${e==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",(_.amount||0).toFixed(2)]})})]}),o.jsx("div",{className:`p-4 ${e==="dark"?"bg-gray-700/50":"bg-gray-50"} backdrop-blur-sm`,children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx("button",{onClick:()=>x(_.id),disabled:a[_.id],className:`flex-1 ${e==="dark"?"bg-green-600 hover:bg-green-700 disabled:bg-green-800":"bg-green-500 hover:bg-green-600 disabled:bg-green-300"} text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300`,"aria-label":`Aprobar recarga de ${_.username}`,children:a[_.id]?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):o.jsxs(o.Fragment,{children:[o.jsx(_q,{size:18})," Aprobar Recarga"]})}),o.jsx("button",{onClick:()=>v(_.id),disabled:a[_.id],className:`flex-1 ${e==="dark"?"bg-red-600 hover:bg-red-700 disabled:bg-red-800":"bg-red-500 hover:bg-red-600 disabled:bg-red-300"} text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300`,"aria-label":`Rechazar recarga de ${_.username}`,children:a[_.id]?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):o.jsxs(o.Fragment,{children:[o.jsx(vn,{size:18})," Rechazar Recarga"]})})]})})]},_.id))}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(ga,{className:`mx-auto text-4xl ${e==="dark"?"text-blue-400":"text-blue-600"} mb-3`}),o.jsx("h4",{className:`text-lg font-medium ${e==="dark"?"text-gray-300":"text-gray-600"}`,children:"No hay recargas pendientes"}),o.jsx("p",{className:`${e==="dark"?"text-gray-400":"text-gray-500"}`,children:"Todas las solicitudes han sido procesadas"})]})]}),o.jsxs("div",{className:`bg-${e==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md border ${e==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${e==="dark"?"text-white":"text-gray-900"} mb-4`,children:["Historial de"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Recargas - BlackStreaming"})]}),Array.isArray(s)&&s.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[o.jsx("thead",{className:`${e==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${e==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Usuario"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${e==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Monto"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${e==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Estado"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${e==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Fecha"})]})}),o.jsx("tbody",{className:`${e==="dark"?"bg-gray-800/50":"bg-white"} divide-y divide-gray-600/50`,children:s.map(_=>o.jsxs("tr",{className:`hover:bg-${e==="dark"?"gray-700/50":"gray-100"} transition-all duration-300`,children:[o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${e==="dark"?"text-white":"text-gray-900"}`,children:_.username||"Sin nombre"}),o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap ${e==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",(_.amount||0).toFixed(2)]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${_.status==="aprobado"?e==="dark"?"bg-green-900/80 text-green-400":"bg-green-100/80 text-green-600":e==="dark"?"bg-red-900/80 text-red-400":"bg-red-100/80 text-red-600"}`,children:_.status||"Desconocido"})}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${e==="dark"?"text-gray-300":"text-gray-600"}`,children:r(_.updatedAt)})]},_.id))})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(ga,{className:`mx-auto text-4xl ${e==="dark"?"text-blue-400":"text-blue-600"} mb-3`}),o.jsx("p",{className:`${e==="dark"?"text-gray-300":"text-gray-600"}`,children:"No hay historial de recargas"})]})]}),o.jsx(JP,{isOpen:d.isOpen,title:d.title,message:d.message,onClose:m})]})};ZP.propTypes={formatDate:q.func,theme:q.oneOf(["dark","light"])};const Lte=({withdrawals:r,formatDate:e,actionLoading:t,setActionLoading:n,showNotificationModal:s})=>{const i=async(a,c)=>{try{n(h=>({...h,[a]:!0}));const d=ot(Pe,"withdrawals",a);await Rr(d,{status:c==="approve"?"completed":"rejected",updatedAt:lr()}),s("xito",`Retiro ${c==="approve"?"aprobado":"rechazado"} exitosamente`)}catch(d){s("Error",d.message||`Error al ${c==="approve"?"aprobar":"rechazar"} el retiro`)}finally{n(d=>({...d,[a]:!1}))}};return o.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[o.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Retiros ",o.jsx("span",{className:"text-red-400",children:"Pendientes"})]}),r.length===0?o.jsxs("div",{className:"text-center text-gray-300 py-8",children:[o.jsx(Xs,{className:"mx-auto text-4xl text-red-400 mb-4"}),o.jsx("p",{children:"No hay retiros pendientes"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left text-gray-300",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-gray-600/50",children:[o.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Usuario"}),o.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Monto"}),o.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Fecha"}),o.jsx("th",{className:"py-3 px-4 font-semibold text-red-400",children:"Acciones"})]})}),o.jsx("tbody",{children:r.map(a=>o.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30 transition-all duration-300",children:[o.jsx("td",{className:"py-3 px-4",children:a.userEmail||"No especificado"}),o.jsxs("td",{className:"py-3 px-4",children:["S/ ",a.amount?.toFixed(2)||"0.00"]}),o.jsx("td",{className:"py-3 px-4",children:e(a.createdAt)}),o.jsxs("td",{className:"py-3 px-4 flex space-x-2",children:[o.jsxs("button",{onClick:()=>i(a.id,"approve"),disabled:t[a.id],className:`px-3 py-1 rounded-xl text-white flex items-center space-x-1 transition-all duration-300 ${t[a.id]?"bg-gray-600 cursor-not-allowed":"bg-green-500 hover:bg-green-600"}`,children:[o.jsx(jq,{}),o.jsx("span",{children:"Aprobar"})]}),o.jsxs("button",{onClick:()=>i(a.id,"reject"),disabled:t[a.id],className:`px-3 py-1 rounded-xl text-white flex items-center space-x-1 transition-all duration-300 ${t[a.id]?"bg-gray-600 cursor-not-allowed":"bg-red-500 hover:bg-red-600"}`,children:[o.jsx(Zs,{}),o.jsx("span",{children:"Rechazar"})]})]})]},a.id))})]})})]})},ej=({sales:r=[],totalSales:e=0,formatDate:t=i=>"No especificada",getOrderStatus:n=()=>"Desconocido",theme:s="dark"})=>{const[i,a]=A.useState({}),[c,d]=A.useState(null),h=async p=>{a(m=>({...m,[`delete_${p}`]:!0}));try{const m=ot(Pe,"sales",p);await Ha(m),window.dispatchEvent(new CustomEvent("saleDeleted",{detail:{saleId:p}}))}catch(m){d("Error al eliminar pedido: "+m.message)}a(m=>({...m,[`delete_${p}`]:!1}))};return o.jsxs("div",{className:`bg-${s==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${s==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${s==="dark"?"text-white":"text-gray-900"} mb-4`,children:["Ventas"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"General - BlackStreaming"})]}),o.jsxs("div",{className:`${s==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-6 text-center mb-6 border ${s==="dark"?"border-gray-600/50":"border-gray-300"}`,children:[o.jsx("h4",{className:`text-lg font-semibold ${s==="dark"?"text-blue-400":"text-blue-600"} mb-2`,children:"Total Ventas"}),o.jsxs("p",{className:`text-3xl font-bold ${s==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",e.toFixed(2)]}),o.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-300":"text-gray-600"} mt-2`,children:"Suma de todos los pedidos realizados"})]}),o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${s==="dark"?"text-white":"text-gray-900"} mb-4`,children:["Historial de"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Pedidos - BlackStreaming"})]}),c&&o.jsx("div",{className:`text-center py-4 ${s==="dark"?"text-blue-400":"text-blue-600"}`,children:c}),r.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[o.jsx("thead",{className:`${s==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${s==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Nombre del Producto"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${s==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Precio"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${s==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Proveedor"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${s==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Usuario Comprador"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${s==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Fecha"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${s==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Estado"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${s==="dark"?"text-gray-300":"text-gray-700"} uppercase tracking-wider`,children:"Acciones"})]})}),o.jsx("tbody",{className:`${s==="dark"?"bg-gray-800/50":"bg-white"} divide-y divide-gray-600/50`,children:r.map(p=>o.jsxs("tr",{className:`hover:bg-${s==="dark"?"gray-700/50":"gray-100"} transition-all duration-300`,children:[o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${s==="dark"?"text-white":"text-gray-900"}`,children:p.productName||"Sin nombre"}),o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap ${s==="dark"?"text-white":"text-gray-900"}`,children:["S/ ",(p.price||0).toFixed(2)]}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:p.provider||"Sin proveedor"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:p.buyerName||"Sin comprador"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:t(p.createdAt)}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${n(p)==="Pendiente"?s==="dark"?"bg-yellow-900/80 text-yellow-400":"bg-yellow-100/80 text-yellow-600":n(p)==="Activo"?s==="dark"?"bg-green-900/80 text-green-400":"bg-green-100/80 text-green-600":s==="dark"?"bg-red-900/80 text-red-400":"bg-red-100/80 text-red-600"}`,children:n(p)})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:()=>h(p.id),disabled:i[`delete_${p.id}`],className:`p-2 ${s==="dark"?"bg-red-600 hover:bg-red-700 text-white disabled:bg-red-800":"bg-red-500 hover:bg-red-600 text-white disabled:bg-red-300"} rounded-xl transition-all duration-300`,title:"Eliminar Pedido","aria-label":`Eliminar pedido ${p.productName||"sin nombre"}`,children:i[`delete_${p.id}`]?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):o.jsx(rw,{size:16})})})]},p.id))})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(xd,{className:`mx-auto text-4xl ${s==="dark"?"text-blue-400":"text-blue-600"} mb-3`}),o.jsx("p",{className:`${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"No hay pedidos registrados"})]})]})};ej.propTypes={sales:q.array,totalSales:q.number,formatDate:q.func,getOrderStatus:q.func,theme:q.oneOf(["dark","light"])};const tj=({earnings:r={day:0,week:0,month:0,total:0},totalUsers:e=0,theme:t="dark"})=>o.jsxs("div",{className:`bg-${t==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-6xl mx-auto border ${t==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Ganancias -"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[o.jsxs("div",{className:`${t==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${t==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[o.jsxs("h4",{className:`text-lg font-semibold ${t==="dark"?"text-blue-400":"text-blue-600"} mb-2 flex items-center`,children:[o.jsx(j0,{className:"mr-2","aria-hidden":"true"})," Ganancias Diarias"]}),o.jsxs("p",{className:`text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancias diarias",children:["S/ ",(r.day||0).toFixed(2)]}),o.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Estimado por da"})]}),o.jsxs("div",{className:`${t==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${t==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[o.jsxs("h4",{className:`text-lg font-semibold ${t==="dark"?"text-blue-400":"text-blue-600"} mb-2 flex items-center`,children:[o.jsx(j0,{className:"mr-2","aria-hidden":"true"})," Ganancias Semanales"]}),o.jsxs("p",{className:`text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancias semanales",children:["S/ ",(r.week||0).toFixed(2)]}),o.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Estimado por semana"})]}),o.jsxs("div",{className:`${t==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${t==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[o.jsxs("h4",{className:`text-lg font-semibold ${t==="dark"?"text-blue-400":"text-blue-600"} mb-2 flex items-center`,children:[o.jsx(j0,{className:"mr-2","aria-hidden":"true"})," Ganancias Mensuales"]}),o.jsxs("p",{className:`text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancias mensuales",children:["S/ ",(r.month||0).toFixed(2)]}),o.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Estimado por mes"})]}),o.jsxs("div",{className:`${t==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${t==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[o.jsxs("h4",{className:`text-lg font-semibold ${t==="dark"?"text-blue-400":"text-blue-600"} mb-2 flex items-center`,children:[o.jsx(j0,{className:"mr-2","aria-hidden":"true"})," Ganancias Totales"]}),o.jsxs("p",{className:`text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancias totales",children:["S/ ",(r.total||0).toFixed(2)]}),o.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Total acumulado"})]})]}),o.jsxs("div",{className:`${t==="dark"?"bg-gray-700/50":"bg-gray-100"} backdrop-blur-sm rounded-2xl p-4 border ${t==="dark"?"border-gray-600/50":"border-gray-300"} shadow-lg`,children:[o.jsx("h4",{className:`text-lg font-semibold ${t==="dark"?"text-blue-400":"text-blue-600"} mb-2`,children:"Resumen"}),o.jsxs("p",{className:`${t==="dark"?"text-gray-300":"text-gray-600"}`,children:["Total de usuarios registrados:"," ",o.jsx("span",{className:`font-medium ${t==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Total de usuarios registrados",children:e})]}),o.jsxs("p",{className:`${t==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:["Ganancia por usuario:"," ",o.jsx("span",{className:`font-medium ${t==="dark"?"text-white":"text-gray-900"}`,"aria-label":"Ganancia por usuario",children:"S/ 5.00"})]}),o.jsx("p",{className:`${t==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"Las ganancias se calculan asumiendo S/ 5.00 por cada usuario registrado. Las estimaciones diarias y semanales son proporciones del total (5% y 25%, respectivamente)."})]})]});tj.propTypes={earnings:q.shape({day:q.number,week:q.number,month:q.number,total:q.number}),totalUsers:q.number,theme:q.oneOf(["dark","light"])};const rj=({userName:r="",setUserName:e=()=>{},email:t="",handleSaveChanges:n=()=>{},handleLogout:s=()=>{},actionLoading:i={},theme:a="dark"})=>o.jsxs("div",{className:`bg-${a==="dark"?"black/50":"white"} backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-md max-w-2xl mx-auto border ${a==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${a==="dark"?"text-white":"text-gray-900"} mb-6`,children:["Configuracin -"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),o.jsxs("form",{onSubmit:n,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium ${a==="dark"?"text-gray-300":"text-gray-700"} mb-2 flex items-center`,children:[o.jsx(bc,{className:`mr-2 ${a==="dark"?"text-blue-400":"text-blue-600"}`,"aria-hidden":"true"})," ","Nombre de usuario"]}),o.jsx("input",{type:"text",value:r,onChange:c=>e(c.target.value),className:`w-full px-4 py-2 rounded-xl ${a==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,placeholder:"Ingresa tu nombre de usuario",required:!0,"aria-label":"Nombre de usuario"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium ${a==="dark"?"text-gray-300":"text-gray-700"} mb-2 flex items-center`,children:[o.jsx(md,{className:`mr-2 ${a==="dark"?"text-blue-400":"text-blue-600"}`,"aria-hidden":"true"})," ","Correo electrnico"]}),o.jsx("input",{type:"email",value:t,disabled:!0,className:`w-full px-4 py-2 rounded-xl ${a==="dark"?"bg-gray-700/50 text-gray-400 border-gray-600/50":"bg-gray-100 text-gray-500 border-gray-300"} cursor-not-allowed`,"aria-label":"Correo electrnico (solo lectura)"}),o.jsx("p",{className:`text-sm ${a==="dark"?"text-gray-400":"text-gray-500"} mt-1`,children:"El correo no puede ser modificado."})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium ${a==="dark"?"text-gray-300":"text-gray-700"} mb-2 flex items-center`,children:[o.jsx(tw,{className:`mr-2 ${a==="dark"?"text-blue-400":"text-blue-600"}`,"aria-hidden":"true"})," ","Nueva contrasea (opcional)"]}),o.jsx("input",{type:"password",name:"password",className:`w-full px-4 py-2 rounded-xl ${a==="dark"?"bg-gray-700/50 text-white border-gray-600/50 focus:ring-blue-400 focus:border-blue-400":"bg-gray-100 text-gray-900 border-gray-300 focus:ring-blue-600 focus:border-blue-600"} focus:ring-2 transition-all`,placeholder:"Ingresa una nueva contrasea","aria-label":"Nueva contrasea"}),o.jsx("p",{className:`text-sm ${a==="dark"?"text-gray-400":"text-gray-500"} mt-1`,children:"Mnimo 6 caracteres. Djalo en blanco para no cambiarla."})]}),o.jsx("button",{type:"submit",disabled:i.config,className:`w-full py-3 px-4 ${a==="dark"?"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-800":"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300"} text-white rounded-xl font-medium transition-all duration-300`,"aria-label":"Guardar cambios",children:i.config?o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar Cambios"})]}),o.jsx("div",{className:"mt-6",children:o.jsxs("button",{onClick:s,className:`w-full py-3 px-4 ${a==="dark"?"bg-red-600 hover:bg-red-700 disabled:bg-red-800":"bg-red-500 hover:bg-red-600 disabled:bg-red-300"} text-white rounded-xl font-medium transition-all duration-300 flex items-center justify-center gap-2`,"aria-label":"Cerrar sesin",children:[o.jsx(yd,{size:18})," Cerrar Sesin"]})})]});rj.propTypes={userName:q.string,setUserName:q.func,email:q.string,handleSaveChanges:q.func,handleLogout:q.func,actionLoading:q.object,theme:q.oneOf(["dark","light"])};const nj=({isOpen:r,message:e,title:t,onClose:n,theme:s="dark"})=>r?o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:`bg-${s==="dark"?"gray-900/90":"white"} backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border ${s==="dark"?"border-gray-800/50":"border-gray-300"}`,children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h2",{className:`text-xl font-bold ${s==="dark"?"text-white":"text-gray-900"}`,children:[t||"Notificacin"," -"," ",o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),o.jsx("button",{onClick:n,className:`${s==="dark"?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-all duration-300`,"aria-label":"Cerrar notificacin",children:o.jsx(vn,{size:20})})]}),o.jsx("p",{className:`mb-6 ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:e||"No se proporcion ningn mensaje."}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:n,className:`px-4 py-2 ${s==="dark"?"bg-blue-500 hover:bg-blue-600 text-white":"bg-blue-600 hover:bg-blue-700 text-white"} rounded-xl transition-all duration-300`,"aria-label":"Aceptar notificacin",children:"Aceptar"})})]})})}):null;nj.propTypes={isOpen:q.bool.isRequired,message:q.string,title:q.string,onClose:q.func.isRequired,theme:q.oneOf(["dark","light"])};const Mte=({isOpen:r,user:e,onClose:t,onSave:n})=>{const[s,i]=A.useState(e?.balance||0),[a,c]=A.useState(""),d=h=>{if(h.preventDefault(),c(""),isNaN(s)||s<0){c("Por favor, ingrese un saldo vlido (nmero no negativo).");return}n(e.id,parseFloat(s))};return r?o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-white",children:["Editar Saldo de ",e.username]}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-all duration-300",children:o.jsx(Zs,{size:20})})]}),o.jsxs("form",{onSubmit:d,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-gray-300 mb-2",children:"Nuevo Saldo (S/)"}),o.jsx("input",{type:"number",value:s,onChange:h=>i(h.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"0",step:"0.01",required:!0}),a&&o.jsx("p",{className:"text-red-400 text-sm mt-2",children:a})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},sj=({theme:r,products:e,setProducts:t,loadingProducts:n,searchQuery:s,setSearchQuery:i,handleDeleteProduct:a})=>{const c=r==="dark",[d,h]=A.useState(null),[p,m]=A.useState(""),x=e.filter(_=>_.name?.toLowerCase().includes(s.toLowerCase())||_.category?.toLowerCase().includes(s.toLowerCase())),v=async(_,w)=>{if(!w.trim()){h(null);return}try{const E=ot(Pe,"products",_);await Rr(E,{provider:w.trim()}),t(R=>R.map(C=>C.id===_?{...C,provider:w.trim()}:C)),h(null)}catch(E){console.error("Error updating provider:",E)}};return n?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o.jsxs(Z.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${c?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[o.jsx("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r ${c?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Gestin de Productos"}),o.jsx("div",{className:"relative w-full sm:w-64 mt-4 sm:mt-0",children:o.jsx("input",{type:"text",placeholder:"Buscar productos...",value:s,onChange:_=>i(_.target.value),className:`w-full px-3 py-2 rounded-xl ${c?"bg-gray-700/50 text-white border-gray-600/50":"bg-gray-200/50 text-gray-900 border-gray-300/50"} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300 text-sm placeholder-gray-500`,"aria-label":"Search products"})})]}),x.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[o.jsx("thead",{className:`backdrop-blur-sm ${c?"bg-gray-900/80":"bg-gray-200/80"}`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Imagen"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Nombre"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Categora"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Tipo"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Proveedor"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Estado"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Stock"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Precio"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${c?"text-gray-300":"text-gray-700"}`,children:"Acciones"})]})}),o.jsx("tbody",{className:`divide-y divide-gray-700/50 ${c?"bg-gray-800/70":"bg-gray-100/70"}`,children:x.map((_,w)=>o.jsxs("tr",{className:"hover:bg-blue-500/10 transition-all duration-300",children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:_.image?o.jsx("img",{src:_.image,alt:_.name,className:"h-12 w-12 rounded-lg object-cover",loading:"lazy"}):o.jsx("div",{className:"h-12 w-12 bg-gray-300 rounded-lg flex items-center justify-center",children:o.jsx(R1,{className:"text-gray-500",size:20})})}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${c?"text-white":"text-gray-900"}`,children:_.name||"Sin nombre"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${c?"text-gray-300":"text-gray-600"}`,children:_.category||"Sin categora"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${c?"text-gray-300":"text-gray-600"}`,children:_.accountType||"N/A"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:d===_.id?o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:p,onChange:E=>m(E.target.value),onBlur:()=>v(_.id,p),onKeyDown:E=>{E.key==="Enter"&&v(_.id,p),E.key==="Escape"&&(h(null),m(""))},className:`flex-1 px-2 py-1 rounded border focus:outline-none focus:ring-2 focus:ring-blue-400 ${c?"bg-gray-700/80 text-white border-gray-600":"bg-white text-gray-900 border-gray-300"}`,autoFocus:!0}),o.jsx("button",{onClick:()=>{h(null),m("")},className:`p-1 rounded-full ${c?"text-gray-400 hover:bg-gray-600/50":"text-gray-500 hover:bg-gray-200"} transition-all duration-200`,"aria-label":"Cancelar edicin",children:o.jsx(vn,{size:12})})]}):o.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-100/50 rounded p-1",onClick:()=>{h(_.id),m(_.provider||"")},children:[o.jsx("span",{className:`text-sm ${c?"text-gray-300":"text-gray-600"}`,children:_.provider||"Sin proveedor"}),o.jsx(G0,{size:12,className:`${c?"text-gray-500":"text-gray-400"}`})]})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${_.status==="En stock"?"bg-green-500/20 text-green-400 border-green-500/50":_.status==="A pedido"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/50":"bg-red-500/20 text-red-400 border-red-500/50"} border`,children:_.status||"Desconocido"})}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${c?"text-gray-300":"text-gray-600"}`,children:_.stock!=null?_.stock:"0"}),o.jsxs("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${c?"text-white":"text-gray-900"}`,children:["S/ ",parseFloat(_.price||0).toFixed(2)]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:o.jsx("button",{onClick:()=>a(_.id),className:`p-2 rounded-full ${c?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-red-100 text-red-600 hover:bg-red-200"} transition-all duration-300`,title:"Eliminar producto","aria-label":`Eliminar producto ${_.name}`,children:o.jsx(rw,{size:14})})})]},_.id||w))})]})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(R1,{className:`mx-auto text-4xl ${c?"text-gray-400":"text-gray-500"} mb-3`}),o.jsx("h4",{className:`text-lg font-medium ${c?"text-gray-300":"text-gray-700"}`,children:"No hay productos registrados"}),o.jsx("p",{className:`text-sm ${c?"text-gray-400":"text-gray-600"}`,children:"Los productos aparecern aqu cuando los agregues."})]})]})};sj.propTypes={theme:q.string.isRequired,products:q.array.isRequired,setProducts:q.func.isRequired,loadingProducts:q.bool.isRequired,searchQuery:q.string.isRequired,setSearchQuery:q.func.isRequired,handleDeleteProduct:q.func.isRequired};const ij=({theme:r,users:e,showNotificationModal:t})=>{const n=r==="dark",[s,i]=A.useState(null),[a,c]=A.useState(0),[d,h]=A.useState({}),p=e.filter(x=>x.role==="provider"),m=async(x,v)=>{if(v<0){i(null);return}try{h(w=>({...w,[x]:!0}));const _=ot(Pe,"users",x);await Rr(_,{userAssignmentLimit:parseInt(v)||0,updatedAt:lr()}),i(null),t("xito","Lmite actualizado correctamente")}catch(_){console.error("Error updating limit:",_),t("Error",_.message||"Error al actualizar el lmite")}finally{h(_=>({..._,[x]:!1}))}};return o.jsxs(Z.div,{className:`backdrop-blur-md p-4 sm:p-6 lg:p-8 rounded-2xl shadow-2xl max-w-6xl mx-auto border ${n?"bg-black/50 border-gray-700/50":"bg-white/50 border-gray-200/50"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},children:[o.jsx("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r mb-6 ${n?"from-blue-400 to-purple-600":"from-blue-600 to-purple-800"}`,children:"Gestin de Proveedores"}),p.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-700/50",children:[o.jsx("thead",{className:`backdrop-blur-sm ${n?"bg-gray-900/80":"bg-gray-200/80"}`,children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Nombre"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Email"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Asignados"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Lmite de Asignaciones"}),o.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${n?"text-gray-300":"text-gray-700"}`,children:"Acciones"})]})}),o.jsx("tbody",{className:`divide-y divide-gray-700/50 ${n?"bg-gray-800/70":"bg-gray-100/70"}`,children:p.map(x=>o.jsxs("tr",{className:"hover:bg-blue-500/10 transition-all duration-300",children:[o.jsx("td",{className:`px-4 py-4 whitespace-nowrap ${n?"text-white":"text-gray-900"}`,children:x.username||"Sin nombre"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-gray-300":"text-gray-600"}`,children:x.email||"No especificado"}),o.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm ${n?"text-gray-300":"text-gray-600"}`,children:x.assignedUsersCount||0}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:s===x.id?o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"number",value:a,onChange:v=>c(v.target.value),onBlur:()=>m(x.id,a),onKeyDown:v=>{v.key==="Enter"&&m(x.id,a),v.key==="Escape"&&(i(null),c(0))},className:`w-20 px-2 py-1 rounded border focus:outline-none focus:ring-2 focus:ring-blue-400 ${n?"bg-gray-700/80 text-white border-gray-600":"bg-white text-gray-900 border-gray-300"}`,autoFocus:!0,min:"0"}),o.jsx("button",{onClick:()=>{i(null),c(0)},className:`p-1 rounded-full ${n?"text-gray-400 hover:bg-gray-600/50":"text-gray-500 hover:bg-gray-200"} transition-all duration-200`,"aria-label":"Cancelar edicin",disabled:d[x.id],children:o.jsx(vn,{size:12})})]}):o.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-100/50 rounded p-1",onClick:()=>{i(x.id),c(x.userAssignmentLimit||0)},children:[o.jsx("span",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`,children:x.userAssignmentLimit||0}),o.jsx(G0,{size:12,className:`${n?"text-gray-500":"text-gray-400"}`})]})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:d[x.id]&&o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-blue-500"})})]},x.id))})]})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(_a,{className:`mx-auto text-4xl ${n?"text-gray-400":"text-gray-500"} mb-3`}),o.jsx("h4",{className:`text-lg font-medium ${n?"text-gray-300":"text-gray-700"}`,children:"No hay proveedores"}),o.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"Los proveedores aparecern aqu cuando se asignen."})]})]})};ij.propTypes={theme:q.string.isRequired,users:q.array.isRequired,showNotificationModal:q.func.isRequired};const Vte=$i.memo(({show:r,onClose:e,title:t,message:n,theme:s})=>o.jsx(Bt,{children:r&&o.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:e,role:"dialog","aria-labelledby":"modal-title",children:o.jsxs(Z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 ${s==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${s==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:i=>i.stopPropagation(),children:[o.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notification",children:o.jsx(vn,{size:20})}),o.jsx("h2",{id:"modal-title",className:`text-xl font-bold mb-4 ${s==="dark"?"text-white":"text-gray-900"}`,children:t}),o.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:n})]})})}));Vte.propTypes={show:q.bool.isRequired,onClose:q.func.isRequired,title:q.string.isRequired,message:q.string.isRequired,theme:q.string.isRequired};const aj=()=>{const[r,e]=A.useState(!1),[t,n]=A.useState("inicio"),[s,i]=A.useState(""),[a,c]=A.useState(""),[d,h]=A.useState([]),[p,m]=A.useState([]),[x,v]=A.useState([]),[_,w]=A.useState([]),[E,R]=A.useState([]),[C,V]=A.useState([]),[L,K]=A.useState(0),[H,S]=A.useState(0),[k,P]=A.useState(0),[j,M]=A.useState(0),[D,O]=A.useState({day:0,week:0,month:0,total:0}),[pe,Ae]=A.useState(!0),[Fe,Me]=A.useState(!0),[Ee,Te]=A.useState(null),[Ne,ae]=A.useState({}),[W,oe]=A.useState({isOpen:!1,message:"",title:""}),[ie,ne]=A.useState({isOpen:!1,user:null}),[z,_e]=A.useState("dark"),[De,Se]=A.useState(!1),[we,Qe]=A.useState(!1),[ft,zt]=A.useState(""),[wt,Yt]=A.useState(""),kt=Gi(),Oe=A.useCallback(()=>{_e(J=>J==="dark"?"light":"dark")},[]),Xt=A.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),Rt=A.useCallback((J,Ce)=>{oe({isOpen:!0,title:J,message:Ce})},[]),He=A.useCallback(()=>{oe({isOpen:!1,message:"",title:""})},[]),de=A.useCallback(J=>{ne({isOpen:!0,user:J})},[]),et=A.useCallback(()=>{ne({isOpen:!1,user:null})},[]),ct=A.useCallback(J=>{if(!J)return"No especificada";try{const Ce=J instanceof Date?J:new Date(J);return isNaN(Ce.getTime())?"Fecha invlida":Ce.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha invlida"}},[]),pt=A.useCallback(async J=>{if(window.confirm("Ests seguro de que quieres eliminar este producto?"))try{ae(Ce=>({...Ce,deleteProduct:!0})),await Ha(ot(Pe,"products",J)),Rt("xito","Producto eliminado correctamente")}catch(Ce){console.error("Error al eliminar producto:",Ce),Rt("Error",Ce.message||"Error al eliminar el producto")}finally{ae(Ce=>({...Ce,deleteProduct:!1}))}},[Rt]),St=A.useCallback(async(J,Ce)=>{try{ae(fe=>({...fe,balance:!0}));const gt=ot(Pe,"users",J);await Rr(gt,{balance:Ce,updatedAt:lr()}),Rt("xito","Saldo actualizado exitosamente"),et()}catch(gt){console.error("Error al actualizar saldo:",gt),Rt("Error",gt.message||"Error al actualizar el saldo")}finally{ae(gt=>({...gt,balance:!1}))}},[Rt,et]),ht=A.useCallback(async J=>{J.preventDefault();try{ae(Ie=>({...Ie,config:!0}));const Ce=J.target.password.value,gt=ot(Pe,"users",Zr.currentUser.uid),fe={username:s,updatedAt:lr()};if(Ce){if(Ce.length<6){Rt("Error","La contrasea debe tener al menos 6 caracteres");return}await ab(Zr.currentUser,Ce)}await Rr(gt,fe),Rt("xito","Cambios guardados correctamente"),J.target.reset()}catch(Ce){console.error("Error al guardar cambios:",Ce),Rt("Error",Ce.message||"Error al guardar los cambios")}finally{ae(Ce=>({...Ce,config:!1}))}},[s,Rt]),jt=A.useCallback(async()=>{try{await Bh(Zr),kt("/")}catch(J){console.error("Error al cerrar sesin:",J),Rt("Error",J.message||"Error al cerrar sesin")}},[kt,Rt]);A.useEffect(()=>{const J=Nc(Zr,Ce=>{Ce?(c(Ce.email||"No especificado"),Ae(!1)):kt("/login")});return()=>J()},[kt]),A.useEffect(()=>{if(!Zr.currentUser)return;const J=ot(Pe,"users",Zr.currentUser.uid),Ce=cr(J,gt=>{if(gt.exists()){const fe=gt.data();i(fe.username||"Admin")}else Te("Usuario no encontrado")},gt=>{console.error("Error al cargar datos del usuario:",gt),Te("Error al cargar datos del usuario: "+gt.message)});return()=>Ce()},[]),A.useEffect(()=>{const J=At(Pe,"users"),Ce=At(Pe,"sales"),gt=nr(At(Pe,"pendingTopUps"),br("status","==","pendiente")),fe=nr(At(Pe,"withdrawals"),br("status","==","pendiente")),Ie=nr(At(Pe,"products"),u2("createdAt","desc")),Le=cr(J,lt=>{const tt=lt.docs.map(Nt=>({id:Nt.id,...Nt.data()}));h(tt),K(tt.length)},lt=>{console.error("Error al cargar usuarios:",lt),Te("Error al cargar usuarios: "+lt.message)}),Ze=cr(Ce,lt=>{const tt=lt.docs.map(Ut=>({id:Ut.id,...Ut.data()}));m(tt);const Nt=tt.reduce((Ut,Qt)=>Ut+(parseFloat(Qt.price)||0),0);S(Nt)},lt=>{console.error("Error al cargar ventas:",lt),Te("Error al cargar ventas: "+lt.message)}),vt=cr(gt,lt=>{const tt=lt.docs.map(Nt=>({id:Nt.id,...Nt.data(),date:Nt.data().requestedAt?.toDate?.()||new Date,amount:parseFloat(Nt.data().amount)||0}));v(tt),P(tt.length)},lt=>{console.error("Error al cargar recargas:",lt),Te("Error al cargar recargas: "+lt.message)}),It=cr(fe,lt=>{const tt=lt.docs.map(Nt=>({id:Nt.id,...Nt.data(),date:Nt.data().requestedAt?.toDate?.()||new Date,amount:parseFloat(Nt.data().amount)||0}));w(tt),M(tt.length)},lt=>{console.error("Error al cargar retiros:",lt),Te("Error al cargar retiros: "+lt.message)}),at=cr(Ie,lt=>{const tt=lt.docs.map(Nt=>({id:Nt.id,...Nt.data(),createdAt:Nt.data().createdAt?.toDate?.()||new Date}));R(tt),Me(!1)},lt=>{console.error("Error al cargar productos:",lt),Te("Error al cargar productos: "+lt.message),Me(!1)});return()=>{Le(),Ze(),vt(),It(),at()}},[]),A.useEffect(()=>{const J=cr(ot(Pe,"notifications","adminMessage"),Ce=>{if(Ce.exists()){const gt=Ce.data();V([{id:Ce.id,...gt,timestamp:gt.updatedAt?.toDate()}])}else V([])},Ce=>{console.error("Error al cargar notificaciones:",Ce),Te("Error al cargar notificaciones: "+Ce.message)});return()=>J()},[]),A.useEffect(()=>{const J=L*5;O({day:J*.05,week:J*.25,month:J,total:J})},[L]),A.useEffect(()=>{const J=()=>{Se(window.scrollY>300)};return window.addEventListener("scroll",J),()=>window.removeEventListener("scroll",J)},[]);const dt=A.useCallback(J=>{const Ce=J.endDate?.toDate?.()||new Date,gt=new Date;return J.status==="pending"?"Pendiente":Ce>gt&&J.status==="completed"?"Activo":"Expirado"},[]),gr=A.useCallback(()=>pe?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):Ee?o.jsxs("div",{className:`bg-${z==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${z==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsx(vc,{className:"mx-auto text-4xl text-blue-400 mb-4"}),o.jsx("h3",{className:`text-xl font-bold ${z==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Error"}),o.jsx("p",{className:`text-base ${z==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:Ee}),o.jsx("button",{onClick:()=>Te(null),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Aceptar"})]}):o.jsx("div",{className:`bg-${z==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 lg:p-10 rounded-2xl shadow-md max-w-6xl mx-auto border ${z==="dark"?"border-gray-700/50":"border-gray-300"} w-full`,children:(()=>{switch(t){case"inicio":return o.jsx(Dte,{totalUsers:L,totalSales:H,pendingTopUps:k,pendingWithdrawals:j});case"notificaciones":return o.jsx(Fte,{notifications:C,formatDate:ct});case"usuarios":return o.jsx(QP,{users:d,openEditBalanceModal:de});case"proveedores":return o.jsx(ij,{users:d,theme:z,showNotificationModal:Rt,actionLoading:Ne});case"recargas":return o.jsx(ZP,{topUps:x,formatDate:ct,actionLoading:Ne,setActionLoading:ae,showNotificationModal:Rt});case"retiros":return o.jsx(Lte,{withdrawals:_,formatDate:ct,actionLoading:Ne,setActionLoading:ae,showNotificationModal:Rt});case"pedidos":return o.jsx(ej,{sales:p,totalSales:H,formatDate:ct,getOrderStatus:dt});case"productos":return o.jsx(sj,{theme:z,products:E,setProducts:R,loadingProducts:Fe,searchQuery:wt,setSearchQuery:Yt,handleDeleteProduct:pt});case"ganancias":return o.jsx(tj,{earnings:D,totalUsers:L});case"configuracion":return o.jsx(rj,{userName:s,setUserName:i,email:a,handleSaveChanges:ht,handleLogout:jt,actionLoading:Ne});default:return o.jsxs("div",{className:`bg-${z==="dark"?"black/50":"white"} backdrop-blur-md p-6 sm:p-8 rounded-2xl shadow-md text-center max-w-2xl mx-auto border ${z==="dark"?"border-gray-700/50":"border-gray-300"}`,children:[o.jsx(vc,{className:"mx-auto text-4xl text-blue-400 mb-4"}),o.jsx("h3",{className:`text-xl font-bold ${z==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Seccin no encontrada"}),o.jsx("p",{className:`text-base ${z==="dark"?"text-gray-300":"text-gray-700"} mb-4`,children:"La seccin que ests buscando no existe o no est disponible."}),o.jsx("button",{onClick:()=>n("inicio"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300",children:"Volver al inicio"})]})}})()}),[pe,Ee,z,t,L,H,k,j,C,ct,d,de,x,Ne,Rt,_,p,dt,D,s,i,a,ht,jt,E,Fe,wt,pt]);return o.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${z==="dark"?"from-gray-900 via-gray-800 to-black text-white":"from-gray-50 to-gray-50 text-gray-900"} font-inter relative overflow-x-hidden`,children:[o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[o.jsx("style",{children:`
            .particles {
              position: absolute;
              width: 100%;
              height: 100%;
              background: transparent;
            }
            .particle {
              position: absolute;
              background: ${z==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.2)"};
              border-radius: 50%;
              animation: float 12s infinite linear;
            }
            @keyframes float {
              0% { transform: translateY(100vh) scale(0.4); opacity: 0.1; }
              100% { transform: translateY(-100vh) scale(0.8); opacity: 0.2; }
            }
          `}),o.jsx("div",{className:"particles",children:[...Array(15)].map((J,Ce)=>o.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*8}s`}},Ce))})]}),o.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 ${z==="dark"?"bg-gray-900/90 border-gray-800/50":"bg-white border-gray-300"} backdrop-blur-md border-r overflow-y-auto lg:shadow-md`,children:o.jsxs("div",{className:"p-4 flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("button",{onClick:()=>{kt("/"),e(!1)},className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 transition-all duration-300","aria-label":"Go to BlackStreaming homepage",children:"BlackStreaming"}),o.jsx("button",{onClick:()=>e(!1),className:"lg:hidden p-2 rounded-full hover:bg-gray-700/50 transition-all duration-300","aria-label":"Close menu",children:o.jsx(vn,{className:"text-lg"})})]}),o.jsxs("div",{className:`flex items-center space-x-3 mb-6 p-3 ${z==="dark"?"bg-gray-800/50 border-gray-700/50":"bg-gray-100 border-gray-300"} backdrop-blur-sm rounded-xl border`,children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:s.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("p",{className:`font-medium ${z==="dark"?"text-white":"text-gray-900"}`,children:s}),o.jsx("p",{className:`text-xs ${z==="dark"?"text-gray-400":"text-gray-600"}`,children:"Administrador"})]})]}),o.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:ew},{id:"notificaciones",label:"Notificaciones",icon:yc},{id:"usuarios",label:"Usuarios",icon:_a},{id:"proveedores",label:"Proveedores",icon:_a},{id:"recargas",label:"Recargas",icon:ga},{id:"retiros",label:"Retiros",icon:ga},{id:"pedidos",label:"Pedidos",icon:xd},{id:"productos",label:"Productos",icon:R1},{id:"ganancias",label:"Ganancias",icon:j0},{id:"configuracion",label:"Configuracin",icon:Aq}].map(J=>o.jsxs("button",{onClick:()=>{n(J.id),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${t===J.id?"bg-blue-100 text-blue-600 border border-blue-300":z==="dark"?"text-gray-300 hover:bg-gray-800/50 hover:text-blue-400":"text-gray-800 hover:bg-gray-100 hover:text-blue-600"}`,role:"menuitem","aria-current":t===J.id?"page":void 0,children:[o.jsx(J.icon,{className:"text-lg"}),o.jsx("span",{children:J.label})]},J.id))}),o.jsx("div",{className:"mt-auto pt-6",children:o.jsxs("button",{onClick:()=>{jt(),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 ${z==="dark"?"text-red-400 hover:bg-red-900/20 border-red-900/50":"text-red-600 hover:bg-red-100 border-red-300"} rounded-xl transition-all duration-300 border`,role:"menuitem","aria-label":"Sign out",children:[o.jsx(yd,{className:"text-lg"}),o.jsx("span",{children:"Cerrar Sesin"})]})})]})}),o.jsxs("header",{className:`${z==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md py-4 px-4 sm:px-6 lg:px-8 flex items-center justify-between shadow-md fixed top-0 left-0 right-0 z-50 lg:ml-64`,children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(Z.img,{src:Fc,alt:"BlackStreaming logo",className:`h-10 w-10 rounded-full border ${z==="dark"?"border-gray-700/50":"border-gray-300"} shadow-sm lg:hidden`,whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400},loading:"lazy"}),o.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"BlackStreaming"})]}),o.jsx("div",{className:"flex-1 mx-4 max-w-lg",children:o.jsxs("div",{className:"relative group",children:[o.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:ft,onChange:J=>zt(J.target.value),className:`w-full py-2.5 px-5 ${z==="dark"?"bg-gray-800/50 border-gray-600/50 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800"} rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm backdrop-blur-xl transition-all duration-300 group-hover:shadow-md`,"aria-label":"Search orders",onKeyDown:J=>J.key==="Enter"&&n("pedidos")}),o.jsx("button",{onClick:()=>n("pedidos"),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${z==="dark"?"text-gray-400":"text-gray-600"} group-hover:text-blue-500 transition duration-300`,"aria-label":"Search",children:o.jsx(gd,{size:18})})]})}),o.jsxs("nav",{className:"flex items-center space-x-4 relative",children:[o.jsx("button",{onClick:Oe,className:`p-2 rounded-full ${z==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Switch to ${z==="dark"?"light":"dark"} theme`,children:z==="dark"?o.jsx(Rc,{size:20}):o.jsx(jc,{size:20})}),o.jsxs("button",{onClick:()=>Qe(!0),className:`p-2 rounded-full relative ${z==="dark"?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"} transition duration-300`,"aria-label":`Notifications (${C.length} new)`,children:[o.jsx(yc,{size:20}),C.length>0&&o.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5",children:C.length})]}),o.jsx("button",{className:`lg:hidden p-2 rounded-full ${z==="dark"?"hover:bg-gray-700/50":"hover:bg-gray-100"} transition-all duration-300`,onClick:()=>e(!r),"aria-label":"Toggle mobile menu","aria-expanded":r,children:o.jsx(ex,{size:20,className:z==="dark"?"text-gray-300":"text-gray-600"})}),o.jsx("div",{className:"hidden lg:flex items-center space-x-3",children:o.jsx("div",{className:"relative",children:o.jsxs("button",{className:`flex items-center space-x-2 ${z==="dark"?"bg-gray-800/50 border-gray-600/50":"bg-gray-100 border-gray-300"} backdrop-blur-xl py-2 px-4 rounded-full hover:shadow-md transition-all duration-300`,"aria-label":"User menu",children:[o.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-sm font-bold text-white shadow-sm",children:s.charAt(0).toUpperCase()}),o.jsx("span",{className:`text-sm font-semibold ${z==="dark"?"text-gray-200":"text-gray-800"}`,children:s})]})})})]})]}),o.jsx(Bt,{children:we&&o.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>Qe(!1),role:"dialog","aria-labelledby":"notifications-title",children:o.jsxs(Z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:`w-full max-w-md mx-4 lg:max-w-lg ${z==="dark"?"bg-gray-900/90":"bg-white"} rounded-2xl shadow-md p-6 relative max-h-[80vh] overflow-y-auto backdrop-blur-md border ${z==="dark"?"border-gray-700/50":"border-gray-300"}`,onClick:J=>J.stopPropagation(),children:[o.jsx("button",{onClick:()=>Qe(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close notifications",children:o.jsx(vn,{size:20})}),o.jsx("h2",{id:"notifications-title",className:`text-xl font-bold mb-4 ${z==="dark"?"text-white":"text-gray-900"}`,children:"Notificaciones"}),C.length>0?C.map(J=>o.jsxs("div",{className:`p-4 mb-2 rounded-md ${z==="dark"?"bg-gray-800/50":"bg-gray-100/80"} border-l-4 ${z==="dark"?"border-blue-500/50":"border-blue-300/50"}`,children:[o.jsx("h3",{className:`font-semibold ${z==="dark"?"text-gray-200":"text-gray-800"}`,children:J.title||"Nueva Notificacin"}),o.jsx("p",{className:`text-sm ${z==="dark"?"text-gray-300":"text-gray-700"} mt-1`,children:J.message}),J.roles&&J.roles.length>0&&o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Roles: ",J.roles.join(", ")]}),J.timestamp&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ct(J.timestamp)})]},J.id)):o.jsx("p",{className:`text-center ${z==="dark"?"text-gray-400":"text-gray-600"} mt-4`,children:"No hay notificaciones."})]})})}),o.jsx("main",{className:"lg:ml-64 pt-20 px-4 sm:px-6 lg:px-8 min-h-screen flex justify-center items-start",children:gr()}),o.jsxs("footer",{className:`${z==="dark"?"bg-gray-900/90":"bg-white"} backdrop-blur-md px-4 sm:px-6 lg:px-8 py-12 text-center relative z-10 lg:ml-64 max-w-6xl mx-auto rounded-2xl border ${z==="dark"?"border-gray-700/50":"border-gray-300"} mt-8 shadow-md`,children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 mb-4",children:"BlackStreaming"}),o.jsxs("p",{className:`text-base sm:text-lg ${z==="dark"?"text-gray-300":"text-gray-700"} mb-6 font-medium`,children:["Todos los derechos reservados. Desarrollado por"," ",o.jsx("span",{className:"font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600",children:"Saiph"}),"."]}),o.jsxs("div",{className:"flex justify-center space-x-6 sm:space-x-8 mb-6",children:[o.jsx("a",{href:"https://twitter.com",className:`${z==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Twitter",children:o.jsx(Pc,{size:28})}),o.jsx("a",{href:"https://instagram.com",className:`${z==="dark"?"text-gray-400 hover:text-pink-400":"text-gray-600 hover:text-pink-600"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Instagram",children:o.jsx(Ic,{size:28})}),o.jsx("a",{href:"https://facebook.com",className:`${z==="dark"?"text-gray-400 hover:text-blue-600":"text-gray-600 hover:text-blue-800"} transition-all duration-300 transform hover:scale-125`,"aria-label":"Visit BlackStreaming Facebook",children:o.jsx(Cc,{size:28})})]}),o.jsxs("div",{className:"flex justify-center space-x-4 sm:space-x-6",children:[o.jsx("a",{href:"#",className:`text-sm ${z==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Privacy Policy",children:"Poltica de Privacidad"}),o.jsx("a",{href:"#",className:`text-sm ${z==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Terms of Service",children:"Trminos de Servicio"}),o.jsx("a",{href:"#",className:`text-sm ${z==="dark"?"text-gray-400 hover:text-blue-400":"text-gray-600 hover:text-blue-600"} transition-all duration-300`,"aria-label":"Contact Us",children:"Contctanos"})]})]}),o.jsxs("p",{className:`text-sm ${z==="dark"?"text-gray-500":"text-gray-600"}`,children:[" ",new Date().getFullYear()," BlackStreaming. Hecho con pasin."]})]}),o.jsx(Bt,{children:De&&o.jsx(Z.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},onClick:Xt,className:"fixed bottom-6 right-6 bg-blue-600/90 backdrop-blur-md p-3 rounded-full hover:bg-blue-700/95 shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 lg:bottom-8 lg:right-8","aria-label":"Back to top",children:o.jsx(Zg,{size:20})})}),o.jsx(nj,{isOpen:W.isOpen,title:W.title,message:W.message,onClose:He}),o.jsx(Mte,{isOpen:ie.isOpen,user:ie.user,onClose:et,onSave:St}),r&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden",onClick:()=>e(!1),"aria-hidden":"true"})]})};aj.propTypes={};A.lazy(()=>fr(()=>import("./Maintenance-CdY36rPk.js"),[]));const $te=A.lazy(()=>fr(()=>import("./NotFound-BXxmqBuD.js"),[])),Bte={netflix:A.lazy(()=>fr(()=>import("./Netflix-D4k-iq2G.js"),[])),disney:A.lazy(()=>fr(()=>import("./Disney-CSYcirEm.js"),[])),max:A.lazy(()=>fr(()=>import("./Max-CAzcgAYM.js"),[])),spotify:A.lazy(()=>fr(()=>import("./Spotify-BYmMfoi0.js"),[])),primevideo:A.lazy(()=>fr(()=>import("./PrimeVideo-0R35o7hr.js"),[])),vix:A.lazy(()=>fr(()=>import("./Vix-JWA9bUk3.js"),[])),canva:A.lazy(()=>fr(()=>import("./canva-DmN2uASX.js"),[])),chatgpt:A.lazy(()=>fr(()=>import("./ChatGPT-CF_cYZZ9.js"),[])),crunchyroll:A.lazy(()=>fr(()=>import("./Crunchyroll-sDoDTAFX.js"),[])),redessociales:A.lazy(()=>fr(()=>import("./RedesSociales-DMRK1x5q.js"),[])),applemusic:A.lazy(()=>fr(()=>import("./AppleMusic-DOx8bbKy.js"),[])),appletv:A.lazy(()=>fr(()=>import("./AppleTv-BtIUWqnA.js"),[])),iptv:A.lazy(()=>fr(()=>import("./IPTV-CQsZLgPT.js"),[])),flujotv:A.lazy(()=>fr(()=>import("./FlujoTv-2ngXK6d9.js"),[])),vikirakuten:A.lazy(()=>fr(()=>import("./VikiRakuten-I6Vq4uj8.js"),[])),pornhub:A.lazy(()=>fr(()=>import("./Pornhub-zEtDBhy2.js"),[])),paramount:A.lazy(()=>fr(()=>import("./Paramount-D1jSbOIS.js"),[])),licencias:A.lazy(()=>fr(()=>import("./Licencias-Cnydf7Jc.js"),[])),capcut:A.lazy(()=>fr(()=>import("./Capcut-DcRKk4AB.js"),[])),duolingo:A.lazy(()=>fr(()=>import("./Duolingo-DfwEwkYT.js"),[])),dgo:A.lazy(()=>fr(()=>import("./Dgo-CDIFUdi-.js"),[])),ligamax:A.lazy(()=>fr(()=>import("./LigaMax-BliUZZid.js"),[])),movistarplay:A.lazy(()=>fr(()=>import("./MovistarPlay-Dw2sV8ug.js"),[])),youtube:A.lazy(()=>fr(()=>import("./Youtube-DoSZCHXP.js"),[])),deezer:A.lazy(()=>fr(()=>import("./Deezer-D1wWvt_i.js"),[])),tidal:A.lazy(()=>fr(()=>import("./Tidal-DEx4aEcD.js"),[])),vpn:A.lazy(()=>fr(()=>import("./Vpn-CuZlLCvi.js"),[])),wintv:A.lazy(()=>fr(()=>import("./WinTv-D6ORznvt.js"),[])),buscapersonas:A.lazy(()=>fr(()=>import("./Buscapersonas-C9skU0P4.js"),[]))},Md=A.memo(()=>o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:o.jsx("div",{className:"text-xl",children:"Cargando..."})})),Ute=A.memo(()=>o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-lg",children:"Cargando categora..."})}));A.memo(({children:r,redirectTo:e="/login"})=>{const{user:t,loading:n}=af();return n?o.jsx(Md,{}):t?r:o.jsx(Oh,{to:e,replace:!0})});const zte=A.memo(({children:r,redirectTo:e="/login"})=>{const{user:t,role:n,loading:s}=af();return s?o.jsx(Md,{}):t&&n==="user"?r:o.jsx(Oh,{to:e,replace:!0})}),Hte=A.memo(({children:r,redirectTo:e="/login"})=>{const{user:t,role:n,loading:s}=af();return s?o.jsx(Md,{}):t&&n==="admin"?r:o.jsx(Oh,{to:e,replace:!0})}),Wte=A.memo(({children:r,redirectTo:e="/login"})=>{const{user:t,role:n,loading:s}=af();return s?o.jsx(Md,{}):t&&n==="affiliate"?r:o.jsx(Oh,{to:e,replace:!0})}),qte=A.memo(({children:r,redirectTo:e="/login"})=>{const{user:t,role:n,loading:s}=af();return s?o.jsx(Md,{}):t&&n==="provider"?r:o.jsx(Oh,{to:e,replace:!0})}),Gte=A.memo(()=>{const r=Object.entries(Bte).map(([e,t])=>o.jsx(Ri,{path:`/${e}`,element:o.jsx(A.Suspense,{fallback:o.jsx(Ute,{}),children:o.jsx(t,{})})},e));return o.jsxs(cD,{children:[o.jsx(Ri,{path:"/",element:o.jsx(J6,{})}),o.jsx(Ri,{path:"/login",element:o.jsx(AG,{})}),o.jsx(Ri,{path:"/register",element:o.jsx(NG,{})}),o.jsx(Ri,{path:"/forgot-password",element:o.jsx(kG,{})}),o.jsx(Ri,{path:"/dashboard/user",element:o.jsx(zte,{children:o.jsx(BP,{})})}),o.jsx(Ri,{path:"/dashboard/affiliate",element:o.jsx(Wte,{children:o.jsx(Tte,{})})}),o.jsx(Ri,{path:"/dashboard/provider",element:o.jsx(qte,{children:o.jsx(qP,{})})}),o.jsx(Ri,{path:"/dashboard/admin",element:o.jsx(Hte,{children:o.jsx(aj,{})})}),r,o.jsx(Ri,{path:"*",element:o.jsx(A.Suspense,{fallback:o.jsx(Md,{}),children:o.jsx($te,{})})})]})}),Kte=o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:o.jsx("div",{className:"text-xl",children:"Inicializando aplicacin..."})});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(r=>{console.log("Service Worker registrado con xito:",r)}).catch(r=>{console.error("Error al registrar el Service Worker:",r)})});vR.createRoot(document.getElementById("root")).render(o.jsx($i.StrictMode,{children:o.jsx(jD,{children:o.jsx(yB,{children:o.jsx(A.Suspense,{fallback:Kte,children:o.jsx(Gte,{})})})})}));export{Iq as $,tre as A,ire as B,are as C,nre as D,Qte as E,sre as F,rre as G,ere as H,Zte as I,sw as J,Mq as K,Ns as L,Ys as M,Z as N,gd as O,Rc as P,jc as Q,yc as R,Vq as S,bq as T,Bt as U,eg as V,yd as W,D1 as X,F1 as Y,vn as Z,Bq as _,cr as a,Oq as a0,ul as a1,Zg as a2,Pc as a3,Ic as a4,Cc as a5,q as a6,xa as b,At as c,js as d,rg as e,Zr as f,Dc as g,ha as h,ot as i,o as j,Pe as k,Fc as l,vc as m,ew as n,Nc as o,bd as p,nr as q,A as r,u2 as s,sn as t,Gi as u,Um as v,br as w,lr as x,Bh as y,Jte as z};
