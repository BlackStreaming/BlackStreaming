(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();function NP(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Lw={exports:{}},zx={},Vw={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bc=Symbol.for("react.element"),wP=Symbol.for("react.portal"),kP=Symbol.for("react.fragment"),IP=Symbol.for("react.strict_mode"),PP=Symbol.for("react.profiler"),SP=Symbol.for("react.provider"),CP=Symbol.for("react.context"),EP=Symbol.for("react.forward_ref"),TP=Symbol.for("react.suspense"),_P=Symbol.for("react.memo"),DP=Symbol.for("react.lazy"),xb=Symbol.iterator;function AP(s){return s===null||typeof s!="object"?null:(s=xb&&s[xb]||s["@@iterator"],typeof s=="function"?s:null)}var zw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bw=Object.assign,Fw={};function Fo(s,t,r){this.props=s,this.context=t,this.refs=Fw,this.updater=r||zw}Fo.prototype.isReactComponent={};Fo.prototype.setState=function(s,t){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,t,"setState")};Fo.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function Uw(){}Uw.prototype=Fo.prototype;function B0(s,t,r){this.props=s,this.context=t,this.refs=Fw,this.updater=r||zw}var F0=B0.prototype=new Uw;F0.constructor=B0;Bw(F0,Fo.prototype);F0.isPureReactComponent=!0;var mb=Array.isArray,$w=Object.prototype.hasOwnProperty,U0={current:null},Ww={key:!0,ref:!0,__self:!0,__source:!0};function qw(s,t,r){var a,i={},l=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)$w.call(t,a)&&!Ww.hasOwnProperty(a)&&(i[a]=t[a]);var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){for(var d=Array(c),h=0;h<c;h++)d[h]=arguments[h+2];i.children=d}if(s&&s.defaultProps)for(a in c=s.defaultProps,c)i[a]===void 0&&(i[a]=c[a]);return{$$typeof:Bc,type:s,key:l,ref:o,props:i,_owner:U0.current}}function RP(s,t){return{$$typeof:Bc,type:s.type,key:t,ref:s.ref,props:s.props,_owner:s._owner}}function $0(s){return typeof s=="object"&&s!==null&&s.$$typeof===Bc}function MP(s){var t={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(r){return t[r]})}var hb=/\/+/g;function Hm(s,t){return typeof s=="object"&&s!==null&&s.key!=null?MP(""+s.key):t.toString(36)}function ru(s,t,r,a,i){var l=typeof s;(l==="undefined"||l==="boolean")&&(s=null);var o=!1;if(s===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(s.$$typeof){case Bc:case wP:o=!0}}if(o)return o=s,i=i(o),s=a===""?"."+Hm(o,0):a,mb(i)?(r="",s!=null&&(r=s.replace(hb,"$&/")+"/"),ru(i,t,r,"",function(h){return h})):i!=null&&($0(i)&&(i=RP(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(hb,"$&/")+"/")+s)),t.push(i)),1;if(o=0,a=a===""?".":a+":",mb(s))for(var c=0;c<s.length;c++){l=s[c];var d=a+Hm(l,c);o+=ru(l,t,r,d,i)}else if(d=AP(s),typeof d=="function")for(s=d.call(s),c=0;!(l=s.next()).done;)l=l.value,d=a+Hm(l,c++),o+=ru(l,t,r,d,i);else if(l==="object")throw t=String(s),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Sd(s,t,r){if(s==null)return s;var a=[],i=0;return ru(s,a,"","",function(l){return t.call(r,l,i++)}),a}function OP(s){if(s._status===-1){var t=s._result;t=t(),t.then(function(r){(s._status===0||s._status===-1)&&(s._status=1,s._result=r)},function(r){(s._status===0||s._status===-1)&&(s._status=2,s._result=r)}),s._status===-1&&(s._status=0,s._result=t)}if(s._status===1)return s._result.default;throw s._result}var or={current:null},au={transition:null},LP={ReactCurrentDispatcher:or,ReactCurrentBatchConfig:au,ReactCurrentOwner:U0};function Hw(){throw Error("act(...) is not supported in production builds of React.")}Et.Children={map:Sd,forEach:function(s,t,r){Sd(s,function(){t.apply(this,arguments)},r)},count:function(s){var t=0;return Sd(s,function(){t++}),t},toArray:function(s){return Sd(s,function(t){return t})||[]},only:function(s){if(!$0(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};Et.Component=Fo;Et.Fragment=kP;Et.Profiler=PP;Et.PureComponent=B0;Et.StrictMode=IP;Et.Suspense=TP;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LP;Et.act=Hw;Et.cloneElement=function(s,t,r){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var a=Bw({},s.props),i=s.key,l=s.ref,o=s._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=U0.current),t.key!==void 0&&(i=""+t.key),s.type&&s.type.defaultProps)var c=s.type.defaultProps;for(d in t)$w.call(t,d)&&!Ww.hasOwnProperty(d)&&(a[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)a.children=r;else if(1<d){c=Array(d);for(var h=0;h<d;h++)c[h]=arguments[h+2];a.children=c}return{$$typeof:Bc,type:s.type,key:i,ref:l,props:a,_owner:o}};Et.createContext=function(s){return s={$$typeof:CP,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:SP,_context:s},s.Consumer=s};Et.createElement=qw;Et.createFactory=function(s){var t=qw.bind(null,s);return t.type=s,t};Et.createRef=function(){return{current:null}};Et.forwardRef=function(s){return{$$typeof:EP,render:s}};Et.isValidElement=$0;Et.lazy=function(s){return{$$typeof:DP,_payload:{_status:-1,_result:s},_init:OP}};Et.memo=function(s,t){return{$$typeof:_P,type:s,compare:t===void 0?null:t}};Et.startTransition=function(s){var t=au.transition;au.transition={};try{s()}finally{au.transition=t}};Et.unstable_act=Hw;Et.useCallback=function(s,t){return or.current.useCallback(s,t)};Et.useContext=function(s){return or.current.useContext(s)};Et.useDebugValue=function(){};Et.useDeferredValue=function(s){return or.current.useDeferredValue(s)};Et.useEffect=function(s,t){return or.current.useEffect(s,t)};Et.useId=function(){return or.current.useId()};Et.useImperativeHandle=function(s,t,r){return or.current.useImperativeHandle(s,t,r)};Et.useInsertionEffect=function(s,t){return or.current.useInsertionEffect(s,t)};Et.useLayoutEffect=function(s,t){return or.current.useLayoutEffect(s,t)};Et.useMemo=function(s,t){return or.current.useMemo(s,t)};Et.useReducer=function(s,t,r){return or.current.useReducer(s,t,r)};Et.useRef=function(s){return or.current.useRef(s)};Et.useState=function(s){return or.current.useState(s)};Et.useSyncExternalStore=function(s,t,r){return or.current.useSyncExternalStore(s,t,r)};Et.useTransition=function(){return or.current.useTransition()};Et.version="18.3.1";Vw.exports=Et;var v=Vw.exports;const fn=NP(v);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VP=v,zP=Symbol.for("react.element"),BP=Symbol.for("react.fragment"),FP=Object.prototype.hasOwnProperty,UP=VP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$P={key:!0,ref:!0,__self:!0,__source:!0};function Gw(s,t,r){var a,i={},l=null,o=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)FP.call(t,a)&&!$P.hasOwnProperty(a)&&(i[a]=t[a]);if(s&&s.defaultProps)for(a in t=s.defaultProps,t)i[a]===void 0&&(i[a]=t[a]);return{$$typeof:zP,type:s,key:l,ref:o,props:i,_owner:UP.current}}zx.Fragment=BP;zx.jsx=Gw;zx.jsxs=Gw;Lw.exports=zx;var e=Lw.exports,Yh={},Qw={exports:{}},Cr={},Kw={exports:{}},Yw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function t(he,ye){var ge=he.length;he.push(ye);e:for(;0<ge;){var Ve=ge-1>>>1,Re=he[Ve];if(0<i(Re,ye))he[Ve]=ye,he[ge]=Re,ge=Ve;else break e}}function r(he){return he.length===0?null:he[0]}function a(he){if(he.length===0)return null;var ye=he[0],ge=he.pop();if(ge!==ye){he[0]=ge;e:for(var Ve=0,Re=he.length,Pe=Re>>>1;Ve<Pe;){var Qe=2*(Ve+1)-1,He=he[Qe],n=Qe+1,j=he[n];if(0>i(He,ge))n<Re&&0>i(j,He)?(he[Ve]=j,he[n]=ge,Ve=n):(he[Ve]=He,he[Qe]=ge,Ve=Qe);else if(n<Re&&0>i(j,ge))he[Ve]=j,he[n]=ge,Ve=n;else break e}}return ye}function i(he,ye){var ge=he.sortIndex-ye.sortIndex;return ge!==0?ge:he.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var o=Date,c=o.now();s.unstable_now=function(){return o.now()-c}}var d=[],h=[],g=1,N=null,k=3,E=!1,y=!1,L=!1,_=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(he){for(var ye=r(h);ye!==null;){if(ye.callback===null)a(h);else if(ye.startTime<=he)a(h),ye.sortIndex=ye.expirationTime,t(d,ye);else break;ye=r(h)}}function K(he){if(L=!1,O(he),!y)if(r(d)!==null)y=!0,Me(G);else{var ye=r(h);ye!==null&&De(K,ye.startTime-he)}}function G(he,ye){y=!1,L&&(L=!1,A(u),u=-1),E=!0;var ge=k;try{for(O(ye),N=r(d);N!==null&&(!(N.expirationTime>ye)||he&&!ee());){var Ve=N.callback;if(typeof Ve=="function"){N.callback=null,k=N.priorityLevel;var Re=Ve(N.expirationTime<=ye);ye=s.unstable_now(),typeof Re=="function"?N.callback=Re:N===r(d)&&a(d),O(ye)}else a(d);N=r(d)}if(N!==null)var Pe=!0;else{var Qe=r(h);Qe!==null&&De(K,Qe.startTime-ye),Pe=!1}return Pe}finally{N=null,k=ge,E=!1}}var H=!1,R=null,u=-1,W=5,U=-1;function ee(){return!(s.unstable_now()-U<W)}function te(){if(R!==null){var he=s.unstable_now();U=he;var ye=!0;try{ye=R(!0,he)}finally{ye?Y():(H=!1,R=null)}}else H=!1}var Y;if(typeof z=="function")Y=function(){z(te)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,pe=$.port2;$.port1.onmessage=te,Y=function(){pe.postMessage(null)}}else Y=function(){_(te,0)};function Me(he){R=he,H||(H=!0,Y())}function De(he,ye){u=_(function(){he(s.unstable_now())},ye)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(he){he.callback=null},s.unstable_continueExecution=function(){y||E||(y=!0,Me(G))},s.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<he?Math.floor(1e3/he):5},s.unstable_getCurrentPriorityLevel=function(){return k},s.unstable_getFirstCallbackNode=function(){return r(d)},s.unstable_next=function(he){switch(k){case 1:case 2:case 3:var ye=3;break;default:ye=k}var ge=k;k=ye;try{return he()}finally{k=ge}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(he,ye){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var ge=k;k=he;try{return ye()}finally{k=ge}},s.unstable_scheduleCallback=function(he,ye,ge){var Ve=s.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Ve+ge:Ve):ge=Ve,he){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=ge+Re,he={id:g++,callback:ye,priorityLevel:he,startTime:ge,expirationTime:Re,sortIndex:-1},ge>Ve?(he.sortIndex=ge,t(h,he),r(d)===null&&he===r(h)&&(L?(A(u),u=-1):L=!0,De(K,ge-Ve))):(he.sortIndex=Re,t(d,he),y||E||(y=!0,Me(G))),he},s.unstable_shouldYield=ee,s.unstable_wrapCallback=function(he){var ye=k;return function(){var ge=k;k=ye;try{return he.apply(this,arguments)}finally{k=ge}}}})(Yw);Kw.exports=Yw;var WP=Kw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qP=v,Sr=WP;function Be(s){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+s,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xw=new Set,tc={};function Si(s,t){ko(s,t),ko(s+"Capture",t)}function ko(s,t){for(tc[s]=t,s=0;s<t.length;s++)Xw.add(t[s])}var Va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xh=Object.prototype.hasOwnProperty,HP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pb={},fb={};function GP(s){return Xh.call(fb,s)?!0:Xh.call(pb,s)?!1:HP.test(s)?fb[s]=!0:(pb[s]=!0,!1)}function QP(s,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function KP(s,t,r,a){if(t===null||typeof t>"u"||QP(s,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lr(s,t,r,a,i,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=s,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var Bs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Bs[s]=new lr(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var t=s[0];Bs[t]=new lr(t,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Bs[s]=new lr(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Bs[s]=new lr(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Bs[s]=new lr(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Bs[s]=new lr(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Bs[s]=new lr(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Bs[s]=new lr(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Bs[s]=new lr(s,5,!1,s.toLowerCase(),null,!1,!1)});var W0=/[\-:]([a-z])/g;function q0(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var t=s.replace(W0,q0);Bs[t]=new lr(t,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var t=s.replace(W0,q0);Bs[t]=new lr(t,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var t=s.replace(W0,q0);Bs[t]=new lr(t,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Bs[s]=new lr(s,1,!1,s.toLowerCase(),null,!1,!1)});Bs.xlinkHref=new lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Bs[s]=new lr(s,1,!1,s.toLowerCase(),null,!0,!0)});function H0(s,t,r,a){var i=Bs.hasOwnProperty(t)?Bs[t]:null;(i!==null?i.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(KP(t,r,i,a)&&(r=null),a||i===null?GP(t)&&(r===null?s.removeAttribute(t):s.setAttribute(t,""+r)):i.mustUseProperty?s[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,a=i.attributeNamespace,r===null?s.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,a?s.setAttributeNS(a,t,r):s.setAttribute(t,r))))}var Ka=qP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cd=Symbol.for("react.element"),Qi=Symbol.for("react.portal"),Ki=Symbol.for("react.fragment"),G0=Symbol.for("react.strict_mode"),Jh=Symbol.for("react.profiler"),Jw=Symbol.for("react.provider"),Zw=Symbol.for("react.context"),Q0=Symbol.for("react.forward_ref"),Zh=Symbol.for("react.suspense"),ep=Symbol.for("react.suspense_list"),K0=Symbol.for("react.memo"),an=Symbol.for("react.lazy"),e5=Symbol.for("react.offscreen"),gb=Symbol.iterator;function ul(s){return s===null||typeof s!="object"?null:(s=gb&&s[gb]||s["@@iterator"],typeof s=="function"?s:null)}var cs=Object.assign,Gm;function Nl(s){if(Gm===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Gm=t&&t[1]||""}return`
`+Gm+s}var Qm=!1;function Km(s,t){if(!s||Qm)return"";Qm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var a=h}Reflect.construct(s,[],t)}else{try{t.call()}catch(h){a=h}s.call(t.prototype)}else{try{throw Error()}catch(h){a=h}s()}}catch(h){if(h&&a&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),l=a.stack.split(`
`),o=i.length-1,c=l.length-1;1<=o&&0<=c&&i[o]!==l[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==l[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==l[c]){var d=`
`+i[o].replace(" at new "," at ");return s.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",s.displayName)),d}while(1<=o&&0<=c);break}}}finally{Qm=!1,Error.prepareStackTrace=r}return(s=s?s.displayName||s.name:"")?Nl(s):""}function YP(s){switch(s.tag){case 5:return Nl(s.type);case 16:return Nl("Lazy");case 13:return Nl("Suspense");case 19:return Nl("SuspenseList");case 0:case 2:case 15:return s=Km(s.type,!1),s;case 11:return s=Km(s.type.render,!1),s;case 1:return s=Km(s.type,!0),s;default:return""}}function tp(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Ki:return"Fragment";case Qi:return"Portal";case Jh:return"Profiler";case G0:return"StrictMode";case Zh:return"Suspense";case ep:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Zw:return(s.displayName||"Context")+".Consumer";case Jw:return(s._context.displayName||"Context")+".Provider";case Q0:var t=s.render;return s=s.displayName,s||(s=t.displayName||t.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case K0:return t=s.displayName||null,t!==null?t:tp(s.type)||"Memo";case an:t=s._payload,s=s._init;try{return tp(s(t))}catch{}}return null}function XP(s){var t=s.type;switch(s.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=t.render,s=s.displayName||s.name||"",t.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tp(t);case 8:return t===G0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Tn(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function t5(s){var t=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function JP(s){var t=t5(s)?"checked":"value",r=Object.getOwnPropertyDescriptor(s.constructor.prototype,t),a=""+s[t];if(!s.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,l=r.set;return Object.defineProperty(s,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){a=""+o,l.call(this,o)}}),Object.defineProperty(s,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){s._valueTracker=null,delete s[t]}}}}function Ed(s){s._valueTracker||(s._valueTracker=JP(s))}function s5(s){if(!s)return!1;var t=s._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return s&&(a=t5(s)?s.checked?"true":"false":s.value),s=a,s!==r?(t.setValue(s),!0):!1}function Du(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function sp(s,t){var r=t.checked;return cs({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??s._wrapperState.initialChecked})}function yb(s,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Tn(t.value!=null?t.value:r),s._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function r5(s,t){t=t.checked,t!=null&&H0(s,"checked",t,!1)}function rp(s,t){r5(s,t);var r=Tn(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+r):s.value!==""+r&&(s.value=""+r);else if(a==="submit"||a==="reset"){s.removeAttribute("value");return}t.hasOwnProperty("value")?ap(s,t.type,r):t.hasOwnProperty("defaultValue")&&ap(s,t.type,Tn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(s.defaultChecked=!!t.defaultChecked)}function bb(s,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+s._wrapperState.initialValue,r||t===s.value||(s.value=t),s.defaultValue=t}r=s.name,r!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,r!==""&&(s.name=r)}function ap(s,t,r){(t!=="number"||Du(s.ownerDocument)!==s)&&(r==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+r&&(s.defaultValue=""+r))}var wl=Array.isArray;function ho(s,t,r,a){if(s=s.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<s.length;r++)i=t.hasOwnProperty("$"+s[r].value),s[r].selected!==i&&(s[r].selected=i),i&&a&&(s[r].defaultSelected=!0)}else{for(r=""+Tn(r),t=null,i=0;i<s.length;i++){if(s[i].value===r){s[i].selected=!0,a&&(s[i].defaultSelected=!0);return}t!==null||s[i].disabled||(t=s[i])}t!==null&&(t.selected=!0)}}function np(s,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Be(91));return cs({},t,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function vb(s,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Be(92));if(wl(r)){if(1<r.length)throw Error(Be(93));r=r[0]}t=r}t==null&&(t=""),r=t}s._wrapperState={initialValue:Tn(r)}}function a5(s,t){var r=Tn(t.value),a=Tn(t.defaultValue);r!=null&&(r=""+r,r!==s.value&&(s.value=r),t.defaultValue==null&&s.defaultValue!==r&&(s.defaultValue=r)),a!=null&&(s.defaultValue=""+a)}function jb(s){var t=s.textContent;t===s._wrapperState.initialValue&&t!==""&&t!==null&&(s.value=t)}function n5(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ip(s,t){return s==null||s==="http://www.w3.org/1999/xhtml"?n5(t):s==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Td,i5=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,i){MSApp.execUnsafeLocalFunction(function(){return s(t,r,a,i)})}:s}(function(s,t){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=t;else{for(Td=Td||document.createElement("div"),Td.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Td.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;t.firstChild;)s.appendChild(t.firstChild)}});function sc(s,t){if(t){var r=s.firstChild;if(r&&r===s.lastChild&&r.nodeType===3){r.nodeValue=t;return}}s.textContent=t}var Al={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZP=["Webkit","ms","Moz","O"];Object.keys(Al).forEach(function(s){ZP.forEach(function(t){t=t+s.charAt(0).toUpperCase()+s.substring(1),Al[t]=Al[s]})});function o5(s,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Al.hasOwnProperty(s)&&Al[s]?(""+t).trim():t+"px"}function l5(s,t){s=s.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,i=o5(r,t[r],a);r==="float"&&(r="cssFloat"),a?s.setProperty(r,i):s[r]=i}}var eS=cs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function op(s,t){if(t){if(eS[s]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Be(137,s));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Be(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Be(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Be(62))}}function lp(s,t){if(s.indexOf("-")===-1)return typeof t.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cp=null;function Y0(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var dp=null,po=null,fo=null;function Nb(s){if(s=$c(s)){if(typeof dp!="function")throw Error(Be(280));var t=s.stateNode;t&&(t=Wx(t),dp(s.stateNode,s.type,t))}}function c5(s){po?fo?fo.push(s):fo=[s]:po=s}function d5(){if(po){var s=po,t=fo;if(fo=po=null,Nb(s),t)for(s=0;s<t.length;s++)Nb(t[s])}}function u5(s,t){return s(t)}function x5(){}var Ym=!1;function m5(s,t,r){if(Ym)return s(t,r);Ym=!0;try{return u5(s,t,r)}finally{Ym=!1,(po!==null||fo!==null)&&(x5(),d5())}}function rc(s,t){var r=s.stateNode;if(r===null)return null;var a=Wx(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(s=s.type,a=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!a;break e;default:s=!1}if(s)return null;if(r&&typeof r!="function")throw Error(Be(231,t,typeof r));return r}var up=!1;if(Va)try{var xl={};Object.defineProperty(xl,"passive",{get:function(){up=!0}}),window.addEventListener("test",xl,xl),window.removeEventListener("test",xl,xl)}catch{up=!1}function tS(s,t,r,a,i,l,o,c,d){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(g){this.onError(g)}}var Rl=!1,Au=null,Ru=!1,xp=null,sS={onError:function(s){Rl=!0,Au=s}};function rS(s,t,r,a,i,l,o,c,d){Rl=!1,Au=null,tS.apply(sS,arguments)}function aS(s,t,r,a,i,l,o,c,d){if(rS.apply(this,arguments),Rl){if(Rl){var h=Au;Rl=!1,Au=null}else throw Error(Be(198));Ru||(Ru=!0,xp=h)}}function Ci(s){var t=s,r=s;if(s.alternate)for(;t.return;)t=t.return;else{s=t;do t=s,t.flags&4098&&(r=t.return),s=t.return;while(s)}return t.tag===3?r:null}function h5(s){if(s.tag===13){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function wb(s){if(Ci(s)!==s)throw Error(Be(188))}function nS(s){var t=s.alternate;if(!t){if(t=Ci(s),t===null)throw Error(Be(188));return t!==s?null:s}for(var r=s,a=t;;){var i=r.return;if(i===null)break;var l=i.alternate;if(l===null){if(a=i.return,a!==null){r=a;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===r)return wb(i),s;if(l===a)return wb(i),t;l=l.sibling}throw Error(Be(188))}if(r.return!==a.return)r=i,a=l;else{for(var o=!1,c=i.child;c;){if(c===r){o=!0,r=i,a=l;break}if(c===a){o=!0,a=i,r=l;break}c=c.sibling}if(!o){for(c=l.child;c;){if(c===r){o=!0,r=l,a=i;break}if(c===a){o=!0,a=l,r=i;break}c=c.sibling}if(!o)throw Error(Be(189))}}if(r.alternate!==a)throw Error(Be(190))}if(r.tag!==3)throw Error(Be(188));return r.stateNode.current===r?s:t}function p5(s){return s=nS(s),s!==null?f5(s):null}function f5(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var t=f5(s);if(t!==null)return t;s=s.sibling}return null}var g5=Sr.unstable_scheduleCallback,kb=Sr.unstable_cancelCallback,iS=Sr.unstable_shouldYield,oS=Sr.unstable_requestPaint,ys=Sr.unstable_now,lS=Sr.unstable_getCurrentPriorityLevel,X0=Sr.unstable_ImmediatePriority,y5=Sr.unstable_UserBlockingPriority,Mu=Sr.unstable_NormalPriority,cS=Sr.unstable_LowPriority,b5=Sr.unstable_IdlePriority,Bx=null,da=null;function dS(s){if(da&&typeof da.onCommitFiberRoot=="function")try{da.onCommitFiberRoot(Bx,s,void 0,(s.current.flags&128)===128)}catch{}}var Zr=Math.clz32?Math.clz32:mS,uS=Math.log,xS=Math.LN2;function mS(s){return s>>>=0,s===0?32:31-(uS(s)/xS|0)|0}var _d=64,Dd=4194304;function kl(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ou(s,t){var r=s.pendingLanes;if(r===0)return 0;var a=0,i=s.suspendedLanes,l=s.pingedLanes,o=r&268435455;if(o!==0){var c=o&~i;c!==0?a=kl(c):(l&=o,l!==0&&(a=kl(l)))}else o=r&~i,o!==0?a=kl(o):l!==0&&(a=kl(l));if(a===0)return 0;if(t!==0&&t!==a&&!(t&i)&&(i=a&-a,l=t&-t,i>=l||i===16&&(l&4194240)!==0))return t;if(a&4&&(a|=r&16),t=s.entangledLanes,t!==0)for(s=s.entanglements,t&=a;0<t;)r=31-Zr(t),i=1<<r,a|=s[r],t&=~i;return a}function hS(s,t){switch(s){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pS(s,t){for(var r=s.suspendedLanes,a=s.pingedLanes,i=s.expirationTimes,l=s.pendingLanes;0<l;){var o=31-Zr(l),c=1<<o,d=i[o];d===-1?(!(c&r)||c&a)&&(i[o]=hS(c,t)):d<=t&&(s.expiredLanes|=c),l&=~c}}function mp(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function v5(){var s=_d;return _d<<=1,!(_d&4194240)&&(_d=64),s}function Xm(s){for(var t=[],r=0;31>r;r++)t.push(s);return t}function Fc(s,t,r){s.pendingLanes|=t,t!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,t=31-Zr(t),s[t]=r}function fS(s,t){var r=s.pendingLanes&~t;s.pendingLanes=t,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=t,s.mutableReadLanes&=t,s.entangledLanes&=t,t=s.entanglements;var a=s.eventTimes;for(s=s.expirationTimes;0<r;){var i=31-Zr(r),l=1<<i;t[i]=0,a[i]=-1,s[i]=-1,r&=~l}}function J0(s,t){var r=s.entangledLanes|=t;for(s=s.entanglements;r;){var a=31-Zr(r),i=1<<a;i&t|s[a]&t&&(s[a]|=t),r&=~i}}var Ut=0;function j5(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var N5,Z0,w5,k5,I5,hp=!1,Ad=[],gn=null,yn=null,bn=null,ac=new Map,nc=new Map,on=[],gS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ib(s,t){switch(s){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":yn=null;break;case"mouseover":case"mouseout":bn=null;break;case"pointerover":case"pointerout":ac.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nc.delete(t.pointerId)}}function ml(s,t,r,a,i,l){return s===null||s.nativeEvent!==l?(s={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:l,targetContainers:[i]},t!==null&&(t=$c(t),t!==null&&Z0(t)),s):(s.eventSystemFlags|=a,t=s.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),s)}function yS(s,t,r,a,i){switch(t){case"focusin":return gn=ml(gn,s,t,r,a,i),!0;case"dragenter":return yn=ml(yn,s,t,r,a,i),!0;case"mouseover":return bn=ml(bn,s,t,r,a,i),!0;case"pointerover":var l=i.pointerId;return ac.set(l,ml(ac.get(l)||null,s,t,r,a,i)),!0;case"gotpointercapture":return l=i.pointerId,nc.set(l,ml(nc.get(l)||null,s,t,r,a,i)),!0}return!1}function P5(s){var t=ai(s.target);if(t!==null){var r=Ci(t);if(r!==null){if(t=r.tag,t===13){if(t=h5(r),t!==null){s.blockedOn=t,I5(s.priority,function(){w5(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){s.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}s.blockedOn=null}function nu(s){if(s.blockedOn!==null)return!1;for(var t=s.targetContainers;0<t.length;){var r=pp(s.domEventName,s.eventSystemFlags,t[0],s.nativeEvent);if(r===null){r=s.nativeEvent;var a=new r.constructor(r.type,r);cp=a,r.target.dispatchEvent(a),cp=null}else return t=$c(r),t!==null&&Z0(t),s.blockedOn=r,!1;t.shift()}return!0}function Pb(s,t,r){nu(s)&&r.delete(t)}function bS(){hp=!1,gn!==null&&nu(gn)&&(gn=null),yn!==null&&nu(yn)&&(yn=null),bn!==null&&nu(bn)&&(bn=null),ac.forEach(Pb),nc.forEach(Pb)}function hl(s,t){s.blockedOn===t&&(s.blockedOn=null,hp||(hp=!0,Sr.unstable_scheduleCallback(Sr.unstable_NormalPriority,bS)))}function ic(s){function t(i){return hl(i,s)}if(0<Ad.length){hl(Ad[0],s);for(var r=1;r<Ad.length;r++){var a=Ad[r];a.blockedOn===s&&(a.blockedOn=null)}}for(gn!==null&&hl(gn,s),yn!==null&&hl(yn,s),bn!==null&&hl(bn,s),ac.forEach(t),nc.forEach(t),r=0;r<on.length;r++)a=on[r],a.blockedOn===s&&(a.blockedOn=null);for(;0<on.length&&(r=on[0],r.blockedOn===null);)P5(r),r.blockedOn===null&&on.shift()}var go=Ka.ReactCurrentBatchConfig,Lu=!0;function vS(s,t,r,a){var i=Ut,l=go.transition;go.transition=null;try{Ut=1,ef(s,t,r,a)}finally{Ut=i,go.transition=l}}function jS(s,t,r,a){var i=Ut,l=go.transition;go.transition=null;try{Ut=4,ef(s,t,r,a)}finally{Ut=i,go.transition=l}}function ef(s,t,r,a){if(Lu){var i=pp(s,t,r,a);if(i===null)oh(s,t,a,Vu,r),Ib(s,a);else if(yS(i,s,t,r,a))a.stopPropagation();else if(Ib(s,a),t&4&&-1<gS.indexOf(s)){for(;i!==null;){var l=$c(i);if(l!==null&&N5(l),l=pp(s,t,r,a),l===null&&oh(s,t,a,Vu,r),l===i)break;i=l}i!==null&&a.stopPropagation()}else oh(s,t,a,null,r)}}var Vu=null;function pp(s,t,r,a){if(Vu=null,s=Y0(a),s=ai(s),s!==null)if(t=Ci(s),t===null)s=null;else if(r=t.tag,r===13){if(s=h5(t),s!==null)return s;s=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;s=null}else t!==s&&(s=null);return Vu=s,null}function S5(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lS()){case X0:return 1;case y5:return 4;case Mu:case cS:return 16;case b5:return 536870912;default:return 16}default:return 16}}var mn=null,tf=null,iu=null;function C5(){if(iu)return iu;var s,t=tf,r=t.length,a,i="value"in mn?mn.value:mn.textContent,l=i.length;for(s=0;s<r&&t[s]===i[s];s++);var o=r-s;for(a=1;a<=o&&t[r-a]===i[l-a];a++);return iu=i.slice(s,1<a?1-a:void 0)}function ou(s){var t=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&t===13&&(s=13)):s=t,s===10&&(s=13),32<=s||s===13?s:0}function Rd(){return!0}function Sb(){return!1}function Er(s){function t(r,a,i,l,o){this._reactName=r,this._targetInst=i,this.type=a,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var c in s)s.hasOwnProperty(c)&&(r=s[c],this[c]=r?r(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Rd:Sb,this.isPropagationStopped=Sb,this}return cs(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Rd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Rd)},persist:function(){},isPersistent:Rd}),t}var Uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sf=Er(Uo),Uc=cs({},Uo,{view:0,detail:0}),NS=Er(Uc),Jm,Zm,pl,Fx=cs({},Uc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rf,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==pl&&(pl&&s.type==="mousemove"?(Jm=s.screenX-pl.screenX,Zm=s.screenY-pl.screenY):Zm=Jm=0,pl=s),Jm)},movementY:function(s){return"movementY"in s?s.movementY:Zm}}),Cb=Er(Fx),wS=cs({},Fx,{dataTransfer:0}),kS=Er(wS),IS=cs({},Uc,{relatedTarget:0}),eh=Er(IS),PS=cs({},Uo,{animationName:0,elapsedTime:0,pseudoElement:0}),SS=Er(PS),CS=cs({},Uo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ES=Er(CS),TS=cs({},Uo,{data:0}),Eb=Er(TS),_S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RS(s){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(s):(s=AS[s])?!!t[s]:!1}function rf(){return RS}var MS=cs({},Uc,{key:function(s){if(s.key){var t=_S[s.key]||s.key;if(t!=="Unidentified")return t}return s.type==="keypress"?(s=ou(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?DS[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rf,charCode:function(s){return s.type==="keypress"?ou(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ou(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),OS=Er(MS),LS=cs({},Fx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tb=Er(LS),VS=cs({},Uc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rf}),zS=Er(VS),BS=cs({},Uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),FS=Er(BS),US=cs({},Fx,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),$S=Er(US),WS=[9,13,27,32],af=Va&&"CompositionEvent"in window,Ml=null;Va&&"documentMode"in document&&(Ml=document.documentMode);var qS=Va&&"TextEvent"in window&&!Ml,E5=Va&&(!af||Ml&&8<Ml&&11>=Ml),_b=String.fromCharCode(32),Db=!1;function T5(s,t){switch(s){case"keyup":return WS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _5(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Yi=!1;function HS(s,t){switch(s){case"compositionend":return _5(t);case"keypress":return t.which!==32?null:(Db=!0,_b);case"textInput":return s=t.data,s===_b&&Db?null:s;default:return null}}function GS(s,t){if(Yi)return s==="compositionend"||!af&&T5(s,t)?(s=C5(),iu=tf=mn=null,Yi=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return E5&&t.locale!=="ko"?null:t.data;default:return null}}var QS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ab(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t==="input"?!!QS[s.type]:t==="textarea"}function D5(s,t,r,a){c5(a),t=zu(t,"onChange"),0<t.length&&(r=new sf("onChange","change",null,r,a),s.push({event:r,listeners:t}))}var Ol=null,oc=null;function KS(s){$5(s,0)}function Ux(s){var t=Zi(s);if(s5(t))return s}function YS(s,t){if(s==="change")return t}var A5=!1;if(Va){var th;if(Va){var sh="oninput"in document;if(!sh){var Rb=document.createElement("div");Rb.setAttribute("oninput","return;"),sh=typeof Rb.oninput=="function"}th=sh}else th=!1;A5=th&&(!document.documentMode||9<document.documentMode)}function Mb(){Ol&&(Ol.detachEvent("onpropertychange",R5),oc=Ol=null)}function R5(s){if(s.propertyName==="value"&&Ux(oc)){var t=[];D5(t,oc,s,Y0(s)),m5(KS,t)}}function XS(s,t,r){s==="focusin"?(Mb(),Ol=t,oc=r,Ol.attachEvent("onpropertychange",R5)):s==="focusout"&&Mb()}function JS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ux(oc)}function ZS(s,t){if(s==="click")return Ux(t)}function eC(s,t){if(s==="input"||s==="change")return Ux(t)}function tC(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var ta=typeof Object.is=="function"?Object.is:tC;function lc(s,t){if(ta(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;var r=Object.keys(s),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var i=r[a];if(!Xh.call(t,i)||!ta(s[i],t[i]))return!1}return!0}function Ob(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Lb(s,t){var r=Ob(s);s=0;for(var a;r;){if(r.nodeType===3){if(a=s+r.textContent.length,s<=t&&a>=t)return{node:r,offset:t-s};s=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ob(r)}}function M5(s,t){return s&&t?s===t?!0:s&&s.nodeType===3?!1:t&&t.nodeType===3?M5(s,t.parentNode):"contains"in s?s.contains(t):s.compareDocumentPosition?!!(s.compareDocumentPosition(t)&16):!1:!1}function O5(){for(var s=window,t=Du();t instanceof s.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)s=t.contentWindow;else break;t=Du(s.document)}return t}function nf(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t&&(t==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||t==="textarea"||s.contentEditable==="true")}function sC(s){var t=O5(),r=s.focusedElem,a=s.selectionRange;if(t!==r&&r&&r.ownerDocument&&M5(r.ownerDocument.documentElement,r)){if(a!==null&&nf(r)){if(t=a.start,s=a.end,s===void 0&&(s=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(s,r.value.length);else if(s=(t=r.ownerDocument||document)&&t.defaultView||window,s.getSelection){s=s.getSelection();var i=r.textContent.length,l=Math.min(a.start,i);a=a.end===void 0?l:Math.min(a.end,i),!s.extend&&l>a&&(i=a,a=l,l=i),i=Lb(r,l);var o=Lb(r,a);i&&o&&(s.rangeCount!==1||s.anchorNode!==i.node||s.anchorOffset!==i.offset||s.focusNode!==o.node||s.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),s.removeAllRanges(),l>a?(s.addRange(t),s.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),s.addRange(t)))}}for(t=[],s=r;s=s.parentNode;)s.nodeType===1&&t.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)s=t[r],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var rC=Va&&"documentMode"in document&&11>=document.documentMode,Xi=null,fp=null,Ll=null,gp=!1;function Vb(s,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;gp||Xi==null||Xi!==Du(a)||(a=Xi,"selectionStart"in a&&nf(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ll&&lc(Ll,a)||(Ll=a,a=zu(fp,"onSelect"),0<a.length&&(t=new sf("onSelect","select",null,t,r),s.push({event:t,listeners:a}),t.target=Xi)))}function Md(s,t){var r={};return r[s.toLowerCase()]=t.toLowerCase(),r["Webkit"+s]="webkit"+t,r["Moz"+s]="moz"+t,r}var Ji={animationend:Md("Animation","AnimationEnd"),animationiteration:Md("Animation","AnimationIteration"),animationstart:Md("Animation","AnimationStart"),transitionend:Md("Transition","TransitionEnd")},rh={},L5={};Va&&(L5=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function $x(s){if(rh[s])return rh[s];if(!Ji[s])return s;var t=Ji[s],r;for(r in t)if(t.hasOwnProperty(r)&&r in L5)return rh[s]=t[r];return s}var V5=$x("animationend"),z5=$x("animationiteration"),B5=$x("animationstart"),F5=$x("transitionend"),U5=new Map,zb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fn(s,t){U5.set(s,t),Si(t,[s])}for(var ah=0;ah<zb.length;ah++){var nh=zb[ah],aC=nh.toLowerCase(),nC=nh[0].toUpperCase()+nh.slice(1);Fn(aC,"on"+nC)}Fn(V5,"onAnimationEnd");Fn(z5,"onAnimationIteration");Fn(B5,"onAnimationStart");Fn("dblclick","onDoubleClick");Fn("focusin","onFocus");Fn("focusout","onBlur");Fn(F5,"onTransitionEnd");ko("onMouseEnter",["mouseout","mouseover"]);ko("onMouseLeave",["mouseout","mouseover"]);ko("onPointerEnter",["pointerout","pointerover"]);ko("onPointerLeave",["pointerout","pointerover"]);Si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Si("onBeforeInput",["compositionend","keypress","textInput","paste"]);Si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Il));function Bb(s,t,r){var a=s.type||"unknown-event";s.currentTarget=r,aS(a,t,void 0,s),s.currentTarget=null}function $5(s,t){t=(t&4)!==0;for(var r=0;r<s.length;r++){var a=s[r],i=a.event;a=a.listeners;e:{var l=void 0;if(t)for(var o=a.length-1;0<=o;o--){var c=a[o],d=c.instance,h=c.currentTarget;if(c=c.listener,d!==l&&i.isPropagationStopped())break e;Bb(i,c,h),l=d}else for(o=0;o<a.length;o++){if(c=a[o],d=c.instance,h=c.currentTarget,c=c.listener,d!==l&&i.isPropagationStopped())break e;Bb(i,c,h),l=d}}}if(Ru)throw s=xp,Ru=!1,xp=null,s}function ts(s,t){var r=t[Np];r===void 0&&(r=t[Np]=new Set);var a=s+"__bubble";r.has(a)||(W5(t,s,2,!1),r.add(a))}function ih(s,t,r){var a=0;t&&(a|=4),W5(r,s,a,t)}var Od="_reactListening"+Math.random().toString(36).slice(2);function cc(s){if(!s[Od]){s[Od]=!0,Xw.forEach(function(r){r!=="selectionchange"&&(iC.has(r)||ih(r,!1,s),ih(r,!0,s))});var t=s.nodeType===9?s:s.ownerDocument;t===null||t[Od]||(t[Od]=!0,ih("selectionchange",!1,t))}}function W5(s,t,r,a){switch(S5(t)){case 1:var i=vS;break;case 4:i=jS;break;default:i=ef}r=i.bind(null,t,r,s),i=void 0,!up||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?s.addEventListener(t,r,{capture:!0,passive:i}):s.addEventListener(t,r,!0):i!==void 0?s.addEventListener(t,r,{passive:i}):s.addEventListener(t,r,!1)}function oh(s,t,r,a,i){var l=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var c=a.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=a.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;o=o.return}for(;c!==null;){if(o=ai(c),o===null)return;if(d=o.tag,d===5||d===6){a=l=o;continue e}c=c.parentNode}}a=a.return}m5(function(){var h=l,g=Y0(r),N=[];e:{var k=U5.get(s);if(k!==void 0){var E=sf,y=s;switch(s){case"keypress":if(ou(r)===0)break e;case"keydown":case"keyup":E=OS;break;case"focusin":y="focus",E=eh;break;case"focusout":y="blur",E=eh;break;case"beforeblur":case"afterblur":E=eh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Cb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=kS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=zS;break;case V5:case z5:case B5:E=SS;break;case F5:E=FS;break;case"scroll":E=NS;break;case"wheel":E=$S;break;case"copy":case"cut":case"paste":E=ES;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Tb}var L=(t&4)!==0,_=!L&&s==="scroll",A=L?k!==null?k+"Capture":null:k;L=[];for(var z=h,O;z!==null;){O=z;var K=O.stateNode;if(O.tag===5&&K!==null&&(O=K,A!==null&&(K=rc(z,A),K!=null&&L.push(dc(z,K,O)))),_)break;z=z.return}0<L.length&&(k=new E(k,y,null,r,g),N.push({event:k,listeners:L}))}}if(!(t&7)){e:{if(k=s==="mouseover"||s==="pointerover",E=s==="mouseout"||s==="pointerout",k&&r!==cp&&(y=r.relatedTarget||r.fromElement)&&(ai(y)||y[za]))break e;if((E||k)&&(k=g.window===g?g:(k=g.ownerDocument)?k.defaultView||k.parentWindow:window,E?(y=r.relatedTarget||r.toElement,E=h,y=y?ai(y):null,y!==null&&(_=Ci(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(E=null,y=h),E!==y)){if(L=Cb,K="onMouseLeave",A="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(L=Tb,K="onPointerLeave",A="onPointerEnter",z="pointer"),_=E==null?k:Zi(E),O=y==null?k:Zi(y),k=new L(K,z+"leave",E,r,g),k.target=_,k.relatedTarget=O,K=null,ai(g)===h&&(L=new L(A,z+"enter",y,r,g),L.target=O,L.relatedTarget=_,K=L),_=K,E&&y)t:{for(L=E,A=y,z=0,O=L;O;O=$i(O))z++;for(O=0,K=A;K;K=$i(K))O++;for(;0<z-O;)L=$i(L),z--;for(;0<O-z;)A=$i(A),O--;for(;z--;){if(L===A||A!==null&&L===A.alternate)break t;L=$i(L),A=$i(A)}L=null}else L=null;E!==null&&Fb(N,k,E,L,!1),y!==null&&_!==null&&Fb(N,_,y,L,!0)}}e:{if(k=h?Zi(h):window,E=k.nodeName&&k.nodeName.toLowerCase(),E==="select"||E==="input"&&k.type==="file")var G=YS;else if(Ab(k))if(A5)G=eC;else{G=JS;var H=XS}else(E=k.nodeName)&&E.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(G=ZS);if(G&&(G=G(s,h))){D5(N,G,r,g);break e}H&&H(s,k,h),s==="focusout"&&(H=k._wrapperState)&&H.controlled&&k.type==="number"&&ap(k,"number",k.value)}switch(H=h?Zi(h):window,s){case"focusin":(Ab(H)||H.contentEditable==="true")&&(Xi=H,fp=h,Ll=null);break;case"focusout":Ll=fp=Xi=null;break;case"mousedown":gp=!0;break;case"contextmenu":case"mouseup":case"dragend":gp=!1,Vb(N,r,g);break;case"selectionchange":if(rC)break;case"keydown":case"keyup":Vb(N,r,g)}var R;if(af)e:{switch(s){case"compositionstart":var u="onCompositionStart";break e;case"compositionend":u="onCompositionEnd";break e;case"compositionupdate":u="onCompositionUpdate";break e}u=void 0}else Yi?T5(s,r)&&(u="onCompositionEnd"):s==="keydown"&&r.keyCode===229&&(u="onCompositionStart");u&&(E5&&r.locale!=="ko"&&(Yi||u!=="onCompositionStart"?u==="onCompositionEnd"&&Yi&&(R=C5()):(mn=g,tf="value"in mn?mn.value:mn.textContent,Yi=!0)),H=zu(h,u),0<H.length&&(u=new Eb(u,s,null,r,g),N.push({event:u,listeners:H}),R?u.data=R:(R=_5(r),R!==null&&(u.data=R)))),(R=qS?HS(s,r):GS(s,r))&&(h=zu(h,"onBeforeInput"),0<h.length&&(g=new Eb("onBeforeInput","beforeinput",null,r,g),N.push({event:g,listeners:h}),g.data=R))}$5(N,t)})}function dc(s,t,r){return{instance:s,listener:t,currentTarget:r}}function zu(s,t){for(var r=t+"Capture",a=[];s!==null;){var i=s,l=i.stateNode;i.tag===5&&l!==null&&(i=l,l=rc(s,r),l!=null&&a.unshift(dc(s,l,i)),l=rc(s,t),l!=null&&a.push(dc(s,l,i))),s=s.return}return a}function $i(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Fb(s,t,r,a,i){for(var l=t._reactName,o=[];r!==null&&r!==a;){var c=r,d=c.alternate,h=c.stateNode;if(d!==null&&d===a)break;c.tag===5&&h!==null&&(c=h,i?(d=rc(r,l),d!=null&&o.unshift(dc(r,d,c))):i||(d=rc(r,l),d!=null&&o.push(dc(r,d,c)))),r=r.return}o.length!==0&&s.push({event:t,listeners:o})}var oC=/\r\n?/g,lC=/\u0000|\uFFFD/g;function Ub(s){return(typeof s=="string"?s:""+s).replace(oC,`
`).replace(lC,"")}function Ld(s,t,r){if(t=Ub(t),Ub(s)!==t&&r)throw Error(Be(425))}function Bu(){}var yp=null,bp=null;function vp(s,t){return s==="textarea"||s==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jp=typeof setTimeout=="function"?setTimeout:void 0,cC=typeof clearTimeout=="function"?clearTimeout:void 0,$b=typeof Promise=="function"?Promise:void 0,dC=typeof queueMicrotask=="function"?queueMicrotask:typeof $b<"u"?function(s){return $b.resolve(null).then(s).catch(uC)}:jp;function uC(s){setTimeout(function(){throw s})}function lh(s,t){var r=t,a=0;do{var i=r.nextSibling;if(s.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(a===0){s.removeChild(i),ic(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=i}while(r);ic(t)}function vn(s){for(;s!=null;s=s.nextSibling){var t=s.nodeType;if(t===1||t===3)break;if(t===8){if(t=s.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return s}function Wb(s){s=s.previousSibling;for(var t=0;s;){if(s.nodeType===8){var r=s.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return s;t--}else r==="/$"&&t++}s=s.previousSibling}return null}var $o=Math.random().toString(36).slice(2),ca="__reactFiber$"+$o,uc="__reactProps$"+$o,za="__reactContainer$"+$o,Np="__reactEvents$"+$o,xC="__reactListeners$"+$o,mC="__reactHandles$"+$o;function ai(s){var t=s[ca];if(t)return t;for(var r=s.parentNode;r;){if(t=r[za]||r[ca]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(s=Wb(s);s!==null;){if(r=s[ca])return r;s=Wb(s)}return t}s=r,r=s.parentNode}return null}function $c(s){return s=s[ca]||s[za],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Zi(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(Be(33))}function Wx(s){return s[uc]||null}var wp=[],eo=-1;function Un(s){return{current:s}}function ss(s){0>eo||(s.current=wp[eo],wp[eo]=null,eo--)}function Yt(s,t){eo++,wp[eo]=s.current,s.current=t}var _n={},er=Un(_n),mr=Un(!1),pi=_n;function Io(s,t){var r=s.type.contextTypes;if(!r)return _n;var a=s.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var i={},l;for(l in r)i[l]=t[l];return a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=t,s.__reactInternalMemoizedMaskedChildContext=i),i}function hr(s){return s=s.childContextTypes,s!=null}function Fu(){ss(mr),ss(er)}function qb(s,t,r){if(er.current!==_n)throw Error(Be(168));Yt(er,t),Yt(mr,r)}function q5(s,t,r){var a=s.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var i in a)if(!(i in t))throw Error(Be(108,XP(s)||"Unknown",i));return cs({},r,a)}function Uu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||_n,pi=er.current,Yt(er,s),Yt(mr,mr.current),!0}function Hb(s,t,r){var a=s.stateNode;if(!a)throw Error(Be(169));r?(s=q5(s,t,pi),a.__reactInternalMemoizedMergedChildContext=s,ss(mr),ss(er),Yt(er,s)):ss(mr),Yt(mr,r)}var Ta=null,qx=!1,ch=!1;function H5(s){Ta===null?Ta=[s]:Ta.push(s)}function hC(s){qx=!0,H5(s)}function $n(){if(!ch&&Ta!==null){ch=!0;var s=0,t=Ut;try{var r=Ta;for(Ut=1;s<r.length;s++){var a=r[s];do a=a(!0);while(a!==null)}Ta=null,qx=!1}catch(i){throw Ta!==null&&(Ta=Ta.slice(s+1)),g5(X0,$n),i}finally{Ut=t,ch=!1}}return null}var to=[],so=0,$u=null,Wu=0,Ar=[],Rr=0,fi=null,_a=1,Da="";function ei(s,t){to[so++]=Wu,to[so++]=$u,$u=s,Wu=t}function G5(s,t,r){Ar[Rr++]=_a,Ar[Rr++]=Da,Ar[Rr++]=fi,fi=s;var a=_a;s=Da;var i=32-Zr(a)-1;a&=~(1<<i),r+=1;var l=32-Zr(t)+i;if(30<l){var o=i-i%5;l=(a&(1<<o)-1).toString(32),a>>=o,i-=o,_a=1<<32-Zr(t)+i|r<<i|a,Da=l+s}else _a=1<<l|r<<i|a,Da=s}function of(s){s.return!==null&&(ei(s,1),G5(s,1,0))}function lf(s){for(;s===$u;)$u=to[--so],to[so]=null,Wu=to[--so],to[so]=null;for(;s===fi;)fi=Ar[--Rr],Ar[Rr]=null,Da=Ar[--Rr],Ar[Rr]=null,_a=Ar[--Rr],Ar[Rr]=null}var kr=null,Nr=null,rs=!1,Qr=null;function Q5(s,t){var r=Mr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=s,t=s.deletions,t===null?(s.deletions=[r],s.flags|=16):t.push(r)}function Gb(s,t){switch(s.tag){case 5:var r=s.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(s.stateNode=t,kr=s,Nr=vn(t.firstChild),!0):!1;case 6:return t=s.pendingProps===""||t.nodeType!==3?null:t,t!==null?(s.stateNode=t,kr=s,Nr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=fi!==null?{id:_a,overflow:Da}:null,s.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Mr(18,null,null,0),r.stateNode=t,r.return=s,s.child=r,kr=s,Nr=null,!0):!1;default:return!1}}function kp(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Ip(s){if(rs){var t=Nr;if(t){var r=t;if(!Gb(s,t)){if(kp(s))throw Error(Be(418));t=vn(r.nextSibling);var a=kr;t&&Gb(s,t)?Q5(a,r):(s.flags=s.flags&-4097|2,rs=!1,kr=s)}}else{if(kp(s))throw Error(Be(418));s.flags=s.flags&-4097|2,rs=!1,kr=s}}}function Qb(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;kr=s}function Vd(s){if(s!==kr)return!1;if(!rs)return Qb(s),rs=!0,!1;var t;if((t=s.tag!==3)&&!(t=s.tag!==5)&&(t=s.type,t=t!=="head"&&t!=="body"&&!vp(s.type,s.memoizedProps)),t&&(t=Nr)){if(kp(s))throw K5(),Error(Be(418));for(;t;)Q5(s,t),t=vn(t.nextSibling)}if(Qb(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Be(317));e:{for(s=s.nextSibling,t=0;s;){if(s.nodeType===8){var r=s.data;if(r==="/$"){if(t===0){Nr=vn(s.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}s=s.nextSibling}Nr=null}}else Nr=kr?vn(s.stateNode.nextSibling):null;return!0}function K5(){for(var s=Nr;s;)s=vn(s.nextSibling)}function Po(){Nr=kr=null,rs=!1}function cf(s){Qr===null?Qr=[s]:Qr.push(s)}var pC=Ka.ReactCurrentBatchConfig;function fl(s,t,r){if(s=r.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Be(309));var a=r.stateNode}if(!a)throw Error(Be(147,s));var i=a,l=""+s;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var c=i.refs;o===null?delete c[l]:c[l]=o},t._stringRef=l,t)}if(typeof s!="string")throw Error(Be(284));if(!r._owner)throw Error(Be(290,s))}return s}function zd(s,t){throw s=Object.prototype.toString.call(t),Error(Be(31,s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s))}function Kb(s){var t=s._init;return t(s._payload)}function Y5(s){function t(A,z){if(s){var O=A.deletions;O===null?(A.deletions=[z],A.flags|=16):O.push(z)}}function r(A,z){if(!s)return null;for(;z!==null;)t(A,z),z=z.sibling;return null}function a(A,z){for(A=new Map;z!==null;)z.key!==null?A.set(z.key,z):A.set(z.index,z),z=z.sibling;return A}function i(A,z){return A=kn(A,z),A.index=0,A.sibling=null,A}function l(A,z,O){return A.index=O,s?(O=A.alternate,O!==null?(O=O.index,O<z?(A.flags|=2,z):O):(A.flags|=2,z)):(A.flags|=1048576,z)}function o(A){return s&&A.alternate===null&&(A.flags|=2),A}function c(A,z,O,K){return z===null||z.tag!==6?(z=fh(O,A.mode,K),z.return=A,z):(z=i(z,O),z.return=A,z)}function d(A,z,O,K){var G=O.type;return G===Ki?g(A,z,O.props.children,K,O.key):z!==null&&(z.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===an&&Kb(G)===z.type)?(K=i(z,O.props),K.ref=fl(A,z,O),K.return=A,K):(K=hu(O.type,O.key,O.props,null,A.mode,K),K.ref=fl(A,z,O),K.return=A,K)}function h(A,z,O,K){return z===null||z.tag!==4||z.stateNode.containerInfo!==O.containerInfo||z.stateNode.implementation!==O.implementation?(z=gh(O,A.mode,K),z.return=A,z):(z=i(z,O.children||[]),z.return=A,z)}function g(A,z,O,K,G){return z===null||z.tag!==7?(z=xi(O,A.mode,K,G),z.return=A,z):(z=i(z,O),z.return=A,z)}function N(A,z,O){if(typeof z=="string"&&z!==""||typeof z=="number")return z=fh(""+z,A.mode,O),z.return=A,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Cd:return O=hu(z.type,z.key,z.props,null,A.mode,O),O.ref=fl(A,null,z),O.return=A,O;case Qi:return z=gh(z,A.mode,O),z.return=A,z;case an:var K=z._init;return N(A,K(z._payload),O)}if(wl(z)||ul(z))return z=xi(z,A.mode,O,null),z.return=A,z;zd(A,z)}return null}function k(A,z,O,K){var G=z!==null?z.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return G!==null?null:c(A,z,""+O,K);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Cd:return O.key===G?d(A,z,O,K):null;case Qi:return O.key===G?h(A,z,O,K):null;case an:return G=O._init,k(A,z,G(O._payload),K)}if(wl(O)||ul(O))return G!==null?null:g(A,z,O,K,null);zd(A,O)}return null}function E(A,z,O,K,G){if(typeof K=="string"&&K!==""||typeof K=="number")return A=A.get(O)||null,c(z,A,""+K,G);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Cd:return A=A.get(K.key===null?O:K.key)||null,d(z,A,K,G);case Qi:return A=A.get(K.key===null?O:K.key)||null,h(z,A,K,G);case an:var H=K._init;return E(A,z,O,H(K._payload),G)}if(wl(K)||ul(K))return A=A.get(O)||null,g(z,A,K,G,null);zd(z,K)}return null}function y(A,z,O,K){for(var G=null,H=null,R=z,u=z=0,W=null;R!==null&&u<O.length;u++){R.index>u?(W=R,R=null):W=R.sibling;var U=k(A,R,O[u],K);if(U===null){R===null&&(R=W);break}s&&R&&U.alternate===null&&t(A,R),z=l(U,z,u),H===null?G=U:H.sibling=U,H=U,R=W}if(u===O.length)return r(A,R),rs&&ei(A,u),G;if(R===null){for(;u<O.length;u++)R=N(A,O[u],K),R!==null&&(z=l(R,z,u),H===null?G=R:H.sibling=R,H=R);return rs&&ei(A,u),G}for(R=a(A,R);u<O.length;u++)W=E(R,A,u,O[u],K),W!==null&&(s&&W.alternate!==null&&R.delete(W.key===null?u:W.key),z=l(W,z,u),H===null?G=W:H.sibling=W,H=W);return s&&R.forEach(function(ee){return t(A,ee)}),rs&&ei(A,u),G}function L(A,z,O,K){var G=ul(O);if(typeof G!="function")throw Error(Be(150));if(O=G.call(O),O==null)throw Error(Be(151));for(var H=G=null,R=z,u=z=0,W=null,U=O.next();R!==null&&!U.done;u++,U=O.next()){R.index>u?(W=R,R=null):W=R.sibling;var ee=k(A,R,U.value,K);if(ee===null){R===null&&(R=W);break}s&&R&&ee.alternate===null&&t(A,R),z=l(ee,z,u),H===null?G=ee:H.sibling=ee,H=ee,R=W}if(U.done)return r(A,R),rs&&ei(A,u),G;if(R===null){for(;!U.done;u++,U=O.next())U=N(A,U.value,K),U!==null&&(z=l(U,z,u),H===null?G=U:H.sibling=U,H=U);return rs&&ei(A,u),G}for(R=a(A,R);!U.done;u++,U=O.next())U=E(R,A,u,U.value,K),U!==null&&(s&&U.alternate!==null&&R.delete(U.key===null?u:U.key),z=l(U,z,u),H===null?G=U:H.sibling=U,H=U);return s&&R.forEach(function(te){return t(A,te)}),rs&&ei(A,u),G}function _(A,z,O,K){if(typeof O=="object"&&O!==null&&O.type===Ki&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case Cd:e:{for(var G=O.key,H=z;H!==null;){if(H.key===G){if(G=O.type,G===Ki){if(H.tag===7){r(A,H.sibling),z=i(H,O.props.children),z.return=A,A=z;break e}}else if(H.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===an&&Kb(G)===H.type){r(A,H.sibling),z=i(H,O.props),z.ref=fl(A,H,O),z.return=A,A=z;break e}r(A,H);break}else t(A,H);H=H.sibling}O.type===Ki?(z=xi(O.props.children,A.mode,K,O.key),z.return=A,A=z):(K=hu(O.type,O.key,O.props,null,A.mode,K),K.ref=fl(A,z,O),K.return=A,A=K)}return o(A);case Qi:e:{for(H=O.key;z!==null;){if(z.key===H)if(z.tag===4&&z.stateNode.containerInfo===O.containerInfo&&z.stateNode.implementation===O.implementation){r(A,z.sibling),z=i(z,O.children||[]),z.return=A,A=z;break e}else{r(A,z);break}else t(A,z);z=z.sibling}z=gh(O,A.mode,K),z.return=A,A=z}return o(A);case an:return H=O._init,_(A,z,H(O._payload),K)}if(wl(O))return y(A,z,O,K);if(ul(O))return L(A,z,O,K);zd(A,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,z!==null&&z.tag===6?(r(A,z.sibling),z=i(z,O),z.return=A,A=z):(r(A,z),z=fh(O,A.mode,K),z.return=A,A=z),o(A)):r(A,z)}return _}var So=Y5(!0),X5=Y5(!1),qu=Un(null),Hu=null,ro=null,df=null;function uf(){df=ro=Hu=null}function xf(s){var t=qu.current;ss(qu),s._currentValue=t}function Pp(s,t,r){for(;s!==null;){var a=s.alternate;if((s.childLanes&t)!==t?(s.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),s===r)break;s=s.return}}function yo(s,t){Hu=s,df=ro=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&t&&(ur=!0),s.firstContext=null)}function Vr(s){var t=s._currentValue;if(df!==s)if(s={context:s,memoizedValue:t,next:null},ro===null){if(Hu===null)throw Error(Be(308));ro=s,Hu.dependencies={lanes:0,firstContext:s}}else ro=ro.next=s;return t}var ni=null;function mf(s){ni===null?ni=[s]:ni.push(s)}function J5(s,t,r,a){var i=t.interleaved;return i===null?(r.next=r,mf(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ba(s,a)}function Ba(s,t){s.lanes|=t;var r=s.alternate;for(r!==null&&(r.lanes|=t),r=s,s=s.return;s!==null;)s.childLanes|=t,r=s.alternate,r!==null&&(r.childLanes|=t),r=s,s=s.return;return r.tag===3?r.stateNode:null}var nn=!1;function hf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Z5(s,t){s=s.updateQueue,t.updateQueue===s&&(t.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ma(s,t){return{eventTime:s,lane:t,tag:0,payload:null,callback:null,next:null}}function jn(s,t,r){var a=s.updateQueue;if(a===null)return null;if(a=a.shared,Lt&2){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,Ba(s,r)}return i=a.interleaved,i===null?(t.next=t,mf(a)):(t.next=i.next,i.next=t),a.interleaved=t,Ba(s,r)}function lu(s,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=s.pendingLanes,r|=a,t.lanes=r,J0(s,r)}}function Yb(s,t){var r=s.updateQueue,a=s.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var i=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?i=l=o:l=l.next=o,r=r.next}while(r!==null);l===null?i=l=t:l=l.next=t}else i=l=t;r={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:a.shared,effects:a.effects},s.updateQueue=r;return}s=r.lastBaseUpdate,s===null?r.firstBaseUpdate=t:s.next=t,r.lastBaseUpdate=t}function Gu(s,t,r,a){var i=s.updateQueue;nn=!1;var l=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,h=d.next;d.next=null,o===null?l=h:o.next=h,o=d;var g=s.alternate;g!==null&&(g=g.updateQueue,c=g.lastBaseUpdate,c!==o&&(c===null?g.firstBaseUpdate=h:c.next=h,g.lastBaseUpdate=d))}if(l!==null){var N=i.baseState;o=0,g=h=d=null,c=l;do{var k=c.lane,E=c.eventTime;if((a&k)===k){g!==null&&(g=g.next={eventTime:E,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var y=s,L=c;switch(k=t,E=r,L.tag){case 1:if(y=L.payload,typeof y=="function"){N=y.call(E,N,k);break e}N=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=L.payload,k=typeof y=="function"?y.call(E,N,k):y,k==null)break e;N=cs({},N,k);break e;case 2:nn=!0}}c.callback!==null&&c.lane!==0&&(s.flags|=64,k=i.effects,k===null?i.effects=[c]:k.push(c))}else E={eventTime:E,lane:k,tag:c.tag,payload:c.payload,callback:c.callback,next:null},g===null?(h=g=E,d=N):g=g.next=E,o|=k;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;k=c,c=k.next,k.next=null,i.lastBaseUpdate=k,i.shared.pending=null}}while(1);if(g===null&&(d=N),i.baseState=d,i.firstBaseUpdate=h,i.lastBaseUpdate=g,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else l===null&&(i.shared.lanes=0);yi|=o,s.lanes=o,s.memoizedState=N}}function Xb(s,t,r){if(s=t.effects,t.effects=null,s!==null)for(t=0;t<s.length;t++){var a=s[t],i=a.callback;if(i!==null){if(a.callback=null,a=r,typeof i!="function")throw Error(Be(191,i));i.call(a)}}}var Wc={},ua=Un(Wc),xc=Un(Wc),mc=Un(Wc);function ii(s){if(s===Wc)throw Error(Be(174));return s}function pf(s,t){switch(Yt(mc,t),Yt(xc,s),Yt(ua,Wc),s=t.nodeType,s){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ip(null,"");break;default:s=s===8?t.parentNode:t,t=s.namespaceURI||null,s=s.tagName,t=ip(t,s)}ss(ua),Yt(ua,t)}function Co(){ss(ua),ss(xc),ss(mc)}function e2(s){ii(mc.current);var t=ii(ua.current),r=ip(t,s.type);t!==r&&(Yt(xc,s),Yt(ua,r))}function ff(s){xc.current===s&&(ss(ua),ss(xc))}var as=Un(0);function Qu(s){for(var t=s;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var dh=[];function gf(){for(var s=0;s<dh.length;s++)dh[s]._workInProgressVersionPrimary=null;dh.length=0}var cu=Ka.ReactCurrentDispatcher,uh=Ka.ReactCurrentBatchConfig,gi=0,is=null,Ns=null,Ss=null,Ku=!1,Vl=!1,hc=0,fC=0;function Gs(){throw Error(Be(321))}function yf(s,t){if(t===null)return!1;for(var r=0;r<t.length&&r<s.length;r++)if(!ta(s[r],t[r]))return!1;return!0}function bf(s,t,r,a,i,l){if(gi=l,is=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cu.current=s===null||s.memoizedState===null?vC:jC,s=r(a,i),Vl){l=0;do{if(Vl=!1,hc=0,25<=l)throw Error(Be(301));l+=1,Ss=Ns=null,t.updateQueue=null,cu.current=NC,s=r(a,i)}while(Vl)}if(cu.current=Yu,t=Ns!==null&&Ns.next!==null,gi=0,Ss=Ns=is=null,Ku=!1,t)throw Error(Be(300));return s}function vf(){var s=hc!==0;return hc=0,s}function oa(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ss===null?is.memoizedState=Ss=s:Ss=Ss.next=s,Ss}function zr(){if(Ns===null){var s=is.alternate;s=s!==null?s.memoizedState:null}else s=Ns.next;var t=Ss===null?is.memoizedState:Ss.next;if(t!==null)Ss=t,Ns=s;else{if(s===null)throw Error(Be(310));Ns=s,s={memoizedState:Ns.memoizedState,baseState:Ns.baseState,baseQueue:Ns.baseQueue,queue:Ns.queue,next:null},Ss===null?is.memoizedState=Ss=s:Ss=Ss.next=s}return Ss}function pc(s,t){return typeof t=="function"?t(s):t}function xh(s){var t=zr(),r=t.queue;if(r===null)throw Error(Be(311));r.lastRenderedReducer=s;var a=Ns,i=a.baseQueue,l=r.pending;if(l!==null){if(i!==null){var o=i.next;i.next=l.next,l.next=o}a.baseQueue=i=l,r.pending=null}if(i!==null){l=i.next,a=a.baseState;var c=o=null,d=null,h=l;do{var g=h.lane;if((gi&g)===g)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),a=h.hasEagerState?h.eagerState:s(a,h.action);else{var N={lane:g,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(c=d=N,o=a):d=d.next=N,is.lanes|=g,yi|=g}h=h.next}while(h!==null&&h!==l);d===null?o=a:d.next=c,ta(a,t.memoizedState)||(ur=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=d,r.lastRenderedState=a}if(s=r.interleaved,s!==null){i=s;do l=i.lane,is.lanes|=l,yi|=l,i=i.next;while(i!==s)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function mh(s){var t=zr(),r=t.queue;if(r===null)throw Error(Be(311));r.lastRenderedReducer=s;var a=r.dispatch,i=r.pending,l=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do l=s(l,o.action),o=o.next;while(o!==i);ta(l,t.memoizedState)||(ur=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,a]}function t2(){}function s2(s,t){var r=is,a=zr(),i=t(),l=!ta(a.memoizedState,i);if(l&&(a.memoizedState=i,ur=!0),a=a.queue,jf(n2.bind(null,r,a,s),[s]),a.getSnapshot!==t||l||Ss!==null&&Ss.memoizedState.tag&1){if(r.flags|=2048,fc(9,a2.bind(null,r,a,i,t),void 0,null),Ts===null)throw Error(Be(349));gi&30||r2(r,t,i)}return i}function r2(s,t,r){s.flags|=16384,s={getSnapshot:t,value:r},t=is.updateQueue,t===null?(t={lastEffect:null,stores:null},is.updateQueue=t,t.stores=[s]):(r=t.stores,r===null?t.stores=[s]:r.push(s))}function a2(s,t,r,a){t.value=r,t.getSnapshot=a,i2(t)&&o2(s)}function n2(s,t,r){return r(function(){i2(t)&&o2(s)})}function i2(s){var t=s.getSnapshot;s=s.value;try{var r=t();return!ta(s,r)}catch{return!0}}function o2(s){var t=Ba(s,1);t!==null&&ea(t,s,1,-1)}function Jb(s){var t=oa();return typeof s=="function"&&(s=s()),t.memoizedState=t.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pc,lastRenderedState:s},t.queue=s,s=s.dispatch=bC.bind(null,is,s),[t.memoizedState,s]}function fc(s,t,r,a){return s={tag:s,create:t,destroy:r,deps:a,next:null},t=is.updateQueue,t===null?(t={lastEffect:null,stores:null},is.updateQueue=t,t.lastEffect=s.next=s):(r=t.lastEffect,r===null?t.lastEffect=s.next=s:(a=r.next,r.next=s,s.next=a,t.lastEffect=s)),s}function l2(){return zr().memoizedState}function du(s,t,r,a){var i=oa();is.flags|=s,i.memoizedState=fc(1|t,r,void 0,a===void 0?null:a)}function Hx(s,t,r,a){var i=zr();a=a===void 0?null:a;var l=void 0;if(Ns!==null){var o=Ns.memoizedState;if(l=o.destroy,a!==null&&yf(a,o.deps)){i.memoizedState=fc(t,r,l,a);return}}is.flags|=s,i.memoizedState=fc(1|t,r,l,a)}function Zb(s,t){return du(8390656,8,s,t)}function jf(s,t){return Hx(2048,8,s,t)}function c2(s,t){return Hx(4,2,s,t)}function d2(s,t){return Hx(4,4,s,t)}function u2(s,t){if(typeof t=="function")return s=s(),t(s),function(){t(null)};if(t!=null)return s=s(),t.current=s,function(){t.current=null}}function x2(s,t,r){return r=r!=null?r.concat([s]):null,Hx(4,4,u2.bind(null,t,s),r)}function Nf(){}function m2(s,t){var r=zr();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&yf(t,a[1])?a[0]:(r.memoizedState=[s,t],s)}function h2(s,t){var r=zr();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&yf(t,a[1])?a[0]:(s=s(),r.memoizedState=[s,t],s)}function p2(s,t,r){return gi&21?(ta(r,t)||(r=v5(),is.lanes|=r,yi|=r,s.baseState=!0),t):(s.baseState&&(s.baseState=!1,ur=!0),s.memoizedState=r)}function gC(s,t){var r=Ut;Ut=r!==0&&4>r?r:4,s(!0);var a=uh.transition;uh.transition={};try{s(!1),t()}finally{Ut=r,uh.transition=a}}function f2(){return zr().memoizedState}function yC(s,t,r){var a=wn(s);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},g2(s))y2(t,r);else if(r=J5(s,t,r,a),r!==null){var i=nr();ea(r,s,a,i),b2(r,t,a)}}function bC(s,t,r){var a=wn(s),i={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(g2(s))y2(t,i);else{var l=s.alternate;if(s.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,c=l(o,r);if(i.hasEagerState=!0,i.eagerState=c,ta(c,o)){var d=t.interleaved;d===null?(i.next=i,mf(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}r=J5(s,t,i,a),r!==null&&(i=nr(),ea(r,s,a,i),b2(r,t,a))}}function g2(s){var t=s.alternate;return s===is||t!==null&&t===is}function y2(s,t){Vl=Ku=!0;var r=s.pending;r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t}function b2(s,t,r){if(r&4194240){var a=t.lanes;a&=s.pendingLanes,r|=a,t.lanes=r,J0(s,r)}}var Yu={readContext:Vr,useCallback:Gs,useContext:Gs,useEffect:Gs,useImperativeHandle:Gs,useInsertionEffect:Gs,useLayoutEffect:Gs,useMemo:Gs,useReducer:Gs,useRef:Gs,useState:Gs,useDebugValue:Gs,useDeferredValue:Gs,useTransition:Gs,useMutableSource:Gs,useSyncExternalStore:Gs,useId:Gs,unstable_isNewReconciler:!1},vC={readContext:Vr,useCallback:function(s,t){return oa().memoizedState=[s,t===void 0?null:t],s},useContext:Vr,useEffect:Zb,useImperativeHandle:function(s,t,r){return r=r!=null?r.concat([s]):null,du(4194308,4,u2.bind(null,t,s),r)},useLayoutEffect:function(s,t){return du(4194308,4,s,t)},useInsertionEffect:function(s,t){return du(4,2,s,t)},useMemo:function(s,t){var r=oa();return t=t===void 0?null:t,s=s(),r.memoizedState=[s,t],s},useReducer:function(s,t,r){var a=oa();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:t},a.queue=s,s=s.dispatch=yC.bind(null,is,s),[a.memoizedState,s]},useRef:function(s){var t=oa();return s={current:s},t.memoizedState=s},useState:Jb,useDebugValue:Nf,useDeferredValue:function(s){return oa().memoizedState=s},useTransition:function(){var s=Jb(!1),t=s[0];return s=gC.bind(null,s[1]),oa().memoizedState=s,[t,s]},useMutableSource:function(){},useSyncExternalStore:function(s,t,r){var a=is,i=oa();if(rs){if(r===void 0)throw Error(Be(407));r=r()}else{if(r=t(),Ts===null)throw Error(Be(349));gi&30||r2(a,t,r)}i.memoizedState=r;var l={value:r,getSnapshot:t};return i.queue=l,Zb(n2.bind(null,a,l,s),[s]),a.flags|=2048,fc(9,a2.bind(null,a,l,r,t),void 0,null),r},useId:function(){var s=oa(),t=Ts.identifierPrefix;if(rs){var r=Da,a=_a;r=(a&~(1<<32-Zr(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=hc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=fC++,t=":"+t+"r"+r.toString(32)+":";return s.memoizedState=t},unstable_isNewReconciler:!1},jC={readContext:Vr,useCallback:m2,useContext:Vr,useEffect:jf,useImperativeHandle:x2,useInsertionEffect:c2,useLayoutEffect:d2,useMemo:h2,useReducer:xh,useRef:l2,useState:function(){return xh(pc)},useDebugValue:Nf,useDeferredValue:function(s){var t=zr();return p2(t,Ns.memoizedState,s)},useTransition:function(){var s=xh(pc)[0],t=zr().memoizedState;return[s,t]},useMutableSource:t2,useSyncExternalStore:s2,useId:f2,unstable_isNewReconciler:!1},NC={readContext:Vr,useCallback:m2,useContext:Vr,useEffect:jf,useImperativeHandle:x2,useInsertionEffect:c2,useLayoutEffect:d2,useMemo:h2,useReducer:mh,useRef:l2,useState:function(){return mh(pc)},useDebugValue:Nf,useDeferredValue:function(s){var t=zr();return Ns===null?t.memoizedState=s:p2(t,Ns.memoizedState,s)},useTransition:function(){var s=mh(pc)[0],t=zr().memoizedState;return[s,t]},useMutableSource:t2,useSyncExternalStore:s2,useId:f2,unstable_isNewReconciler:!1};function Hr(s,t){if(s&&s.defaultProps){t=cs({},t),s=s.defaultProps;for(var r in s)t[r]===void 0&&(t[r]=s[r]);return t}return t}function Sp(s,t,r,a){t=s.memoizedState,r=r(a,t),r=r==null?t:cs({},t,r),s.memoizedState=r,s.lanes===0&&(s.updateQueue.baseState=r)}var Gx={isMounted:function(s){return(s=s._reactInternals)?Ci(s)===s:!1},enqueueSetState:function(s,t,r){s=s._reactInternals;var a=nr(),i=wn(s),l=Ma(a,i);l.payload=t,r!=null&&(l.callback=r),t=jn(s,l,i),t!==null&&(ea(t,s,i,a),lu(t,s,i))},enqueueReplaceState:function(s,t,r){s=s._reactInternals;var a=nr(),i=wn(s),l=Ma(a,i);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=jn(s,l,i),t!==null&&(ea(t,s,i,a),lu(t,s,i))},enqueueForceUpdate:function(s,t){s=s._reactInternals;var r=nr(),a=wn(s),i=Ma(r,a);i.tag=2,t!=null&&(i.callback=t),t=jn(s,i,a),t!==null&&(ea(t,s,a,r),lu(t,s,a))}};function ev(s,t,r,a,i,l,o){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(a,l,o):t.prototype&&t.prototype.isPureReactComponent?!lc(r,a)||!lc(i,l):!0}function v2(s,t,r){var a=!1,i=_n,l=t.contextType;return typeof l=="object"&&l!==null?l=Vr(l):(i=hr(t)?pi:er.current,a=t.contextTypes,l=(a=a!=null)?Io(s,i):_n),t=new t(r,l),s.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Gx,s.stateNode=t,t._reactInternals=s,a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=l),t}function tv(s,t,r,a){s=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==s&&Gx.enqueueReplaceState(t,t.state,null)}function Cp(s,t,r,a){var i=s.stateNode;i.props=r,i.state=s.memoizedState,i.refs={},hf(s);var l=t.contextType;typeof l=="object"&&l!==null?i.context=Vr(l):(l=hr(t)?pi:er.current,i.context=Io(s,l)),i.state=s.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Sp(s,t,l,r),i.state=s.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Gx.enqueueReplaceState(i,i.state,null),Gu(s,r,i,a),i.state=s.memoizedState),typeof i.componentDidMount=="function"&&(s.flags|=4194308)}function Eo(s,t){try{var r="",a=t;do r+=YP(a),a=a.return;while(a);var i=r}catch(l){i=`
Error generating stack: `+l.message+`
`+l.stack}return{value:s,source:t,stack:i,digest:null}}function hh(s,t,r){return{value:s,source:null,stack:r??null,digest:t??null}}function Ep(s,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var wC=typeof WeakMap=="function"?WeakMap:Map;function j2(s,t,r){r=Ma(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){Ju||(Ju=!0,zp=a),Ep(s,t)},r}function N2(s,t,r){r=Ma(-1,r),r.tag=3;var a=s.type.getDerivedStateFromError;if(typeof a=="function"){var i=t.value;r.payload=function(){return a(i)},r.callback=function(){Ep(s,t)}}var l=s.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Ep(s,t),typeof a!="function"&&(Nn===null?Nn=new Set([this]):Nn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function sv(s,t,r){var a=s.pingCache;if(a===null){a=s.pingCache=new wC;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(r)||(i.add(r),s=LC.bind(null,s,t,r),t.then(s,s))}function rv(s){do{var t;if((t=s.tag===13)&&(t=s.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return s;s=s.return}while(s!==null);return null}function av(s,t,r,a,i){return s.mode&1?(s.flags|=65536,s.lanes=i,s):(s===t?s.flags|=65536:(s.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ma(-1,1),t.tag=2,jn(r,t,1))),r.lanes|=1),s)}var kC=Ka.ReactCurrentOwner,ur=!1;function sr(s,t,r,a){t.child=s===null?X5(t,null,r,a):So(t,s.child,r,a)}function nv(s,t,r,a,i){r=r.render;var l=t.ref;return yo(t,i),a=bf(s,t,r,a,l,i),r=vf(),s!==null&&!ur?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~i,Fa(s,t,i)):(rs&&r&&of(t),t.flags|=1,sr(s,t,a,i),t.child)}function iv(s,t,r,a,i){if(s===null){var l=r.type;return typeof l=="function"&&!Tf(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,w2(s,t,l,a,i)):(s=hu(r.type,null,a,t,t.mode,i),s.ref=t.ref,s.return=t,t.child=s)}if(l=s.child,!(s.lanes&i)){var o=l.memoizedProps;if(r=r.compare,r=r!==null?r:lc,r(o,a)&&s.ref===t.ref)return Fa(s,t,i)}return t.flags|=1,s=kn(l,a),s.ref=t.ref,s.return=t,t.child=s}function w2(s,t,r,a,i){if(s!==null){var l=s.memoizedProps;if(lc(l,a)&&s.ref===t.ref)if(ur=!1,t.pendingProps=a=l,(s.lanes&i)!==0)s.flags&131072&&(ur=!0);else return t.lanes=s.lanes,Fa(s,t,i)}return Tp(s,t,r,a,i)}function k2(s,t,r){var a=t.pendingProps,i=a.children,l=s!==null?s.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yt(no,vr),vr|=r;else{if(!(r&1073741824))return s=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:s,cachePool:null,transitions:null},t.updateQueue=null,Yt(no,vr),vr|=s,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=l!==null?l.baseLanes:r,Yt(no,vr),vr|=a}else l!==null?(a=l.baseLanes|r,t.memoizedState=null):a=r,Yt(no,vr),vr|=a;return sr(s,t,i,r),t.child}function I2(s,t){var r=t.ref;(s===null&&r!==null||s!==null&&s.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Tp(s,t,r,a,i){var l=hr(r)?pi:er.current;return l=Io(t,l),yo(t,i),r=bf(s,t,r,a,l,i),a=vf(),s!==null&&!ur?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~i,Fa(s,t,i)):(rs&&a&&of(t),t.flags|=1,sr(s,t,r,i),t.child)}function ov(s,t,r,a,i){if(hr(r)){var l=!0;Uu(t)}else l=!1;if(yo(t,i),t.stateNode===null)uu(s,t),v2(t,r,a),Cp(t,r,a,i),a=!0;else if(s===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var d=o.context,h=r.contextType;typeof h=="object"&&h!==null?h=Vr(h):(h=hr(r)?pi:er.current,h=Io(t,h));var g=r.getDerivedStateFromProps,N=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function";N||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==a||d!==h)&&tv(t,o,a,h),nn=!1;var k=t.memoizedState;o.state=k,Gu(t,a,o,i),d=t.memoizedState,c!==a||k!==d||mr.current||nn?(typeof g=="function"&&(Sp(t,r,g,a),d=t.memoizedState),(c=nn||ev(t,r,c,a,k,d,h))?(N||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=d),o.props=a,o.state=d,o.context=h,a=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,Z5(s,t),c=t.memoizedProps,h=t.type===t.elementType?c:Hr(t.type,c),o.props=h,N=t.pendingProps,k=o.context,d=r.contextType,typeof d=="object"&&d!==null?d=Vr(d):(d=hr(r)?pi:er.current,d=Io(t,d));var E=r.getDerivedStateFromProps;(g=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==N||k!==d)&&tv(t,o,a,d),nn=!1,k=t.memoizedState,o.state=k,Gu(t,a,o,i);var y=t.memoizedState;c!==N||k!==y||mr.current||nn?(typeof E=="function"&&(Sp(t,r,E,a),y=t.memoizedState),(h=nn||ev(t,r,h,a,k,y,d)||!1)?(g||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,y,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,y,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===s.memoizedProps&&k===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===s.memoizedProps&&k===s.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=y),o.props=a,o.state=y,o.context=d,a=h):(typeof o.componentDidUpdate!="function"||c===s.memoizedProps&&k===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===s.memoizedProps&&k===s.memoizedState||(t.flags|=1024),a=!1)}return _p(s,t,r,a,l,i)}function _p(s,t,r,a,i,l){I2(s,t);var o=(t.flags&128)!==0;if(!a&&!o)return i&&Hb(t,r,!1),Fa(s,t,l);a=t.stateNode,kC.current=t;var c=o&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,s!==null&&o?(t.child=So(t,s.child,null,l),t.child=So(t,null,c,l)):sr(s,t,c,l),t.memoizedState=a.state,i&&Hb(t,r,!0),t.child}function P2(s){var t=s.stateNode;t.pendingContext?qb(s,t.pendingContext,t.pendingContext!==t.context):t.context&&qb(s,t.context,!1),pf(s,t.containerInfo)}function lv(s,t,r,a,i){return Po(),cf(i),t.flags|=256,sr(s,t,r,a),t.child}var Dp={dehydrated:null,treeContext:null,retryLane:0};function Ap(s){return{baseLanes:s,cachePool:null,transitions:null}}function S2(s,t,r){var a=t.pendingProps,i=as.current,l=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=s!==null&&s.memoizedState===null?!1:(i&2)!==0),c?(l=!0,t.flags&=-129):(s===null||s.memoizedState!==null)&&(i|=1),Yt(as,i&1),s===null)return Ip(t),s=t.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(t.mode&1?s.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,s=a.fallback,l?(a=t.mode,l=t.child,o={mode:"hidden",children:o},!(a&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Yx(o,a,0,null),s=xi(s,a,r,null),l.return=t,s.return=t,l.sibling=s,t.child=l,t.child.memoizedState=Ap(r),t.memoizedState=Dp,s):wf(t,o));if(i=s.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return IC(s,t,o,a,c,i,r);if(l){l=a.fallback,o=t.mode,i=s.child,c=i.sibling;var d={mode:"hidden",children:a.children};return!(o&1)&&t.child!==i?(a=t.child,a.childLanes=0,a.pendingProps=d,t.deletions=null):(a=kn(i,d),a.subtreeFlags=i.subtreeFlags&14680064),c!==null?l=kn(c,l):(l=xi(l,o,r,null),l.flags|=2),l.return=t,a.return=t,a.sibling=l,t.child=a,a=l,l=t.child,o=s.child.memoizedState,o=o===null?Ap(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=s.childLanes&~r,t.memoizedState=Dp,a}return l=s.child,s=l.sibling,a=kn(l,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,s!==null&&(r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)),t.child=a,t.memoizedState=null,a}function wf(s,t){return t=Yx({mode:"visible",children:t},s.mode,0,null),t.return=s,s.child=t}function Bd(s,t,r,a){return a!==null&&cf(a),So(t,s.child,null,r),s=wf(t,t.pendingProps.children),s.flags|=2,t.memoizedState=null,s}function IC(s,t,r,a,i,l,o){if(r)return t.flags&256?(t.flags&=-257,a=hh(Error(Be(422))),Bd(s,t,o,a)):t.memoizedState!==null?(t.child=s.child,t.flags|=128,null):(l=a.fallback,i=t.mode,a=Yx({mode:"visible",children:a.children},i,0,null),l=xi(l,i,o,null),l.flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,t.mode&1&&So(t,s.child,null,o),t.child.memoizedState=Ap(o),t.memoizedState=Dp,l);if(!(t.mode&1))return Bd(s,t,o,null);if(i.data==="$!"){if(a=i.nextSibling&&i.nextSibling.dataset,a)var c=a.dgst;return a=c,l=Error(Be(419)),a=hh(l,a,void 0),Bd(s,t,o,a)}if(c=(o&s.childLanes)!==0,ur||c){if(a=Ts,a!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(a.suspendedLanes|o)?0:i,i!==0&&i!==l.retryLane&&(l.retryLane=i,Ba(s,i),ea(a,s,i,-1))}return Ef(),a=hh(Error(Be(421))),Bd(s,t,o,a)}return i.data==="$?"?(t.flags|=128,t.child=s.child,t=VC.bind(null,s),i._reactRetry=t,null):(s=l.treeContext,Nr=vn(i.nextSibling),kr=t,rs=!0,Qr=null,s!==null&&(Ar[Rr++]=_a,Ar[Rr++]=Da,Ar[Rr++]=fi,_a=s.id,Da=s.overflow,fi=t),t=wf(t,a.children),t.flags|=4096,t)}function cv(s,t,r){s.lanes|=t;var a=s.alternate;a!==null&&(a.lanes|=t),Pp(s.return,t,r)}function ph(s,t,r,a,i){var l=s.memoizedState;l===null?s.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:i}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=r,l.tailMode=i)}function C2(s,t,r){var a=t.pendingProps,i=a.revealOrder,l=a.tail;if(sr(s,t,a.children,r),a=as.current,a&2)a=a&1|2,t.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=t.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&cv(s,r,t);else if(s.tag===19)cv(s,r,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}a&=1}if(Yt(as,a),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)s=r.alternate,s!==null&&Qu(s)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),ph(t,!1,i,r,l);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(s=i.alternate,s!==null&&Qu(s)===null){t.child=i;break}s=i.sibling,i.sibling=r,r=i,i=s}ph(t,!0,r,null,l);break;case"together":ph(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function uu(s,t){!(t.mode&1)&&s!==null&&(s.alternate=null,t.alternate=null,t.flags|=2)}function Fa(s,t,r){if(s!==null&&(t.dependencies=s.dependencies),yi|=t.lanes,!(r&t.childLanes))return null;if(s!==null&&t.child!==s.child)throw Error(Be(153));if(t.child!==null){for(s=t.child,r=kn(s,s.pendingProps),t.child=r,r.return=t;s.sibling!==null;)s=s.sibling,r=r.sibling=kn(s,s.pendingProps),r.return=t;r.sibling=null}return t.child}function PC(s,t,r){switch(t.tag){case 3:P2(t),Po();break;case 5:e2(t);break;case 1:hr(t.type)&&Uu(t);break;case 4:pf(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,i=t.memoizedProps.value;Yt(qu,a._currentValue),a._currentValue=i;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Yt(as,as.current&1),t.flags|=128,null):r&t.child.childLanes?S2(s,t,r):(Yt(as,as.current&1),s=Fa(s,t,r),s!==null?s.sibling:null);Yt(as,as.current&1);break;case 19:if(a=(r&t.childLanes)!==0,s.flags&128){if(a)return C2(s,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Yt(as,as.current),a)break;return null;case 22:case 23:return t.lanes=0,k2(s,t,r)}return Fa(s,t,r)}var E2,Rp,T2,_2;E2=function(s,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Rp=function(){};T2=function(s,t,r,a){var i=s.memoizedProps;if(i!==a){s=t.stateNode,ii(ua.current);var l=null;switch(r){case"input":i=sp(s,i),a=sp(s,a),l=[];break;case"select":i=cs({},i,{value:void 0}),a=cs({},a,{value:void 0}),l=[];break;case"textarea":i=np(s,i),a=np(s,a),l=[];break;default:typeof i.onClick!="function"&&typeof a.onClick=="function"&&(s.onclick=Bu)}op(r,a);var o;r=null;for(h in i)if(!a.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var c=i[h];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(tc.hasOwnProperty(h)?l||(l=[]):(l=l||[]).push(h,null));for(h in a){var d=a[h];if(c=i!=null?i[h]:void 0,a.hasOwnProperty(h)&&d!==c&&(d!=null||c!=null))if(h==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(r||(r={}),r[o]=d[o])}else r||(l||(l=[]),l.push(h,r)),r=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(l=l||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(l=l||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(tc.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&ts("scroll",s),l||c===d||(l=[])):(l=l||[]).push(h,d))}r&&(l=l||[]).push("style",r);var h=l;(t.updateQueue=h)&&(t.flags|=4)}};_2=function(s,t,r,a){r!==a&&(t.flags|=4)};function gl(s,t){if(!rs)switch(s.tailMode){case"hidden":t=s.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?s.tail=null:r.sibling=null;break;case"collapsed":r=s.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||s.tail===null?s.tail=null:s.tail.sibling=null:a.sibling=null}}function Qs(s){var t=s.alternate!==null&&s.alternate.child===s.child,r=0,a=0;if(t)for(var i=s.child;i!==null;)r|=i.lanes|i.childLanes,a|=i.subtreeFlags&14680064,a|=i.flags&14680064,i.return=s,i=i.sibling;else for(i=s.child;i!==null;)r|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=s,i=i.sibling;return s.subtreeFlags|=a,s.childLanes=r,t}function SC(s,t,r){var a=t.pendingProps;switch(lf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qs(t),null;case 1:return hr(t.type)&&Fu(),Qs(t),null;case 3:return a=t.stateNode,Co(),ss(mr),ss(er),gf(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(Vd(t)?t.flags|=4:s===null||s.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qr!==null&&(Up(Qr),Qr=null))),Rp(s,t),Qs(t),null;case 5:ff(t);var i=ii(mc.current);if(r=t.type,s!==null&&t.stateNode!=null)T2(s,t,r,a,i),s.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Be(166));return Qs(t),null}if(s=ii(ua.current),Vd(t)){a=t.stateNode,r=t.type;var l=t.memoizedProps;switch(a[ca]=t,a[uc]=l,s=(t.mode&1)!==0,r){case"dialog":ts("cancel",a),ts("close",a);break;case"iframe":case"object":case"embed":ts("load",a);break;case"video":case"audio":for(i=0;i<Il.length;i++)ts(Il[i],a);break;case"source":ts("error",a);break;case"img":case"image":case"link":ts("error",a),ts("load",a);break;case"details":ts("toggle",a);break;case"input":yb(a,l),ts("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},ts("invalid",a);break;case"textarea":vb(a,l),ts("invalid",a)}op(r,l),i=null;for(var o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="children"?typeof c=="string"?a.textContent!==c&&(l.suppressHydrationWarning!==!0&&Ld(a.textContent,c,s),i=["children",c]):typeof c=="number"&&a.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&Ld(a.textContent,c,s),i=["children",""+c]):tc.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&ts("scroll",a)}switch(r){case"input":Ed(a),bb(a,l,!0);break;case"textarea":Ed(a),jb(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(a.onclick=Bu)}a=i,t.updateQueue=a,a!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=n5(r)),s==="http://www.w3.org/1999/xhtml"?r==="script"?(s=o.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof a.is=="string"?s=o.createElement(r,{is:a.is}):(s=o.createElement(r),r==="select"&&(o=s,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):s=o.createElementNS(s,r),s[ca]=t,s[uc]=a,E2(s,t,!1,!1),t.stateNode=s;e:{switch(o=lp(r,a),r){case"dialog":ts("cancel",s),ts("close",s),i=a;break;case"iframe":case"object":case"embed":ts("load",s),i=a;break;case"video":case"audio":for(i=0;i<Il.length;i++)ts(Il[i],s);i=a;break;case"source":ts("error",s),i=a;break;case"img":case"image":case"link":ts("error",s),ts("load",s),i=a;break;case"details":ts("toggle",s),i=a;break;case"input":yb(s,a),i=sp(s,a),ts("invalid",s);break;case"option":i=a;break;case"select":s._wrapperState={wasMultiple:!!a.multiple},i=cs({},a,{value:void 0}),ts("invalid",s);break;case"textarea":vb(s,a),i=np(s,a),ts("invalid",s);break;default:i=a}op(r,i),c=i;for(l in c)if(c.hasOwnProperty(l)){var d=c[l];l==="style"?l5(s,d):l==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&i5(s,d)):l==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&sc(s,d):typeof d=="number"&&sc(s,""+d):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(tc.hasOwnProperty(l)?d!=null&&l==="onScroll"&&ts("scroll",s):d!=null&&H0(s,l,d,o))}switch(r){case"input":Ed(s),bb(s,a,!1);break;case"textarea":Ed(s),jb(s);break;case"option":a.value!=null&&s.setAttribute("value",""+Tn(a.value));break;case"select":s.multiple=!!a.multiple,l=a.value,l!=null?ho(s,!!a.multiple,l,!1):a.defaultValue!=null&&ho(s,!!a.multiple,a.defaultValue,!0);break;default:typeof i.onClick=="function"&&(s.onclick=Bu)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qs(t),null;case 6:if(s&&t.stateNode!=null)_2(s,t,s.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Be(166));if(r=ii(mc.current),ii(ua.current),Vd(t)){if(a=t.stateNode,r=t.memoizedProps,a[ca]=t,(l=a.nodeValue!==r)&&(s=kr,s!==null))switch(s.tag){case 3:Ld(a.nodeValue,r,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Ld(a.nodeValue,r,(s.mode&1)!==0)}l&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[ca]=t,t.stateNode=a}return Qs(t),null;case 13:if(ss(as),a=t.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(rs&&Nr!==null&&t.mode&1&&!(t.flags&128))K5(),Po(),t.flags|=98560,l=!1;else if(l=Vd(t),a!==null&&a.dehydrated!==null){if(s===null){if(!l)throw Error(Be(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Be(317));l[ca]=t}else Po(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qs(t),l=!1}else Qr!==null&&(Up(Qr),Qr=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(s!==null&&s.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(s===null||as.current&1?ws===0&&(ws=3):Ef())),t.updateQueue!==null&&(t.flags|=4),Qs(t),null);case 4:return Co(),Rp(s,t),s===null&&cc(t.stateNode.containerInfo),Qs(t),null;case 10:return xf(t.type._context),Qs(t),null;case 17:return hr(t.type)&&Fu(),Qs(t),null;case 19:if(ss(as),l=t.memoizedState,l===null)return Qs(t),null;if(a=(t.flags&128)!==0,o=l.rendering,o===null)if(a)gl(l,!1);else{if(ws!==0||s!==null&&s.flags&128)for(s=t.child;s!==null;){if(o=Qu(s),o!==null){for(t.flags|=128,gl(l,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)l=r,s=a,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=s,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r=r.sibling;return Yt(as,as.current&1|2),t.child}s=s.sibling}l.tail!==null&&ys()>To&&(t.flags|=128,a=!0,gl(l,!1),t.lanes=4194304)}else{if(!a)if(s=Qu(o),s!==null){if(t.flags|=128,a=!0,r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),gl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!rs)return Qs(t),null}else 2*ys()-l.renderingStartTime>To&&r!==1073741824&&(t.flags|=128,a=!0,gl(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(r=l.last,r!==null?r.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=ys(),t.sibling=null,r=as.current,Yt(as,a?r&1|2:r&1),t):(Qs(t),null);case 22:case 23:return Cf(),a=t.memoizedState!==null,s!==null&&s.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?vr&1073741824&&(Qs(t),t.subtreeFlags&6&&(t.flags|=8192)):Qs(t),null;case 24:return null;case 25:return null}throw Error(Be(156,t.tag))}function CC(s,t){switch(lf(t),t.tag){case 1:return hr(t.type)&&Fu(),s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 3:return Co(),ss(mr),ss(er),gf(),s=t.flags,s&65536&&!(s&128)?(t.flags=s&-65537|128,t):null;case 5:return ff(t),null;case 13:if(ss(as),s=t.memoizedState,s!==null&&s.dehydrated!==null){if(t.alternate===null)throw Error(Be(340));Po()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 19:return ss(as),null;case 4:return Co(),null;case 10:return xf(t.type._context),null;case 22:case 23:return Cf(),null;case 24:return null;default:return null}}var Fd=!1,Js=!1,EC=typeof WeakSet=="function"?WeakSet:Set,tt=null;function ao(s,t){var r=s.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){hs(s,t,a)}else r.current=null}function Mp(s,t,r){try{r()}catch(a){hs(s,t,a)}}var dv=!1;function TC(s,t){if(yp=Lu,s=O5(),nf(s)){if("selectionStart"in s)var r={start:s.selectionStart,end:s.selectionEnd};else e:{r=(r=s.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var i=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var o=0,c=-1,d=-1,h=0,g=0,N=s,k=null;t:for(;;){for(var E;N!==r||i!==0&&N.nodeType!==3||(c=o+i),N!==l||a!==0&&N.nodeType!==3||(d=o+a),N.nodeType===3&&(o+=N.nodeValue.length),(E=N.firstChild)!==null;)k=N,N=E;for(;;){if(N===s)break t;if(k===r&&++h===i&&(c=o),k===l&&++g===a&&(d=o),(E=N.nextSibling)!==null)break;N=k,k=N.parentNode}N=E}r=c===-1||d===-1?null:{start:c,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(bp={focusedElem:s,selectionRange:r},Lu=!1,tt=t;tt!==null;)if(t=tt,s=t.child,(t.subtreeFlags&1028)!==0&&s!==null)s.return=t,tt=s;else for(;tt!==null;){t=tt;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var L=y.memoizedProps,_=y.memoizedState,A=t.stateNode,z=A.getSnapshotBeforeUpdate(t.elementType===t.type?L:Hr(t.type,L),_);A.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var O=t.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Be(163))}}catch(K){hs(t,t.return,K)}if(s=t.sibling,s!==null){s.return=t.return,tt=s;break}tt=t.return}return y=dv,dv=!1,y}function zl(s,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var i=a=a.next;do{if((i.tag&s)===s){var l=i.destroy;i.destroy=void 0,l!==void 0&&Mp(t,r,l)}i=i.next}while(i!==a)}}function Qx(s,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&s)===s){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Op(s){var t=s.ref;if(t!==null){var r=s.stateNode;switch(s.tag){case 5:s=r;break;default:s=r}typeof t=="function"?t(s):t.current=s}}function D2(s){var t=s.alternate;t!==null&&(s.alternate=null,D2(t)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(t=s.stateNode,t!==null&&(delete t[ca],delete t[uc],delete t[Np],delete t[xC],delete t[mC])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function A2(s){return s.tag===5||s.tag===3||s.tag===4}function uv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||A2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Lp(s,t,r){var a=s.tag;if(a===5||a===6)s=s.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(s,t):r.insertBefore(s,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(s,r)):(t=r,t.appendChild(s)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Bu));else if(a!==4&&(s=s.child,s!==null))for(Lp(s,t,r),s=s.sibling;s!==null;)Lp(s,t,r),s=s.sibling}function Vp(s,t,r){var a=s.tag;if(a===5||a===6)s=s.stateNode,t?r.insertBefore(s,t):r.appendChild(s);else if(a!==4&&(s=s.child,s!==null))for(Vp(s,t,r),s=s.sibling;s!==null;)Vp(s,t,r),s=s.sibling}var As=null,Gr=!1;function tn(s,t,r){for(r=r.child;r!==null;)R2(s,t,r),r=r.sibling}function R2(s,t,r){if(da&&typeof da.onCommitFiberUnmount=="function")try{da.onCommitFiberUnmount(Bx,r)}catch{}switch(r.tag){case 5:Js||ao(r,t);case 6:var a=As,i=Gr;As=null,tn(s,t,r),As=a,Gr=i,As!==null&&(Gr?(s=As,r=r.stateNode,s.nodeType===8?s.parentNode.removeChild(r):s.removeChild(r)):As.removeChild(r.stateNode));break;case 18:As!==null&&(Gr?(s=As,r=r.stateNode,s.nodeType===8?lh(s.parentNode,r):s.nodeType===1&&lh(s,r),ic(s)):lh(As,r.stateNode));break;case 4:a=As,i=Gr,As=r.stateNode.containerInfo,Gr=!0,tn(s,t,r),As=a,Gr=i;break;case 0:case 11:case 14:case 15:if(!Js&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){i=a=a.next;do{var l=i,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&Mp(r,t,o),i=i.next}while(i!==a)}tn(s,t,r);break;case 1:if(!Js&&(ao(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(c){hs(r,t,c)}tn(s,t,r);break;case 21:tn(s,t,r);break;case 22:r.mode&1?(Js=(a=Js)||r.memoizedState!==null,tn(s,t,r),Js=a):tn(s,t,r);break;default:tn(s,t,r)}}function xv(s){var t=s.updateQueue;if(t!==null){s.updateQueue=null;var r=s.stateNode;r===null&&(r=s.stateNode=new EC),t.forEach(function(a){var i=zC.bind(null,s,a);r.has(a)||(r.add(a),a.then(i,i))})}}function Wr(s,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var i=r[a];try{var l=s,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:As=c.stateNode,Gr=!1;break e;case 3:As=c.stateNode.containerInfo,Gr=!0;break e;case 4:As=c.stateNode.containerInfo,Gr=!0;break e}c=c.return}if(As===null)throw Error(Be(160));R2(l,o,i),As=null,Gr=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(h){hs(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)M2(t,s),t=t.sibling}function M2(s,t){var r=s.alternate,a=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Wr(t,s),ia(s),a&4){try{zl(3,s,s.return),Qx(3,s)}catch(L){hs(s,s.return,L)}try{zl(5,s,s.return)}catch(L){hs(s,s.return,L)}}break;case 1:Wr(t,s),ia(s),a&512&&r!==null&&ao(r,r.return);break;case 5:if(Wr(t,s),ia(s),a&512&&r!==null&&ao(r,r.return),s.flags&32){var i=s.stateNode;try{sc(i,"")}catch(L){hs(s,s.return,L)}}if(a&4&&(i=s.stateNode,i!=null)){var l=s.memoizedProps,o=r!==null?r.memoizedProps:l,c=s.type,d=s.updateQueue;if(s.updateQueue=null,d!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&r5(i,l),lp(c,o);var h=lp(c,l);for(o=0;o<d.length;o+=2){var g=d[o],N=d[o+1];g==="style"?l5(i,N):g==="dangerouslySetInnerHTML"?i5(i,N):g==="children"?sc(i,N):H0(i,g,N,h)}switch(c){case"input":rp(i,l);break;case"textarea":a5(i,l);break;case"select":var k=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!l.multiple;var E=l.value;E!=null?ho(i,!!l.multiple,E,!1):k!==!!l.multiple&&(l.defaultValue!=null?ho(i,!!l.multiple,l.defaultValue,!0):ho(i,!!l.multiple,l.multiple?[]:"",!1))}i[uc]=l}catch(L){hs(s,s.return,L)}}break;case 6:if(Wr(t,s),ia(s),a&4){if(s.stateNode===null)throw Error(Be(162));i=s.stateNode,l=s.memoizedProps;try{i.nodeValue=l}catch(L){hs(s,s.return,L)}}break;case 3:if(Wr(t,s),ia(s),a&4&&r!==null&&r.memoizedState.isDehydrated)try{ic(t.containerInfo)}catch(L){hs(s,s.return,L)}break;case 4:Wr(t,s),ia(s);break;case 13:Wr(t,s),ia(s),i=s.child,i.flags&8192&&(l=i.memoizedState!==null,i.stateNode.isHidden=l,!l||i.alternate!==null&&i.alternate.memoizedState!==null||(Pf=ys())),a&4&&xv(s);break;case 22:if(g=r!==null&&r.memoizedState!==null,s.mode&1?(Js=(h=Js)||g,Wr(t,s),Js=h):Wr(t,s),ia(s),a&8192){if(h=s.memoizedState!==null,(s.stateNode.isHidden=h)&&!g&&s.mode&1)for(tt=s,g=s.child;g!==null;){for(N=tt=g;tt!==null;){switch(k=tt,E=k.child,k.tag){case 0:case 11:case 14:case 15:zl(4,k,k.return);break;case 1:ao(k,k.return);var y=k.stateNode;if(typeof y.componentWillUnmount=="function"){a=k,r=k.return;try{t=a,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(L){hs(a,r,L)}}break;case 5:ao(k,k.return);break;case 22:if(k.memoizedState!==null){hv(N);continue}}E!==null?(E.return=k,tt=E):hv(N)}g=g.sibling}e:for(g=null,N=s;;){if(N.tag===5){if(g===null){g=N;try{i=N.stateNode,h?(l=i.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=N.stateNode,d=N.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=o5("display",o))}catch(L){hs(s,s.return,L)}}}else if(N.tag===6){if(g===null)try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(L){hs(s,s.return,L)}}else if((N.tag!==22&&N.tag!==23||N.memoizedState===null||N===s)&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===s)break e;for(;N.sibling===null;){if(N.return===null||N.return===s)break e;g===N&&(g=null),N=N.return}g===N&&(g=null),N.sibling.return=N.return,N=N.sibling}}break;case 19:Wr(t,s),ia(s),a&4&&xv(s);break;case 21:break;default:Wr(t,s),ia(s)}}function ia(s){var t=s.flags;if(t&2){try{e:{for(var r=s.return;r!==null;){if(A2(r)){var a=r;break e}r=r.return}throw Error(Be(160))}switch(a.tag){case 5:var i=a.stateNode;a.flags&32&&(sc(i,""),a.flags&=-33);var l=uv(s);Vp(s,l,i);break;case 3:case 4:var o=a.stateNode.containerInfo,c=uv(s);Lp(s,c,o);break;default:throw Error(Be(161))}}catch(d){hs(s,s.return,d)}s.flags&=-3}t&4096&&(s.flags&=-4097)}function _C(s,t,r){tt=s,O2(s)}function O2(s,t,r){for(var a=(s.mode&1)!==0;tt!==null;){var i=tt,l=i.child;if(i.tag===22&&a){var o=i.memoizedState!==null||Fd;if(!o){var c=i.alternate,d=c!==null&&c.memoizedState!==null||Js;c=Fd;var h=Js;if(Fd=o,(Js=d)&&!h)for(tt=i;tt!==null;)o=tt,d=o.child,o.tag===22&&o.memoizedState!==null?pv(i):d!==null?(d.return=o,tt=d):pv(i);for(;l!==null;)tt=l,O2(l),l=l.sibling;tt=i,Fd=c,Js=h}mv(s)}else i.subtreeFlags&8772&&l!==null?(l.return=i,tt=l):mv(s)}}function mv(s){for(;tt!==null;){var t=tt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Js||Qx(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Js)if(r===null)a.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Hr(t.type,r.memoizedProps);a.componentDidUpdate(i,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Xb(t,l,a);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Xb(t,o,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var g=h.memoizedState;if(g!==null){var N=g.dehydrated;N!==null&&ic(N)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Be(163))}Js||t.flags&512&&Op(t)}catch(k){hs(t,t.return,k)}}if(t===s){tt=null;break}if(r=t.sibling,r!==null){r.return=t.return,tt=r;break}tt=t.return}}function hv(s){for(;tt!==null;){var t=tt;if(t===s){tt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,tt=r;break}tt=t.return}}function pv(s){for(;tt!==null;){var t=tt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Qx(4,t)}catch(d){hs(t,r,d)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var i=t.return;try{a.componentDidMount()}catch(d){hs(t,i,d)}}var l=t.return;try{Op(t)}catch(d){hs(t,l,d)}break;case 5:var o=t.return;try{Op(t)}catch(d){hs(t,o,d)}}}catch(d){hs(t,t.return,d)}if(t===s){tt=null;break}var c=t.sibling;if(c!==null){c.return=t.return,tt=c;break}tt=t.return}}var DC=Math.ceil,Xu=Ka.ReactCurrentDispatcher,kf=Ka.ReactCurrentOwner,Or=Ka.ReactCurrentBatchConfig,Lt=0,Ts=null,vs=null,Vs=0,vr=0,no=Un(0),ws=0,gc=null,yi=0,Kx=0,If=0,Bl=null,dr=null,Pf=0,To=1/0,Ea=null,Ju=!1,zp=null,Nn=null,Ud=!1,hn=null,Zu=0,Fl=0,Bp=null,xu=-1,mu=0;function nr(){return Lt&6?ys():xu!==-1?xu:xu=ys()}function wn(s){return s.mode&1?Lt&2&&Vs!==0?Vs&-Vs:pC.transition!==null?(mu===0&&(mu=v5()),mu):(s=Ut,s!==0||(s=window.event,s=s===void 0?16:S5(s.type)),s):1}function ea(s,t,r,a){if(50<Fl)throw Fl=0,Bp=null,Error(Be(185));Fc(s,r,a),(!(Lt&2)||s!==Ts)&&(s===Ts&&(!(Lt&2)&&(Kx|=r),ws===4&&ln(s,Vs)),pr(s,a),r===1&&Lt===0&&!(t.mode&1)&&(To=ys()+500,qx&&$n()))}function pr(s,t){var r=s.callbackNode;pS(s,t);var a=Ou(s,s===Ts?Vs:0);if(a===0)r!==null&&kb(r),s.callbackNode=null,s.callbackPriority=0;else if(t=a&-a,s.callbackPriority!==t){if(r!=null&&kb(r),t===1)s.tag===0?hC(fv.bind(null,s)):H5(fv.bind(null,s)),dC(function(){!(Lt&6)&&$n()}),r=null;else{switch(j5(a)){case 1:r=X0;break;case 4:r=y5;break;case 16:r=Mu;break;case 536870912:r=b5;break;default:r=Mu}r=W2(r,L2.bind(null,s))}s.callbackPriority=t,s.callbackNode=r}}function L2(s,t){if(xu=-1,mu=0,Lt&6)throw Error(Be(327));var r=s.callbackNode;if(bo()&&s.callbackNode!==r)return null;var a=Ou(s,s===Ts?Vs:0);if(a===0)return null;if(a&30||a&s.expiredLanes||t)t=ex(s,a);else{t=a;var i=Lt;Lt|=2;var l=z2();(Ts!==s||Vs!==t)&&(Ea=null,To=ys()+500,ui(s,t));do try{MC();break}catch(c){V2(s,c)}while(1);uf(),Xu.current=l,Lt=i,vs!==null?t=0:(Ts=null,Vs=0,t=ws)}if(t!==0){if(t===2&&(i=mp(s),i!==0&&(a=i,t=Fp(s,i))),t===1)throw r=gc,ui(s,0),ln(s,a),pr(s,ys()),r;if(t===6)ln(s,a);else{if(i=s.current.alternate,!(a&30)&&!AC(i)&&(t=ex(s,a),t===2&&(l=mp(s),l!==0&&(a=l,t=Fp(s,l))),t===1))throw r=gc,ui(s,0),ln(s,a),pr(s,ys()),r;switch(s.finishedWork=i,s.finishedLanes=a,t){case 0:case 1:throw Error(Be(345));case 2:ti(s,dr,Ea);break;case 3:if(ln(s,a),(a&130023424)===a&&(t=Pf+500-ys(),10<t)){if(Ou(s,0)!==0)break;if(i=s.suspendedLanes,(i&a)!==a){nr(),s.pingedLanes|=s.suspendedLanes&i;break}s.timeoutHandle=jp(ti.bind(null,s,dr,Ea),t);break}ti(s,dr,Ea);break;case 4:if(ln(s,a),(a&4194240)===a)break;for(t=s.eventTimes,i=-1;0<a;){var o=31-Zr(a);l=1<<o,o=t[o],o>i&&(i=o),a&=~l}if(a=i,a=ys()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*DC(a/1960))-a,10<a){s.timeoutHandle=jp(ti.bind(null,s,dr,Ea),a);break}ti(s,dr,Ea);break;case 5:ti(s,dr,Ea);break;default:throw Error(Be(329))}}}return pr(s,ys()),s.callbackNode===r?L2.bind(null,s):null}function Fp(s,t){var r=Bl;return s.current.memoizedState.isDehydrated&&(ui(s,t).flags|=256),s=ex(s,t),s!==2&&(t=dr,dr=r,t!==null&&Up(t)),s}function Up(s){dr===null?dr=s:dr.push.apply(dr,s)}function AC(s){for(var t=s;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var i=r[a],l=i.getSnapshot;i=i.value;try{if(!ta(l(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ln(s,t){for(t&=~If,t&=~Kx,s.suspendedLanes|=t,s.pingedLanes&=~t,s=s.expirationTimes;0<t;){var r=31-Zr(t),a=1<<r;s[r]=-1,t&=~a}}function fv(s){if(Lt&6)throw Error(Be(327));bo();var t=Ou(s,0);if(!(t&1))return pr(s,ys()),null;var r=ex(s,t);if(s.tag!==0&&r===2){var a=mp(s);a!==0&&(t=a,r=Fp(s,a))}if(r===1)throw r=gc,ui(s,0),ln(s,t),pr(s,ys()),r;if(r===6)throw Error(Be(345));return s.finishedWork=s.current.alternate,s.finishedLanes=t,ti(s,dr,Ea),pr(s,ys()),null}function Sf(s,t){var r=Lt;Lt|=1;try{return s(t)}finally{Lt=r,Lt===0&&(To=ys()+500,qx&&$n())}}function bi(s){hn!==null&&hn.tag===0&&!(Lt&6)&&bo();var t=Lt;Lt|=1;var r=Or.transition,a=Ut;try{if(Or.transition=null,Ut=1,s)return s()}finally{Ut=a,Or.transition=r,Lt=t,!(Lt&6)&&$n()}}function Cf(){vr=no.current,ss(no)}function ui(s,t){s.finishedWork=null,s.finishedLanes=0;var r=s.timeoutHandle;if(r!==-1&&(s.timeoutHandle=-1,cC(r)),vs!==null)for(r=vs.return;r!==null;){var a=r;switch(lf(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Fu();break;case 3:Co(),ss(mr),ss(er),gf();break;case 5:ff(a);break;case 4:Co();break;case 13:ss(as);break;case 19:ss(as);break;case 10:xf(a.type._context);break;case 22:case 23:Cf()}r=r.return}if(Ts=s,vs=s=kn(s.current,null),Vs=vr=t,ws=0,gc=null,If=Kx=yi=0,dr=Bl=null,ni!==null){for(t=0;t<ni.length;t++)if(r=ni[t],a=r.interleaved,a!==null){r.interleaved=null;var i=a.next,l=r.pending;if(l!==null){var o=l.next;l.next=i,a.next=o}r.pending=a}ni=null}return s}function V2(s,t){do{var r=vs;try{if(uf(),cu.current=Yu,Ku){for(var a=is.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}Ku=!1}if(gi=0,Ss=Ns=is=null,Vl=!1,hc=0,kf.current=null,r===null||r.return===null){ws=1,gc=t,vs=null;break}e:{var l=s,o=r.return,c=r,d=t;if(t=Vs,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,g=c,N=g.tag;if(!(g.mode&1)&&(N===0||N===11||N===15)){var k=g.alternate;k?(g.updateQueue=k.updateQueue,g.memoizedState=k.memoizedState,g.lanes=k.lanes):(g.updateQueue=null,g.memoizedState=null)}var E=rv(o);if(E!==null){E.flags&=-257,av(E,o,c,l,t),E.mode&1&&sv(l,h,t),t=E,d=h;var y=t.updateQueue;if(y===null){var L=new Set;L.add(d),t.updateQueue=L}else y.add(d);break e}else{if(!(t&1)){sv(l,h,t),Ef();break e}d=Error(Be(426))}}else if(rs&&c.mode&1){var _=rv(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),av(_,o,c,l,t),cf(Eo(d,c));break e}}l=d=Eo(d,c),ws!==4&&(ws=2),Bl===null?Bl=[l]:Bl.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var A=j2(l,d,t);Yb(l,A);break e;case 1:c=d;var z=l.type,O=l.stateNode;if(!(l.flags&128)&&(typeof z.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Nn===null||!Nn.has(O)))){l.flags|=65536,t&=-t,l.lanes|=t;var K=N2(l,c,t);Yb(l,K);break e}}l=l.return}while(l!==null)}F2(r)}catch(G){t=G,vs===r&&r!==null&&(vs=r=r.return);continue}break}while(1)}function z2(){var s=Xu.current;return Xu.current=Yu,s===null?Yu:s}function Ef(){(ws===0||ws===3||ws===2)&&(ws=4),Ts===null||!(yi&268435455)&&!(Kx&268435455)||ln(Ts,Vs)}function ex(s,t){var r=Lt;Lt|=2;var a=z2();(Ts!==s||Vs!==t)&&(Ea=null,ui(s,t));do try{RC();break}catch(i){V2(s,i)}while(1);if(uf(),Lt=r,Xu.current=a,vs!==null)throw Error(Be(261));return Ts=null,Vs=0,ws}function RC(){for(;vs!==null;)B2(vs)}function MC(){for(;vs!==null&&!iS();)B2(vs)}function B2(s){var t=$2(s.alternate,s,vr);s.memoizedProps=s.pendingProps,t===null?F2(s):vs=t,kf.current=null}function F2(s){var t=s;do{var r=t.alternate;if(s=t.return,t.flags&32768){if(r=CC(r,t),r!==null){r.flags&=32767,vs=r;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{ws=6,vs=null;return}}else if(r=SC(r,t,vr),r!==null){vs=r;return}if(t=t.sibling,t!==null){vs=t;return}vs=t=s}while(t!==null);ws===0&&(ws=5)}function ti(s,t,r){var a=Ut,i=Or.transition;try{Or.transition=null,Ut=1,OC(s,t,r,a)}finally{Or.transition=i,Ut=a}return null}function OC(s,t,r,a){do bo();while(hn!==null);if(Lt&6)throw Error(Be(327));r=s.finishedWork;var i=s.finishedLanes;if(r===null)return null;if(s.finishedWork=null,s.finishedLanes=0,r===s.current)throw Error(Be(177));s.callbackNode=null,s.callbackPriority=0;var l=r.lanes|r.childLanes;if(fS(s,l),s===Ts&&(vs=Ts=null,Vs=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ud||(Ud=!0,W2(Mu,function(){return bo(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=Or.transition,Or.transition=null;var o=Ut;Ut=1;var c=Lt;Lt|=4,kf.current=null,TC(s,r),M2(r,s),sC(bp),Lu=!!yp,bp=yp=null,s.current=r,_C(r),oS(),Lt=c,Ut=o,Or.transition=l}else s.current=r;if(Ud&&(Ud=!1,hn=s,Zu=i),l=s.pendingLanes,l===0&&(Nn=null),dS(r.stateNode),pr(s,ys()),t!==null)for(a=s.onRecoverableError,r=0;r<t.length;r++)i=t[r],a(i.value,{componentStack:i.stack,digest:i.digest});if(Ju)throw Ju=!1,s=zp,zp=null,s;return Zu&1&&s.tag!==0&&bo(),l=s.pendingLanes,l&1?s===Bp?Fl++:(Fl=0,Bp=s):Fl=0,$n(),null}function bo(){if(hn!==null){var s=j5(Zu),t=Or.transition,r=Ut;try{if(Or.transition=null,Ut=16>s?16:s,hn===null)var a=!1;else{if(s=hn,hn=null,Zu=0,Lt&6)throw Error(Be(331));var i=Lt;for(Lt|=4,tt=s.current;tt!==null;){var l=tt,o=l.child;if(tt.flags&16){var c=l.deletions;if(c!==null){for(var d=0;d<c.length;d++){var h=c[d];for(tt=h;tt!==null;){var g=tt;switch(g.tag){case 0:case 11:case 15:zl(8,g,l)}var N=g.child;if(N!==null)N.return=g,tt=N;else for(;tt!==null;){g=tt;var k=g.sibling,E=g.return;if(D2(g),g===h){tt=null;break}if(k!==null){k.return=E,tt=k;break}tt=E}}}var y=l.alternate;if(y!==null){var L=y.child;if(L!==null){y.child=null;do{var _=L.sibling;L.sibling=null,L=_}while(L!==null)}}tt=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,tt=o;else e:for(;tt!==null;){if(l=tt,l.flags&2048)switch(l.tag){case 0:case 11:case 15:zl(9,l,l.return)}var A=l.sibling;if(A!==null){A.return=l.return,tt=A;break e}tt=l.return}}var z=s.current;for(tt=z;tt!==null;){o=tt;var O=o.child;if(o.subtreeFlags&2064&&O!==null)O.return=o,tt=O;else e:for(o=z;tt!==null;){if(c=tt,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Qx(9,c)}}catch(G){hs(c,c.return,G)}if(c===o){tt=null;break e}var K=c.sibling;if(K!==null){K.return=c.return,tt=K;break e}tt=c.return}}if(Lt=i,$n(),da&&typeof da.onPostCommitFiberRoot=="function")try{da.onPostCommitFiberRoot(Bx,s)}catch{}a=!0}return a}finally{Ut=r,Or.transition=t}}return!1}function gv(s,t,r){t=Eo(r,t),t=j2(s,t,1),s=jn(s,t,1),t=nr(),s!==null&&(Fc(s,1,t),pr(s,t))}function hs(s,t,r){if(s.tag===3)gv(s,s,r);else for(;t!==null;){if(t.tag===3){gv(t,s,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Nn===null||!Nn.has(a))){s=Eo(r,s),s=N2(t,s,1),t=jn(t,s,1),s=nr(),t!==null&&(Fc(t,1,s),pr(t,s));break}}t=t.return}}function LC(s,t,r){var a=s.pingCache;a!==null&&a.delete(t),t=nr(),s.pingedLanes|=s.suspendedLanes&r,Ts===s&&(Vs&r)===r&&(ws===4||ws===3&&(Vs&130023424)===Vs&&500>ys()-Pf?ui(s,0):If|=r),pr(s,t)}function U2(s,t){t===0&&(s.mode&1?(t=Dd,Dd<<=1,!(Dd&130023424)&&(Dd=4194304)):t=1);var r=nr();s=Ba(s,t),s!==null&&(Fc(s,t,r),pr(s,r))}function VC(s){var t=s.memoizedState,r=0;t!==null&&(r=t.retryLane),U2(s,r)}function zC(s,t){var r=0;switch(s.tag){case 13:var a=s.stateNode,i=s.memoizedState;i!==null&&(r=i.retryLane);break;case 19:a=s.stateNode;break;default:throw Error(Be(314))}a!==null&&a.delete(t),U2(s,r)}var $2;$2=function(s,t,r){if(s!==null)if(s.memoizedProps!==t.pendingProps||mr.current)ur=!0;else{if(!(s.lanes&r)&&!(t.flags&128))return ur=!1,PC(s,t,r);ur=!!(s.flags&131072)}else ur=!1,rs&&t.flags&1048576&&G5(t,Wu,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;uu(s,t),s=t.pendingProps;var i=Io(t,er.current);yo(t,r),i=bf(null,t,a,s,i,r);var l=vf();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,hr(a)?(l=!0,Uu(t)):l=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,hf(t),i.updater=Gx,t.stateNode=i,i._reactInternals=t,Cp(t,a,s,r),t=_p(null,t,a,!0,l,r)):(t.tag=0,rs&&l&&of(t),sr(null,t,i,r),t=t.child),t;case 16:a=t.elementType;e:{switch(uu(s,t),s=t.pendingProps,i=a._init,a=i(a._payload),t.type=a,i=t.tag=FC(a),s=Hr(a,s),i){case 0:t=Tp(null,t,a,s,r);break e;case 1:t=ov(null,t,a,s,r);break e;case 11:t=nv(null,t,a,s,r);break e;case 14:t=iv(null,t,a,Hr(a.type,s),r);break e}throw Error(Be(306,a,""))}return t;case 0:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Hr(a,i),Tp(s,t,a,i,r);case 1:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Hr(a,i),ov(s,t,a,i,r);case 3:e:{if(P2(t),s===null)throw Error(Be(387));a=t.pendingProps,l=t.memoizedState,i=l.element,Z5(s,t),Gu(t,a,null,r);var o=t.memoizedState;if(a=o.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){i=Eo(Error(Be(423)),t),t=lv(s,t,a,r,i);break e}else if(a!==i){i=Eo(Error(Be(424)),t),t=lv(s,t,a,r,i);break e}else for(Nr=vn(t.stateNode.containerInfo.firstChild),kr=t,rs=!0,Qr=null,r=X5(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Po(),a===i){t=Fa(s,t,r);break e}sr(s,t,a,r)}t=t.child}return t;case 5:return e2(t),s===null&&Ip(t),a=t.type,i=t.pendingProps,l=s!==null?s.memoizedProps:null,o=i.children,vp(a,i)?o=null:l!==null&&vp(a,l)&&(t.flags|=32),I2(s,t),sr(s,t,o,r),t.child;case 6:return s===null&&Ip(t),null;case 13:return S2(s,t,r);case 4:return pf(t,t.stateNode.containerInfo),a=t.pendingProps,s===null?t.child=So(t,null,a,r):sr(s,t,a,r),t.child;case 11:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Hr(a,i),nv(s,t,a,i,r);case 7:return sr(s,t,t.pendingProps,r),t.child;case 8:return sr(s,t,t.pendingProps.children,r),t.child;case 12:return sr(s,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,i=t.pendingProps,l=t.memoizedProps,o=i.value,Yt(qu,a._currentValue),a._currentValue=o,l!==null)if(ta(l.value,o)){if(l.children===i.children&&!mr.current){t=Fa(s,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var d=c.firstContext;d!==null;){if(d.context===a){if(l.tag===1){d=Ma(-1,r&-r),d.tag=2;var h=l.updateQueue;if(h!==null){h=h.shared;var g=h.pending;g===null?d.next=d:(d.next=g.next,g.next=d),h.pending=d}}l.lanes|=r,d=l.alternate,d!==null&&(d.lanes|=r),Pp(l.return,r,t),c.lanes|=r;break}d=d.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(Be(341));o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Pp(o,r,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}sr(s,t,i.children,r),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps.children,yo(t,r),i=Vr(i),a=a(i),t.flags|=1,sr(s,t,a,r),t.child;case 14:return a=t.type,i=Hr(a,t.pendingProps),i=Hr(a.type,i),iv(s,t,a,i,r);case 15:return w2(s,t,t.type,t.pendingProps,r);case 17:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Hr(a,i),uu(s,t),t.tag=1,hr(a)?(s=!0,Uu(t)):s=!1,yo(t,r),v2(t,a,i),Cp(t,a,i,r),_p(null,t,a,!0,s,r);case 19:return C2(s,t,r);case 22:return k2(s,t,r)}throw Error(Be(156,t.tag))};function W2(s,t){return g5(s,t)}function BC(s,t,r,a){this.tag=s,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(s,t,r,a){return new BC(s,t,r,a)}function Tf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function FC(s){if(typeof s=="function")return Tf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Q0)return 11;if(s===K0)return 14}return 2}function kn(s,t){var r=s.alternate;return r===null?(r=Mr(s.tag,t,s.key,s.mode),r.elementType=s.elementType,r.type=s.type,r.stateNode=s.stateNode,r.alternate=s,s.alternate=r):(r.pendingProps=t,r.type=s.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=s.flags&14680064,r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,t=s.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=s.sibling,r.index=s.index,r.ref=s.ref,r}function hu(s,t,r,a,i,l){var o=2;if(a=s,typeof s=="function")Tf(s)&&(o=1);else if(typeof s=="string")o=5;else e:switch(s){case Ki:return xi(r.children,i,l,t);case G0:o=8,i|=8;break;case Jh:return s=Mr(12,r,t,i|2),s.elementType=Jh,s.lanes=l,s;case Zh:return s=Mr(13,r,t,i),s.elementType=Zh,s.lanes=l,s;case ep:return s=Mr(19,r,t,i),s.elementType=ep,s.lanes=l,s;case e5:return Yx(r,i,l,t);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Jw:o=10;break e;case Zw:o=9;break e;case Q0:o=11;break e;case K0:o=14;break e;case an:o=16,a=null;break e}throw Error(Be(130,s==null?s:typeof s,""))}return t=Mr(o,r,t,i),t.elementType=s,t.type=a,t.lanes=l,t}function xi(s,t,r,a){return s=Mr(7,s,a,t),s.lanes=r,s}function Yx(s,t,r,a){return s=Mr(22,s,a,t),s.elementType=e5,s.lanes=r,s.stateNode={isHidden:!1},s}function fh(s,t,r){return s=Mr(6,s,null,t),s.lanes=r,s}function gh(s,t,r){return t=Mr(4,s.children!==null?s.children:[],s.key,t),t.lanes=r,t.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},t}function UC(s,t,r,a,i){this.tag=t,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xm(0),this.expirationTimes=Xm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xm(0),this.identifierPrefix=a,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _f(s,t,r,a,i,l,o,c,d){return s=new UC(s,t,r,c,d),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Mr(3,null,null,t),s.current=l,l.stateNode=s,l.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},hf(l),s}function $C(s,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qi,key:a==null?null:""+a,children:s,containerInfo:t,implementation:r}}function q2(s){if(!s)return _n;s=s._reactInternals;e:{if(Ci(s)!==s||s.tag!==1)throw Error(Be(170));var t=s;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(hr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Be(171))}if(s.tag===1){var r=s.type;if(hr(r))return q5(s,r,t)}return t}function H2(s,t,r,a,i,l,o,c,d){return s=_f(r,a,!0,s,i,l,o,c,d),s.context=q2(null),r=s.current,a=nr(),i=wn(r),l=Ma(a,i),l.callback=t??null,jn(r,l,i),s.current.lanes=i,Fc(s,i,a),pr(s,a),s}function Xx(s,t,r,a){var i=t.current,l=nr(),o=wn(i);return r=q2(r),t.context===null?t.context=r:t.pendingContext=r,t=Ma(l,o),t.payload={element:s},a=a===void 0?null:a,a!==null&&(t.callback=a),s=jn(i,t,o),s!==null&&(ea(s,i,o,l),lu(s,i,o)),o}function tx(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function yv(s,t){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var r=s.retryLane;s.retryLane=r!==0&&r<t?r:t}}function Df(s,t){yv(s,t),(s=s.alternate)&&yv(s,t)}function WC(){return null}var G2=typeof reportError=="function"?reportError:function(s){console.error(s)};function Af(s){this._internalRoot=s}Jx.prototype.render=Af.prototype.render=function(s){var t=this._internalRoot;if(t===null)throw Error(Be(409));Xx(s,t,null,null)};Jx.prototype.unmount=Af.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var t=s.containerInfo;bi(function(){Xx(null,s,null,null)}),t[za]=null}};function Jx(s){this._internalRoot=s}Jx.prototype.unstable_scheduleHydration=function(s){if(s){var t=k5();s={blockedOn:null,target:s,priority:t};for(var r=0;r<on.length&&t!==0&&t<on[r].priority;r++);on.splice(r,0,s),r===0&&P5(s)}};function Rf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Zx(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function bv(){}function qC(s,t,r,a,i){if(i){if(typeof a=="function"){var l=a;a=function(){var h=tx(o);l.call(h)}}var o=H2(t,a,s,0,null,!1,!1,"",bv);return s._reactRootContainer=o,s[za]=o.current,cc(s.nodeType===8?s.parentNode:s),bi(),o}for(;i=s.lastChild;)s.removeChild(i);if(typeof a=="function"){var c=a;a=function(){var h=tx(d);c.call(h)}}var d=_f(s,0,!1,null,null,!1,!1,"",bv);return s._reactRootContainer=d,s[za]=d.current,cc(s.nodeType===8?s.parentNode:s),bi(function(){Xx(t,d,r,a)}),d}function em(s,t,r,a,i){var l=r._reactRootContainer;if(l){var o=l;if(typeof i=="function"){var c=i;i=function(){var d=tx(o);c.call(d)}}Xx(t,o,s,i)}else o=qC(r,t,s,i,a);return tx(o)}N5=function(s){switch(s.tag){case 3:var t=s.stateNode;if(t.current.memoizedState.isDehydrated){var r=kl(t.pendingLanes);r!==0&&(J0(t,r|1),pr(t,ys()),!(Lt&6)&&(To=ys()+500,$n()))}break;case 13:bi(function(){var a=Ba(s,1);if(a!==null){var i=nr();ea(a,s,1,i)}}),Df(s,1)}};Z0=function(s){if(s.tag===13){var t=Ba(s,134217728);if(t!==null){var r=nr();ea(t,s,134217728,r)}Df(s,134217728)}};w5=function(s){if(s.tag===13){var t=wn(s),r=Ba(s,t);if(r!==null){var a=nr();ea(r,s,t,a)}Df(s,t)}};k5=function(){return Ut};I5=function(s,t){var r=Ut;try{return Ut=s,t()}finally{Ut=r}};dp=function(s,t,r){switch(t){case"input":if(rp(s,r),t=r.name,r.type==="radio"&&t!=null){for(r=s;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==s&&a.form===s.form){var i=Wx(a);if(!i)throw Error(Be(90));s5(a),rp(a,i)}}}break;case"textarea":a5(s,r);break;case"select":t=r.value,t!=null&&ho(s,!!r.multiple,t,!1)}};u5=Sf;x5=bi;var HC={usingClientEntryPoint:!1,Events:[$c,Zi,Wx,c5,d5,Sf]},yl={findFiberByHostInstance:ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GC={bundleType:yl.bundleType,version:yl.version,rendererPackageName:yl.rendererPackageName,rendererConfig:yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ka.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=p5(s),s===null?null:s.stateNode},findFiberByHostInstance:yl.findFiberByHostInstance||WC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$d.isDisabled&&$d.supportsFiber)try{Bx=$d.inject(GC),da=$d}catch{}}Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HC;Cr.createPortal=function(s,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rf(t))throw Error(Be(200));return $C(s,t,null,r)};Cr.createRoot=function(s,t){if(!Rf(s))throw Error(Be(299));var r=!1,a="",i=G2;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=_f(s,1,!1,null,null,r,!1,a,i),s[za]=t.current,cc(s.nodeType===8?s.parentNode:s),new Af(t)};Cr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var t=s._reactInternals;if(t===void 0)throw typeof s.render=="function"?Error(Be(188)):(s=Object.keys(s).join(","),Error(Be(268,s)));return s=p5(t),s=s===null?null:s.stateNode,s};Cr.flushSync=function(s){return bi(s)};Cr.hydrate=function(s,t,r){if(!Zx(t))throw Error(Be(200));return em(null,s,t,!0,r)};Cr.hydrateRoot=function(s,t,r){if(!Rf(s))throw Error(Be(405));var a=r!=null&&r.hydratedSources||null,i=!1,l="",o=G2;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=H2(t,null,s,1,r??null,i,!1,l,o),s[za]=t.current,cc(s),a)for(s=0;s<a.length;s++)r=a[s],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Jx(t)};Cr.render=function(s,t,r){if(!Zx(t))throw Error(Be(200));return em(null,s,t,!1,r)};Cr.unmountComponentAtNode=function(s){if(!Zx(s))throw Error(Be(40));return s._reactRootContainer?(bi(function(){em(null,null,s,!1,function(){s._reactRootContainer=null,s[za]=null})}),!0):!1};Cr.unstable_batchedUpdates=Sf;Cr.unstable_renderSubtreeIntoContainer=function(s,t,r,a){if(!Zx(r))throw Error(Be(200));if(s==null||s._reactInternals===void 0)throw Error(Be(38));return em(s,t,r,!1,a)};Cr.version="18.3.1-next-f1338f8080-20240426";function Q2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Q2)}catch(s){console.error(s)}}Q2(),Qw.exports=Cr;var QC=Qw.exports,vv=QC;Yh.createRoot=vv.createRoot,Yh.hydrateRoot=vv.hydrateRoot;const KC="modulepreload",YC=function(s){return"/"+s},jv={},XC=function(t,r,a){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(l=>{if(l=YC(l),l in jv)return;jv[l]=!0;const o=l.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(!!a)for(let g=i.length-1;g>=0;g--){const N=i[g];if(N.href===l&&(!o||N.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=o?"stylesheet":KC,o||(h.as="script",h.crossOrigin=""),h.href=l,document.head.appendChild(h),o)return new Promise((g,N)=>{h.addEventListener("load",g),h.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t()).catch(l=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l})};var Mf={};Object.defineProperty(Mf,"__esModule",{value:!0});Mf.parse=aE;Mf.serialize=nE;const JC=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,ZC=/^[\u0021-\u003A\u003C-\u007E]*$/,eE=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,tE=/^[\u0020-\u003A\u003D-\u007E]*$/,sE=Object.prototype.toString,rE=(()=>{const s=function(){};return s.prototype=Object.create(null),s})();function aE(s,t){const r=new rE,a=s.length;if(a<2)return r;const i=(t==null?void 0:t.decode)||iE;let l=0;do{const o=s.indexOf("=",l);if(o===-1)break;const c=s.indexOf(";",l),d=c===-1?a:c;if(o>d){l=s.lastIndexOf(";",o-1)+1;continue}const h=Nv(s,l,o),g=wv(s,o,h),N=s.slice(h,g);if(r[N]===void 0){let k=Nv(s,o+1,d),E=wv(s,d,k);const y=i(s.slice(k,E));r[N]=y}l=d+1}while(l<a);return r}function Nv(s,t,r){do{const a=s.charCodeAt(t);if(a!==32&&a!==9)return t}while(++t<r);return r}function wv(s,t,r){for(;t>r;){const a=s.charCodeAt(--t);if(a!==32&&a!==9)return t+1}return r}function nE(s,t,r){const a=(r==null?void 0:r.encode)||encodeURIComponent;if(!JC.test(s))throw new TypeError(`argument name is invalid: ${s}`);const i=a(t);if(!ZC.test(i))throw new TypeError(`argument val is invalid: ${t}`);let l=s+"="+i;if(!r)return l;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);l+="; Max-Age="+r.maxAge}if(r.domain){if(!eE.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);l+="; Domain="+r.domain}if(r.path){if(!tE.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);l+="; Path="+r.path}if(r.expires){if(!oE(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);l+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(l+="; HttpOnly"),r.secure&&(l+="; Secure"),r.partitioned&&(l+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return l}function iE(s){if(s.indexOf("%")===-1)return s;try{return decodeURIComponent(s)}catch{return s}}function oE(s){return sE.call(s)==="[object Date]"}var kv="popstate";function lE(s={}){function t(a,i){let{pathname:l,search:o,hash:c}=a.location;return $p("",{pathname:l,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){return typeof i=="string"?i:yc(i)}return dE(t,r,null,s)}function os(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function ba(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function cE(){return Math.random().toString(36).substring(2,10)}function Iv(s,t){return{usr:s.state,key:s.key,idx:t}}function $p(s,t,r=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?Wo(t):t,state:r,key:t&&t.key||a||cE()}}function yc({pathname:s="/",search:t="",hash:r=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function Wo(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substring(r),s=s.substring(0,r));let a=s.indexOf("?");a>=0&&(t.search=s.substring(a),s=s.substring(0,a)),s&&(t.pathname=s)}return t}function dE(s,t,r,a={}){let{window:i=document.defaultView,v5Compat:l=!1}=a,o=i.history,c="POP",d=null,h=g();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function g(){return(o.state||{idx:null}).idx}function N(){c="POP";let _=g(),A=_==null?null:_-h;h=_,d&&d({action:c,location:L.location,delta:A})}function k(_,A){c="PUSH";let z=$p(L.location,_,A);r&&r(z,_),h=g()+1;let O=Iv(z,h),K=L.createHref(z);try{o.pushState(O,"",K)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;i.location.assign(K)}l&&d&&d({action:c,location:L.location,delta:1})}function E(_,A){c="REPLACE";let z=$p(L.location,_,A);r&&r(z,_),h=g();let O=Iv(z,h),K=L.createHref(z);o.replaceState(O,"",K),l&&d&&d({action:c,location:L.location,delta:0})}function y(_){let A=i.location.origin!=="null"?i.location.origin:i.location.href,z=typeof _=="string"?_:yc(_);return z=z.replace(/ $/,"%20"),os(A,`No window.location.(origin|href) available to create URL for href: ${z}`),new URL(z,A)}let L={get action(){return c},get location(){return s(i,o)},listen(_){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(kv,N),d=_,()=>{i.removeEventListener(kv,N),d=null}},createHref(_){return t(i,_)},createURL:y,encodeLocation(_){let A=y(_);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:k,replace:E,go(_){return o.go(_)}};return L}function K2(s,t,r="/"){return uE(s,t,r,!1)}function uE(s,t,r,a){let i=typeof t=="string"?Wo(t):t,l=Ua(i.pathname||"/",r);if(l==null)return null;let o=Y2(s);xE(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let h=wE(l);c=jE(o[d],h,a)}return c}function Y2(s,t=[],r=[],a=""){let i=(l,o,c)=>{let d={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};d.relativePath.startsWith("/")&&(os(d.relativePath.startsWith(a),`Absolute route path "${d.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(a.length));let h=Oa([a,d.relativePath]),g=r.concat(d);l.children&&l.children.length>0&&(os(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),Y2(l.children,t,g,h)),!(l.path==null&&!l.index)&&t.push({path:h,score:bE(h,l.index),routesMeta:g})};return s.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))i(l,o);else for(let d of X2(l.path))i(l,o,d)}),t}function X2(s){let t=s.split("/");if(t.length===0)return[];let[r,...a]=t,i=r.endsWith("?"),l=r.replace(/\?$/,"");if(a.length===0)return i?[l,""]:[l];let o=X2(a.join("/")),c=[];return c.push(...o.map(d=>d===""?l:[l,d].join("/"))),i&&c.push(...o),c.map(d=>s.startsWith("/")&&d===""?"/":d)}function xE(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:vE(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var mE=/^:[\w-]+$/,hE=3,pE=2,fE=1,gE=10,yE=-2,Pv=s=>s==="*";function bE(s,t){let r=s.split("/"),a=r.length;return r.some(Pv)&&(a+=yE),t&&(a+=pE),r.filter(i=>!Pv(i)).reduce((i,l)=>i+(mE.test(l)?hE:l===""?fE:gE),a)}function vE(s,t){return s.length===t.length&&s.slice(0,-1).every((a,i)=>a===t[i])?s[s.length-1]-t[t.length-1]:0}function jE(s,t,r=!1){let{routesMeta:a}=s,i={},l="/",o=[];for(let c=0;c<a.length;++c){let d=a[c],h=c===a.length-1,g=l==="/"?t:t.slice(l.length)||"/",N=sx({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},g),k=d.route;if(!N&&h&&r&&!a[a.length-1].route.index&&(N=sx({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!N)return null;Object.assign(i,N.params),o.push({params:i,pathname:Oa([l,N.pathname]),pathnameBase:SE(Oa([l,N.pathnameBase])),route:k}),N.pathnameBase!=="/"&&(l=Oa([l,N.pathnameBase]))}return o}function sx(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,a]=NE(s.path,s.caseSensitive,s.end),i=t.match(r);if(!i)return null;let l=i[0],o=l.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:a.reduce((h,{paramName:g,isOptional:N},k)=>{if(g==="*"){let y=c[k]||"";o=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const E=c[k];return N&&!E?h[g]=void 0:h[g]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:o,pattern:s}}function NE(s,t=!1,r=!0){ba(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],i="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(a.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),i+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":s!==""&&s!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),a]}function wE(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ba(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function Ua(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=s.charAt(r);return a&&a!=="/"?null:s.slice(r)||"/"}function kE(s,t="/"){let{pathname:r,search:a="",hash:i=""}=typeof s=="string"?Wo(s):s;return{pathname:r?r.startsWith("/")?r:IE(r,t):t,search:CE(a),hash:EE(i)}}function IE(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function yh(s,t,r,a){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function PE(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function J2(s){let t=PE(s);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function Z2(s,t,r,a=!1){let i;typeof s=="string"?i=Wo(s):(i={...s},os(!i.pathname||!i.pathname.includes("?"),yh("?","pathname","search",i)),os(!i.pathname||!i.pathname.includes("#"),yh("#","pathname","hash",i)),os(!i.search||!i.search.includes("#"),yh("#","search","hash",i)));let l=s===""||i.pathname==="",o=l?"/":i.pathname,c;if(o==null)c=r;else{let N=t.length-1;if(!a&&o.startsWith("..")){let k=o.split("/");for(;k[0]==="..";)k.shift(),N-=1;i.pathname=k.join("/")}c=N>=0?t[N]:"/"}let d=kE(i,c),h=o&&o!=="/"&&o.endsWith("/"),g=(l||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(h||g)&&(d.pathname+="/"),d}var Oa=s=>s.join("/").replace(/\/\/+/g,"/"),SE=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),CE=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,EE=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function TE(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var e4=["POST","PUT","PATCH","DELETE"];new Set(e4);var _E=["GET",...e4];new Set(_E);var qo=v.createContext(null);qo.displayName="DataRouter";var tm=v.createContext(null);tm.displayName="DataRouterState";var t4=v.createContext({isTransitioning:!1});t4.displayName="ViewTransition";var DE=v.createContext(new Map);DE.displayName="Fetchers";var AE=v.createContext(null);AE.displayName="Await";var wa=v.createContext(null);wa.displayName="Navigation";var qc=v.createContext(null);qc.displayName="Location";var Ya=v.createContext({outlet:null,matches:[],isDataRoute:!1});Ya.displayName="Route";var Of=v.createContext(null);Of.displayName="RouteError";function RE(s,{relative:t}={}){os(Hc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=v.useContext(wa),{hash:i,pathname:l,search:o}=Gc(s,{relative:t}),c=l;return r!=="/"&&(c=l==="/"?r:Oa([r,l])),a.createHref({pathname:c,search:o,hash:i})}function Hc(){return v.useContext(qc)!=null}function Ei(){return os(Hc(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(qc).location}var s4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function r4(s){v.useContext(wa).static||v.useLayoutEffect(s)}function Pt(){let{isDataRoute:s}=v.useContext(Ya);return s?GE():ME()}function ME(){os(Hc(),"useNavigate() may be used only in the context of a <Router> component.");let s=v.useContext(qo),{basename:t,navigator:r}=v.useContext(wa),{matches:a}=v.useContext(Ya),{pathname:i}=Ei(),l=JSON.stringify(J2(a)),o=v.useRef(!1);return r4(()=>{o.current=!0}),v.useCallback((d,h={})=>{if(ba(o.current,s4),!o.current)return;if(typeof d=="number"){r.go(d);return}let g=Z2(d,JSON.parse(l),i,h.relative==="path");s==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:Oa([t,g.pathname])),(h.replace?r.replace:r.push)(g,h.state,h)},[t,r,l,i,s])}v.createContext(null);function Gc(s,{relative:t}={}){let{matches:r}=v.useContext(Ya),{pathname:a}=Ei(),i=JSON.stringify(J2(r));return v.useMemo(()=>Z2(s,JSON.parse(i),a,t==="path"),[s,i,a,t])}function OE(s,t){return a4(s,t)}function a4(s,t,r,a){var z;os(Hc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:l}=v.useContext(wa),{matches:o}=v.useContext(Ya),c=o[o.length-1],d=c?c.params:{},h=c?c.pathname:"/",g=c?c.pathnameBase:"/",N=c&&c.route;{let O=N&&N.path||"";n4(h,!N||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let k=Ei(),E;if(t){let O=typeof t=="string"?Wo(t):t;os(g==="/"||((z=O.pathname)==null?void 0:z.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${O.pathname}" was given in the \`location\` prop.`),E=O}else E=k;let y=E.pathname||"/",L=y;if(g!=="/"){let O=g.replace(/^\//,"").split("/");L="/"+y.replace(/^\//,"").split("/").slice(O.length).join("/")}let _=!l&&r&&r.matches&&r.matches.length>0?r.matches:K2(s,{pathname:L});ba(N||_!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),ba(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=FE(_&&_.map(O=>Object.assign({},O,{params:Object.assign({},d,O.params),pathname:Oa([g,i.encodeLocation?i.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?g:Oa([g,i.encodeLocation?i.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),o,r,a);return t&&A?v.createElement(qc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},A):A}function LE(){let s=HE(),t=TE(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",s),o=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:l},"ErrorBoundary")," or"," ",v.createElement("code",{style:l},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:i},r):null,o)}var VE=v.createElement(LE,null),zE=class extends v.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){console.error("React Router caught the following error during render",s,t)}render(){return this.state.error!==void 0?v.createElement(Ya.Provider,{value:this.props.routeContext},v.createElement(Of.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function BE({routeContext:s,match:t,children:r}){let a=v.useContext(qo);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(Ya.Provider,{value:s},r)}function FE(s,t=[],r=null,a=null){if(s==null){if(!r)return null;if(r.errors)s=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let i=s,l=r==null?void 0:r.errors;if(l!=null){let d=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);os(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(r)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:g,errors:N}=r,k=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!N||N[h.route.id]===void 0);if(h.route.lazy||k){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,g)=>{let N,k=!1,E=null,y=null;r&&(N=l&&h.route.id?l[h.route.id]:void 0,E=h.route.errorElement||VE,o&&(c<0&&g===0?(n4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,y=null):c===g&&(k=!0,y=h.route.hydrateFallbackElement||null)));let L=t.concat(i.slice(0,g+1)),_=()=>{let A;return N?A=E:k?A=y:h.route.Component?A=v.createElement(h.route.Component,null):h.route.element?A=h.route.element:A=d,v.createElement(BE,{match:h,routeContext:{outlet:d,matches:L,isDataRoute:r!=null},children:A})};return r&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?v.createElement(zE,{location:r.location,revalidation:r.revalidation,component:E,error:N,children:_(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):_()},null)}function Lf(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UE(s){let t=v.useContext(qo);return os(t,Lf(s)),t}function $E(s){let t=v.useContext(tm);return os(t,Lf(s)),t}function WE(s){let t=v.useContext(Ya);return os(t,Lf(s)),t}function Vf(s){let t=WE(s),r=t.matches[t.matches.length-1];return os(r.route.id,`${s} can only be used on routes that contain a unique "id"`),r.route.id}function qE(){return Vf("useRouteId")}function HE(){var a;let s=v.useContext(Of),t=$E("useRouteError"),r=Vf("useRouteError");return s!==void 0?s:(a=t.errors)==null?void 0:a[r]}function GE(){let{router:s}=UE("useNavigate"),t=Vf("useNavigate"),r=v.useRef(!1);return r4(()=>{r.current=!0}),v.useCallback(async(i,l={})=>{ba(r.current,s4),r.current&&(typeof i=="number"?s.navigate(i):await s.navigate(i,{fromRouteId:t,...l}))},[s,t])}var Sv={};function n4(s,t,r){!t&&!Sv[s]&&(Sv[s]=!0,ba(!1,r))}v.memo(QE);function QE({routes:s,future:t,state:r}){return a4(s,void 0,r,t)}function St(s){os(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KE({basename:s="/",children:t=null,location:r,navigationType:a="POP",navigator:i,static:l=!1}){os(!Hc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=s.replace(/^\/*/,"/"),c=v.useMemo(()=>({basename:o,navigator:i,static:l,future:{}}),[o,i,l]);typeof r=="string"&&(r=Wo(r));let{pathname:d="/",search:h="",hash:g="",state:N=null,key:k="default"}=r,E=v.useMemo(()=>{let y=Ua(d,o);return y==null?null:{location:{pathname:y,search:h,hash:g,state:N,key:k},navigationType:a}},[o,d,h,g,N,k,a]);return ba(E!=null,`<Router basename="${o}"> is not able to match the URL "${d}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:v.createElement(wa.Provider,{value:c},v.createElement(qc.Provider,{children:t,value:E}))}function YE({children:s,location:t}){return OE(Wp(s),t)}function Wp(s,t=[]){let r=[];return v.Children.forEach(s,(a,i)=>{if(!v.isValidElement(a))return;let l=[...t,i];if(a.type===v.Fragment){r.push.apply(r,Wp(a.props.children,l));return}os(a.type===St,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),os(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Wp(a.props.children,l)),r.push(o)}),r}var pu="get",fu="application/x-www-form-urlencoded";function sm(s){return s!=null&&typeof s.tagName=="string"}function XE(s){return sm(s)&&s.tagName.toLowerCase()==="button"}function JE(s){return sm(s)&&s.tagName.toLowerCase()==="form"}function ZE(s){return sm(s)&&s.tagName.toLowerCase()==="input"}function eT(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function tT(s,t){return s.button===0&&(!t||t==="_self")&&!eT(s)}var Wd=null;function sT(){if(Wd===null)try{new FormData(document.createElement("form"),0),Wd=!1}catch{Wd=!0}return Wd}var rT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bh(s){return s!=null&&!rT.has(s)?(ba(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fu}"`),null):s}function aT(s,t){let r,a,i,l,o;if(JE(s)){let c=s.getAttribute("action");a=c?Ua(c,t):null,r=s.getAttribute("method")||pu,i=bh(s.getAttribute("enctype"))||fu,l=new FormData(s)}else if(XE(s)||ZE(s)&&(s.type==="submit"||s.type==="image")){let c=s.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=s.getAttribute("formaction")||c.getAttribute("action");if(a=d?Ua(d,t):null,r=s.getAttribute("formmethod")||c.getAttribute("method")||pu,i=bh(s.getAttribute("formenctype"))||bh(c.getAttribute("enctype"))||fu,l=new FormData(c,s),!sT()){let{name:h,type:g,value:N}=s;if(g==="image"){let k=h?`${h}.`:"";l.append(`${k}x`,"0"),l.append(`${k}y`,"0")}else h&&l.append(h,N)}}else{if(sm(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=pu,a=null,i=fu,o=s}return l&&i==="text/plain"&&(o=l,l=void 0),{action:a,method:r.toLowerCase(),encType:i,formData:l,body:o}}function zf(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}async function nT(s,t){if(s.id in t)return t[s.id];try{let r=await XC(()=>import(s.module),[]);return t[s.id]=r,r}catch(r){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iT(s){return s!=null&&typeof s.page=="string"}function oT(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function lT(s,t,r){let a=await Promise.all(s.map(async i=>{let l=t.routes[i.route.id];if(l){let o=await nT(l,r);return o.links?o.links():[]}return[]}));return xT(a.flat(1).filter(oT).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Cv(s,t,r,a,i,l){let o=(d,h)=>r[h]?d.route.id!==r[h].route.id:!0,c=(d,h)=>{var g;return r[h].pathname!==d.pathname||((g=r[h].route.path)==null?void 0:g.endsWith("*"))&&r[h].params["*"]!==d.params["*"]};return l==="assets"?t.filter((d,h)=>o(d,h)||c(d,h)):l==="data"?t.filter((d,h)=>{var N;let g=a.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(o(d,h)||c(d,h))return!0;if(d.route.shouldRevalidate){let k=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((N=r[0])==null?void 0:N.params)||{},nextUrl:new URL(s,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function cT(s,t,{includeHydrateFallback:r}={}){return dT(s.map(a=>{let i=t.routes[a.route.id];if(!i)return[];let l=[i.module];return i.clientActionModule&&(l=l.concat(i.clientActionModule)),i.clientLoaderModule&&(l=l.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(l=l.concat(i.hydrateFallbackModule)),i.imports&&(l=l.concat(i.imports)),l}).flat(1))}function dT(s){return[...new Set(s)]}function uT(s){let t={},r=Object.keys(s).sort();for(let a of r)t[a]=s[a];return t}function xT(s,t){let r=new Set,a=new Set(t);return s.reduce((i,l)=>{if(t&&!iT(l)&&l.as==="script"&&l.href&&a.has(l.href))return i;let c=JSON.stringify(uT(l));return r.has(c)||(r.add(c),i.push({key:c,link:l})),i},[])}function mT(s,t){let r=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return r.pathname==="/"?r.pathname="_root.data":t&&Ua(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function i4(){let s=v.useContext(qo);return zf(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function hT(){let s=v.useContext(tm);return zf(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Bf=v.createContext(void 0);Bf.displayName="FrameworkContext";function o4(){let s=v.useContext(Bf);return zf(s,"You must render this element inside a <HydratedRouter> element"),s}function pT(s,t){let r=v.useContext(Bf),[a,i]=v.useState(!1),[l,o]=v.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:h,onMouseLeave:g,onTouchStart:N}=t,k=v.useRef(null);v.useEffect(()=>{if(s==="render"&&o(!0),s==="viewport"){let L=A=>{A.forEach(z=>{o(z.isIntersecting)})},_=new IntersectionObserver(L,{threshold:.5});return k.current&&_.observe(k.current),()=>{_.disconnect()}}},[s]),v.useEffect(()=>{if(a){let L=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(L)}}},[a]);let E=()=>{i(!0)},y=()=>{i(!1),o(!1)};return r?s!=="intent"?[l,k,{}]:[l,k,{onFocus:bl(c,E),onBlur:bl(d,y),onMouseEnter:bl(h,E),onMouseLeave:bl(g,y),onTouchStart:bl(N,E)}]:[!1,k,{}]}function bl(s,t){return r=>{s&&s(r),r.defaultPrevented||t(r)}}function fT({page:s,...t}){let{router:r}=i4(),a=v.useMemo(()=>K2(r.routes,s,r.basename),[r.routes,s,r.basename]);return a?v.createElement(yT,{page:s,matches:a,...t}):null}function gT(s){let{manifest:t,routeModules:r}=o4(),[a,i]=v.useState([]);return v.useEffect(()=>{let l=!1;return lT(s,t,r).then(o=>{l||i(o)}),()=>{l=!0}},[s,t,r]),a}function yT({page:s,matches:t,...r}){let a=Ei(),{manifest:i,routeModules:l}=o4(),{basename:o}=i4(),{loaderData:c,matches:d}=hT(),h=v.useMemo(()=>Cv(s,t,d,i,a,"data"),[s,t,d,i,a]),g=v.useMemo(()=>Cv(s,t,d,i,a,"assets"),[s,t,d,i,a]),N=v.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let y=new Set,L=!1;if(t.forEach(A=>{var O;let z=i.routes[A.route.id];!z||!z.hasLoader||(!h.some(K=>K.route.id===A.route.id)&&A.route.id in c&&((O=l[A.route.id])!=null&&O.shouldRevalidate)||z.hasClientLoader?L=!0:y.add(A.route.id))}),y.size===0)return[];let _=mT(s,o);return L&&y.size>0&&_.searchParams.set("_routes",t.filter(A=>y.has(A.route.id)).map(A=>A.route.id).join(",")),[_.pathname+_.search]},[o,c,a,i,h,t,s,l]),k=v.useMemo(()=>cT(g,i),[g,i]),E=gT(g);return v.createElement(v.Fragment,null,N.map(y=>v.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),k.map(y=>v.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),E.map(({key:y,link:L})=>v.createElement("link",{key:y,...L})))}function bT(...s){return t=>{s.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var l4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{l4&&(window.__reactRouterVersion="7.5.0")}catch{}function vT({basename:s,children:t,window:r}){let a=v.useRef();a.current==null&&(a.current=lE({window:r,v5Compat:!0}));let i=a.current,[l,o]=v.useState({action:i.action,location:i.location}),c=v.useCallback(d=>{v.startTransition(()=>o(d))},[o]);return v.useLayoutEffect(()=>i.listen(c),[i,c]),v.createElement(KE,{basename:s,children:t,location:l.location,navigationType:l.action,navigator:i})}var c4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,b=v.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:i,reloadDocument:l,replace:o,state:c,target:d,to:h,preventScrollReset:g,viewTransition:N,...k},E){let{basename:y}=v.useContext(wa),L=typeof h=="string"&&c4.test(h),_,A=!1;if(typeof h=="string"&&L&&(_=h,l4))try{let W=new URL(window.location.href),U=h.startsWith("//")?new URL(W.protocol+h):new URL(h),ee=Ua(U.pathname,y);U.origin===W.origin&&ee!=null?h=ee+U.search+U.hash:A=!0}catch{ba(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=RE(h,{relative:i}),[O,K,G]=pT(a,k),H=kT(h,{replace:o,state:c,target:d,preventScrollReset:g,relative:i,viewTransition:N});function R(W){t&&t(W),W.defaultPrevented||H(W)}let u=v.createElement("a",{...k,...G,href:_||z,onClick:A||l?t:R,ref:bT(E,K),target:d,"data-discover":!L&&r==="render"?"true":void 0});return O&&!L?v.createElement(v.Fragment,null,u,v.createElement(fT,{page:z})):u});b.displayName="Link";var jT=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:i=!1,style:l,to:o,viewTransition:c,children:d,...h},g){let N=Gc(o,{relative:h.relative}),k=Ei(),E=v.useContext(tm),{navigator:y,basename:L}=v.useContext(wa),_=E!=null&&ET(N)&&c===!0,A=y.encodeLocation?y.encodeLocation(N).pathname:N.pathname,z=k.pathname,O=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;r||(z=z.toLowerCase(),O=O?O.toLowerCase():null,A=A.toLowerCase()),O&&L&&(O=Ua(O,L)||O);const K=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let G=z===A||!i&&z.startsWith(A)&&z.charAt(K)==="/",H=O!=null&&(O===A||!i&&O.startsWith(A)&&O.charAt(A.length)==="/"),R={isActive:G,isPending:H,isTransitioning:_},u=G?t:void 0,W;typeof a=="function"?W=a(R):W=[a,G?"active":null,H?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(R):l;return v.createElement(b,{...h,"aria-current":u,className:W,ref:g,style:U,to:o,viewTransition:c},typeof d=="function"?d(R):d)});jT.displayName="NavLink";var NT=v.forwardRef(({discover:s="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:i,state:l,method:o=pu,action:c,onSubmit:d,relative:h,preventScrollReset:g,viewTransition:N,...k},E)=>{let y=ST(),L=CT(c,{relative:h}),_=o.toLowerCase()==="get"?"get":"post",A=typeof c=="string"&&c4.test(c),z=O=>{if(d&&d(O),O.defaultPrevented)return;O.preventDefault();let K=O.nativeEvent.submitter,G=(K==null?void 0:K.getAttribute("formmethod"))||o;y(K||O.currentTarget,{fetcherKey:t,method:G,navigate:r,replace:i,state:l,relative:h,preventScrollReset:g,viewTransition:N})};return v.createElement("form",{ref:E,method:_,action:L,onSubmit:a?d:z,...k,"data-discover":!A&&s==="render"?"true":void 0})});NT.displayName="Form";function wT(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d4(s){let t=v.useContext(qo);return os(t,wT(s)),t}function kT(s,{target:t,replace:r,state:a,preventScrollReset:i,relative:l,viewTransition:o}={}){let c=Pt(),d=Ei(),h=Gc(s,{relative:l});return v.useCallback(g=>{if(tT(g,t)){g.preventDefault();let N=r!==void 0?r:yc(d)===yc(h);c(s,{replace:N,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,h,r,a,t,s,i,l,o])}var IT=0,PT=()=>`__${String(++IT)}__`;function ST(){let{router:s}=d4("useSubmit"),{basename:t}=v.useContext(wa),r=qE();return v.useCallback(async(a,i={})=>{let{action:l,method:o,encType:c,formData:d,body:h}=aT(a,t);if(i.navigate===!1){let g=i.fetcherKey||PT();await s.fetch(g,r,i.action||l,{preventScrollReset:i.preventScrollReset,formData:d,body:h,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await s.navigate(i.action||l,{preventScrollReset:i.preventScrollReset,formData:d,body:h,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[s,t,r])}function CT(s,{relative:t}={}){let{basename:r}=v.useContext(wa),a=v.useContext(Ya);os(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),l={...Gc(s||".",{relative:t})},o=Ei();if(s==null){l.search=o.search;let c=new URLSearchParams(l.search),d=c.getAll("index");if(d.some(g=>g==="")){c.delete("index"),d.filter(N=>N).forEach(N=>c.append("index",N));let g=c.toString();l.search=g?`?${g}`:""}}return(!s||s===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:Oa([r,l.pathname])),yc(l)}function ET(s,t={}){let r=v.useContext(t4);os(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=d4("useViewTransitionState"),i=Gc(s,{relative:t.relative});if(!r.isTransitioning)return!1;let l=Ua(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=Ua(r.nextLocation.pathname,a)||r.nextLocation.pathname;return sx(i.pathname,o)!=null||sx(i.pathname,l)!=null}new TextEncoder;var u4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ev=fn.createContext&&fn.createContext(u4),TT=["attr","size","title"];function _T(s,t){if(s==null)return{};var r=DT(s,t),a,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(i=0;i<l.length;i++)a=l[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function DT(s,t){if(s==null)return{};var r={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;r[a]=s[a]}return r}function rx(){return rx=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},rx.apply(this,arguments)}function Tv(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),r.push.apply(r,a)}return r}function ax(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tv(Object(r),!0).forEach(function(a){AT(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Tv(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function AT(s,t,r){return t=RT(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function RT(s){var t=MT(s,"string");return typeof t=="symbol"?t:t+""}function MT(s,t){if(typeof s!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function x4(s){return s&&s.map((t,r)=>fn.createElement(t.tag,ax({key:r},t.attr),x4(t.child)))}function nt(s){return t=>fn.createElement(OT,rx({attr:ax({},s.attr)},t),x4(s.child))}function OT(s){var t=r=>{var{attr:a,size:i,title:l}=s,o=_T(s,TT),c=i||r.size||"1em",d;return r.className&&(d=r.className),s.className&&(d=(d?d+" ":"")+s.className),fn.createElement("svg",rx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,o,{className:d,style:ax(ax({color:s.color||r.color},r.style),s.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),l&&fn.createElement("title",null,l),s.children)};return Ev!==void 0?fn.createElement(Ev.Consumer,null,r=>t(r)):t(u4)}function LT(s){return nt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(s)}function qp(s){return nt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(s)}function _v(s){return nt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M150.94 192h33.73c11.01 0 18.61-10.83 14.86-21.18-4.93-13.58-7.55-27.98-7.55-42.82s2.62-29.24 7.55-42.82C203.29 74.83 195.68 64 184.67 64h-33.73c-7.01 0-13.46 4.49-15.41 11.23C130.64 92.21 128 109.88 128 128c0 18.12 2.64 35.79 7.54 52.76 1.94 6.74 8.39 11.24 15.4 11.24zM89.92 23.34C95.56 12.72 87.97 0 75.96 0H40.63c-6.27 0-12.14 3.59-14.74 9.31C9.4 45.54 0 85.65 0 128c0 24.75 3.12 68.33 26.69 118.86 2.62 5.63 8.42 9.14 14.61 9.14h34.84c12.02 0 19.61-12.74 13.95-23.37-49.78-93.32-16.71-178.15-.17-209.29zM614.06 9.29C611.46 3.58 605.6 0 599.33 0h-35.42c-11.98 0-19.66 12.66-14.02 23.25 18.27 34.29 48.42 119.42.28 209.23-5.72 10.68 1.8 23.52 13.91 23.52h35.23c6.27 0 12.13-3.58 14.73-9.29C630.57 210.48 640 170.36 640 128s-9.42-82.48-25.94-118.71zM489.06 64h-33.73c-11.01 0-18.61 10.83-14.86 21.18 4.93 13.58 7.55 27.98 7.55 42.82s-2.62 29.24-7.55 42.82c-3.76 10.35 3.85 21.18 14.86 21.18h33.73c7.02 0 13.46-4.49 15.41-11.24 4.9-16.97 7.53-34.64 7.53-52.76 0-18.12-2.64-35.79-7.54-52.76-1.94-6.75-8.39-11.24-15.4-11.24zm-116.3 100.12c7.05-10.29 11.2-22.71 11.2-36.12 0-35.35-28.63-64-63.96-64-35.32 0-63.96 28.65-63.96 64 0 13.41 4.15 25.83 11.2 36.12l-130.5 313.41c-3.4 8.15.46 17.52 8.61 20.92l29.51 12.31c8.15 3.4 17.52-.46 20.91-8.61L244.96 384h150.07l49.2 118.15c3.4 8.16 12.76 12.01 20.91 8.61l29.51-12.31c8.15-3.4 12-12.77 8.61-20.92l-130.5-313.41zM271.62 320L320 203.81 368.38 320h-96.76z"},child:[]}]})(s)}function VT(s){return nt({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(s)}function zT(s){return nt({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(s)}function Dv(s){return nt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64V160h160v256zm224 0H288V160h160v256z"},child:[]}]})(s)}function nx(s){return nt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(s)}function Hp(s){return nt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM160 368c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16V240c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v128zm96 0c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16V144c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v224zm96 0c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16v-64c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v64z"},child:[]}]})(s)}function Gp(s){return nt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(s)}function ix(s){return nt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(s)}function Av(s){return nt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(s)}function ox(s){return nt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(s)}function Rv(s){return nt({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(s)}function m4(s){return nt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(s)}const BT=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=function(s){const t=[];let r=0;for(let a=0;a<s.length;a++){let i=s.charCodeAt(a);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=i&63|128):(i&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(i=65536+((i&1023)<<10)+(s.charCodeAt(++a)&1023),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=i&63|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=i&63|128)}return t},FT=function(s){const t=[];let r=0,a=0;for(;r<s.length;){const i=s[r++];if(i<128)t[a++]=String.fromCharCode(i);else if(i>191&&i<224){const l=s[r++];t[a++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=s[r++],o=s[r++],c=s[r++],d=((i&7)<<18|(l&63)<<12|(o&63)<<6|c&63)-65536;t[a++]=String.fromCharCode(55296+(d>>10)),t[a++]=String.fromCharCode(56320+(d&1023))}else{const l=s[r++],o=s[r++];t[a++]=String.fromCharCode((i&15)<<12|(l&63)<<6|o&63)}}return t.join("")},p4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let i=0;i<s.length;i+=3){const l=s[i],o=i+1<s.length,c=o?s[i+1]:0,d=i+2<s.length,h=d?s[i+2]:0,g=l>>2,N=(l&3)<<4|c>>4;let k=(c&15)<<2|h>>6,E=h&63;d||(E=64,o||(k=64)),a.push(r[g],r[N],r[k],r[E])}return a.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(h4(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):FT(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let i=0;i<s.length;){const l=r[s.charAt(i++)],c=i<s.length?r[s.charAt(i)]:0;++i;const h=i<s.length?r[s.charAt(i)]:64;++i;const N=i<s.length?r[s.charAt(i)]:64;if(++i,l==null||c==null||h==null||N==null)throw new UT;const k=l<<2|c>>4;if(a.push(k),h!==64){const E=c<<4&240|h>>2;if(a.push(E),N!==64){const y=h<<6&192|N;a.push(y)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class UT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $T=function(s){const t=h4(s);return p4.encodeByteArray(t,!0)},lx=function(s){return $T(s).replace(/\./g,"")},f4=function(s){try{return p4.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=()=>WT().__FIREBASE_DEFAULTS__,HT=()=>{if(typeof process>"u"||typeof process.env>"u")return;const s={}.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},GT=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&f4(s[1]);return t&&JSON.parse(t)},rm=()=>{try{return BT()||qT()||HT()||GT()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},g4=s=>{var t,r;return(r=(t=rm())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[s]},y4=s=>{const t=g4(s);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),a]:[t.substring(0,r),a]},b4=()=>{var s;return(s=rm())===null||s===void 0?void 0:s.config},v4=s=>{var t;return(t=rm())===null||t===void 0?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,a)=>{r?this.reject(r):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},a=t||"demo-project",i=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s),c="";return[lx(JSON.stringify(r)),lx(JSON.stringify(o)),c].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tr())}function YT(){var s;const t=(s=rm())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function N4(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function JT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZT(){const s=tr();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function e_(){return!YT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function w4(){try{return typeof indexedDB=="object"}catch{return!1}}function k4(){return new Promise((s,t)=>{try{let r=!0;const a="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(a);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(a),s(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var l;t(((l=i.error)===null||l===void 0?void 0:l.message)||"")}}catch(r){t(r)}})}function t_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="FirebaseError";class Fr extends Error{constructor(t,r,a){super(r),this.code=t,this.customData=a,this.name=s_,Object.setPrototypeOf(this,Fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ti.prototype.create)}}class Ti{constructor(t,r,a){this.service=t,this.serviceName=r,this.errors=a}create(t,...r){const a=r[0]||{},i=`${this.service}/${t}`,l=this.errors[t],o=l?r_(l,a):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Fr(i,c,a)}}function r_(s,t){return s.replace(a_,(r,a)=>{const i=t[a];return i!=null?String(i):`<${a}?>`})}const a_=/\{\$([^}]+)}/g;function n_(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Dn(s,t){if(s===t)return!0;const r=Object.keys(s),a=Object.keys(t);for(const i of r){if(!a.includes(i))return!1;const l=s[i],o=t[i];if(Mv(l)&&Mv(o)){if(!Dn(l,o))return!1}else if(l!==o)return!1}for(const i of a)if(!r.includes(i))return!1;return!0}function Mv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(s){const t=[];for(const[r,a]of Object.entries(s))Array.isArray(a)?a.forEach(i=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function Pl(s){const t={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[i,l]=a.split("=");t[decodeURIComponent(i)]=decodeURIComponent(l)}}),t}function Sl(s){const t=s.indexOf("?");if(!t)return"";const r=s.indexOf("#",t);return s.substring(t,r>0?r:void 0)}function i_(s,t){const r=new o_(s,t);return r.subscribe.bind(r)}class o_{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,a){let i;if(t===void 0&&r===void 0&&a===void 0)throw new Error("Missing Observer.");l_(t,["next","error","complete"])?i=t:i={next:t,error:r,complete:a},i.next===void 0&&(i.next=vh),i.error===void 0&&(i.error=vh),i.complete===void 0&&(i.complete=vh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function l_(s,t){if(typeof s!="object"||s===null)return!1;for(const r of t)if(r in s&&typeof s[r]=="function")return!0;return!1}function vh(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=1e3,d_=2,u_=4*60*60*1e3,x_=.5;function Ov(s,t=c_,r=d_){const a=t*Math.pow(r,s),i=Math.round(x_*a*(Math.random()-.5)*2);return Math.min(u_,a+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(s){return s&&s._delegate?s._delegate:s}class Br{constructor(t,r,a){this.name=t,this.instanceFactory=r,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const a=new QT;if(this.instancesDeferred.set(r,a),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&a.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const a=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(p_(t))try{this.getOrInitializeService({instanceIdentifier:si})}catch{}for(const[r,a]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const l=this.getOrInitializeService({instanceIdentifier:i});a.resolve(l)}catch{}}}}clearInstance(t=si){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=si){return this.instances.has(t)}getOptions(t=si){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:a,options:r});for(const[l,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(l);a===c&&o.resolve(i)}return i}onInit(t,r){var a;const i=this.normalizeInstanceIdentifier(r),l=(a=this.onInitCallbacks.get(i))!==null&&a!==void 0?a:new Set;l.add(t),this.onInitCallbacks.set(i,l);const o=this.instances.get(i);return o&&t(o,i),()=>{l.delete(t)}}invokeOnInitCallbacks(t,r){const a=this.onInitCallbacks.get(r);if(a)for(const i of a)try{i(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:h_(t),options:r}),this.instances.set(t,a),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=si){return this.component?this.component.multipleInstances?t:si:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function h_(s){return s===si?void 0:s}function p_(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new m_(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Tt||(Tt={}));const g_={debug:Tt.DEBUG,verbose:Tt.VERBOSE,info:Tt.INFO,warn:Tt.WARN,error:Tt.ERROR,silent:Tt.SILENT},y_=Tt.INFO,b_={[Tt.DEBUG]:"log",[Tt.VERBOSE]:"log",[Tt.INFO]:"info",[Tt.WARN]:"warn",[Tt.ERROR]:"error"},v_=(s,t,...r)=>{if(t<s.logLevel)return;const a=new Date().toISOString(),i=b_[t];if(i)console[i](`[${a}]  ${s.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class am{constructor(t){this.name=t,this._logLevel=y_,this._logHandler=v_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Tt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?g_[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Tt.DEBUG,...t),this._logHandler(this,Tt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Tt.VERBOSE,...t),this._logHandler(this,Tt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Tt.INFO,...t),this._logHandler(this,Tt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Tt.WARN,...t),this._logHandler(this,Tt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Tt.ERROR,...t),this._logHandler(this,Tt.ERROR,...t)}}const j_=(s,t)=>t.some(r=>s instanceof r);let Lv,Vv;function N_(){return Lv||(Lv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function w_(){return Vv||(Vv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I4=new WeakMap,Qp=new WeakMap,P4=new WeakMap,jh=new WeakMap,Ff=new WeakMap;function k_(s){const t=new Promise((r,a)=>{const i=()=>{s.removeEventListener("success",l),s.removeEventListener("error",o)},l=()=>{r(In(s.result)),i()},o=()=>{a(s.error),i()};s.addEventListener("success",l),s.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&I4.set(r,s)}).catch(()=>{}),Ff.set(t,s),t}function I_(s){if(Qp.has(s))return;const t=new Promise((r,a)=>{const i=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",o),s.removeEventListener("abort",o)},l=()=>{r(),i()},o=()=>{a(s.error||new DOMException("AbortError","AbortError")),i()};s.addEventListener("complete",l),s.addEventListener("error",o),s.addEventListener("abort",o)});Qp.set(s,t)}let Kp={get(s,t,r){if(s instanceof IDBTransaction){if(t==="done")return Qp.get(s);if(t==="objectStoreNames")return s.objectStoreNames||P4.get(s);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return In(s[t])},set(s,t,r){return s[t]=r,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function P_(s){Kp=s(Kp)}function S_(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const a=s.call(Nh(this),t,...r);return P4.set(a,t.sort?t.sort():[t]),In(a)}:w_().includes(s)?function(...t){return s.apply(Nh(this),t),In(I4.get(this))}:function(...t){return In(s.apply(Nh(this),t))}}function C_(s){return typeof s=="function"?S_(s):(s instanceof IDBTransaction&&I_(s),j_(s,N_())?new Proxy(s,Kp):s)}function In(s){if(s instanceof IDBRequest)return k_(s);if(jh.has(s))return jh.get(s);const t=C_(s);return t!==s&&(jh.set(s,t),Ff.set(t,s)),t}const Nh=s=>Ff.get(s);function S4(s,t,{blocked:r,upgrade:a,blocking:i,terminated:l}={}){const o=indexedDB.open(s,t),c=In(o);return a&&o.addEventListener("upgradeneeded",d=>{a(In(o.result),d.oldVersion,d.newVersion,In(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{l&&d.addEventListener("close",()=>l()),i&&d.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const E_=["get","getKey","getAll","getAllKeys","count"],T_=["put","add","delete","clear"],wh=new Map;function zv(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(wh.get(t))return wh.get(t);const r=t.replace(/FromIndex$/,""),a=t!==r,i=T_.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!(i||E_.includes(r)))return;const l=async function(o,...c){const d=this.transaction(o,i?"readwrite":"readonly");let h=d.store;return a&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),i&&d.done]))[0]};return wh.set(t,l),l}P_(s=>({...s,get:(t,r,a)=>zv(t,r)||s.get(t,r,a),has:(t,r)=>!!zv(t,r)||s.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(D_(r)){const a=r.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(r=>r).join(" ")}}function D_(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Yp="@firebase/app",Bv="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=new am("@firebase/app"),A_="@firebase/app-compat",R_="@firebase/analytics-compat",M_="@firebase/analytics",O_="@firebase/app-check-compat",L_="@firebase/app-check",V_="@firebase/auth",z_="@firebase/auth-compat",B_="@firebase/database",F_="@firebase/data-connect",U_="@firebase/database-compat",$_="@firebase/functions",W_="@firebase/functions-compat",q_="@firebase/installations",H_="@firebase/installations-compat",G_="@firebase/messaging",Q_="@firebase/messaging-compat",K_="@firebase/performance",Y_="@firebase/performance-compat",X_="@firebase/remote-config",J_="@firebase/remote-config-compat",Z_="@firebase/storage",e8="@firebase/storage-compat",t8="@firebase/firestore",s8="@firebase/vertexai",r8="@firebase/firestore-compat",a8="firebase",n8="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="[DEFAULT]",i8={[Yp]:"fire-core",[A_]:"fire-core-compat",[M_]:"fire-analytics",[R_]:"fire-analytics-compat",[L_]:"fire-app-check",[O_]:"fire-app-check-compat",[V_]:"fire-auth",[z_]:"fire-auth-compat",[B_]:"fire-rtdb",[F_]:"fire-data-connect",[U_]:"fire-rtdb-compat",[$_]:"fire-fn",[W_]:"fire-fn-compat",[q_]:"fire-iid",[H_]:"fire-iid-compat",[G_]:"fire-fcm",[Q_]:"fire-fcm-compat",[K_]:"fire-perf",[Y_]:"fire-perf-compat",[X_]:"fire-rc",[J_]:"fire-rc-compat",[Z_]:"fire-gcs",[e8]:"fire-gcs-compat",[t8]:"fire-fst",[r8]:"fire-fst-compat",[s8]:"fire-vertex","fire-js":"fire-js",[a8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=new Map,o8=new Map,Jp=new Map;function Fv(s,t){try{s.container.addComponent(t)}catch(r){$a.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,r)}}function sa(s){const t=s.name;if(Jp.has(t))return $a.debug(`There were multiple attempts to register component ${t}.`),!1;Jp.set(t,s);for(const r of cx.values())Fv(r,s);for(const r of o8.values())Fv(r,s);return!0}function Wn(s,t){const r=s.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),s.container.getProvider(t)}function jr(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pn=new Ti("app","Firebase",l8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(t,r,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Pn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=n8;function C4(s,t={}){let r=s;typeof t!="object"&&(t={name:t});const a=Object.assign({name:Xp,automaticDataCollectionEnabled:!1},t),i=a.name;if(typeof i!="string"||!i)throw Pn.create("bad-app-name",{appName:String(i)});if(r||(r=b4()),!r)throw Pn.create("no-options");const l=cx.get(i);if(l){if(Dn(r,l.options)&&Dn(a,l.config))return l;throw Pn.create("duplicate-app",{appName:i})}const o=new f_(i);for(const d of Jp.values())o.addComponent(d);const c=new c8(r,a,o);return cx.set(i,c),c}function nm(s=Xp){const t=cx.get(s);if(!t&&s===Xp&&b4())return C4();if(!t)throw Pn.create("no-app",{appName:s});return t}function fr(s,t,r){var a;let i=(a=i8[s])!==null&&a!==void 0?a:s;r&&(i+=`-${r}`);const l=i.match(/\s|\//),o=t.match(/\s|\//);if(l||o){const c=[`Unable to register library "${i}" with version "${t}":`];l&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),$a.warn(c.join(" "));return}sa(new Br(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8="firebase-heartbeat-database",u8=1,bc="firebase-heartbeat-store";let kh=null;function E4(){return kh||(kh=S4(d8,u8,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(bc)}catch(r){console.warn(r)}}}}).catch(s=>{throw Pn.create("idb-open",{originalErrorMessage:s.message})})),kh}async function x8(s){try{const r=(await E4()).transaction(bc),a=await r.objectStore(bc).get(T4(s));return await r.done,a}catch(t){if(t instanceof Fr)$a.warn(t.message);else{const r=Pn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});$a.warn(r.message)}}}async function Uv(s,t){try{const a=(await E4()).transaction(bc,"readwrite");await a.objectStore(bc).put(t,T4(s)),await a.done}catch(r){if(r instanceof Fr)$a.warn(r.message);else{const a=Pn.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});$a.warn(a.message)}}}function T4(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8=1024,h8=30;class p8{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new g8(r),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=$v();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(o=>o.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:i}),this._heartbeatsCache.heartbeats.length>h8){const o=y8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){$a.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=$v(),{heartbeatsToSend:a,unsentEntries:i}=f8(this._heartbeatsCache.heartbeats),l=lx(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(r){return $a.warn(r),""}}}function $v(){return new Date().toISOString().substring(0,10)}function f8(s,t=m8){const r=[];let a=s.slice();for(const i of s){const l=r.find(o=>o.agent===i.agent);if(l){if(l.dates.push(i.date),Wv(r)>t){l.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),Wv(r)>t){r.pop();break}a=a.slice(1)}return{heartbeatsToSend:r,unsentEntries:a}}class g8{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return w4()?k4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await x8(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Uv(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Uv(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Wv(s){return lx(JSON.stringify({version:2,heartbeats:s})).length}function y8(s){if(s.length===0)return-1;let t=0,r=s[0].date;for(let a=1;a<s.length;a++)s[a].date<r&&(r=s[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(s){sa(new Br("platform-logger",t=>new __(t),"PRIVATE")),sa(new Br("heartbeat",t=>new p8(t),"PRIVATE")),fr(Yp,Bv,s),fr(Yp,Bv,"esm2017"),fr("fire-js","")}b8("");var qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sn,_4;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,u){function W(){}W.prototype=u.prototype,R.D=u.prototype,R.prototype=new W,R.prototype.constructor=R,R.C=function(U,ee,te){for(var Y=Array(arguments.length-2),$=2;$<arguments.length;$++)Y[$-2]=arguments[$];return u.prototype[ee].apply(U,Y)}}function r(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,r),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,u,W){W||(W=0);var U=Array(16);if(typeof u=="string")for(var ee=0;16>ee;++ee)U[ee]=u.charCodeAt(W++)|u.charCodeAt(W++)<<8|u.charCodeAt(W++)<<16|u.charCodeAt(W++)<<24;else for(ee=0;16>ee;++ee)U[ee]=u[W++]|u[W++]<<8|u[W++]<<16|u[W++]<<24;u=R.g[0],W=R.g[1],ee=R.g[2];var te=R.g[3],Y=u+(te^W&(ee^te))+U[0]+3614090360&4294967295;u=W+(Y<<7&4294967295|Y>>>25),Y=te+(ee^u&(W^ee))+U[1]+3905402710&4294967295,te=u+(Y<<12&4294967295|Y>>>20),Y=ee+(W^te&(u^W))+U[2]+606105819&4294967295,ee=te+(Y<<17&4294967295|Y>>>15),Y=W+(u^ee&(te^u))+U[3]+3250441966&4294967295,W=ee+(Y<<22&4294967295|Y>>>10),Y=u+(te^W&(ee^te))+U[4]+4118548399&4294967295,u=W+(Y<<7&4294967295|Y>>>25),Y=te+(ee^u&(W^ee))+U[5]+1200080426&4294967295,te=u+(Y<<12&4294967295|Y>>>20),Y=ee+(W^te&(u^W))+U[6]+2821735955&4294967295,ee=te+(Y<<17&4294967295|Y>>>15),Y=W+(u^ee&(te^u))+U[7]+4249261313&4294967295,W=ee+(Y<<22&4294967295|Y>>>10),Y=u+(te^W&(ee^te))+U[8]+1770035416&4294967295,u=W+(Y<<7&4294967295|Y>>>25),Y=te+(ee^u&(W^ee))+U[9]+2336552879&4294967295,te=u+(Y<<12&4294967295|Y>>>20),Y=ee+(W^te&(u^W))+U[10]+4294925233&4294967295,ee=te+(Y<<17&4294967295|Y>>>15),Y=W+(u^ee&(te^u))+U[11]+2304563134&4294967295,W=ee+(Y<<22&4294967295|Y>>>10),Y=u+(te^W&(ee^te))+U[12]+1804603682&4294967295,u=W+(Y<<7&4294967295|Y>>>25),Y=te+(ee^u&(W^ee))+U[13]+4254626195&4294967295,te=u+(Y<<12&4294967295|Y>>>20),Y=ee+(W^te&(u^W))+U[14]+2792965006&4294967295,ee=te+(Y<<17&4294967295|Y>>>15),Y=W+(u^ee&(te^u))+U[15]+1236535329&4294967295,W=ee+(Y<<22&4294967295|Y>>>10),Y=u+(ee^te&(W^ee))+U[1]+4129170786&4294967295,u=W+(Y<<5&4294967295|Y>>>27),Y=te+(W^ee&(u^W))+U[6]+3225465664&4294967295,te=u+(Y<<9&4294967295|Y>>>23),Y=ee+(u^W&(te^u))+U[11]+643717713&4294967295,ee=te+(Y<<14&4294967295|Y>>>18),Y=W+(te^u&(ee^te))+U[0]+3921069994&4294967295,W=ee+(Y<<20&4294967295|Y>>>12),Y=u+(ee^te&(W^ee))+U[5]+3593408605&4294967295,u=W+(Y<<5&4294967295|Y>>>27),Y=te+(W^ee&(u^W))+U[10]+38016083&4294967295,te=u+(Y<<9&4294967295|Y>>>23),Y=ee+(u^W&(te^u))+U[15]+3634488961&4294967295,ee=te+(Y<<14&4294967295|Y>>>18),Y=W+(te^u&(ee^te))+U[4]+3889429448&4294967295,W=ee+(Y<<20&4294967295|Y>>>12),Y=u+(ee^te&(W^ee))+U[9]+568446438&4294967295,u=W+(Y<<5&4294967295|Y>>>27),Y=te+(W^ee&(u^W))+U[14]+3275163606&4294967295,te=u+(Y<<9&4294967295|Y>>>23),Y=ee+(u^W&(te^u))+U[3]+4107603335&4294967295,ee=te+(Y<<14&4294967295|Y>>>18),Y=W+(te^u&(ee^te))+U[8]+1163531501&4294967295,W=ee+(Y<<20&4294967295|Y>>>12),Y=u+(ee^te&(W^ee))+U[13]+2850285829&4294967295,u=W+(Y<<5&4294967295|Y>>>27),Y=te+(W^ee&(u^W))+U[2]+4243563512&4294967295,te=u+(Y<<9&4294967295|Y>>>23),Y=ee+(u^W&(te^u))+U[7]+1735328473&4294967295,ee=te+(Y<<14&4294967295|Y>>>18),Y=W+(te^u&(ee^te))+U[12]+2368359562&4294967295,W=ee+(Y<<20&4294967295|Y>>>12),Y=u+(W^ee^te)+U[5]+4294588738&4294967295,u=W+(Y<<4&4294967295|Y>>>28),Y=te+(u^W^ee)+U[8]+2272392833&4294967295,te=u+(Y<<11&4294967295|Y>>>21),Y=ee+(te^u^W)+U[11]+1839030562&4294967295,ee=te+(Y<<16&4294967295|Y>>>16),Y=W+(ee^te^u)+U[14]+4259657740&4294967295,W=ee+(Y<<23&4294967295|Y>>>9),Y=u+(W^ee^te)+U[1]+2763975236&4294967295,u=W+(Y<<4&4294967295|Y>>>28),Y=te+(u^W^ee)+U[4]+1272893353&4294967295,te=u+(Y<<11&4294967295|Y>>>21),Y=ee+(te^u^W)+U[7]+4139469664&4294967295,ee=te+(Y<<16&4294967295|Y>>>16),Y=W+(ee^te^u)+U[10]+3200236656&4294967295,W=ee+(Y<<23&4294967295|Y>>>9),Y=u+(W^ee^te)+U[13]+681279174&4294967295,u=W+(Y<<4&4294967295|Y>>>28),Y=te+(u^W^ee)+U[0]+3936430074&4294967295,te=u+(Y<<11&4294967295|Y>>>21),Y=ee+(te^u^W)+U[3]+3572445317&4294967295,ee=te+(Y<<16&4294967295|Y>>>16),Y=W+(ee^te^u)+U[6]+76029189&4294967295,W=ee+(Y<<23&4294967295|Y>>>9),Y=u+(W^ee^te)+U[9]+3654602809&4294967295,u=W+(Y<<4&4294967295|Y>>>28),Y=te+(u^W^ee)+U[12]+3873151461&4294967295,te=u+(Y<<11&4294967295|Y>>>21),Y=ee+(te^u^W)+U[15]+530742520&4294967295,ee=te+(Y<<16&4294967295|Y>>>16),Y=W+(ee^te^u)+U[2]+3299628645&4294967295,W=ee+(Y<<23&4294967295|Y>>>9),Y=u+(ee^(W|~te))+U[0]+4096336452&4294967295,u=W+(Y<<6&4294967295|Y>>>26),Y=te+(W^(u|~ee))+U[7]+1126891415&4294967295,te=u+(Y<<10&4294967295|Y>>>22),Y=ee+(u^(te|~W))+U[14]+2878612391&4294967295,ee=te+(Y<<15&4294967295|Y>>>17),Y=W+(te^(ee|~u))+U[5]+4237533241&4294967295,W=ee+(Y<<21&4294967295|Y>>>11),Y=u+(ee^(W|~te))+U[12]+1700485571&4294967295,u=W+(Y<<6&4294967295|Y>>>26),Y=te+(W^(u|~ee))+U[3]+2399980690&4294967295,te=u+(Y<<10&4294967295|Y>>>22),Y=ee+(u^(te|~W))+U[10]+4293915773&4294967295,ee=te+(Y<<15&4294967295|Y>>>17),Y=W+(te^(ee|~u))+U[1]+2240044497&4294967295,W=ee+(Y<<21&4294967295|Y>>>11),Y=u+(ee^(W|~te))+U[8]+1873313359&4294967295,u=W+(Y<<6&4294967295|Y>>>26),Y=te+(W^(u|~ee))+U[15]+4264355552&4294967295,te=u+(Y<<10&4294967295|Y>>>22),Y=ee+(u^(te|~W))+U[6]+2734768916&4294967295,ee=te+(Y<<15&4294967295|Y>>>17),Y=W+(te^(ee|~u))+U[13]+1309151649&4294967295,W=ee+(Y<<21&4294967295|Y>>>11),Y=u+(ee^(W|~te))+U[4]+4149444226&4294967295,u=W+(Y<<6&4294967295|Y>>>26),Y=te+(W^(u|~ee))+U[11]+3174756917&4294967295,te=u+(Y<<10&4294967295|Y>>>22),Y=ee+(u^(te|~W))+U[2]+718787259&4294967295,ee=te+(Y<<15&4294967295|Y>>>17),Y=W+(te^(ee|~u))+U[9]+3951481745&4294967295,R.g[0]=R.g[0]+u&4294967295,R.g[1]=R.g[1]+(ee+(Y<<21&4294967295|Y>>>11))&4294967295,R.g[2]=R.g[2]+ee&4294967295,R.g[3]=R.g[3]+te&4294967295}a.prototype.u=function(R,u){u===void 0&&(u=R.length);for(var W=u-this.blockSize,U=this.B,ee=this.h,te=0;te<u;){if(ee==0)for(;te<=W;)i(this,R,te),te+=this.blockSize;if(typeof R=="string"){for(;te<u;)if(U[ee++]=R.charCodeAt(te++),ee==this.blockSize){i(this,U),ee=0;break}}else for(;te<u;)if(U[ee++]=R[te++],ee==this.blockSize){i(this,U),ee=0;break}}this.h=ee,this.o+=u},a.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var u=1;u<R.length-8;++u)R[u]=0;var W=8*this.o;for(u=R.length-8;u<R.length;++u)R[u]=W&255,W/=256;for(this.u(R),R=Array(16),u=W=0;4>u;++u)for(var U=0;32>U;U+=8)R[W++]=this.g[u]>>>U&255;return R};function l(R,u){var W=c;return Object.prototype.hasOwnProperty.call(W,R)?W[R]:W[R]=u(R)}function o(R,u){this.h=u;for(var W=[],U=!0,ee=R.length-1;0<=ee;ee--){var te=R[ee]|0;U&&te==u||(W[ee]=te,U=!1)}this.g=W}var c={};function d(R){return-128<=R&&128>R?l(R,function(u){return new o([u|0],0>u?-1:0)}):new o([R|0],0>R?-1:0)}function h(R){if(isNaN(R)||!isFinite(R))return N;if(0>R)return _(h(-R));for(var u=[],W=1,U=0;R>=W;U++)u[U]=R/W|0,W*=4294967296;return new o(u,0)}function g(R,u){if(R.length==0)throw Error("number format error: empty string");if(u=u||10,2>u||36<u)throw Error("radix out of range: "+u);if(R.charAt(0)=="-")return _(g(R.substring(1),u));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var W=h(Math.pow(u,8)),U=N,ee=0;ee<R.length;ee+=8){var te=Math.min(8,R.length-ee),Y=parseInt(R.substring(ee,ee+te),u);8>te?(te=h(Math.pow(u,te)),U=U.j(te).add(h(Y))):(U=U.j(W),U=U.add(h(Y)))}return U}var N=d(0),k=d(1),E=d(16777216);s=o.prototype,s.m=function(){if(L(this))return-_(this).m();for(var R=0,u=1,W=0;W<this.g.length;W++){var U=this.i(W);R+=(0<=U?U:4294967296+U)*u,u*=4294967296}return R},s.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(y(this))return"0";if(L(this))return"-"+_(this).toString(R);for(var u=h(Math.pow(R,6)),W=this,U="";;){var ee=K(W,u).g;W=A(W,ee.j(u));var te=((0<W.g.length?W.g[0]:W.h)>>>0).toString(R);if(W=ee,y(W))return te+U;for(;6>te.length;)te="0"+te;U=te+U}},s.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function y(R){if(R.h!=0)return!1;for(var u=0;u<R.g.length;u++)if(R.g[u]!=0)return!1;return!0}function L(R){return R.h==-1}s.l=function(R){return R=A(this,R),L(R)?-1:y(R)?0:1};function _(R){for(var u=R.g.length,W=[],U=0;U<u;U++)W[U]=~R.g[U];return new o(W,~R.h).add(k)}s.abs=function(){return L(this)?_(this):this},s.add=function(R){for(var u=Math.max(this.g.length,R.g.length),W=[],U=0,ee=0;ee<=u;ee++){var te=U+(this.i(ee)&65535)+(R.i(ee)&65535),Y=(te>>>16)+(this.i(ee)>>>16)+(R.i(ee)>>>16);U=Y>>>16,te&=65535,Y&=65535,W[ee]=Y<<16|te}return new o(W,W[W.length-1]&-2147483648?-1:0)};function A(R,u){return R.add(_(u))}s.j=function(R){if(y(this)||y(R))return N;if(L(this))return L(R)?_(this).j(_(R)):_(_(this).j(R));if(L(R))return _(this.j(_(R)));if(0>this.l(E)&&0>R.l(E))return h(this.m()*R.m());for(var u=this.g.length+R.g.length,W=[],U=0;U<2*u;U++)W[U]=0;for(U=0;U<this.g.length;U++)for(var ee=0;ee<R.g.length;ee++){var te=this.i(U)>>>16,Y=this.i(U)&65535,$=R.i(ee)>>>16,pe=R.i(ee)&65535;W[2*U+2*ee]+=Y*pe,z(W,2*U+2*ee),W[2*U+2*ee+1]+=te*pe,z(W,2*U+2*ee+1),W[2*U+2*ee+1]+=Y*$,z(W,2*U+2*ee+1),W[2*U+2*ee+2]+=te*$,z(W,2*U+2*ee+2)}for(U=0;U<u;U++)W[U]=W[2*U+1]<<16|W[2*U];for(U=u;U<2*u;U++)W[U]=0;return new o(W,0)};function z(R,u){for(;(R[u]&65535)!=R[u];)R[u+1]+=R[u]>>>16,R[u]&=65535,u++}function O(R,u){this.g=R,this.h=u}function K(R,u){if(y(u))throw Error("division by zero");if(y(R))return new O(N,N);if(L(R))return u=K(_(R),u),new O(_(u.g),_(u.h));if(L(u))return u=K(R,_(u)),new O(_(u.g),u.h);if(30<R.g.length){if(L(R)||L(u))throw Error("slowDivide_ only works with positive integers.");for(var W=k,U=u;0>=U.l(R);)W=G(W),U=G(U);var ee=H(W,1),te=H(U,1);for(U=H(U,2),W=H(W,2);!y(U);){var Y=te.add(U);0>=Y.l(R)&&(ee=ee.add(W),te=Y),U=H(U,1),W=H(W,1)}return u=A(R,ee.j(u)),new O(ee,u)}for(ee=N;0<=R.l(u);){for(W=Math.max(1,Math.floor(R.m()/u.m())),U=Math.ceil(Math.log(W)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),te=h(W),Y=te.j(u);L(Y)||0<Y.l(R);)W-=U,te=h(W),Y=te.j(u);y(te)&&(te=k),ee=ee.add(te),R=A(R,Y)}return new O(ee,R)}s.A=function(R){return K(this,R).h},s.and=function(R){for(var u=Math.max(this.g.length,R.g.length),W=[],U=0;U<u;U++)W[U]=this.i(U)&R.i(U);return new o(W,this.h&R.h)},s.or=function(R){for(var u=Math.max(this.g.length,R.g.length),W=[],U=0;U<u;U++)W[U]=this.i(U)|R.i(U);return new o(W,this.h|R.h)},s.xor=function(R){for(var u=Math.max(this.g.length,R.g.length),W=[],U=0;U<u;U++)W[U]=this.i(U)^R.i(U);return new o(W,this.h^R.h)};function G(R){for(var u=R.g.length+1,W=[],U=0;U<u;U++)W[U]=R.i(U)<<1|R.i(U-1)>>>31;return new o(W,R.h)}function H(R,u){var W=u>>5;u%=32;for(var U=R.g.length-W,ee=[],te=0;te<U;te++)ee[te]=0<u?R.i(te+W)>>>u|R.i(te+W+1)<<32-u:R.i(te+W);return new o(ee,R.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,_4=a,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=g,Sn=o}).apply(typeof qv<"u"?qv:typeof self<"u"?self:typeof window<"u"?window:{});var qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D4,Cl,A4,gu,Zp,R4,M4,O4;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,C,M){return f==Array.prototype||f==Object.prototype||(f[C]=M.value),f};function r(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof qd=="object"&&qd];for(var C=0;C<f.length;++C){var M=f[C];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var a=r(this);function i(f,C){if(C)e:{var M=a;f=f.split(".");for(var Q=0;Q<f.length-1;Q++){var xe=f[Q];if(!(xe in M))break e;M=M[xe]}f=f[f.length-1],Q=M[f],C=C(Q),C!=Q&&C!=null&&t(M,f,{configurable:!0,writable:!0,value:C})}}function l(f,C){f instanceof String&&(f+="");var M=0,Q=!1,xe={next:function(){if(!Q&&M<f.length){var Ne=M++;return{value:C(Ne,f[Ne]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return xe[Symbol.iterator]=function(){return xe},xe}i("Array.prototype.values",function(f){return f||function(){return l(this,function(C,M){return M})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function d(f){var C=typeof f;return C=C!="object"?C:f?Array.isArray(f)?"array":C:"null",C=="array"||C=="object"&&typeof f.length=="number"}function h(f){var C=typeof f;return C=="object"&&f!=null||C=="function"}function g(f,C,M){return f.call.apply(f.bind,arguments)}function N(f,C,M){if(!f)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var xe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(xe,Q),f.apply(C,xe)}}return function(){return f.apply(C,arguments)}}function k(f,C,M){return k=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:N,k.apply(null,arguments)}function E(f,C){var M=Array.prototype.slice.call(arguments,1);return function(){var Q=M.slice();return Q.push.apply(Q,arguments),f.apply(this,Q)}}function y(f,C){function M(){}M.prototype=C.prototype,f.aa=C.prototype,f.prototype=new M,f.prototype.constructor=f,f.Qb=function(Q,xe,Ne){for(var qe=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)qe[Gt-2]=arguments[Gt];return C.prototype[xe].apply(Q,qe)}}function L(f){const C=f.length;if(0<C){const M=Array(C);for(let Q=0;Q<C;Q++)M[Q]=f[Q];return M}return[]}function _(f,C){for(let M=1;M<arguments.length;M++){const Q=arguments[M];if(d(Q)){const xe=f.length||0,Ne=Q.length||0;f.length=xe+Ne;for(let qe=0;qe<Ne;qe++)f[xe+qe]=Q[qe]}else f.push(Q)}}class A{constructor(C,M){this.i=C,this.j=M,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function z(f){return/^[\s\xa0]*$/.test(f)}function O(){var f=c.navigator;return f&&(f=f.userAgent)?f:""}function K(f){return K[" "](f),f}K[" "]=function(){};var G=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function H(f,C,M){for(const Q in f)C.call(M,f[Q],Q,f)}function R(f,C){for(const M in f)C.call(void 0,f[M],M,f)}function u(f){const C={};for(const M in f)C[M]=f[M];return C}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(f,C){let M,Q;for(let xe=1;xe<arguments.length;xe++){Q=arguments[xe];for(M in Q)f[M]=Q[M];for(let Ne=0;Ne<W.length;Ne++)M=W[Ne],Object.prototype.hasOwnProperty.call(Q,M)&&(f[M]=Q[M])}}function ee(f){var C=1;f=f.split(":");const M=[];for(;0<C&&f.length;)M.push(f.shift()),C--;return f.length&&M.push(f.join(":")),M}function te(f){c.setTimeout(()=>{throw f},0)}function Y(){var f=ye;let C=null;return f.g&&(C=f.g,f.g=f.g.next,f.g||(f.h=null),C.next=null),C}class ${constructor(){this.h=this.g=null}add(C,M){const Q=pe.get();Q.set(C,M),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var pe=new A(()=>new Me,f=>f.reset());class Me{constructor(){this.next=this.g=this.h=null}set(C,M){this.h=C,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let De,he=!1,ye=new $,ge=()=>{const f=c.Promise.resolve(void 0);De=()=>{f.then(Ve)}};var Ve=()=>{for(var f;f=Y();){try{f.h.call(f.g)}catch(M){te(M)}var C=pe;C.j(f),100>C.h&&(C.h++,f.next=C.g,C.g=f)}he=!1};function Re(){this.s=this.s,this.C=this.C}Re.prototype.s=!1,Re.prototype.ma=function(){this.s||(this.s=!0,this.N())},Re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(f,C){this.type=f,this.g=this.target=C,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var Qe=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,C=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const M=()=>{};c.addEventListener("test",M,C),c.removeEventListener("test",M,C)}catch{}return f}();function He(f,C){if(Pe.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var M=this.type=f.type,Q=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=C,C=f.relatedTarget){if(G){e:{try{K(C.nodeName);var xe=!0;break e}catch{}xe=!1}xe||(C=null)}}else M=="mouseover"?C=f.fromElement:M=="mouseout"&&(C=f.toElement);this.relatedTarget=C,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:n[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&He.aa.h.call(this)}}y(He,Pe);var n={2:"touch",3:"pen",4:"mouse"};He.prototype.h=function(){He.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),p=0;function T(f,C,M,Q,xe){this.listener=f,this.proxy=null,this.src=C,this.type=M,this.capture=!!Q,this.ha=xe,this.key=++p,this.da=this.fa=!1}function F(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function q(f){this.src=f,this.g={},this.h=0}q.prototype.add=function(f,C,M,Q,xe){var Ne=f.toString();f=this.g[Ne],f||(f=this.g[Ne]=[],this.h++);var qe=ne(f,C,Q,xe);return-1<qe?(C=f[qe],M||(C.fa=!1)):(C=new T(C,this.src,Ne,!!Q,xe),C.fa=M,f.push(C)),C};function se(f,C){var M=C.type;if(M in f.g){var Q=f.g[M],xe=Array.prototype.indexOf.call(Q,C,void 0),Ne;(Ne=0<=xe)&&Array.prototype.splice.call(Q,xe,1),Ne&&(F(C),f.g[M].length==0&&(delete f.g[M],f.h--))}}function ne(f,C,M,Q){for(var xe=0;xe<f.length;++xe){var Ne=f[xe];if(!Ne.da&&Ne.listener==C&&Ne.capture==!!M&&Ne.ha==Q)return xe}return-1}var w="closure_lm_"+(1e6*Math.random()|0),D={};function P(f,C,M,Q,xe){if(Q&&Q.once)return S(f,C,M,Q,xe);if(Array.isArray(C)){for(var Ne=0;Ne<C.length;Ne++)P(f,C[Ne],M,Q,xe);return null}return M=fe(M),f&&f[j]?f.K(C,M,h(Q)?!!Q.capture:!!Q,xe):x(f,C,M,!1,Q,xe)}function x(f,C,M,Q,xe,Ne){if(!C)throw Error("Invalid event type");var qe=h(xe)?!!xe.capture:!!xe,Gt=ie(f);if(Gt||(f[w]=Gt=new q(f)),M=Gt.add(C,M,Q,qe,Ne),M.proxy)return M;if(Q=m(),M.proxy=Q,Q.src=f,Q.listener=M,f.addEventListener)Qe||(xe=qe),xe===void 0&&(xe=!1),f.addEventListener(C.toString(),Q,xe);else if(f.attachEvent)f.attachEvent(re(C.toString()),Q);else if(f.addListener&&f.removeListener)f.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return M}function m(){function f(M){return C.call(f.src,f.listener,M)}const C=ce;return f}function S(f,C,M,Q,xe){if(Array.isArray(C)){for(var Ne=0;Ne<C.length;Ne++)S(f,C[Ne],M,Q,xe);return null}return M=fe(M),f&&f[j]?f.L(C,M,h(Q)?!!Q.capture:!!Q,xe):x(f,C,M,!0,Q,xe)}function Z(f,C,M,Q,xe){if(Array.isArray(C))for(var Ne=0;Ne<C.length;Ne++)Z(f,C[Ne],M,Q,xe);else Q=h(Q)?!!Q.capture:!!Q,M=fe(M),f&&f[j]?(f=f.i,C=String(C).toString(),C in f.g&&(Ne=f.g[C],M=ne(Ne,M,Q,xe),-1<M&&(F(Ne[M]),Array.prototype.splice.call(Ne,M,1),Ne.length==0&&(delete f.g[C],f.h--)))):f&&(f=ie(f))&&(C=f.g[C.toString()],f=-1,C&&(f=ne(C,M,Q,xe)),(M=-1<f?C[f]:null)&&V(M))}function V(f){if(typeof f!="number"&&f&&!f.da){var C=f.src;if(C&&C[j])se(C.i,f);else{var M=f.type,Q=f.proxy;C.removeEventListener?C.removeEventListener(M,Q,f.capture):C.detachEvent?C.detachEvent(re(M),Q):C.addListener&&C.removeListener&&C.removeListener(Q),(M=ie(C))?(se(M,f),M.h==0&&(M.src=null,C[w]=null)):F(f)}}}function re(f){return f in D?D[f]:D[f]="on"+f}function ce(f,C){if(f.da)f=!0;else{C=new He(C,this);var M=f.listener,Q=f.ha||f.src;f.fa&&V(f),f=M.call(Q,C)}return f}function ie(f){return f=f[w],f instanceof q?f:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(f){return typeof f=="function"?f:(f[J]||(f[J]=function(C){return f.handleEvent(C)}),f[J])}function de(){Re.call(this),this.i=new q(this),this.M=this,this.F=null}y(de,Re),de.prototype[j]=!0,de.prototype.removeEventListener=function(f,C,M,Q){Z(this,f,C,M,Q)};function Se(f,C){var M,Q=f.F;if(Q)for(M=[];Q;Q=Q.F)M.push(Q);if(f=f.M,Q=C.type||C,typeof C=="string")C=new Pe(C,f);else if(C instanceof Pe)C.target=C.target||f;else{var xe=C;C=new Pe(Q,f),U(C,xe)}if(xe=!0,M)for(var Ne=M.length-1;0<=Ne;Ne--){var qe=C.g=M[Ne];xe=Ce(qe,Q,!0,C)&&xe}if(qe=C.g=f,xe=Ce(qe,Q,!0,C)&&xe,xe=Ce(qe,Q,!1,C)&&xe,M)for(Ne=0;Ne<M.length;Ne++)qe=C.g=M[Ne],xe=Ce(qe,Q,!1,C)&&xe}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var f=this.i,C;for(C in f.g){for(var M=f.g[C],Q=0;Q<M.length;Q++)F(M[Q]);delete f.g[C],f.h--}}this.F=null},de.prototype.K=function(f,C,M,Q){return this.i.add(String(f),C,!1,M,Q)},de.prototype.L=function(f,C,M,Q){return this.i.add(String(f),C,!0,M,Q)};function Ce(f,C,M,Q){if(C=f.i.g[String(C)],!C)return!0;C=C.concat();for(var xe=!0,Ne=0;Ne<C.length;++Ne){var qe=C[Ne];if(qe&&!qe.da&&qe.capture==M){var Gt=qe.listener,Ds=qe.ha||qe.src;qe.fa&&se(f.i,qe),xe=Gt.call(Ds,Q)!==!1&&xe}}return xe&&!Q.defaultPrevented}function oe(f,C,M){if(typeof f=="function")M&&(f=k(f,M));else if(f&&typeof f.handleEvent=="function")f=k(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:c.setTimeout(f,C||0)}function ue(f){f.g=oe(()=>{f.g=null,f.i&&(f.i=!1,ue(f))},f.l);const C=f.h;f.h=null,f.m.apply(null,C)}class ke extends Re{constructor(C,M){super(),this.m=C,this.l=M,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:ue(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ve(f){Re.call(this),this.h=f,this.g={}}y(ve,Re);var Oe=[];function Le(f){H(f.g,function(C,M){this.g.hasOwnProperty(M)&&V(C)},f),f.g={}}ve.prototype.N=function(){ve.aa.N.call(this),Le(this)},ve.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zt=c.JSON.stringify,_s=c.JSON.parse,ae=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function je(){}je.prototype.h=null;function ze(f){return f.h||(f.h=f.i())}function Ge(){}var pt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function At(){Pe.call(this,"d")}y(At,Pe);function Ot(){Pe.call(this,"c")}y(Ot,Pe);var mt={},Is=null;function Kt(){return Is=Is||new de}mt.La="serverreachability";function Us(f){Pe.call(this,mt.La,f)}y(Us,Pe);function ps(f){const C=Kt();Se(C,new Us(C))}mt.STAT_EVENT="statevent";function $s(f,C){Pe.call(this,mt.STAT_EVENT,f),this.stat=C}y($s,Pe);function Ht(f){const C=Kt();Se(C,new $s(C,f))}mt.Ma="timingevent";function It(f,C){Pe.call(this,mt.Ma,f),this.size=C}y(It,Pe);function Ws(f,C){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},C)}function Tr(){this.g=!0}Tr.prototype.xa=function(){this.g=!1};function Mi(f,C,M,Q,xe,Ne){f.info(function(){if(f.g)if(Ne)for(var qe="",Gt=Ne.split("&"),Ds=0;Ds<Gt.length;Ds++){var Bt=Gt[Ds].split("=");if(1<Bt.length){var qs=Bt[0];Bt=Bt[1];var Hs=qs.split("_");qe=2<=Hs.length&&Hs[1]=="type"?qe+(qs+"="+Bt+"&"):qe+(qs+"=redacted&")}}else qe=null;else qe=Ne;return"XMLHTTP REQ ("+Q+") [attempt "+xe+"]: "+C+`
`+M+`
`+qe})}function tl(f,C,M,Q,xe,Ne,qe){f.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+xe+"]: "+C+`
`+M+`
`+Ne+" "+qe})}function na(f,C,M,Q){f.info(function(){return"XMLHTTP TEXT ("+C+"): "+Om(f,M)+(Q?" "+Q:"")})}function Mm(f,C){f.info(function(){return"TIMEOUT: "+C})}Tr.prototype.info=function(){};function Om(f,C){if(!f.g)return C;if(!C)return null;try{var M=JSON.parse(C);if(M){for(f=0;f<M.length;f++)if(Array.isArray(M[f])){var Q=M[f];if(!(2>Q.length)){var xe=Q[1];if(Array.isArray(xe)&&!(1>xe.length)){var Ne=xe[0];if(Ne!="noop"&&Ne!="stop"&&Ne!="close")for(var qe=1;qe<xe.length;qe++)xe[qe]=""}}}}return Zt(M)}catch{return C}}var Oi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Li;function Pa(){}y(Pa,je),Pa.prototype.g=function(){return new XMLHttpRequest},Pa.prototype.i=function(){return{}},Li=new Pa;function Ur(f,C,M,Q){this.j=f,this.i=C,this.l=M,this.R=Q||1,this.U=new ve(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kn}function Kn(){this.i=null,this.g="",this.h=!1}var sl={},Vi={};function zi(f,C,M){f.L=1,f.v=yd(Sa(C)),f.m=M,f.P=!0,hd(f,null)}function hd(f,C){f.F=Date.now(),pd(f),f.A=Sa(f.v);var M=f.A,Q=f.R;Array.isArray(Q)||(Q=[String(Q)]),Wy(M.i,"t",Q),f.C=0,M=f.j.J,f.h=new Kn,f.g=lb(f.j,M?C:null,!f.m),0<f.O&&(f.M=new ke(k(f.Y,f,f.g),f.O)),C=f.U,M=f.g,Q=f.ca;var xe="readystatechange";Array.isArray(xe)||(xe&&(Oe[0]=xe.toString()),xe=Oe);for(var Ne=0;Ne<xe.length;Ne++){var qe=P(M,xe[Ne],Q||C.handleEvent,!1,C.h||C);if(!qe)break;C.g[qe.key]=qe}C=f.H?u(f.H):{},f.m?(f.u||(f.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,C)):(f.u="GET",f.g.ea(f.A,f.u,null,C)),ps(),Mi(f.i,f.u,f.A,f.l,f.R,f.m)}Ur.prototype.ca=function(f){f=f.target;const C=this.M;C&&Ca(f)==3?C.j():this.Y(f)},Ur.prototype.Y=function(f){try{if(f==this.g)e:{const Hs=Ca(this.g);var C=this.g.Ba();const Ui=this.g.Z();if(!(3>Hs)&&(Hs!=3||this.g&&(this.h.h||this.g.oa()||Xy(this.g)))){this.J||Hs!=4||C==7||(C==8||0>=Ui?ps(3):ps(2)),Lm(this);var M=this.g.Z();this.X=M;t:if(_y(this)){var Q=Xy(this.g);f="";var xe=Q.length,Ne=Ca(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yn(this),rl(this);var qe="";break t}this.h.i=new c.TextDecoder}for(C=0;C<xe;C++)this.h.h=!0,f+=this.h.i.decode(Q[C],{stream:!(Ne&&C==xe-1)});Q.length=0,this.h.g+=f,this.C=0,qe=this.h.g}else qe=this.g.oa();if(this.o=M==200,tl(this.i,this.u,this.A,this.l,this.R,Hs,M),this.o){if(this.T&&!this.K){t:{if(this.g){var Gt,Ds=this.g;if((Gt=Ds.g?Ds.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Gt)){var Bt=Gt;break t}}Bt=null}if(M=Bt)na(this.i,this.l,M,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vm(this,M);else{this.o=!1,this.s=3,Ht(12),Yn(this),rl(this);break e}}if(this.P){M=!0;let $r;for(;!this.J&&this.C<qe.length;)if($r=rP(this,qe),$r==Vi){Hs==4&&(this.s=4,Ht(14),M=!1),na(this.i,this.l,null,"[Incomplete Response]");break}else if($r==sl){this.s=4,Ht(15),na(this.i,this.l,qe,"[Invalid Chunk]"),M=!1;break}else na(this.i,this.l,$r,null),Vm(this,$r);if(_y(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Hs!=4||qe.length!=0||this.h.h||(this.s=1,Ht(16),M=!1),this.o=this.o&&M,!M)na(this.i,this.l,qe,"[Invalid Chunked Response]"),Yn(this),rl(this);else if(0<qe.length&&!this.W){this.W=!0;var qs=this.j;qs.g==this&&qs.ba&&!qs.M&&(qs.j.info("Great, no buffering proxy detected. Bytes received: "+qe.length),Wm(qs),qs.M=!0,Ht(11))}}else na(this.i,this.l,qe,null),Vm(this,qe);Hs==4&&Yn(this),this.o&&!this.J&&(Hs==4?ab(this.j,this):(this.o=!1,pd(this)))}else vP(this.g),M==400&&0<qe.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),Yn(this),rl(this)}}}catch{}finally{}};function _y(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function rP(f,C){var M=f.C,Q=C.indexOf(`
`,M);return Q==-1?Vi:(M=Number(C.substring(M,Q)),isNaN(M)?sl:(Q+=1,Q+M>C.length?Vi:(C=C.slice(Q,Q+M),f.C=Q+M,C)))}Ur.prototype.cancel=function(){this.J=!0,Yn(this)};function pd(f){f.S=Date.now()+f.I,Dy(f,f.I)}function Dy(f,C){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ws(k(f.ba,f),C)}function Lm(f){f.B&&(c.clearTimeout(f.B),f.B=null)}Ur.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Mm(this.i,this.A),this.L!=2&&(ps(),Ht(17)),Yn(this),this.s=2,rl(this)):Dy(this,this.S-f)};function rl(f){f.j.G==0||f.J||ab(f.j,f)}function Yn(f){Lm(f);var C=f.M;C&&typeof C.ma=="function"&&C.ma(),f.M=null,Le(f.U),f.g&&(C=f.g,f.g=null,C.abort(),C.ma())}function Vm(f,C){try{var M=f.j;if(M.G!=0&&(M.g==f||zm(M.h,f))){if(!f.K&&zm(M.h,f)&&M.G==3){try{var Q=M.Da.g.parse(C)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var xe=Q;if(xe[0]==0){e:if(!M.u){if(M.g)if(M.g.F+3e3<f.F)kd(M),Nd(M);else break e;$m(M),Ht(18)}}else M.za=xe[1],0<M.za-M.T&&37500>xe[2]&&M.F&&M.v==0&&!M.C&&(M.C=Ws(k(M.Za,M),6e3));if(1>=My(M.h)&&M.ca){try{M.ca()}catch{}M.ca=void 0}}else Jn(M,11)}else if((f.K||M.g==f)&&kd(M),!z(C))for(xe=M.Da.g.parse(C),C=0;C<xe.length;C++){let Bt=xe[C];if(M.T=Bt[0],Bt=Bt[1],M.G==2)if(Bt[0]=="c"){M.K=Bt[1],M.ia=Bt[2];const qs=Bt[3];qs!=null&&(M.la=qs,M.j.info("VER="+M.la));const Hs=Bt[4];Hs!=null&&(M.Aa=Hs,M.j.info("SVER="+M.Aa));const Ui=Bt[5];Ui!=null&&typeof Ui=="number"&&0<Ui&&(Q=1.5*Ui,M.L=Q,M.j.info("backChannelRequestTimeoutMs_="+Q)),Q=M;const $r=f.g;if($r){const Pd=$r.g?$r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pd){var Ne=Q.h;Ne.g||Pd.indexOf("spdy")==-1&&Pd.indexOf("quic")==-1&&Pd.indexOf("h2")==-1||(Ne.j=Ne.l,Ne.g=new Set,Ne.h&&(Bm(Ne,Ne.h),Ne.h=null))}if(Q.D){const qm=$r.g?$r.g.getResponseHeader("X-HTTP-Session-Id"):null;qm&&(Q.ya=qm,es(Q.I,Q.D,qm))}}M.G=3,M.l&&M.l.ua(),M.ba&&(M.R=Date.now()-f.F,M.j.info("Handshake RTT: "+M.R+"ms")),Q=M;var qe=f;if(Q.qa=ob(Q,Q.J?Q.ia:null,Q.W),qe.K){Oy(Q.h,qe);var Gt=qe,Ds=Q.L;Ds&&(Gt.I=Ds),Gt.B&&(Lm(Gt),pd(Gt)),Q.g=qe}else sb(Q);0<M.i.length&&wd(M)}else Bt[0]!="stop"&&Bt[0]!="close"||Jn(M,7);else M.G==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?Jn(M,7):Um(M):Bt[0]!="noop"&&M.l&&M.l.ta(Bt),M.v=0)}}ps(4)}catch{}}var aP=class{constructor(f,C){this.g=f,this.map=C}};function Ay(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ry(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function My(f){return f.h?1:f.g?f.g.size:0}function zm(f,C){return f.h?f.h==C:f.g?f.g.has(C):!1}function Bm(f,C){f.g?f.g.add(C):f.h=C}function Oy(f,C){f.h&&f.h==C?f.h=null:f.g&&f.g.has(C)&&f.g.delete(C)}Ay.prototype.cancel=function(){if(this.i=Ly(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Ly(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let C=f.i;for(const M of f.g.values())C=C.concat(M.D);return C}return L(f.i)}function nP(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var C=[],M=f.length,Q=0;Q<M;Q++)C.push(f[Q]);return C}C=[],M=0;for(Q in f)C[M++]=f[Q];return C}function iP(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var C=[];f=f.length;for(var M=0;M<f;M++)C.push(M);return C}C=[],M=0;for(const Q in f)C[M++]=Q;return C}}}function Vy(f,C){if(f.forEach&&typeof f.forEach=="function")f.forEach(C,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,C,void 0);else for(var M=iP(f),Q=nP(f),xe=Q.length,Ne=0;Ne<xe;Ne++)C.call(void 0,Q[Ne],M&&M[Ne],f)}var zy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oP(f,C){if(f){f=f.split("&");for(var M=0;M<f.length;M++){var Q=f[M].indexOf("="),xe=null;if(0<=Q){var Ne=f[M].substring(0,Q);xe=f[M].substring(Q+1)}else Ne=f[M];C(Ne,xe?decodeURIComponent(xe.replace(/\+/g," ")):"")}}}function Xn(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Xn){this.h=f.h,fd(this,f.j),this.o=f.o,this.g=f.g,gd(this,f.s),this.l=f.l;var C=f.i,M=new il;M.i=C.i,C.g&&(M.g=new Map(C.g),M.h=C.h),By(this,M),this.m=f.m}else f&&(C=String(f).match(zy))?(this.h=!1,fd(this,C[1]||"",!0),this.o=al(C[2]||""),this.g=al(C[3]||"",!0),gd(this,C[4]),this.l=al(C[5]||"",!0),By(this,C[6]||"",!0),this.m=al(C[7]||"")):(this.h=!1,this.i=new il(null,this.h))}Xn.prototype.toString=function(){var f=[],C=this.j;C&&f.push(nl(C,Fy,!0),":");var M=this.g;return(M||C=="file")&&(f.push("//"),(C=this.o)&&f.push(nl(C,Fy,!0),"@"),f.push(encodeURIComponent(String(M)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.s,M!=null&&f.push(":",String(M))),(M=this.l)&&(this.g&&M.charAt(0)!="/"&&f.push("/"),f.push(nl(M,M.charAt(0)=="/"?dP:cP,!0))),(M=this.i.toString())&&f.push("?",M),(M=this.m)&&f.push("#",nl(M,xP)),f.join("")};function Sa(f){return new Xn(f)}function fd(f,C,M){f.j=M?al(C,!0):C,f.j&&(f.j=f.j.replace(/:$/,""))}function gd(f,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);f.s=C}else f.s=null}function By(f,C,M){C instanceof il?(f.i=C,mP(f.i,f.h)):(M||(C=nl(C,uP)),f.i=new il(C,f.h))}function es(f,C,M){f.i.set(C,M)}function yd(f){return es(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function al(f,C){return f?C?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function nl(f,C,M){return typeof f=="string"?(f=encodeURI(f).replace(C,lP),M&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function lP(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Fy=/[#\/\?@]/g,cP=/[#\?:]/g,dP=/[#\?]/g,uP=/[#\?@]/g,xP=/#/g;function il(f,C){this.h=this.g=null,this.i=f||null,this.j=!!C}function Za(f){f.g||(f.g=new Map,f.h=0,f.i&&oP(f.i,function(C,M){f.add(decodeURIComponent(C.replace(/\+/g," ")),M)}))}s=il.prototype,s.add=function(f,C){Za(this),this.i=null,f=Bi(this,f);var M=this.g.get(f);return M||this.g.set(f,M=[]),M.push(C),this.h+=1,this};function Uy(f,C){Za(f),C=Bi(f,C),f.g.has(C)&&(f.i=null,f.h-=f.g.get(C).length,f.g.delete(C))}function $y(f,C){return Za(f),C=Bi(f,C),f.g.has(C)}s.forEach=function(f,C){Za(this),this.g.forEach(function(M,Q){M.forEach(function(xe){f.call(C,xe,Q,this)},this)},this)},s.na=function(){Za(this);const f=Array.from(this.g.values()),C=Array.from(this.g.keys()),M=[];for(let Q=0;Q<C.length;Q++){const xe=f[Q];for(let Ne=0;Ne<xe.length;Ne++)M.push(C[Q])}return M},s.V=function(f){Za(this);let C=[];if(typeof f=="string")$y(this,f)&&(C=C.concat(this.g.get(Bi(this,f))));else{f=Array.from(this.g.values());for(let M=0;M<f.length;M++)C=C.concat(f[M])}return C},s.set=function(f,C){return Za(this),this.i=null,f=Bi(this,f),$y(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[C]),this.h+=1,this},s.get=function(f,C){return f?(f=this.V(f),0<f.length?String(f[0]):C):C};function Wy(f,C,M){Uy(f,C),0<M.length&&(f.i=null,f.g.set(Bi(f,C),L(M)),f.h+=M.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],C=Array.from(this.g.keys());for(var M=0;M<C.length;M++){var Q=C[M];const Ne=encodeURIComponent(String(Q)),qe=this.V(Q);for(Q=0;Q<qe.length;Q++){var xe=Ne;qe[Q]!==""&&(xe+="="+encodeURIComponent(String(qe[Q]))),f.push(xe)}}return this.i=f.join("&")};function Bi(f,C){return C=String(C),f.j&&(C=C.toLowerCase()),C}function mP(f,C){C&&!f.j&&(Za(f),f.i=null,f.g.forEach(function(M,Q){var xe=Q.toLowerCase();Q!=xe&&(Uy(this,Q),Wy(this,xe,M))},f)),f.j=C}function hP(f,C){const M=new Tr;if(c.Image){const Q=new Image;Q.onload=E(en,M,"TestLoadImage: loaded",!0,C,Q),Q.onerror=E(en,M,"TestLoadImage: error",!1,C,Q),Q.onabort=E(en,M,"TestLoadImage: abort",!1,C,Q),Q.ontimeout=E(en,M,"TestLoadImage: timeout",!1,C,Q),c.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=f}else C(!1)}function pP(f,C){const M=new Tr,Q=new AbortController,xe=setTimeout(()=>{Q.abort(),en(M,"TestPingServer: timeout",!1,C)},1e4);fetch(f,{signal:Q.signal}).then(Ne=>{clearTimeout(xe),Ne.ok?en(M,"TestPingServer: ok",!0,C):en(M,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(xe),en(M,"TestPingServer: error",!1,C)})}function en(f,C,M,Q,xe){try{xe&&(xe.onload=null,xe.onerror=null,xe.onabort=null,xe.ontimeout=null),Q(M)}catch{}}function fP(){this.g=new ae}function gP(f,C,M){const Q=M||"";try{Vy(f,function(xe,Ne){let qe=xe;h(xe)&&(qe=Zt(xe)),C.push(Q+Ne+"="+encodeURIComponent(qe))})}catch(xe){throw C.push(Q+"type="+encodeURIComponent("_badmap")),xe}}function bd(f){this.l=f.Ub||null,this.j=f.eb||!1}y(bd,je),bd.prototype.g=function(){return new vd(this.l,this.j)},bd.prototype.i=function(f){return function(){return f}}({});function vd(f,C){de.call(this),this.D=f,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(vd,de),s=vd.prototype,s.open=function(f,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=C,this.readyState=1,ll(this)},s.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(C.body=f),(this.D||c).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ol(this)),this.readyState=0},s.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ll(this)),this.g&&(this.readyState=3,ll(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qy(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function qy(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}s.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var C=f.value?f.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!f.done}))&&(this.response=this.responseText+=C)}f.done?ol(this):ll(this),this.readyState==3&&qy(this)}},s.Ra=function(f){this.g&&(this.response=this.responseText=f,ol(this))},s.Qa=function(f){this.g&&(this.response=f,ol(this))},s.ga=function(){this.g&&ol(this)};function ol(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ll(f)}s.setRequestHeader=function(f,C){this.u.append(f,C)},s.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],C=this.h.entries();for(var M=C.next();!M.done;)M=M.value,f.push(M[0]+": "+M[1]),M=C.next();return f.join(`\r
`)};function ll(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(vd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Hy(f){let C="";return H(f,function(M,Q){C+=Q,C+=":",C+=M,C+=`\r
`}),C}function Fm(f,C,M){e:{for(Q in M){var Q=!1;break e}Q=!0}Q||(M=Hy(M),typeof f=="string"?M!=null&&encodeURIComponent(String(M)):es(f,C,M))}function us(f){de.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(us,de);var yP=/^https?$/i,bP=["POST","PUT"];s=us.prototype,s.Ha=function(f){this.J=f},s.ea=function(f,C,M,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);C=C?C.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Li.g(),this.v=this.o?ze(this.o):ze(Li),this.g.onreadystatechange=k(this.Ea,this);try{this.B=!0,this.g.open(C,String(f),!0),this.B=!1}catch(Ne){Gy(this,Ne);return}if(f=M||"",M=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var xe in Q)M.set(xe,Q[xe]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Ne of Q.keys())M.set(Ne,Q.get(Ne));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(M.keys()).find(Ne=>Ne.toLowerCase()=="content-type"),xe=c.FormData&&f instanceof c.FormData,!(0<=Array.prototype.indexOf.call(bP,C,void 0))||Q||xe||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ne,qe]of M)this.g.setRequestHeader(Ne,qe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yy(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ne){Gy(this,Ne)}};function Gy(f,C){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=C,f.m=5,Qy(f),jd(f)}function Qy(f){f.A||(f.A=!0,Se(f,"complete"),Se(f,"error"))}s.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Se(this,"complete"),Se(this,"abort"),jd(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jd(this,!0)),us.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Ky(this):this.bb())},s.bb=function(){Ky(this)};function Ky(f){if(f.h&&typeof o<"u"&&(!f.v[1]||Ca(f)!=4||f.Z()!=2)){if(f.u&&Ca(f)==4)oe(f.Ea,0,f);else if(Se(f,"readystatechange"),Ca(f)==4){f.h=!1;try{const qe=f.Z();e:switch(qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var M;if(!(M=C)){var Q;if(Q=qe===0){var xe=String(f.D).match(zy)[1]||null;!xe&&c.self&&c.self.location&&(xe=c.self.location.protocol.slice(0,-1)),Q=!yP.test(xe?xe.toLowerCase():"")}M=Q}if(M)Se(f,"complete"),Se(f,"success");else{f.m=6;try{var Ne=2<Ca(f)?f.g.statusText:""}catch{Ne=""}f.l=Ne+" ["+f.Z()+"]",Qy(f)}}finally{jd(f)}}}}function jd(f,C){if(f.g){Yy(f);const M=f.g,Q=f.v[0]?()=>{}:null;f.g=null,f.v=null,C||Se(f,"ready");try{M.onreadystatechange=Q}catch{}}}function Yy(f){f.I&&(c.clearTimeout(f.I),f.I=null)}s.isActive=function(){return!!this.g};function Ca(f){return f.g?f.g.readyState:0}s.Z=function(){try{return 2<Ca(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(f){if(this.g){var C=this.g.responseText;return f&&C.indexOf(f)==0&&(C=C.substring(f.length)),_s(C)}};function Xy(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function vP(f){const C={};f=(f.g&&2<=Ca(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<f.length;Q++){if(z(f[Q]))continue;var M=ee(f[Q]);const xe=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const Ne=C[xe]||[];C[xe]=Ne,Ne.push(M)}R(C,function(Q){return Q.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cl(f,C,M){return M&&M.internalChannelParams&&M.internalChannelParams[f]||C}function Jy(f){this.Aa=0,this.i=[],this.j=new Tr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cl("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cl("baseRetryDelayMs",5e3,f),this.cb=cl("retryDelaySeedMs",1e4,f),this.Wa=cl("forwardChannelMaxRetries",2,f),this.wa=cl("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Ay(f&&f.concurrentRequestLimit),this.Da=new fP,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Jy.prototype,s.la=8,s.G=1,s.connect=function(f,C,M,Q){Ht(0),this.W=f,this.H=C||{},M&&Q!==void 0&&(this.H.OSID=M,this.H.OAID=Q),this.F=this.X,this.I=ob(this,null,this.W),wd(this)};function Um(f){if(Zy(f),f.G==3){var C=f.U++,M=Sa(f.I);if(es(M,"SID",f.K),es(M,"RID",C),es(M,"TYPE","terminate"),dl(f,M),C=new Ur(f,f.j,C),C.L=2,C.v=yd(Sa(M)),M=!1,c.navigator&&c.navigator.sendBeacon)try{M=c.navigator.sendBeacon(C.v.toString(),"")}catch{}!M&&c.Image&&(new Image().src=C.v,M=!0),M||(C.g=lb(C.j,null),C.g.ea(C.v)),C.F=Date.now(),pd(C)}ib(f)}function Nd(f){f.g&&(Wm(f),f.g.cancel(),f.g=null)}function Zy(f){Nd(f),f.u&&(c.clearTimeout(f.u),f.u=null),kd(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&c.clearTimeout(f.s),f.s=null)}function wd(f){if(!Ry(f.h)&&!f.s){f.s=!0;var C=f.Ga;De||ge(),he||(De(),he=!0),ye.add(C,f),f.B=0}}function jP(f,C){return My(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=C.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ws(k(f.Ga,f,C),nb(f,f.B)),f.B++,!0)}s.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const xe=new Ur(this,this.j,f);let Ne=this.o;if(this.S&&(Ne?(Ne=u(Ne),U(Ne,this.S)):Ne=this.S),this.m!==null||this.O||(xe.H=Ne,Ne=null),this.P)e:{for(var C=0,M=0;M<this.i.length;M++){t:{var Q=this.i[M];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(C+=Q,4096<C){C=M;break e}if(C===4096||M===this.i.length-1){C=M+1;break e}}C=1e3}else C=1e3;C=tb(this,xe,C),M=Sa(this.I),es(M,"RID",f),es(M,"CVER",22),this.D&&es(M,"X-HTTP-Session-Id",this.D),dl(this,M),Ne&&(this.O?C="headers="+encodeURIComponent(String(Hy(Ne)))+"&"+C:this.m&&Fm(M,this.m,Ne)),Bm(this.h,xe),this.Ua&&es(M,"TYPE","init"),this.P?(es(M,"$req",C),es(M,"SID","null"),xe.T=!0,zi(xe,M,null)):zi(xe,M,C),this.G=2}}else this.G==3&&(f?eb(this,f):this.i.length==0||Ry(this.h)||eb(this))};function eb(f,C){var M;C?M=C.l:M=f.U++;const Q=Sa(f.I);es(Q,"SID",f.K),es(Q,"RID",M),es(Q,"AID",f.T),dl(f,Q),f.m&&f.o&&Fm(Q,f.m,f.o),M=new Ur(f,f.j,M,f.B+1),f.m===null&&(M.H=f.o),C&&(f.i=C.D.concat(f.i)),C=tb(f,M,1e3),M.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Bm(f.h,M),zi(M,Q,C)}function dl(f,C){f.H&&H(f.H,function(M,Q){es(C,Q,M)}),f.l&&Vy({},function(M,Q){es(C,Q,M)})}function tb(f,C,M){M=Math.min(f.i.length,M);var Q=f.l?k(f.l.Na,f.l,f):null;e:{var xe=f.i;let Ne=-1;for(;;){const qe=["count="+M];Ne==-1?0<M?(Ne=xe[0].g,qe.push("ofs="+Ne)):Ne=0:qe.push("ofs="+Ne);let Gt=!0;for(let Ds=0;Ds<M;Ds++){let Bt=xe[Ds].g;const qs=xe[Ds].map;if(Bt-=Ne,0>Bt)Ne=Math.max(0,xe[Ds].g-100),Gt=!1;else try{gP(qs,qe,"req"+Bt+"_")}catch{Q&&Q(qs)}}if(Gt){Q=qe.join("&");break e}}}return f=f.i.splice(0,M),C.D=f,Q}function sb(f){if(!f.g&&!f.u){f.Y=1;var C=f.Fa;De||ge(),he||(De(),he=!0),ye.add(C,f),f.v=0}}function $m(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ws(k(f.Fa,f),nb(f,f.v)),f.v++,!0)}s.Fa=function(){if(this.u=null,rb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ws(k(this.ab,this),f)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),Nd(this),rb(this))};function Wm(f){f.A!=null&&(c.clearTimeout(f.A),f.A=null)}function rb(f){f.g=new Ur(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var C=Sa(f.qa);es(C,"RID","rpc"),es(C,"SID",f.K),es(C,"AID",f.T),es(C,"CI",f.F?"0":"1"),!f.F&&f.ja&&es(C,"TO",f.ja),es(C,"TYPE","xmlhttp"),dl(f,C),f.m&&f.o&&Fm(C,f.m,f.o),f.L&&(f.g.I=f.L);var M=f.g;f=f.ia,M.L=1,M.v=yd(Sa(C)),M.m=null,M.P=!0,hd(M,f)}s.Za=function(){this.C!=null&&(this.C=null,Nd(this),$m(this),Ht(19))};function kd(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function ab(f,C){var M=null;if(f.g==C){kd(f),Wm(f),f.g=null;var Q=2}else if(zm(f.h,C))M=C.D,Oy(f.h,C),Q=1;else return;if(f.G!=0){if(C.o)if(Q==1){M=C.m?C.m.length:0,C=Date.now()-C.F;var xe=f.B;Q=Kt(),Se(Q,new It(Q,M)),wd(f)}else sb(f);else if(xe=C.s,xe==3||xe==0&&0<C.X||!(Q==1&&jP(f,C)||Q==2&&$m(f)))switch(M&&0<M.length&&(C=f.h,C.i=C.i.concat(M)),xe){case 1:Jn(f,5);break;case 4:Jn(f,10);break;case 3:Jn(f,6);break;default:Jn(f,2)}}}function nb(f,C){let M=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(M*=2),M*C}function Jn(f,C){if(f.j.info("Error code "+C),C==2){var M=k(f.fb,f),Q=f.Xa;const xe=!Q;Q=new Xn(Q||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||fd(Q,"https"),yd(Q),xe?hP(Q.toString(),M):pP(Q.toString(),M)}else Ht(2);f.G=0,f.l&&f.l.sa(C),ib(f),Zy(f)}s.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function ib(f){if(f.G=0,f.ka=[],f.l){const C=Ly(f.h);(C.length!=0||f.i.length!=0)&&(_(f.ka,C),_(f.ka,f.i),f.h.i.length=0,L(f.i),f.i.length=0),f.l.ra()}}function ob(f,C,M){var Q=M instanceof Xn?Sa(M):new Xn(M);if(Q.g!="")C&&(Q.g=C+"."+Q.g),gd(Q,Q.s);else{var xe=c.location;Q=xe.protocol,C=C?C+"."+xe.hostname:xe.hostname,xe=+xe.port;var Ne=new Xn(null);Q&&fd(Ne,Q),C&&(Ne.g=C),xe&&gd(Ne,xe),M&&(Ne.l=M),Q=Ne}return M=f.D,C=f.ya,M&&C&&es(Q,M,C),es(Q,"VER",f.la),dl(f,Q),Q}function lb(f,C,M){if(C&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=f.Ca&&!f.pa?new us(new bd({eb:M})):new us(f.pa),C.Ha(f.J),C}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function cb(){}s=cb.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Id(){}Id.prototype.g=function(f,C){return new yr(f,C)};function yr(f,C){de.call(this),this.g=new Jy(C),this.l=f,this.h=C&&C.messageUrlParams||null,f=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(f?f["X-WebChannel-Content-Type"]=C.messageContentType:f={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(f?f["X-WebChannel-Client-Profile"]=C.va:f={"X-WebChannel-Client-Profile":C.va}),this.g.S=f,(f=C&&C.Sb)&&!z(f)&&(this.g.m=f),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!z(C)&&(this.g.D=C,f=this.h,f!==null&&C in f&&(f=this.h,C in f&&delete f[C])),this.j=new Fi(this)}y(yr,de),yr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yr.prototype.close=function(){Um(this.g)},yr.prototype.o=function(f){var C=this.g;if(typeof f=="string"){var M={};M.__data__=f,f=M}else this.u&&(M={},M.__data__=Zt(f),f=M);C.i.push(new aP(C.Ya++,f)),C.G==3&&wd(C)},yr.prototype.N=function(){this.g.l=null,delete this.j,Um(this.g),delete this.g,yr.aa.N.call(this)};function db(f){At.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var C=f.__sm__;if(C){e:{for(const M in C){f=M;break e}f=void 0}(this.i=f)&&(f=this.i,C=C!==null&&f in C?C[f]:void 0),this.data=C}else this.data=f}y(db,At);function ub(){Ot.call(this),this.status=1}y(ub,Ot);function Fi(f){this.g=f}y(Fi,cb),Fi.prototype.ua=function(){Se(this.g,"a")},Fi.prototype.ta=function(f){Se(this.g,new db(f))},Fi.prototype.sa=function(f){Se(this.g,new ub)},Fi.prototype.ra=function(){Se(this.g,"b")},Id.prototype.createWebChannel=Id.prototype.g,yr.prototype.send=yr.prototype.o,yr.prototype.open=yr.prototype.m,yr.prototype.close=yr.prototype.close,O4=function(){return new Id},M4=function(){return Kt()},R4=mt,Zp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oi.NO_ERROR=0,Oi.TIMEOUT=8,Oi.HTTP_ERROR=6,gu=Oi,Qn.COMPLETE="complete",A4=Qn,Ge.EventType=pt,pt.OPEN="a",pt.CLOSE="b",pt.ERROR="c",pt.MESSAGE="d",de.prototype.listen=de.prototype.K,Cl=Ge,us.prototype.listenOnce=us.prototype.L,us.prototype.getLastError=us.prototype.Ka,us.prototype.getLastErrorCode=us.prototype.Ba,us.prototype.getStatus=us.prototype.Z,us.prototype.getResponseJson=us.prototype.Oa,us.prototype.getResponseText=us.prototype.oa,us.prototype.send=us.prototype.ea,us.prototype.setWithCredentials=us.prototype.Ha,D4=us}).apply(typeof qd<"u"?qd:typeof self<"u"?self:typeof window<"u"?window:{});const Hv="@firebase/firestore",Gv="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Xs.UNAUTHENTICATED=new Xs(null),Xs.GOOGLE_CREDENTIALS=new Xs("google-credentials-uid"),Xs.FIRST_PARTY=new Xs("first-party-uid"),Xs.MOCK_USER=new Xs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new am("@firebase/firestore");function Wi(){return vi.logLevel}function Ze(s,...t){if(vi.logLevel<=Tt.DEBUG){const r=t.map(Uf);vi.debug(`Firestore (${Ho}): ${s}`,...r)}}function Wa(s,...t){if(vi.logLevel<=Tt.ERROR){const r=t.map(Uf);vi.error(`Firestore (${Ho}): ${s}`,...r)}}function _o(s,...t){if(vi.logLevel<=Tt.WARN){const r=t.map(Uf);vi.warn(`Firestore (${Ho}): ${s}`,...r)}}function Uf(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(s="Unexpected state"){const t=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: `+s;throw Wa(t),new Error(t)}function Mt(s,t){s||ft()}function Nt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ye extends Fr{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class v8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Xs.UNAUTHENTICATED))}shutdown(){}}class j8{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class N8{constructor(t){this.t=t,this.currentUser=Xs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){Mt(this.o===void 0);let a=this.i;const i=d=>this.i!==a?(a=this.i,r(d)):Promise.resolve();let l=new xa;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new xa,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const d=l;t.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new xa)}},0),o()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==t?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Mt(typeof a.accessToken=="string"),new L4(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Mt(t===null||typeof t=="string"),new Xs(t)}}class w8{constructor(t,r,a){this.l=t,this.h=r,this.P=a,this.type="FirstParty",this.user=Xs.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class k8{constructor(t,r,a){this.l=t,this.h=r,this.P=a}getToken(){return Promise.resolve(new w8(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(Xs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I8{constructor(t,r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,jr(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,r){Mt(this.o===void 0);const a=l=>{l.error!=null&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const o=l.token!==this.R;return this.R=l.token,Ze("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>a(l))};const i=l=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?i(l):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Qv(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(Mt(typeof r.token=="string"),this.R=r.token,new Qv(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let a=0;a<s;a++)r[a]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const i=P8(40);for(let l=0;l<i.length;++l)a.length<20&&i[l]<r&&(a+=t.charAt(i[l]%62))}return a}}function wt(s,t){return s<t?-1:s>t?1:0}function e0(s,t){let r=0;for(;r<s.length&&r<t.length;){const a=s.codePointAt(r),i=t.codePointAt(r);if(a!==i){if(a<128&&i<128)return wt(a,i);{const l=V4(),o=S8(l.encode(Kv(s,r)),l.encode(Kv(t,r)));return o!==0?o:wt(a,i)}}r+=a>65535?2:1}return wt(s.length,t.length)}function Kv(s,t){return s.codePointAt(t)>65535?s.substring(t,t+2):s.substring(t,t+1)}function S8(s,t){for(let r=0;r<s.length&&r<t.length;++r)if(s[r]!==t[r])return wt(s[r],t[r]);return wt(s.length,t.length)}function Do(s,t,r){return s.length===t.length&&s.every((a,i)=>r(a,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=-62135596800,Xv=1e6;class Xt{static now(){return Xt.fromMillis(Date.now())}static fromDate(t){return Xt.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),a=Math.floor((t-1e3*r)*Xv);return new Xt(r,a)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Ye(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ye(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<Yv)throw new Ye(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ye(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xv}_compareTo(t){return this.seconds===t.seconds?wt(this.nanoseconds,t.nanoseconds):wt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Yv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{static fromTimestamp(t){return new gt(t)}static min(){return new gt(new Xt(0,0))}static max(){return new gt(new Xt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="__name__";class la{constructor(t,r,a){r===void 0?r=0:r>t.length&&ft(),a===void 0?a=t.length-r:a>t.length-r&&ft(),this.segments=t,this.offset=r,this.len=a}get length(){return this.len}isEqual(t){return la.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof la?t.forEach(a=>{r.push(a)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,a=this.limit();r<a;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const a=Math.min(t.length,r.length);for(let i=0;i<a;i++){const l=la.compareSegments(t.get(i),r.get(i));if(l!==0)return l}return wt(t.length,r.length)}static compareSegments(t,r){const a=la.isNumericId(t),i=la.isNumericId(r);return a&&!i?-1:!a&&i?1:a&&i?la.extractNumericId(t).compare(la.extractNumericId(r)):e0(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Sn.fromString(t.substring(4,t.length-2))}}class Qt extends la{construct(t,r,a){return new Qt(t,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const a of t){if(a.indexOf("//")>=0)throw new Ye(Ee.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(i=>i.length>0))}return new Qt(r)}static emptyPath(){return new Qt([])}}const C8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Os extends la{construct(t,r,a){return new Os(t,r,a)}static isValidIdentifier(t){return C8.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Os.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jv}static keyField(){return new Os([Jv])}static fromServerFormat(t){const r=[];let a="",i=0;const l=()=>{if(a.length===0)throw new Ye(Ee.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let o=!1;for(;i<t.length;){const c=t[i];if(c==="\\"){if(i+1===t.length)throw new Ye(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ye(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=d,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(a+=c,i++):(l(),i++)}if(l(),o)throw new Ye(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Os(r)}static emptyPath(){return new Os([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(t){this.path=t}static fromPath(t){return new ht(Qt.fromString(t))}static fromName(t){return new ht(Qt.fromString(t).popFirst(5))}static empty(){return new ht(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Qt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Qt.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ht(new Qt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=-1;function E8(s,t){const r=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,i=gt.fromTimestamp(a===1e9?new Xt(r+1,0):new Xt(r,a));return new An(i,ht.empty(),t)}function T8(s){return new An(s.readTime,s.key,vc)}class An{constructor(t,r,a){this.readTime=t,this.documentKey=r,this.largestBatchId=a}static min(){return new An(gt.min(),ht.empty(),vc)}static max(){return new An(gt.max(),ht.empty(),vc)}}function _8(s,t){let r=s.readTime.compareTo(t.readTime);return r!==0?r:(r=ht.comparator(s.documentKey,t.documentKey),r!==0?r:wt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(s){if(s.code!==Ee.FAILED_PRECONDITION||s.message!==D8)throw s;Ze("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Ae((a,i)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(a,i)},this.catchCallback=l=>{this.wrapFailure(r,l).next(a,i)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Ae?r:Ae.resolve(r)}catch(r){return Ae.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Ae.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Ae.reject(r)}static resolve(t){return new Ae((r,a)=>{r(t)})}static reject(t){return new Ae((r,a)=>{a(t)})}static waitFor(t){return new Ae((r,a)=>{let i=0,l=0,o=!1;t.forEach(c=>{++i,c.next(()=>{++l,o&&l===i&&r()},d=>a(d))}),o=!0,l===i&&r()})}static or(t){let r=Ae.resolve(!1);for(const a of t)r=r.next(i=>i?Ae.resolve(i):a());return r}static forEach(t,r){const a=[];return t.forEach((i,l)=>{a.push(r.call(this,i,l))}),this.waitFor(a)}static mapArray(t,r){return new Ae((a,i)=>{const l=t.length,o=new Array(l);let c=0;for(let d=0;d<l;d++){const h=d;r(t[h]).next(g=>{o[h]=g,++c,c===l&&a(o)},g=>i(g))}})}static doWhile(t,r){return new Ae((a,i)=>{const l=()=>{t()===!0?r().next(()=>{l()},i):a()};l()})}}function R8(s){const t=s.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Qo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=a=>this.oe(a),this._e=a=>r.writeSequenceNumber(a))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}im.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=-1;function Kc(s){return s==null}function dx(s){return s===0&&1/s==-1/0}function M8(s){return typeof s=="number"&&Number.isInteger(s)&&!dx(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4="";function O8(s){let t="";for(let r=0;r<s.length;r++)t.length>0&&(t=Zv(t)),t=L8(s.get(r),t);return Zv(t)}function L8(s,t){let r=t;const a=s.length;for(let i=0;i<a;i++){const l=s.charAt(i);switch(l){case"\0":r+="";break;case B4:r+="";break;default:r+=l}}return r}function Zv(s){return s+B4+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(s){let t=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&t++;return t}function qn(s,t){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&t(r,s[r])}function F4(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(t,r){this.comparator=t,this.root=r||Ms.EMPTY}insert(t,r){return new ds(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Ms.BLACK,null,null))}remove(t){return new ds(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ms.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(t){let r=0,a=this.root;for(;!a.isEmpty();){const i=this.comparator(t,a.key);if(i===0)return r+a.left.size;i<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,a)=>(t(r,a),!1))}toString(){const t=[];return this.inorderTraversal((r,a)=>(t.push(`${r}:${a}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Hd(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Hd(this.root,t,this.comparator,!1)}getReverseIterator(){return new Hd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Hd(this.root,t,this.comparator,!0)}}class Hd{constructor(t,r,a,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=r?a(t.key,r):1,r&&i&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ms{constructor(t,r,a,i,l){this.key=t,this.value=r,this.color=a??Ms.RED,this.left=i??Ms.EMPTY,this.right=l??Ms.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,a,i,l){return new Ms(t??this.key,r??this.value,a??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,a){let i=this;const l=a(t,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(t,r,a),null):l===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(t,r,a)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ms.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let a,i=this;if(r(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(t,i.key)===0){if(i.right.isEmpty())return Ms.EMPTY;a=i.right.min(),i=i.copy(a.key,a.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ms.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ms.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const t=this.left.check();if(t!==this.right.check())throw ft();return t+(this.isRed()?0:1)}}Ms.EMPTY=null,Ms.RED=!0,Ms.BLACK=!1;Ms.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(t,r,a,i,l){return this}insert(t,r,a){return new Ms(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(t){this.comparator=t,this.data=new ds(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,a)=>(t(r),!1))}forEachInRange(t,r){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const i=a.getNext();if(this.comparator(i.key,t[1])>=0)return;r(i.key)}}forEachWhile(t,r){let a;for(a=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new tj(this.data.getIterator())}getIteratorFrom(t){return new tj(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(a=>{r=r.add(a)}),r}isEqual(t){if(!(t instanceof ks)||this.size!==t.size)return!1;const r=this.data.getIterator(),a=t.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,l=a.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new ks(this.comparator);return r.data=t,r}}class tj{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(t){this.fields=t,t.sort(Os.comparator)}static empty(){return new wr([])}unionWith(t){let r=new ks(Os.comparator);for(const a of this.fields)r=r.add(a);for(const a of t)r=r.add(a);return new wr(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Do(this.fields,t.fields,(r,a)=>r.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(i){try{return atob(i)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new U4("Invalid base64 string: "+l):l}}(t);return new Fs(r)}static fromUint8Array(t){const r=function(i){let l="";for(let o=0;o<i.length;++o)l+=String.fromCharCode(i[o]);return l}(t);return new Fs(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const a=new Uint8Array(r.length);for(let i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return wt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Fs.EMPTY_BYTE_STRING=new Fs("");const V8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rn(s){if(Mt(!!s),typeof s=="string"){let t=0;const r=V8.exec(s);if(Mt(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),t=Number(i)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:gs(s.seconds),nanos:gs(s.nanos)}}function gs(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Mn(s){return typeof s=="string"?Fs.fromBase64String(s):Fs.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4="server_timestamp",W4="__type__",q4="__previous_value__",H4="__local_write_time__";function Wf(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[W4])===null||r===void 0?void 0:r.stringValue)===$4}function om(s){const t=s.mapValue.fields[q4];return Wf(t)?om(t):t}function jc(s){const t=Rn(s.mapValue.fields[H4].timestampValue);return new Xt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(t,r,a,i,l,o,c,d,h){this.databaseId=t,this.appId=r,this.persistenceKey=a,this.host=i,this.ssl=l,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}const ux="(default)";class Nc{constructor(t,r){this.projectId=t,this.database=r||ux}static empty(){return new Nc("","")}get isDefaultDatabase(){return this.database===ux}isEqual(t){return t instanceof Nc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4="__type__",Q4="__max__",Gd={mapValue:{fields:{__type__:{stringValue:Q4}}}},K4="__vector__",xx="value";function On(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Wf(s)?4:F8(s)?9007199254740991:B8(s)?10:11:ft()}function va(s,t){if(s===t)return!0;const r=On(s);if(r!==On(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return jc(s).isEqual(jc(t));case 3:return function(i,l){if(typeof i.timestampValue=="string"&&typeof l.timestampValue=="string"&&i.timestampValue.length===l.timestampValue.length)return i.timestampValue===l.timestampValue;const o=Rn(i.timestampValue),c=Rn(l.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(i,l){return Mn(i.bytesValue).isEqual(Mn(l.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(i,l){return gs(i.geoPointValue.latitude)===gs(l.geoPointValue.latitude)&&gs(i.geoPointValue.longitude)===gs(l.geoPointValue.longitude)}(s,t);case 2:return function(i,l){if("integerValue"in i&&"integerValue"in l)return gs(i.integerValue)===gs(l.integerValue);if("doubleValue"in i&&"doubleValue"in l){const o=gs(i.doubleValue),c=gs(l.doubleValue);return o===c?dx(o)===dx(c):isNaN(o)&&isNaN(c)}return!1}(s,t);case 9:return Do(s.arrayValue.values||[],t.arrayValue.values||[],va);case 10:case 11:return function(i,l){const o=i.mapValue.fields||{},c=l.mapValue.fields||{};if(ej(o)!==ej(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!va(o[d],c[d])))return!1;return!0}(s,t);default:return ft()}}function wc(s,t){return(s.values||[]).find(r=>va(r,t))!==void 0}function Ao(s,t){if(s===t)return 0;const r=On(s),a=On(t);if(r!==a)return wt(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return wt(s.booleanValue,t.booleanValue);case 2:return function(l,o){const c=gs(l.integerValue||l.doubleValue),d=gs(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(s,t);case 3:return sj(s.timestampValue,t.timestampValue);case 4:return sj(jc(s),jc(t));case 5:return e0(s.stringValue,t.stringValue);case 6:return function(l,o){const c=Mn(l),d=Mn(o);return c.compareTo(d)}(s.bytesValue,t.bytesValue);case 7:return function(l,o){const c=l.split("/"),d=o.split("/");for(let h=0;h<c.length&&h<d.length;h++){const g=wt(c[h],d[h]);if(g!==0)return g}return wt(c.length,d.length)}(s.referenceValue,t.referenceValue);case 8:return function(l,o){const c=wt(gs(l.latitude),gs(o.latitude));return c!==0?c:wt(gs(l.longitude),gs(o.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return rj(s.arrayValue,t.arrayValue);case 10:return function(l,o){var c,d,h,g;const N=l.fields||{},k=o.fields||{},E=(c=N[xx])===null||c===void 0?void 0:c.arrayValue,y=(d=k[xx])===null||d===void 0?void 0:d.arrayValue,L=wt(((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0,((g=y==null?void 0:y.values)===null||g===void 0?void 0:g.length)||0);return L!==0?L:rj(E,y)}(s.mapValue,t.mapValue);case 11:return function(l,o){if(l===Gd.mapValue&&o===Gd.mapValue)return 0;if(l===Gd.mapValue)return 1;if(o===Gd.mapValue)return-1;const c=l.fields||{},d=Object.keys(c),h=o.fields||{},g=Object.keys(h);d.sort(),g.sort();for(let N=0;N<d.length&&N<g.length;++N){const k=e0(d[N],g[N]);if(k!==0)return k;const E=Ao(c[d[N]],h[g[N]]);if(E!==0)return E}return wt(d.length,g.length)}(s.mapValue,t.mapValue);default:throw ft()}}function sj(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return wt(s,t);const r=Rn(s),a=Rn(t),i=wt(r.seconds,a.seconds);return i!==0?i:wt(r.nanos,a.nanos)}function rj(s,t){const r=s.values||[],a=t.values||[];for(let i=0;i<r.length&&i<a.length;++i){const l=Ao(r[i],a[i]);if(l)return l}return wt(r.length,a.length)}function Ro(s){return t0(s)}function t0(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(r){const a=Rn(r);return`time(${a.seconds},${a.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(r){return Mn(r).toBase64()}(s.bytesValue):"referenceValue"in s?function(r){return ht.fromName(r).toString()}(s.referenceValue):"geoPointValue"in s?function(r){return`geo(${r.latitude},${r.longitude})`}(s.geoPointValue):"arrayValue"in s?function(r){let a="[",i=!0;for(const l of r.values||[])i?i=!1:a+=",",a+=t0(l);return a+"]"}(s.arrayValue):"mapValue"in s?function(r){const a=Object.keys(r.fields||{}).sort();let i="{",l=!0;for(const o of a)l?l=!1:i+=",",i+=`${o}:${t0(r.fields[o])}`;return i+"}"}(s.mapValue):ft()}function yu(s){switch(On(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=om(s);return t?16+yu(t):16;case 5:return 2*s.stringValue.length;case 6:return Mn(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((i,l)=>i+yu(l),0)}(s.arrayValue);case 10:case 11:return function(a){let i=0;return qn(a.fields,(l,o)=>{i+=l.length+yu(o)}),i}(s.mapValue);default:throw ft()}}function aj(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function s0(s){return!!s&&"integerValue"in s}function qf(s){return!!s&&"arrayValue"in s}function nj(s){return!!s&&"nullValue"in s}function ij(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function bu(s){return!!s&&"mapValue"in s}function B8(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[G4])===null||r===void 0?void 0:r.stringValue)===K4}function Ul(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return qn(s.mapValue.fields,(r,a)=>t.mapValue.fields[r]=Ul(a)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Ul(s.arrayValue.values[r]);return t}return Object.assign({},s)}function F8(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Q4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(t){this.value=t}static empty(){return new rr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let a=0;a<t.length-1;++a)if(r=(r.mapValue.fields||{})[t.get(a)],!bu(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ul(r)}setAll(t){let r=Os.emptyPath(),a={},i=[];t.forEach((o,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,a,i),a={},i=[],r=c.popLast()}o?a[c.lastSegment()]=Ul(o):i.push(c.lastSegment())});const l=this.getFieldsMap(r);this.applyChanges(l,a,i)}delete(t){const r=this.field(t.popLast());bu(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return va(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<t.length;++a){let i=r.mapValue.fields[t.get(a)];bu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[t.get(a)]=i),r=i}return r.mapValue.fields}applyChanges(t,r,a){qn(r,(i,l)=>t[i]=l);for(const i of a)delete t[i]}clone(){return new rr(Ul(this.value))}}function Y4(s){const t=[];return qn(s.fields,(r,a)=>{const i=new Os([r]);if(bu(a)){const l=Y4(a.mapValue).fields;if(l.length===0)t.push(i);else for(const o of l)t.push(i.child(o))}else t.push(i)}),new wr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(t,r,a,i,l,o,c){this.key=t,this.documentType=r,this.version=a,this.readTime=i,this.createTime=l,this.data=o,this.documentState=c}static newInvalidDocument(t){return new Es(t,0,gt.min(),gt.min(),gt.min(),rr.empty(),0)}static newFoundDocument(t,r,a,i){return new Es(t,1,r,gt.min(),a,i,0)}static newNoDocument(t,r){return new Es(t,2,r,gt.min(),gt.min(),rr.empty(),0)}static newUnknownDocument(t,r){return new Es(t,3,r,gt.min(),gt.min(),rr.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=rr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Es&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Es(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(t,r){this.position=t,this.inclusive=r}}function oj(s,t,r){let a=0;for(let i=0;i<s.position.length;i++){const l=t[i],o=s.position[i];if(l.field.isKeyField()?a=ht.comparator(ht.fromName(o.referenceValue),r.key):a=Ao(o,r.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function lj(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!va(s.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(t,r="asc"){this.field=t,this.dir=r}}function U8(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{}class js extends X4{constructor(t,r,a){super(),this.field=t,this.op=r,this.value=a}static create(t,r,a){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,a):new W8(t,r,a):r==="array-contains"?new G8(t,a):r==="in"?new Q8(t,a):r==="not-in"?new K8(t,a):r==="array-contains-any"?new Y8(t,a):new js(t,r,a)}static createKeyFieldInFilter(t,r,a){return r==="in"?new q8(t,a):new H8(t,a)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Ao(r,this.value)):r!==null&&On(this.value)===On(r)&&this.matchesComparison(Ao(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ft()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ra extends X4{constructor(t,r){super(),this.filters=t,this.op=r,this.ce=null}static create(t,r){return new ra(t,r)}matches(t){return J4(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function J4(s){return s.op==="and"}function Z4(s){return $8(s)&&J4(s)}function $8(s){for(const t of s.filters)if(t instanceof ra)return!1;return!0}function r0(s){if(s instanceof js)return s.field.canonicalString()+s.op.toString()+Ro(s.value);if(Z4(s))return s.filters.map(t=>r0(t)).join(",");{const t=s.filters.map(r=>r0(r)).join(",");return`${s.op}(${t})`}}function e1(s,t){return s instanceof js?function(a,i){return i instanceof js&&a.op===i.op&&a.field.isEqual(i.field)&&va(a.value,i.value)}(s,t):s instanceof ra?function(a,i){return i instanceof ra&&a.op===i.op&&a.filters.length===i.filters.length?a.filters.reduce((l,o,c)=>l&&e1(o,i.filters[c]),!0):!1}(s,t):void ft()}function t1(s){return s instanceof js?function(r){return`${r.field.canonicalString()} ${r.op} ${Ro(r.value)}`}(s):s instanceof ra?function(r){return r.op.toString()+" {"+r.getFilters().map(t1).join(" ,")+"}"}(s):"Filter"}class W8 extends js{constructor(t,r,a){super(t,r,a),this.key=ht.fromName(a.referenceValue)}matches(t){const r=ht.comparator(t.key,this.key);return this.matchesComparison(r)}}class q8 extends js{constructor(t,r){super(t,"in",r),this.keys=s1("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class H8 extends js{constructor(t,r){super(t,"not-in",r),this.keys=s1("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function s1(s,t){var r;return(((r=t.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(a=>ht.fromName(a.referenceValue))}class G8 extends js{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return qf(r)&&wc(r.arrayValue,this.value)}}class Q8 extends js{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&wc(this.value.arrayValue,r)}}class K8 extends js{constructor(t,r){super(t,"not-in",r)}matches(t){if(wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&!wc(this.value.arrayValue,r)}}class Y8 extends js{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!qf(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>wc(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(t,r=null,a=[],i=[],l=null,o=null,c=null){this.path=t,this.collectionGroup=r,this.orderBy=a,this.filters=i,this.limit=l,this.startAt=o,this.endAt=c,this.le=null}}function cj(s,t=null,r=[],a=[],i=null,l=null,o=null){return new X8(s,t,r,a,i,l,o)}function Hf(s){const t=Nt(s);if(t.le===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(a=>r0(a)).join(","),r+="|ob:",r+=t.orderBy.map(a=>function(l){return l.field.canonicalString()+l.dir}(a)).join(","),Kc(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>Ro(a)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>Ro(a)).join(",")),t.le=r}return t.le}function Gf(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<s.orderBy.length;r++)if(!U8(s.orderBy[r],t.orderBy[r]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let r=0;r<s.filters.length;r++)if(!e1(s.filters[r],t.filters[r]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!lj(s.startAt,t.startAt)&&lj(s.endAt,t.endAt)}function a0(s){return ht.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(t,r=null,a=[],i=[],l=null,o="F",c=null,d=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=i,this.limit=l,this.limitType=o,this.startAt=c,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function J8(s,t,r,a,i,l,o,c){return new Ko(s,t,r,a,i,l,o,c)}function lm(s){return new Ko(s)}function dj(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function r1(s){return s.collectionGroup!==null}function $l(s){const t=Nt(s);if(t.he===null){t.he=[];const r=new Set;for(const l of t.explicitOrderBy)t.he.push(l),r.add(l.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new ks(Os.comparator);return o.filters.forEach(d=>{d.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(t).forEach(l=>{r.has(l.canonicalString())||l.isKeyField()||t.he.push(new kc(l,a))}),r.has(Os.keyField().canonicalString())||t.he.push(new kc(Os.keyField(),a))}return t.he}function ma(s){const t=Nt(s);return t.Pe||(t.Pe=Z8(t,$l(s))),t.Pe}function Z8(s,t){if(s.limitType==="F")return cj(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(i=>{const l=i.dir==="desc"?"asc":"desc";return new kc(i.field,l)});const r=s.endAt?new mx(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new mx(s.startAt.position,s.startAt.inclusive):null;return cj(s.path,s.collectionGroup,t,s.filters,s.limit,r,a)}}function n0(s,t){const r=s.filters.concat([t]);return new Ko(s.path,s.collectionGroup,s.explicitOrderBy.slice(),r,s.limit,s.limitType,s.startAt,s.endAt)}function hx(s,t,r){return new Ko(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,r,s.startAt,s.endAt)}function cm(s,t){return Gf(ma(s),ma(t))&&s.limitType===t.limitType}function a1(s){return`${Hf(ma(s))}|lt:${s.limitType}`}function qi(s){return`Query(target=${function(r){let a=r.path.canonicalString();return r.collectionGroup!==null&&(a+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(a+=`, filters: [${r.filters.map(i=>t1(i)).join(", ")}]`),Kc(r.limit)||(a+=", limit: "+r.limit),r.orderBy.length>0&&(a+=`, orderBy: [${r.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),r.startAt&&(a+=", startAt: ",a+=r.startAt.inclusive?"b:":"a:",a+=r.startAt.position.map(i=>Ro(i)).join(",")),r.endAt&&(a+=", endAt: ",a+=r.endAt.inclusive?"a:":"b:",a+=r.endAt.position.map(i=>Ro(i)).join(",")),`Target(${a})`}(ma(s))}; limitType=${s.limitType})`}function dm(s,t){return t.isFoundDocument()&&function(a,i){const l=i.key.path;return a.collectionGroup!==null?i.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):ht.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)}(s,t)&&function(a,i){for(const l of $l(a))if(!l.field.isKeyField()&&i.data.field(l.field)===null)return!1;return!0}(s,t)&&function(a,i){for(const l of a.filters)if(!l.matches(i))return!1;return!0}(s,t)&&function(a,i){return!(a.startAt&&!function(o,c,d){const h=oj(o,c,d);return o.inclusive?h<=0:h<0}(a.startAt,$l(a),i)||a.endAt&&!function(o,c,d){const h=oj(o,c,d);return o.inclusive?h>=0:h>0}(a.endAt,$l(a),i))}(s,t)}function eD(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function n1(s){return(t,r)=>{let a=!1;for(const i of $l(s)){const l=tD(i,t,r);if(l!==0)return l;a=a||i.field.isKeyField()}return 0}}function tD(s,t,r){const a=s.field.isKeyField()?ht.comparator(t.key,r.key):function(l,o,c){const d=o.data.field(l),h=c.data.field(l);return d!==null&&h!==null?Ao(d,h):ft()}(s.field,t,r);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return ft()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a!==void 0){for(const[i,l]of a)if(this.equalsFn(i,t))return l}}has(t){return this.get(t)!==void 0}set(t,r){const a=this.mapKeyFn(t),i=this.inner[a];if(i===void 0)return this.inner[a]=[[t,r]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],t))return void(i[l]=[t,r]);i.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return!1;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],t))return a.length===1?delete this.inner[r]:a.splice(i,1),this.innerSize--,!0;return!1}forEach(t){qn(this.inner,(r,a)=>{for(const[i,l]of a)t(i,l)})}isEmpty(){return F4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=new ds(ht.comparator);function qa(){return sD}const i1=new ds(ht.comparator);function El(...s){let t=i1;for(const r of s)t=t.insert(r.key,r);return t}function o1(s){let t=i1;return s.forEach((r,a)=>t=t.insert(r,a.overlayedDocument)),t}function oi(){return Wl()}function l1(){return Wl()}function Wl(){return new Di(s=>s.toString(),(s,t)=>s.isEqual(t))}const rD=new ds(ht.comparator),aD=new ks(ht.comparator);function _t(...s){let t=aD;for(const r of s)t=t.add(r);return t}const nD=new ks(wt);function iD(){return nD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dx(t)?"-0":t}}function c1(s){return{integerValue:""+s}}function d1(s,t){return M8(t)?c1(t):Qf(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this._=void 0}}function oD(s,t,r){return s instanceof Ic?function(i,l){const o={fields:{[W4]:{stringValue:$4},[H4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return l&&Wf(l)&&(l=om(l)),l&&(o.fields[q4]=l),{mapValue:o}}(r,t):s instanceof Pc?x1(s,t):s instanceof Sc?m1(s,t):function(i,l){const o=u1(i,l),c=uj(o)+uj(i.Ie);return s0(o)&&s0(i.Ie)?c1(c):Qf(i.serializer,c)}(s,t)}function lD(s,t,r){return s instanceof Pc?x1(s,t):s instanceof Sc?m1(s,t):r}function u1(s,t){return s instanceof Cc?function(a){return s0(a)||function(l){return!!l&&"doubleValue"in l}(a)}(t)?t:{integerValue:0}:null}class Ic extends um{}class Pc extends um{constructor(t){super(),this.elements=t}}function x1(s,t){const r=h1(t);for(const a of s.elements)r.some(i=>va(i,a))||r.push(a);return{arrayValue:{values:r}}}class Sc extends um{constructor(t){super(),this.elements=t}}function m1(s,t){let r=h1(t);for(const a of s.elements)r=r.filter(i=>!va(i,a));return{arrayValue:{values:r}}}class Cc extends um{constructor(t,r){super(),this.serializer=t,this.Ie=r}}function uj(s){return gs(s.integerValue||s.doubleValue)}function h1(s){return qf(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(t,r){this.field=t,this.transform=r}}function cD(s,t){return s.field.isEqual(t.field)&&function(a,i){return a instanceof Pc&&i instanceof Pc||a instanceof Sc&&i instanceof Sc?Do(a.elements,i.elements,va):a instanceof Cc&&i instanceof Cc?va(a.Ie,i.Ie):a instanceof Ic&&i instanceof Ic}(s.transform,t.transform)}class dD{constructor(t,r){this.version=t,this.transformResults=r}}class Ls{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Ls}static exists(t){return new Ls(void 0,t)}static updateTime(t){return new Ls(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function vu(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class xm{}function f1(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new mm(s.key,Ls.none()):new Yc(s.key,s.data,Ls.none());{const r=s.data,a=rr.empty();let i=new ks(Os.comparator);for(let l of t.fields)if(!i.has(l)){let o=r.field(l);o===null&&l.length>1&&(l=l.popLast(),o=r.field(l)),o===null?a.delete(l):a.set(l,o),i=i.add(l)}return new Hn(s.key,a,new wr(i.toArray()),Ls.none())}}function uD(s,t,r){s instanceof Yc?function(i,l,o){const c=i.value.clone(),d=mj(i.fieldTransforms,l,o.transformResults);c.setAll(d),l.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(s,t,r):s instanceof Hn?function(i,l,o){if(!vu(i.precondition,l))return void l.convertToUnknownDocument(o.version);const c=mj(i.fieldTransforms,l,o.transformResults),d=l.data;d.setAll(g1(i)),d.setAll(c),l.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(s,t,r):function(i,l,o){l.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,r)}function ql(s,t,r,a){return s instanceof Yc?function(l,o,c,d){if(!vu(l.precondition,o))return c;const h=l.value.clone(),g=hj(l.fieldTransforms,d,o);return h.setAll(g),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(s,t,r,a):s instanceof Hn?function(l,o,c,d){if(!vu(l.precondition,o))return c;const h=hj(l.fieldTransforms,d,o),g=o.data;return g.setAll(g1(l)),g.setAll(h),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),c===null?null:c.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(N=>N.field))}(s,t,r,a):function(l,o,c){return vu(l.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(s,t,r)}function xD(s,t){let r=null;for(const a of s.fieldTransforms){const i=t.data.field(a.field),l=u1(a.transform,i||null);l!=null&&(r===null&&(r=rr.empty()),r.set(a.field,l))}return r||null}function xj(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(a,i){return a===void 0&&i===void 0||!(!a||!i)&&Do(a,i,(l,o)=>cD(l,o))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Yc extends xm{constructor(t,r,a,i=[]){super(),this.key=t,this.value=r,this.precondition=a,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hn extends xm{constructor(t,r,a,i,l=[]){super(),this.key=t,this.data=r,this.fieldMask=a,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function g1(s){const t=new Map;return s.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=s.data.field(r);t.set(r,a)}}),t}function mj(s,t,r){const a=new Map;Mt(s.length===r.length);for(let i=0;i<r.length;i++){const l=s[i],o=l.transform,c=t.data.field(l.field);a.set(l.field,lD(o,c,r[i]))}return a}function hj(s,t,r){const a=new Map;for(const i of s){const l=i.transform,o=r.data.field(i.field);a.set(i.field,oD(l,o,t))}return a}class mm extends xm{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y1 extends xm{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(t,r,a,i){this.batchId=t,this.localWriteTime=r,this.baseMutations=a,this.mutations=i}applyToRemoteDocument(t,r){const a=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(t.key)&&uD(l,t,a[i])}}applyToLocalView(t,r){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(r=ql(a,t,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(r=ql(a,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const a=l1();return this.mutations.forEach(i=>{const l=t.get(i.key),o=l.overlayedDocument;let c=this.applyToLocalView(o,l.mutatedFields);c=r.has(i.key)?null:c;const d=f1(o,c);d!==null&&a.set(i.key,d),o.isValidDocument()||o.convertToNoDocument(gt.min())}),a}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),_t())}isEqual(t){return this.batchId===t.batchId&&Do(this.mutations,t.mutations,(r,a)=>xj(r,a))&&Do(this.baseMutations,t.baseMutations,(r,a)=>xj(r,a))}}class Kf{constructor(t,r,a,i){this.batch=t,this.commitVersion=r,this.mutationResults=a,this.docVersions=i}static from(t,r,a){Mt(t.mutations.length===a.length);let i=function(){return rD}();const l=t.mutations;for(let o=0;o<l.length;o++)i=i.insert(l[o].key,a[o].version);return new Kf(t,r,a,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bs,Rt;function b1(s){switch(s){case Ee.OK:return ft();case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return ft()}}function v1(s){if(s===void 0)return Wa("GRPC error has no .code"),Ee.UNKNOWN;switch(s){case bs.OK:return Ee.OK;case bs.CANCELLED:return Ee.CANCELLED;case bs.UNKNOWN:return Ee.UNKNOWN;case bs.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case bs.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case bs.INTERNAL:return Ee.INTERNAL;case bs.UNAVAILABLE:return Ee.UNAVAILABLE;case bs.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case bs.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case bs.NOT_FOUND:return Ee.NOT_FOUND;case bs.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case bs.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case bs.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case bs.ABORTED:return Ee.ABORTED;case bs.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case bs.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case bs.DATA_LOSS:return Ee.DATA_LOSS;default:return ft()}}(Rt=bs||(bs={}))[Rt.OK=0]="OK",Rt[Rt.CANCELLED=1]="CANCELLED",Rt[Rt.UNKNOWN=2]="UNKNOWN",Rt[Rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rt[Rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rt[Rt.NOT_FOUND=5]="NOT_FOUND",Rt[Rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rt[Rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rt[Rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rt[Rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rt[Rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rt[Rt.ABORTED=10]="ABORTED",Rt[Rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rt[Rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rt[Rt.INTERNAL=13]="INTERNAL",Rt[Rt.UNAVAILABLE=14]="UNAVAILABLE",Rt[Rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=new Sn([4294967295,4294967295],0);function pj(s){const t=V4().encode(s),r=new _4;return r.update(t),new Uint8Array(r.digest())}function fj(s){const t=new DataView(s.buffer),r=t.getUint32(0,!0),a=t.getUint32(4,!0),i=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Sn([r,a],0),new Sn([i,l],0)]}class Yf{constructor(t,r,a){if(this.bitmap=t,this.padding=r,this.hashCount=a,r<0||r>=8)throw new Tl(`Invalid padding: ${r}`);if(a<0)throw new Tl(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new Tl(`Invalid hash count: ${a}`);if(t.length===0&&r!==0)throw new Tl(`Invalid padding when bitmap length is 0: ${r}`);this.Ee=8*t.length-r,this.de=Sn.fromNumber(this.Ee)}Ae(t,r,a){let i=t.add(r.multiply(Sn.fromNumber(a)));return i.compare(fD)===1&&(i=new Sn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const r=pj(t),[a,i]=fj(r);for(let l=0;l<this.hashCount;l++){const o=this.Ae(a,i,l);if(!this.Re(o))return!1}return!0}static create(t,r,a){const i=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),o=new Yf(l,i,r);return a.forEach(c=>o.insert(c)),o}insert(t){if(this.Ee===0)return;const r=pj(t),[a,i]=fj(r);for(let l=0;l<this.hashCount;l++){const o=this.Ae(a,i,l);this.Ve(o)}}Ve(t){const r=Math.floor(t/8),a=t%8;this.bitmap[r]|=1<<a}}class Tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(t,r,a,i,l){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,r,a){const i=new Map;return i.set(t,Xc.createSynthesizedTargetChangeForCurrentChange(t,r,a)),new hm(gt.min(),i,new ds(wt),qa(),_t())}}class Xc{constructor(t,r,a,i,l){this.resumeToken=t,this.current=r,this.addedDocuments=a,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,r,a){return new Xc(a,r,_t(),_t(),_t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(t,r,a,i){this.me=t,this.removedTargetIds=r,this.key=a,this.fe=i}}class j1{constructor(t,r){this.targetId=t,this.ge=r}}class N1{constructor(t,r,a=Fs.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=r,this.resumeToken=a,this.cause=i}}class gj{constructor(){this.pe=0,this.ye=yj(),this.we=Fs.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=_t(),r=_t(),a=_t();return this.ye.forEach((i,l)=>{switch(l){case 0:t=t.add(i);break;case 2:r=r.add(i);break;case 1:a=a.add(i);break;default:ft()}}),new Xc(this.we,this.Se,t,r,a)}Me(){this.be=!1,this.ye=yj()}xe(t,r){this.be=!0,this.ye=this.ye.insert(t,r)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Mt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class gD{constructor(t){this.ke=t,this.qe=new Map,this.Qe=qa(),this.$e=Qd(),this.Ue=Qd(),this.Ke=new ds(wt)}We(t){for(const r of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(r,t.fe):this.ze(r,t.key,t.fe);for(const r of t.removedTargetIds)this.ze(r,t.key,t.fe)}je(t){this.forEachTarget(t,r=>{const a=this.He(r);switch(t.state){case 0:this.Je(r)&&a.Ce(t.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(t.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(r);break;case 3:this.Je(r)&&(a.Le(),a.Ce(t.resumeToken));break;case 4:this.Je(r)&&(this.Ye(r),a.Ce(t.resumeToken));break;default:ft()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.qe.forEach((a,i)=>{this.Je(i)&&r(i)})}Ze(t){const r=t.targetId,a=t.ge.count,i=this.Xe(r);if(i){const l=i.target;if(a0(l))if(a===0){const o=new ht(l.path);this.ze(r,o,Es.newNoDocument(o,gt.min()))}else Mt(a===1);else{const o=this.et(r);if(o!==a){const c=this.tt(t),d=c?this.nt(c,t,o):1;if(d!==0){this.Ye(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(r,h)}}}}}tt(t){const r=t.ge.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:a="",padding:i=0},hashCount:l=0}=r;let o,c;try{o=Mn(a).toUint8Array()}catch(d){if(d instanceof U4)return _o("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Yf(o,i,l)}catch(d){return _o(d instanceof Tl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ee===0?null:c}nt(t,r,a){return r.ge.count===a-this.st(t,r.targetId)?0:2}st(t,r){const a=this.ke.getRemoteKeysForTarget(r);let i=0;return a.forEach(l=>{const o=this.ke.it(),c=`projects/${o.projectId}/databases/${o.database}/documents/${l.path.canonicalString()}`;t.mightContain(c)||(this.ze(r,l,null),i++)}),i}ot(t){const r=new Map;this.qe.forEach((l,o)=>{const c=this.Xe(o);if(c){if(l.current&&a0(c.target)){const d=new ht(c.target.path);this._t(d).has(o)||this.ut(o,d)||this.ze(o,d,Es.newNoDocument(d,t))}l.ve&&(r.set(o,l.Fe()),l.Me())}});let a=_t();this.Ue.forEach((l,o)=>{let c=!0;o.forEachWhile(d=>{const h=this.Xe(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(a=a.add(l))}),this.Qe.forEach((l,o)=>o.setReadTime(t));const i=new hm(t,r,this.Ke,this.Qe,a);return this.Qe=qa(),this.$e=Qd(),this.Ue=Qd(),this.Ke=new ds(wt),i}Ge(t,r){if(!this.Je(t))return;const a=this.ut(t,r.key)?2:0;this.He(t).xe(r.key,a),this.Qe=this.Qe.insert(r.key,r),this.$e=this.$e.insert(r.key,this._t(r.key).add(t)),this.Ue=this.Ue.insert(r.key,this.ct(r.key).add(t))}ze(t,r,a){if(!this.Je(t))return;const i=this.He(t);this.ut(t,r)?i.xe(r,1):i.Oe(r),this.Ue=this.Ue.insert(r,this.ct(r).delete(t)),this.Ue=this.Ue.insert(r,this.ct(r).add(t)),a&&(this.Qe=this.Qe.insert(r,a))}removeTarget(t){this.qe.delete(t)}et(t){const r=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let r=this.qe.get(t);return r||(r=new gj,this.qe.set(t,r)),r}ct(t){let r=this.Ue.get(t);return r||(r=new ks(wt),this.Ue=this.Ue.insert(t,r)),r}_t(t){let r=this.$e.get(t);return r||(r=new ks(wt),this.$e=this.$e.insert(t,r)),r}Je(t){const r=this.Xe(t)!==null;return r||Ze("WatchChangeAggregator","Detected inactive target",t),r}Xe(t){const r=this.qe.get(t);return r&&r.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new gj),this.ke.getRemoteKeysForTarget(t).forEach(r=>{this.ze(t,r,null)})}ut(t,r){return this.ke.getRemoteKeysForTarget(t).has(r)}}function Qd(){return new ds(ht.comparator)}function yj(){return new ds(ht.comparator)}const yD=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),bD=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),vD=(()=>({and:"AND",or:"OR"}))();class jD{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function i0(s,t){return s.useProto3Json||Kc(t)?t:{value:t}}function px(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function w1(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function ND(s,t){return px(s,t.toTimestamp())}function Ir(s){return Mt(!!s),gt.fromTimestamp(function(r){const a=Rn(r);return new Xt(a.seconds,a.nanos)}(s))}function Xf(s,t){return o0(s,t).canonicalString()}function o0(s,t){const r=function(i){return new Qt(["projects",i.projectId,"databases",i.database])}(s).child("documents");return t===void 0?r:r.child(t)}function k1(s){const t=Qt.fromString(s);return Mt(T1(t)),t}function fx(s,t){return Xf(s.databaseId,t.path)}function Hl(s,t){const r=k1(t);if(r.get(1)!==s.databaseId.projectId)throw new Ye(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new Ye(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new ht(P1(r))}function I1(s,t){return Xf(s.databaseId,t)}function wD(s){const t=k1(s);return t.length===4?Qt.emptyPath():P1(t)}function l0(s){return new Qt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function P1(s){return Mt(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function bj(s,t,r){return{name:fx(s,t),fields:r.value.mapValue.fields}}function kD(s,t){return"found"in t?function(a,i){Mt(!!i.found),i.found.name,i.found.updateTime;const l=Hl(a,i.found.name),o=Ir(i.found.updateTime),c=i.found.createTime?Ir(i.found.createTime):gt.min(),d=new rr({mapValue:{fields:i.found.fields}});return Es.newFoundDocument(l,o,c,d)}(s,t):"missing"in t?function(a,i){Mt(!!i.missing),Mt(!!i.readTime);const l=Hl(a,i.missing),o=Ir(i.readTime);return Es.newNoDocument(l,o)}(s,t):ft()}function ID(s,t){let r;if("targetChange"in t){t.targetChange;const a=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ft()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],l=function(h,g){return h.useProto3Json?(Mt(g===void 0||typeof g=="string"),Fs.fromBase64String(g||"")):(Mt(g===void 0||g instanceof Buffer||g instanceof Uint8Array),Fs.fromUint8Array(g||new Uint8Array))}(s,t.targetChange.resumeToken),o=t.targetChange.cause,c=o&&function(h){const g=h.code===void 0?Ee.UNKNOWN:v1(h.code);return new Ye(g,h.message||"")}(o);r=new N1(a,i,l,c||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const i=Hl(s,a.document.name),l=Ir(a.document.updateTime),o=a.document.createTime?Ir(a.document.createTime):gt.min(),c=new rr({mapValue:{fields:a.document.fields}}),d=Es.newFoundDocument(i,l,o,c),h=a.targetIds||[],g=a.removedTargetIds||[];r=new ju(h,g,d.key,d)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const i=Hl(s,a.document),l=a.readTime?Ir(a.readTime):gt.min(),o=Es.newNoDocument(i,l),c=a.removedTargetIds||[];r=new ju([],c,o.key,o)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const i=Hl(s,a.document),l=a.removedTargetIds||[];r=new ju([],l,i,null)}else{if(!("filter"in t))return ft();{t.filter;const a=t.filter;a.targetId;const{count:i=0,unchangedNames:l}=a,o=new pD(i,l),c=a.targetId;r=new j1(c,o)}}return r}function S1(s,t){let r;if(t instanceof Yc)r={update:bj(s,t.key,t.value)};else if(t instanceof mm)r={delete:fx(s,t.key)};else if(t instanceof Hn)r={update:bj(s,t.key,t.data),updateMask:RD(t.fieldMask)};else{if(!(t instanceof y1))return ft();r={verify:fx(s,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(a=>function(l,o){const c=o.transform;if(c instanceof Ic)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Pc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Sc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Cc)return{fieldPath:o.field.canonicalString(),increment:c.Ie};throw ft()}(0,a))),t.precondition.isNone||(r.currentDocument=function(i,l){return l.updateTime!==void 0?{updateTime:ND(i,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ft()}(s,t.precondition)),r}function PD(s,t){return s&&s.length>0?(Mt(t!==void 0),s.map(r=>function(i,l){let o=i.updateTime?Ir(i.updateTime):Ir(l);return o.isEqual(gt.min())&&(o=Ir(l)),new dD(o,i.transformResults||[])}(r,t))):[]}function SD(s,t){return{documents:[I1(s,t.path)]}}function CD(s,t){const r={structuredQuery:{}},a=t.path;let i;t.collectionGroup!==null?(i=a,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=a.popLast(),r.structuredQuery.from=[{collectionId:a.lastSegment()}]),r.parent=I1(s,i);const l=function(h){if(h.length!==0)return E1(ra.create(h,"and"))}(t.filters);l&&(r.structuredQuery.where=l);const o=function(h){if(h.length!==0)return h.map(g=>function(k){return{field:Hi(k.field),direction:_D(k.dir)}}(g))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);const c=i0(s,t.limit);return c!==null&&(r.structuredQuery.limit=c),t.startAt&&(r.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ht:r,parent:i}}function ED(s){let t=wD(s.parent);const r=s.structuredQuery,a=r.from?r.from.length:0;let i=null;if(a>0){Mt(a===1);const g=r.from[0];g.allDescendants?i=g.collectionId:t=t.child(g.collectionId)}let l=[];r.where&&(l=function(N){const k=C1(N);return k instanceof ra&&Z4(k)?k.getFilters():[k]}(r.where));let o=[];r.orderBy&&(o=function(N){return N.map(k=>function(y){return new kc(Gi(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(k))}(r.orderBy));let c=null;r.limit&&(c=function(N){let k;return k=typeof N=="object"?N.value:N,Kc(k)?null:k}(r.limit));let d=null;r.startAt&&(d=function(N){const k=!!N.before,E=N.values||[];return new mx(E,k)}(r.startAt));let h=null;return r.endAt&&(h=function(N){const k=!N.before,E=N.values||[];return new mx(E,k)}(r.endAt)),J8(t,i,o,l,c,"F",d,h)}function TD(s,t){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ft()}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function C1(s){return s.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const a=Gi(r.unaryFilter.field);return js.create(a,"==",{doubleValue:NaN});case"IS_NULL":const i=Gi(r.unaryFilter.field);return js.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Gi(r.unaryFilter.field);return js.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Gi(r.unaryFilter.field);return js.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}(s):s.fieldFilter!==void 0?function(r){return js.create(Gi(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(r.fieldFilter.op),r.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(r){return ra.create(r.compositeFilter.filters.map(a=>C1(a)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ft()}}(r.compositeFilter.op))}(s):ft()}function _D(s){return yD[s]}function DD(s){return bD[s]}function AD(s){return vD[s]}function Hi(s){return{fieldPath:s.canonicalString()}}function Gi(s){return Os.fromServerFormat(s.fieldPath)}function E1(s){return s instanceof js?function(r){if(r.op==="=="){if(ij(r.value))return{unaryFilter:{field:Hi(r.field),op:"IS_NAN"}};if(nj(r.value))return{unaryFilter:{field:Hi(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(ij(r.value))return{unaryFilter:{field:Hi(r.field),op:"IS_NOT_NAN"}};if(nj(r.value))return{unaryFilter:{field:Hi(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hi(r.field),op:DD(r.op),value:r.value}}}(s):s instanceof ra?function(r){const a=r.getFilters().map(i=>E1(i));return a.length===1?a[0]:{compositeFilter:{op:AD(r.op),filters:a}}}(s):ft()}function RD(s){const t=[];return s.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function T1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t,r,a,i,l=gt.min(),o=gt.min(),c=Fs.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=r,this.purpose=a,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(t){return new pn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(t){this.Tt=t}}function OD(s){const t=ED({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?hx(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this.Tn=new VD}addToCollectionParentIndex(t,r){return this.Tn.add(r),Ae.resolve()}getCollectionParents(t,r){return Ae.resolve(this.Tn.getEntries(r))}addFieldIndex(t,r){return Ae.resolve()}deleteFieldIndex(t,r){return Ae.resolve()}deleteAllFieldIndexes(t){return Ae.resolve()}createTargetIndexes(t,r){return Ae.resolve()}getDocumentsMatchingTarget(t,r){return Ae.resolve(null)}getIndexType(t,r){return Ae.resolve(0)}getFieldIndexes(t,r){return Ae.resolve([])}getNextCollectionGroupToUpdate(t){return Ae.resolve(null)}getMinOffset(t,r){return Ae.resolve(An.min())}getMinOffsetFromCollectionGroup(t,r){return Ae.resolve(An.min())}updateCollectionGroup(t,r,a){return Ae.resolve()}updateIndexEntries(t,r){return Ae.resolve()}}class VD{constructor(){this.index={}}add(t){const r=t.lastSegment(),a=t.popLast(),i=this.index[r]||new ks(Qt.comparator),l=!i.has(a);return this.index[r]=i.add(a),l}has(t){const r=t.lastSegment(),a=t.popLast(),i=this.index[r];return i&&i.has(a)}getEntries(t){return(this.index[t]||new ks(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_1=41943040;class cr{static withCacheSize(t){return new cr(t,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr.DEFAULT_COLLECTION_PERCENTILE=10,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cr.DEFAULT=new cr(_1,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cr.DISABLED=new cr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new Mo(0)}static Kn(){return new Mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj="LruGarbageCollector",zD=1048576;function Nj([s,t],[r,a]){const i=wt(s,r);return i===0?wt(t,a):i}class BD{constructor(t){this.Hn=t,this.buffer=new ks(Nj),this.Jn=0}Yn(){return++this.Jn}Zn(t){const r=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();Nj(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class FD{constructor(t,r,a){this.garbageCollector=t,this.asyncQueue=r,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Ze(jj,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Qo(r)?Ze(jj,"Ignoring IndexedDB error during garbage collection: ",r):await Go(r)}await this.er(3e5)})}}class UD{constructor(t,r){this.tr=t,this.params=r}calculateTargetCount(t,r){return this.tr.nr(t).next(a=>Math.floor(r/100*a))}nthSequenceNumber(t,r){if(r===0)return Ae.resolve(im.ae);const a=new BD(r);return this.tr.forEachTarget(t,i=>a.Zn(i.sequenceNumber)).next(()=>this.tr.rr(t,i=>a.Zn(i))).next(()=>a.maxValue)}removeTargets(t,r,a){return this.tr.removeTargets(t,r,a)}removeOrphanedDocuments(t,r){return this.tr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(vj)):this.getCacheSize(t).next(a=>a<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vj):this.ir(t,r))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,r){let a,i,l,o,c,d,h;const g=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),i=this.params.maximumSequenceNumbersToCollect):i=N,o=Date.now(),this.nthSequenceNumber(t,i))).next(N=>(a=N,c=Date.now(),this.removeTargets(t,a,r))).next(N=>(l=N,d=Date.now(),this.removeOrphanedDocuments(t,a))).next(N=>(h=Date.now(),Wi()<=Tt.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-g}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${l} targets in `+(d-c)+`ms
	Removed ${N} documents in `+(h-d)+`ms
Total Duration: ${h-g}ms`),Ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:N})))}}function $D(s,t){return new UD(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(){this.changes=new Di(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,Es.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const a=this.changes.get(r);return a!==void 0?Ae.resolve(a):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(t,r,a,i){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=i}getDocument(t,r){let a=null;return this.documentOverlayCache.getOverlay(t,r).next(i=>(a=i,this.remoteDocumentCache.getEntry(t,r))).next(i=>(a!==null&&ql(a.mutation,i,wr.empty(),Xt.now()),i))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.getLocalViewOfDocuments(t,a,_t()).next(()=>a))}getLocalViewOfDocuments(t,r,a=_t()){const i=oi();return this.populateOverlays(t,i,r).next(()=>this.computeViews(t,r,i,a).next(l=>{let o=El();return l.forEach((c,d)=>{o=o.insert(c,d.overlayedDocument)}),o}))}getOverlayedDocuments(t,r){const a=oi();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,_t()))}populateOverlays(t,r,a){const i=[];return a.forEach(l=>{r.has(l)||i.push(l)}),this.documentOverlayCache.getOverlays(t,i).next(l=>{l.forEach((o,c)=>{r.set(o,c)})})}computeViews(t,r,a,i){let l=qa();const o=Wl(),c=function(){return Wl()}();return r.forEach((d,h)=>{const g=a.get(h.key);i.has(h.key)&&(g===void 0||g.mutation instanceof Hn)?l=l.insert(h.key,h):g!==void 0?(o.set(h.key,g.mutation.getFieldMask()),ql(g.mutation,h,g.mutation.getFieldMask(),Xt.now())):o.set(h.key,wr.empty())}),this.recalculateAndSaveOverlays(t,l).next(d=>(d.forEach((h,g)=>o.set(h,g)),r.forEach((h,g)=>{var N;return c.set(h,new qD(g,(N=o.get(h))!==null&&N!==void 0?N:null))}),c))}recalculateAndSaveOverlays(t,r){const a=Wl();let i=new ds((o,c)=>o-c),l=_t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(o=>{for(const c of o)c.keys().forEach(d=>{const h=r.get(d);if(h===null)return;let g=a.get(d)||wr.empty();g=c.applyToLocalView(h,g),a.set(d,g);const N=(i.get(c.batchId)||_t()).add(d);i=i.insert(c.batchId,N)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,g=d.value,N=l1();g.forEach(k=>{if(!l.has(k)){const E=f1(r.get(k),a.get(k));E!==null&&N.set(k,E),l=l.add(k)}}),o.push(this.documentOverlayCache.saveOverlays(t,h,N))}return Ae.waitFor(o)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.recalculateAndSaveOverlays(t,a))}getDocumentsMatchingQuery(t,r,a,i){return function(o){return ht.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):r1(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,a,i):this.getDocumentsMatchingCollectionQuery(t,r,a,i)}getNextDocuments(t,r,a,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,a,i).next(l=>{const o=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,a.largestBatchId,i-l.size):Ae.resolve(oi());let c=vc,d=l;return o.next(h=>Ae.forEach(h,(g,N)=>(c<N.largestBatchId&&(c=N.largestBatchId),l.get(g)?Ae.resolve():this.remoteDocumentCache.getEntry(t,g).next(k=>{d=d.insert(g,k)}))).next(()=>this.populateOverlays(t,h,l)).next(()=>this.computeViews(t,d,h,_t())).next(g=>({batchId:c,changes:o1(g)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new ht(r)).next(a=>{let i=El();return a.isFoundDocument()&&(i=i.insert(a.key,a)),i})}getDocumentsMatchingCollectionGroupQuery(t,r,a,i){const l=r.collectionGroup;let o=El();return this.indexManager.getCollectionParents(t,l).next(c=>Ae.forEach(c,d=>{const h=function(N,k){return new Ko(k,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt)}(r,d.child(l));return this.getDocumentsMatchingCollectionQuery(t,h,a,i).next(g=>{g.forEach((N,k)=>{o=o.insert(N,k)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,r,a,i){let l;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,a.largestBatchId).next(o=>(l=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,a,l,i))).next(o=>{l.forEach((d,h)=>{const g=h.getKey();o.get(g)===null&&(o=o.insert(g,Es.newInvalidDocument(g)))});let c=El();return o.forEach((d,h)=>{const g=l.get(d);g!==void 0&&ql(g.mutation,h,wr.empty(),Xt.now()),dm(r,h)&&(c=c.insert(d,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,r){return Ae.resolve(this.dr.get(r))}saveBundleMetadata(t,r){return this.dr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Ir(i.createTime)}}(r)),Ae.resolve()}getNamedQuery(t,r){return Ae.resolve(this.Ar.get(r))}saveNamedQuery(t,r){return this.Ar.set(r.name,function(i){return{name:i.name,query:OD(i.bundledQuery),readTime:Ir(i.readTime)}}(r)),Ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(){this.overlays=new ds(ht.comparator),this.Rr=new Map}getOverlay(t,r){return Ae.resolve(this.overlays.get(r))}getOverlays(t,r){const a=oi();return Ae.forEach(r,i=>this.getOverlay(t,i).next(l=>{l!==null&&a.set(i,l)})).next(()=>a)}saveOverlays(t,r,a){return a.forEach((i,l)=>{this.Et(t,r,l)}),Ae.resolve()}removeOverlaysForBatchId(t,r,a){const i=this.Rr.get(a);return i!==void 0&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(a)),Ae.resolve()}getOverlaysForCollection(t,r,a){const i=oi(),l=r.length+1,o=new ht(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===l&&d.largestBatchId>a&&i.set(d.getKey(),d)}return Ae.resolve(i)}getOverlaysForCollectionGroup(t,r,a,i){let l=new ds((h,g)=>h-g);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>a){let g=l.get(h.largestBatchId);g===null&&(g=oi(),l=l.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const c=oi(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((h,g)=>c.set(h,g)),!(c.size()>=i)););return Ae.resolve(c)}Et(t,r,a){const i=this.overlays.get(a.key);if(i!==null){const o=this.Rr.get(i.largestBatchId).delete(a.key);this.Rr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(a.key,new hD(r,a));let l=this.Rr.get(r);l===void 0&&(l=_t(),this.Rr.set(r,l)),this.Rr.set(r,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.sessionToken=Fs.EMPTY_BYTE_STRING}getSessionToken(t){return Ae.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this.Vr=new ks(Ps.mr),this.gr=new ks(Ps.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,r){const a=new Ps(t,r);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(t,r){t.forEach(a=>this.addReference(a,r))}removeReference(t,r){this.wr(new Ps(t,r))}Sr(t,r){t.forEach(a=>this.removeReference(a,r))}br(t){const r=new ht(new Qt([])),a=new Ps(r,t),i=new Ps(r,t+1),l=[];return this.gr.forEachInRange([a,i],o=>{this.wr(o),l.push(o.key)}),l}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const r=new ht(new Qt([])),a=new Ps(r,t),i=new Ps(r,t+1);let l=_t();return this.gr.forEachInRange([a,i],o=>{l=l.add(o.key)}),l}containsKey(t){const r=new Ps(t,0),a=this.Vr.firstAfterOrEqual(r);return a!==null&&t.isEqual(a.key)}}class Ps{constructor(t,r){this.key=t,this.Cr=r}static mr(t,r){return ht.comparator(t.key,r.key)||wt(t.Cr,r.Cr)}static pr(t,r){return wt(t.Cr,r.Cr)||ht.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Fr=1,this.Mr=new ks(Ps.mr)}checkEmpty(t){return Ae.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,a,i){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new mD(l,r,a,i);this.mutationQueue.push(o);for(const c of i)this.Mr=this.Mr.add(new Ps(c.key,l)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return Ae.resolve(o)}lookupMutationBatch(t,r){return Ae.resolve(this.Or(r))}getNextMutationBatchAfterBatchId(t,r){const a=r+1,i=this.Nr(a),l=i<0?0:i;return Ae.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(this.mutationQueue.length===0?$f:this.Fr-1)}getAllMutationBatches(t){return Ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const a=new Ps(r,0),i=new Ps(r,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([a,i],o=>{const c=this.Or(o.Cr);l.push(c)}),Ae.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,r){let a=new ks(wt);return r.forEach(i=>{const l=new Ps(i,0),o=new Ps(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,o],c=>{a=a.add(c.Cr)})}),Ae.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(t,r){const a=r.path,i=a.length+1;let l=a;ht.isDocumentKey(l)||(l=l.child(""));const o=new Ps(new ht(l),0);let c=new ks(wt);return this.Mr.forEachWhile(d=>{const h=d.key.path;return!!a.isPrefixOf(h)&&(h.length===i&&(c=c.add(d.Cr)),!0)},o),Ae.resolve(this.Br(c))}Br(t){const r=[];return t.forEach(a=>{const i=this.Or(a);i!==null&&r.push(i)}),r}removeMutationBatch(t,r){Mt(this.Lr(r.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return Ae.forEach(r.mutations,i=>{const l=new Ps(i.key,r.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Mr=a})}qn(t){}containsKey(t,r){const a=new Ps(r,0),i=this.Mr.firstAfterOrEqual(a);return Ae.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ae.resolve()}Lr(t,r){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const r=this.Nr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(t){this.kr=t,this.docs=function(){return new ds(ht.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const a=r.key,i=this.docs.get(a),l=i?i.size:0,o=this.kr(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:o}),this.size+=o-l,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const a=this.docs.get(r);return Ae.resolve(a?a.document.mutableCopy():Es.newInvalidDocument(r))}getEntries(t,r){let a=qa();return r.forEach(i=>{const l=this.docs.get(i);a=a.insert(i,l?l.document.mutableCopy():Es.newInvalidDocument(i))}),Ae.resolve(a)}getDocumentsMatchingQuery(t,r,a,i){let l=qa();const o=r.path,c=new ht(o.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:g}}=d.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||_8(T8(g),a)<=0||(i.has(g.key)||dm(r,g))&&(l=l.insert(g.key,g.mutableCopy()))}return Ae.resolve(l)}getAllFromCollectionGroup(t,r,a,i){ft()}qr(t,r){return Ae.forEach(this.docs,a=>r(a))}newChangeBuffer(t){return new JD(this)}getSize(t){return Ae.resolve(this.size)}}class JD extends WD{constructor(t){super(),this.Ir=t}applyChanges(t){const r=[];return this.changes.forEach((a,i)=>{i.isValidDocument()?r.push(this.Ir.addEntry(t,i)):this.Ir.removeEntry(a)}),Ae.waitFor(r)}getFromCache(t,r){return this.Ir.getEntry(t,r)}getAllFromCache(t,r){return this.Ir.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(t){this.persistence=t,this.Qr=new Di(r=>Hf(r),Gf),this.lastRemoteSnapshotVersion=gt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Jf,this.targetCount=0,this.Kr=Mo.Un()}forEachTarget(t,r){return this.Qr.forEach((a,i)=>r(i)),Ae.resolve()}getLastRemoteSnapshotVersion(t){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ae.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(t,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.$r&&(this.$r=r),Ae.resolve()}zn(t){this.Qr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.Kr=new Mo(r),this.highestTargetId=r),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,r){return this.zn(r),this.targetCount+=1,Ae.resolve()}updateTargetData(t,r){return this.zn(r),Ae.resolve()}removeTargetData(t,r){return this.Qr.delete(r.target),this.Ur.br(r.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(t,r,a){let i=0;const l=[];return this.Qr.forEach((o,c)=>{c.sequenceNumber<=r&&a.get(c.targetId)===null&&(this.Qr.delete(o),l.push(this.removeMatchingKeysForTargetId(t,c.targetId)),i++)}),Ae.waitFor(l).next(()=>i)}getTargetCount(t){return Ae.resolve(this.targetCount)}getTargetData(t,r){const a=this.Qr.get(r)||null;return Ae.resolve(a)}addMatchingKeys(t,r,a){return this.Ur.yr(r,a),Ae.resolve()}removeMatchingKeys(t,r,a){this.Ur.Sr(r,a);const i=this.persistence.referenceDelegate,l=[];return i&&r.forEach(o=>{l.push(i.markPotentiallyOrphaned(t,o))}),Ae.waitFor(l)}removeMatchingKeysForTargetId(t,r){return this.Ur.br(r),Ae.resolve()}getMatchingKeysForTargetId(t,r){const a=this.Ur.vr(r);return Ae.resolve(a)}containsKey(t,r){return Ae.resolve(this.Ur.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(t,r){this.Wr={},this.overlays={},this.Gr=new im(0),this.zr=!1,this.zr=!0,this.jr=new KD,this.referenceDelegate=t(this),this.Hr=new ZD(this),this.indexManager=new LD,this.remoteDocumentCache=function(i){return new XD(i)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new MD(r),this.Yr=new GD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new QD,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let a=this.Wr[t.toKey()];return a||(a=new YD(r,this.referenceDelegate),this.Wr[t.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,r,a){Ze("MemoryPersistence","Starting transaction:",t);const i=new eA(this.Gr.next());return this.referenceDelegate.Zr(),a(i).next(l=>this.referenceDelegate.Xr(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}ei(t,r){return Ae.or(Object.values(this.Wr).map(a=>()=>a.containsKey(t,r)))}}class eA extends A8{constructor(t){super(),this.currentSequenceNumber=t}}class Zf{constructor(t){this.persistence=t,this.ti=new Jf,this.ni=null}static ri(t){return new Zf(t)}get ii(){if(this.ni)return this.ni;throw ft()}addReference(t,r,a){return this.ti.addReference(a,r),this.ii.delete(a.toString()),Ae.resolve()}removeReference(t,r,a){return this.ti.removeReference(a,r),this.ii.add(a.toString()),Ae.resolve()}markPotentiallyOrphaned(t,r){return this.ii.add(r.toString()),Ae.resolve()}removeTarget(t,r){this.ti.br(r.targetId).forEach(i=>this.ii.add(i.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,r.targetId).next(i=>{i.forEach(l=>this.ii.add(l.toString()))}).next(()=>a.removeTargetData(t,r))}Zr(){this.ni=new Set}Xr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.ii,a=>{const i=ht.fromPath(a);return this.si(t,i).next(l=>{l||r.removeEntry(i,gt.min())})}).next(()=>(this.ni=null,r.apply(t)))}updateLimboDocument(t,r){return this.si(t,r).next(a=>{a?this.ii.delete(r.toString()):this.ii.add(r.toString())})}Jr(t){return 0}si(t,r){return Ae.or([()=>Ae.resolve(this.ti.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.ei(t,r)])}}class gx{constructor(t,r){this.persistence=t,this.oi=new Di(a=>O8(a.path),(a,i)=>a.isEqual(i)),this.garbageCollector=$D(this,r)}static ri(t,r){return new gx(t,r)}Zr(){}Xr(t){return Ae.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}nr(t){const r=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(a=>r.next(i=>a+i))}sr(t){let r=0;return this.rr(t,a=>{r++}).next(()=>r)}rr(t,r){return Ae.forEach(this.oi,(a,i)=>this.ar(t,a,i).next(l=>l?Ae.resolve():r(i)))}removeTargets(t,r,a){return this.persistence.getTargetCache().removeTargets(t,r,a)}removeOrphanedDocuments(t,r){let a=0;const i=this.persistence.getRemoteDocumentCache(),l=i.newChangeBuffer();return i.qr(t,o=>this.ar(t,o,r).next(c=>{c||(a++,l.removeEntry(o,gt.min()))})).next(()=>l.apply(t)).next(()=>a)}markPotentiallyOrphaned(t,r){return this.oi.set(r,t.currentSequenceNumber),Ae.resolve()}removeTarget(t,r){const a=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,r,a){return this.oi.set(a,t.currentSequenceNumber),Ae.resolve()}removeReference(t,r,a){return this.oi.set(a,t.currentSequenceNumber),Ae.resolve()}updateLimboDocument(t,r){return this.oi.set(r,t.currentSequenceNumber),Ae.resolve()}Jr(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=yu(t.data.value)),r}ar(t,r,a){return Ae.or([()=>this.persistence.ei(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const i=this.oi.get(r);return Ae.resolve(i!==void 0&&i>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(t,r,a,i){this.targetId=t,this.fromCache=r,this.Hi=a,this.Ji=i}static Yi(t,r){let a=_t(),i=_t();for(const l of r.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new eg(t,r.fromCache,a,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return e_()?8:R8(tr())>0?6:4}()}initialize(t,r){this.ns=t,this.indexManager=r,this.Zi=!0}getDocumentsMatchingQuery(t,r,a,i){const l={result:null};return this.rs(t,r).next(o=>{l.result=o}).next(()=>{if(!l.result)return this.ss(t,r,i,a).next(o=>{l.result=o})}).next(()=>{if(l.result)return;const o=new tA;return this._s(t,r,o).next(c=>{if(l.result=c,this.Xi)return this.us(t,r,o,c.size)})}).next(()=>l.result)}us(t,r,a,i){return a.documentReadCount<this.es?(Wi()<=Tt.DEBUG&&Ze("QueryEngine","SDK will not create cache indexes for query:",qi(r),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Ae.resolve()):(Wi()<=Tt.DEBUG&&Ze("QueryEngine","Query:",qi(r),"scans",a.documentReadCount,"local documents and returns",i,"documents as results."),a.documentReadCount>this.ts*i?(Wi()<=Tt.DEBUG&&Ze("QueryEngine","The SDK decides to create cache indexes for query:",qi(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ma(r))):Ae.resolve())}rs(t,r){if(dj(r))return Ae.resolve(null);let a=ma(r);return this.indexManager.getIndexType(t,a).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=hx(r,null,"F"),a=ma(r)),this.indexManager.getDocumentsMatchingTarget(t,a).next(l=>{const o=_t(...l);return this.ns.getDocuments(t,o).next(c=>this.indexManager.getMinOffset(t,a).next(d=>{const h=this.cs(r,c);return this.ls(r,h,o,d.readTime)?this.rs(t,hx(r,null,"F")):this.hs(t,h,r,d)}))})))}ss(t,r,a,i){return dj(r)||i.isEqual(gt.min())?Ae.resolve(null):this.ns.getDocuments(t,a).next(l=>{const o=this.cs(r,l);return this.ls(r,o,a,i)?Ae.resolve(null):(Wi()<=Tt.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qi(r)),this.hs(t,o,r,E8(i,vc)).next(c=>c))})}cs(t,r){let a=new ks(n1(t));return r.forEach((i,l)=>{dm(t,l)&&(a=a.add(l))}),a}ls(t,r,a,i){if(t.limit===null)return!1;if(a.size!==r.size)return!0;const l=t.limitType==="F"?r.last():r.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}_s(t,r,a){return Wi()<=Tt.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",qi(r)),this.ns.getDocumentsMatchingQuery(t,r,An.min(),a)}hs(t,r,a,i){return this.ns.getDocumentsMatchingQuery(t,a,i).next(l=>(r.forEach(o=>{l=l.insert(o.key,o)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="LocalStore",rA=3e8;class aA{constructor(t,r,a,i){this.persistence=t,this.Ps=r,this.serializer=i,this.Ts=new ds(wt),this.Is=new Di(l=>Hf(l),Gf),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(a)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new HD(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ts))}}function nA(s,t,r,a){return new aA(s,t,r,a)}async function A1(s,t){const r=Nt(s);return await r.persistence.runTransaction("Handle user change","readonly",a=>{let i;return r.mutationQueue.getAllMutationBatches(a).next(l=>(i=l,r.As(t),r.mutationQueue.getAllMutationBatches(a))).next(l=>{const o=[],c=[];let d=_t();for(const h of i){o.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}for(const h of l){c.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}return r.localDocuments.getDocuments(a,d).next(h=>({Rs:h,removedBatchIds:o,addedBatchIds:c}))})})}function iA(s,t){const r=Nt(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const i=t.batch.keys(),l=r.ds.newChangeBuffer({trackRemovals:!0});return function(c,d,h,g){const N=h.batch,k=N.keys();let E=Ae.resolve();return k.forEach(y=>{E=E.next(()=>g.getEntry(d,y)).next(L=>{const _=h.docVersions.get(y);Mt(_!==null),L.version.compareTo(_)<0&&(N.applyToRemoteDocument(L,h),L.isValidDocument()&&(L.setReadTime(h.commitVersion),g.addEntry(L)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(d,N))}(r,a,t,l).next(()=>l.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,i,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(c){let d=_t();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d}(t))).next(()=>r.localDocuments.getDocuments(a,i))})}function R1(s){const t=Nt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Hr.getLastRemoteSnapshotVersion(r))}function oA(s,t){const r=Nt(s),a=t.snapshotVersion;let i=r.Ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const o=r.ds.newChangeBuffer({trackRemovals:!0});i=r.Ts;const c=[];t.targetChanges.forEach((g,N)=>{const k=i.get(N);if(!k)return;c.push(r.Hr.removeMatchingKeys(l,g.removedDocuments,N).next(()=>r.Hr.addMatchingKeys(l,g.addedDocuments,N)));let E=k.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(N)!==null?E=E.withResumeToken(Fs.EMPTY_BYTE_STRING,gt.min()).withLastLimboFreeSnapshotVersion(gt.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,a)),i=i.insert(N,E),function(L,_,A){return L.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=rA?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(k,E,g)&&c.push(r.Hr.updateTargetData(l,E))});let d=qa(),h=_t();if(t.documentUpdates.forEach(g=>{t.resolvedLimboDocuments.has(g)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(l,g))}),c.push(lA(l,o,t.documentUpdates).next(g=>{d=g.Vs,h=g.fs})),!a.isEqual(gt.min())){const g=r.Hr.getLastRemoteSnapshotVersion(l).next(N=>r.Hr.setTargetsMetadata(l,l.currentSequenceNumber,a));c.push(g)}return Ae.waitFor(c).next(()=>o.apply(l)).next(()=>r.localDocuments.getLocalViewOfDocuments(l,d,h)).next(()=>d)}).then(l=>(r.Ts=i,l))}function lA(s,t,r){let a=_t(),i=_t();return r.forEach(l=>a=a.add(l)),t.getEntries(s,a).next(l=>{let o=qa();return r.forEach((c,d)=>{const h=l.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(gt.min())?(t.removeEntry(c,d.readTime),o=o.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(d),o=o.insert(c,d)):Ze(tg,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)}),{Vs:o,fs:i}})}function cA(s,t){const r=Nt(s);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(t===void 0&&(t=$f),r.mutationQueue.getNextMutationBatchAfterBatchId(a,t)))}function dA(s,t){const r=Nt(s);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let i;return r.Hr.getTargetData(a,t).next(l=>l?(i=l,Ae.resolve(i)):r.Hr.allocateTargetId(a).next(o=>(i=new pn(t,o,"TargetPurposeListen",a.currentSequenceNumber),r.Hr.addTargetData(a,i).next(()=>i))))}).then(a=>{const i=r.Ts.get(a.targetId);return(i===null||a.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ts=r.Ts.insert(a.targetId,a),r.Is.set(t,a.targetId)),a})}async function c0(s,t,r){const a=Nt(s),i=a.Ts.get(t),l=r?"readwrite":"readwrite-primary";try{r||await a.persistence.runTransaction("Release target",l,o=>a.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Qo(o))throw o;Ze(tg,`Failed to update sequence numbers for target ${t}: ${o}`)}a.Ts=a.Ts.remove(t),a.Is.delete(i.target)}function wj(s,t,r){const a=Nt(s);let i=gt.min(),l=_t();return a.persistence.runTransaction("Execute query","readwrite",o=>function(d,h,g){const N=Nt(d),k=N.Is.get(g);return k!==void 0?Ae.resolve(N.Ts.get(k)):N.Hr.getTargetData(h,g)}(a,o,ma(t)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(o,c.targetId).next(d=>{l=d})}).next(()=>a.Ps.getDocumentsMatchingQuery(o,t,r?i:gt.min(),r?l:_t())).next(c=>(uA(a,eD(t),c),{documents:c,gs:l})))}function uA(s,t,r){let a=s.Es.get(t)||gt.min();r.forEach((i,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)}),s.Es.set(t,a)}class kj{constructor(){this.activeTargetIds=iD()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class xA{constructor(){this.ho=new kj,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,a){}addLocalQueryTarget(t,r=!0){return r&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,r,a){this.Po[t]=r}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new kj,Promise.resolve()}handleUserChange(t,r,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij="ConnectivityMonitor";class Pj{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ze(Ij,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Ze(Ij,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd=null;function d0(){return Kd===null?Kd=function(){return 268435456+Math.round(2147483648*Math.random())}():Kd++,"0x"+Kd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="RestConnection",hA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pA{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=r+"://"+t.host,this.yo=`projects/${a}/databases/${i}`,this.wo=this.databaseId.database===ux?`project_id=${a}`:`project_id=${a}&database_id=${i}`}So(t,r,a,i,l){const o=d0(),c=this.bo(t,r.toUriEncodedString());Ze(Ih,`Sending RPC '${t}' ${o}:`,c,a);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,i,l),this.vo(t,c,d,a).then(h=>(Ze(Ih,`Received RPC '${t}' ${o}: `,h),h),h=>{throw _o(Ih,`RPC '${t}' ${o} failed with error: `,h,"url: ",c,"request:",a),h})}Co(t,r,a,i,l,o){return this.So(t,r,a,i,l)}Do(t,r,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ho}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,l)=>t[l]=i),a&&a.headers.forEach((i,l)=>t[l]=i)}bo(t,r){const a=hA[t];return`${this.po}/v1/${r}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="WebChannelConnection";class gA extends pA{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,r,a,i){const l=d0();return new Promise((o,c)=>{const d=new D4;d.setWithCredentials(!0),d.listenOnce(A4.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case gu.NO_ERROR:const g=d.getResponseJson();Ze(Ks,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(g)),o(g);break;case gu.TIMEOUT:Ze(Ks,`RPC '${t}' ${l} timed out`),c(new Ye(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case gu.HTTP_ERROR:const N=d.getStatus();if(Ze(Ks,`RPC '${t}' ${l} failed with status:`,N,"response text:",d.getResponseText()),N>0){let k=d.getResponseJson();Array.isArray(k)&&(k=k[0]);const E=k==null?void 0:k.error;if(E&&E.status&&E.message){const y=function(_){const A=_.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(A)>=0?A:Ee.UNKNOWN}(E.status);c(new Ye(y,E.message))}else c(new Ye(Ee.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Ye(Ee.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{Ze(Ks,`RPC '${t}' ${l} completed.`)}});const h=JSON.stringify(i);Ze(Ks,`RPC '${t}' ${l} sending request:`,i),d.send(r,"POST",h,a,15)})}Wo(t,r,a){const i=d0(),l=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=O4(),c=M4(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,r,a),d.encodeInitMessageHeaders=!0;const g=l.join("");Ze(Ks,`Creating RPC '${t}' stream ${i}: ${g}`,d);const N=o.createWebChannel(g,d);let k=!1,E=!1;const y=new fA({Fo:_=>{E?Ze(Ks,`Not sending because RPC '${t}' stream ${i} is closed:`,_):(k||(Ze(Ks,`Opening RPC '${t}' stream ${i} transport.`),N.open(),k=!0),Ze(Ks,`RPC '${t}' stream ${i} sending:`,_),N.send(_))},Mo:()=>N.close()}),L=(_,A,z)=>{_.listen(A,O=>{try{z(O)}catch(K){setTimeout(()=>{throw K},0)}})};return L(N,Cl.EventType.OPEN,()=>{E||(Ze(Ks,`RPC '${t}' stream ${i} transport opened.`),y.Qo())}),L(N,Cl.EventType.CLOSE,()=>{E||(E=!0,Ze(Ks,`RPC '${t}' stream ${i} transport closed`),y.Uo())}),L(N,Cl.EventType.ERROR,_=>{E||(E=!0,_o(Ks,`RPC '${t}' stream ${i} transport errored:`,_),y.Uo(new Ye(Ee.UNAVAILABLE,"The operation could not be completed")))}),L(N,Cl.EventType.MESSAGE,_=>{var A;if(!E){const z=_.data[0];Mt(!!z);const O=z,K=(O==null?void 0:O.error)||((A=O[0])===null||A===void 0?void 0:A.error);if(K){Ze(Ks,`RPC '${t}' stream ${i} received error:`,K);const G=K.status;let H=function(W){const U=bs[W];if(U!==void 0)return v1(U)}(G),R=K.message;H===void 0&&(H=Ee.INTERNAL,R="Unknown error status: "+G+" with message "+K.message),E=!0,y.Uo(new Ye(H,R)),N.close()}else Ze(Ks,`RPC '${t}' stream ${i} received:`,z),y.Ko(z)}}),L(c,R4.STAT_EVENT,_=>{_.stat===Zp.PROXY?Ze(Ks,`RPC '${t}' stream ${i} detected buffering proxy`):_.stat===Zp.NOPROXY&&Ze(Ks,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.$o()},0),y}}function Ph(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(s){return new jD(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(t,r,a=1e3,i=1.5,l=6e4){this.Ti=t,this.timerId=r,this.Go=a,this.zo=i,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const r=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),i=Math.max(0,r-a);i>0&&Ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj="PersistentStream";class M1{constructor(t,r,a,i,l,o,c,d){this.Ti=t,this.n_=a,this.r_=i,this.connection=l,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new sg(t,r)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,r){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():r&&r.code===Ee.RESOURCE_EXHAUSTED?(Wa(r.toString()),Wa("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):r&&r.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(r)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),r=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,i])=>{this.i_===r&&this.V_(a,i)},a=>{t(()=>{const i=new Ye(Ee.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(i)})})}V_(t,r){const a=this.R_(this.i_);this.stream=this.f_(t,r),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{a(()=>this.m_(i))}),this.stream.onMessage(i=>{a(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Ze(Sj,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return r=>{this.Ti.enqueueAndForget(()=>this.i_===t?r():(Ze(Sj,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yA extends M1{constructor(t,r,a,i,l,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,i,o),this.serializer=l}f_(t,r){return this.connection.Wo("Listen",t,r)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const r=ID(this.serializer,t),a=function(l){if(!("targetChange"in l))return gt.min();const o=l.targetChange;return o.targetIds&&o.targetIds.length?gt.min():o.readTime?Ir(o.readTime):gt.min()}(t);return this.listener.p_(r,a)}y_(t){const r={};r.database=l0(this.serializer),r.addTarget=function(l,o){let c;const d=o.target;if(c=a0(d)?{documents:SD(l,d)}:{query:CD(l,d).ht},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=w1(l,o.resumeToken);const h=i0(l,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(gt.min())>0){c.readTime=px(l,o.snapshotVersion.toTimestamp());const h=i0(l,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,t);const a=TD(this.serializer,t);a&&(r.labels=a),this.I_(r)}w_(t){const r={};r.database=l0(this.serializer),r.removeTarget=t,this.I_(r)}}class bA extends M1{constructor(t,r,a,i,l,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,i,o),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,r){return this.connection.Wo("Write",t,r)}g_(t){return Mt(!!t.streamToken),this.lastStreamToken=t.streamToken,Mt(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Mt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const r=PD(t.writeResults,t.commitTime),a=Ir(t.commitTime);return this.listener.v_(a,r)}C_(){const t={};t.database=l0(this.serializer),this.I_(t)}b_(t){const r={streamToken:this.lastStreamToken,writes:t.map(a=>S1(this.serializer,a))};this.I_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{}class jA extends vA{constructor(t,r,a,i){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=a,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Ye(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,r,a,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,o])=>this.connection.So(t,o0(r,a),i,l,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ye(Ee.UNKNOWN,l.toString())})}Co(t,r,a,i,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Co(t,o0(r,a),i,o,c,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ye(Ee.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class NA{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Wa(r),this.N_=!1):Ze("OnlineStateTracker",r)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="RemoteStore";class wA{constructor(t,r,a,i,l){this.localStore=t,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(o=>{a.enqueueAndForget(async()=>{Ai(this)&&(Ze(ji,"Restarting streams for network reachability change."),await async function(d){const h=Nt(d);h.W_.add(4),await Jc(h),h.j_.set("Unknown"),h.W_.delete(4),await fm(h)}(this))})}),this.j_=new NA(a,i)}}async function fm(s){if(Ai(s))for(const t of s.G_)await t(!0)}async function Jc(s){for(const t of s.G_)await t(!1)}function O1(s,t){const r=Nt(s);r.K_.has(t.targetId)||(r.K_.set(t.targetId,t),ig(r)?ng(r):Yo(r).c_()&&ag(r,t))}function rg(s,t){const r=Nt(s),a=Yo(r);r.K_.delete(t),a.c_()&&L1(r,t),r.K_.size===0&&(a.c_()?a.P_():Ai(r)&&r.j_.set("Unknown"))}function ag(s,t){if(s.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(gt.min())>0){const r=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Yo(s).y_(t)}function L1(s,t){s.H_.Ne(t),Yo(s).w_(t)}function ng(s){s.H_=new gD({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>s.K_.get(t)||null,it:()=>s.datastore.serializer.databaseId}),Yo(s).start(),s.j_.B_()}function ig(s){return Ai(s)&&!Yo(s).u_()&&s.K_.size>0}function Ai(s){return Nt(s).W_.size===0}function V1(s){s.H_=void 0}async function kA(s){s.j_.set("Online")}async function IA(s){s.K_.forEach((t,r)=>{ag(s,t)})}async function PA(s,t){V1(s),ig(s)?(s.j_.q_(t),ng(s)):s.j_.set("Unknown")}async function SA(s,t,r){if(s.j_.set("Online"),t instanceof N1&&t.state===2&&t.cause)try{await async function(i,l){const o=l.cause;for(const c of l.targetIds)i.K_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.K_.delete(c),i.H_.removeTarget(c))}(s,t)}catch(a){Ze(ji,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await yx(s,a)}else if(t instanceof ju?s.H_.We(t):t instanceof j1?s.H_.Ze(t):s.H_.je(t),!r.isEqual(gt.min()))try{const a=await R1(s.localStore);r.compareTo(a)>=0&&await function(l,o){const c=l.H_.ot(o);return c.targetChanges.forEach((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const g=l.K_.get(h);g&&l.K_.set(h,g.withResumeToken(d.resumeToken,o))}}),c.targetMismatches.forEach((d,h)=>{const g=l.K_.get(d);if(!g)return;l.K_.set(d,g.withResumeToken(Fs.EMPTY_BYTE_STRING,g.snapshotVersion)),L1(l,d);const N=new pn(g.target,d,h,g.sequenceNumber);ag(l,N)}),l.remoteSyncer.applyRemoteEvent(c)}(s,r)}catch(a){Ze(ji,"Failed to raise snapshot:",a),await yx(s,a)}}async function yx(s,t,r){if(!Qo(t))throw t;s.W_.add(1),await Jc(s),s.j_.set("Offline"),r||(r=()=>R1(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{Ze(ji,"Retrying IndexedDB access"),await r(),s.W_.delete(1),await fm(s)})}function z1(s,t){return t().catch(r=>yx(s,r,t))}async function gm(s){const t=Nt(s),r=Ln(t);let a=t.U_.length>0?t.U_[t.U_.length-1].batchId:$f;for(;CA(t);)try{const i=await cA(t.localStore,a);if(i===null){t.U_.length===0&&r.P_();break}a=i.batchId,EA(t,i)}catch(i){await yx(t,i)}B1(t)&&F1(t)}function CA(s){return Ai(s)&&s.U_.length<10}function EA(s,t){s.U_.push(t);const r=Ln(s);r.c_()&&r.S_&&r.b_(t.mutations)}function B1(s){return Ai(s)&&!Ln(s).u_()&&s.U_.length>0}function F1(s){Ln(s).start()}async function TA(s){Ln(s).C_()}async function _A(s){const t=Ln(s);for(const r of s.U_)t.b_(r.mutations)}async function DA(s,t,r){const a=s.U_.shift(),i=Kf.from(a,t,r);await z1(s,()=>s.remoteSyncer.applySuccessfulWrite(i)),await gm(s)}async function AA(s,t){t&&Ln(s).S_&&await async function(a,i){if(function(o){return b1(o)&&o!==Ee.ABORTED}(i.code)){const l=a.U_.shift();Ln(a).h_(),await z1(a,()=>a.remoteSyncer.rejectFailedWrite(l.batchId,i)),await gm(a)}}(s,t),B1(s)&&F1(s)}async function Cj(s,t){const r=Nt(s);r.asyncQueue.verifyOperationInProgress(),Ze(ji,"RemoteStore received new credentials");const a=Ai(r);r.W_.add(3),await Jc(r),a&&r.j_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.W_.delete(3),await fm(r)}async function RA(s,t){const r=Nt(s);t?(r.W_.delete(2),await fm(r)):t||(r.W_.add(2),await Jc(r),r.j_.set("Unknown"))}function Yo(s){return s.J_||(s.J_=function(r,a,i){const l=Nt(r);return l.M_(),new yA(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)}(s.datastore,s.asyncQueue,{xo:kA.bind(null,s),No:IA.bind(null,s),Lo:PA.bind(null,s),p_:SA.bind(null,s)}),s.G_.push(async t=>{t?(s.J_.h_(),ig(s)?ng(s):s.j_.set("Unknown")):(await s.J_.stop(),V1(s))})),s.J_}function Ln(s){return s.Y_||(s.Y_=function(r,a,i){const l=Nt(r);return l.M_(),new bA(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:TA.bind(null,s),Lo:AA.bind(null,s),D_:_A.bind(null,s),v_:DA.bind(null,s)}),s.G_.push(async t=>{t?(s.Y_.h_(),await gm(s)):(await s.Y_.stop(),s.U_.length>0&&(Ze(ji,`Stopping write stream with ${s.U_.length} pending writes`),s.U_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(t,r,a,i,l){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=a,this.op=i,this.removalCallback=l,this.deferred=new xa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,a,i,l){const o=Date.now()+a,c=new og(t,r,o,i,l);return c.start(a),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ye(Ee.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lg(s,t){if(Wa("AsyncQueue",`${t}: ${s}`),Qo(s))return new Ye(Ee.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{static emptySet(t){return new vo(t.comparator)}constructor(t){this.comparator=t?(r,a)=>t(r,a)||ht.comparator(r.key,a.key):(r,a)=>ht.comparator(r.key,a.key),this.keyedMap=El(),this.sortedSet=new ds(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,a)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof vo)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,l=a.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const a=new vo;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=r,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(){this.Z_=new ds(ht.comparator)}track(t){const r=t.doc.key,a=this.Z_.get(r);a?t.type!==0&&a.type===3?this.Z_=this.Z_.insert(r,t):t.type===3&&a.type!==1?this.Z_=this.Z_.insert(r,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.Z_=this.Z_.insert(r,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.Z_=this.Z_.insert(r,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.Z_=this.Z_.remove(r):t.type===1&&a.type===2?this.Z_=this.Z_.insert(r,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.Z_=this.Z_.insert(r,{type:2,doc:t.doc}):ft():this.Z_=this.Z_.insert(r,t)}X_(){const t=[];return this.Z_.inorderTraversal((r,a)=>{t.push(a)}),t}}class Oo{constructor(t,r,a,i,l,o,c,d,h){this.query=t,this.docs=r,this.oldDocs=a,this.docChanges=i,this.mutatedKeys=l,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(t,r,a,i,l){const o=[];return r.forEach(c=>{o.push({type:0,doc:c})}),new Oo(t,r,vo.emptySet(r),o,a,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&cm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,a=t.docChanges;if(r.length!==a.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==a[i].type||!r[i].doc.isEqual(a[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class OA{constructor(){this.queries=Tj(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(r,a){const i=Nt(r),l=i.queries;i.queries=Tj(),l.forEach((o,c)=>{for(const d of c.ta)d.onError(a)})})(this,new Ye(Ee.ABORTED,"Firestore shutting down"))}}function Tj(){return new Di(s=>a1(s),cm)}async function cg(s,t){const r=Nt(s);let a=3;const i=t.query;let l=r.queries.get(i);l?!l.na()&&t.ra()&&(a=2):(l=new MA,a=t.ra()?0:1);try{switch(a){case 0:l.ea=await r.onListen(i,!0);break;case 1:l.ea=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const c=lg(o,`Initialization of query '${qi(t.query)}' failed`);return void t.onError(c)}r.queries.set(i,l),l.ta.push(t),t.sa(r.onlineState),l.ea&&t.oa(l.ea)&&ug(r)}async function dg(s,t){const r=Nt(s),a=t.query;let i=3;const l=r.queries.get(a);if(l){const o=l.ta.indexOf(t);o>=0&&(l.ta.splice(o,1),l.ta.length===0?i=t.ra()?0:1:!l.na()&&t.ra()&&(i=2))}switch(i){case 0:return r.queries.delete(a),r.onUnlisten(a,!0);case 1:return r.queries.delete(a),r.onUnlisten(a,!1);case 2:return r.onLastRemoteStoreUnlisten(a);default:return}}function LA(s,t){const r=Nt(s);let a=!1;for(const i of t){const l=i.query,o=r.queries.get(l);if(o){for(const c of o.ta)c.oa(i)&&(a=!0);o.ea=i}}a&&ug(r)}function VA(s,t,r){const a=Nt(s),i=a.queries.get(t);if(i)for(const l of i.ta)l.onError(r);a.queries.delete(t)}function ug(s){s.ia.forEach(t=>{t.next()})}var u0,_j;(_j=u0||(u0={}))._a="default",_j.Cache="cache";class xg{constructor(t,r,a){this.query=t,this.aa=r,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(t){if(!this.options.includeMetadataChanges){const a=[];for(const i of t.docChanges)i.type!==3&&a.push(i);t=new Oo(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.ua?this.la(t)&&(this.aa.next(t),r=!0):this.ha(t,this.onlineState)&&(this.Pa(t),r=!0),this.ca=t,r}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let r=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),r=!0),r}ha(t,r){if(!t.fromCache||!this.ra())return!0;const a=r!=="Offline";return(!this.options.Ta||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}la(t){if(t.docChanges.length>0)return!0;const r=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Pa(t){t=Oo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==u0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(t){this.key=t}}class $1{constructor(t){this.key=t}}class zA{constructor(t,r){this.query=t,this.fa=r,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=_t(),this.mutatedKeys=_t(),this.ya=n1(t),this.wa=new vo(this.ya)}get Sa(){return this.fa}ba(t,r){const a=r?r.Da:new Ej,i=r?r.wa:this.wa;let l=r?r.mutatedKeys:this.mutatedKeys,o=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((g,N)=>{const k=i.get(g),E=dm(this.query,N)?N:null,y=!!k&&this.mutatedKeys.has(k.key),L=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let _=!1;k&&E?k.data.isEqual(E.data)?y!==L&&(a.track({type:3,doc:E}),_=!0):this.va(k,E)||(a.track({type:2,doc:E}),_=!0,(d&&this.ya(E,d)>0||h&&this.ya(E,h)<0)&&(c=!0)):!k&&E?(a.track({type:0,doc:E}),_=!0):k&&!E&&(a.track({type:1,doc:k}),_=!0,(d||h)&&(c=!0)),_&&(E?(o=o.add(E),l=L?l.add(g):l.delete(g)):(o=o.delete(g),l=l.delete(g)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const g=this.query.limitType==="F"?o.last():o.first();o=o.delete(g.key),l=l.delete(g.key),a.track({type:1,doc:g})}return{wa:o,Da:a,ls:c,mutatedKeys:l}}va(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,a,i){const l=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const o=t.Da.X_();o.sort((g,N)=>function(E,y){const L=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return L(E)-L(y)}(g.type,N.type)||this.ya(g.doc,N.doc)),this.Ca(a),i=i!=null&&i;const c=r&&!i?this.Fa():[],d=this.pa.size===0&&this.current&&!i?1:0,h=d!==this.ga;return this.ga=d,o.length!==0||h?{snapshot:new Oo(this.query,t.wa,l,o,t.mutatedKeys,d===0,h,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Ej,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(r=>this.fa=this.fa.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.fa=this.fa.delete(r)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=_t(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const r=[];return t.forEach(a=>{this.pa.has(a)||r.push(new $1(a))}),this.pa.forEach(a=>{t.has(a)||r.push(new U1(a))}),r}Oa(t){this.fa=t.gs,this.pa=_t();const r=this.ba(t.documents);return this.applyChanges(r,!0)}Na(){return Oo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const mg="SyncEngine";class BA{constructor(t,r,a){this.query=t,this.targetId=r,this.view=a}}class FA{constructor(t){this.key=t,this.Ba=!1}}class UA{constructor(t,r,a,i,l,o){this.localStore=t,this.remoteStore=r,this.eventManager=a,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Di(c=>a1(c),cm),this.qa=new Map,this.Qa=new Set,this.$a=new ds(ht.comparator),this.Ua=new Map,this.Ka=new Jf,this.Wa={},this.Ga=new Map,this.za=Mo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function $A(s,t,r=!0){const a=K1(s);let i;const l=a.ka.get(t);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),i=l.view.Na()):i=await W1(a,t,r,!0),i}async function WA(s,t){const r=K1(s);await W1(r,t,!0,!1)}async function W1(s,t,r,a){const i=await dA(s.localStore,ma(t)),l=i.targetId,o=s.sharedClientState.addLocalQueryTarget(l,r);let c;return a&&(c=await qA(s,t,l,o==="current",i.resumeToken)),s.isPrimaryClient&&r&&O1(s.remoteStore,i),c}async function qA(s,t,r,a,i){s.Ha=(N,k,E)=>async function(L,_,A,z){let O=_.view.ba(A);O.ls&&(O=await wj(L.localStore,_.query,!1).then(({documents:R})=>_.view.ba(R,O)));const K=z&&z.targetChanges.get(_.targetId),G=z&&z.targetMismatches.get(_.targetId)!=null,H=_.view.applyChanges(O,L.isPrimaryClient,K,G);return Aj(L,_.targetId,H.Ma),H.snapshot}(s,N,k,E);const l=await wj(s.localStore,t,!0),o=new zA(t,l.gs),c=o.ba(l.documents),d=Xc.createSynthesizedTargetChangeForCurrentChange(r,a&&s.onlineState!=="Offline",i),h=o.applyChanges(c,s.isPrimaryClient,d);Aj(s,r,h.Ma);const g=new BA(t,r,o);return s.ka.set(t,g),s.qa.has(r)?s.qa.get(r).push(t):s.qa.set(r,[t]),h.snapshot}async function HA(s,t,r){const a=Nt(s),i=a.ka.get(t),l=a.qa.get(i.targetId);if(l.length>1)return a.qa.set(i.targetId,l.filter(o=>!cm(o,t))),void a.ka.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(i.targetId),a.sharedClientState.isActiveQueryTarget(i.targetId)||await c0(a.localStore,i.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(i.targetId),r&&rg(a.remoteStore,i.targetId),x0(a,i.targetId)}).catch(Go)):(x0(a,i.targetId),await c0(a.localStore,i.targetId,!0))}async function GA(s,t){const r=Nt(s),a=r.ka.get(t),i=r.qa.get(a.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(a.targetId),rg(r.remoteStore,a.targetId))}async function QA(s,t,r){const a=t6(s);try{const i=await function(o,c){const d=Nt(o),h=Xt.now(),g=c.reduce((E,y)=>E.add(y.key),_t());let N,k;return d.persistence.runTransaction("Locally write mutations","readwrite",E=>{let y=qa(),L=_t();return d.ds.getEntries(E,g).next(_=>{y=_,y.forEach((A,z)=>{z.isValidDocument()||(L=L.add(A))})}).next(()=>d.localDocuments.getOverlayedDocuments(E,y)).next(_=>{N=_;const A=[];for(const z of c){const O=xD(z,N.get(z.key).overlayedDocument);O!=null&&A.push(new Hn(z.key,O,Y4(O.value.mapValue),Ls.exists(!0)))}return d.mutationQueue.addMutationBatch(E,h,A,c)}).next(_=>{k=_;const A=_.applyToLocalDocumentSet(N,L);return d.documentOverlayCache.saveOverlays(E,_.batchId,A)})}).then(()=>({batchId:k.batchId,changes:o1(N)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(i.batchId),function(o,c,d){let h=o.Wa[o.currentUser.toKey()];h||(h=new ds(wt)),h=h.insert(c,d),o.Wa[o.currentUser.toKey()]=h}(a,i.batchId,r),await Zc(a,i.changes),await gm(a.remoteStore)}catch(i){const l=lg(i,"Failed to persist write");r.reject(l)}}async function q1(s,t){const r=Nt(s);try{const a=await oA(r.localStore,t);t.targetChanges.forEach((i,l)=>{const o=r.Ua.get(l);o&&(Mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ba=!0:i.modifiedDocuments.size>0?Mt(o.Ba):i.removedDocuments.size>0&&(Mt(o.Ba),o.Ba=!1))}),await Zc(r,a,t)}catch(a){await Go(a)}}function Dj(s,t,r){const a=Nt(s);if(a.isPrimaryClient&&r===0||!a.isPrimaryClient&&r===1){const i=[];a.ka.forEach((l,o)=>{const c=o.view.sa(t);c.snapshot&&i.push(c.snapshot)}),function(o,c){const d=Nt(o);d.onlineState=c;let h=!1;d.queries.forEach((g,N)=>{for(const k of N.ta)k.sa(c)&&(h=!0)}),h&&ug(d)}(a.eventManager,t),i.length&&a.La.p_(i),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function KA(s,t,r){const a=Nt(s);a.sharedClientState.updateQueryState(t,"rejected",r);const i=a.Ua.get(t),l=i&&i.key;if(l){let o=new ds(ht.comparator);o=o.insert(l,Es.newNoDocument(l,gt.min()));const c=_t().add(l),d=new hm(gt.min(),new Map,new ds(wt),o,c);await q1(a,d),a.$a=a.$a.remove(l),a.Ua.delete(t),hg(a)}else await c0(a.localStore,t,!1).then(()=>x0(a,t,r)).catch(Go)}async function YA(s,t){const r=Nt(s),a=t.batch.batchId;try{const i=await iA(r.localStore,t);G1(r,a,null),H1(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),await Zc(r,i)}catch(i){await Go(i)}}async function XA(s,t,r){const a=Nt(s);try{const i=await function(o,c){const d=Nt(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let g;return d.mutationQueue.lookupMutationBatch(h,c).next(N=>(Mt(N!==null),g=N.keys(),d.mutationQueue.removeMutationBatch(h,N))).next(()=>d.mutationQueue.performConsistencyCheck(h)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(h,g,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g)).next(()=>d.localDocuments.getDocuments(h,g))})}(a.localStore,t);G1(a,t,r),H1(a,t),a.sharedClientState.updateMutationState(t,"rejected",r),await Zc(a,i)}catch(i){await Go(i)}}function H1(s,t){(s.Ga.get(t)||[]).forEach(r=>{r.resolve()}),s.Ga.delete(t)}function G1(s,t,r){const a=Nt(s);let i=a.Wa[a.currentUser.toKey()];if(i){const l=i.get(t);l&&(r?l.reject(r):l.resolve(),i=i.remove(t)),a.Wa[a.currentUser.toKey()]=i}}function x0(s,t,r=null){s.sharedClientState.removeLocalQueryTarget(t);for(const a of s.qa.get(t))s.ka.delete(a),r&&s.La.Ja(a,r);s.qa.delete(t),s.isPrimaryClient&&s.Ka.br(t).forEach(a=>{s.Ka.containsKey(a)||Q1(s,a)})}function Q1(s,t){s.Qa.delete(t.path.canonicalString());const r=s.$a.get(t);r!==null&&(rg(s.remoteStore,r),s.$a=s.$a.remove(t),s.Ua.delete(r),hg(s))}function Aj(s,t,r){for(const a of r)a instanceof U1?(s.Ka.addReference(a.key,t),JA(s,a)):a instanceof $1?(Ze(mg,"Document no longer in limbo: "+a.key),s.Ka.removeReference(a.key,t),s.Ka.containsKey(a.key)||Q1(s,a.key)):ft()}function JA(s,t){const r=t.key,a=r.path.canonicalString();s.$a.get(r)||s.Qa.has(a)||(Ze(mg,"New document in limbo: "+r),s.Qa.add(a),hg(s))}function hg(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const t=s.Qa.values().next().value;s.Qa.delete(t);const r=new ht(Qt.fromString(t)),a=s.za.next();s.Ua.set(a,new FA(r)),s.$a=s.$a.insert(r,a),O1(s.remoteStore,new pn(ma(lm(r.path)),a,"TargetPurposeLimboResolution",im.ae))}}async function Zc(s,t,r){const a=Nt(s),i=[],l=[],o=[];a.ka.isEmpty()||(a.ka.forEach((c,d)=>{o.push(a.Ha(d,t,r).then(h=>{var g;if((h||r)&&a.isPrimaryClient){const N=h?!h.fromCache:(g=r==null?void 0:r.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;a.sharedClientState.updateQueryState(d.targetId,N?"current":"not-current")}if(h){i.push(h);const N=eg.Yi(d.targetId,h);l.push(N)}}))}),await Promise.all(o),a.La.p_(i),await async function(d,h){const g=Nt(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>Ae.forEach(h,k=>Ae.forEach(k.Hi,E=>g.persistence.referenceDelegate.addReference(N,k.targetId,E)).next(()=>Ae.forEach(k.Ji,E=>g.persistence.referenceDelegate.removeReference(N,k.targetId,E)))))}catch(N){if(!Qo(N))throw N;Ze(tg,"Failed to update sequence numbers: "+N)}for(const N of h){const k=N.targetId;if(!N.fromCache){const E=g.Ts.get(k),y=E.snapshotVersion,L=E.withLastLimboFreeSnapshotVersion(y);g.Ts=g.Ts.insert(k,L)}}}(a.localStore,l))}async function ZA(s,t){const r=Nt(s);if(!r.currentUser.isEqual(t)){Ze(mg,"User change. New user:",t.toKey());const a=await A1(r.localStore,t);r.currentUser=t,function(l,o){l.Ga.forEach(c=>{c.forEach(d=>{d.reject(new Ye(Ee.CANCELLED,o))})}),l.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await Zc(r,a.Rs)}}function e6(s,t){const r=Nt(s),a=r.Ua.get(t);if(a&&a.Ba)return _t().add(a.key);{let i=_t();const l=r.qa.get(t);if(!l)return i;for(const o of l){const c=r.ka.get(o);i=i.unionWith(c.view.Sa)}return i}}function K1(s){const t=Nt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=q1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=e6.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=KA.bind(null,t),t.La.p_=LA.bind(null,t.eventManager),t.La.Ja=VA.bind(null,t.eventManager),t}function t6(s){const t=Nt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=YA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=XA.bind(null,t),t}class bx{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=pm(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,r){return null}nu(t,r){return null}eu(t){return nA(this.persistence,new sA,t.initialUser,this.serializer)}Xa(t){return new D1(Zf.ri,this.serializer)}Za(t){return new xA}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bx.provider={build:()=>new bx};class s6 extends bx{constructor(t){super(),this.cacheSizeBytes=t}tu(t,r){Mt(this.persistence.referenceDelegate instanceof gx);const a=this.persistence.referenceDelegate.garbageCollector;return new FD(a,t.asyncQueue,r)}Xa(t){const r=this.cacheSizeBytes!==void 0?cr.withCacheSize(this.cacheSizeBytes):cr.DEFAULT;return new D1(a=>gx.ri(a,r),this.serializer)}}class m0{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Dj(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZA.bind(null,this.syncEngine),await RA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new OA}()}createDatastore(t){const r=pm(t.databaseInfo.databaseId),a=function(l){return new gA(l)}(t.databaseInfo);return function(l,o,c,d){return new jA(l,o,c,d)}(t.authCredentials,t.appCheckCredentials,a,r)}createRemoteStore(t){return function(a,i,l,o,c){return new wA(a,i,l,o,c)}(this.localStore,this.datastore,t.asyncQueue,r=>Dj(this.syncEngine,r,0),function(){return Pj.D()?new Pj:new mA}())}createSyncEngine(t,r){return function(i,l,o,c,d,h,g){const N=new UA(i,l,o,c,d,h);return g&&(N.ja=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(i){const l=Nt(i);Ze(ji,"RemoteStore shutting down."),l.W_.add(5),await Jc(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}m0.provider={build:()=>new m0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):Wa("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ye(Ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(i,l){const o=Nt(i),c={documents:l.map(N=>fx(o.serializer,N))},d=await o.Co("BatchGetDocuments",o.serializer.databaseId,Qt.emptyPath(),c,l.length),h=new Map;d.forEach(N=>{const k=kD(o.serializer,N);h.set(k.key.toString(),k)});const g=[];return l.forEach(N=>{const k=h.get(N.toString());Mt(!!k),g.push(k)}),g}(this.datastore,t);return r.forEach(a=>this.recordVersion(a)),r}set(t,r){this.write(r.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,r){try{this.write(r.toMutation(t,this.preconditionForUpdate(t)))}catch(a){this.lastTransactionError=a}this.writtenDocs.add(t.toString())}delete(t){this.write(new mm(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const i=ht.fromPath(a);this.mutations.push(new y1(i,this.precondition(i)))}),await async function(a,i){const l=Nt(a),o={writes:i.map(c=>S1(l.serializer,c))};await l.So("Commit",l.serializer.databaseId,Qt.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let r;if(t.isFoundDocument())r=t.version;else{if(!t.isNoDocument())throw ft();r=gt.min()}const a=this.readVersions.get(t.key.toString());if(a){if(!r.isEqual(a))throw new Ye(Ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),r)}precondition(t){const r=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&r?r.isEqual(gt.min())?Ls.exists(!1):Ls.updateTime(r):Ls.none()}preconditionForUpdate(t){const r=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&r){if(r.isEqual(gt.min()))throw new Ye(Ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ls.updateTime(r)}return Ls.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(t,r,a,i,l){this.asyncQueue=t,this.datastore=r,this.options=a,this.updateFunction=i,this.deferred=l,this.Tu=a.maxAttempts,this.a_=new sg(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new r6(this.datastore),r=this.du(t);r&&r.then(a=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(a)}).catch(i=>{this.Au(i)}))}).catch(a=>{this.Au(a)})})}du(t){try{const r=this.updateFunction(t);return!Kc(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const r=t.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!b1(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="FirestoreClient";class n6{constructor(t,r,a,i,l){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=i,this.user=Xs.UNAUTHENTICATED,this.clientId=z4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,async o=>{Ze(Vn,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(a,o=>(Ze(Vn,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new xa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=lg(r,"Failed to shutdown persistence");t.reject(a)}}),t.promise}}async function Sh(s,t){s.asyncQueue.verifyOperationInProgress(),Ze(Vn,"Initializing OfflineComponentProvider");const r=s.configuration;await t.initialize(r);let a=r.initialUser;s.setCredentialChangeListener(async i=>{a.isEqual(i)||(await A1(t.localStore,i),a=i)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function Rj(s,t){s.asyncQueue.verifyOperationInProgress();const r=await i6(s);Ze(Vn,"Initializing OnlineComponentProvider"),await t.initialize(r,s.configuration),s.setCredentialChangeListener(a=>Cj(t.remoteStore,a)),s.setAppCheckTokenChangeListener((a,i)=>Cj(t.remoteStore,i)),s._onlineComponents=t}async function i6(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Ze(Vn,"Using user provided OfflineComponentProvider");try{await Sh(s,s._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(i){return i.name==="FirebaseError"?i.code===Ee.FAILED_PRECONDITION||i.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;_o("Error using user provided cache. Falling back to memory cache: "+r),await Sh(s,new bx)}}else Ze(Vn,"Using default OfflineComponentProvider"),await Sh(s,new s6(void 0));return s._offlineComponents}async function fg(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Ze(Vn,"Using user provided OnlineComponentProvider"),await Rj(s,s._uninitializedComponentsProvider._online)):(Ze(Vn,"Using default OnlineComponentProvider"),await Rj(s,new m0))),s._onlineComponents}function o6(s){return fg(s).then(t=>t.syncEngine)}function l6(s){return fg(s).then(t=>t.datastore)}async function vx(s){const t=await fg(s),r=t.eventManager;return r.onListen=$A.bind(null,t.syncEngine),r.onUnlisten=HA.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=WA.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=GA.bind(null,t.syncEngine),r}function c6(s,t,r={}){const a=new xa;return s.asyncQueue.enqueueAndForget(async()=>function(l,o,c,d,h){const g=new pg({next:k=>{g.su(),o.enqueueAndForget(()=>dg(l,N));const E=k.docs.has(c);!E&&k.fromCache?h.reject(new Ye(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&k.fromCache&&d&&d.source==="server"?h.reject(new Ye(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(k)},error:k=>h.reject(k)}),N=new xg(lm(c.path),g,{includeMetadataChanges:!0,Ta:!0});return cg(l,N)}(await vx(s),s.asyncQueue,t,r,a)),a.promise}function d6(s,t,r={}){const a=new xa;return s.asyncQueue.enqueueAndForget(async()=>function(l,o,c,d,h){const g=new pg({next:k=>{g.su(),o.enqueueAndForget(()=>dg(l,N)),k.fromCache&&d.source==="server"?h.reject(new Ye(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(k)},error:k=>h.reject(k)}),N=new xg(c,g,{includeMetadataChanges:!0,Ta:!0});return cg(l,N)}(await vx(s),s.asyncQueue,t,r,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(s,t,r){if(!r)throw new Ye(Ee.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function u6(s,t,r,a){if(t===!0&&a===!0)throw new Ye(Ee.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function Oj(s){if(!ht.isDocumentKey(s))throw new Ye(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Lj(s){if(ht.isDocumentKey(s))throw new Ye(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function ym(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(a){return a.constructor?a.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":ft()}function ir(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new Ye(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=ym(s);throw new Ye(Ee.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return s}function x6(s,t){if(t<=0)throw new Ye(Ee.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="firestore.googleapis.com",Vj=!0;class zj{constructor(t){var r,a;if(t.host===void 0){if(t.ssl!==void 0)throw new Ye(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=J1,this.ssl=Vj}else this.host=t.host,this.ssl=(r=t.ssl)!==null&&r!==void 0?r:Vj;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=_1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<zD)throw new Ye(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}u6("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Y1((a=t.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ye(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ye(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ye(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(a,i){return a.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class bm{constructor(t,r,a,i){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=a,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zj({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ye(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ye(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zj(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new v8;switch(a.type){case"firstParty":return new k8(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Ye(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const a=Mj.get(r);a&&(Ze("ComponentProvider","Removing Datastore"),Mj.delete(r),a.terminate())}(this),Promise.resolve()}}function m6(s,t,r,a={}){var i;const l=(s=ir(s,bm))._getSettings(),o=Object.assign(Object.assign({},l),{emulatorOptions:s._getEmulatorOptions()}),c=`${t}:${r}`;l.host!==J1&&l.host!==c&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},l),{host:c,ssl:!1,emulatorOptions:a});if(!Dn(d,o)&&(s._setSettings(d),a.mockUserToken)){let h,g;if(typeof a.mockUserToken=="string")h=a.mockUserToken,g=Xs.MOCK_USER;else{h=j4(a.mockUserToken,(i=s._app)===null||i===void 0?void 0:i.options.projectId);const N=a.mockUserToken.sub||a.mockUserToken.user_id;if(!N)throw new Ye(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Xs(N)}s._authCredentials=new j8(new L4(h,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(t,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new Xa(this.firestore,t,this._query)}}class zs{constructor(t,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new zs(this.firestore,t,this._key)}}class Cn extends Xa{constructor(t,r,a){super(t,r,lm(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new zs(this.firestore,null,new ht(t))}withConverter(t){return new Cn(this.firestore,t,this._path)}}function X(s,t,...r){if(s=Jt(s),X1("collection","path",t),s instanceof bm){const a=Qt.fromString(t,...r);return Lj(a),new Cn(s,null,a)}{if(!(s instanceof zs||s instanceof Cn))throw new Ye(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Qt.fromString(t,...r));return Lj(a),new Cn(s.firestore,null,a)}}function B(s,t,...r){if(s=Jt(s),arguments.length===1&&(t=z4.newId()),X1("doc","path",t),s instanceof bm){const a=Qt.fromString(t,...r);return Oj(a),new zs(s,null,new ht(a))}{if(!(s instanceof zs||s instanceof Cn))throw new Ye(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Qt.fromString(t,...r));return Oj(a),new zs(s.firestore,s instanceof Cn?s.converter:null,new ht(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj="AsyncQueue";class Fj{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new sg(this,"async_queue_retry"),this.Su=()=>{const a=Ph();a&&Ze(Bj,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.bu=t;const r=Ph();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const r=Ph();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const r=new xa;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Qo(t))throw t;Ze(Bj,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const r=this.bu.then(()=>(this.pu=!0,t().catch(a=>{this.gu=a,this.pu=!1;const i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(a);throw Wa("INTERNAL UNHANDLED ERROR: ",i),a}).then(a=>(this.pu=!1,a))));return this.bu=r,r}enqueueAfterDelay(t,r,a){this.Du(),this.wu.indexOf(t)>-1&&(r=0);const i=og.createAndSchedule(this,t,r,a,l=>this.Fu(l));return this.fu.push(i),i}Du(){this.gu&&ft()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const r of this.fu)if(r.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.fu)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const r=this.fu.indexOf(t);this.fu.splice(r,1)}}function Uj(s){return function(r,a){if(typeof r!="object"||r===null)return!1;const i=r;for(const l of a)if(l in i&&typeof i[l]=="function")return!0;return!1}(s,["next","error","complete"])}class ja extends bm{constructor(t,r,a,i){super(t,r,a,i),this.type="firestore",this._queue=new Fj,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Fj(t),this._firestoreClient=void 0,await t}}}function h6(s,t){const r=typeof s=="object"?s:nm(),a=typeof s=="string"?s:t||ux,i=Wn(r,"firestore").getImmediate({identifier:a});if(!i._initialized){const l=y4("firestore");l&&m6(i,...l)}return i}function ed(s){if(s._terminated)throw new Ye(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||p6(s),s._firestoreClient}function p6(s){var t,r,a;const i=s._freezeSettings(),l=function(c,d,h,g){return new z8(c,d,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Y1(g.experimentalLongPollingOptions),g.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,i);s._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((a=i.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(s._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),s._firestoreClient=new n6(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ni(Fs.fromBase64String(t))}catch(r){throw new Ye(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Ni(Fs.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Ye(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Os(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Ye(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Ye(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return wt(this._lat,t._lat)||wt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(a,i){if(a.length!==i.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==i[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=/^__.*__$/;class g6{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return this.fieldMask!==null?new Hn(t,this.data,this.fieldMask,r,this.fieldTransforms):new Yc(t,this.data,r,this.fieldTransforms)}}class Z1{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return new Hn(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function ek(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class bg{constructor(t,r,a,i,l,o){this.settings=t,this.databaseId=r,this.serializer=a,this.ignoreUndefinedProperties=i,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new bg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var r;const a=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.ku({path:a,Qu:!1});return i.$u(t),i}Uu(t){var r;const a=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.ku({path:a,Qu:!1});return i.Bu(),i}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return jx(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(ek(this.Lu)&&f6.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class y6{constructor(t,r,a){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=a||pm(t)}ju(t,r,a,i=!1){return new bg({Lu:t,methodName:r,zu:a,path:Os.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rd(s){const t=s._freezeSettings(),r=pm(s._databaseId);return new y6(s._databaseId,!!t.ignoreUndefinedProperties,r)}function vg(s,t,r,a,i,l={}){const o=s.ju(l.merge||l.mergeFields?2:0,t,r,i);wg("Data must be an object, but it was:",o,a);const c=rk(a,o);let d,h;if(l.merge)d=new wr(o.fieldMask),h=o.fieldTransforms;else if(l.mergeFields){const g=[];for(const N of l.mergeFields){const k=h0(t,N,r);if(!o.contains(k))throw new Ye(Ee.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);nk(g,k)||g.push(k)}d=new wr(g),h=o.fieldTransforms.filter(N=>d.covers(N.field))}else d=null,h=o.fieldTransforms;return new g6(new rr(c),d,h)}class vm extends sd{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof vm}}class jg extends sd{_toFieldTransform(t){return new p1(t.path,new Ic)}isEqual(t){return t instanceof jg}}class Ng extends sd{constructor(t,r){super(t),this.Ju=r}_toFieldTransform(t){const r=new Cc(t.serializer,d1(t.serializer,this.Ju));return new p1(t.path,r)}isEqual(t){return t instanceof Ng&&this.Ju===t.Ju}}function tk(s,t,r,a){const i=s.ju(1,t,r);wg("Data must be an object, but it was:",i,a);const l=[],o=rr.empty();qn(a,(d,h)=>{const g=kg(t,d,r);h=Jt(h);const N=i.Uu(g);if(h instanceof vm)l.push(g);else{const k=ad(h,N);k!=null&&(l.push(g),o.set(g,k))}});const c=new wr(l);return new Z1(o,c,i.fieldTransforms)}function sk(s,t,r,a,i,l){const o=s.ju(1,t,r),c=[h0(t,a,r)],d=[i];if(l.length%2!=0)throw new Ye(Ee.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<l.length;k+=2)c.push(h0(t,l[k])),d.push(l[k+1]);const h=[],g=rr.empty();for(let k=c.length-1;k>=0;--k)if(!nk(h,c[k])){const E=c[k];let y=d[k];y=Jt(y);const L=o.Uu(E);if(y instanceof vm)h.push(E);else{const _=ad(y,L);_!=null&&(h.push(E),g.set(E,_))}}const N=new wr(h);return new Z1(g,N,o.fieldTransforms)}function b6(s,t,r,a=!1){return ad(r,s.ju(a?4:3,t))}function ad(s,t){if(ak(s=Jt(s)))return wg("Unsupported field value:",t,s),rk(s,t);if(s instanceof sd)return function(a,i){if(!ek(i.Lu))throw i.Wu(`${a._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(i);l&&i.fieldTransforms.push(l)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(a,i){const l=[];let o=0;for(const c of a){let d=ad(c,i.Ku(o));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),o++}return{arrayValue:{values:l}}}(s,t)}return function(a,i){if((a=Jt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return d1(i.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=Xt.fromDate(a);return{timestampValue:px(i.serializer,l)}}if(a instanceof Xt){const l=new Xt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:px(i.serializer,l)}}if(a instanceof gg)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Ni)return{bytesValue:w1(i.serializer,a._byteString)};if(a instanceof zs){const l=i.databaseId,o=a.firestore._databaseId;if(!o.isEqual(l))throw i.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Xf(a.firestore._databaseId||i.databaseId,a._key.path)}}if(a instanceof yg)return function(o,c){return{mapValue:{fields:{[G4]:{stringValue:K4},[xx]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw c.Wu("VectorValues must only contain numeric values.");return Qf(c.serializer,h)})}}}}}}(a,i);throw i.Wu(`Unsupported field value: ${ym(a)}`)}(s,t)}function rk(s,t){const r={};return F4(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qn(s,(a,i)=>{const l=ad(i,t.qu(a));l!=null&&(r[a]=l)}),{mapValue:{fields:r}}}function ak(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Xt||s instanceof gg||s instanceof Ni||s instanceof zs||s instanceof sd||s instanceof yg)}function wg(s,t,r){if(!ak(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const a=ym(r);throw a==="an object"?t.Wu(s+" a custom object"):t.Wu(s+" "+a)}}function h0(s,t,r){if((t=Jt(t))instanceof td)return t._internalPath;if(typeof t=="string")return kg(s,t);throw jx("Field path arguments must be of type string or ",s,!1,void 0,r)}const v6=new RegExp("[~\\*/\\[\\]]");function kg(s,t,r){if(t.search(v6)>=0)throw jx(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new td(...t.split("."))._internalPath}catch{throw jx(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function jx(s,t,r,a,i){const l=a&&!a.isEmpty(),o=i!==void 0;let c=`Function ${t}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(l||o)&&(d+=" (found",l&&(d+=` in field ${a}`),o&&(d+=` in document ${i}`),d+=")"),new Ye(Ee.INVALID_ARGUMENT,c+s+d)}function nk(s,t){return s.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(t,r,a,i,l){this._firestore=t,this._userDataWriter=r,this._key=a,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new zs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new j6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(jm("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class j6 extends Nx{data(){return super.data()}}function jm(s,t){return typeof t=="string"?kg(s,t):t instanceof td?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ye(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ig{}class Pg extends Ig{}function me(s,t,...r){let a=[];t instanceof Ig&&a.push(t),a=a.concat(r),function(l){const o=l.filter(d=>d instanceof Sg).length,c=l.filter(d=>d instanceof Nm).length;if(o>1||o>0&&c>0)throw new Ye(Ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const i of a)s=i._apply(s);return s}class Nm extends Pg{constructor(t,r,a){super(),this._field=t,this._op=r,this._value=a,this.type="where"}static _create(t,r,a){return new Nm(t,r,a)}_apply(t){const r=this._parse(t);return ok(t._query,r),new Xa(t.firestore,t.converter,n0(t._query,r))}_parse(t){const r=rd(t.firestore);return function(l,o,c,d,h,g,N){let k;if(h.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Ye(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Wj(N,g);const y=[];for(const L of N)y.push($j(d,l,L));k={arrayValue:{values:y}}}else k=$j(d,l,N)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Wj(N,g),k=b6(c,o,N,g==="in"||g==="not-in");return js.create(h,g,k)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function we(s,t,r){const a=t,i=jm("where",s);return Nm._create(i,a,r)}class Sg extends Ig{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Sg(t,r)}_parse(t){const r=this._queryConstraints.map(a=>a._parse(t)).filter(a=>a.getFilters().length>0);return r.length===1?r[0]:ra.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(i,l){let o=i;const c=l.getFlattenedFilters();for(const d of c)ok(o,d),o=n0(o,d)}(t._query,r),new Xa(t.firestore,t.converter,n0(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cg extends Pg{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new Cg(t,r)}_apply(t){const r=function(i,l,o){if(i.startAt!==null)throw new Ye(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ye(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kc(l,o)}(t._query,this._field,this._direction);return new Xa(t.firestore,t.converter,function(i,l){const o=i.explicitOrderBy.concat([l]);return new Ko(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))}}function N6(s,t="asc"){const r=t,a=jm("orderBy",s);return Cg._create(a,r)}class Eg extends Pg{constructor(t,r,a){super(),this.type=t,this._limit=r,this._limitType=a}static _create(t,r,a){return new Eg(t,r,a)}_apply(t){return new Xa(t.firestore,t.converter,hx(t._query,this._limit,this._limitType))}}function Ft(s){return x6("limit",s),Eg._create("limit",s,"F")}function $j(s,t,r){if(typeof(r=Jt(r))=="string"){if(r==="")throw new Ye(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!r1(t)&&r.indexOf("/")!==-1)throw new Ye(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=t.path.child(Qt.fromString(r));if(!ht.isDocumentKey(a))throw new Ye(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return aj(s,new ht(a))}if(r instanceof zs)return aj(s,r._key);throw new Ye(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ym(r)}.`)}function Wj(s,t){if(!Array.isArray(s)||s.length===0)throw new Ye(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ok(s,t){const r=function(i,l){for(const o of i)for(const c of o.getFlattenedFilters())if(l.indexOf(c.op)>=0)return c.op;return null}(s.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Ye(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ye(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class lk{convertValue(t,r="none"){switch(On(t)){case 0:return null;case 1:return t.booleanValue;case 2:return gs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Mn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw ft()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const a={};return qn(t,(i,l)=>{a[i]=this.convertValue(l,r)}),a}convertVectorValue(t){var r,a,i;const l=(i=(a=(r=t.fields)===null||r===void 0?void 0:r[xx].arrayValue)===null||a===void 0?void 0:a.values)===null||i===void 0?void 0:i.map(o=>gs(o.doubleValue));return new yg(l)}convertGeoPoint(t){return new gg(gs(t.latitude),gs(t.longitude))}convertArray(t,r){return(t.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(t,r){switch(r){case"previous":const a=om(t);return a==null?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(jc(t));default:return null}}convertTimestamp(t){const r=Rn(t);return new Xt(r.seconds,r.nanos)}convertDocumentKey(t,r){const a=Qt.fromString(t);Mt(T1(a));const i=new Nc(a.get(1),a.get(3)),l=new ht(a.popFirst(5));return i.isEqual(r)||Wa(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(s,t,r){let a;return a=s?r&&(r.merge||r.mergeFields)?s.toFirestore(t,r):s.toFirestore(t):t,a}class w6 extends lk{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ni(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new zs(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class _g extends Nx{constructor(t,r,a,i,l,o){super(t,r,a,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new Nu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const a=this._document.data.field(jm("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class Nu extends _g{data(t={}){return super.data(t)}}class ck{constructor(t,r,a,i){this._firestore=t,this._userDataWriter=r,this._snapshot=i,this.metadata=new io(i.hasPendingWrites,i.fromCache),this.query=a}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(a=>{t.call(r,new Nu(this._firestore,this._userDataWriter,a.key,a,new io(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ye(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,l){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const d=new Nu(i._firestore,i._userDataWriter,c.doc.key,c.doc,new io(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>l||c.type!==3).map(c=>{const d=new Nu(i._firestore,i._userDataWriter,c.doc.key,c.doc,new io(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,g=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),g=o.indexOf(c.doc.key)),{type:k6(c.type),doc:d,oldIndex:h,newIndex:g}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function k6(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(s){s=ir(s,zs);const t=ir(s.firestore,ja);return c6(ed(t),s._key).then(r=>dk(t,s,r))}class wm extends lk{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ni(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new zs(this.firestore,null,r)}}function jt(s){s=ir(s,Xa);const t=ir(s.firestore,ja),r=ed(t),a=new wm(t);return ik(s._query),d6(r,s._query).then(i=>new ck(t,a,s,i))}function Kr(s,t,r){s=ir(s,zs);const a=ir(s.firestore,ja),i=Tg(s.converter,t,r);return km(a,[vg(rd(a),"setDoc",s._key,i,s.converter!==null,r).toMutation(s._key,Ls.none())])}function xs(s,t,r,...a){s=ir(s,zs);const i=ir(s.firestore,ja),l=rd(i);let o;return o=typeof(t=Jt(t))=="string"||t instanceof td?sk(l,"updateDoc",s._key,t,r,a):tk(l,"updateDoc",s._key,t),km(i,[o.toMutation(s._key,Ls.exists(!0))])}function wu(s){return km(ir(s.firestore,ja),[new mm(s._key,Ls.none())])}function En(s,t){const r=ir(s.firestore,ja),a=B(s),i=Tg(s.converter,t);return km(r,[vg(rd(s.firestore),"addDoc",a._key,i,s.converter!==null,{}).toMutation(a._key,Ls.exists(!1))]).then(()=>a)}function Ie(s,...t){var r,a,i;s=Jt(s);let l={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||Uj(t[o])||(l=t[o],o++);const c={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Uj(t[o])){const N=t[o];t[o]=(r=N.next)===null||r===void 0?void 0:r.bind(N),t[o+1]=(a=N.error)===null||a===void 0?void 0:a.bind(N),t[o+2]=(i=N.complete)===null||i===void 0?void 0:i.bind(N)}let d,h,g;if(s instanceof zs)h=ir(s.firestore,ja),g=lm(s._key.path),d={next:N=>{t[o]&&t[o](dk(h,s,N))},error:t[o+1],complete:t[o+2]};else{const N=ir(s,Xa);h=ir(N.firestore,ja),g=N._query;const k=new wm(h);d={next:E=>{t[o]&&t[o](new ck(h,k,N,E))},error:t[o+1],complete:t[o+2]},ik(s._query)}return function(k,E,y,L){const _=new pg(L),A=new xg(E,_,y);return k.asyncQueue.enqueueAndForget(async()=>cg(await vx(k),A)),()=>{_.su(),k.asyncQueue.enqueueAndForget(async()=>dg(await vx(k),A))}}(ed(h),g,c,d)}function km(s,t){return function(a,i){const l=new xa;return a.asyncQueue.enqueueAndForget(async()=>QA(await o6(a),i,l)),l.promise}(ed(s),t)}function dk(s,t,r){const a=r.docs.get(t._key),i=new wm(s);return new _g(s,i,t._key,a,new io(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6={maxAttempts:5};function _l(s,t){if((s=Jt(s)).firestore!==t)throw new Ye(Ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=rd(t)}get(t){const r=_l(t,this._firestore),a=new w6(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return ft();const l=i[0];if(l.isFoundDocument())return new Nx(this._firestore,a,l.key,l,r.converter);if(l.isNoDocument())return new Nx(this._firestore,a,r._key,null,r.converter);throw ft()})}set(t,r,a){const i=_l(t,this._firestore),l=Tg(i.converter,r,a),o=vg(this._dataReader,"Transaction.set",i._key,l,i.converter!==null,a);return this._transaction.set(i._key,o),this}update(t,r,a,...i){const l=_l(t,this._firestore);let o;return o=typeof(r=Jt(r))=="string"||r instanceof td?sk(this._dataReader,"Transaction.update",l._key,r,a,i):tk(this._dataReader,"Transaction.update",l._key,r),this._transaction.update(l._key,o),this}delete(t){const r=_l(t,this._firestore);return this._transaction.delete(r._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6 extends P6{constructor(t,r){super(t,r),this._firestore=t}get(t){const r=_l(t,this._firestore),a=new wm(this._firestore);return super.get(t).then(i=>new _g(this._firestore,a,r._key,i._document,new io(!1,!1),r.converter))}}function ot(s,t,r){s=ir(s,ja);const a=Object.assign(Object.assign({},I6),r);return function(l){if(l.maxAttempts<1)throw new Ye(Ee.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(l,o,c){const d=new xa;return l.asyncQueue.enqueueAndForget(async()=>{const h=await l6(l);new a6(l.asyncQueue,h,c,o,d).Iu()}),d.promise}(ed(s),i=>t(new S6(s,i)),a)}function be(){return new jg("serverTimestamp")}function it(s){return new Ng("increment",s)}(function(t,r=!0){(function(i){Ho=i})(_i),sa(new Br("firestore",(a,{instanceIdentifier:i,options:l})=>{const o=a.getProvider("app").getImmediate(),c=new ja(new N8(a.getProvider("auth-internal")),new I8(o,a.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ye(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nc(h.options.projectId,g)}(o,i),o);return l=Object.assign({useFetchStreams:r},l),c._setSettings(l),c},"PUBLIC").setMultipleInstances(!0)),fr(Hv,Gv,t),fr(Hv,Gv,"esm2017")})();var C6="firebase",E6="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr(C6,E6,"app");const uk="@firebase/installations",Dg="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=1e4,mk=`w:${Dg}`,hk="FIS_v2",T6="https://firebaseinstallations.googleapis.com/v1",_6=60*60*1e3,D6="installations",A6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},wi=new Ti(D6,A6,R6);function pk(s){return s instanceof Fr&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk({projectId:s}){return`${T6}/projects/${s}/installations`}function gk(s){return{token:s.token,requestStatus:2,expiresIn:O6(s.expiresIn),creationTime:Date.now()}}async function yk(s,t){const a=(await t.json()).error;return wi.create("request-failed",{requestName:s,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function bk({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function M6(s,{refreshToken:t}){const r=bk(s);return r.append("Authorization",L6(t)),r}async function vk(s){const t=await s();return t.status>=500&&t.status<600?s():t}function O6(s){return Number(s.replace("s","000"))}function L6(s){return`${hk} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V6({appConfig:s,heartbeatServiceProvider:t},{fid:r}){const a=fk(s),i=bk(s),l=t.getImmediate({optional:!0});if(l){const h=await l.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={fid:r,authVersion:hk,appId:s.appId,sdkVersion:mk},c={method:"POST",headers:i,body:JSON.stringify(o)},d=await vk(()=>fetch(a,c));if(d.ok){const h=await d.json();return{fid:h.fid||r,registrationStatus:2,refreshToken:h.refreshToken,authToken:gk(h.authToken)}}else throw await yk("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(s){return new Promise(t=>{setTimeout(t,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=/^[cdef][\w-]{21}$/,p0="";function F6(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const r=U6(s);return B6.test(r)?r:p0}catch{return p0}}function U6(s){return z6(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=new Map;function wk(s,t){const r=Im(s);kk(r,t),$6(r,t)}function kk(s,t){const r=Nk.get(s);if(r)for(const a of r)a(t)}function $6(s,t){const r=W6();r&&r.postMessage({key:s,fid:t}),q6()}let li=null;function W6(){return!li&&"BroadcastChannel"in self&&(li=new BroadcastChannel("[Firebase] FID Change"),li.onmessage=s=>{kk(s.data.key,s.data.fid)}),li}function q6(){Nk.size===0&&li&&(li.close(),li=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6="firebase-installations-database",G6=1,ki="firebase-installations-store";let Ch=null;function Ag(){return Ch||(Ch=S4(H6,G6,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(ki)}}})),Ch}async function wx(s,t){const r=Im(s),i=(await Ag()).transaction(ki,"readwrite"),l=i.objectStore(ki),o=await l.get(r);return await l.put(t,r),await i.done,(!o||o.fid!==t.fid)&&wk(s,t.fid),t}async function Ik(s){const t=Im(s),a=(await Ag()).transaction(ki,"readwrite");await a.objectStore(ki).delete(t),await a.done}async function Pm(s,t){const r=Im(s),i=(await Ag()).transaction(ki,"readwrite"),l=i.objectStore(ki),o=await l.get(r),c=t(o);return c===void 0?await l.delete(r):await l.put(c,r),await i.done,c&&(!o||o.fid!==c.fid)&&wk(s,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rg(s){let t;const r=await Pm(s.appConfig,a=>{const i=Q6(a),l=K6(s,i);return t=l.registrationPromise,l.installationEntry});return r.fid===p0?{installationEntry:await t}:{installationEntry:r,registrationPromise:t}}function Q6(s){const t=s||{fid:F6(),registrationStatus:0};return Pk(t)}function K6(s,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(wi.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},a=Y6(s,r);return{installationEntry:r,registrationPromise:a}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:X6(s)}:{installationEntry:t}}async function Y6(s,t){try{const r=await V6(s,t);return wx(s.appConfig,r)}catch(r){throw pk(r)&&r.customData.serverCode===409?await Ik(s.appConfig):await wx(s.appConfig,{fid:t.fid,registrationStatus:0}),r}}async function X6(s){let t=await qj(s.appConfig);for(;t.registrationStatus===1;)await jk(100),t=await qj(s.appConfig);if(t.registrationStatus===0){const{installationEntry:r,registrationPromise:a}=await Rg(s);return a||r}return t}function qj(s){return Pm(s,t=>{if(!t)throw wi.create("installation-not-found");return Pk(t)})}function Pk(s){return J6(s)?{fid:s.fid,registrationStatus:0}:s}function J6(s){return s.registrationStatus===1&&s.registrationTime+xk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z6({appConfig:s,heartbeatServiceProvider:t},r){const a=eR(s,r),i=M6(s,r),l=t.getImmediate({optional:!0});if(l){const h=await l.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={installation:{sdkVersion:mk,appId:s.appId}},c={method:"POST",headers:i,body:JSON.stringify(o)},d=await vk(()=>fetch(a,c));if(d.ok){const h=await d.json();return gk(h)}else throw await yk("Generate Auth Token",d)}function eR(s,{fid:t}){return`${fk(s)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mg(s,t=!1){let r;const a=await Pm(s.appConfig,l=>{if(!Sk(l))throw wi.create("not-registered");const o=l.authToken;if(!t&&rR(o))return l;if(o.requestStatus===1)return r=tR(s,t),l;{if(!navigator.onLine)throw wi.create("app-offline");const c=nR(l);return r=sR(s,c),c}});return r?await r:a.authToken}async function tR(s,t){let r=await Hj(s.appConfig);for(;r.authToken.requestStatus===1;)await jk(100),r=await Hj(s.appConfig);const a=r.authToken;return a.requestStatus===0?Mg(s,t):a}function Hj(s){return Pm(s,t=>{if(!Sk(t))throw wi.create("not-registered");const r=t.authToken;return iR(r)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function sR(s,t){try{const r=await Z6(s,t),a=Object.assign(Object.assign({},t),{authToken:r});return await wx(s.appConfig,a),r}catch(r){if(pk(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await Ik(s.appConfig);else{const a=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await wx(s.appConfig,a)}throw r}}function Sk(s){return s!==void 0&&s.registrationStatus===2}function rR(s){return s.requestStatus===2&&!aR(s)}function aR(s){const t=Date.now();return t<s.creationTime||s.creationTime+s.expiresIn<t+_6}function nR(s){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:t})}function iR(s){return s.requestStatus===1&&s.requestTime+xk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(s){const t=s,{installationEntry:r,registrationPromise:a}=await Rg(t);return a?a.catch(console.error):Mg(t).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(s,t=!1){const r=s;return await cR(r),(await Mg(r,t)).token}async function cR(s){const{registrationPromise:t}=await Rg(s);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(s){if(!s||!s.options)throw Eh("App Configuration");if(!s.name)throw Eh("App Name");const t=["projectId","apiKey","appId"];for(const r of t)if(!s.options[r])throw Eh(r);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Eh(s){return wi.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck="installations",uR="installations-internal",xR=s=>{const t=s.getProvider("app").getImmediate(),r=dR(t),a=Wn(t,"heartbeat");return{app:t,appConfig:r,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},mR=s=>{const t=s.getProvider("app").getImmediate(),r=Wn(t,Ck).getImmediate();return{getId:()=>oR(r),getToken:i=>lR(r,i)}};function hR(){sa(new Br(Ck,xR,"PUBLIC")),sa(new Br(uR,mR,"PRIVATE"))}hR();fr(uk,Dg);fr(uk,Dg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="analytics",pR="firebase_id",fR="origin",gR=60*1e3,yR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Og="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=new am("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Pr=new Ti("analytics","Analytics",bR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(s){if(!s.startsWith(Og)){const t=Pr.create("invalid-gtag-resource",{gtagURL:s});return gr.warn(t.message),""}return s}function Ek(s){return Promise.all(s.map(t=>t.catch(r=>r)))}function jR(s,t){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(s,t)),r}function NR(s,t){const r=jR("firebase-js-sdk-policy",{createScriptURL:vR}),a=document.createElement("script"),i=`${Og}?l=${s}&id=${t}`;a.src=r?r==null?void 0:r.createScriptURL(i):i,a.async=!0,document.head.appendChild(a)}function wR(s){let t=[];return Array.isArray(window[s])?t=window[s]:window[s]=t,t}async function kR(s,t,r,a,i,l){const o=a[i];try{if(o)await t[o];else{const d=(await Ek(r)).find(h=>h.measurementId===i);d&&await t[d.appId]}}catch(c){gr.error(c)}s("config",i,l)}async function IR(s,t,r,a,i){try{let l=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const c=await Ek(r);for(const d of o){const h=c.find(N=>N.measurementId===d),g=h&&t[h.appId];if(g)l.push(g);else{l=[];break}}}l.length===0&&(l=Object.values(t)),await Promise.all(l),s("event",a,i||{})}catch(l){gr.error(l)}}function PR(s,t,r,a){async function i(l,...o){try{if(l==="event"){const[c,d]=o;await IR(s,t,r,c,d)}else if(l==="config"){const[c,d]=o;await kR(s,t,r,a,c,d)}else if(l==="consent"){const[c,d]=o;s("consent",c,d)}else if(l==="get"){const[c,d,h]=o;s("get",c,d,h)}else if(l==="set"){const[c]=o;s("set",c)}else s(l,...o)}catch(c){gr.error(c)}}return i}function SR(s,t,r,a,i){let l=function(...o){window[a].push(arguments)};return window[i]&&typeof window[i]=="function"&&(l=window[i]),window[i]=PR(l,s,t,r),{gtagCore:l,wrappedGtag:window[i]}}function CR(s){const t=window.document.getElementsByTagName("script");for(const r of Object.values(t))if(r.src&&r.src.includes(Og)&&r.src.includes(s))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=30,TR=1e3;class _R{constructor(t={},r=TR){this.throttleMetadata=t,this.intervalMillis=r}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,r){this.throttleMetadata[t]=r}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const Tk=new _R;function DR(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function AR(s){var t;const{appId:r,apiKey:a}=s,i={method:"GET",headers:DR(a)},l=yR.replace("{app-id}",r),o=await fetch(l,i);if(o.status!==200&&o.status!==304){let c="";try{const d=await o.json();!((t=d.error)===null||t===void 0)&&t.message&&(c=d.error.message)}catch{}throw Pr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()}async function RR(s,t=Tk,r){const{appId:a,apiKey:i,measurementId:l}=s.options;if(!a)throw Pr.create("no-app-id");if(!i){if(l)return{measurementId:l,appId:a};throw Pr.create("no-api-key")}const o=t.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new LR;return setTimeout(async()=>{c.abort()},r!==void 0?r:gR),_k({appId:a,apiKey:i,measurementId:l},o,c,t)}async function _k(s,{throttleEndTimeMillis:t,backoffCount:r},a,i=Tk){var l;const{appId:o,measurementId:c}=s;try{await MR(a,t)}catch(d){if(c)return gr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:c};throw d}try{const d=await AR(s);return i.deleteThrottleMetadata(o),d}catch(d){const h=d;if(!OR(h)){if(i.deleteThrottleMetadata(o),c)return gr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:c};throw d}const g=Number((l=h==null?void 0:h.customData)===null||l===void 0?void 0:l.httpStatus)===503?Ov(r,i.intervalMillis,ER):Ov(r,i.intervalMillis),N={throttleEndTimeMillis:Date.now()+g,backoffCount:r+1};return i.setThrottleMetadata(o,N),gr.debug(`Calling attemptFetch again in ${g} millis`),_k(s,N,a,i)}}function MR(s,t){return new Promise((r,a)=>{const i=Math.max(t-Date.now(),0),l=setTimeout(r,i);s.addEventListener(()=>{clearTimeout(l),a(Pr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function OR(s){if(!(s instanceof Fr)||!s.customData)return!1;const t=Number(s.customData.httpStatus);return t===429||t===500||t===503||t===504}class LR{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function VR(s,t,r,a,i){if(i&&i.global){s("event",r,a);return}else{const l=await t,o=Object.assign(Object.assign({},a),{send_to:l});s("event",r,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(){if(w4())try{await k4()}catch(s){return gr.warn(Pr.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return gr.warn(Pr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function BR(s,t,r,a,i,l,o){var c;const d=RR(s);d.then(E=>{r[E.measurementId]=E.appId,s.options.measurementId&&E.measurementId!==s.options.measurementId&&gr.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>gr.error(E)),t.push(d);const h=zR().then(E=>{if(E)return a.getId()}),[g,N]=await Promise.all([d,h]);CR(l)||NR(l,g.measurementId),i("js",new Date);const k=(c=o==null?void 0:o.config)!==null&&c!==void 0?c:{};return k[fR]="firebase",k.update=!0,N!=null&&(k[pR]=N),i("config",g.measurementId,k),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(t){this.app=t}_delete(){return delete Gl[this.app.options.appId],Promise.resolve()}}let Gl={},Gj=[];const Qj={};let Th="dataLayer",UR="gtag",Kj,Dk,Yj=!1;function $R(){const s=[];if(N4()&&s.push("This is a browser extension environment."),t_()||s.push("Cookies are not available."),s.length>0){const t=s.map((a,i)=>`(${i+1}) ${a}`).join(" "),r=Pr.create("invalid-analytics-context",{errorInfo:t});gr.warn(r.message)}}function WR(s,t,r){$R();const a=s.options.appId;if(!a)throw Pr.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)gr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Pr.create("no-api-key");if(Gl[a]!=null)throw Pr.create("already-exists",{id:a});if(!Yj){wR(Th);const{wrappedGtag:l,gtagCore:o}=SR(Gl,Gj,Qj,Th,UR);Dk=l,Kj=o,Yj=!0}return Gl[a]=BR(s,Gj,Qj,t,Kj,Th,r),new FR(s)}function qR(s=nm()){s=Jt(s);const t=Wn(s,kx);return t.isInitialized()?t.getImmediate():HR(s)}function HR(s,t={}){const r=Wn(s,kx);if(r.isInitialized()){const i=r.getImmediate();if(Dn(t,r.getOptions()))return i;throw Pr.create("already-initialized")}return r.initialize({options:t})}function GR(s,t,r,a){s=Jt(s),VR(Dk,Gl[s.app.options.appId],t,r,a).catch(i=>gr.error(i))}const Xj="@firebase/analytics",Jj="0.10.12";function QR(){sa(new Br(kx,(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return WR(a,i,r)},"PUBLIC")),sa(new Br("analytics-internal",s,"PRIVATE")),fr(Xj,Jj),fr(Xj,Jj,"esm2017");function s(t){try{const r=t.getProvider(kx).getImmediate();return{logEvent:(a,i,l)=>GR(r,a,i,l)}}catch(r){throw Pr.create("interop-component-reg-failed",{reason:r})}}}QR();function Lg(s,t){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(s);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(s,a[i])&&(r[a[i]]=s[a[i]]);return r}function Ak(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KR=Ak,Rk=new Ti("auth","Firebase",Ak());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=new am("@firebase/auth");function YR(s,...t){Ix.logLevel<=Tt.WARN&&Ix.warn(`Auth (${_i}): ${s}`,...t)}function ku(s,...t){Ix.logLevel<=Tt.ERROR&&Ix.error(`Auth (${_i}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(s,...t){throw Vg(s,...t)}function ha(s,...t){return Vg(s,...t)}function Mk(s,t,r){const a=Object.assign(Object.assign({},KR()),{[t]:r});return new Ti("auth","Firebase",a).create(t,{appName:s.name})}function La(s){return Mk(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vg(s,...t){if(typeof s!="string"){const r=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(r,...a)}return Rk.create(s,...t)}function yt(s,t,...r){if(!s)throw Vg(t,...r)}function Aa(s){const t="INTERNAL ASSERTION FAILED: "+s;throw ku(t),new Error(t)}function Ha(s,t){s||Aa(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function Ok(){return Zj()==="http:"||Zj()==="https:"}function Zj(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ok()||N4()||"connection"in navigator)?navigator.onLine:!0}function JR(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(t,r){this.shortDelay=t,this.longDelay=r,Ha(r>t,"Short delay should be less than long delay!"),this.isMobile=KT()||JT()}get(){return XR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(s,t){Ha(s.emulator,"Emulator should always be set here");const{url:r}=s.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{static initialize(t,r,a){this.fetchImpl=t,r&&(this.headersImpl=r),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tM=new nd(3e4,6e4);function Ja(s,t){return s.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:s.tenantId}):t}async function ka(s,t,r,a,i={}){return Vk(s,i,async()=>{let l={},o={};a&&(t==="GET"?o=a:l={body:JSON.stringify(a)});const c=Qc(Object.assign({key:s.config.apiKey},o)).slice(1),d=await s._getAdditionalHeaders();d["Content-Type"]="application/json",s.languageCode&&(d["X-Firebase-Locale"]=s.languageCode);const h=Object.assign({method:t,headers:d},l);return XT()||(h.referrerPolicy="no-referrer"),Lk.fetch()(await zk(s,s.config.apiHost,r,c),h)})}async function Vk(s,t,r){s._canInitEmulator=!1;const a=Object.assign(Object.assign({},ZR),t);try{const i=new rM(s),l=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await l.json();if("needConfirmation"in o)throw Yd(s,"account-exists-with-different-credential",o);if(l.ok&&!("errorMessage"in o))return o;{const c=l.ok?o.errorMessage:o.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yd(s,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw Yd(s,"email-already-in-use",o);if(d==="USER_DISABLED")throw Yd(s,"user-disabled",o);const g=a[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Mk(s,g,h);aa(s,g)}}catch(i){if(i instanceof Fr)throw i;aa(s,"network-request-failed",{message:String(i)})}}async function id(s,t,r,a,i={}){const l=await ka(s,t,r,a,i);return"mfaPendingCredential"in l&&aa(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function zk(s,t,r,a){const i=`${t}${r}?${a}`,l=s,o=l.config.emulator?zg(s.config,i):`${s.config.apiScheme}://${i}`;return eM.includes(r)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(o).toString():o}function sM(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,a)=>{this.timer=setTimeout(()=>a(ha(this.auth,"network-request-failed")),tM.get())})}}function Yd(s,t,r){const a={appName:s.name};r.email&&(a.email=r.email),r.phoneNumber&&(a.phoneNumber=r.phoneNumber);const i=ha(s,t,a);return i.customData._tokenResponse=r,i}function eN(s){return s!==void 0&&s.enterprise!==void 0}class aM{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return sM(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nM(s,t){return ka(s,"GET","/v2/recaptchaConfig",Ja(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(s,t){return ka(s,"POST","/v1/accounts:delete",t)}async function Sx(s,t){return ka(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function oM(s,t=!1){const r=Jt(s),a=await r.getIdToken(t),i=Bg(a);yt(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const l=typeof i.firebase=="object"?i.firebase:void 0,o=l==null?void 0:l.sign_in_provider;return{claims:i,token:a,authTime:Ql(_h(i.auth_time)),issuedAtTime:Ql(_h(i.iat)),expirationTime:Ql(_h(i.exp)),signInProvider:o||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function _h(s){return Number(s)*1e3}function Bg(s){const[t,r,a]=s.split(".");if(t===void 0||r===void 0||a===void 0)return ku("JWT malformed, contained fewer than 3 sections"),null;try{const i=f4(r);return i?JSON.parse(i):(ku("Failed to decode base64 JWT payload"),null)}catch(i){return ku("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function tN(s){const t=Bg(s);return yt(t,"internal-error"),yt(typeof t.exp<"u","internal-error"),yt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(s,t,r=!1){if(r)return t;try{return await t}catch(a){throw a instanceof Fr&&lM(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function lM({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var r;if(t){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ql(this.lastLoginAt),this.creationTime=Ql(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cx(s){var t;const r=s.auth,a=await s.getIdToken(),i=await Lo(s,Sx(r,{idToken:a}));yt(i==null?void 0:i.users.length,r,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const o=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?Bk(l.providerUserInfo):[],c=uM(s.providerData,o),d=s.isAnonymous,h=!(s.email&&l.passwordHash)&&!(c!=null&&c.length),g=d?h:!1,N={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new f0(l.createdAt,l.lastLoginAt),isAnonymous:g};Object.assign(s,N)}async function dM(s){const t=Jt(s);await Cx(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function uM(s,t){return[...s.filter(a=>!t.some(i=>i.providerId===a.providerId)),...t]}function Bk(s){return s.map(t=>{var{providerId:r}=t,a=Lg(t,["providerId"]);return{providerId:r,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xM(s,t){const r=await Vk(s,{},async()=>{const a=Qc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:l}=s.config,o=await zk(s,i,"/v1/token",`key=${l}`),c=await s._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Lk.fetch()(o,{method:"POST",headers:c,body:a})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function mM(s,t){return ka(s,"POST","/v2/accounts:revokeToken",Ja(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){yt(t.idToken,"internal-error"),yt(typeof t.idToken<"u","internal-error"),yt(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):tN(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){yt(t.length!==0,"internal-error");const r=tN(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(yt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:a,refreshToken:i,expiresIn:l}=await xM(t,r);this.updateTokensAndExpiration(a,i,Number(l))}updateTokensAndExpiration(t,r,a){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,r){const{refreshToken:a,accessToken:i,expirationTime:l}=r,o=new jo;return a&&(yt(typeof a=="string","internal-error",{appName:t}),o.refreshToken=a),i&&(yt(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),l&&(yt(typeof l=="number","internal-error",{appName:t}),o.expirationTime=l),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new jo,this.toJSON())}_performRefresh(){return Aa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(s,t){yt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class Xr{constructor(t){var{uid:r,auth:a,stsTokenManager:i}=t,l=Lg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=a,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new f0(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const r=await Lo(this,this.stsTokenManager.getToken(this.auth,t));return yt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return oM(this,t)}reload(){return dM(this)}_assign(t){this!==t&&(yt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>Object.assign({},r)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Xr(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(t){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),r&&await Cx(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jr(this.auth.app))return Promise.reject(La(this.auth));const t=await this.getIdToken();return await Lo(this,iM(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){var a,i,l,o,c,d,h,g;const N=(a=r.displayName)!==null&&a!==void 0?a:void 0,k=(i=r.email)!==null&&i!==void 0?i:void 0,E=(l=r.phoneNumber)!==null&&l!==void 0?l:void 0,y=(o=r.photoURL)!==null&&o!==void 0?o:void 0,L=(c=r.tenantId)!==null&&c!==void 0?c:void 0,_=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,A=(h=r.createdAt)!==null&&h!==void 0?h:void 0,z=(g=r.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:O,emailVerified:K,isAnonymous:G,providerData:H,stsTokenManager:R}=r;yt(O&&R,t,"internal-error");const u=jo.fromJSON(this.name,R);yt(typeof O=="string",t,"internal-error"),sn(N,t.name),sn(k,t.name),yt(typeof K=="boolean",t,"internal-error"),yt(typeof G=="boolean",t,"internal-error"),sn(E,t.name),sn(y,t.name),sn(L,t.name),sn(_,t.name),sn(A,t.name),sn(z,t.name);const W=new Xr({uid:O,auth:t,email:k,emailVerified:K,displayName:N,isAnonymous:G,photoURL:y,phoneNumber:E,tenantId:L,stsTokenManager:u,createdAt:A,lastLoginAt:z});return H&&Array.isArray(H)&&(W.providerData=H.map(U=>Object.assign({},U))),_&&(W._redirectEventId=_),W}static async _fromIdTokenResponse(t,r,a=!1){const i=new jo;i.updateFromServerResponse(r);const l=new Xr({uid:r.localId,auth:t,stsTokenManager:i,isAnonymous:a});return await Cx(l),l}static async _fromGetAccountInfoResponse(t,r,a){const i=r.users[0];yt(i.localId!==void 0,"internal-error");const l=i.providerUserInfo!==void 0?Bk(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(l!=null&&l.length),c=new jo;c.updateFromIdToken(a);const d=new Xr({uid:i.localId,auth:t,stsTokenManager:c,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new f0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(l!=null&&l.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=new Map;function Ra(s){Ha(s instanceof Function,"Expected a class definition");let t=sN.get(s);return t?(Ha(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,sN.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}Fk.type="NONE";const rN=Fk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(s,t,r){return`firebase:${s}:${t}:${r}`}class No{constructor(t,r,a){this.persistence=t,this.auth=r,this.userKey=a;const{config:i,name:l}=this.auth;this.fullUserKey=Iu(this.userKey,i.apiKey,l),this.fullPersistenceKey=Iu("persistence",i.apiKey,l),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await Sx(this.auth,{idToken:t}).catch(()=>{});return r?Xr._fromGetAccountInfoResponse(this.auth,r,t):null}return Xr._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,a="authUser"){if(!r.length)return new No(Ra(rN),t,a);const i=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let l=i[0]||Ra(rN);const o=Iu(a,t.config.apiKey,t.name);let c=null;for(const h of r)try{const g=await h._get(o);if(g){let N;if(typeof g=="string"){const k=await Sx(t,{idToken:g}).catch(()=>{});if(!k)break;N=await Xr._fromGetAccountInfoResponse(t,k,g)}else N=Xr._fromJSON(t,g);h!==l&&(c=N),l=h;break}}catch{}const d=i.filter(h=>h._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new No(l,t,a):(l=d[0],c&&await l._set(o,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==l)try{await h._remove(o)}catch{}})),new No(l,t,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(qk(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Uk(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Gk(t))return"Blackberry";if(Qk(t))return"Webos";if($k(t))return"Safari";if((t.includes("chrome/")||Wk(t))&&!t.includes("edge/"))return"Chrome";if(Hk(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(r);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function Uk(s=tr()){return/firefox\//i.test(s)}function $k(s=tr()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Wk(s=tr()){return/crios\//i.test(s)}function qk(s=tr()){return/iemobile/i.test(s)}function Hk(s=tr()){return/android/i.test(s)}function Gk(s=tr()){return/blackberry/i.test(s)}function Qk(s=tr()){return/webos/i.test(s)}function Fg(s=tr()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function hM(s=tr()){var t;return Fg(s)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function pM(){return ZT()&&document.documentMode===10}function Kk(s=tr()){return Fg(s)||Hk(s)||Qk(s)||Gk(s)||/windows phone/i.test(s)||qk(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(s,t=[]){let r;switch(s){case"Browser":r=aN(tr());break;case"Worker":r=`${aN(tr())}-${s}`;break;default:r=s}const a=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${_i}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const a=l=>new Promise((o,c)=>{try{const d=t(l);o(d)}catch(d){c(d)}});a.onAbort=r,this.queue.push(a);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const a of this.queue)await a(t),a.onAbort&&r.push(a.onAbort)}catch(a){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM(s,t={}){return ka(s,"GET","/v2/passwordPolicy",Ja(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=6;class bM{constructor(t){var r,a,i,l;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:yM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(a=t.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var r,a,i,l,o,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,d),this.validatePasswordCharacterOptions(t,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(a=d.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(l=d.containsUppercaseLetter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(t,r){const a=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;a&&(r.meetsMinPasswordLength=t.length>=a),i&&(r.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let a;for(let i=0;i<t.length;i++)a=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,r,a,i,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(t,r,a,i){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=a,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nN(this),this.idTokenSubscription=new nN(this),this.beforeStateQueue=new fM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Ra(r)),this._initializationPromise=this.queue(async()=>{var a,i,l;if(!this._deleted&&(this.persistenceManager=await No.create(this,t),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await Sx(this,{idToken:t}),a=await Xr._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(a)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(jr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let i=a,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(t);(!o||o===c)&&(d!=null&&d.user)&&(i=d.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await Cx(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=JR()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(jr(this.app))return Promise.reject(La(this));const r=t?Jt(t):null;return r&&yt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&yt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return jr(this.app)?Promise.reject(La(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return jr(this.app)?Promise.reject(La(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ra(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await gM(this),r=new bM(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ti("auth","Firebase",t())}onAuthStateChanged(t,r,a){return this.registerStateListener(this.authStateSubscription,t,r,a)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,a){return this.registerStateListener(this.idTokenSubscription,t,r,a)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(a.tenantId=this.tenantId),await mM(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,r){const a=await this.getOrInitRedirectPersistenceManager(r);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Ra(t)||this._popupRedirectResolver;yt(r,this,"argument-error"),this.redirectPersistenceManager=await No.create(this,[Ra(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,a;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===t?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(r=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,a,i){if(this._deleted)return()=>{};const l=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(yt(c,this,"internal-error"),c.then(()=>{o||l(this.currentUser)}),typeof r=="function"){const d=t.addObserver(r,a,i);return()=>{o=!0,d()}}else{const d=t.addObserver(r);return()=>{o=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Yk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const a=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());a&&(r["X-Firebase-Client"]=a);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var t;if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return r!=null&&r.error&&YR(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Ri(s){return Jt(s)}class nN{constructor(t){this.auth=t,this.observer=null,this.addObserver=i_(r=>this.observer=r)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jM(s){Sm=s}function Xk(s){return Sm.loadJS(s)}function NM(){return Sm.recaptchaEnterpriseScript}function wM(){return Sm.gapiScript}function kM(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class IM{constructor(){this.enterprise=new PM}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class PM{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const SM="recaptcha-enterprise",Jk="NO_RECAPTCHA";class CM{constructor(t){this.type=SM,this.auth=Ri(t)}async verify(t="verify",r=!1){async function a(l){if(!r){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(o,c)=>{nM(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new aM(d);return l.tenantId==null?l._agentRecaptchaConfig=h:l._tenantRecaptchaConfigs[l.tenantId]=h,o(h.siteKey)}}).catch(d=>{c(d)})})}function i(l,o,c){const d=window.grecaptcha;eN(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:t}).then(h=>{o(h)}).catch(()=>{o(Jk)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new IM().execute("siteKey",{action:"verify"}):new Promise((l,o)=>{a(this.auth).then(c=>{if(!r&&eN(window.grecaptcha))i(c,l,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let d=NM();d.length!==0&&(d+=c),Xk(d).then(()=>{i(c,l,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function vl(s,t,r,a=!1,i=!1){const l=new CM(s);let o;if(i)o=Jk;else try{o=await l.verify(r)}catch{o=await l.verify(r,!0)}const c=Object.assign({},t);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return a?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function g0(s,t,r,a,i){var l,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((l=s._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await vl(s,t,r,r==="getOobCode");return a(s,c)}else return a(s,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await vl(s,t,r,r==="getOobCode");return a(s,d)}else return Promise.reject(c)});else if(i==="PHONE_PROVIDER")if(!((o=s._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const c=await vl(s,t,r);return a(s,c).catch(async d=>{var h;if(((h=s._getRecaptchaConfig())===null||h===void 0?void 0:h.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(d.code==="auth/missing-recaptcha-token"||d.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${r} flow.`);const g=await vl(s,t,r,!1,!0);return a(s,g)}return Promise.reject(d)})}else{const c=await vl(s,t,r,!1,!0);return a(s,c)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(s,t){const r=Wn(s,"auth");if(r.isInitialized()){const i=r.getImmediate(),l=r.getOptions();if(Dn(l,t??{}))return i;aa(i,"already-initialized")}return r.initialize({options:t})}function TM(s,t){const r=(t==null?void 0:t.persistence)||[],a=(Array.isArray(r)?r:[r]).map(Ra);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(a,t==null?void 0:t.popupRedirectResolver)}function _M(s,t,r){const a=Ri(s);yt(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const i=!!(r!=null&&r.disableWarnings),l=Zk(t),{host:o,port:c}=DM(t),d=c===null?"":`:${c}`,h={url:`${l}//${o}${d}/`},g=Object.freeze({host:o,port:c,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!a._canInitEmulator){yt(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),yt(Dn(h,a.config.emulator)&&Dn(g,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=h,a.emulatorConfig=g,a.settings.appVerificationDisabledForTesting=!0,i||AM()}function Zk(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function DM(s){const t=Zk(s),r=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!r)return{host:"",port:null};const a=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(a);if(i){const l=i[1];return{host:l,port:iN(a.substr(l.length+1))}}else{const[l,o]=a.split(":");return{host:l,port:iN(o)}}}function iN(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function AM(){function s(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return Aa("not implemented")}_getIdTokenResponse(t){return Aa("not implemented")}_linkToIdToken(t,r){return Aa("not implemented")}_getReauthenticationResolver(t){return Aa("not implemented")}}async function RM(s,t){return ka(s,"POST","/v1/accounts:update",t)}async function MM(s,t){return ka(s,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(s,t){return id(s,"POST","/v1/accounts:signInWithPassword",Ja(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(s,t){return id(s,"POST","/v1/accounts:signInWithEmailLink",Ja(s,t))}async function VM(s,t){return id(s,"POST","/v1/accounts:signInWithEmailLink",Ja(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends Ug{constructor(t,r,a,i=null){super("password",a),this._email=t,this._password=r,this._tenantId=i}static _fromEmailAndPassword(t,r){return new Ec(t,r,"password")}static _fromEmailAndCode(t,r,a=null){return new Ec(t,r,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return g0(t,r,"signInWithPassword",OM,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return LM(t,{email:this._email,oobCode:this._password});default:aa(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const a={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return g0(t,a,"signUpPassword",MM,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return VM(t,{idToken:r,email:this._email,oobCode:this._password});default:aa(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(s,t){return id(s,"POST","/v1/accounts:signInWithIdp",Ja(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="http://localhost";class Ii extends Ug{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Ii(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):aa("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:i}=r,l=Lg(r,["providerId","signInMethod"]);if(!a||!i)return null;const o=new Ii(a,i);return o.idToken=l.idToken||void 0,o.accessToken=l.accessToken||void 0,o.secret=l.secret,o.nonce=l.nonce,o.pendingToken=l.pendingToken||null,o}_getIdTokenResponse(t){const r=this.buildRequest();return wo(t,r)}_linkToIdToken(t,r){const a=this.buildRequest();return a.idToken=r,wo(t,a)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,wo(t,r)}buildRequest(){const t={requestUri:zM,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=Qc(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FM(s){const t=Pl(Sl(s)).link,r=t?Pl(Sl(t)).deep_link_id:null,a=Pl(Sl(s)).deep_link_id;return(a?Pl(Sl(a)).link:null)||a||r||t||s}class $g{constructor(t){var r,a,i,l,o,c;const d=Pl(Sl(t)),h=(r=d.apiKey)!==null&&r!==void 0?r:null,g=(a=d.oobCode)!==null&&a!==void 0?a:null,N=BM((i=d.mode)!==null&&i!==void 0?i:null);yt(h&&g&&N,"argument-error"),this.apiKey=h,this.operation=N,this.code=g,this.continueUrl=(l=d.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(o=d.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(t){const r=FM(t);try{return new $g(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.providerId=Xo.PROVIDER_ID}static credential(t,r){return Ec._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const a=$g.parseLink(r);return yt(a,"argument-error"),Ec._fromEmailAndCode(t,a.code,a.tenantId)}}Xo.PROVIDER_ID="password";Xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od extends e3{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn extends od{constructor(){super("facebook.com")}static credential(t){return Ii._fromParams({providerId:cn.PROVIDER_ID,signInMethod:cn.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return cn.credentialFromTaggedObject(t)}static credentialFromError(t){return cn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return cn.credential(t.oauthAccessToken)}catch{return null}}}cn.FACEBOOK_SIGN_IN_METHOD="facebook.com";cn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn extends od{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Ii._fromParams({providerId:dn.PROVIDER_ID,signInMethod:dn.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return dn.credentialFromTaggedObject(t)}static credentialFromError(t){return dn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:a}=t;if(!r&&!a)return null;try{return dn.credential(r,a)}catch{return null}}}dn.GOOGLE_SIGN_IN_METHOD="google.com";dn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un extends od{constructor(){super("github.com")}static credential(t){return Ii._fromParams({providerId:un.PROVIDER_ID,signInMethod:un.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return un.credentialFromTaggedObject(t)}static credentialFromError(t){return un.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return un.credential(t.oauthAccessToken)}catch{return null}}}un.GITHUB_SIGN_IN_METHOD="github.com";un.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn extends od{constructor(){super("twitter.com")}static credential(t,r){return Ii._fromParams({providerId:xn.PROVIDER_ID,signInMethod:xn.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return xn.credentialFromTaggedObject(t)}static credentialFromError(t){return xn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:a}=t;if(!r||!a)return null;try{return xn.credential(r,a)}catch{return null}}}xn.TWITTER_SIGN_IN_METHOD="twitter.com";xn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UM(s,t){return id(s,"POST","/v1/accounts:signUp",Ja(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,a,i=!1){const l=await Xr._fromIdTokenResponse(t,a,i),o=oN(a);return new Pi({user:l,providerId:o,_tokenResponse:a,operationType:r})}static async _forOperation(t,r,a){await t._updateTokensIfNecessary(a,!0);const i=oN(a);return new Pi({user:t,providerId:i,_tokenResponse:a,operationType:r})}}function oN(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex extends Fr{constructor(t,r,a,i){var l;super(r.code,r.message),this.operationType=a,this.user=i,Object.setPrototypeOf(this,Ex.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:r.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,r,a,i){return new Ex(t,r,a,i)}}function t3(s,t,r,a){return(t==="reauthenticate"?r._getReauthenticationResolver(s):r._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ex._fromErrorAndOperation(s,l,t,a):l})}async function $M(s,t,r=!1){const a=await Lo(s,t._linkToIdToken(s.auth,await s.getIdToken()),r);return Pi._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WM(s,t,r=!1){const{auth:a}=s;if(jr(a.app))return Promise.reject(La(a));const i="reauthenticate";try{const l=await Lo(s,t3(a,i,t,s),r);yt(l.idToken,a,"internal-error");const o=Bg(l.idToken);yt(o,a,"internal-error");const{sub:c}=o;return yt(s.uid===c,a,"user-mismatch"),Pi._forOperation(s,i,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&aa(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s3(s,t,r=!1){if(jr(s.app))return Promise.reject(La(s));const a="signIn",i=await t3(s,a,t),l=await Pi._fromIdTokenResponse(s,a,i);return r||await s._updateCurrentUser(l.user),l}async function qM(s,t){return s3(Ri(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r3(s){const t=Ri(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function a3(s,t,r){if(jr(s.app))return Promise.reject(La(s));const a=Ri(s),o=await g0(a,{returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UM,"EMAIL_PASSWORD_PROVIDER").catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&r3(s),d}),c=await Pi._fromIdTokenResponse(a,"signIn",o);return await a._updateCurrentUser(c.user),c}function HM(s,t,r){return jr(s.app)?Promise.reject(La(s)):qM(Jt(s),Xo.credential(t,r)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&r3(s),a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GM(s,t){return ka(s,"POST","/v1/accounts:createAuthUri",Ja(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QM(s,t){const r=Ok()?Px():"http://localhost",a={identifier:t,continueUri:r},{signinMethods:i}=await GM(Jt(s),a);return i||[]}function Wg(s,t){return KM(Jt(s),null,t)}async function KM(s,t,r){const{auth:a}=s,l={idToken:await s.getIdToken(),returnSecureToken:!0};t&&(l.email=t),r&&(l.password=r);const o=await Lo(s,RM(a,l));await s._updateTokensIfNecessary(o,!0)}function YM(s,t,r,a){return Jt(s).onIdTokenChanged(t,r,a)}function XM(s,t,r){return Jt(s).beforeAuthStateChanged(t,r)}function Dt(s,t,r,a){return Jt(s).onAuthStateChanged(t,r,a)}function Tc(s){return Jt(s).signOut()}const Tx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Tx,"1"),this.storage.removeItem(Tx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=1e3,ZM=10;class i3 extends n3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Kk(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const a=this.storage.getItem(r),i=this.localCache[r];a!==i&&t(r,i,a)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const a=t.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(a);!r&&this.localCache[a]===o||this.notifyListeners(a,o)},l=this.storage.getItem(a);pM()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,ZM):i()}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const i of Array.from(a))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:a}),!0)})},JM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}i3.type="LOCAL";const e7=i3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3 extends n3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}o3.type="SESSION";const l3=o3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t7(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(i=>i.isListeningto(t));if(r)return r;const a=new Cm(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:a,eventType:i,data:l}=r.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:a,eventType:i});const c=Array.from(o).map(async h=>h(r.origin,l)),d=await t7(c);r.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(s="",t=10){let r="";for(let a=0;a<t;a++)r+=Math.floor(Math.random()*10);return s+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,a=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let l,o;return new Promise((c,d)=>{const h=qg("",20);i.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},a);o={messageChannel:i,onMessage(N){const k=N;if(k.data.eventId===h)switch(k.data.status){case"ack":clearTimeout(g),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),c(k.data.response);break;default:clearTimeout(g),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:h,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(){return window}function r7(s){pa().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(){return typeof pa().WorkerGlobalScope<"u"&&typeof pa().importScripts=="function"}async function a7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function n7(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function i7(){return c3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3="firebaseLocalStorageDb",o7=1,_x="firebaseLocalStorage",u3="fbase_key";class ld{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Em(s,t){return s.transaction([_x],t?"readwrite":"readonly").objectStore(_x)}function l7(){const s=indexedDB.deleteDatabase(d3);return new ld(s).toPromise()}function y0(){const s=indexedDB.open(d3,o7);return new Promise((t,r)=>{s.addEventListener("error",()=>{r(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(_x,{keyPath:u3})}catch(i){r(i)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(_x)?t(a):(a.close(),await l7(),t(await y0()))})})}async function lN(s,t,r){const a=Em(s,!0).put({[u3]:t,value:r});return new ld(a).toPromise()}async function c7(s,t){const r=Em(s,!1).get(t),a=await new ld(r).toPromise();return a===void 0?null:a.value}function cN(s,t){const r=Em(s,!0).delete(t);return new ld(r).toPromise()}const d7=800,u7=3;class x3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await y0(),this.db)}async _withRetries(t){let r=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(r++>u7)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return c3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cm._getInstance(i7()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await a7(),!this.activeServiceWorker)return;this.sender=new s7(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((t=a[0])===null||t===void 0)&&t.fulfilled&&!((r=a[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||n7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await y0();return await lN(t,Tx,"1"),await cN(t,Tx),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(a=>lN(a,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(a=>c7(a,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>cN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const l=Em(i,!1).getAll();return new ld(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],a=new Set;if(t.length!==0)for(const{fbase_key:i,value:l}of t)a.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(l)&&(this.notifyListeners(i,l),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!a.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const i of Array.from(a))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}x3.type="LOCAL";const x7=x3;new nd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m7(s,t){return t?Ra(t):(yt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg extends Ug{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return wo(t,this._buildIdpRequest())}_linkToIdToken(t,r){return wo(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return wo(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function h7(s){return s3(s.auth,new Hg(s),s.bypassAuthState)}function p7(s){const{auth:t,user:r}=s;return yt(r,t,"internal-error"),WM(r,new Hg(s),s.bypassAuthState)}async function f7(s){const{auth:t,user:r}=s;return yt(r,t,"internal-error"),$M(r,new Hg(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(t,r,a,i,l=!1){this.auth=t,this.resolver=a,this.user=i,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:a,postBody:i,tenantId:l,error:o,type:c}=t;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:r,sessionId:a,tenantId:l||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return h7;case"linkViaPopup":case"linkViaRedirect":return f7;case"reauthViaPopup":case"reauthViaRedirect":return p7;default:aa(this.auth,"internal-error")}}resolve(t){Ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7=new nd(2e3,1e4);class oo extends m3{constructor(t,r,a,i,l){super(t,r,i,l),this.provider=a,this.authWindow=null,this.pollId=null,oo.currentPopupAction&&oo.currentPopupAction.cancel(),oo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return yt(t,this.auth,"internal-error"),t}async onExecution(){Ha(this.filter.length===1,"Popup operations only handle one event");const t=qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ha(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ha(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,a;if(!((a=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ha(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,g7.get())};t()}}oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7="pendingRedirect",Pu=new Map;class b7 extends m3{constructor(t,r,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a),this.eventId=null}async execute(){let t=Pu.get(this.auth._key());if(!t){try{const a=await v7(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(r){t=()=>Promise.reject(r)}Pu.set(this.auth._key(),t)}return this.bypassAuthState||Pu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function v7(s,t){const r=w7(t),a=N7(s);if(!await a._isAvailable())return!1;const i=await a._get(r)==="true";return await a._remove(r),i}function j7(s,t){Pu.set(s._key(),t)}function N7(s){return Ra(s._redirectPersistence)}function w7(s){return Iu(y7,s.config.apiKey,s.name)}async function k7(s,t,r=!1){if(jr(s.app))return Promise.reject(La(s));const a=Ri(s),i=m7(a,t),o=await new b7(a,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await a._persistUserIfCurrent(o.user),await a._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7=10*60*1e3;class P7{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(r=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!S7(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var a;if(t.error&&!h3(t)){const i=((a=t.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";r.onError(ha(this.auth,i))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const a=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=I7&&this.cachedEventUids.clear(),this.cachedEventUids.has(dN(t))}saveEventToCache(t){this.cachedEventUids.add(dN(t)),this.lastProcessedEventTime=Date.now()}}function dN(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function h3({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function S7(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return h3(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C7(s,t={}){return ka(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T7=/^https?/;async function _7(s){if(s.config.emulator)return;const{authorizedDomains:t}=await C7(s);for(const r of t)try{if(D7(r))return}catch{}aa(s,"unauthorized-domain")}function D7(s){const t=Px(),{protocol:r,hostname:a}=new URL(t);if(s.startsWith("chrome-extension://")){const o=new URL(s);return o.hostname===""&&a===""?r==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===a}if(!T7.test(r))return!1;if(E7.test(s))return a===s;const i=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=new nd(3e4,6e4);function uN(){const s=pa().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let r=0;r<s.CP.length;r++)s.CP[r]=null}}function R7(s){return new Promise((t,r)=>{var a,i,l;function o(){uN(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{uN(),r(ha(s,"network-request-failed"))},timeout:A7.get()})}if(!((i=(a=pa().gapi)===null||a===void 0?void 0:a.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((l=pa().gapi)===null||l===void 0)&&l.load)o();else{const c=kM("iframefcb");return pa()[c]=()=>{gapi.load?o():r(ha(s,"network-request-failed"))},Xk(`${wM()}?onload=${c}`).catch(d=>r(d))}}).catch(t=>{throw Su=null,t})}let Su=null;function M7(s){return Su=Su||R7(s),Su}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O7=new nd(5e3,15e3),L7="__/auth/iframe",V7="emulator/auth/iframe",z7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function F7(s){const t=s.config;yt(t.authDomain,s,"auth-domain-config-required");const r=t.emulator?zg(t,V7):`https://${s.config.authDomain}/${L7}`,a={apiKey:t.apiKey,appName:s.name,v:_i},i=B7.get(s.config.apiHost);i&&(a.eid=i);const l=s._getFrameworks();return l.length&&(a.fw=l.join(",")),`${r}?${Qc(a).slice(1)}`}async function U7(s){const t=await M7(s),r=pa().gapi;return yt(r,s,"internal-error"),t.open({where:document.body,url:F7(s),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z7,dontclear:!0},a=>new Promise(async(i,l)=>{await a.restyle({setHideOnLeave:!1});const o=ha(s,"network-request-failed"),c=pa().setTimeout(()=>{l(o)},O7.get());function d(){pa().clearTimeout(c),i(a)}a.ping(d).then(d,()=>{l(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},W7=500,q7=600,H7="_blank",G7="http://localhost";class xN{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Q7(s,t,r,a=W7,i=q7){const l=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-a)/2,0).toString();let c="";const d=Object.assign(Object.assign({},$7),{width:a.toString(),height:i.toString(),top:l,left:o}),h=tr().toLowerCase();r&&(c=Wk(h)?H7:r),Uk(h)&&(t=t||G7,d.scrollbars="yes");const g=Object.entries(d).reduce((k,[E,y])=>`${k}${E}=${y},`,"");if(hM(h)&&c!=="_self")return K7(t||"",c),new xN(null);const N=window.open(t||"",c,g);yt(N,s,"popup-blocked");try{N.focus()}catch{}return new xN(N)}function K7(s,t){const r=document.createElement("a");r.href=s,r.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7="__/auth/handler",X7="emulator/auth/handler",J7=encodeURIComponent("fac");async function mN(s,t,r,a,i,l){yt(s.config.authDomain,s,"auth-domain-config-required"),yt(s.config.apiKey,s,"invalid-api-key");const o={apiKey:s.config.apiKey,appName:s.name,authType:r,redirectUrl:a,v:_i,eventId:i};if(t instanceof e3){t.setDefaultLanguage(s.languageCode),o.providerId=t.providerId||"",n_(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[g,N]of Object.entries(l||{}))o[g]=N}if(t instanceof od){const g=t.getScopes().filter(N=>N!=="");g.length>0&&(o.scopes=g.join(","))}s.tenantId&&(o.tid=s.tenantId);const c=o;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const d=await s._getAppCheckToken(),h=d?`#${J7}=${encodeURIComponent(d)}`:"";return`${Z7(s)}?${Qc(c).slice(1)}${h}`}function Z7({config:s}){return s.emulator?zg(s,X7):`https://${s.authDomain}/${Y7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh="webStorageSupport";class e9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=l3,this._completeRedirectFn=k7,this._overrideRedirectResult=j7}async _openPopup(t,r,a,i){var l;Ha((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await mN(t,r,a,Px(),i);return Q7(t,o,qg())}async _openRedirect(t,r,a,i){await this._originValidation(t);const l=await mN(t,r,a,Px(),i);return r7(l),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:i,promise:l}=this.eventManagers[r];return i?Promise.resolve(i):(Ha(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(t);return this.eventManagers[r]={promise:a},a.catch(()=>{delete this.eventManagers[r]}),a}async initAndGetManager(t){const r=await U7(t),a=new P7(t);return r.register("authEvent",i=>(yt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:a.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=r,a}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(Dh,{type:Dh},i=>{var l;const o=(l=i==null?void 0:i[0])===null||l===void 0?void 0:l[Dh];o!==void 0&&r(!!o),aa(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=_7(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return Kk()||$k()||Fg()}}const t9=e9;var hN="@firebase/auth",pN="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(a=>{t((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r9(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a9(s){sa(new Br("auth",(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=a.options;yt(o&&!o.includes(":"),"invalid-api-key",{appName:a.name});const d={apiKey:o,authDomain:c,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yk(s)},h=new vM(a,i,l,d);return TM(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,a)=>{t.getProvider("auth-internal").initialize()})),sa(new Br("auth-internal",t=>{const r=Ri(t.getProvider("auth").getImmediate());return(a=>new s9(a))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),fr(hN,pN,r9(s)),fr(hN,pN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=5*60,i9=v4("authIdTokenMaxAge")||n9;let fN=null;const o9=s=>async t=>{const r=t&&await t.getIdTokenResult(),a=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(a&&a>i9)return;const i=r==null?void 0:r.token;fN!==i&&(fN=i,await fetch(s,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Gg(s=nm()){const t=Wn(s,"auth");if(t.isInitialized())return t.getImmediate();const r=EM(s,{popupRedirectResolver:t9,persistence:[x7,e7,l3]}),a=v4("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const o=o9(l.toString());XM(r,o,()=>o(r.currentUser)),YM(r,c=>o(c))}}const i=g4("auth");return i&&_M(r,`http://${i}`),r}function l9(){var s,t;return(t=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&t!==void 0?t:document}jM({loadJS(s){return new Promise((t,r)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=t,a.onerror=i=>{const l=ha("internal-error");l.customData=i,r(l)},a.type="text/javascript",a.charset="UTF-8",l9().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a9("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3="firebasestorage.googleapis.com",c9="storageBucket",d9=2*60*1e3,u9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia extends Fr{constructor(t,r,a=0){super(Ah(t),`Firebase Storage: ${r} (${Ah(t)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ia.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Ah(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Na;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Na||(Na={}));function Ah(s){return"storage/"+s}function x9(){const s="An unknown error occurred, please check the error payload for server response.";return new Ia(Na.UNKNOWN,s)}function m9(){return new Ia(Na.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function h9(){return new Ia(Na.CANCELED,"User canceled the upload/download.")}function p9(s){return new Ia(Na.INVALID_URL,"Invalid URL '"+s+"'.")}function f9(s){return new Ia(Na.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function gN(s){return new Ia(Na.INVALID_ARGUMENT,s)}function f3(){return new Ia(Na.APP_DELETED,"The Firebase app was deleted.")}function g9(s){return new Ia(Na.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let a;try{a=Jr.makeFromUrl(t,r)}catch{return new Jr(t,"")}if(a.path==="")return a;throw f9(t)}static makeFromUrl(t,r){let a=null;const i="([A-Za-z0-9.\\-_]+)";function l(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),d={bucket:1,path:3};function h(K){K.path_=decodeURIComponent(K.path)}const g="v[A-Za-z0-9_]+",N=r.replace(/[.]/g,"\\."),k="(/([^?#]*).*)?$",E=new RegExp(`^https?://${N}/${g}/b/${i}/o${k}`,"i"),y={bucket:1,path:3},L=r===p3?"(?:storage.googleapis.com|storage.cloud.google.com)":r,_="([^?#]*)",A=new RegExp(`^https?://${L}/${i}/${_}`,"i"),O=[{regex:c,indices:d,postModify:l},{regex:E,indices:y,postModify:h},{regex:A,indices:{bucket:1,path:2},postModify:h}];for(let K=0;K<O.length;K++){const G=O[K],H=G.regex.exec(t);if(H){const R=H[G.indices.bucket];let u=H[G.indices.path];u||(u=""),a=new Jr(R,u),G.postModify(a);break}}if(a==null)throw p9(t);return a}}class y9{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9(s,t,r){let a=1,i=null,l=null,o=!1,c=0;function d(){return c===2}let h=!1;function g(..._){h||(h=!0,t.apply(null,_))}function N(_){i=setTimeout(()=>{i=null,s(E,d())},_)}function k(){l&&clearTimeout(l)}function E(_,...A){if(h){k();return}if(_){k(),g.call(null,_,...A);return}if(d()||o){k(),g.call(null,_,...A);return}a<64&&(a*=2);let O;c===1?(c=2,O=0):O=(a+Math.random())*1e3,N(O)}let y=!1;function L(_){y||(y=!0,k(),!h&&(i!==null?(_||(c=2),clearTimeout(i),N(0)):_||(c=1)))}return N(0),l=setTimeout(()=>{o=!0,L(!0)},r),L}function v9(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j9(s){return s!==void 0}function yN(s,t,r,a){if(a<t)throw gN(`Invalid value for '${s}'. Expected ${t} or greater.`);if(a>r)throw gN(`Invalid value for '${s}'. Expected ${r} or less.`)}function N9(s){const t=encodeURIComponent;let r="?";for(const a in s)if(s.hasOwnProperty(a)){const i=t(a)+"="+t(s[a]);r=r+i+"&"}return r=r.slice(0,-1),r}var Dx;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Dx||(Dx={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(s,t){const r=s>=500&&s<600,i=[408,429].indexOf(s)!==-1,l=t.indexOf(s)!==-1;return r||i||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(t,r,a,i,l,o,c,d,h,g,N,k=!0){this.url_=t,this.method_=r,this.headers_=a,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=g,this.connectionFactory_=N,this.retry=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,y)=>{this.resolve_=E,this.reject_=y,this.start_()})}start_(){const t=(a,i)=>{if(i){a(!1,new Xd(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const o=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&l.addUploadProgressListener(o),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(o),this.pendingConnection_=null;const c=l.getErrorCode()===Dx.NO_ERROR,d=l.getStatus();if(!c||w9(d,this.additionalRetryCodes_)&&this.retry){const g=l.getErrorCode()===Dx.ABORT;a(!1,new Xd(!1,null,g));return}const h=this.successCodes_.indexOf(d)!==-1;a(!0,new Xd(h,l))})},r=(a,i)=>{const l=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());j9(d)?l(d):l()}catch(d){o(d)}else if(c!==null){const d=x9();d.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,d)):o(d)}else if(i.canceled){const d=this.appDelete_?f3():h9();o(d)}else{const d=m9();o(d)}};this.canceled_?r(!1,new Xd(!1,null,!0)):this.backoffId_=b9(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&v9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xd{constructor(t,r,a){this.wasSuccessCode=t,this.connection=r,this.canceled=!!a}}function I9(s,t){t!==null&&t.length>0&&(s.Authorization="Firebase "+t)}function P9(s,t){s["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function S9(s,t){t&&(s["X-Firebase-GMPID"]=t)}function C9(s,t){t!==null&&(s["X-Firebase-AppCheck"]=t)}function E9(s,t,r,a,i,l,o=!0){const c=N9(s.urlParams),d=s.url+c,h=Object.assign({},s.headers);return S9(h,t),I9(h,r),P9(h,l),C9(h,a),new k9(d,s.method,h,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T9(s){if(s.length===0)return null;const t=s.lastIndexOf("/");return t===-1?"":s.slice(0,t)}function _9(s){const t=s.lastIndexOf("/",s.length-2);return t===-1?s:s.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(t,r){this._service=t,r instanceof Jr?this._location=r:this._location=Jr.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new Ax(t,r)}get root(){const t=new Jr(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _9(this._location.path)}get storage(){return this._service}get parent(){const t=T9(this._location.path);if(t===null)return null;const r=new Jr(this._location.bucket,t);return new Ax(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw g9(t)}}function bN(s,t){const r=t==null?void 0:t[c9];return r==null?null:Jr.makeFromBucketSpec(r,s)}function D9(s,t,r,a={}){s.host=`${t}:${r}`,s._protocol="http";const{mockUserToken:i}=a;i&&(s._overrideAuthToken=typeof i=="string"?i:j4(i,s.app.options.projectId))}class A9{constructor(t,r,a,i,l){this.app=t,this._authProvider=r,this._appCheckProvider=a,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=p3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=d9,this._maxUploadRetryTime=u9,this._requests=new Set,i!=null?this._bucket=Jr.makeFromBucketSpec(i,this._host):this._bucket=bN(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Jr.makeFromBucketSpec(this._url,t):this._bucket=bN(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){yN("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){yN("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Ax(this,t)}_makeRequest(t,r,a,i,l=!0){if(this._deleted)return new y9(f3());{const o=E9(t,this._appId,a,i,r,this._firebaseVersion,l);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,r){const[a,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,a,i).getPromise()}}const vN="@firebase/storage",jN="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3="storage";function R9(s=nm(),t){s=Jt(s);const a=Wn(s,g3).getImmediate({identifier:t}),i=y4("storage");return i&&M9(a,...i),a}function M9(s,t,r,a={}){D9(s,t,r,a)}function O9(s,{instanceIdentifier:t}){const r=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),i=s.getProvider("app-check-internal");return new A9(r,a,i,t,_i)}function L9(){sa(new Br(g3,O9,"PUBLIC").setMultipleInstances(!0)),fr(vN,jN,""),fr(vN,jN,"esm2017")}L9();const V9={apiKey:"AIzaSyDYacL_WIzZUSP-Tjl3794P_jHocMDqN9g",authDomain:"blackkstreaming-55f0e.firebaseapp.com",projectId:"blackkstreaming-55f0e",storageBucket:"blackkstreaming-55f0e.firebasestorage.app",messagingSenderId:"998157647233",appId:"1:998157647233:web:3e5b8128a0275ae4553c80",measurementId:"G-GFM50WNMSP"},cd=C4(V9);qR(cd);const I=h6(cd);R9(cd);const Ke=Gg(cd),Qg=v.createContext({});function Kg(s){const t=v.useRef(null);return t.current===null&&(t.current=s()),t.current}const Yg=typeof window<"u",y3=Yg?v.useLayoutEffect:v.useEffect,Tm=v.createContext(null);function Xg(s,t){s.indexOf(t)===-1&&s.push(t)}function Jg(s,t){const r=s.indexOf(t);r>-1&&s.splice(r,1)}const Ga=(s,t,r)=>r>t?t:r<s?s:r;let Zg=()=>{};const Qa={},b3=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function v3(s){return typeof s=="object"&&s!==null}const j3=s=>/^0[^.\s]+$/u.test(s);function ey(s){let t;return()=>(t===void 0&&(t=s()),t)}const Lr=s=>s,z9=(s,t)=>r=>t(s(r)),dd=(...s)=>s.reduce(z9),_c=(s,t,r)=>{const a=t-s;return a===0?1:(r-s)/a};class ty{constructor(){this.subscriptions=[]}add(t){return Xg(this.subscriptions,t),()=>Jg(this.subscriptions,t)}notify(t,r,a){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,r,a);else for(let l=0;l<i;l++){const o=this.subscriptions[l];o&&o(t,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fa=s=>s*1e3,ga=s=>s/1e3;function N3(s,t){return t?s*(1e3/t):0}const w3=(s,t,r)=>(((1-3*r+3*t)*s+(3*r-6*t))*s+3*t)*s,B9=1e-7,F9=12;function U9(s,t,r,a,i){let l,o,c=0;do o=t+(r-t)/2,l=w3(o,a,i)-s,l>0?r=o:t=o;while(Math.abs(l)>B9&&++c<F9);return o}function ud(s,t,r,a){if(s===t&&r===a)return Lr;const i=l=>U9(l,0,1,s,r);return l=>l===0||l===1?l:w3(i(l),t,a)}const k3=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,I3=s=>t=>1-s(1-t),P3=ud(.33,1.53,.69,.99),sy=I3(P3),S3=k3(sy),C3=s=>(s*=2)<1?.5*sy(s):.5*(2-Math.pow(2,-10*(s-1))),ry=s=>1-Math.sin(Math.acos(s)),E3=I3(ry),T3=k3(ry),$9=ud(.42,0,1,1),W9=ud(0,0,.58,1),_3=ud(.42,0,.58,1),q9=s=>Array.isArray(s)&&typeof s[0]!="number",D3=s=>Array.isArray(s)&&typeof s[0]=="number",H9={linear:Lr,easeIn:$9,easeInOut:_3,easeOut:W9,circIn:ry,circInOut:T3,circOut:E3,backIn:sy,backInOut:S3,backOut:P3,anticipate:C3},G9=s=>typeof s=="string",NN=s=>{if(D3(s)){Zg(s.length===4);const[t,r,a,i]=s;return ud(t,r,a,i)}else if(G9(s))return H9[s];return s},Jd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],wN={value:null,addProjectionMetrics:null};function Q9(s,t){let r=new Set,a=new Set,i=!1,l=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},d=0;function h(N){o.has(N)&&(g.schedule(N),s()),d++,N(c)}const g={schedule:(N,k=!1,E=!1)=>{const L=E&&i?r:a;return k&&o.add(N),L.has(N)||L.add(N),N},cancel:N=>{a.delete(N),o.delete(N)},process:N=>{if(c=N,i){l=!0;return}i=!0,[r,a]=[a,r],r.forEach(h),t&&wN.value&&wN.value.frameloop[t].push(d),d=0,r.clear(),i=!1,l&&(l=!1,g.process(N))}};return g}const K9=40;function A3(s,t){let r=!1,a=!0;const i={delta:0,timestamp:0,isProcessing:!1},l=()=>r=!0,o=Jd.reduce((O,K)=>(O[K]=Q9(l,t?K:void 0),O),{}),{setup:c,read:d,resolveKeyframes:h,preUpdate:g,update:N,preRender:k,render:E,postRender:y}=o,L=()=>{const O=Qa.useManualTiming?i.timestamp:performance.now();r=!1,Qa.useManualTiming||(i.delta=a?1e3/60:Math.max(Math.min(O-i.timestamp,K9),1)),i.timestamp=O,i.isProcessing=!0,c.process(i),d.process(i),h.process(i),g.process(i),N.process(i),k.process(i),E.process(i),y.process(i),i.isProcessing=!1,r&&t&&(a=!1,s(L))},_=()=>{r=!0,a=!0,i.isProcessing||s(L)};return{schedule:Jd.reduce((O,K)=>{const G=o[K];return O[K]=(H,R=!1,u=!1)=>(r||_(),G.schedule(H,R,u)),O},{}),cancel:O=>{for(let K=0;K<Jd.length;K++)o[Jd[K]].cancel(O)},state:i,steps:o}}const{schedule:ls,cancel:zn,state:Rs,steps:Rh}=A3(typeof requestAnimationFrame<"u"?requestAnimationFrame:Lr,!0);let Cu;function Y9(){Cu=void 0}const xr={now:()=>(Cu===void 0&&xr.set(Rs.isProcessing||Qa.useManualTiming?Rs.timestamp:performance.now()),Cu),set:s=>{Cu=s,queueMicrotask(Y9)}},R3=s=>t=>typeof t=="string"&&t.startsWith(s),ay=R3("--"),X9=R3("var(--"),ny=s=>X9(s)?J9.test(s.split("/*")[0].trim()):!1,J9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Jo={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Dc={...Jo,transform:s=>Ga(0,1,s)},Zd={...Jo,default:1},Kl=s=>Math.round(s*1e5)/1e5,iy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Z9(s){return s==null}const eO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,oy=(s,t)=>r=>!!(typeof r=="string"&&eO.test(r)&&r.startsWith(s)||t&&!Z9(r)&&Object.prototype.hasOwnProperty.call(r,t)),M3=(s,t,r)=>a=>{if(typeof a!="string")return a;const[i,l,o,c]=a.match(iy);return{[s]:parseFloat(i),[t]:parseFloat(l),[r]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},tO=s=>Ga(0,255,s),Mh={...Jo,transform:s=>Math.round(tO(s))},ci={test:oy("rgb","red"),parse:M3("red","green","blue"),transform:({red:s,green:t,blue:r,alpha:a=1})=>"rgba("+Mh.transform(s)+", "+Mh.transform(t)+", "+Mh.transform(r)+", "+Kl(Dc.transform(a))+")"};function sO(s){let t="",r="",a="",i="";return s.length>5?(t=s.substring(1,3),r=s.substring(3,5),a=s.substring(5,7),i=s.substring(7,9)):(t=s.substring(1,2),r=s.substring(2,3),a=s.substring(3,4),i=s.substring(4,5),t+=t,r+=r,a+=a,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:i?parseInt(i,16)/255:1}}const b0={test:oy("#"),parse:sO,transform:ci.transform},xd=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),rn=xd("deg"),ya=xd("%"),vt=xd("px"),rO=xd("vh"),aO=xd("vw"),kN=(()=>({...ya,parse:s=>ya.parse(s)/100,transform:s=>ya.transform(s*100)}))(),lo={test:oy("hsl","hue"),parse:M3("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:r,alpha:a=1})=>"hsla("+Math.round(s)+", "+ya.transform(Kl(t))+", "+ya.transform(Kl(r))+", "+Kl(Dc.transform(a))+")"},Ys={test:s=>ci.test(s)||b0.test(s)||lo.test(s),parse:s=>ci.test(s)?ci.parse(s):lo.test(s)?lo.parse(s):b0.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?ci.transform(s):lo.transform(s)},nO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function iO(s){var t,r;return isNaN(s)&&typeof s=="string"&&(((t=s.match(iy))==null?void 0:t.length)||0)+(((r=s.match(nO))==null?void 0:r.length)||0)>0}const O3="number",L3="color",oO="var",lO="var(",IN="${}",cO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ac(s){const t=s.toString(),r=[],a={color:[],number:[],var:[]},i=[];let l=0;const c=t.replace(cO,d=>(Ys.test(d)?(a.color.push(l),i.push(L3),r.push(Ys.parse(d))):d.startsWith(lO)?(a.var.push(l),i.push(oO),r.push(d)):(a.number.push(l),i.push(O3),r.push(parseFloat(d))),++l,IN)).split(IN);return{values:r,split:c,indexes:a,types:i}}function V3(s){return Ac(s).values}function z3(s){const{split:t,types:r}=Ac(s),a=t.length;return i=>{let l="";for(let o=0;o<a;o++)if(l+=t[o],i[o]!==void 0){const c=r[o];c===O3?l+=Kl(i[o]):c===L3?l+=Ys.transform(i[o]):l+=i[o]}return l}}const dO=s=>typeof s=="number"?0:s;function uO(s){const t=V3(s);return z3(s)(t.map(dO))}const Bn={test:iO,parse:V3,createTransformer:z3,getAnimatableNone:uO};function Oh(s,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?s+(t-s)*6*r:r<1/2?t:r<2/3?s+(t-s)*(2/3-r)*6:s}function xO({hue:s,saturation:t,lightness:r,alpha:a}){s/=360,t/=100,r/=100;let i=0,l=0,o=0;if(!t)i=l=o=r;else{const c=r<.5?r*(1+t):r+t-r*t,d=2*r-c;i=Oh(d,c,s+1/3),l=Oh(d,c,s),o=Oh(d,c,s-1/3)}return{red:Math.round(i*255),green:Math.round(l*255),blue:Math.round(o*255),alpha:a}}function Rx(s,t){return r=>r>0?t:s}const ns=(s,t,r)=>s+(t-s)*r,Lh=(s,t,r)=>{const a=s*s,i=r*(t*t-a)+a;return i<0?0:Math.sqrt(i)},mO=[b0,ci,lo],hO=s=>mO.find(t=>t.test(s));function PN(s){const t=hO(s);if(!t)return!1;let r=t.parse(s);return t===lo&&(r=xO(r)),r}const SN=(s,t)=>{const r=PN(s),a=PN(t);if(!r||!a)return Rx(s,t);const i={...r};return l=>(i.red=Lh(r.red,a.red,l),i.green=Lh(r.green,a.green,l),i.blue=Lh(r.blue,a.blue,l),i.alpha=ns(r.alpha,a.alpha,l),ci.transform(i))},v0=new Set(["none","hidden"]);function pO(s,t){return v0.has(s)?r=>r<=0?s:t:r=>r>=1?t:s}function fO(s,t){return r=>ns(s,t,r)}function ly(s){return typeof s=="number"?fO:typeof s=="string"?ny(s)?Rx:Ys.test(s)?SN:bO:Array.isArray(s)?B3:typeof s=="object"?Ys.test(s)?SN:gO:Rx}function B3(s,t){const r=[...s],a=r.length,i=s.map((l,o)=>ly(l)(l,t[o]));return l=>{for(let o=0;o<a;o++)r[o]=i[o](l);return r}}function gO(s,t){const r={...s,...t},a={};for(const i in r)s[i]!==void 0&&t[i]!==void 0&&(a[i]=ly(s[i])(s[i],t[i]));return i=>{for(const l in a)r[l]=a[l](i);return r}}function yO(s,t){const r=[],a={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const l=t.types[i],o=s.indexes[l][a[l]],c=s.values[o]??0;r[i]=c,a[l]++}return r}const bO=(s,t)=>{const r=Bn.createTransformer(t),a=Ac(s),i=Ac(t);return a.indexes.var.length===i.indexes.var.length&&a.indexes.color.length===i.indexes.color.length&&a.indexes.number.length>=i.indexes.number.length?v0.has(s)&&!i.values.length||v0.has(t)&&!a.values.length?pO(s,t):dd(B3(yO(a,i),i.values),r):Rx(s,t)};function F3(s,t,r){return typeof s=="number"&&typeof t=="number"&&typeof r=="number"?ns(s,t,r):ly(s)(s,t)}const vO=s=>{const t=({timestamp:r})=>s(r);return{start:(r=!0)=>ls.update(t,r),stop:()=>zn(t),now:()=>Rs.isProcessing?Rs.timestamp:xr.now()}},U3=(s,t,r=10)=>{let a="";const i=Math.max(Math.round(t/r),2);for(let l=0;l<i;l++)a+=s(l/(i-1))+", ";return`linear(${a.substring(0,a.length-2)})`},Mx=2e4;function cy(s){let t=0;const r=50;let a=s.next(t);for(;!a.done&&t<Mx;)t+=r,a=s.next(t);return t>=Mx?1/0:t}function jO(s,t=100,r){const a=r({...s,keyframes:[0,t]}),i=Math.min(cy(a),Mx);return{type:"keyframes",ease:l=>a.next(i*l).value/t,duration:ga(i)}}const NO=5;function $3(s,t,r){const a=Math.max(t-NO,0);return N3(r-s(a),t-a)}const ms={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Vh=.001;function wO({duration:s=ms.duration,bounce:t=ms.bounce,velocity:r=ms.velocity,mass:a=ms.mass}){let i,l,o=1-t;o=Ga(ms.minDamping,ms.maxDamping,o),s=Ga(ms.minDuration,ms.maxDuration,ga(s)),o<1?(i=h=>{const g=h*o,N=g*s,k=g-r,E=j0(h,o),y=Math.exp(-N);return Vh-k/E*y},l=h=>{const N=h*o*s,k=N*r+r,E=Math.pow(o,2)*Math.pow(h,2)*s,y=Math.exp(-N),L=j0(Math.pow(h,2),o);return(-i(h)+Vh>0?-1:1)*((k-E)*y)/L}):(i=h=>{const g=Math.exp(-h*s),N=(h-r)*s+1;return-Vh+g*N},l=h=>{const g=Math.exp(-h*s),N=(r-h)*(s*s);return g*N});const c=5/s,d=IO(i,l,c);if(s=fa(s),isNaN(d))return{stiffness:ms.stiffness,damping:ms.damping,duration:s};{const h=Math.pow(d,2)*a;return{stiffness:h,damping:o*2*Math.sqrt(a*h),duration:s}}}const kO=12;function IO(s,t,r){let a=r;for(let i=1;i<kO;i++)a=a-s(a)/t(a);return a}function j0(s,t){return s*Math.sqrt(1-t*t)}const PO=["duration","bounce"],SO=["stiffness","damping","mass"];function CN(s,t){return t.some(r=>s[r]!==void 0)}function CO(s){let t={velocity:ms.velocity,stiffness:ms.stiffness,damping:ms.damping,mass:ms.mass,isResolvedFromDuration:!1,...s};if(!CN(s,SO)&&CN(s,PO))if(s.visualDuration){const r=s.visualDuration,a=2*Math.PI/(r*1.2),i=a*a,l=2*Ga(.05,1,1-(s.bounce||0))*Math.sqrt(i);t={...t,mass:ms.mass,stiffness:i,damping:l}}else{const r=wO(s);t={...t,...r,mass:ms.mass},t.isResolvedFromDuration=!0}return t}function Ox(s=ms.visualDuration,t=ms.bounce){const r=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:a,restDelta:i}=r;const l=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],c={done:!1,value:l},{stiffness:d,damping:h,mass:g,duration:N,velocity:k,isResolvedFromDuration:E}=CO({...r,velocity:-ga(r.velocity||0)}),y=k||0,L=h/(2*Math.sqrt(d*g)),_=o-l,A=ga(Math.sqrt(d/g)),z=Math.abs(_)<5;a||(a=z?ms.restSpeed.granular:ms.restSpeed.default),i||(i=z?ms.restDelta.granular:ms.restDelta.default);let O;if(L<1){const G=j0(A,L);O=H=>{const R=Math.exp(-L*A*H);return o-R*((y+L*A*_)/G*Math.sin(G*H)+_*Math.cos(G*H))}}else if(L===1)O=G=>o-Math.exp(-A*G)*(_+(y+A*_)*G);else{const G=A*Math.sqrt(L*L-1);O=H=>{const R=Math.exp(-L*A*H),u=Math.min(G*H,300);return o-R*((y+L*A*_)*Math.sinh(u)+G*_*Math.cosh(u))/G}}const K={calculatedDuration:E&&N||null,next:G=>{const H=O(G);if(E)c.done=G>=N;else{let R=G===0?y:0;L<1&&(R=G===0?fa(y):$3(O,G,H));const u=Math.abs(R)<=a,W=Math.abs(o-H)<=i;c.done=u&&W}return c.value=c.done?o:H,c},toString:()=>{const G=Math.min(cy(K),Mx),H=U3(R=>K.next(G*R).value,G,30);return G+"ms "+H},toTransition:()=>{}};return K}Ox.applyToOptions=s=>{const t=jO(s,100,Ox);return s.ease=t.ease,s.duration=fa(t.duration),s.type="keyframes",s};function N0({keyframes:s,velocity:t=0,power:r=.8,timeConstant:a=325,bounceDamping:i=10,bounceStiffness:l=500,modifyTarget:o,min:c,max:d,restDelta:h=.5,restSpeed:g}){const N=s[0],k={done:!1,value:N},E=u=>c!==void 0&&u<c||d!==void 0&&u>d,y=u=>c===void 0?d:d===void 0||Math.abs(c-u)<Math.abs(d-u)?c:d;let L=r*t;const _=N+L,A=o===void 0?_:o(_);A!==_&&(L=A-N);const z=u=>-L*Math.exp(-u/a),O=u=>A+z(u),K=u=>{const W=z(u),U=O(u);k.done=Math.abs(W)<=h,k.value=k.done?A:U};let G,H;const R=u=>{E(k.value)&&(G=u,H=Ox({keyframes:[k.value,y(k.value)],velocity:$3(O,u,k.value),damping:i,stiffness:l,restDelta:h,restSpeed:g}))};return R(0),{calculatedDuration:null,next:u=>{let W=!1;return!H&&G===void 0&&(W=!0,K(u),R(u)),G!==void 0&&u>=G?H.next(u-G):(!W&&K(u),k)}}}function EO(s,t,r){const a=[],i=r||Qa.mix||F3,l=s.length-1;for(let o=0;o<l;o++){let c=i(s[o],s[o+1]);if(t){const d=Array.isArray(t)?t[o]||Lr:t;c=dd(d,c)}a.push(c)}return a}function TO(s,t,{clamp:r=!0,ease:a,mixer:i}={}){const l=s.length;if(Zg(l===t.length),l===1)return()=>t[0];if(l===2&&t[0]===t[1])return()=>t[1];const o=s[0]===s[1];s[0]>s[l-1]&&(s=[...s].reverse(),t=[...t].reverse());const c=EO(t,a,i),d=c.length,h=g=>{if(o&&g<s[0])return t[0];let N=0;if(d>1)for(;N<s.length-2&&!(g<s[N+1]);N++);const k=_c(s[N],s[N+1],g);return c[N](k)};return r?g=>h(Ga(s[0],s[l-1],g)):h}function _O(s,t){const r=s[s.length-1];for(let a=1;a<=t;a++){const i=_c(0,t,a);s.push(ns(r,1,i))}}function DO(s){const t=[0];return _O(t,s.length-1),t}function AO(s,t){return s.map(r=>r*t)}function RO(s,t){return s.map(()=>t||_3).splice(0,s.length-1)}function Yl({duration:s=300,keyframes:t,times:r,ease:a="easeInOut"}){const i=q9(a)?a.map(NN):NN(a),l={done:!1,value:t[0]},o=AO(r&&r.length===t.length?r:DO(t),s),c=TO(o,t,{ease:Array.isArray(i)?i:RO(t,i)});return{calculatedDuration:s,next:d=>(l.value=c(d),l.done=d>=s,l)}}const MO=s=>s!==null;function dy(s,{repeat:t,repeatType:r="loop"},a,i=1){const l=s.filter(MO),c=i<0||t&&r!=="loop"&&t%2===1?0:l.length-1;return!c||a===void 0?l[c]:a}const OO={decay:N0,inertia:N0,tween:Yl,keyframes:Yl,spring:Ox};function W3(s){typeof s.type=="string"&&(s.type=OO[s.type])}class uy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const LO=s=>s/100;class xy extends uy{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(r=!0)=>{var a,i;if(r){const{motionValue:l}=this.options;l&&l.updatedAt!==xr.now()&&this.tick(xr.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(a=this.options).onStop)==null||i.call(a))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;W3(t);const{type:r=Yl,repeat:a=0,repeatDelay:i=0,repeatType:l,velocity:o=0}=t;let{keyframes:c}=t;const d=r||Yl;d!==Yl&&typeof c[0]!="number"&&(this.mixKeyframes=dd(LO,F3(c[0],c[1])),c=[0,100]);const h=d({...t,keyframes:c});l==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...c].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=cy(h));const{calculatedDuration:g}=h;this.calculatedDuration=g,this.resolvedDuration=g+i,this.totalDuration=this.resolvedDuration*(a+1)-i,this.generator=h}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:a,totalDuration:i,mixKeyframes:l,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return a.next(0);const{delay:h=0,keyframes:g,repeat:N,repeatType:k,repeatDelay:E,type:y,onUpdate:L,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const A=this.currentTime-h*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?A<0:A>i;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let O=this.currentTime,K=a;if(N){const u=Math.min(this.currentTime,i)/c;let W=Math.floor(u),U=u%1;!U&&u>=1&&(U=1),U===1&&W--,W=Math.min(W,N+1),!!(W%2)&&(k==="reverse"?(U=1-U,E&&(U-=E/c)):k==="mirror"&&(K=o)),O=Ga(0,1,U)*c}const G=z?{done:!1,value:g[0]}:K.next(O);l&&(G.value=l(G.value));let{done:H}=G;!z&&d!==null&&(H=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return R&&y!==N0&&(G.value=dy(g,this.options,_,this.speed)),L&&L(G.value),R&&this.finish(),G}then(t,r){return this.finished.then(t,r)}get duration(){return ga(this.calculatedDuration)}get time(){return ga(this.currentTime)}set time(t){var r;t=fa(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(xr.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=ga(this.currentTime))}play(){var i,l;if(this.isStopped)return;const{driver:t=vO,startTime:r}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(l=(i=this.options).onPlay)==null||l.call(i);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(xr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function VO(s){for(let t=1;t<s.length;t++)s[t]??(s[t]=s[t-1])}const di=s=>s*180/Math.PI,w0=s=>{const t=di(Math.atan2(s[1],s[0]));return k0(t)},zO={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:w0,rotateZ:w0,skewX:s=>di(Math.atan(s[1])),skewY:s=>di(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},k0=s=>(s=s%360,s<0&&(s+=360),s),EN=w0,TN=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),_N=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),BO={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:TN,scaleY:_N,scale:s=>(TN(s)+_N(s))/2,rotateX:s=>k0(di(Math.atan2(s[6],s[5]))),rotateY:s=>k0(di(Math.atan2(-s[2],s[0]))),rotateZ:EN,rotate:EN,skewX:s=>di(Math.atan(s[4])),skewY:s=>di(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function I0(s){return s.includes("scale")?1:0}function P0(s,t){if(!s||s==="none")return I0(t);const r=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,i;if(r)a=BO,i=r;else{const c=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=zO,i=c}if(!i)return I0(t);const l=a[t],o=i[1].split(",").map(UO);return typeof l=="function"?l(o):o[l]}const FO=(s,t)=>{const{transform:r="none"}=getComputedStyle(s);return P0(r,t)};function UO(s){return parseFloat(s.trim())}const Zo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],el=(()=>new Set(Zo))(),DN=s=>s===Jo||s===vt,$O=new Set(["x","y","z"]),WO=Zo.filter(s=>!$O.has(s));function qO(s){const t=[];return WO.forEach(r=>{const a=s.getValue(r);a!==void 0&&(t.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),t}const mi={width:({x:s},{paddingLeft:t="0",paddingRight:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),height:({y:s},{paddingTop:t="0",paddingBottom:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:(s,{transform:t})=>P0(t,"x"),y:(s,{transform:t})=>P0(t,"y")};mi.translateX=mi.x;mi.translateY=mi.y;const hi=new Set;let S0=!1,C0=!1,E0=!1;function q3(){if(C0){const s=Array.from(hi).filter(a=>a.needsMeasurement),t=new Set(s.map(a=>a.element)),r=new Map;t.forEach(a=>{const i=qO(a);i.length&&(r.set(a,i),a.render())}),s.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const i=r.get(a);i&&i.forEach(([l,o])=>{var c;(c=a.getValue(l))==null||c.set(o)})}),s.forEach(a=>a.measureEndState()),s.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}C0=!1,S0=!1,hi.forEach(s=>s.complete(E0)),hi.clear()}function H3(){hi.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(C0=!0)})}function HO(){E0=!0,H3(),q3(),E0=!1}class my{constructor(t,r,a,i,l,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=a,this.motionValue=i,this.element=l,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(hi.add(this),S0||(S0=!0,ls.read(H3),ls.resolveKeyframes(q3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:a,motionValue:i}=this;if(t[0]===null){const l=i==null?void 0:i.get(),o=t[t.length-1];if(l!==void 0)t[0]=l;else if(a&&r){const c=a.readValue(r,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),i&&l===void 0&&i.set(t[0])}VO(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),hi.delete(this)}cancel(){this.state==="scheduled"&&(hi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const GO=s=>s.startsWith("--");function QO(s,t,r){GO(t)?s.style.setProperty(t,r):s.style[t]=r}const KO=ey(()=>window.ScrollTimeline!==void 0),YO={};function XO(s,t){const r=ey(s);return()=>YO[t]??r()}const G3=XO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Dl=([s,t,r,a])=>`cubic-bezier(${s}, ${t}, ${r}, ${a})`,AN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Dl([0,.65,.55,1]),circOut:Dl([.55,0,1,.45]),backIn:Dl([.31,.01,.66,-.59]),backOut:Dl([.33,1.53,.69,.99])};function Q3(s,t){if(s)return typeof s=="function"?G3()?U3(s,t):"ease-out":D3(s)?Dl(s):Array.isArray(s)?s.map(r=>Q3(r,t)||AN.easeOut):AN[s]}function JO(s,t,r,{delay:a=0,duration:i=300,repeat:l=0,repeatType:o="loop",ease:c="easeOut",times:d}={},h=void 0){const g={[t]:r};d&&(g.offset=d);const N=Q3(c,i);Array.isArray(N)&&(g.easing=N);const k={delay:a,duration:i,easing:Array.isArray(N)?"linear":N,fill:"both",iterations:l+1,direction:o==="reverse"?"alternate":"normal"};return h&&(k.pseudoElement=h),s.animate(g,k)}function K3(s){return typeof s=="function"&&"applyToOptions"in s}function ZO({type:s,...t}){return K3(s)&&G3()?s.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class eL extends uy{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:a,keyframes:i,pseudoElement:l,allowFlatten:o=!1,finalKeyframe:c,onComplete:d}=t;this.isPseudoElement=!!l,this.allowFlatten=o,this.options=t,Zg(typeof t.type!="string");const h=ZO(t);this.animation=JO(r,a,i,h,l),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const g=dy(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(g):QO(r,a,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var r,a;const t=((a=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:a.call(r).duration)||0;return ga(Number(t))}get time(){return ga(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=fa(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&KO()?(this.animation.timeline=t,Lr):r(this)}}const Y3={anticipate:C3,backInOut:S3,circInOut:T3};function tL(s){return s in Y3}function sL(s){typeof s.ease=="string"&&tL(s.ease)&&(s.ease=Y3[s.ease])}const RN=10;class rL extends eL{constructor(t){sL(t),W3(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:a,onComplete:i,element:l,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const c=new xy({...o,autoplay:!1}),d=fa(this.finishedTime??this.time);r.setWithVelocity(c.sample(d-RN).value,c.sample(d).value,RN),c.stop()}}const MN=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Bn.test(s)||s==="0")&&!s.startsWith("url("));function aL(s){const t=s[0];if(s.length===1)return!0;for(let r=0;r<s.length;r++)if(s[r]!==t)return!0}function nL(s,t,r,a){const i=s[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const l=s[s.length-1],o=MN(i,t),c=MN(l,t);return!o||!c?!1:aL(s)||(r==="spring"||K3(r))&&a}function hy(s){return v3(s)&&"offsetHeight"in s}const iL=new Set(["opacity","clipPath","filter","transform"]),oL=ey(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function lL(s){var h;const{motionValue:t,name:r,repeatDelay:a,repeatType:i,damping:l,type:o}=s;if(!hy((h=t==null?void 0:t.owner)==null?void 0:h.current))return!1;const{onUpdate:c,transformTemplate:d}=t.owner.getProps();return oL()&&r&&iL.has(r)&&(r!=="transform"||!d)&&!c&&!a&&i!=="mirror"&&l!==0&&o!=="inertia"}const cL=40;class dL extends uy{constructor({autoplay:t=!0,delay:r=0,type:a="keyframes",repeat:i=0,repeatDelay:l=0,repeatType:o="loop",keyframes:c,name:d,motionValue:h,element:g,...N}){var y;super(),this.stop=()=>{var L,_;this._animation&&(this._animation.stop(),(L=this.stopTimeline)==null||L.call(this)),(_=this.keyframeResolver)==null||_.cancel()},this.createdAt=xr.now();const k={autoplay:t,delay:r,type:a,repeat:i,repeatDelay:l,repeatType:o,name:d,motionValue:h,element:g,...N},E=(g==null?void 0:g.KeyframeResolver)||my;this.keyframeResolver=new E(c,(L,_,A)=>this.onKeyframesResolved(L,_,k,!A),d,h,g),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(t,r,a,i){this.keyframeResolver=void 0;const{name:l,type:o,velocity:c,delay:d,isHandoff:h,onUpdate:g}=a;this.resolvedAt=xr.now(),nL(t,l,o,c)||((Qa.instantAnimations||!d)&&(g==null||g(dy(t,a,r))),t[0]=t[t.length-1],a.duration=0,a.repeat=0);const k={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>cL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...a,keyframes:t},E=!h&&lL(k)?new rL({...k,element:k.motionValue.owner.current}):new xy(k);E.finished.then(()=>this.notifyFinished()).catch(Lr),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),HO()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const uL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function xL(s){const t=uL.exec(s);if(!t)return[,];const[,r,a,i]=t;return[`--${r??a}`,i]}function X3(s,t,r=1){const[a,i]=xL(s);if(!a)return;const l=window.getComputedStyle(t).getPropertyValue(a);if(l){const o=l.trim();return b3(o)?parseFloat(o):o}return ny(i)?X3(i,t,r+1):i}function py(s,t){return(s==null?void 0:s[t])??(s==null?void 0:s.default)??s}const J3=new Set(["width","height","top","left","right","bottom",...Zo]),mL={test:s=>s==="auto",parse:s=>s},Z3=s=>t=>t.test(s),eI=[Jo,vt,ya,rn,aO,rO,mL],ON=s=>eI.find(Z3(s));function hL(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||j3(s):!0}const pL=new Set(["brightness","contrast","saturate","opacity"]);function fL(s){const[t,r]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[a]=r.match(iy)||[];if(!a)return s;const i=r.replace(a,"");let l=pL.has(t)?1:0;return a!==r&&(l*=100),t+"("+l+i+")"}const gL=/\b([a-z-]*)\(.*?\)/gu,T0={...Bn,getAnimatableNone:s=>{const t=s.match(gL);return t?t.map(fL).join(" "):s}},LN={...Jo,transform:Math.round},yL={rotate:rn,rotateX:rn,rotateY:rn,rotateZ:rn,scale:Zd,scaleX:Zd,scaleY:Zd,scaleZ:Zd,skew:rn,skewX:rn,skewY:rn,distance:vt,translateX:vt,translateY:vt,translateZ:vt,x:vt,y:vt,z:vt,perspective:vt,transformPerspective:vt,opacity:Dc,originX:kN,originY:kN,originZ:vt},fy={borderWidth:vt,borderTopWidth:vt,borderRightWidth:vt,borderBottomWidth:vt,borderLeftWidth:vt,borderRadius:vt,radius:vt,borderTopLeftRadius:vt,borderTopRightRadius:vt,borderBottomRightRadius:vt,borderBottomLeftRadius:vt,width:vt,maxWidth:vt,height:vt,maxHeight:vt,top:vt,right:vt,bottom:vt,left:vt,padding:vt,paddingTop:vt,paddingRight:vt,paddingBottom:vt,paddingLeft:vt,margin:vt,marginTop:vt,marginRight:vt,marginBottom:vt,marginLeft:vt,backgroundPositionX:vt,backgroundPositionY:vt,...yL,zIndex:LN,fillOpacity:Dc,strokeOpacity:Dc,numOctaves:LN},bL={...fy,color:Ys,backgroundColor:Ys,outlineColor:Ys,fill:Ys,stroke:Ys,borderColor:Ys,borderTopColor:Ys,borderRightColor:Ys,borderBottomColor:Ys,borderLeftColor:Ys,filter:T0,WebkitFilter:T0},tI=s=>bL[s];function sI(s,t){let r=tI(s);return r!==T0&&(r=Bn),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const vL=new Set(["auto","none","0"]);function jL(s,t,r){let a=0,i;for(;a<s.length&&!i;){const l=s[a];typeof l=="string"&&!vL.has(l)&&Ac(l).values.length&&(i=s[a]),a++}if(i&&r)for(const l of t)s[l]=sI(r,i)}class NL extends my{constructor(t,r,a,i,l){super(t,r,a,i,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:a}=this;if(!r||!r.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let h=t[d];if(typeof h=="string"&&(h=h.trim(),ny(h))){const g=X3(h,r.current);g!==void 0&&(t[d]=g),d===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!J3.has(a)||t.length!==2)return;const[i,l]=t,o=ON(i),c=ON(l);if(o!==c)if(DN(o)&&DN(c))for(let d=0;d<t.length;d++){const h=t[d];typeof h=="string"&&(t[d]=parseFloat(h))}else mi[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,a=[];for(let i=0;i<t.length;i++)(t[i]===null||hL(t[i]))&&a.push(i);a.length&&jL(t,a,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=mi[a](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&t.getValue(a,i).jump(i,!1)}measureEndState(){var c;const{element:t,name:r,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const i=t.getValue(r);i&&i.jump(this.measuredOrigin,!1);const l=a.length-1,o=a[l];a[l]=mi[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([d,h])=>{t.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function wL(s,t,r){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let a=document;t&&(a=t.current);const i=(r==null?void 0:r[s])??a.querySelectorAll(s);return i?Array.from(i):[]}return Array.from(s)}const VN=30,kL=s=>!isNaN(parseFloat(s));class IL{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(a,i=!0)=>{var o,c;const l=xr.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty();i&&((c=this.events.renderRequest)==null||c.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=xr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=kL(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new ty);const a=this.events[t].add(r);return t==="change"?()=>{a(),ls.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,a){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=xr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>VN)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,VN);return N3(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Vo(s,t){return new IL(s,t)}const rI=(s,t)=>t&&typeof s=="number"?t.transform(s):s,{schedule:gy,cancel:cU}=A3(queueMicrotask,!1),qr={x:!1,y:!1};function aI(){return qr.x||qr.y}function PL(s){return s==="x"||s==="y"?qr[s]?null:(qr[s]=!0,()=>{qr[s]=!1}):qr.x||qr.y?null:(qr.x=qr.y=!0,()=>{qr.x=qr.y=!1})}function nI(s,t){const r=wL(s),a=new AbortController,i={passive:!0,...t,signal:a.signal};return[r,i,()=>a.abort()]}function zN(s){return!(s.pointerType==="touch"||aI())}function SL(s,t,r={}){const[a,i,l]=nI(s,r),o=c=>{if(!zN(c))return;const{target:d}=c,h=t(d,c);if(typeof h!="function"||!d)return;const g=N=>{zN(N)&&(h(N),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,i)};return a.forEach(c=>{c.addEventListener("pointerenter",o,i)}),l}const iI=(s,t)=>t?s===t?!0:iI(s,t.parentElement):!1,yy=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,CL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function EL(s){return CL.has(s.tagName)||s.tabIndex!==-1}const Eu=new WeakSet;function BN(s){return t=>{t.key==="Enter"&&s(t)}}function zh(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const TL=(s,t)=>{const r=s.currentTarget;if(!r)return;const a=BN(()=>{if(Eu.has(r))return;zh(r,"down");const i=BN(()=>{zh(r,"up")}),l=()=>zh(r,"cancel");r.addEventListener("keyup",i,t),r.addEventListener("blur",l,t)});r.addEventListener("keydown",a,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",a),t)};function FN(s){return yy(s)&&!aI()}function _L(s,t,r={}){const[a,i,l]=nI(s,r),o=c=>{const d=c.currentTarget;if(!FN(c))return;Eu.add(d);const h=t(d,c),g=(E,y)=>{window.removeEventListener("pointerup",N),window.removeEventListener("pointercancel",k),Eu.has(d)&&Eu.delete(d),FN(E)&&typeof h=="function"&&h(E,{success:y})},N=E=>{g(E,d===window||d===document||r.useGlobalTarget||iI(d,E.target))},k=E=>{g(E,!1)};window.addEventListener("pointerup",N,i),window.addEventListener("pointercancel",k,i)};return a.forEach(c=>{(r.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),hy(c)&&(c.addEventListener("focus",h=>TL(h,i)),!EL(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),l}function oI(s){return v3(s)&&"ownerSVGElement"in s}function DL(s){return oI(s)&&s.tagName==="svg"}const Zs=s=>!!(s&&s.getVelocity),AL=[...eI,Ys,Bn],RL=s=>AL.find(Z3(s)),by=v.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});class ML extends v.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const a=r.offsetParent,i=hy(a)&&a.offsetWidth||0,l=this.props.sizeRef.current;l.height=r.offsetHeight||0,l.width=r.offsetWidth||0,l.top=r.offsetTop,l.left=r.offsetLeft,l.right=i-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function OL({children:s,isPresent:t,anchorX:r}){const a=v.useId(),i=v.useRef(null),l=v.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=v.useContext(by);return v.useInsertionEffect(()=>{const{width:c,height:d,top:h,left:g,right:N}=l.current;if(t||!i.current||!c||!d)return;const k=r==="left"?`left: ${g}`:`right: ${N}`;i.current.dataset.motionPopId=a;const E=document.createElement("style");return o&&(E.nonce=o),document.head.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            ${k}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.contains(E)&&document.head.removeChild(E)}},[t]),e.jsx(ML,{isPresent:t,childRef:i,sizeRef:l,children:v.cloneElement(s,{ref:i})})}const LL=({children:s,initial:t,isPresent:r,onExitComplete:a,custom:i,presenceAffectsLayout:l,mode:o,anchorX:c})=>{const d=Kg(VL),h=v.useId();let g=!0,N=v.useMemo(()=>(g=!1,{id:h,initial:t,isPresent:r,custom:i,onExitComplete:k=>{d.set(k,!0);for(const E of d.values())if(!E)return;a&&a()},register:k=>(d.set(k,!1),()=>d.delete(k))}),[r,d,a]);return l&&g&&(N={...N}),v.useMemo(()=>{d.forEach((k,E)=>d.set(E,!1))},[r]),v.useEffect(()=>{!r&&!d.size&&a&&a()},[r]),o==="popLayout"&&(s=e.jsx(OL,{isPresent:r,anchorX:c,children:s})),e.jsx(Tm.Provider,{value:N,children:s})};function VL(){return new Map}function lI(s=!0){const t=v.useContext(Tm);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:a,register:i}=t,l=v.useId();v.useEffect(()=>{if(s)return i(l)},[s]);const o=v.useCallback(()=>s&&a&&a(l),[l,a,s]);return!r&&a?[!1,o]:[!0]}const eu=s=>s.key||"";function UN(s){const t=[];return v.Children.forEach(s,r=>{v.isValidElement(r)&&t.push(r)}),t}const vy=({children:s,custom:t,initial:r=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:l="sync",propagate:o=!1,anchorX:c="left"})=>{const[d,h]=lI(o),g=v.useMemo(()=>UN(s),[s]),N=o&&!d?[]:g.map(eu),k=v.useRef(!0),E=v.useRef(g),y=Kg(()=>new Map),[L,_]=v.useState(g),[A,z]=v.useState(g);y3(()=>{k.current=!1,E.current=g;for(let G=0;G<A.length;G++){const H=eu(A[G]);N.includes(H)?y.delete(H):y.get(H)!==!0&&y.set(H,!1)}},[A,N.length,N.join("-")]);const O=[];if(g!==L){let G=[...g];for(let H=0;H<A.length;H++){const R=A[H],u=eu(R);N.includes(u)||(G.splice(H,0,R),O.push(R))}return l==="wait"&&O.length&&(G=O),z(UN(G)),_(g),null}const{forceRender:K}=v.useContext(Qg);return e.jsx(e.Fragment,{children:A.map(G=>{const H=eu(G),R=o&&!d?!1:g===A||N.includes(H),u=()=>{if(y.has(H))y.set(H,!0);else return;let W=!0;y.forEach(U=>{U||(W=!1)}),W&&(K==null||K(),z(E.current),o&&(h==null||h()),a&&a())};return e.jsx(LL,{isPresent:R,initial:!k.current||r?void 0:!1,custom:t,presenceAffectsLayout:i,mode:l,onExitComplete:R?void 0:u,anchorX:c,children:G},H)})})},cI=v.createContext({strict:!1}),$N={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},zo={};for(const s in $N)zo[s]={isEnabled:t=>$N[s].some(r=>!!t[r])};function zL(s){for(const t in s)zo[t]={...zo[t],...s[t]}}const BL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lx(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||BL.has(s)}let dI=s=>!Lx(s);function FL(s){s&&(dI=t=>t.startsWith("on")?!Lx(t):s(t))}try{FL(require("@emotion/is-prop-valid").default)}catch{}function UL(s,t,r){const a={};for(const i in s)i==="values"&&typeof s.values=="object"||(dI(i)||r===!0&&Lx(i)||!t&&!Lx(i)||s.draggable&&i.startsWith("onDrag"))&&(a[i]=s[i]);return a}function $L(s){if(typeof Proxy>"u")return s;const t=new Map,r=(...a)=>s(...a);return new Proxy(r,{get:(a,i)=>i==="create"?s:(t.has(i)||t.set(i,s(i)),t.get(i))})}const _m=v.createContext({});function Dm(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function Rc(s){return typeof s=="string"||Array.isArray(s)}const jy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ny=["initial",...jy];function Am(s){return Dm(s.animate)||Ny.some(t=>Rc(s[t]))}function uI(s){return!!(Am(s)||s.variants)}function WL(s,t){if(Am(s)){const{initial:r,animate:a}=s;return{initial:r===!1||Rc(r)?r:void 0,animate:Rc(a)?a:void 0}}return s.inherit!==!1?t:{}}function qL(s){const{initial:t,animate:r}=WL(s,v.useContext(_m));return v.useMemo(()=>({initial:t,animate:r}),[WN(t),WN(r)])}function WN(s){return Array.isArray(s)?s.join(" "):s}const HL=Symbol.for("motionComponentSymbol");function co(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function GL(s,t,r){return v.useCallback(a=>{a&&s.onMount&&s.onMount(a),t&&(a?t.mount(a):t.unmount()),r&&(typeof r=="function"?r(a):co(r)&&(r.current=a))},[t])}const wy=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),QL="framerAppearId",xI="data-"+wy(QL),mI=v.createContext({});function KL(s,t,r,a,i){var L,_;const{visualElement:l}=v.useContext(_m),o=v.useContext(cI),c=v.useContext(Tm),d=v.useContext(by).reducedMotion,h=v.useRef(null);a=a||o.renderer,!h.current&&a&&(h.current=a(s,{visualState:t,parent:l,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const g=h.current,N=v.useContext(mI);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&YL(h.current,r,i,N);const k=v.useRef(!1);v.useInsertionEffect(()=>{g&&k.current&&g.update(r,c)});const E=r[xI],y=v.useRef(!!E&&!((L=window.MotionHandoffIsComplete)!=null&&L.call(window,E))&&((_=window.MotionHasOptimisedAnimation)==null?void 0:_.call(window,E)));return y3(()=>{g&&(k.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),gy.render(g.render),y.current&&g.animationState&&g.animationState.animateChanges())}),v.useEffect(()=>{g&&(!y.current&&g.animationState&&g.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var A;(A=window.MotionHandoffMarkAsComplete)==null||A.call(window,E)}),y.current=!1))}),g}function YL(s,t,r,a){const{layoutId:i,layout:l,drag:o,dragConstraints:c,layoutScroll:d,layoutRoot:h,layoutCrossfade:g}=t;s.projection=new r(s.latestValues,t["data-framer-portal-id"]?void 0:hI(s.parent)),s.projection.setOptions({layoutId:i,layout:l,alwaysMeasureLayout:!!o||c&&co(c),visualElement:s,animationType:typeof l=="string"?l:"both",initialPromotionConfig:a,crossfade:g,layoutScroll:d,layoutRoot:h})}function hI(s){if(s)return s.options.allowProjection!==!1?s.projection:hI(s.parent)}function XL({preloadedFeatures:s,createVisualElement:t,useRender:r,useVisualState:a,Component:i}){s&&zL(s);function l(c,d){let h;const g={...v.useContext(by),...c,layoutId:JL(c)},{isStatic:N}=g,k=qL(c),E=a(c,N);if(!N&&Yg){ZL();const y=eV(g);h=y.MeasureLayout,k.visualElement=KL(i,E,g,t,y.ProjectionNode)}return e.jsxs(_m.Provider,{value:k,children:[h&&k.visualElement?e.jsx(h,{visualElement:k.visualElement,...g}):null,r(i,c,GL(E,k.visualElement,d),E,N,k.visualElement)]})}l.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const o=v.forwardRef(l);return o[HL]=i,o}function JL({layoutId:s}){const t=v.useContext(Qg).id;return t&&s!==void 0?t+"-"+s:s}function ZL(s,t){v.useContext(cI).strict}function eV(s){const{drag:t,layout:r}=zo;if(!t&&!r)return{};const a={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(s)||r!=null&&r.isEnabled(s)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}const Mc={};function tV(s){for(const t in s)Mc[t]=s[t],ay(t)&&(Mc[t].isCSSVariable=!0)}function pI(s,{layout:t,layoutId:r}){return el.has(s)||s.startsWith("origin")||(t||r!==void 0)&&(!!Mc[s]||s==="opacity")}const sV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rV=Zo.length;function aV(s,t,r){let a="",i=!0;for(let l=0;l<rV;l++){const o=Zo[l],c=s[o];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(o.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||r){const h=rI(c,fy[o]);if(!d){i=!1;const g=sV[o]||o;a+=`${g}(${h}) `}r&&(t[o]=h)}}return a=a.trim(),r?a=r(t,i?"":a):i&&(a="none"),a}function ky(s,t,r){const{style:a,vars:i,transformOrigin:l}=s;let o=!1,c=!1;for(const d in t){const h=t[d];if(el.has(d)){o=!0;continue}else if(ay(d)){i[d]=h;continue}else{const g=rI(h,fy[d]);d.startsWith("origin")?(c=!0,l[d]=g):a[d]=g}}if(t.transform||(o||r?a.transform=aV(t,s.transform,r):a.transform&&(a.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:g=0}=l;a.transformOrigin=`${d} ${h} ${g}`}}const Iy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function fI(s,t,r){for(const a in t)!Zs(t[a])&&!pI(a,r)&&(s[a]=t[a])}function nV({transformTemplate:s},t){return v.useMemo(()=>{const r=Iy();return ky(r,t,s),Object.assign({},r.vars,r.style)},[t])}function iV(s,t){const r=s.style||{},a={};return fI(a,r,s),Object.assign(a,nV(s,t)),a}function oV(s,t){const r={},a=iV(s,t);return s.drag&&s.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(r.tabIndex=0),r.style=a,r}const lV={offset:"stroke-dashoffset",array:"stroke-dasharray"},cV={offset:"strokeDashoffset",array:"strokeDasharray"};function dV(s,t,r=1,a=0,i=!0){s.pathLength=1;const l=i?lV:cV;s[l.offset]=vt.transform(-a);const o=vt.transform(t),c=vt.transform(r);s[l.array]=`${o} ${c}`}function gI(s,{attrX:t,attrY:r,attrScale:a,pathLength:i,pathSpacing:l=1,pathOffset:o=0,...c},d,h,g){if(ky(s,c,h),d){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:N,style:k}=s;N.transform&&(k.transform=N.transform,delete N.transform),(k.transform||N.transformOrigin)&&(k.transformOrigin=N.transformOrigin??"50% 50%",delete N.transformOrigin),k.transform&&(k.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete N.transformBox),t!==void 0&&(N.x=t),r!==void 0&&(N.y=r),a!==void 0&&(N.scale=a),i!==void 0&&dV(N,i,l,o,!1)}const yI=()=>({...Iy(),attrs:{}}),bI=s=>typeof s=="string"&&s.toLowerCase()==="svg";function uV(s,t,r,a){const i=v.useMemo(()=>{const l=yI();return gI(l,t,bI(a),s.transformTemplate,s.style),{...l.attrs,style:{...l.style}}},[t]);if(s.style){const l={};fI(l,s.style,s),i.style={...l,...i.style}}return i}const xV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Py(s){return typeof s!="string"||s.includes("-")?!1:!!(xV.indexOf(s)>-1||/[A-Z]/u.test(s))}function mV(s=!1){return(r,a,i,{latestValues:l},o)=>{const d=(Py(r)?uV:oV)(a,l,o,r),h=UL(a,typeof r=="string",s),g=r!==v.Fragment?{...h,...d,ref:i}:{},{children:N}=a,k=v.useMemo(()=>Zs(N)?N.get():N,[N]);return v.createElement(r,{...g,children:k})}}function qN(s){const t=[{},{}];return s==null||s.values.forEach((r,a)=>{t[0][a]=r.get(),t[1][a]=r.getVelocity()}),t}function Sy(s,t,r,a){if(typeof t=="function"){const[i,l]=qN(a);t=t(r!==void 0?r:s.custom,i,l)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[i,l]=qN(a);t=t(r!==void 0?r:s.custom,i,l)}return t}function Tu(s){return Zs(s)?s.get():s}function hV({scrapeMotionValuesFromProps:s,createRenderState:t},r,a,i){return{latestValues:pV(r,a,i,s),renderState:t()}}const vI=s=>(t,r)=>{const a=v.useContext(_m),i=v.useContext(Tm),l=()=>hV(s,t,a,i);return r?l():Kg(l)};function pV(s,t,r,a){const i={},l=a(s,{});for(const k in l)i[k]=Tu(l[k]);let{initial:o,animate:c}=s;const d=Am(s),h=uI(s);t&&h&&!d&&s.inherit!==!1&&(o===void 0&&(o=t.initial),c===void 0&&(c=t.animate));let g=r?r.initial===!1:!1;g=g||o===!1;const N=g?c:o;if(N&&typeof N!="boolean"&&!Dm(N)){const k=Array.isArray(N)?N:[N];for(let E=0;E<k.length;E++){const y=Sy(s,k[E]);if(y){const{transitionEnd:L,transition:_,...A}=y;for(const z in A){let O=A[z];if(Array.isArray(O)){const K=g?O.length-1:0;O=O[K]}O!==null&&(i[z]=O)}for(const z in L)i[z]=L[z]}}}return i}function Cy(s,t,r){var l;const{style:a}=s,i={};for(const o in a)(Zs(a[o])||t.style&&Zs(t.style[o])||pI(o,s)||((l=r==null?void 0:r.getValue(o))==null?void 0:l.liveStyle)!==void 0)&&(i[o]=a[o]);return i}const fV={useVisualState:vI({scrapeMotionValuesFromProps:Cy,createRenderState:Iy})};function jI(s,t,r){const a=Cy(s,t,r);for(const i in s)if(Zs(s[i])||Zs(t[i])){const l=Zo.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;a[l]=s[i]}return a}const gV={useVisualState:vI({scrapeMotionValuesFromProps:jI,createRenderState:yI})};function yV(s,t){return function(a,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Py(a)?gV:fV,preloadedFeatures:s,useRender:mV(i),createVisualElement:t,Component:a};return XL(o)}}function Oc(s,t,r){const a=s.getProps();return Sy(a,t,r!==void 0?r:a.custom,s)}const _0=s=>Array.isArray(s);function bV(s,t,r){s.hasValue(t)?s.getValue(t).set(r):s.addValue(t,Vo(r))}function vV(s){return _0(s)?s[s.length-1]||0:s}function jV(s,t){const r=Oc(s,t);let{transitionEnd:a={},transition:i={},...l}=r||{};l={...l,...a};for(const o in l){const c=vV(l[o]);bV(s,o,c)}}function NV(s){return!!(Zs(s)&&s.add)}function D0(s,t){const r=s.getValue("willChange");if(NV(r))return r.add(t);if(!r&&Qa.WillChange){const a=new Qa.WillChange("auto");s.addValue("willChange",a),a.add(t)}}function NI(s){return s.props[xI]}const wV=s=>s!==null;function kV(s,{repeat:t,repeatType:r="loop"},a){const i=s.filter(wV),l=t&&r!=="loop"&&t%2===1?0:i.length-1;return!l||a===void 0?i[l]:a}const IV={type:"spring",stiffness:500,damping:25,restSpeed:10},PV=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),SV={type:"keyframes",duration:.8},CV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},EV=(s,{keyframes:t})=>t.length>2?SV:el.has(s)?s.startsWith("scale")?PV(t[1]):IV:CV;function TV({when:s,delay:t,delayChildren:r,staggerChildren:a,staggerDirection:i,repeat:l,repeatType:o,repeatDelay:c,from:d,elapsed:h,...g}){return!!Object.keys(g).length}const Ey=(s,t,r,a={},i,l)=>o=>{const c=py(a,s)||{},d=c.delay||a.delay||0;let{elapsed:h=0}=a;h=h-fa(d);const g={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-h,onUpdate:k=>{t.set(k),c.onUpdate&&c.onUpdate(k)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:s,motionValue:t,element:l?void 0:i};TV(c)||Object.assign(g,EV(s,g)),g.duration&&(g.duration=fa(g.duration)),g.repeatDelay&&(g.repeatDelay=fa(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let N=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(N=!0)),(Qa.instantAnimations||Qa.skipAnimations)&&(N=!0,g.duration=0,g.delay=0),g.allowFlatten=!c.type&&!c.ease,N&&!l&&t.get()!==void 0){const k=kV(g.keyframes,c);if(k!==void 0){ls.update(()=>{g.onUpdate(k),g.onComplete()});return}}return c.isSync?new xy(g):new dL(g)};function _V({protectedKeys:s,needsAnimating:t},r){const a=s.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,a}function wI(s,t,{delay:r=0,transitionOverride:a,type:i}={}){let{transition:l=s.getDefaultTransition(),transitionEnd:o,...c}=t;a&&(l=a);const d=[],h=i&&s.animationState&&s.animationState.getState()[i];for(const g in c){const N=s.getValue(g,s.latestValues[g]??null),k=c[g];if(k===void 0||h&&_V(h,g))continue;const E={delay:r,...py(l||{},g)},y=N.get();if(y!==void 0&&!N.isAnimating&&!Array.isArray(k)&&k===y&&!E.velocity)continue;let L=!1;if(window.MotionHandoffAnimation){const A=NI(s);if(A){const z=window.MotionHandoffAnimation(A,g,ls);z!==null&&(E.startTime=z,L=!0)}}D0(s,g),N.start(Ey(g,N,k,s.shouldReduceMotion&&J3.has(g)?{type:!1}:E,s,L));const _=N.animation;_&&d.push(_)}return o&&Promise.all(d).then(()=>{ls.update(()=>{o&&jV(s,o)})}),d}function A0(s,t,r={}){var d;const a=Oc(s,t,r.type==="exit"?(d=s.presenceContext)==null?void 0:d.custom:void 0);let{transition:i=s.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(i=r.transitionOverride);const l=a?()=>Promise.all(wI(s,a,r)):()=>Promise.resolve(),o=s.variantChildren&&s.variantChildren.size?(h=0)=>{const{delayChildren:g=0,staggerChildren:N,staggerDirection:k}=i;return DV(s,t,g+h,N,k,r)}:()=>Promise.resolve(),{when:c}=i;if(c){const[h,g]=c==="beforeChildren"?[l,o]:[o,l];return h().then(()=>g())}else return Promise.all([l(),o(r.delay)])}function DV(s,t,r=0,a=0,i=1,l){const o=[],c=(s.variantChildren.size-1)*a,d=i===1?(h=0)=>h*a:(h=0)=>c-h*a;return Array.from(s.variantChildren).sort(AV).forEach((h,g)=>{h.notify("AnimationStart",t),o.push(A0(h,t,{...l,delay:r+d(g)}).then(()=>h.notify("AnimationComplete",t)))}),Promise.all(o)}function AV(s,t){return s.sortNodePosition(t)}function RV(s,t,r={}){s.notify("AnimationStart",t);let a;if(Array.isArray(t)){const i=t.map(l=>A0(s,l,r));a=Promise.all(i)}else if(typeof t=="string")a=A0(s,t,r);else{const i=typeof t=="function"?Oc(s,t,r.custom):t;a=Promise.all(wI(s,i,r))}return a.then(()=>{s.notify("AnimationComplete",t)})}function kI(s,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==s.length)return!1;for(let a=0;a<r;a++)if(t[a]!==s[a])return!1;return!0}const MV=Ny.length;function II(s){if(!s)return;if(!s.isControllingVariants){const r=s.parent?II(s.parent)||{}:{};return s.props.initial!==void 0&&(r.initial=s.props.initial),r}const t={};for(let r=0;r<MV;r++){const a=Ny[r],i=s.props[a];(Rc(i)||i===!1)&&(t[a]=i)}return t}const OV=[...jy].reverse(),LV=jy.length;function VV(s){return t=>Promise.all(t.map(({animation:r,options:a})=>RV(s,r,a)))}function zV(s){let t=VV(s),r=HN(),a=!0;const i=d=>(h,g)=>{var k;const N=Oc(s,g,d==="exit"?(k=s.presenceContext)==null?void 0:k.custom:void 0);if(N){const{transition:E,transitionEnd:y,...L}=N;h={...h,...L,...y}}return h};function l(d){t=d(s)}function o(d){const{props:h}=s,g=II(s.parent)||{},N=[],k=new Set;let E={},y=1/0;for(let _=0;_<LV;_++){const A=OV[_],z=r[A],O=h[A]!==void 0?h[A]:g[A],K=Rc(O),G=A===d?z.isActive:null;G===!1&&(y=_);let H=O===g[A]&&O!==h[A]&&K;if(H&&a&&s.manuallyAnimateOnMount&&(H=!1),z.protectedKeys={...E},!z.isActive&&G===null||!O&&!z.prevProp||Dm(O)||typeof O=="boolean")continue;const R=BV(z.prevProp,O);let u=R||A===d&&z.isActive&&!H&&K||_>y&&K,W=!1;const U=Array.isArray(O)?O:[O];let ee=U.reduce(i(A),{});G===!1&&(ee={});const{prevResolvedValues:te={}}=z,Y={...te,...ee},$=De=>{u=!0,k.has(De)&&(W=!0,k.delete(De)),z.needsAnimating[De]=!0;const he=s.getValue(De);he&&(he.liveStyle=!1)};for(const De in Y){const he=ee[De],ye=te[De];if(E.hasOwnProperty(De))continue;let ge=!1;_0(he)&&_0(ye)?ge=!kI(he,ye):ge=he!==ye,ge?he!=null?$(De):k.add(De):he!==void 0&&k.has(De)?$(De):z.protectedKeys[De]=!0}z.prevProp=O,z.prevResolvedValues=ee,z.isActive&&(E={...E,...ee}),a&&s.blockInitialAnimation&&(u=!1),u&&(!(H&&R)||W)&&N.push(...U.map(De=>({animation:De,options:{type:A}})))}if(k.size){const _={};if(typeof h.initial!="boolean"){const A=Oc(s,Array.isArray(h.initial)?h.initial[0]:h.initial);A&&A.transition&&(_.transition=A.transition)}k.forEach(A=>{const z=s.getBaseTarget(A),O=s.getValue(A);O&&(O.liveStyle=!0),_[A]=z??null}),N.push({animation:_})}let L=!!N.length;return a&&(h.initial===!1||h.initial===h.animate)&&!s.manuallyAnimateOnMount&&(L=!1),a=!1,L?t(N):Promise.resolve()}function c(d,h){var N;if(r[d].isActive===h)return Promise.resolve();(N=s.variantChildren)==null||N.forEach(k=>{var E;return(E=k.animationState)==null?void 0:E.setActive(d,h)}),r[d].isActive=h;const g=o(d);for(const k in r)r[k].protectedKeys={};return g}return{animateChanges:o,setActive:c,setAnimateFunction:l,getState:()=>r,reset:()=>{r=HN(),a=!0}}}function BV(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!kI(t,s):!1}function Zn(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function HN(){return{animate:Zn(!0),whileInView:Zn(),whileHover:Zn(),whileTap:Zn(),whileDrag:Zn(),whileFocus:Zn(),exit:Zn()}}class Gn{constructor(t){this.isMounted=!1,this.node=t}update(){}}class FV extends Gn{constructor(t){super(t),t.animationState||(t.animationState=zV(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Dm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let UV=0;class $V extends Gn{constructor(){super(...arguments),this.id=UV++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const i=this.node.animationState.setActive("exit",!t);r&&!t&&i.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const WV={animation:{Feature:FV},exit:{Feature:$V}};function Lc(s,t,r,a={passive:!0}){return s.addEventListener(t,r,a),()=>s.removeEventListener(t,r)}function md(s){return{point:{x:s.pageX,y:s.pageY}}}const qV=s=>t=>yy(t)&&s(t,md(t));function Xl(s,t,r,a){return Lc(s,t,qV(r),a)}function PI({top:s,left:t,right:r,bottom:a}){return{x:{min:t,max:r},y:{min:s,max:a}}}function HV({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function GV(s,t){if(!t)return s;const r=t({x:s.left,y:s.top}),a=t({x:s.right,y:s.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}const SI=1e-4,QV=1-SI,KV=1+SI,CI=.01,YV=0-CI,XV=0+CI;function ar(s){return s.max-s.min}function JV(s,t,r){return Math.abs(s-t)<=r}function GN(s,t,r,a=.5){s.origin=a,s.originPoint=ns(t.min,t.max,s.origin),s.scale=ar(r)/ar(t),s.translate=ns(r.min,r.max,s.origin)-s.originPoint,(s.scale>=QV&&s.scale<=KV||isNaN(s.scale))&&(s.scale=1),(s.translate>=YV&&s.translate<=XV||isNaN(s.translate))&&(s.translate=0)}function Jl(s,t,r,a){GN(s.x,t.x,r.x,a?a.originX:void 0),GN(s.y,t.y,r.y,a?a.originY:void 0)}function QN(s,t,r){s.min=r.min+t.min,s.max=s.min+ar(t)}function ZV(s,t,r){QN(s.x,t.x,r.x),QN(s.y,t.y,r.y)}function KN(s,t,r){s.min=t.min-r.min,s.max=s.min+ar(t)}function Zl(s,t,r){KN(s.x,t.x,r.x),KN(s.y,t.y,r.y)}const YN=()=>({translate:0,scale:1,origin:0,originPoint:0}),uo=()=>({x:YN(),y:YN()}),XN=()=>({min:0,max:0}),fs=()=>({x:XN(),y:XN()});function Dr(s){return[s("x"),s("y")]}function Bh(s){return s===void 0||s===1}function R0({scale:s,scaleX:t,scaleY:r}){return!Bh(s)||!Bh(t)||!Bh(r)}function ri(s){return R0(s)||EI(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function EI(s){return JN(s.x)||JN(s.y)}function JN(s){return s&&s!=="0%"}function Vx(s,t,r){const a=s-r,i=t*a;return r+i}function ZN(s,t,r,a,i){return i!==void 0&&(s=Vx(s,i,a)),Vx(s,r,a)+t}function M0(s,t=0,r=1,a,i){s.min=ZN(s.min,t,r,a,i),s.max=ZN(s.max,t,r,a,i)}function TI(s,{x:t,y:r}){M0(s.x,t.translate,t.scale,t.originPoint),M0(s.y,r.translate,r.scale,r.originPoint)}const ew=.999999999999,tw=1.0000000000001;function ez(s,t,r,a=!1){const i=r.length;if(!i)return;t.x=t.y=1;let l,o;for(let c=0;c<i;c++){l=r[c],o=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(a&&l.options.layoutScroll&&l.scroll&&l!==l.root&&mo(s,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,TI(s,o)),a&&ri(l.latestValues)&&mo(s,l.latestValues))}t.x<tw&&t.x>ew&&(t.x=1),t.y<tw&&t.y>ew&&(t.y=1)}function xo(s,t){s.min=s.min+t,s.max=s.max+t}function sw(s,t,r,a,i=.5){const l=ns(s.min,s.max,i);M0(s,t,r,l,a)}function mo(s,t){sw(s.x,t.x,t.scaleX,t.scale,t.originX),sw(s.y,t.y,t.scaleY,t.scale,t.originY)}function _I(s,t){return PI(GV(s.getBoundingClientRect(),t))}function tz(s,t,r){const a=_I(s,r),{scroll:i}=t;return i&&(xo(a.x,i.offset.x),xo(a.y,i.offset.y)),a}const DI=({current:s})=>s?s.ownerDocument.defaultView:null,rw=(s,t)=>Math.abs(s-t);function sz(s,t){const r=rw(s.x,t.x),a=rw(s.y,t.y);return Math.sqrt(r**2+a**2)}class AI{constructor(t,r,{transformPagePoint:a,contextWindow:i,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Uh(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,E=sz(N.offset,{x:0,y:0})>=3;if(!k&&!E)return;const{point:y}=N,{timestamp:L}=Rs;this.history.push({...y,timestamp:L});const{onStart:_,onMove:A}=this.handlers;k||(_&&_(this.lastMoveEvent,N),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,N)},this.handlePointerMove=(N,k)=>{this.lastMoveEvent=N,this.lastMoveEventInfo=Fh(k,this.transformPagePoint),ls.update(this.updatePoint,!0)},this.handlePointerUp=(N,k)=>{this.end();const{onEnd:E,onSessionEnd:y,resumeAnimation:L}=this.handlers;if(this.dragSnapToOrigin&&L&&L(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Uh(N.type==="pointercancel"?this.lastMoveEventInfo:Fh(k,this.transformPagePoint),this.history);this.startEvent&&E&&E(N,_),y&&y(N,_)},!yy(t))return;this.dragSnapToOrigin=l,this.handlers=r,this.transformPagePoint=a,this.contextWindow=i||window;const o=md(t),c=Fh(o,this.transformPagePoint),{point:d}=c,{timestamp:h}=Rs;this.history=[{...d,timestamp:h}];const{onSessionStart:g}=r;g&&g(t,Uh(c,this.history)),this.removeListeners=dd(Xl(this.contextWindow,"pointermove",this.handlePointerMove),Xl(this.contextWindow,"pointerup",this.handlePointerUp),Xl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),zn(this.updatePoint)}}function Fh(s,t){return t?{point:t(s.point)}:s}function aw(s,t){return{x:s.x-t.x,y:s.y-t.y}}function Uh({point:s},t){return{point:s,delta:aw(s,RI(t)),offset:aw(s,rz(t)),velocity:az(t,.1)}}function rz(s){return s[0]}function RI(s){return s[s.length-1]}function az(s,t){if(s.length<2)return{x:0,y:0};let r=s.length-1,a=null;const i=RI(s);for(;r>=0&&(a=s[r],!(i.timestamp-a.timestamp>fa(t)));)r--;if(!a)return{x:0,y:0};const l=ga(i.timestamp-a.timestamp);if(l===0)return{x:0,y:0};const o={x:(i.x-a.x)/l,y:(i.y-a.y)/l};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function nz(s,{min:t,max:r},a){return t!==void 0&&s<t?s=a?ns(t,s,a.min):Math.max(s,t):r!==void 0&&s>r&&(s=a?ns(r,s,a.max):Math.min(s,r)),s}function nw(s,t,r){return{min:t!==void 0?s.min+t:void 0,max:r!==void 0?s.max+r-(s.max-s.min):void 0}}function iz(s,{top:t,left:r,bottom:a,right:i}){return{x:nw(s.x,r,i),y:nw(s.y,t,a)}}function iw(s,t){let r=t.min-s.min,a=t.max-s.max;return t.max-t.min<s.max-s.min&&([r,a]=[a,r]),{min:r,max:a}}function oz(s,t){return{x:iw(s.x,t.x),y:iw(s.y,t.y)}}function lz(s,t){let r=.5;const a=ar(s),i=ar(t);return i>a?r=_c(t.min,t.max-a,s.min):a>i&&(r=_c(s.min,s.max-i,t.min)),Ga(0,1,r)}function cz(s,t){const r={};return t.min!==void 0&&(r.min=t.min-s.min),t.max!==void 0&&(r.max=t.max-s.min),r}const O0=.35;function dz(s=O0){return s===!1?s=0:s===!0&&(s=O0),{x:ow(s,"left","right"),y:ow(s,"top","bottom")}}function ow(s,t,r){return{min:lw(s,t),max:lw(s,r)}}function lw(s,t){return typeof s=="number"?s:s[t]||0}const uz=new WeakMap;class xz{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fs(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=g=>{const{dragSnapToOrigin:N}=this.getProps();N?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(md(g).point)},l=(g,N)=>{const{drag:k,dragPropagation:E,onDragStart:y}=this.getProps();if(k&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=PL(k),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Dr(_=>{let A=this.getAxisMotionValue(_).get()||0;if(ya.test(A)){const{projection:z}=this.visualElement;if(z&&z.layout){const O=z.layout.layoutBox[_];O&&(A=ar(O)*(parseFloat(A)/100))}}this.originPoint[_]=A}),y&&ls.postRender(()=>y(g,N)),D0(this.visualElement,"transform");const{animationState:L}=this.visualElement;L&&L.setActive("whileDrag",!0)},o=(g,N)=>{const{dragPropagation:k,dragDirectionLock:E,onDirectionLock:y,onDrag:L}=this.getProps();if(!k&&!this.openDragLock)return;const{offset:_}=N;if(E&&this.currentDirection===null){this.currentDirection=mz(_),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",N.point,_),this.updateAxis("y",N.point,_),this.visualElement.render(),L&&L(g,N)},c=(g,N)=>this.stop(g,N),d=()=>Dr(g=>{var N;return this.getAnimationState(g)==="paused"&&((N=this.getAxisMotionValue(g).animation)==null?void 0:N.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new AI(t,{onSessionStart:i,onStart:l,onMove:o,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:DI(this.visualElement)})}stop(t,r){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:l}=this.getProps();l&&ls.postRender(()=>l(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,a){const{drag:i}=this.getProps();if(!a||!tu(t,i,this.currentDirection))return;const l=this.getAxisMotionValue(t);let o=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(o=nz(o,this.constraints[t],this.elastic[t])),l.set(o)}resolveConstraints(){var l;const{dragConstraints:t,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,i=this.constraints;t&&co(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=iz(a.layoutBox,t):this.constraints=!1,this.elastic=dz(r),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Dr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=cz(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!co(t))return!1;const a=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const l=tz(a,i.root,this.visualElement.getTransformPagePoint());let o=oz(i.layout.layoutBox,l);if(r){const c=r(HV(o));this.hasMutatedConstraints=!!c,c&&(o=PI(c))}return o}startAnimation(t){const{drag:r,dragMomentum:a,dragElastic:i,dragTransition:l,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},h=Dr(g=>{if(!tu(g,r,this.currentDirection))return;let N=d&&d[g]||{};o&&(N={min:0,max:0});const k=i?200:1e6,E=i?40:1e7,y={type:"inertia",velocity:a?t[g]:0,bounceStiffness:k,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...l,...N};return this.startAxisValueAnimation(g,y)});return Promise.all(h).then(c)}startAxisValueAnimation(t,r){const a=this.getAxisMotionValue(t);return D0(this.visualElement,t),a.start(Ey(t,a,0,r,this.visualElement,!1))}stopAnimation(){Dr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Dr(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),i=a[r];return i||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){Dr(r=>{const{drag:a}=this.getProps();if(!tu(r,a,this.currentDirection))return;const{projection:i}=this.visualElement,l=this.getAxisMotionValue(r);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[r];l.set(t[r]-ns(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!co(r)||!a||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Dr(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const d=c.get();i[o]=lz({min:d,max:d},this.constraints[o])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),Dr(o=>{if(!tu(o,t,null))return;const c=this.getAxisMotionValue(o),{min:d,max:h}=this.constraints[o];c.set(ns(d,h,i[o]))})}addListeners(){if(!this.visualElement.current)return;uz.set(this.visualElement,this);const t=this.visualElement.current,r=Xl(t,"pointerdown",d=>{const{drag:h,dragListener:g=!0}=this.getProps();h&&g&&this.start(d)}),a=()=>{const{dragConstraints:d}=this.getProps();co(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,l=i.addEventListener("measure",a);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ls.read(a);const o=Lc(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(Dr(g=>{const N=this.getAxisMotionValue(g);N&&(this.originPoint[g]+=d[g].translate,N.set(N.get()+d[g].translate))}),this.visualElement.render())});return()=>{o(),r(),l(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:i=!1,dragConstraints:l=!1,dragElastic:o=O0,dragMomentum:c=!0}=t;return{...t,drag:r,dragDirectionLock:a,dragPropagation:i,dragConstraints:l,dragElastic:o,dragMomentum:c}}}function tu(s,t,r){return(t===!0||t===s)&&(r===null||r===s)}function mz(s,t=10){let r=null;return Math.abs(s.y)>t?r="y":Math.abs(s.x)>t&&(r="x"),r}class hz extends Gn{constructor(t){super(t),this.removeGroupControls=Lr,this.removeListeners=Lr,this.controls=new xz(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Lr}unmount(){this.removeGroupControls(),this.removeListeners()}}const cw=s=>(t,r)=>{s&&ls.postRender(()=>s(t,r))};class pz extends Gn{constructor(){super(...arguments),this.removePointerDownListener=Lr}onPointerDown(t){this.session=new AI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:DI(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:a,onPanEnd:i}=this.node.getProps();return{onSessionStart:cw(t),onStart:cw(r),onMove:a,onEnd:(l,o)=>{delete this.session,i&&ls.postRender(()=>i(l,o))}}}mount(){this.removePointerDownListener=Xl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _u={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function dw(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const jl={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(vt.test(s))s=parseFloat(s);else return s;const r=dw(s,t.target.x),a=dw(s,t.target.y);return`${r}% ${a}%`}},fz={correct:(s,{treeScale:t,projectionDelta:r})=>{const a=s,i=Bn.parse(s);if(i.length>5)return a;const l=Bn.createTransformer(s),o=typeof i[0]!="number"?1:0,c=r.x.scale*t.x,d=r.y.scale*t.y;i[0+o]/=c,i[1+o]/=d;const h=ns(c,d,.5);return typeof i[2+o]=="number"&&(i[2+o]/=h),typeof i[3+o]=="number"&&(i[3+o]/=h),l(i)}};class gz extends v.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a,layoutId:i}=this.props,{projection:l}=t;tV(yz),l&&(r.group&&r.group.add(l),a&&a.register&&i&&a.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),_u.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:a,drag:i,isPresent:l}=this.props,{projection:o}=a;return o&&(o.isPresent=l,i||t.layoutDependency!==r||r===void 0||t.isPresent!==l?o.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?o.promote():o.relegate()||ls.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),gy.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),a&&a.deregister&&a.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function MI(s){const[t,r]=lI(),a=v.useContext(Qg);return e.jsx(gz,{...s,layoutGroup:a,switchLayoutGroup:v.useContext(mI),isPresent:t,safeToRemove:r})}const yz={borderRadius:{...jl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:jl,borderTopRightRadius:jl,borderBottomLeftRadius:jl,borderBottomRightRadius:jl,boxShadow:fz};function bz(s,t,r){const a=Zs(s)?s:Vo(s);return a.start(Ey("",a,t,r)),a.animation}const vz=(s,t)=>s.depth-t.depth;class jz{constructor(){this.children=[],this.isDirty=!1}add(t){Xg(this.children,t),this.isDirty=!0}remove(t){Jg(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(vz),this.isDirty=!1,this.children.forEach(t)}}function Nz(s,t){const r=xr.now(),a=({timestamp:i})=>{const l=i-r;l>=t&&(zn(a),s(l-t))};return ls.setup(a,!0),()=>zn(a)}const OI=["TopLeft","TopRight","BottomLeft","BottomRight"],wz=OI.length,uw=s=>typeof s=="string"?parseFloat(s):s,xw=s=>typeof s=="number"||vt.test(s);function kz(s,t,r,a,i,l){i?(s.opacity=ns(0,r.opacity??1,Iz(a)),s.opacityExit=ns(t.opacity??1,0,Pz(a))):l&&(s.opacity=ns(t.opacity??1,r.opacity??1,a));for(let o=0;o<wz;o++){const c=`border${OI[o]}Radius`;let d=mw(t,c),h=mw(r,c);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||xw(d)===xw(h)?(s[c]=Math.max(ns(uw(d),uw(h),a),0),(ya.test(h)||ya.test(d))&&(s[c]+="%")):s[c]=h}(t.rotate||r.rotate)&&(s.rotate=ns(t.rotate||0,r.rotate||0,a))}function mw(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const Iz=LI(0,.5,E3),Pz=LI(.5,.95,Lr);function LI(s,t,r){return a=>a<s?0:a>t?1:r(_c(s,t,a))}function hw(s,t){s.min=t.min,s.max=t.max}function _r(s,t){hw(s.x,t.x),hw(s.y,t.y)}function pw(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}function fw(s,t,r,a,i){return s-=t,s=Vx(s,1/r,a),i!==void 0&&(s=Vx(s,1/i,a)),s}function Sz(s,t=0,r=1,a=.5,i,l=s,o=s){if(ya.test(t)&&(t=parseFloat(t),t=ns(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=ns(l.min,l.max,a);s===l&&(c-=t),s.min=fw(s.min,t,r,c,i),s.max=fw(s.max,t,r,c,i)}function gw(s,t,[r,a,i],l,o){Sz(s,t[r],t[a],t[i],t.scale,l,o)}const Cz=["x","scaleX","originX"],Ez=["y","scaleY","originY"];function yw(s,t,r,a){gw(s.x,t,Cz,r?r.x:void 0,a?a.x:void 0),gw(s.y,t,Ez,r?r.y:void 0,a?a.y:void 0)}function bw(s){return s.translate===0&&s.scale===1}function VI(s){return bw(s.x)&&bw(s.y)}function vw(s,t){return s.min===t.min&&s.max===t.max}function Tz(s,t){return vw(s.x,t.x)&&vw(s.y,t.y)}function jw(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function zI(s,t){return jw(s.x,t.x)&&jw(s.y,t.y)}function Nw(s){return ar(s.x)/ar(s.y)}function ww(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}class _z{constructor(){this.members=[]}add(t){Xg(this.members,t),t.scheduleRender()}remove(t){if(Jg(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(i=>t===i);if(r===0)return!1;let a;for(let i=r;i>=0;i--){const l=this.members[i];if(l.isPresent!==!1){a=l;break}}return a?(this.promote(a),!0):!1}promote(t,r){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,r&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:a}=t;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Dz(s,t,r){let a="";const i=s.x.translate/t.x,l=s.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((i||l||o)&&(a=`translate3d(${i}px, ${l}px, ${o}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:h,rotate:g,rotateX:N,rotateY:k,skewX:E,skewY:y}=r;h&&(a=`perspective(${h}px) ${a}`),g&&(a+=`rotate(${g}deg) `),N&&(a+=`rotateX(${N}deg) `),k&&(a+=`rotateY(${k}deg) `),E&&(a+=`skewX(${E}deg) `),y&&(a+=`skewY(${y}deg) `)}const c=s.x.scale*t.x,d=s.y.scale*t.y;return(c!==1||d!==1)&&(a+=`scale(${c}, ${d})`),a||"none"}const $h=["","X","Y","Z"],Az={visibility:"hidden"},Rz=1e3;let Mz=0;function Wh(s,t,r,a){const{latestValues:i}=t;i[s]&&(r[s]=i[s],t.setStaticValue(s,0),a&&(a[s]=0))}function BI(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const r=NI(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:l}=s.options;window.MotionCancelOptimisedAnimation(r,"transform",ls,!(i||l))}const{parent:a}=s;a&&!a.hasCheckedOptimisedAppear&&BI(a)}function FI({attachResizeListener:s,defaultParent:t,measureScroll:r,checkIsScrollRoot:a,resetTransform:i}){return class{constructor(o={},c=t==null?void 0:t()){this.id=Mz++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Vz),this.nodes.forEach($z),this.nodes.forEach(Wz),this.nodes.forEach(zz)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new jz)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ty),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const d=this.eventHandlers.get(o);d&&d.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=oI(o)&&!DL(o),this.instance=o;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),s){let g;const N=()=>this.root.updateBlockedByResize=!1;s(o,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=Nz(N,250),_u.hasAnimatedSinceResize&&(_u.hasAnimatedSinceResize=!1,this.nodes.forEach(Iw))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:N,hasRelativeLayoutChanged:k,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||h.getDefaultTransition()||Kz,{onLayoutAnimationStart:L,onLayoutAnimationComplete:_}=h.getProps(),A=!this.targetLayout||!zI(this.targetLayout,E),z=!N&&k;if(this.options.layoutRoot||this.resumeFrom||z||N&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,z);const O={...py(y,"layout"),onPlay:L,onComplete:_};(h.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O)}else N||Iw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),zn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qz),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&BI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const N=this.path[g];N.shouldResetTransform=!0,N.updateScroll("snapshot"),N.options.layoutRoot&&N.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kw);return}this.isUpdating||this.nodes.forEach(Fz),this.isUpdating=!1,this.nodes.forEach(Uz),this.nodes.forEach(Oz),this.nodes.forEach(Lz),this.clearAllSnapshots();const c=xr.now();Rs.delta=Ga(0,1e3/60,c-Rs.timestamp),Rs.timestamp=c,Rs.isProcessing=!0,Rh.update.process(Rs),Rh.preRender.process(Rs),Rh.render.process(Rs),Rs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,gy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Bz),this.sharedNodes.forEach(Hz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ls.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ls.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ar(this.snapshot.measuredBox.x)&&!ar(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=fs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const d=a(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:d,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!VI(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,g=h!==this.prevTransformTemplateValue;o&&this.instance&&(c||ri(this.latestValues)||g)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return o&&(d=this.removeTransform(d)),Yz(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:o}=this.options;if(!o)return fs();const c=o.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(Xz))){const{scroll:g}=this.root;g&&(xo(c.x,g.offset.x),xo(c.y,g.offset.y))}return c}removeElementScroll(o){var d;const c=fs();if(_r(c,o),(d=this.scroll)!=null&&d.wasRoot)return c;for(let h=0;h<this.path.length;h++){const g=this.path[h],{scroll:N,options:k}=g;g!==this.root&&N&&k.layoutScroll&&(N.wasRoot&&_r(c,o),xo(c.x,N.offset.x),xo(c.y,N.offset.y))}return c}applyTransform(o,c=!1){const d=fs();_r(d,o);for(let h=0;h<this.path.length;h++){const g=this.path[h];!c&&g.options.layoutScroll&&g.scroll&&g!==g.root&&mo(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),ri(g.latestValues)&&mo(d,g.latestValues)}return ri(this.latestValues)&&mo(d,this.latestValues),d}removeTransform(o){const c=fs();_r(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!ri(h.latestValues))continue;R0(h.latestValues)&&h.updateSnapshot();const g=fs(),N=h.measurePageBox();_r(g,N),yw(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,g)}return ri(this.latestValues)&&yw(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Rs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var k;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:N}=this.options;if(!(!this.layout||!(g||N))){if(this.resolvedRelativeTargetAt=Rs.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fs(),this.relativeTargetOrigin=fs(),Zl(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),_r(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=fs(),this.targetWithTransforms=fs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ZV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_r(this.target,this.layout.layoutBox),TI(this.target,this.targetDelta)):_r(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fs(),this.relativeTargetOrigin=fs(),Zl(this.relativeTargetOrigin,this.target,E.target),_r(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||R0(this.parent.latestValues)||EI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Rs.timestamp&&(d=!1),d)return;const{layout:h,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||g))return;_r(this.layoutCorrected,this.layout.layoutBox);const N=this.treeScale.x,k=this.treeScale.y;ez(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=fs());const{target:E}=o;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(pw(this.prevProjectionDelta.x,this.projectionDelta.x),pw(this.prevProjectionDelta.y,this.projectionDelta.y)),Jl(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==N||this.treeScale.y!==k||!ww(this.projectionDelta.x,this.prevProjectionDelta.x)||!ww(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),o){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=uo(),this.projectionDelta=uo(),this.projectionDeltaWithTransform=uo()}setAnimationOrigin(o,c=!1){const d=this.snapshot,h=d?d.latestValues:{},g={...this.latestValues},N=uo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const k=fs(),E=d?d.source:void 0,y=this.layout?this.layout.source:void 0,L=E!==y,_=this.getStack(),A=!_||_.members.length<=1,z=!!(L&&!A&&this.options.crossfade===!0&&!this.path.some(Qz));this.animationProgress=0;let O;this.mixTargetDelta=K=>{const G=K/1e3;Pw(N.x,o.x,G),Pw(N.y,o.y,G),this.setTargetDelta(N),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zl(k,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Gz(this.relativeTarget,this.relativeTargetOrigin,k,G),O&&Tz(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=fs()),_r(O,this.relativeTarget)),L&&(this.animationValues=g,kz(g,h,this.latestValues,G,z,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var c,d,h;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(!1),(h=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||h.stop(!1),this.pendingAnimation&&(zn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ls.update(()=>{_u.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Vo(0)),this.currentAnimation=bz(this.motionValue,[0,1e3],{...o,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),o.onUpdate&&o.onUpdate(g)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Rz),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:d,layout:h,latestValues:g}=o;if(!(!c||!d||!h)){if(this!==o&&this.layout&&h&&UI(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||fs();const N=ar(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+N;const k=ar(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+k}_r(c,d),mo(c,g),Jl(this.projectionDeltaWithTransform,this.layoutCorrected,c,g)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new _z),this.sharedNodes.get(o).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var c;const{layoutId:o}=this.options;return o?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:o}=this.options;return o?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:d}=o;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const h={};d.z&&Wh("z",o,h,this.animationValues);for(let g=0;g<$h.length;g++)Wh(`rotate${$h[g]}`,o,h,this.animationValues),Wh(`skew${$h[g]}`,o,h,this.animationValues);o.render();for(const g in h)o.setStaticValue(g,h[g]),this.animationValues&&(this.animationValues[g]=h[g]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Az;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Tu(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const E={};return this.options.layoutId&&(E.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,E.pointerEvents=Tu(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ri(this.latestValues)&&(E.transform=d?d({},""):"none",this.hasProjected=!1),E}const g=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=Dz(this.projectionDeltaWithTransform,this.treeScale,g),d&&(c.transform=d(g,c.transform));const{x:N,y:k}=this.projectionDelta;c.transformOrigin=`${N.origin*100}% ${k.origin*100}% 0`,h.animationValues?c.opacity=h===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=h===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const E in Mc){if(g[E]===void 0)continue;const{correct:y,applyTo:L,isCSSVariable:_}=Mc[E],A=c.transform==="none"?g[E]:y(g[E],h);if(L){const z=L.length;for(let O=0;O<z;O++)c[L[O]]=A}else _?this.options.visualElement.renderState.vars[E]=A:c[E]=A}return this.options.layoutId&&(c.pointerEvents=h===this?Tu(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)==null?void 0:c.stop(!1)}),this.root.nodes.forEach(kw),this.root.sharedNodes.clear()}}}function Oz(s){s.updateLayout()}function Lz(s){var r;const t=((r=s.resumeFrom)==null?void 0:r.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:i}=s.layout,{animationType:l}=s.options,o=t.source!==s.layout.source;l==="size"?Dr(N=>{const k=o?t.measuredBox[N]:t.layoutBox[N],E=ar(k);k.min=a[N].min,k.max=k.min+E}):UI(l,t.layoutBox,a)&&Dr(N=>{const k=o?t.measuredBox[N]:t.layoutBox[N],E=ar(a[N]);k.max=k.min+E,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[N].max=s.relativeTarget[N].min+E)});const c=uo();Jl(c,a,t.layoutBox);const d=uo();o?Jl(d,s.applyTransform(i,!0),t.measuredBox):Jl(d,a,t.layoutBox);const h=!VI(c);let g=!1;if(!s.resumeFrom){const N=s.getClosestProjectingParent();if(N&&!N.resumeFrom){const{snapshot:k,layout:E}=N;if(k&&E){const y=fs();Zl(y,t.layoutBox,k.layoutBox);const L=fs();Zl(L,a,E.layoutBox),zI(y,L)||(g=!0),N.options.layoutRoot&&(s.relativeTarget=L,s.relativeTargetOrigin=y,s.relativeParent=N)}}}s.notifyListeners("didUpdate",{layout:a,snapshot:t,delta:d,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:g})}else if(s.isLead()){const{onExitComplete:a}=s.options;a&&a()}s.options.transition=void 0}function Vz(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function zz(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function Bz(s){s.clearSnapshot()}function kw(s){s.clearMeasurements()}function Fz(s){s.isLayoutDirty=!1}function Uz(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function Iw(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function $z(s){s.resolveTargetDelta()}function Wz(s){s.calcProjection()}function qz(s){s.resetSkewAndRotation()}function Hz(s){s.removeLeadSnapshot()}function Pw(s,t,r){s.translate=ns(t.translate,0,r),s.scale=ns(t.scale,1,r),s.origin=t.origin,s.originPoint=t.originPoint}function Sw(s,t,r,a){s.min=ns(t.min,r.min,a),s.max=ns(t.max,r.max,a)}function Gz(s,t,r,a){Sw(s.x,t.x,r.x,a),Sw(s.y,t.y,r.y,a)}function Qz(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const Kz={duration:.45,ease:[.4,0,.1,1]},Cw=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),Ew=Cw("applewebkit/")&&!Cw("chrome/")?Math.round:Lr;function Tw(s){s.min=Ew(s.min),s.max=Ew(s.max)}function Yz(s){Tw(s.x),Tw(s.y)}function UI(s,t,r){return s==="position"||s==="preserve-aspect"&&!JV(Nw(t),Nw(r),.2)}function Xz(s){var t;return s!==s.root&&((t=s.scroll)==null?void 0:t.wasRoot)}const Jz=FI({attachResizeListener:(s,t)=>Lc(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),qh={current:void 0},$I=FI({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!qh.current){const s=new Jz({});s.mount(window),s.setOptions({layoutScroll:!0}),qh.current=s}return qh.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),Zz={pan:{Feature:pz},drag:{Feature:hz,ProjectionNode:$I,MeasureLayout:MI}};function _w(s,t,r){const{props:a}=s;s.animationState&&a.whileHover&&s.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,l=a[i];l&&ls.postRender(()=>l(t,md(t)))}class eB extends Gn{mount(){const{current:t}=this.node;t&&(this.unmount=SL(t,(r,a)=>(_w(this.node,a,"Start"),i=>_w(this.node,i,"End"))))}unmount(){}}class tB extends Gn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dd(Lc(this.node.current,"focus",()=>this.onFocus()),Lc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Dw(s,t,r){const{props:a}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&a.whileTap&&s.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),l=a[i];l&&ls.postRender(()=>l(t,md(t)))}class sB extends Gn{mount(){const{current:t}=this.node;t&&(this.unmount=_L(t,(r,a)=>(Dw(this.node,a,"Start"),(i,{success:l})=>Dw(this.node,i,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const L0=new WeakMap,Hh=new WeakMap,rB=s=>{const t=L0.get(s.target);t&&t(s)},aB=s=>{s.forEach(rB)};function nB({root:s,...t}){const r=s||document;Hh.has(r)||Hh.set(r,{});const a=Hh.get(r),i=JSON.stringify(t);return a[i]||(a[i]=new IntersectionObserver(aB,{root:s,...t})),a[i]}function iB(s,t,r){const a=nB(t);return L0.set(s,r),a.observe(s),()=>{L0.delete(s),a.unobserve(s)}}const oB={some:0,all:1};class lB extends Gn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:a,amount:i="some",once:l}=t,o={root:r?r.current:void 0,rootMargin:a,threshold:typeof i=="number"?i:oB[i]},c=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,l&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:g,onViewportLeave:N}=this.node.getProps(),k=h?g:N;k&&k(d)};return iB(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(cB(t,r))&&this.startObserver()}unmount(){}}function cB({viewport:s={}},{viewport:t={}}={}){return r=>s[r]!==t[r]}const dB={inView:{Feature:lB},tap:{Feature:sB},focus:{Feature:tB},hover:{Feature:eB}},uB={layout:{ProjectionNode:$I,MeasureLayout:MI}},V0={current:null},WI={current:!1};function xB(){if(WI.current=!0,!!Yg)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>V0.current=s.matches;s.addListener(t),t()}else V0.current=!1}const mB=new WeakMap;function hB(s,t,r){for(const a in t){const i=t[a],l=r[a];if(Zs(i))s.addValue(a,i);else if(Zs(l))s.addValue(a,Vo(i,{owner:s}));else if(l!==i)if(s.hasValue(a)){const o=s.getValue(a);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=s.getStaticValue(a);s.addValue(a,Vo(o!==void 0?o:i,{owner:s}))}}for(const a in r)t[a]===void 0&&s.removeValue(a);return t}const Aw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class pB{scrapeMotionValuesFromProps(t,r,a){return{}}constructor({parent:t,props:r,presenceContext:a,reducedMotionConfig:i,blockInitialAnimation:l,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=my,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const k=xr.now();this.renderScheduledAt<k&&(this.renderScheduledAt=k,ls.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=r.initial?{...d}:{},this.renderState=h,this.parent=t,this.props=r,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!l,this.isControllingVariants=Am(r),this.isVariantNode=uI(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:g,...N}=this.scrapeMotionValuesFromProps(r,{},this);for(const k in N){const E=N[k];d[k]!==void 0&&Zs(E)&&E.set(d[k],!1)}}mount(t){this.current=t,mB.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),WI.current||xB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:V0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),zn(this.notifyUpdate),zn(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=el.has(t);a&&this.onBindTransform&&this.onBindTransform();const i=r.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&ls.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0)}),l=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{i(),l(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in zo){const r=zo[t];if(!r)continue;const{isEnabled:a,Feature:i}=r;if(!this.features[t]&&i&&a(this.props)&&(this.features[t]=new i(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fs()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<Aw.length;a++){const i=Aw[a];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const l="on"+i,o=t[l];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=hB(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const a=this.values.get(t);r!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&r!==void 0&&(a=Vo(r===null?void 0:r,{owner:this}),this.addValue(t,a)),a}readValue(t,r){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(b3(a)||j3(a))?a=parseFloat(a):!RL(a)&&Bn.test(r)&&(a=sI(t,r)),this.setBaseTarget(t,Zs(a)?a.get():a)),Zs(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var l;const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const o=Sy(this.props,r,(l=this.presenceContext)==null?void 0:l.custom);o&&(a=o[t])}if(r&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Zs(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new ty),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class qI extends pB{constructor(){super(...arguments),this.KeyframeResolver=NL}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:a}){delete r[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Zs(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function HI(s,{style:t,vars:r},a,i){Object.assign(s.style,t,i&&i.getProjectionStyles(a));for(const l in r)s.style.setProperty(l,r[l])}function fB(s){return window.getComputedStyle(s)}class gB extends qI{constructor(){super(...arguments),this.type="html",this.renderInstance=HI}readValueFromInstance(t,r){var a;if(el.has(r))return(a=this.projection)!=null&&a.isProjecting?I0(r):FO(t,r);{const i=fB(t),l=(ay(r)?i.getPropertyValue(r):i[r])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:r}){return _I(t,r)}build(t,r,a){ky(t,r,a.transformTemplate)}scrapeMotionValuesFromProps(t,r,a){return Cy(t,r,a)}}const GI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yB(s,t,r,a){HI(s,t,void 0,a);for(const i in t.attrs)s.setAttribute(GI.has(i)?i:wy(i),t.attrs[i])}class bB extends qI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=fs}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(el.has(r)){const a=tI(r);return a&&a.default||0}return r=GI.has(r)?r:wy(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,a){return jI(t,r,a)}build(t,r,a){gI(t,r,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,r,a,i){yB(t,r,a,i)}mount(t){this.isSVGTag=bI(t.tagName),super.mount(t)}}const vB=(s,t)=>Py(s)?new bB(t):new gB(t,{allowProjection:s!==v.Fragment}),jB=yV({...WV,...dB,...Zz,...uB},vB),rt=$L(jB),kt="/assets/logo-e43e9960.png",NB="/assets/brooklyn99-7c1a6c47.png",wB="/assets/stranger-things-31a579dc.png",kB="/assets/breaking-bad-482f4098.png",IB="/assets/naruto-54b60bd0.png",PB="/assets/alice-5ff5523e.png",SB="/assets/netflix-e3c8e0d2.png",CB="/assets/spotify-d09996b4.png",EB="/assets/disney-0c4f0934.png",TB="/assets/max-c00a4c65.png",_B="/assets/prime-video-72b85c51.png",DB="/assets/vix-ee8ed6dc.png",AB="/assets/Canva-e7a7d520.png",RB="/assets/ChatGPT-b8d712b1.png",MB="/assets/crunchyroll-562435fc.png",OB="/assets/redessociales-65298696.png",LB="/assets/dgo-7ac16535.png",VB="/assets/ligamax-7ac6606f.png",zB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAB4CAYAAADblO/uAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACnFJREFUeNrsnd912zYbh+Gc3FedoPQEVSYINUHUm+bS0gS2JlA8ga0JrF7qyvYElieIMkHYCapvAn+EQEb2sUgR1AsSIJ/nHKU9jkOKIH54/+AFcPby8qIAoNucIXQAhA4ACB0AEDoAIHQAQOgAgNABAKEDAEIHQOgAgNABAKEDAEIHAIQOAAgdABA6ACB0AIQOAAgdABA6AHRX6GdnZ7RiVVZJlP45Tj+D9PM5++k2/fxIPxv1NXqgkeA1UoYYoTcj8En652X6GR75TS36Rfq5TUW/peEAoYchcG29b9JPZPkvk/QzTcW+phEROkL3V+DaNb/L3PRT0GJf0qAIHaH7KfKnCm46YgeEjsjf8CkV+4YGRugIvbsiz2P2TyToEHpdPtCUYtw4ErkmSj9XNDGEadHNvLL+xK9+qq3WJqiMs8mu3zdwp/O0XRK6LRbdf6EbF1dbpwt1fNpJF5AsvBa9eZ6fyhTBuGaZtsWU7o/Q/Rb6KvmmTOGIrSi04KdexqjmmeYN3vF3YnWE7qfQZRJV2mX9y6vsc7PWPGeWtsEtEkDofgl9lQwzkUuIQVuykTdiXyU6BLlp+K5J+vznne7dxks6FLYkCN1HobuxeP6IfZX8VPblrRJ0e159lRzqlKM+lgRLCf2j4+/5pOTdWhMGrJJ2xW4WqkQt3V0nMjeOnitWb2dB6rDeDcgU+XjDR4dCcDmvrMV+n96jzSKSixbf23gXq7tBi/zU5OI86wPbTPSPlPG2ywdHItedxXWBR6SambsuyjvELb63KKtB8J1BNijdpd/3v8wLgs4IvbnpprggceOaSw/e3TiwvjbIBH+f5W4gaKHLxHh2g4qxsE1Z84EnIvscaJ9rqooQHMfo8xaeQ6/9/tTQvSaq2Xnzsli6Scqz3vty5igbhMYl7WQ8sa/RNyQYokVvL3YdZsm/vrjtxhX2KU7Xc9x6INBJN1Omq+f6b0vbERc+WNe9zUz0VRY2uHTbY9XelNrhAc5X9GzI10jPDExLYnZW5AUq9EnLz+Paql949v6G3vcwM61WtLvtFyQYmtCNtRu03vFdZeGNmznx7P2FkpC7LnlfuO+BWXRfRmdXWfiJh+8vDJGYCrkkWK+kA0hm3WOPnku78CPha156+P5CEokWetToYPU2ZzPI2stsbJJ/p54slPko1KADzzpdvKvCkiq79C8J9/q7RYF01ucCYzAsieFt39GX7HrDygNI3TLdw/UiSe0+V3Q9vWrPI4vuo2W5SRvvQagWXjoJpzvWIvtvXoAzr2ndohK3uE9okdTJ4uftP077i34Hs4pHY8Xqfc3I+gRhSl/PSYwee/ji80MUTreYsvG57kijXWcyU1BJtpHEuXK1Ig1sBs37lsqqnSIldF+zv2OBhRSSIp8W7g5jPI86K9LiQPpaUR/xcXCbZxt+EqMfGAl9Rbvwm1pro401nwuKvNwN05Vlq2QdkHhtPaxDSC4zXqv96bTbkkEkP812XNJ373bvoiP78/VB6KdsVCG1+GJpkaR57JzQy5O1Mhbdvm7+YedBFW8Hlsfuyy68gg8CLzGETpmLfVy5Y66SOyWTZEwsXfIuxulXhW3TtsU0oVTR++lM5V6fTmrJd6W5K63GMgPXk2Bsfm3ZmW07vt/VcaatL0usavsYsScH/qYzxTwSrntojTHZffTUm5nbzS1orPbzsHIxo+28qg4vVkmXXPayfQP/8ejbPhzwPCKE/tZShshYud9A4lr1kf3mHDcl/WPt2eaR/3b5lXxU4IpNx7YnvqiQj/kt84iO/Z4OT6bevS+EDjVYdOx5JoLXmnJYZH+Ens9z+lYnL/NsbG9cbMmrlZhKhxPHvIwhQpdHi2D2KxttXsJ9wPH+oeer2yG72uHevnO3otb5gc8VwwgsuiOSd0f/moowvaz0qSNiP8Vtt31+n2PLtTIFQA+NuOqm3FlXMkZIu32hHxaBmVbShQt3gbfppuH4838N3WdmMag0u87bZPlvlJ+bg/RW6MWdRce1q0TPZYe8oODUJJyvHo3Pswh3Fn1mXdLuQ4Qux7EYbZbFVaG68KcmmobC7dltjLs+LjEqi2yQ2hy5TpyFjghdKEYs75ja5VslC9XOQRCni7z52u2+r2GfFxqMoiXBPUSi1t22Y0dHf8OsREoCbM9HgWv8SbesbM2HBf1picjlhe5KkLMA21NiftguZOlW9Z0tRS77NdKWFrp9djWueF0tmnVQIpdx222EvqULi/RJKaLuCt1gI0gb1zQkq/4odB2bZBx7zPlF54WeOOnIJlO67JHb7kvYBPXzBlGXhf7DatSza4xZAC7qpqWdUn70XFbbArGNG3nnh5l0Wei2LmRc+TeNgHxfCdbWBgp9d92LQsY6U7ORUNtfWq9XMAPTF/+Fbp/5/WJ5/W+eu6ltuO3bnmfcy85004c33h/1HM3egHq3oe/KtvTaJPwOiT3fn/Bb4ZZl5r7jbFuzn8os6HJalSdZGbe2sNRxjevPlNyurNJueyIq4GqZ9wcFmusCkeanrzxkIc7m1yBgNsiIBcS1KLj3IPMq5rutxt+GGNWPi/LQdbd1IwfWu8f6O90m/Z0eKg4GzBWbfrE88g7y467us4/+/ysRC3r83rmw41efVkq7JYX+7NR931v1rsfni0rtwA4tr/lLIF+xqeklSdx7qxznW+SEbr9ryLjGPXybbkvENzg01yvbT23K7jXv2kznKz5lXs62hsCn2b9/rnVvc0T3bc3BRb9rfe7eo8smkl69ZhOnR7vspL1QZtkg4cPqtoWjjquX62qLfaH22WCzEsu9JS9yR5vM8I9q3V8nbVeJFtxEmR1mDrnKufV8VO93ol3Wes783DyzGOv1vd8bBnP953f3drzF99nLy8tpFzg7U6++bNHxNmUuqP1IaH8fF2x3I3FHzuaCljEnuL47Nvnl7z9GvsXoqkaMU+/ccTM4tD2HvEDkEAqyQi+eWyxiWHo8Ujlt7gu+rRmTARTxRzhCN9hmoeuVK5r4pq0pphnWHISJQhO6rfte/5BAUzHXdOHIkqw3NCT0xF+h27vv8Yl3nDYYr29UmBtigM+YUt1DQv/XX6EbbKadTnNZ9vOY6wZEPsJlBwdMCn4u1qdlp9f2I5ROsOli/aqJtpHIAo1Voqfcrhy8iNv0+2HJwYU11yWy3w/8jS4C+v1Ufbq16MbqNR/HGjGOBGObdTYIIXKQFvggmzt/EvCKW7Lo+7jje0Wrfi5e8WX2+76okQPQg5RO8P3T+2WgUNerzBfMHCqprXK09K9iLCmL7k7o5qGrVLDpevFzx4kO3ah/quIVS89Z467Fa9ehj0I/JXzcZl7krh+GIXTz4E9HRi822ocuCV2743MJkUsK/UMDj66X8RUJ+RaRQ8eoG4IuM3fdiUfp3qK/d6GjX3Ewa6qhexZd9+/LLEyMVPH08UbtV7IVngngjesOAP6D0AEQOgAgdABA6ACA0AEAoQMAQgcAhA4ACB0AoQMAQgcAhA4ACB0AEDoAIHQAQOgAgNABEDoAIHQAQOgAgNABAKEDAEIHAIQOAAgdAKEjdIDu838BBgAP9Pzi++BqOAAAAABJRU5ErkJggg==",BB="/assets/youtube-49ca55e1.png",FB="/assets/deezer-17be4fc1.png",UB="/assets/tidal-d3f361cb.png",$B="/assets/vpn-62bcb4e7.png",WB="/assets/wintv-4112ccf1.png",qB="/assets/applemusic-67f0cc24.png",HB="/assets/appletv-e2fd6c55.png",GB="/assets/iptv-a55016d0.png",QB="/assets/flujotv-4d1c58b0.png",KB="/assets/vikirakuten-116faf85.png",YB="/assets/pornhub-46f32d0d.png",XB="/assets/paramount-5ab87b8f.png",JB="/assets/licencias-80ba80ab.png",ZB="/assets/capcut-bc65a6c0.png",eF="/assets/duolingo-4d803f89.png",tF="/assets/buscapersonas-88e00efa.png",QI=v.createContext({theme:"dark",toggleTheme:()=>{}}),sF=({children:s})=>{const[t,r]=v.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{r(i=>{const l=i==="dark"?"light":"dark";return localStorage.setItem("theme",l),l})};return v.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(QI.Provider,{value:{theme:t,toggleTheme:a},children:e.jsx("div",{className:`min-h-screen font-inter transition-colors duration-300 ${t==="dark"?"bg-gradient-to-br from-gray-900 via-blue-950 to-gray-900 text-gray-100":"bg-gradient-to-br from-gray-100 via-blue-50 to-gray-100 text-gray-900"}`,children:s})})},br=[{src:NB,title:"Brooklyn Nine-Nine",description:"Comedia policial hilarante"},{src:wB,title:"Stranger Things",description:"Misterio y nostalgia ochentera"},{src:kB,title:"Breaking Bad",description:"A chemistry teacher's descent into the world of crime"},{src:IB,title:"Naruto",description:"Aventuras ninja épicas"},{src:PB,title:"Alice in Borderland",description:"Juego de supervivencia intenso"}],rF=[{name:"Netflix",logo:SB,route:"/netflix",color:"#E50914"},{name:"Spotify",logo:CB,route:"/spotify",color:"#1DB954"},{name:"Disney+",logo:EB,route:"/disney",color:"#1C4ED8"},{name:"Max",logo:TB,route:"/max",color:"#B5179E"},{name:"Prime Video",logo:_B,route:"/primevideo",color:"#00A8E1"},{name:"Vix",logo:DB,route:"/vix",color:"#FF5733"},{name:"Canva",logo:AB,route:"/canva",color:"#00C4B4"},{name:"ChatGPT",logo:RB,route:"/chatgpt",color:"#10A37F"},{name:"Crunchyroll",logo:MB,route:"/crunchyroll",color:"#F47521"},{name:"Redes Sociales",logo:OB,route:"/redessociales",color:"#3B5998"},{name:"Dgo",logo:LB,route:"/dgo",color:"#4CAF50"},{name:"Liga Max",logo:VB,route:"/ligamax",color:"#FFD700"},{name:"Movistar Play",logo:zB,route:"/movistarplay",color:"#00ADEF"},{name:"Youtube",logo:BB,route:"/youtube",color:"#FF0000"},{name:"Deezer",logo:FB,route:"/deezer",color:"#FEAA2D"},{name:"Tidal",logo:UB,route:"/tidal",color:"#00C7B7"},{name:"Vpn",logo:$B,route:"/vpn",color:"#4B0082"},{name:"Win Tv",logo:WB,route:"/wintv",color:"#4682B4"},{name:"Apple Music",logo:qB,route:"/applemusic",color:"#FA2C43"},{name:"Apple Tv",logo:HB,route:"/appletv",color:"#A3AAAE"},{name:"Iptv",logo:GB,route:"/iptv",color:"#8B008B"},{name:"Flujo Tv",logo:QB,route:"/flujotv",color:"#20B2AA"},{name:"Viki Rakuten",logo:KB,route:"/vikirakuten",color:"#D81B60"},{name:"Pornhub",logo:YB,route:"/pornhub",color:"#FFA500"},{name:"Paramount",logo:XB,route:"/paramount",color:"#0064D2"},{name:"Licencias",logo:JB,route:"/licencias",color:"#708090"},{name:"Cap cut",logo:ZB,route:"/capcut",color:"#00CED1"},{name:"Duolingo",logo:eF,route:"/duolingo",color:"#58CC02"},{name:"Busca Personas",logo:tF,route:"/buscapersonas",color:"#6A5ACD"}],aF=({isOpen:s,onClose:t,message:r})=>e.jsx(vy,{children:s&&e.jsx(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs(rt.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(qp,{className:"text-blue-500 dark:text-cyan-400 text-2xl"}),e.jsx("h3",{className:"text-xl font-bold dark:text-white text-gray-900",children:"Notificación"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:r}),e.jsx("button",{onClick:t,className:"w-full py-2 rounded-lg bg-blue-600 dark:bg-cyan-600 text-white hover:bg-blue-700 dark:hover:bg-cyan-700 transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-500",children:"Cerrar"})]})})}),nF=({isOpen:s,onClose:t,onSubmit:r,user:a})=>{const[i,l]=v.useState(0),[o,c]=v.useState(0),[d,h]=v.useState(""),[g,N]=v.useState(""),[k,E]=v.useState(""),y=async L=>{if(L.preventDefault(),!a){t();return}try{const _=X(I,"surveys"),A=me(_,we("userEmail","==",a.email));if(!(await jt(A)).empty){t();return}await r({websiteSatisfaction:i,providerSatisfaction:o,recommendedProvider:d,notRecommendedProvider:g,improvementSuggestions:k,timestamp:new Date,userEmail:a.email,username:a.name}),l(0),c(0),h(""),N(""),E(""),t()}catch(_){console.error("Error submitting survey:",_)}};return e.jsx(vy,{children:s&&e.jsx(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs(rt.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Hp,{className:"text-blue-500 dark:text-cyan-400 text-2xl"}),e.jsx("h3",{className:"text-xl font-bold dark:text-white text-gray-900",children:"Encuesta de Satisfacción"})]}),a?e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200 text-gray-700 mb-2",children:"¿Estás satisfecho con la página? (1-5)"}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(L=>e.jsx("button",{type:"button",onClick:()=>l(L),className:`w-10 h-10 rounded-full border-2 ${i===L?"bg-blue-600 dark:bg-cyan-600 text-white":"bg-gray-100 dark:bg-gray-800 dark:border-gray-700 border-gray-200"} flex items-center justify-center`,children:L},L))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200 text-gray-700 mb-2",children:"¿Estás satisfecho con los proveedores? (1-5)"}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(L=>e.jsx("button",{type:"button",onClick:()=>c(L),className:`w-10 h-10 rounded-full border-2 ${o===L?"bg-blue-600 dark:bg-cyan-600 text-white":"bg-gray-100 dark:bg-gray-800 dark:border-gray-700 border-gray-200"} flex items-center justify-center`,children:L},L))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200 text-gray-700 mb-2",children:"¿Qué proveedor recomiendas?"}),e.jsx("input",{type:"text",value:d,onChange:L=>h(L.target.value),className:"w-full py-2 px-3 rounded-lg bg-gray-100 dark:bg-gray-800 dark:text-gray-100 text-gray-900 focus:ring-2 focus:ring-blue-500 dark:focus:ring-cyan-500 focus:outline-none",placeholder:"Escribe el nombre del proveedor"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200 text-gray-700 mb-2",children:"¿Qué proveedor no recomiendas?"}),e.jsx("input",{type:"text",value:g,onChange:L=>N(L.target.value),className:"w-full py-2 px-3 rounded-lg bg-gray-100 dark:bg-gray-800 dark:text-gray-100 text-gray-900 focus:ring-2 focus:ring-blue-500 dark:focus:ring-cyan-500 focus:outline-none",placeholder:"Escribe el nombre del proveedor"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200 text-gray-700 mb-2",children:"¿Qué mejorarías de la página?"}),e.jsx("textarea",{value:k,onChange:L=>E(L.target.value),className:"w-full py-2 px-3 rounded-lg bg-gray-100 dark:bg-gray-800 dark:text-gray-100 text-gray-900 focus:ring-2 focus:ring-blue-500 dark:focus:ring-cyan-500 focus:outline-none",placeholder:"Escribe tus sugerencias",rows:"4"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:t,className:"w-full py-2 rounded-lg bg-gray-300 dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-400 dark:hover:bg-gray-600 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"w-full py-2 rounded-lg bg-blue-600 dark:bg-cyan-600 text-white hover:bg-blue-700 dark:hover:bg-cyan-700 transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-500",disabled:i===0||o===0,children:"Enviar"})]})]}):e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Por favor, inicia sesión para completar la encuesta."})]})})})},iF=()=>{const[s,t]=v.useState(0),[r,a]=v.useState(null),[i,l]=v.useState(0),[o,c]=v.useState("user"),[d,h]=v.useState(""),[g,N]=v.useState([]),[k,E]=v.useState({isOpen:!1,message:""}),[y,L]=v.useState(!1),[_,A]=v.useState(!1),[z,O]=v.useState(!1),K=Pt(),{theme:G,toggleTheme:H}=v.useContext(QI);v.useEffect(()=>{const $=setInterval(()=>{t(pe=>(pe+1)%br.length)},5e3);return()=>clearInterval($)},[]),v.useEffect(()=>(document.body.style.overflow=z?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[z]),v.useEffect(()=>{(async()=>{if(Ke.currentUser)try{const pe=X(I,"users"),Me=me(pe,we("email","==",Ke.currentUser.email)),De=await jt(Me);if(!De.empty){const ye=De.docs[0].data();a({name:ye.username||"Usuario",email:Ke.currentUser.email}),l(ye.balance||0),c(ye.role||"user")}const he=await st(B(I,"notifications","adminMessage"));if(he.exists()){const ye=he.data();E({isOpen:!0,message:ye.message||"Mensaje del administrador no disponible."})}}catch(pe){console.error("Error al cargar datos:",pe),E({isOpen:!0,message:"Hubo un error al cargar los datos. Por favor, intenta de nuevo."})}})()},[]);const R=async()=>{try{const $=await st(B(I,"notifications","adminMessage"));if($.exists()){const pe=$.data();E({isOpen:!0,message:pe.message||"Mensaje del administrador no disponible."})}else E({isOpen:!0,message:"No hay notificaciones del administrador en este momento."})}catch($){console.error("Error al cargar notificación:",$),E({isOpen:!0,message:"Error al cargar la notificación. Por favor, intenta de nuevo."})}},u=async $=>{try{await En(X(I,"surveys"),$),E({isOpen:!0,message:"¡Gracias por tu opinión! La encuesta se ha enviado correctamente."})}catch(pe){console.error("Error al enviar la encuesta:",pe),E({isOpen:!0,message:"Error al enviar la encuesta. Por favor, intenta de nuevo."})}},W=async()=>{try{await Ke.signOut(),a(null),K("/login")}catch($){console.error("Error al cerrar sesión:",$),E({isOpen:!0,message:"Error al cerrar sesión. Por favor, intenta de nuevo."})}},U=()=>{K({user:"/dashboard/user",affiliate:"/dashboard/affiliate",provider:"/dashboard/provider",admin:"/dashboard/admin"}[o]||"/dashboard/user")},ee=async $=>{if($.preventDefault(),!d.trim()){N([]);return}try{const pe=X(I,"products"),Me=me(pe,we("name",">=",d.toLowerCase()),we("name","<=",d.toLowerCase()+"")),he=(await jt(Me)).docs.map(ye=>({id:ye.id,...ye.data()}));N(he)}catch(pe){console.error("Error al buscar productos:",pe),E({isOpen:!0,message:"Error al realizar la búsqueda. Por favor, intenta de nuevo."}),N([])}},te=()=>{A($=>!$)},Y=()=>{O($=>!$)};return e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(aF,{isOpen:k.isOpen,onClose:()=>E({...k,isOpen:!1}),message:k.message}),e.jsx(nF,{isOpen:y,onClose:()=>L(!1),onSubmit:u,user:r}),e.jsxs(rt.header,{initial:{y:-100},animate:{y:0},transition:{type:"spring",stiffness:120},className:`fixed top-0 left-0 right-0 z-50 border-b dark:border-gray-800 border-gray-200 shadow-lg ${G==="dark"?"bg-gray-900":"bg-white"}`,children:[e.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(rt.img,{whileHover:{scale:1.1},src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:`text-xl font-bold ${G==="dark"?"text-cyan-300":"text-blue-600"}`,children:"BlackStreaming"})]}),e.jsx("div",{className:"hidden lg:flex justify-center flex-1",children:e.jsxs(rt.div,{className:"relative max-w-lg w-full",initial:{scale:.9},animate:{scale:1},children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full py-3 px-5 pr-12 rounded-full bg-gray-100 dark:bg-gray-800 dark:text-gray-100 text-gray-900 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 dark:focus:ring-cyan-500 focus:outline-none shadow-sm transition-all",value:d,onChange:$=>h($.target.value)}),e.jsx(rt.button,{whileHover:{scale:1.1},onClick:ee,className:"absolute right-3 top-1/2 -translate-y-1/2 dark:text-cyan-400 text-blue-600","aria-label":"Buscar",children:e.jsx(Gp,{size:20})})]})}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:Y,className:"lg:hidden p-2 rounded-full dark:text-cyan-300 text-blue-600 dark:hover:bg-gray-800 hover:bg-gray-100","aria-label":"Toggle menu",children:z?e.jsx(Rv,{size:22}):e.jsx(LT,{size:22})}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-3",children:[e.jsx(rt.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:H,className:"p-2 rounded-full dark:text-cyan-300 text-blue-600 dark:hover:bg-gray-800 hover:bg-gray-100","aria-label":"Cambiar tema",children:G==="dark"?e.jsx(ox,{size:22}):e.jsx(nx,{size:22})}),r?e.jsxs(e.Fragment,{children:[e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:R,className:"p-2 rounded-full dark:bg-gray-800 bg-gray-100 dark:hover:bg-gray-700 hover:bg-gray-200","aria-label":"Ver notificaciones",children:e.jsx(qp,{className:"dark:text-cyan-400 text-blue-600",size:22})}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>L(!0),className:"p-2 rounded-full dark:bg-gray-800 bg-gray-100 dark:hover:bg-gray-700 hover:bg-gray-200","aria-label":"Abrir encuesta",children:e.jsx(Hp,{className:"dark:text-cyan-400 text-blue-600",size:22})}),e.jsx(rt.span,{className:"text-base font-medium dark:text-cyan-300 text-blue-700",initial:{opacity:0},animate:{opacity:1},children:r.name}),e.jsxs(rt.span,{className:"text-base font-medium dark:bg-gray-800 bg-gray-100 dark:text-cyan-200 text-blue-800 px-4 py-1.5 rounded-full",whileHover:{scale:1.05},children:["S/ ",i.toFixed(2)]}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:U,className:"p-2 rounded-full dark:bg-gray-800 bg-gray-100 dark:hover:bg-gray-700 hover:bg-gray-200","aria-label":"Panel de control",children:e.jsx(Dv,{className:"dark:text-cyan-400 text-blue-600",size:22})}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:te,className:`p-2 rounded-full ${_?"bg-red-600 dark:bg-red-500 hover:bg-red-700 dark:hover:bg-red-600":"dark:bg-gray-800 bg-gray-100 dark:hover:bg-gray-700 hover:bg-gray-200"}`,"aria-label":_?"Desactivar modo live":"Activar modo live",children:e.jsx(_v,{className:_?"text-white":"dark:text-cyan-400 text-blue-600",size:22})}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:W,className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white bg-gradient-to-r from-red-600 to-red-700 shadow-md hover:from-red-700 hover:to-red-800 transition-all duration-300",children:[e.jsx(Av,{size:18}),e.jsx("span",{children:"Salir"})]})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:()=>K("/login"),className:`inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 ${G==="dark"?"bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`,"aria-label":"Ingresar",children:[e.jsx(ix,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsx(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:()=>K("/register"),className:`inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 ${G==="dark"?"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600":"bg-gradient-to-r from-blue-400 to-indigo-400 hover:from-blue-500 hover:to-indigo-500"}`,"aria-label":"Registrarse",children:e.jsx("span",{children:"Registrarse"})})]})]})]}),e.jsx(vy,{children:z&&e.jsx(rt.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:300,damping:30},className:"lg:hidden fixed top-0 left-0 h-full w-64 bg-white dark:bg-gray-900 z-50 shadow-2xl border-r dark:border-gray-700 border-gray-200",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 border-gray-200",children:[e.jsx("span",{className:"text-xl font-bold dark:text-cyan-300 text-blue-600",children:"Menú"}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:Y,className:"p-2 rounded-full dark:text-cyan-300 text-blue-600 dark:hover:bg-gray-800 hover:bg-gray-100","aria-label":"Cerrar menú",children:e.jsx(Rv,{size:22})})]}),e.jsxs("div",{className:"flex flex-col p-4 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full py-3 px-5 pr-12 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-cyan-500 focus:outline-none",value:d,onChange:$=>h($.target.value)}),e.jsx(rt.button,{whileHover:{scale:1.1},onClick:ee,className:"absolute right-3 top-1/2 -translate-y-1/2 dark:text-cyan-400 text-blue-600","aria-label":"Buscar",children:e.jsx(Gp,{size:20})})]}),r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-base font-medium dark:text-cyan-300 text-blue-600",children:r.name}),e.jsxs("span",{className:"text-base font-medium bg-gray-100 dark:bg-gray-800 dark:text-cyan-200 text-blue-800 px-4 py-1.5 rounded-full",children:["S/ ",i.toFixed(2)]})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{R(),Y()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[e.jsx(qp,{size:18}),e.jsx("span",{children:"Notificaciones"})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{L(!0),Y()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[e.jsx(Hp,{size:18}),e.jsx("span",{children:"Encuesta"})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{U(),Y()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[e.jsx(Dv,{size:18}),e.jsx("span",{children:"Panel de control"})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{te(),Y()},className:`flex items-center space-x-2 text-base text-left ${_?"text-red-500 dark:text-red-400":"dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600"}`,children:[e.jsx(_v,{size:18}),e.jsx("span",{children:_?"Desactivar modo live":"Activar modo live"})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{W(),Y()},className:"flex items-center space-x-2 text-base text-left text-red-500 dark:text-red-400 hover:text-red-600 dark:hover:text-red-300",children:[e.jsx(Av,{size:18}),e.jsx("span",{children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{K("/login"),Y()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[e.jsx(ix,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsx(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{K("/register"),Y()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:e.jsx("span",{children:"Registrarse"})})]}),e.jsxs(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{H(),Y()},className:"flex items-center space-x-2 text-base text-left dark:text-gray-200 text-gray-700 hover:dark:text-cyan-300 hover:text-blue-600",children:[G==="dark"?e.jsx(ox,{size:18}):e.jsx(nx,{size:18}),e.jsx("span",{children:"Cambiar tema"})]})]})]})})})]}),e.jsxs("main",{className:"flex-grow pt-24",children:[g.length>0&&e.jsxs(rt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"py-12 px-6 container mx-auto",children:[e.jsx("h2",{className:`text-3xl font-bold mb-6 ${G==="dark"?"text-white":"text-gray-900"}`,children:"Resultados de búsqueda"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map($=>{var pe;return e.jsxs(rt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.05,boxShadow:"0 10px 20px rgba(0,0,0,0.1)"},className:`p-6 rounded-lg shadow-md border-2 ${G==="dark"?"bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700":"bg-gradient-to-br from-white to-gray-100 border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-2 ${G==="dark"?"text-cyan-300":"text-blue-600"}`,children:$.name}),e.jsx("p",{className:`text-base line-clamp-2 mb-2 ${G==="dark"?"text-gray-300":"text-gray-600"}`,children:$.description}),e.jsxs("p",{className:`text-base font-medium mb-1 ${G==="dark"?"text-gray-200":"text-gray-700"}`,children:["Plataforma: ",$.platform]}),e.jsxs("p",{className:`text-base font-bold ${G==="dark"?"text-cyan-400":"text-blue-700"}`,children:["Precio: S/ ",(pe=$.price)==null?void 0:pe.toFixed(2)]})]},$.id)})})]}),d.trim()&&g.length===0&&e.jsx(rt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"py-12 px-6 container mx-auto text-center",children:e.jsxs("p",{className:`text-lg ${G==="dark"?"text-gray-300":"text-gray-600"}`,children:['No se encontraron productos para "',d,'".']})}),e.jsxs(rt.section,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"py-8 px-6 text-center",children:[e.jsx("h1",{className:`text-4xl sm:text-5xl md:text-6xl font-extrabold tracking-tight ${G==="dark"?"text-white":"text-gray-900"} bg-clip-text bg-gradient-to-r dark:from-cyan-400 dark:to-blue-500 from-blue-600 to-indigo-600`,children:"Tus plataformas favoritas al instante"}),e.jsx("p",{className:`mt-4 text-lg sm:text-xl ${G==="dark"?"text-gray-300":"text-gray-600"} max-w-3xl mx-auto`,children:"Accede a todo tu entretenimiento y herramientas con BlackStreaming."})]}),e.jsxs("section",{className:"relative py-6 px-6 sm:px-8",children:[e.jsxs(rt.div,{className:"flex justify-center items-center space-x-4 perspective-1000",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx(rt.div,{className:"hidden lg:block w-48 h-64 rounded-2xl overflow-hidden shadow-xl transform -rotate-y-15",initial:{x:-100,opacity:0},animate:{x:0,opacity:.8},transition:{duration:.5},children:e.jsx("img",{src:br[(s-1+br.length)%br.length].src,alt:"Programa anterior",className:"w-full h-full object-cover scale-110"})}),e.jsxs(rt.div,{className:"relative rounded-2xl overflow-hidden shadow-2xl dark:border-cyan-500/20 border-blue-200/20 border",initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:100},children:[e.jsx("img",{src:br[s].src,alt:"Programa destacado",className:"w-72 h-96 sm:w-96 sm:h-[28rem] object-cover"}),e.jsx("div",{className:`absolute inset-0 ${G==="dark"?"bg-gradient-to-t from-gray-900/80 to-transparent":"bg-gradient-to-t from-gray-900/50 to-transparent"}`}),e.jsxs(rt.div,{className:"absolute bottom-0 w-full p-6",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold ${G==="dark"?"text-white":"text-gray-100"} drop-shadow-lg`,children:br[s].title}),e.jsx("p",{className:`text-sm ${G==="dark"?"text-gray-300":"text-gray-200"}`,children:br[s].description})]})]}),e.jsx(rt.div,{className:"hidden lg:block w-48 h-64 rounded-2xl overflow-hidden shadow-xl transform rotate-y-15",initial:{x:100,opacity:0},animate:{x:0,opacity:.8},transition:{duration:.5},children:e.jsx("img",{src:br[(s+1)%br.length].src,alt:"Próximo programa",className:"w-full h-full object-cover scale-110"})}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t($=>($-1+br.length)%br.length),className:"absolute left-4 top-1/2 -translate-y-1/2 dark:bg-gray-900/60 bg-white/60 dark:hover:bg-cyan-500/60 hover:bg-blue-200/60 dark:border-cyan-500/20 border-blue-200/20 backdrop-blur-md p-3 rounded-full border","aria-label":"Programa anterior",children:e.jsx(VT,{className:"dark:text-cyan-300 text-blue-600 text-xl"})}),e.jsx(rt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t($=>($+1)%br.length),className:"absolute right-4 top-1/2 -translate-y-1/2 dark:bg-gray-900/60 bg-white/60 dark:hover:bg-cyan-500/60 hover:bg-blue-200/60 dark:border-cyan-500/20 border-blue-200/20 backdrop-blur-md p-3 rounded-full border","aria-label":"Próximo programa",children:e.jsx(zT,{className:"dark:text-cyan-300 text-blue-600 text-xl"})})]}),e.jsx("div",{className:"flex justify-center space-x-2 mt-6",children:br.map(($,pe)=>e.jsx(rt.div,{whileHover:{scale:1.2},className:`w-2 h-2 rounded-full transition-colors ${pe===s?"dark:bg-cyan-400 bg-blue-600":"dark:bg-gray-600 bg-gray-300"}`,"aria-label":`Ir a ${pe+1}`},pe))})]}),e.jsxs(rt.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},className:"py-16 container mx-auto px-6",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx(rt.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:`text-3xl md:text-4xl font-bold ${G==="dark"?"text-white":"text-gray-900"} mb-2`,children:"Plataformas de Streaming"}),e.jsx(rt.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:`${G==="dark"?"text-gray-300":"text-gray-600"} max-w-2xl mx-auto`,children:"Acceso a todas tus plataformas favoritas en un solo lugar."})]}),e.jsx(rt.div,{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},children:rF.map($=>e.jsx(rt.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.05,boxShadow:"0 10px 20px rgba(0,0,0,0.2)"},className:"w-full h-32",children:e.jsxs(b,{to:$.route,className:`group relative flex items-center justify-center h-full rounded-lg shadow-lg transition-all duration-300 ${G==="dark"?"bg-gradient-to-br from-gray-800 to-gray-900":"bg-gradient-to-br from-white to-gray-100"} border-2`,style:{borderImage:`linear-gradient(to right, ${$.color}, transparent) 1`},"aria-label":`Ir a ${$.name}`,children:[e.jsxs("div",{className:"flex items-center space-x-4 p-4",children:[e.jsx(rt.img,{whileHover:{scale:1.1},src:$.logo,alt:$.name,className:"w-20 h-20 object-contain",style:{transform:_?"scaleX(-1)":"scaleX(1)"}}),e.jsx("span",{className:`font-semibold text-center text-base ${G==="dark"?"text-gray-100":"text-gray-800"}`,children:$.name})]}),e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity duration-300",style:{backgroundColor:$.color}})]})},$.name))})]}),!r&&e.jsx(rt.section,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"py-16 dark:bg-gradient-to-r dark:from-gray-900 dark:to-blue-950 bg-gradient-to-r from-blue-50 to-gray-100",children:e.jsxs("div",{className:"container mx-auto px-6 text-center",children:[e.jsx(rt.h2,{initial:{scale:.9},animate:{scale:1},className:`text-2xl md:text-3xl font-bold ${G==="dark"?"text-white":"text-gray-900"} mb-4`,children:"¿Listo para adquirir?"}),e.jsx("p",{className:`${G==="dark"?"text-gray-300":"text-gray-600"} max-w-2xl mx-auto mb-6`,children:"Únete a miles de usuarios satisfechos accediendo a todas tus plataformas favoritas en un solo lugar."}),e.jsx(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K("/register"),className:`inline-flex items-center space-x-2 px-6 py-3 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 ${G==="dark"?"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600":"bg-gradient-to-r from-blue-400 to-indigo-400 hover:from-blue-500 hover:to-indigo-500"}`,children:e.jsx("span",{children:"Regístrate"})})]})})]}),e.jsx("footer",{className:"bg-gray-900 dark:bg-gray-900 bg-white dark:bg-gray-900 border-t dark:border-gray-800 border-gray-200 py-12",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-6 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:`text-base font-semibold ${G==="dark"?"text-cyan-300":"text-blue-600"}`,children:"BlackStreaming"})]}),e.jsxs("div",{className:`text-base ${G==="dark"?"text-gray-400":"text-gray-600"} text-center`,children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-base ${G==="dark"?"text-gray-400":"text-gray-600"} text-center`,children:"Desarrollado por Saiph"})]})})})]})},oF=()=>e.jsx(sF,{children:e.jsx(iF,{})});function $t(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(s)}function Je(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(s)}function KI(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(s)}function Bo(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(s)}function lt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(s)}function su(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(s)}function Vc(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(s)}function Gh(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(s)}function Vt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(s)}function lF(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(s)}function Qh(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},child:[]}]})(s)}function Cs(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(s)}function Rw(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(s)}function Ty(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(s)}function YI(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(s)}function XI(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(s)}function Te(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(s)}function Ue(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"},child:[]},{tag:"line",attr:{x1:"7",y1:"2",x2:"7",y2:"22"},child:[]},{tag:"line",attr:{x1:"17",y1:"2",x2:"17",y2:"22"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"2",y1:"7",x2:"7",y2:"7"},child:[]},{tag:"line",attr:{x1:"2",y1:"17",x2:"7",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"17",x2:"22",y2:"17"},child:[]},{tag:"line",attr:{x1:"17",y1:"7",x2:"22",y2:"7"},child:[]}]})(s)}function ct(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(s)}function Rm(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(s)}function $e(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(s)}function dt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(s)}function JI(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(s)}function Ct(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(s)}function cF(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(s)}function zt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(s)}function Yr(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(s)}function Wt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(s)}function _e(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 18V5l12-2v13"},child:[]},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"16",r:"3"},child:[]}]})(s)}function ut(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 19l7-7 3 3-7 7-3-3z"},child:[]},{tag:"path",attr:{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"},child:[]},{tag:"path",attr:{d:"M2 2l7.586 7.586"},child:[]},{tag:"circle",attr:{cx:"11",cy:"11",r:"2"},child:[]}]})(s)}function ZI(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(s)}function xt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polygon",attr:{points:"10 8 16 12 10 16 10 8"},child:[]}]})(s)}function Mw(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(s)}function eP(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(s)}function at(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(s)}function zc(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(s)}function et(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(s)}function Fe(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(s)}function Kh(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(s)}function Ow(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(s)}function z0(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(s)}function le(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"15",rx:"2",ry:"2"},child:[]},{tag:"polyline",attr:{points:"17 2 12 7 7 2"},child:[]}]})(s)}function qt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(s)}function Xe(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(s)}function ec(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(s)}function We(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(s)}function bt(s){return nt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(s)}const tP=v.createContext({theme:"dark",toggleTheme:()=>{}}),dF=({children:s})=>{const[t,r]=v.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{console.log("Toggling theme from",t);const i=t==="dark"?"light":"dark";r(i),localStorage.setItem("theme",i),console.log("Theme set to",i)};return v.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(tP.Provider,{value:{theme:t,toggleTheme:a},children:s})},uF=()=>{const[s,t]=v.useState(""),[r,a]=v.useState(""),[i,l]=v.useState(null),[o,c]=v.useState(!1),d=Pt(),{theme:h,toggleTheme:g}=v.useContext(tP),N=async E=>{E.preventDefault(),l(null);try{const y=X(I,"users"),L=me(y,we("username","==",s)),_=await jt(L);if(_.empty){l("Nombre de usuario no encontrado.");return}const O=_.docs[0].data().email,G=(await HM(Ke,O,r)).user;d("/")}catch{l("Usuario o contraseña incorrectos.")}},k=()=>{l(null)};return e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${h==="dark"?"bg-gradient-to-b from-gray-900 via-blue-950 to-gray-900 text-gray-200":"bg-gradient-to-b from-gray-100 via-blue-50 to-gray-100 text-gray-900"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${h==="dark"?"border-gray-800/50 bg-gray-900/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-6 py-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex items-center justify-center lg:justify-start",children:e.jsxs(b,{to:"/",className:"flex items-center space-x-3",children:[e.jsx(rt.img,{whileHover:{scale:1.1},src:kt,alt:"BlackStreaming",className:"h-12 w-auto transition-transform"}),e.jsx("span",{className:`text-2xl font-bold bg-gradient-to-r ${h==="dark"?"from-cyan-400/50 to-blue-600/50 text-cyan-400":"from-blue-500/50 to-indigo-500/50 text-blue-600"} bg-clip-text`,children:"BlackStreaming"})]})}),e.jsx(rt.div,{animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,repeatType:"loop"},className:"text-xs font-semibold text-white bg-cyan-500/20 rounded-full px-3 py-1",children:"V 2.0"}),e.jsxs("div",{className:"flex items-center justify-center lg:justify-end space-x-3",children:[e.jsx(rt.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:g,className:`p-2 rounded-full ${h==="dark"?"text-cyan-400 hover:bg-gray-700/50":"text-blue-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:h==="dark"?e.jsx(ox,{size:22}):e.jsx(nx,{size:22})}),e.jsxs(b,{to:"/login",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700",children:[e.jsx(ix,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsxs(b,{to:"/register",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600",children:[e.jsx(m4,{size:18}),e.jsx("span",{children:"Registrarse"})]})]})]})}),e.jsx("main",{className:"flex-grow flex items-center justify-center p-6",children:e.jsxs("div",{className:`backdrop-blur-md rounded-2xl shadow-2xl p-12 w-full max-w-lg border-2 ${h==="dark"?"bg-gradient-to-br from-gray-800/60 to-gray-900/60 border-cyan-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-blue-500/20"}`,children:[e.jsx(rt.div,{className:"flex justify-center mb-6",children:e.jsx(rt.img,{whileHover:{scale:1.05},src:kt,alt:"BlackStreaming",className:"h-24 sm:h-32 w-auto transition-transform"})}),e.jsxs("h1",{className:`text-3xl font-bold mb-10 text-center ${h==="dark"?"text-white":"text-gray-900"}`,children:["Black",e.jsx("span",{className:h==="dark"?"text-cyan-400":"text-blue-600",children:"Streaming"})]}),e.jsx("p",{className:`text-sm text-center mb-10 ${h==="dark"?"text-gray-400":"text-gray-600"}`,children:"Bienvenido de nuevo. Inicia sesión para continuar."}),i&&e.jsxs("div",{className:"mb-6 p-3 bg-gradient-to-r from-red-900/80 to-red-800/80 border-l-4 border-red-500 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Je,{className:"mr-2 text-red-400"}),e.jsx("span",{className:"text-red-300",children:i})]}),e.jsx("button",{onClick:k,className:"text-red-400 hover:text-red-300",children:e.jsx(bt,{size:18})})]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${h==="dark"?"text-gray-100":"text-gray-900"}`,children:"Nombre de Usuario"}),e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:`absolute top-3 left-3 ${h==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",placeholder:"Tu nombre de usuario",value:s,onChange:E=>t(E.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${h==="dark"?"text-white":"text-gray-900"} border ${h==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${h==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${h==="dark"?"text-gray-100":"text-gray-900"}`,children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(JI,{className:`absolute top-3 left-3 ${h==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:o?"text":"password",placeholder:"••••••••",value:r,onChange:E=>a(E.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${h==="dark"?"text-white":"text-gray-900"} border ${h==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${h==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,required:!0}),e.jsx("button",{type:"button",onClick:()=>c(!o),className:`absolute top-3 right-3 ${h==="dark"?"text-gray-400 hover:text-cyan-400":"text-gray-600 hover:text-blue-600"} transition-colors`,"aria-label":o?"Ocultar contraseña":"Mostrar contraseña",children:o?e.jsx(YI,{size:18}):e.jsx(XI,{size:18})})]})]}),e.jsx(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"w-full py-3 bg-gradient-to-r from-cyan-400 to-blue-600 hover:from-cyan-500 hover:to-blue-700 text-white font-medium rounded-xl shadow-lg transition-all duration-300",children:"Iniciar Sesión"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs(b,{to:"/register",className:`flex items-center justify-center transition-all text-lg ${h==="dark"?"text-gray-400 hover:text-cyan-400":"text-gray-600 hover:text-blue-600"}`,children:[e.jsx(KI,{className:"mr-1"})," ¿No tienes una cuenta? Regístrate"]})})]})}),e.jsx("footer",{className:`backdrop-blur-md border-t py-6 ${h==="dark"?"border-gray-800/50":"border-gray-300/50"}`,children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:`text-sm font-semibold ${h==="dark"?"text-cyan-400":"text-blue-600"}`,children:"BlackStreaming"})]}),e.jsxs("div",{className:`text-sm text-center ${h==="dark"?"text-gray-400":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-sm text-center ${h==="dark"?"text-gray-400":"text-gray-600"}`,children:"Desarrollado por Saiph"})]})})})]})},xF=()=>e.jsx(dF,{children:e.jsx(uF,{})}),mF=[{code:"+93",name:"Afghanistan",flag:"🇦🇫"},{code:"+355",name:"Albania",flag:"🇦🇱"},{code:"+213",name:"Algeria",flag:"🇩🇿"},{code:"+376",name:"Andorra",flag:"🇦🇩"},{code:"+244",name:"Angola",flag:"🇦🇴"},{code:"+1",name:"Antigua and Barbuda",flag:"🇦🇬"},{code:"+54",name:"Argentina",flag:"🇦🇷"},{code:"+374",name:"Armenia",flag:"🇦🇲"},{code:"+61",name:"Australia",flag:"🇦🇺"},{code:"+43",name:"Austria",flag:"🇦🇹"},{code:"+994",name:"Azerbaijan",flag:"🇦🇿"},{code:"+1",name:"Bahamas",flag:"🇧🇸"},{code:"+973",name:"Bahrain",flag:"🇧🇭"},{code:"+880",name:"Bangladesh",flag:"🇧🇩"},{code:"+1",name:"Barbados",flag:"🇧🇧"},{code:"+375",name:"Belarus",flag:"🇧🇾"},{code:"+32",name:"Belgium",flag:"🇧🇪"},{code:"+501",name:"Belize",flag:"🇧🇿"},{code:"+229",name:"Benin",flag:"🇧🇯"},{code:"+975",name:"Bhutan",flag:"🇧🇹"},{code:"+591",name:"Bolivia",flag:"🇧🇴"},{code:"+387",name:"Bosnia and Herzegovina",flag:"🇧🇦"},{code:"+267",name:"Botswana",flag:"🇧🇼"},{code:"+55",name:"Brazil",flag:"🇧🇷"},{code:"+673",name:"Brunei",flag:"🇧🇳"},{code:"+359",name:"Bulgaria",flag:"🇧🇬"},{code:"+226",name:"Burkina Faso",flag:"🇧🇫"},{code:"+257",name:"Burundi",flag:"🇧🇮"},{code:"+855",name:"Cambodia",flag:"🇰🇭"},{code:"+237",name:"Cameroon",flag:"🇨🇲"},{code:"+1",name:"Canada",flag:"🇨🇦"},{code:"+238",name:"Cape Verde",flag:"🇨🇻"},{code:"+236",name:"Central African Republic",flag:"🇨🇫"},{code:"+235",name:"Chad",flag:"🇹🇩"},{code:"+56",name:"Chile",flag:"🇨🇱"},{code:"+86",name:"China",flag:"🇨🇳"},{code:"+57",name:"Colombia",flag:"🇨🇴"},{code:"+269",name:"Comoros",flag:"🇰🇲"},{code:"+243",name:"Congo, Democratic Republic",flag:"🇨🇩"},{code:"+242",name:"Congo, Republic",flag:"🇨🇬"},{code:"+506",name:"Costa Rica",flag:"🇨🇷"},{code:"+385",name:"Croatia",flag:"🇭🇷"},{code:"+53",name:"Cuba",flag:"🇨🇺"},{code:"+357",name:"Cyprus",flag:"🇨🇾"},{code:"+420",name:"Czech Republic",flag:"🇨🇿"},{code:"+45",name:"Denmark",flag:"🇩🇰"},{code:"+253",name:"Djibouti",flag:"🇩🇯"},{code:"+1",name:"Dominica",flag:"🇩🇲"},{code:"+1",name:"Dominican Republic",flag:"🇩🇴"},{code:"+670",name:"East Timor",flag:"🇹🇱"},{code:"+593",name:"Ecuador",flag:"🇪🇨"},{code:"+20",name:"Egypt",flag:"🇪🇬"},{code:"+503",name:"El Salvador",flag:"🇸🇻"},{code:"+240",name:"Equatorial Guinea",flag:"🇬🇶"},{code:"+291",name:"Eritrea",flag:"🇪🇷"},{code:"+372",name:"Estonia",flag:"🇪🇪"},{code:"+251",name:"Ethiopia",flag:"🇪🇹"},{code:"+679",name:"Fiji",flag:"🇫🇯"},{code:"+358",name:"Finland",flag:"🇫🇮"},{code:"+33",name:"France",flag:"🇫🇷"},{code:"+241",name:"Gabon",flag:"🇬🇦"},{code:"+220",name:"Gambia",flag:"🇬🇲"},{code:"+995",name:"Georgia",flag:"🇬🇪"},{code:"+49",name:"Germany",flag:"🇩🇪"},{code:"+233",name:"Ghana",flag:"🇬🇭"},{code:"+30",name:"Greece",flag:"🇬🇷"},{code:"+1",name:"Grenada",flag:"🇬🇩"},{code:"+502",name:"Guatemala",flag:"🇬🇹"},{code:"+224",name:"Guinea",flag:"🇬🇳"},{code:"+245",name:"Guinea-Bissau",flag:"🇬🇼"},{code:"+592",name:"Guyana",flag:"🇬🇾"},{code:"+509",name:"Haiti",flag:"🇭🇹"},{code:"+504",name:"Honduras",flag:"🇭🇳"},{code:"+852",name:"Hong Kong",flag:"🇭🇰"},{code:"+36",name:"Hungary",flag:"🇭🇺"},{code:"+354",name:"Iceland",flag:"🇮🇸"},{code:"+91",name:"India",flag:"🇮🇳"},{code:"+62",name:"Indonesia",flag:"🇮🇩"},{code:"+98",name:"Iran",flag:"🇮🇷"},{code:"+964",name:"Iraq",flag:"🇮🇶"},{code:"+353",name:"Ireland",flag:"🇮🇪"},{code:"+972",name:"Israel",flag:"🇮🇱"},{code:"+39",name:"Italy",flag:"🇮🇹"},{code:"+1",name:"Jamaica",flag:"🇯🇲"},{code:"+81",name:"Japan",flag:"🇯🇵"},{code:"+962",name:"Jordan",flag:"🇯🇴"},{code:"+7",name:"Kazakhstan",flag:"🇰🇿"},{code:"+254",name:"Kenya",flag:"🇰🇪"},{code:"+686",name:"Kiribati",flag:"🇰🇮"},{code:"+965",name:"Kuwait",flag:"🇰🇼"},{code:"+996",name:"Kyrgyzstan",flag:"🇰🇬"},{code:"+856",name:"Laos",flag:"🇱🇦"},{code:"+371",name:"Latvia",flag:"🇱🇻"},{code:"+961",name:"Lebanon",flag:"🇱🇧"},{code:"+266",name:"Lesotho",flag:"🇱🇸"},{code:"+231",name:"Liberia",flag:"🇱🇷"},{code:"+218",name:"Libya",flag:"🇱🇾"},{code:"+423",name:"Liechtenstein",flag:"🇱🇮"},{code:"+370",name:"Lithuania",flag:"🇱🇹"},{code:"+352",name:"Luxembourg",flag:"🇱🇺"},{code:"+853",name:"Macau",flag:"🇲🇴"},{code:"+389",name:"Macedonia",flag:"🇲🇰"},{code:"+261",name:"Madagascar",flag:"🇲🇬"},{code:"+265",name:"Malawi",flag:"🇲🇼"},{code:"+60",name:"Malaysia",flag:"🇲🇾"},{code:"+960",name:"Maldives",flag:"🇲🇻"},{code:"+223",name:"Mali",flag:"🇲🇱"},{code:"+356",name:"Malta",flag:"🇲🇹"},{code:"+692",name:"Marshall Islands",flag:"🇲🇭"},{code:"+222",name:"Mauritania",flag:"🇲🇷"},{code:"+230",name:"Mauritius",flag:"🇲🇺"},{code:"+52",name:"Mexico",flag:"🇲🇽"},{code:"+691",name:"Micronesia",flag:"🇫🇲"},{code:"+373",name:"Moldova",flag:"🇲🇩"},{code:"+377",name:"Monaco",flag:"🇲🇨"},{code:"+976",name:"Mongolia",flag:"🇲🇳"},{code:"+382",name:"Montenegro",flag:"🇲🇪"},{code:"+212",name:"Morocco",flag:"🇲🇦"},{code:"+258",name:"Mozambique",flag:"🇲🇿"},{code:"+95",name:"Myanmar",flag:"🇲🇲"},{code:"+264",name:"Namibia",flag:"🇳🇦"},{code:"+674",name:"Nauru",flag:"🇳🇷"},{code:"+977",name:"Nepal",flag:"🇳🇵"},{code:"+31",name:"Netherlands",flag:"🇳🇱"},{code:"+64",name:"New Zealand",flag:"🇳🇿"},{code:"+505",name:"Nicaragua",flag:"🇳🇮"},{code:"+227",name:"Niger",flag:"🇳🇪"},{code:"+234",name:"Nigeria",flag:"🇳🇬"},{code:"+47",name:"Norway",flag:"🇳🇴"},{code:"+968",name:"Oman",flag:"🇴🇲"},{code:"+92",name:"Pakistan",flag:"🇵🇰"},{code:"+680",name:"Palau",flag:"🇵🇼"},{code:"+507",name:"Panama",flag:"🇵🇦"},{code:"+675",name:"Papua New Guinea",flag:"🇵🇬"},{code:"+595",name:"Paraguay",flag:"🇵🇾"},{code:"+51",name:"Peru",flag:"🇵🇪"},{code:"+63",name:"Philippines",flag:"🇵🇭"},{code:"+48",name:"Poland",flag:"🇵🇱"},{code:"+351",name:"Portugal",flag:"🇵🇹"},{code:"+974",name:"Qatar",flag:"🇶🇦"},{code:"+40",name:"Romania",flag:"🇷🇴"},{code:"+7",name:"Russia",flag:"🇷🇺"},{code:"+250",name:"Rwanda",flag:"🇷🇼"},{code:"+1",name:"Saint Kitts and Nevis",flag:"🇰🇳"},{code:"+1",name:"Saint Lucia",flag:"🇱🇨"},{code:"+1",name:"Saint Vincent and the Grenadines",flag:"🇻🇨"},{code:"+685",name:"Samoa",flag:"🇼🇸"},{code:"+378",name:"San Marino",flag:"🇸🇲"},{code:"+966",name:"Saudi Arabia",flag:"🇸🇦"},{code:"+221",name:"Senegal",flag:"🇸🇳"},{code:"+381",name:"Serbia",flag:"🇷🇸"},{code:"+248",name:"Seychelles",flag:"🇸🇨"},{code:"+232",name:"Sierra Leone",flag:"🇸🇱"},{code:"+65",name:"Singapore",flag:"🇸🇬"},{code:"+421",name:"Slovakia",flag:"🇸🇰"},{code:"+386",name:"Slovenia",flag:"🇸🇮"},{code:"+677",name:"Solomon Islands",flag:"🇸🇧"},{code:"+252",name:"Somalia",flag:"🇸🇴"},{code:"+27",name:"South Africa",flag:"🇿🇦"},{code:"+82",name:"South Korea",flag:"🇰🇷"},{code:"+211",name:"South Sudan",flag:"🇸🇸"},{code:"+34",name:"Spain",flag:"🇪🇸"},{code:"+94",name:"Sri Lanka",flag:"🇱🇰"},{code:"+249",name:"Sudan",flag:"🇸🇩"},{code:"+597",name:"Suriname",flag:"🇸🇷"},{code:"+268",name:"Swaziland",flag:"🇸🇿"},{code:"+46",name:"Sweden",flag:"🇸🇪"},{code:"+41",name:"Switzerland",flag:"🇨🇭"},{code:"+963",name:"Syria",flag:"🇸🇾"},{code:"+886",name:"Taiwan",flag:"🇹🇼"},{code:"+992",name:"Tajikistan",flag:"🇹🇯"},{code:"+255",name:"Tanzania",flag:"🇹🇿"},{code:"+66",name:"Thailand",flag:"🇹🇭"},{code:"+228",name:"Togo",flag:"🇹🇬"},{code:"+676",name:"Tonga",flag:"🇹🇴"},{code:"+1",name:"Trinidad and Tobago",flag:"🇹🇹"},{code:"+216",name:"Tunisia",flag:"🇹🇳"},{code:"+90",name:"Turkey",flag:"🇹🇷"},{code:"+993",name:"Turkmenistan",flag:"🇹🇲"},{code:"+688",name:"Tuvalu",flag:"🇹🇻"},{code:"+256",name:"Uganda",flag:"🇺🇬"},{code:"+380",name:"Ukraine",flag:"🇺🇦"},{code:"+971",name:"United Arab Emirates",flag:"🇦🇪"},{code:"+44",name:"United Kingdom",flag:"🇬🇧"},{code:"+1",name:"United States",flag:"🇺🇸"},{code:"+598",name:"Uruguay",flag:"🇺🇾"},{code:"+998",name:"Uzbekistan",flag:"🇺🇿"},{code:"+678",name:"Vanuatu",flag:"🇻🇺"},{code:"+58",name:"Venezuela",flag:"🇻🇪"},{code:"+84",name:"Vietnam",flag:"🇻🇳"},{code:"+967",name:"Yemen",flag:"🇾🇪"},{code:"+260",name:"Zambia",flag:"🇿🇲"},{code:"+263",name:"Zimbabwe",flag:"🇿🇼"}],sP=v.createContext({theme:"dark",toggleTheme:()=>{}}),hF=({children:s})=>{const[t,r]=v.useState(()=>localStorage.getItem("theme")||"dark"),a=()=>{const i=t==="dark"?"light":"dark";r(i),localStorage.setItem("theme",i)};return v.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark")},[t]),e.jsx(sP.Provider,{value:{theme:t,toggleTheme:a},children:s})},pF=({isOpen:s,message:t,type:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:`bg-gray-800/90 backdrop-blur-md p-6 rounded-2xl shadow-2xl max-w-sm w-full border transform transition-all duration-300 ${r==="success"?"border-green-500 scale-100":"border-red-500 scale-100"}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[r==="success"?e.jsx(Vc,{className:"text-green-400 text-2xl mr-2"}):e.jsx(Je,{className:"text-red-400 text-2xl mr-2"}),e.jsx("h3",{className:`text-lg font-bold ${r==="success"?"text-green-400":"text-red-400"}`,children:r==="success"?"Éxito":"Error"})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("button",{onClick:a,className:`w-full py-2 rounded-xl font-medium transition-all duration-300 ${r==="success"?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"}`,children:"Cerrar"})]})}):null,fF=()=>{const[s,t]=v.useState(""),[r,a]=v.useState(""),[i,l]=v.useState(""),[o,c]=v.useState(""),[d,h]=v.useState("+51"),[g,N]=v.useState("user"),[k,E]=v.useState(""),[y,L]=v.useState(!1),[_,A]=v.useState({isOpen:!1,message:"",type:"success"}),[z,O]=v.useState(!1),K=Pt(),{theme:G,toggleTheme:H}=v.useContext(sP),R=async u=>{u.preventDefault(),A({isOpen:!1,message:"",type:"success"}),L(!0);try{if(!s||s.length<3)throw new Error("El nombre de usuario debe tener al menos 3 caracteres.");if(!r||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))throw new Error("Por favor, ingresa un correo electrónico válido.");if(!i||i.length<6)throw new Error("La contraseña debe tener al menos 6 caracteres.");if(!o||!/^\d{7,15}$/.test(o))throw new Error("Por favor, ingresa un número de teléfono válido (7-15 dígitos).");if(!["user","affiliate","provider"].includes(g))throw new Error("Rol no válido.");const W=await a3(Ke,r,i);await Kr(B(I,"users",W.user.uid),{username:s,email:r,phone:`${d}${o}`,role:g,referrerCode:k||null,createdAt:new Date().toISOString()}),A({isOpen:!0,message:"¡Registro exitoso! Ahora puedes iniciar sesión.",type:"success"}),setTimeout(()=>{K("/login")},2e3)}catch(W){let U=W.message||"Error al registrar. Por favor, inténtalo de nuevo.";W.code==="auth/email-already-in-use"&&(U="El correo electrónico ya está en uso."),A({isOpen:!0,message:U,type:"error"})}finally{L(!1)}};return e.jsxs("div",{className:`min-h-screen font-inter transition-colors duration-300 ${G==="dark"?"bg-gradient-to-b from-gray-900 via-blue-950 to-gray-900 text-gray-200":"bg-gradient-to-b from-gray-100 via-blue-50 to-gray-100 text-gray-900"} flex flex-col`,children:[e.jsx("header",{className:`sticky top-0 z-50 backdrop-blur-md border-b ${G==="dark"?"border-gray-800/50 bg-gray-900/80":"border-gray-300/50 bg-gray-100/80"}`,children:e.jsxs("div",{className:"container mx-auto px-6 py-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex items-center justify-center lg:justify-start",children:e.jsxs(b,{to:"/",className:"flex items-center space-x-3",children:[e.jsx(rt.img,{whileHover:{scale:1.1},src:kt,alt:"BlackStreaming",className:"h-12 w-auto transition-transform"}),e.jsx("span",{className:`text-2xl font-bold bg-gradient-to-r ${G==="dark"?"from-cyan-400/50 to-blue-600/50 text-cyan-400":"from-blue-500/50 to-indigo-500/50 text-blue-600"} bg-clip-text`,children:"BlackStreaming"})]})}),e.jsx(rt.div,{animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0,repeatType:"loop"},className:"text-xs font-semibold text-white bg-cyan-500/20 rounded-full px-3 py-1",children:"V 2.0"}),e.jsxs("div",{className:"flex items-center justify-center lg:justify-end space-x-3",children:[e.jsx(rt.button,{whileHover:{rotate:180},whileTap:{scale:.9},onClick:H,className:`p-2 rounded-full ${G==="dark"?"text-cyan-400 hover:bg-gray-700/50":"text-blue-600 hover:bg-gray-200/50"} transition-all`,"aria-label":"Cambiar tema",children:G==="dark"?e.jsx(ox,{size:22}):e.jsx(nx,{size:22})}),e.jsxs(b,{to:"/login",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700",children:[e.jsx(ix,{size:18}),e.jsx("span",{children:"Ingresar"})]}),e.jsxs(b,{to:"/register",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-base font-semibold text-white shadow-md transition-all duration-300 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600",children:[e.jsx(m4,{size:18}),e.jsx("span",{children:"Registrarse"})]})]})]})}),e.jsx("main",{className:"flex-grow flex items-center justify-center p-6",children:e.jsxs("div",{className:`backdrop-blur-md rounded-2xl shadow-2xl p-12 w-full max-w-lg border-2 ${G==="dark"?"bg-gradient-to-br from-gray-800/60 to-gray-900/60 border-cyan-500/20":"bg-gradient-to-br from-gray-200/60 to-gray-300/60 border-blue-500/20"}`,children:[e.jsx(rt.div,{className:"flex justify-center mb-6",children:e.jsx(rt.img,{whileHover:{scale:1.05},src:kt,alt:"BlackStreaming",className:"h-24 sm:h-32 w-auto transition-transform"})}),e.jsxs("h1",{className:`text-3xl font-bold mb-10 text-center ${G==="dark"?"text-white":"text-gray-900"}`,children:["Black",e.jsx("span",{className:G==="dark"?"text-cyan-400":"text-blue-600",children:"Streaming"})]}),e.jsx("p",{className:`text-sm text-center mb-10 ${G==="dark"?"text-gray-400":"text-gray-600"}`,children:"Regístrate para acceder al sistema."}),e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Nombre de Usuario"}),e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:`absolute top-3 left-3 ${G==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"text",value:s,onChange:u=>t(u.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${G==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Elige un nombre de usuario",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Correo Electrónico"}),e.jsxs("div",{className:"relative",children:[e.jsx(cF,{className:`absolute top-3 left-3 ${G==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"email",value:r,onChange:u=>a(u.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${G==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu correo electrónico",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Número de Teléfono"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"relative flex-shrink-0 w-48",children:[e.jsx("select",{value:d,onChange:u=>h(u.target.value),className:`w-full px-4 py-2.5 rounded-xl ${G==="dark"?"bg-gray-700/50 text-white":"bg-gray-200/50 text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 transition-all appearance-none`,children:mF.map(u=>e.jsxs("option",{value:u.code,children:[u.flag," ",u.name," (",u.code,")"]},u.code+u.name))}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:`w-4 h-4 ${G==="dark"?"text-gray-400":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(ZI,{className:`absolute top-3 left-3 ${G==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:"tel",value:o,onChange:u=>c(u.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${G==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Tu número de teléfono",required:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(JI,{className:`absolute top-3 left-3 ${G==="dark"?"text-gray-400":"text-gray-600"}`}),e.jsx("input",{type:z?"text":"password",value:i,onChange:u=>l(u.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-xl bg-transparent ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${G==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Elige una contraseña",required:!0}),e.jsx("button",{type:"button",onClick:()=>O(!z),className:`absolute top-3 right-3 ${G==="dark"?"text-gray-400 hover:text-cyan-400":"text-gray-600 hover:text-blue-600"} transition-colors`,"aria-label":z?"Ocultar contraseña":"Mostrar contraseña",children:z?e.jsx(YI,{size:18}):e.jsx(XI,{size:18})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Rol"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:g,onChange:u=>N(u.target.value),className:`w-full px-4 py-2.5 rounded-xl ${G==="dark"?"bg-gray-700/50":"bg-gray-200/50"} ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 transition-all appearance-none`,children:[e.jsx("option",{value:"user",children:"Usuario"}),e.jsx("option",{value:"affiliate",children:"Afiliado"}),e.jsx("option",{value:"provider",children:"Proveedor"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:`w-4 h-4 ${G==="dark"?"text-gray-400":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block mb-2 text-lg ${G==="dark"?"text-gray-100":"text-gray-900"}`,children:"Código de Referido (opcional)"}),e.jsx("input",{type:"text",value:k,onChange:u=>E(u.target.value),className:`w-full pl-4 pr-4 py-2.5 rounded-xl bg-transparent ${G==="dark"?"text-white":"text-gray-900"} border ${G==="dark"?"border-gray-600/50":"border-gray-400/50"} focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 shadow-md backdrop-blur-sm transition-all ${G==="dark"?"placeholder-gray-400":"placeholder-gray-600"} focus:placeholder-opacity-100`,placeholder:"Ingresa un código de referido (si tienes)"})]}),e.jsx(rt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:y,className:`w-full py-3 rounded-xl font-medium transition-all duration-300 ${y?"bg-gray-600 text-gray-400 cursor-not-allowed":G==="dark"?"bg-gradient-to-r from-cyan-400 to-blue-600 hover:from-cyan-500 hover:to-blue-700 text-white":"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white"}`,children:y?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white mr-2",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})]}),"Registrando..."]}):"Registrarse"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs(b,{to:"/login",className:`flex items-center justify-center transition-all text-lg ${G==="dark"?"text-gray-400 hover:text-cyan-400":"text-gray-600 hover:text-blue-600"}`,children:[e.jsx(KI,{className:"mr-1"})," ¿Ya tienes una cuenta? Inicia sesión"]})})]})}),e.jsx("footer",{className:`backdrop-blur-md border-t py-6 ${G==="dark"?"border-gray-800/50":"border-gray-300/50"}`,children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-8 w-auto"}),e.jsx("span",{className:`text-sm font-semibold ${G==="dark"?"text-cyan-400":"text-blue-600"}`,children:"BlackStreaming"})]}),e.jsxs("div",{className:`text-sm text-center ${G==="dark"?"text-gray-400":"text-gray-600"}`,children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("div",{className:`text-sm text-center ${G==="dark"?"text-gray-400":"text-gray-600"}`,children:"Desarrollado por Saiph"})]})})}),e.jsx(pF,{isOpen:_.isOpen,message:_.message,type:_.type,onClose:()=>A({isOpen:!1,message:"",type:"success"})})]})},gF=()=>e.jsx(hF,{children:e.jsx(fF,{})}),yF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(bt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,bF=({isOpen:s,user:t,onClose:r,onSave:a})=>{const[i,l]=v.useState((t==null?void 0:t.username)||""),[o,c]=v.useState(""),d=h=>{if(h.preventDefault(),c(""),!i.trim()){c("El nombre de usuario no puede estar vacío.");return}a(t.id,i.trim())};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Perfil"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(bt,{size:20})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:h=>l(h.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},vF=({isOpen:s,provider:t,onClose:r,onRate:a})=>{const[i,l]=v.useState(0),[o,c]=v.useState(""),d=h=>{if(h.preventDefault(),c(""),i<1||i>5){c("Por favor, selecciona una calificación entre 1 y 5 estrellas.");return}a(t.id,i),l(0)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Calificar Proveedor"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(bt,{size:20})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Proveedor: ",t.name]}),e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(h=>e.jsx(Fe,{size:24,className:`cursor-pointer ${h<=i?"text-yellow-400 fill-current":"text-gray-400"}`,onClick:()=>l(h)},h))}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Enviar Calificación"})]})]})]})})}):null},jF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState(""),[i,l]=v.useState([]),[o,c]=v.useState({username:"",phone:""}),[d,h]=v.useState(""),[g,N]=v.useState(0),[k,E]=v.useState(null),[y,L]=v.useState("inicio"),[_,A]=v.useState([]),[z,O]=v.useState({}),[K,G]=v.useState([]),[H,R]=v.useState(!0),[u,W]=v.useState({}),[U,ee]=v.useState(null),[te,Y]=v.useState({isOpen:!1,message:"",title:""}),[$,pe]=v.useState({isOpen:!1,user:null}),[Me,De]=v.useState({isOpen:!1,provider:null}),[he,ye]=v.useState(""),[ge,Ve]=v.useState([]),Re=Pt(),Pe=(x,m)=>{Y({isOpen:!0,title:x,message:m})},Qe=()=>{Y({isOpen:!1,message:"",title:""})},He=x=>{pe({isOpen:!0,user:x})},n=()=>{pe({isOpen:!1,user:null})},j=x=>{De({isOpen:!0,provider:x})},p=()=>{De({isOpen:!1,provider:null})},T=async(x,m)=>{try{W(Z=>({...Z,profile:!0}));const S=B(I,"users",x);await xs(S,{username:m,updatedAt:be()}),c(Z=>({...Z,username:m})),Pe("Éxito","Perfil actualizado exitosamente"),n()}catch(S){console.error("Error al actualizar perfil:",S),Pe("Error",S.message||"Error al actualizar el perfil")}finally{W(S=>({...S,profile:!1}))}},F=async(x,m)=>{try{W(S=>({...S,[`rate_${x}`]:!0})),await En(X(I,"ratings"),{userId:k,providerId:x,rating:m,ratedAt:be()}),Pe("Éxito","Calificación enviada exitosamente"),p()}catch(S){console.error("Error al calificar proveedor:",S),Pe("Error",S.message||"Error al enviar la calificación")}finally{W(S=>({...S,[`rate_${x}`]:!1}))}};v.useEffect(()=>{(async()=>{try{console.log("Fetching products...");const m=me(X(I,"products")),S=await jt(m);console.log("Products fetched:",S.docs.length);const Z={};S.forEach(V=>{Z[V.id]=V.data()}),O(Z)}catch(m){console.error("Error fetching products:",m),ee("Error al cargar productos: "+m.message)}})()},[]),v.useEffect(()=>{const x=Ie(B(I,"notifications","adminMessage"),m=>{if(m.exists()){const S=m.data(),Z="user";S.roles&&S.roles.includes(Z)?G([{id:m.id,...S}]):G([])}else G([])},m=>{console.error("Error in notifications listener:",m),ee("Error al cargar notificaciones: "+m.message)});return()=>x()},[]),v.useEffect(()=>{if(!k)return;(async()=>{try{const m=me(X(I,"sales"),we("customerId","==",k)),S=await jt(m),Z=new Set,V=[];S.forEach(re=>{const ce=re.data();ce.providerId&&!Z.has(ce.providerId)&&(Z.add(ce.providerId),V.push({id:ce.providerId,name:ce.provider||"Proveedor desconocido",phone:ce.providerPhone||"No especificado"}))}),Ve(V)}catch(m){console.error("Error fetching providers:",m),ee("Error al cargar proveedores: "+m.message)}})()},[k]);const q=async x=>{try{W(de=>({...de,[`renew_${x.id}`]:!0}));const m=parseFloat(x.renewalPrice)||parseFloat(x.price)||0;if(g<m){Pe("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const S=parseInt(x.durationDays)||30,Z=Xt.now(),V=Z.toDate(),re=V,ce=new Date(re.getTime()+S*24*60*60*1e3),ie=Xt.fromDate(ce),J=B(I,"sales",x.id);await xs(J,{startDate:Z,endDate:ie,renewedAt:Z,status:"completed",updatedAt:be()});const fe=B(I,"users",k);await xs(fe,{balance:g-m}),N(de=>de-m),A(de=>de.map(Se=>Se.id===x.id?{...Se,startDate:re,endDate:ce,renewedAt:V,status:"completed",daysRemaining:S,totalDays:S,timeElapsedPercentage:0}:Se)),Pe("Éxito",`¡Pedido renovado exitosamente! Nueva fecha de vencimiento: ${D(ce)}`)}catch(m){console.error("Error al renovar el pedido:",m),Pe("Error","Error al renovar el pedido: "+m.message)}finally{W(m=>({...m,[`renew_${x.id}`]:!1}))}},se=async()=>{try{await Tc(Ke),Re("/")}catch(x){console.error("Error al cerrar sesión:",x),Pe("Error",x.message||"Error al cerrar sesión")}};v.useEffect(()=>{const x=Dt(Ke,m=>{m?(E(m.uid),h(m.email||"No especificado"),R(!1)):Re("/login")});return()=>x()},[Re]),v.useEffect(()=>{if(!k)return;const x=B(I,"users",k),m=Ie(x,S=>{if(S.exists()){const Z=S.data();c({username:Z.username||"Usuario",phone:Z.phone||""}),h(Z.email||"No especificado"),N(Number(Z.balance)||0)}else ee("Usuario no encontrado")},S=>{console.error("Error in user data listener:",S),ee("Error al cargar datos del usuario: "+S.message)});return()=>m()},[k]),v.useEffect(()=>{if(!k)return;const x=me(X(I,"sales"),we("customerId","==",k)),m=Ie(x,async Z=>{var ie,J;if(Z.empty){A([]),R(!1);return}const V=new Date,re=5*24*60*60*1e3;for(const fe of Z.docs){const Se=((J=(ie=fe.data().endDate)==null?void 0:ie.toDate)==null?void 0:J.call(ie))||new Date;if(Se<V&&V.getTime()-Se.getTime()>re)try{await wu(B(I,"sales",fe.id)),console.log(`Deleted expired order: ${fe.id}`)}catch(Ce){console.error(`Error deleting order ${fe.id}:`,Ce)}}const ce=Z.docs.map(fe=>{var At,Ot,mt,Is,Kt,Us,ps,$s,Ht,It,Ws;const de=fe.data(),Ce=((Ot=(At=de.saleDate)==null?void 0:At.toDate)==null?void 0:Ot.call(At))||((Is=(mt=de.createdAt)==null?void 0:mt.toDate)==null?void 0:Is.call(mt))||new Date;let oe=(Us=(Kt=de.startDate)==null?void 0:Kt.toDate)==null?void 0:Us.call(Kt),ue=oe||Ce,ke=!1;oe||(ke=!0);const ve=de.durationDays||30;let Oe;de.endDate?Oe=de.endDate.toDate?de.endDate.toDate():new Date(de.endDate):(Oe=new Date(ue.getTime()+ve*24*60*60*1e3),ke=!0),ke&&xs(B(I,"sales",fe.id),{startDate:oe||Xt.fromDate(Ce),endDate:Xt.fromDate(Oe),durationDays:ve}).catch(Tr=>{console.error("Error al actualizar startDate/endDate en Firestore:",Tr)});const Le=Oe.getTime()-ue.getTime(),Zt=V.getTime()-ue.getTime(),_s=Oe.getTime()-V.getTime(),ae=Math.ceil(Le/(1e3*60*60*24)),je=Math.max(0,Math.ceil(_s/(1e3*60*60*24))),ze=Math.ceil(Zt/(1e3*60*60*24)),Ge=ae>0?ze/ae*100:100,pt=((ps=z[de.providerId])==null?void 0:ps.terms)||"No se especificaron términos y condiciones.";return{id:fe.id,productName:de.productName||"Producto sin nombre",category:de.type||"netflix",price:parseFloat(de.price)||0,renewalPrice:parseFloat(de.renewalPrice)||0,provider:de.provider||"No especificado",providerId:de.providerId||"",providerPhone:de.providerPhone||de.providerWhatsapp||"51999999999",status:de.status||"completed",saleDate:Ce,startDate:ue,endDate:Oe,durationDays:ve,daysRemaining:je,totalDays:ae,timeElapsedPercentage:Ge,account:{email:(($s=de.accountDetails)==null?void 0:$s.email)||"No especificado",password:((Ht=de.accountDetails)==null?void 0:Ht.password)||"No especificado",profile:((It=de.accountDetails)==null?void 0:It.profile)||"No especificado",pin:((Ws=de.accountDetails)==null?void 0:Ws.pin)||"No especificado"},client:{customerName:de.customerName||"Cliente desconocido",email:de.customerEmail||"No especificado",phone:de.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BS-${fe.id.slice(0,8).toUpperCase()}`,termsAndConditions:pt,renewable:de.renewable!==void 0?de.renewable:!0}}).filter(fe=>{const de=new Date(fe.endDate);return!(de<V&&V.getTime()-de.getTime()>re)});A(ce),R(!1)},Z=>{console.error("Error al obtener pedidos:",Z),ee("Error al cargar pedidos: "+Z.message),R(!1)}),S=setInterval(()=>{const Z=new Date,V=5*24*60*60*1e3;A(re=>re.map(ce=>{const ie=new Date(ce.endDate).getTime()-new Date(ce.startDate).getTime(),J=Z.getTime()-new Date(ce.startDate).getTime(),fe=new Date(ce.endDate).getTime()-Z.getTime(),de=Math.ceil(ie/(1e3*60*60*24)),Se=Math.max(0,Math.ceil(fe/(1e3*60*60*24))),Ce=Math.ceil(J/(1e3*60*60*24)),oe=de>0?Ce/de*100:100;return{...ce,daysRemaining:Se,totalDays:de,timeElapsedPercentage:oe}}).filter(ce=>{const ie=new Date(ce.endDate);return!(ie<Z&&Z.getTime()-ie.getTime()>V)}))},6e4);return()=>{m(),clearInterval(S)}},[k,z]),v.useEffect(()=>{if(!k)return;const x=me(X(I,"pendingTopUps"),we("userId","==",k)),m=Ie(x,S=>{const Z=S.docs.map(V=>{var re,ce;return{id:V.id,...V.data(),date:((ce=(re=V.data().requestedAt)==null?void 0:re.toDate)==null?void 0:ce.call(re))||new Date,amount:parseFloat(V.data().amount)||0}});l(Z)},S=>{console.error("Error al obtener recargas:",S),ee("Error al cargar recargas: "+S.message)});return()=>m()},[k]);const ne=async()=>{try{if(W(m=>({...m,topUp:!0})),!r||isNaN(r)){Pe("Error","Ingrese un monto válido");return}const x=parseFloat(r);if(x<10){Pe("Error","El monto mínimo de recarga es S/ 10.00");return}await En(X(I,"pendingTopUps"),{userId:k,username:o.username,amount:x,status:"pendiente",requestedAt:be()}),a(""),Pe("Éxito","Solicitud de recarga enviada correctamente")}catch(x){console.error("Error al solicitar recarga:",x),Pe("Error",x.message||"Error al enviar solicitud de recarga")}finally{W(x=>({...x,topUp:!1}))}},w=async x=>{x.preventDefault();try{W(ce=>({...ce,password:!0}));const m=x.target.password.value,S=x.target.phone.value,Z=Ke.currentUser,V=B(I,"users",k),re={};if(m){if(m.length<6){Pe("Error","La contraseña debe tener al menos 6 caracteres");return}await Wg(Z,m),re.updatedAt=be()}S&&(re.phone=S,re.updatedAt=be()),Object.keys(re).length>0&&await xs(V,re),c(ce=>({...ce,phone:S||ce.phone})),Pe("Éxito","Cambios guardados correctamente"),x.target.reset()}catch(m){console.error("Error al actualizar los datos:",m),Pe("Error",m.message||"Error al guardar los cambios")}finally{W(m=>({...m,password:!1}))}},D=x=>{if(!x)return"No especificada";try{const m=x instanceof Date?x:new Date(x);return isNaN(m.getTime())?"Fecha inválida":m.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},P=()=>{if(H)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(U)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Je,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:U}),e.jsx("button",{onClick:()=>ee(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(y){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:o.username})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o.username})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Yr,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:d})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(ZI,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o.phone||"No especificado"})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Saldo disponible"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",g.toFixed(2)]}),e.jsx("button",{onClick:()=>L("recargar"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Recargar"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Pedidos activos"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:_.filter(x=>new Date(x.endDate)>new Date&&x.status==="completed").length}),e.jsx("button",{onClick:()=>L("pedidos"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Ver pedidos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),_.length>0?_.slice(0,3).map(x=>{const m=new Date(x.endDate)>new Date&&x.status==="completed",S=x.status==="pending";return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium text-white",children:x.productName}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${x.status==="pending"?"bg-yellow-900/80 text-yellow-400":m?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:S?"A pedido":m?"Activo":"Expirado"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",D(x.endDate)]})]},x.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),_.length>3&&e.jsx("button",{onClick:()=>L("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Notificaciones"}),K.length>0?K.map(x=>{var m,S;return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsx("p",{className:"text-gray-300",children:x.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:D(((S=(m=x.updatedAt)==null?void 0:m.toDate)==null?void 0:S.call(m))||new Date)})]},x.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay notificaciones"})]})]})]});case"notificaciones":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Notificaciones"}),K.length>0?e.jsx("div",{className:"space-y-4",children:K.map(x=>{var m,S;return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("p",{className:"text-gray-300",children:x.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:D(((S=(m=x.updatedAt)==null?void 0:m.toDate)==null?void 0:S.call(m))||new Date)})]},x.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bo,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-400",children:"No tienes mensajes nuevos"})]})]});case"recargar":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),e.jsx("input",{type:"number",value:r,onChange:x=>a(x.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all duration-300 placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),e.jsx("button",{onClick:ne,disabled:u.topUp||!r||parseFloat(r)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${r&&parseFloat(r)>=10&&!u.topUp?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:u.topUp?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"})]}),e.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50 max-w-md mx-auto",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Cs,{className:"mr-2"})," ¿Cómo realizar tu recarga?"]}),e.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",e.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al número:"]}),e.jsx("p",{className:"text-xl font-bold text-white mb-2",children:"📱 931757531"}),e.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contáctanos vía WhatsApp al mismo número para confirmar tu recarga."}),e.jsxs("a",{href:`https://wa.me/51931757531?text=${encodeURIComponent("Hola 😊, he realizado una recarga a través de Yape. Por favor, confirma mi pago.")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[e.jsx(Yr,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Historial de recargas"}),i.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:i.map(x=>e.jsxs("tr",{className:"hover:bg-gray-600/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",x.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${x.status==="aprobado"?"bg-green-900/80 text-green-400":x.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:x.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:D(x.date)})]},x.id))})]})}):e.jsx("p",{className:"text-gray-400 py-8",children:"No hay recargas registradas"})]})]});case"proveedores":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Proveedores"}),ge.length>0?e.jsx("div",{className:"space-y-4",children:ge.map(x=>e.jsx("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300 font-medium",children:x.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Teléfono: ",x.phone]})]}),e.jsxs("button",{onClick:()=>j(x),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300 flex items-center gap-2",children:[e.jsx(Fe,{size:16}),"Calificar"]})]})},x.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xe,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay proveedores"}),e.jsx("p",{className:"text-gray-400",children:"No has realizado compras con proveedores aún."})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-3 sm:p-4 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative w-48 sm:w-64",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"w-full px-3 py-1.5 rounded-lg bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all duration-300 text-sm placeholder-gray-500",value:he,onChange:x=>ye(x.target.value)}),e.jsx(at,{className:"absolute right-2 top-2 text-gray-400",size:16})]})]}),_.length>0?_.filter(x=>(x.productName||"").toLowerCase().includes(he.toLowerCase())||(x.orderId||"").toLowerCase().includes(he.toLowerCase())).map(x=>{var Ce,oe,ue,ke,ve,Oe,Le,Zt,_s,ae,je,ze,Ge;const m=parseFloat(x.price)||0,S=parseFloat(x.renewalPrice)||0,Z=new Date(x.endDate)>new Date&&x.status==="completed",V=x.status==="pending",re=x.daysRemaining||0,ce=x.timeElapsedPercentage||0;let ie="bg-green-400";ce>70&&ce<=90?ie="bg-yellow-400":ce>90&&(ie="bg-red-400");const J=V?e.jsx(Vt,{className:"text-yellow-400",size:16}):Z?e.jsx(Vc,{className:"text-green-400",size:16}):e.jsx(Je,{className:"text-red-400",size:16}),fe=encodeURIComponent(`*Consulta sobre Pedido - ${x.productName||"Sin nombre"}*

*N° Pedido:* ${x.orderId||"No especificado"}
*Producto:* ${x.productName||"No especificado"}
*Precio:* S/ ${m.toFixed(2)}
`+(x.renewalPrice?`*Precio de Renovación:* S/ ${S.toFixed(2)}
`:"")+`*Estado:* ${V?"A pedido":Z?"Activo":"Expirado"}
*Fecha de Inicio:* ${D(x.startDate)}
*Fecha de Vencimiento:* ${D(x.endDate)}
`+(V?`Hola 😊, he comprado un producto a pedido (${x.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),de=encodeURIComponent(`😊 Estimado/a ${((Ce=x.client)==null?void 0:Ce.customerName)||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${x.productName||"Sin nombre"}.
🔢 Código: ${x.orderId||"No especificado"}
`+(V?"":`📧 Correo: ${((oe=x.account)==null?void 0:oe.email)||"No especificado"}
🔐 Contraseña: ${((ue=x.account)==null?void 0:ue.password)||"No especificado"}
👤 Perfil: ${((ke=x.account)==null?void 0:ke.profile)||"No especificado"}
📌 PIN: ${((ve=x.account)==null?void 0:ve.pin)||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${D(x.startDate)}
📅 Fecha de vencimiento: ${D(x.endDate)}
🏁 Días contratados: ${x.durationDays||30} días.

`+(V?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${x.termsAndConditions||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),Se=x.providerPhone?x.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return e.jsxs("div",{className:"border border-gray-600/50 rounded-xl overflow-hidden hover:shadow-lg transition-all duration-300 mb-4",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-3 py-2 border-b border-gray-600/20 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[J,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white text-sm",children:x.productName||"Producto sin nombre"}),x.orderId&&e.jsxs("p",{className:"text-xs text-gray-400",children:["N°: ",x.orderId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",m.toFixed(1)]}),e.jsx("p",{className:"text-xs text-gray-500",children:x.renewalPrice&&`Ren: S/ ${S.toFixed(1)}`}),e.jsx("p",{className:`text-xs ${V?"text-yellow-400":ie.replace("bg-","text-")}`,children:V?"Pendiente":`${re} día${re===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-3 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"w-full bg-gray-600/40 rounded-full h-1",children:e.jsx("div",{className:`h-1 rounded-full ${ie}`,style:{width:`${Math.min(ce,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5 text-right",children:[ce.toFixed(0),"%"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[e.jsxs("div",{className:"border border-gray-700/50 bg-gray-800/50 backdrop-blur-sm p-2.5 rounded-xl",children:[e.jsxs("h5",{className:"text-xs font-medium text-gray-400 flex items-center mb-0.5",children:[e.jsx(Xe,{className:"mr-0.5",size:12})," Cuenta"]}),e.jsx("div",{className:"space-y-0.5 text-xs text-gray-300",children:V?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Usuario: ",e.jsx("span",{className:"text-gray-200",children:"Por completar"})]}),e.jsxs("p",{children:["Clave: ",e.jsx("span",{className:"text-gray-200",children:"Por completar"})]}),e.jsxs("p",{children:["Perfil: ",e.jsx("span",{className:"text-gray-200",children:"Por completar"})]}),e.jsxs("p",{children:["PIN: ",e.jsx("span",{className:"text-gray-200",children:"No"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Email: ",e.jsx("span",{className:"text-gray-100 break-all",children:((Oe=x.account)==null?void 0:Oe.email)||"-"})]}),e.jsxs("p",{children:["Clave: ",e.jsx("span",{className:"text-gray-100 break-all",children:((Le=x.account)==null?void 0:Le.password)||"-"})]}),e.jsxs("p",{children:["Perfil: ",e.jsx("span",{className:"text-gray-100",children:((Zt=x.account)==null?void 0:Zt.profile)||"-"})]}),e.jsxs("p",{children:["PIN: ",e.jsx("span",{className:"text-gray-100",children:((_s=x.account)==null?void 0:_s.pin)||"-"})]})]})})]}),e.jsxs("div",{className:"border border-gray-700/50 bg-gray-800/50 backdrop-blur-sm p-2.5 rounded-xl",children:[e.jsxs("h5",{className:"text-xs font-medium text-gray-400 flex items-center mb-0.5",children:[e.jsx(Te,{className:"mr-0.5",size:12})," Pedido"]}),e.jsxs("div",{className:"space-y-0.5 text-xs text-gray-300",children:[e.jsxs("p",{children:["Proveedor: ",e.jsx("span",{className:"text-gray-100",children:x.provider||"-"})]}),e.jsxs("p",{children:["Teléfono: ",e.jsx("span",{className:"text-gray-100",children:x.providerPhone||"-"})]}),e.jsxs("p",{children:["Estado: ",e.jsx("span",{className:`inline-block px-1 py-0.5 text-[10px] rounded-full ${V?"bg-yellow-900/60 text-yellow-300":Z?"bg-green-900/60 text-green-300":"bg-red-900/60 text-red-300"}`,children:V?"A pedido":Z?"Activo":"Expirado"})]}),e.jsxs("p",{children:["Inicio: ",e.jsx("span",{className:"text-gray-100",children:D(x.startDate)})]}),e.jsxs("p",{children:["Vence: ",e.jsx("span",{className:"text-gray-100",children:D(x.endDate)})]}),e.jsxs("p",{children:["Días: ",e.jsx("span",{className:`text-gray-100 ${ie.replace("bg-","text-")}`,children:re})]})]})]}),e.jsxs("div",{className:"border border-gray-700/50 bg-gray-800/50 backdrop-blur-sm p-2.5 rounded-xl",children:[e.jsxs("h5",{className:"text-xs font-medium text-gray-400 flex items-center mb-0.5",children:[e.jsx(Xe,{className:"mr-0.5",size:12})," Cliente"]}),e.jsxs("div",{className:"space-y-0.5 text-xs text-gray-300",children:[e.jsxs("p",{children:["Nombre: ",e.jsx("span",{className:"text-gray-100",children:((ae=x.client)==null?void 0:ae.customerName)||"-"})]}),e.jsxs("p",{children:["Email: ",e.jsx("span",{className:"text-gray-100 break-all",children:((je=x.client)==null?void 0:je.email)||"-"})]}),e.jsxs("p",{children:["Teléfono: ",e.jsx("span",{className:"text-gray-100",children:((ze=x.client)==null?void 0:ze.phone)||"-"})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsxs("a",{href:`https://wa.me/51${Se}?text=${fe}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-1.5 px-2.5 rounded-lg flex items-center justify-center gap-1 text-xs transition-all duration-300",children:[e.jsx(Yr,{size:12})," Proveedor"]}),x.renewalPrice&&x.renewable&&e.jsx("button",{onClick:()=>q(x),disabled:u[`renew_${x.id}`],className:`flex-1 py-1.5 px-2.5 rounded-lg flex items-center justify-center gap-1 text-xs transition-all duration-300 ${u[`renew_${x.id}`]?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:u[`renew_${x.id}`]?e.jsx("div",{className:"animate-spin h-3 w-3 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(eP,{size:12})," Renovar (S/ ",S.toFixed(1),")"]})}),((Ge=x.client)==null?void 0:Ge.phone)&&e.jsxs("a",{href:`https://wa.me/${x.client.phone.replace(/^\+/,"")}?text=${de}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-1.5 px-2.5 rounded-lg flex items-center justify-center gap-1 text-xs transition-all duration-300",children:[e.jsx(Yr,{size:12})," Cliente"]})]})]})]},x.id)}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(et,{className:"mx-auto text-3xl text-gray-400 mb-2"}),e.jsx("h4",{className:"text-base font-medium text-gray-300",children:"No tienes pedidos"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Realiza tu primer pedido en nuestra tienda"})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",onChange:()=>ee(""),children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:o.username,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:()=>He({id:k,username:o.username}),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300",title:"Editar Nombre",children:e.jsx(Ty,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:d,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Teléfono"}),e.jsx("input",{type:"tel",name:"phone",defaultValue:o.phone||"",placeholder:"Ingresa tu número de teléfono",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{type:"submit",disabled:u.password,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed",children:u.password?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:se,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(Ct,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Je,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>L("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(zt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("button",{onClick:()=>{Re("/"),t(!1)},className:"text-xl font-bold text-cyan-400 hover:text-cyan-300 transition-all duration-300",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(bt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:o.username.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:o.username}),e.jsx("p",{className:"text-xs text-gray-400",children:"Usuario"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Rm},{id:"notificaciones",label:"Notificaciones",icon:Bo},{id:"recargar",label:"Recargar saldo",icon:Cs},{id:"pedidos",label:"Mis pedidos",icon:et},{id:"proveedores",label:"Proveedores",icon:Xe},{id:"configuracion",label:"Configuración",icon:zc}].map(x=>e.jsxs("button",{onClick:()=>{L(x.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${y===x.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(x.icon,{className:"text-lg"}),e.jsx("span",{children:x.label})]},x.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:se,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(Ct,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:P()}),e.jsx(yF,{isOpen:te.isOpen,title:te.title,message:te.message,onClose:Qe}),e.jsx(bF,{isOpen:$.isOpen,user:$.user,onClose:n,onSave:T}),e.jsx(vF,{isOpen:Me.isOpen,provider:Me.provider,onClose:p,onRate:F}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},NF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(bt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,wF=({isOpen:s,user:t,onClose:r,onSave:a})=>{const[i,l]=v.useState((t==null?void 0:t.username)||""),[o,c]=v.useState(""),d=h=>{if(h.preventDefault(),c(""),!i.trim()){c("El nombre de usuario no puede estar vacío.");return}a(t.id,i.trim())};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Perfil"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(bt,{size:20})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:h=>l(h.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},kF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState("inicio"),[i,l]=v.useState(""),[o,c]=v.useState(""),[d,h]=v.useState(""),[g,N]=v.useState([]),[k,E]=v.useState(0),[y,L]=v.useState(0),[_,A]=v.useState(null),[z,O]=v.useState(!0),[K,G]=v.useState({}),[H,R]=v.useState(null),[u,W]=v.useState([]),[U,ee]=v.useState(!1),[te,Y]=v.useState(""),[$,pe]=v.useState(""),[Me,De]=v.useState([]),[he,ye]=v.useState([]),[ge,Ve]=v.useState({}),[Re,Pe]=v.useState([]),[Qe,He]=v.useState({isOpen:!1,message:"",title:""}),[n,j]=v.useState({isOpen:!1,user:null}),p=Pt(),T=(V,re)=>{He({isOpen:!0,title:V,message:re})},F=()=>{He({isOpen:!1,message:"",title:""})},q=V=>{j({isOpen:!0,user:V})},se=()=>{j({isOpen:!1,user:null})},ne=async(V,re)=>{try{G(J=>({...J,profile:!0}));const ce=B(I,"users",V),ie=B(I,"affiliates",V);await xs(ce,{username:re,updatedAt:be()}),await xs(ie,{username:re,updatedAt:be()}),l(re),T("Éxito","Perfil actualizado exitosamente"),se()}catch(ce){console.error("Error al actualizar perfil:",ce),T("Error",ce.message||"Error al actualizar el perfil")}finally{G(ce=>({...ce,profile:!1}))}};v.useEffect(()=>{const V=Dt(Ke,re=>{re?(A(re.uid),c(re.email||"No especificado"),O(!1)):p("/login")});return()=>V()},[p]),v.useEffect(()=>{(async()=>{try{const re=me(X(I,"products")),ce=await jt(re),ie={};ce.forEach(J=>{ie[J.id]=J.data()}),Ve(ie)}catch(re){console.error("Error fetching products:",re),R("Error al cargar productos")}})()},[]),v.useEffect(()=>{(()=>Ie(B(I,"notifications","adminMessage"),ce=>{if(ce.exists()){const ie=ce.data(),J="affiliate";ie.roles&&ie.roles.includes(J)?Pe([{id:ce.id,...ie}]):Pe([])}else Pe([])}))()},[]),v.useEffect(()=>{(async()=>{if(_)try{const re=B(I,"users",_),ce=await st(re);if(ce.exists()){const fe=ce.data();l(fe.username||"Usuario"),L(Number(fe.balance)||0)}const ie=B(I,"affiliates",_),J=await st(ie);if(J.exists()){const fe=J.data();h(fe.affiliateCode||""),E(Number(fe.earnings)||0)}else{const fe=`AFF-${Math.random().toString(36).substring(2,8).toUpperCase()}`;await Kr(ie,{username:i||"Nuevo Afiliado",email:o,affiliateCode:fe,earnings:0,createdAt:be(),updatedAt:be()}),h(fe)}}catch(re){console.error("Error al manejar datos:",re),R("Error al cargar datos")}finally{O(!1)}})()},[_,o,i]),v.useEffect(()=>{if(!_)return;(()=>{const re=me(X(I,"pendingTopUps"),we("userId","==",_));return Ie(re,ie=>{const J=ie.docs.map(fe=>{var de,Se;return{id:fe.id,...fe.data(),date:((Se=(de=fe.data().requestedAt)==null?void 0:de.toDate)==null?void 0:Se.call(de))||new Date,amount:parseFloat(fe.data().amount)||0}});De(J)},ie=>{console.error("Error al obtener recargas:",ie),R("Error al cargar recargas")})})()},[_]),v.useEffect(()=>{if(!d)return;const V=me(X(I,"users"),we("referrerCode","==",d),N6("createdAt","desc"),Ft(5)),re=Ie(V,ce=>{const ie=ce.docs.map(J=>{var fe;return{id:J.id,...J.data(),joinDate:((fe=J.data().createdAt)==null?void 0:fe.toDate())||new Date}});W(ie)});return()=>re()},[d]),v.useEffect(()=>{if(!d)return;const V=me(X(I,"users"),we("referrerCode","==",d)),re=Ie(V,ce=>{const ie=ce.docs.map(J=>{var fe;return{id:J.id,...J.data(),joinDate:((fe=J.data().createdAt)==null?void 0:fe.toDate())||new Date}});N(ie)});return()=>re()},[d]),v.useEffect(()=>{if(!_)return;(()=>{const re=me(X(I,"sales"),we("customerId","==",_)),ce=Ie(re,J=>{if(J.empty){ye([]),O(!1);return}const fe=J.docs.map(de=>{var mt,Is,Kt,Us,ps,$s,Ht,It,Ws,Tr,Mi;const Se=de.data(),oe=((Is=(mt=Se.saleDate)==null?void 0:mt.toDate)==null?void 0:Is.call(mt))||((Us=(Kt=Se.createdAt)==null?void 0:Kt.toDate)==null?void 0:Us.call(Kt))||new Date;let ue=($s=(ps=Se.startDate)==null?void 0:ps.toDate)==null?void 0:$s.call(ps),ke=ue||oe,ve=!1;ue||(ve=!0);const Oe=Se.durationDays||30;let Le;Se.endDate?Le=new Date(Se.endDate):(Le=new Date(ke.getTime()+Oe*24*60*60*1e3),ve=!0),ve&&xs(B(I,"sales",de.id),{startDate:ue||Xt.fromDate(oe),endDate:Le.toISOString(),durationDays:Oe}).catch(tl=>{console.error("Error al actualizar startDate/endDate en Firestore:",tl)});const Zt=new Date,_s=Le.getTime()-ke.getTime(),ae=Zt.getTime()-ke.getTime(),je=Le.getTime()-Zt.getTime(),ze=Math.ceil(_s/(1e3*60*60*24)),Ge=Math.max(0,Math.ceil(je/(1e3*60*60*24))),pt=Math.ceil(ae/(1e3*60*60*24)),At=ze>0?pt/ze*100:100,Ot=((Ht=ge[Se.providerId])==null?void 0:Ht.terms)||"No se especificaron términos y condiciones.";return{id:de.id,productName:Se.productName||"Producto sin nombre",category:Se.type||"netflix",price:parseFloat(Se.price)||0,provider:Se.provider||"No especificado",providerId:Se.providerId||"",providerPhone:Se.providerPhone||Se.providerWhatsapp||"51999999999",status:Se.status||"completed",saleDate:oe,startDate:ke,endDate:Le,durationDays:Oe,daysRemaining:Ge,totalDays:ze,timeElapsedPercentage:At,account:{email:((It=Se.accountDetails)==null?void 0:It.email)||"No especificado",password:((Ws=Se.accountDetails)==null?void 0:Ws.password)||"No especificado",profile:((Tr=Se.accountDetails)==null?void 0:Tr.profile)||"No especificado",pin:((Mi=Se.accountDetails)==null?void 0:Mi.pin)||"No especificado"},client:{name:Se.customerName||"Cliente desconocido",email:Se.customerEmail||"No especificado",phone:Se.phoneNumber||"No especificado"},paymentMethod:"BlackStreaming",orderId:`BS-${de.id.slice(0,8).toUpperCase()}`,termsAndConditions:Ot,renewable:Se.renewable!==void 0?Se.renewable:!0}});ye(fe),O(!1)},J=>{console.error("Error al obtener pedidos:",J),R("Error al cargar pedidos: "+J.message),O(!1)}),ie=setInterval(()=>{ye(J=>J.map(fe=>{const de=new Date,Se=new Date(fe.endDate).getTime()-new Date(fe.startDate).getTime(),Ce=de.getTime()-new Date(fe.startDate).getTime(),oe=new Date(fe.endDate).getTime()-de.getTime(),ue=Math.ceil(Se/(1e3*60*60*24)),ke=Math.max(0,Math.ceil(oe/(1e3*60*60*24))),ve=Math.ceil(Ce/(1e3*60*60*24)),Oe=ue>0?ve/ue*100:100;return{...fe,daysRemaining:ke,totalDays:ue,timeElapsedPercentage:Oe}}))},6e4);return()=>{ce(),clearInterval(ie)}})()},[_,ge]);const w=async()=>{try{if(G(re=>({...re,topUp:!0})),!$||isNaN($)){T("Error","Ingrese un monto válido");return}const V=parseFloat($);if(V<10){T("Error","El monto mínimo de recarga es S/ 10.00");return}await En(X(I,"pendingTopUps"),{userId:_,username:i,amount:V,status:"pendiente",requestedAt:be(),processed:!1}),pe(""),T("Éxito","Solicitud de recarga enviada correctamente")}catch(V){console.error("Error al solicitar recarga:",V),T("Error",V.message||"Error al enviar solicitud de recarga")}finally{G(V=>({...V,topUp:!1}))}},D=async V=>{var re,ce,ie,J,fe,de,Se;try{G(ae=>({...ae,[`renew_${V.id}`]:!0}));const Ce=parseFloat(V.price)||0;if(y<Ce){T("Error","Saldo insuficiente para renovar el pedido. Por favor, recarga tu saldo.");return}const oe=parseInt(V.durationDays)||30,ue=Xt.now(),ke=ue.toDate(),ve=new Date(ke.getTime()+oe*24*60*60*1e3),Oe=ve.toISOString(),Le={customerId:_,customerName:((re=V.client)==null?void 0:re.name)||"Cliente desconocido",customerEmail:((ce=V.client)==null?void 0:ce.email)||o,phoneNumber:((ie=V.client)==null?void 0:ie.phone)||"No especificado",productName:V.productName||"Producto sin nombre",type:V.category||"netflix",price:Ce,accountDetails:{email:((J=V.account)==null?void 0:J.email)||"No especificado",password:((fe=V.account)==null?void 0:fe.password)||"No especificado",profile:((de=V.account)==null?void 0:de.profile)||"No especificado",pin:((Se=V.account)==null?void 0:Se.pin)||"No especificado"},provider:V.provider||"Proveedor desconocido",providerId:V.providerId||"",providerPhone:V.providerPhone||V.providerWhatsapp||"51999999999",status:"completed",createdAt:ue,saleDate:ue,startDate:ue,endDate:Oe,durationDays:oe,renewedAt:ue,renewable:V.renewable!==void 0?V.renewable:!0},Zt=await En(X(I,"sales"),Le),_s=B(I,"users",_);await xs(_s,{balance:y-Ce}),L(ae=>ae-Ce),ye(ae=>{var je;return[...ae,{...Le,id:Zt.id,saleDate:ke,startDate:ke,endDate:ve,account:Le.accountDetails,client:{name:Le.customerName,email:Le.customerEmail,phone:Le.phoneNumber},orderId:`BS-${Zt.id.slice(0,8).toUpperCase()}`,renewable:Le.renewable,daysRemaining:oe,totalDays:oe,timeElapsedPercentage:0,termsAndConditions:((je=ge[Le.providerId])==null?void 0:je.terms)||"No se especificaron términos y condiciones."}]}),T("Éxito","¡Pedido renovado exitosamente!")}catch(Ce){console.error("Error al renovar el pedido:",Ce),T("Error","Error al renovar el pedido: "+Ce.message)}finally{G(Ce=>({...Ce,[`renew_${V.id}`]:!1}))}},P=()=>{d&&(navigator.clipboard.writeText(d),ee(!0),setTimeout(()=>ee(!1),2e3))},x=V=>{if(!V)return"No especificada";try{const re=V instanceof Date?V:new Date(V);return isNaN(re.getTime())?"Fecha inválida":re.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},m=async()=>{try{await Tc(Ke),p("/")}catch(V){console.error("Error al cerrar sesión:",V),T("Error",V.message||"Error al cerrar sesión")}},S=async V=>{V.preventDefault();try{G(ie=>({...ie,password:!0}));const re=V.target.password.value;if(!re){T("Error","Por favor, ingrese una nueva contraseña");return}if(re.length<6){T("Error","La contraseña debe tener al menos 6 caracteres");return}const ce=Ke.currentUser;ce&&(await Wg(ce,re),T("Éxito","Contraseña actualizada correctamente"),V.target.reset())}catch(re){console.error("Error al actualizar la contraseña:",re),T("Error",re.message||"Error al actualizar la contraseña")}finally{G(re=>({...re,password:!1}))}},Z=()=>{if(z)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(H)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Je,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:H}),e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:i})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Yr,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Saldo disponible"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",y.toFixed(2)]}),e.jsx("button",{onClick:()=>a("recargas"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Recargar"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",k.toFixed(2)]}),e.jsx("button",{onClick:()=>a("ganancias"),className:"mt-2 px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Ver ganancias"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Tu código de afiliado"}),e.jsxs("button",{onClick:P,disabled:!d,className:`flex items-center gap-2 px-3 py-1 rounded-xl transition-all duration-300 ${d?"bg-cyan-900/80 text-cyan-400 hover:bg-cyan-800/80":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(lF,{size:16}),U?"¡Copiado!":"Copiar"]})]}),e.jsx("div",{className:"bg-gray-800/50 p-4 rounded-xl mb-6 border border-gray-600/50",children:e.jsx("p",{className:"text-2xl font-bold text-center tracking-wider text-white",children:d||"Generando código..."})}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Comparte este código con tus amigos para que se registren y ganes comisiones por sus compras."}),e.jsxs("div",{className:"bg-cyan-900/30 p-4 rounded-xl border border-cyan-800/50",children:[e.jsx("h4",{className:"font-medium text-cyan-400 mb-2",children:"Enlace de afiliado:"}),e.jsx("p",{className:"text-sm bg-gray-800/50 p-2 rounded-xl border border-gray-600/50 overflow-x-auto text-gray-300",children:d?`https://blackkstreaming.com/register?ref=${d}`:"Generando enlace..."})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Referidos recientes"}),u.length>0?u.map(V=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:V.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-900/80 text-green-400",children:"Activo"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Unido: ",x(V.joinDate)]})]},V.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes referidos recientes"}),u.length>0&&e.jsx("button",{onClick:()=>a("referidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los referidos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pedidos recientes"}),he.length>0?he.slice(0,3).map(V=>{const re=new Date(V.endDate)>new Date&&V.status==="completed",ce=V.status==="pending";return e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:V.productName}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ce?"bg-yellow-900/80 text-yellow-400":re?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:ce?"A pedido":re?"Activo":"Expirado"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Vence: ",x(V.endDate)]})]},V.id)}):e.jsx("p",{className:"text-gray-400 py-2",children:"No tienes pedidos recientes"}),he.length>3&&e.jsx("button",{onClick:()=>a("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Notificaciones"}),Re.length>0?Re.map(V=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsx("p",{className:"text-gray-300",children:V.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:x(V.updatedAt)})]},V.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay notificaciones"})]})]})]});case"notificaciones":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Notificaciones"}),Re.length>0?e.jsx("div",{className:"space-y-4",children:Re.map(V=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl p-4 hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("p",{className:"text-gray-300",children:V.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:x(V.updatedAt)})]},V.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bo,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-400",children:"No tienes mensajes nuevos"})]})]});case"recargas":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargar saldo"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Monto a recargar (S/)"}),e.jsx("input",{type:"number",value:$,onChange:V=>pe(V.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Mínimo S/ 10.00",min:"10",step:"0.01"})]}),e.jsx("button",{onClick:w,disabled:K.topUp||!$||parseFloat($)<10,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 ${$&&parseFloat($)>=10&&!K.topUp?"bg-cyan-500 hover:bg-cyan-600 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:K.topUp?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Solicitar recarga"}),e.jsxs("div",{className:"mt-6 bg-gray-700/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Cs,{className:"mr-2"})," ¿Cómo realizar tu recarga?"]}),e.jsxs("p",{className:"text-gray-300 mb-2",children:["Realiza tu pago mediante ",e.jsx("span",{className:"font-semibold text-white",children:"Yape"})," al número:"]}),e.jsx("p",{className:"text-xl font-bold text-white mb-2",children:"📱 931757531"}),e.jsx("p",{className:"text-gray-300 mb-3",children:"Una vez realizado el pago, por favor contáctanos vía WhatsApp al mismo número para confirmar tu recarga."}),e.jsxs("a",{href:`https://wa.me/51931757531?text=${encodeURIComponent("Hola 😊, he realizado una recarga a través de Yape. Por favor, confirma mi pago.")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300",children:[e.jsx(Yr,{className:"mr-2"})," Confirmar por WhatsApp"]})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de recargas"}),Me.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acción"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:Me.map(V=>{var ce,ie;const re=encodeURIComponent(`Hola, he pedido una recarga de S/ ${((ce=V.amount)==null?void 0:ce.toFixed(2))||"0.00"} con el nombre ${i}. Adjunto la captura de mi pago, por favor.`);return e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",((ie=V.amount)==null?void 0:ie.toFixed(2))||"0.00"]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${V.status==="aprobado"?"bg-green-900/80 text-green-400":V.status==="pendiente"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:V.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-400",children:x(V.date)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:V.status==="pendiente"?e.jsxs("a",{href:`https://wa.me/51940505969?text=${re}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 text-sm",children:[e.jsx(Yr,{className:"mr-2"})," Enviar captura"]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"—"})})]},V.id)})})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Cs,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay recargas registradas"})]})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:te,onChange:V=>Y(V.target.value)}),e.jsx(at,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),he.length>0?e.jsx("div",{className:"space-y-6",children:he.filter(V=>(V.productName||"").toLowerCase().includes(te.toLowerCase())||(V.orderId||"").toLowerCase().includes(te.toLowerCase())).map(V=>{var ke,ve,Oe,Le,Zt,_s,ae,je,ze,Ge,pt,At,Ot;const re=parseFloat(V.price)||0,ce=new Date(V.endDate)>new Date&&V.status==="completed",ie=V.status==="pending",J=V.daysRemaining||0,fe=V.timeElapsedPercentage||0;let de="bg-green-400";fe>70&&fe<=90?de="bg-yellow-400":fe>90&&(de="bg-red-400");const Se=ie?e.jsx(Vt,{className:"text-yellow-400"}):ce?e.jsx(Vc,{className:"text-green-400"}):e.jsx(Je,{className:"text-red-400"}),Ce=encodeURIComponent(`*Consulta sobre Pedido - ${V.productName||"Sin nombre"}*

*N° Pedido:* ${V.orderId||"No especificado"}
*Producto:* ${V.productName||"No especificado"}
*Precio:* S/ ${re.toFixed(2)}
*Estado:* ${ie?"A pedido":ce?"Activo":"Expirado"}
*Fecha de Inicio:* ${x(V.startDate)}
*Fecha de Vencimiento:* ${x(V.endDate)}

`+(ie?`Hola 😊, he comprado un producto a pedido (${V.productName}). ¿En cuántos días estará listo? Por favor, indíqueme los detalles para coordinar.`:"Por favor indíqueme cómo puedo resolver mi consulta sobre este pedido.")),oe=encodeURIComponent(`😊 Estimado/a ${((ke=V.client)==null?void 0:ke.name)||"Cliente"} 😊

Le enviamos la información de su suscripción a nuestro servicio de streaming:
📌 Tipo: ${V.productName||"Sin nombre"}.
🔢 Código: ${V.orderId||"No especificado"}
`+(ie?"":`📧 Correo: ${((ve=V.account)==null?void 0:ve.email)||"No especificado"}
🔐 Contraseña: ${((Oe=V.account)==null?void 0:Oe.password)||"No especificado"}
👤 Perfil: ${((Le=V.account)==null?void 0:Le.profile)||"No especificado"}
📌 PIN: ${((Zt=V.account)==null?void 0:Zt.pin)||"No especificado"}
`)+`🌐 URL: Sin URL
📅 Fecha de creación: ${x(V.startDate)}
📅 Fecha de vencimiento: ${x(V.endDate)}
🏁 Días contratados: ${V.durationDays||30} días.

`+(ie?`*Nota:* Este pedido está "A pedido". El proveedor se contactará contigo para coordinar los detalles.

`:"")+`*Términos y Condiciones:*
${V.termsAndConditions||"No se especificaron términos y condiciones."}

Muchas gracias por su preferencia.
Atentamente, BLACKSTREAMING`),ue=V.providerPhone?V.providerPhone.replace(/^\+51/,"").replace(/\D/g,""):"51999999999";return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[Se,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:V.productName||"Producto sin nombre"}),V.orderId&&e.jsxs("p",{className:"text-xs text-gray-400",children:["N° Pedido: ",V.orderId]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",re.toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${ie?"text-yellow-400":de.replace("bg-","text-")}`,children:ie?"Pendiente de activación":`${J} día${J===1?"":"s"} restante${J===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${de}`,style:{width:`${Math.min(fe,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[fe.toFixed(0),"% completado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," Detalles de la Cuenta"]}),e.jsx("div",{className:"space-y-2 text-gray-300",children:ie?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Usuario:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:"Por completar"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white break-all",children:((_s=V.account)==null?void 0:_s.email)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Contraseña:"}),e.jsx("span",{className:"block text-white break-all",children:((ae=V.account)==null?void 0:ae.password)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Perfil:"}),e.jsx("span",{className:"block text-white",children:((je=V.account)==null?void 0:je.profile)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"PIN:"}),e.jsx("span",{className:"block text-white",children:((ze=V.account)==null?void 0:ze.pin)||"No especificado"})]})]})})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Te,{className:"mr-2"})," Información del Pedido"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Proveedor:"}),e.jsx("span",{className:"block text-white",children:V.provider||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono del Proveedor:"}),e.jsx("span",{className:"block text-white",children:V.providerPhone||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Estado:"}),e.jsx("span",{className:`block px-2 py-1 text-xs rounded-full ${ie?"bg-yellow-900/80 text-yellow-400":ce?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:ie?"A pedido":ce?"Activo":"Expirado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Método de Pago:"}),e.jsx("span",{className:"block text-white",children:"BlackStreaming"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de inicio:"}),e.jsx("span",{className:"block text-white",children:x(V.startDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Fecha de vencimiento:"}),e.jsx("span",{className:"block text-white",children:x(V.endDate)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Días restantes:"}),e.jsx("span",{className:`block ${de.replace("bg-","text-")}`,children:J})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," Información del Cliente"]}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Nombre:"}),e.jsx("span",{className:"block text-white",children:((Ge=V.client)==null?void 0:Ge.name)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Teléfono:"}),e.jsx("span",{className:"block text-white",children:((pt=V.client)==null?void 0:pt.phone)||"No especificado"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-400",children:"Email:"}),e.jsx("span",{className:"block text-white",children:((At=V.client)==null?void 0:At.email)||"No especificado"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("a",{href:`https://wa.me/51${ue}?text=${Ce}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Yr,{size:18})," Contactar Proveedor"]}),V.renewable&&e.jsx("button",{onClick:()=>D(V),disabled:K[`renew_${V.id}`],className:`flex-1 py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 ${K[`renew_${V.id}`]?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-600 text-white"}`,children:K[`renew_${V.id}`]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(eP,{size:18})," Renovar Pedido"]})}),((Ot=V.client)==null?void 0:Ot.phone)&&e.jsxs("a",{href:`https://wa.me/${V.client.phone.replace(/^\+/,"")}?text=${oe}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[e.jsx(Yr,{size:18})," Contactar Cliente"]})]})]})]},V.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(et,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Realiza tu primer pedido en nuestra tienda"})]})]});case"referidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Todos tus referidos (",g.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar referidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:te,onChange:V=>Y(V.target.value)}),e.jsx(at,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),g.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha de registro"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:g.filter(V=>{const re=V.username||"",ce=V.email||"";return re.toLowerCase().includes(te.toLowerCase())||ce.toLowerCase().includes(te.toLowerCase())}).map(V=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:V.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:V.email||"Sin email"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:V.joinDate?x(V.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/80 text-green-400",children:V.status||"Activo"})})]},V.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ec,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes referidos aún"}),e.jsx("p",{className:"text-gray-400",children:"Comparte tu código de afiliado para empezar a ganar comisiones"})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Reporte de ganancias"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias hoy"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde ayer"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias esta semana"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"S/ 0.00"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"+0% desde la semana pasada"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias totales"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",k.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[g.length," referidos"]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx(z0,{className:"mr-2 text-cyan-400"})," Historial de comisiones"]}),g.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-800/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Referido"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Origen"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-700/50 divide-y divide-gray-600/50",children:g.map(V=>e.jsxs("tr",{className:"hover:bg-gray-600/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:V.username||"Usuario sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:V.joinDate?x(V.joinDate):"No especificada"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:"S/ 0.00"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:"Registro"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-900/80 text-yellow-400",children:"Pendiente"})})]},V.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Cs,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No hay comisiones registradas"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gana comisiones cuando tus referidos realicen compras"})]})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:i,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:()=>q({id:_,username:i}),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300",title:"Editar Nombre",children:e.jsx(Ty,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:o,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{type:"submit",disabled:K.password,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-cyan-800",children:K.password?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:m,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(Ct,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Je,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(zt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(bt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:"Afiliador"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Rm},{id:"notificaciones",label:"Notificaciones",icon:Bo},{id:"recargas",label:"Recargas",icon:Cs},{id:"pedidos",label:"Pedidos",icon:et},{id:"referidos",label:"Referidos",icon:ec},{id:"ganancias",label:"Ganancias",icon:z0},{id:"configuracion",label:"Configuración",icon:zc}].map(V=>e.jsxs("button",{onClick:()=>{a(V.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r===V.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(V.icon,{className:"text-lg"}),e.jsx("span",{children:V.label})]},V.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:m,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(Ct,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:Z()}),e.jsx(NF,{isOpen:Qe.isOpen,title:Qe.title,message:Qe.message,onClose:F}),e.jsx(wF,{isOpen:n.isOpen,user:n.user,onClose:se,onSave:ne}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>t(!1)})]})},IF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(bt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,PF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState("inicio"),[i,l]=v.useState("Usuario"),[o,c]=v.useState(""),[d,h]=v.useState(""),[g,N]=v.useState([]),[k,E]=v.useState([]),[y,L]=v.useState([]),[_,A]=v.useState(!0),[z,O]=v.useState(""),[K,G]=v.useState({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:Array(1).fill({email:"",password:"",profile:"",pin:""})}),[H,R]=v.useState(null),[u,W]=v.useState(!1),[U,ee]=v.useState(""),[te,Y]=v.useState(""),[$,pe]=v.useState({isOpen:!1,message:"",title:""}),[Me,De]=v.useState({email:"",password:"",preferences:""}),[he,ye]=v.useState(!1),[ge,Ve]=v.useState(!0),[Re,Pe]=v.useState(0),[Qe,He]=v.useState(!1),[n,j]=v.useState(null),[p,T]=v.useState(""),F=Pt(),q=Gg(),se=(ae,je)=>{pe({isOpen:!0,title:ae,message:je})},ne=()=>{pe({isOpen:!1,message:"",title:""})},w=ae=>{var je;if(!ae)return"No especificada";try{const ze=ae instanceof Date?ae:((je=ae==null?void 0:ae.toDate)==null?void 0:je.call(ae))||new Date(ae);return isNaN(ze.getTime())?"Fecha inválida":ze.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(ze){return console.error("Error formatting date:",ze),"Fecha inválida"}},D=ae=>({netflix:"Netflix",spotify:"Spotify",disney:"Disney",max:"Max",primevideo:"Prime Video",vix:"Vix",crunchyroll:"Crunchyroll",canva:"Canva",chatgpt:"ChatGPT",redessociales:"Redes Sociales",dgo:"Dgo",ligamax:"Liga Max",movistarplay:"Movistar Play",youtube:"Youtube",deezer:"Deezer",tidal:"Tidal",vpn:"Vpn",wintv:"WinTv",applemusic:"Apple Music",appletv:"Apple TV",iptv:"Iptv",flujotv:"Flujo Tv",vikirakuten:"Viki Rakuten",pornhub:"Pornhub",paramount:"Paramount",licencias:"Licencias",capcut:"Capcut",duolingo:"Duolingo",buscapersonas:"BuscaPersonas"})[ae==null?void 0:ae.toLowerCase()]||"Otro";v.useEffect(()=>{const ae=Dt(q,je=>{je?(c(je.email||""),h(je.uid),P(je.uid)):F("/login")});return()=>ae()},[q,F]);const P=async ae=>{try{const je=B(I,"users",ae),ze=await st(je);if(ze.exists()){const Ge=ze.data();l(Ge.username||"Usuario"),De({email:Ge.email||"",password:"",preferences:Ge.preferences||""})}A(!1)}catch(je){O("Error al cargar datos del usuario"),console.error("Error fetching user data:",je),A(!1)}};v.useEffect(()=>{o&&(async je=>{try{const ze=await st(B(I,"admins",je));ye(ze.exists())}catch(ze){console.error("Error checking admin status:",ze)}})(o)},[o]),v.useEffect(()=>{if(!i)return;const ae=me(X(I,"products"),we("provider","==",i)),je=Ie(ae,ze=>{const Ge=ze.docs.map(pt=>({id:pt.id,...pt.data()}));E(Ge)},ze=>{console.error("Error fetching products:",ze),O("Error al cargar productos")});return()=>je()},[i]),v.useEffect(()=>{if(!d)return;const ae=me(X(I,"sales"),we("providerId","==",d)),je=Ie(ae,Ge=>{if(Ge.empty){N([]),Ve(!1);return}const pt=Ge.docs.map(Ot=>{var Qn,Li,Pa,Ur,Kn,sl,Vi,zi;const mt=Ot.data(),Kt=((Li=(Qn=mt.saleDate)==null?void 0:Qn.toDate)==null?void 0:Li.call(Qn))||((Ur=(Pa=mt.createdAt)==null?void 0:Pa.toDate)==null?void 0:Ur.call(Pa))||new Date;let Us=(sl=(Kn=mt.startDate)==null?void 0:Kn.toDate)==null?void 0:sl.call(Kn),ps=Us||Kt,$s=!Us;const Ht=mt.durationDays||30;let It;mt.endDate?It=typeof mt.endDate=="string"?new Date(mt.endDate):((zi=(Vi=mt.endDate).toDate)==null?void 0:zi.call(Vi))||new Date(mt.endDate):(It=new Date(ps.getTime()+Ht*24*60*60*1e3),$s=!0),$s&&xs(B(I,"sales",Ot.id),{startDate:Us||Xt.fromDate(Kt),endDate:It.toISOString(),durationDays:Ht}).catch(hd=>{console.error("Error al actualizar startDate/endDate en Firestore:",hd)});const Ws=new Date,Tr=It.getTime()-ps.getTime(),Mi=Ws.getTime()-ps.getTime(),tl=It.getTime()-Ws.getTime(),na=Math.max(1,Math.ceil(Tr/(1e3*60*60*24))),Mm=Math.max(0,Math.ceil(tl/(1e3*60*60*24))),Om=Math.ceil(Mi/(1e3*60*60*24)),Oi=na>0?Math.min(100,Om/na*100):100;return{id:Ot.id,productName:mt.productName||"Producto sin nombre",category:mt.type||"netflix",amount:parseFloat(mt.price)||0,buyer:mt.buyerName||mt.customerName||"Comprador desconocido",buyerPhone:mt.buyerPhone||"No especificado",buyerEmail:mt.customerEmail||"No especificado",status:mt.status||"completed",saleDate:Kt,startDate:ps,endDate:It,durationDays:Ht,daysRemaining:Mm,totalDays:na,timeElapsedPercentage:Oi,accountDetails:mt.accountDetails||{email:"No disponible",password:"No disponible",profile:"N/A",pin:""},balance:parseFloat(mt.price)||0}});N(pt);const At=pt.filter(Ot=>Ot.status==="completed"&&Ot.accountDetails).map(Ot=>({...Ot.accountDetails,productName:Ot.productName,saleDate:Ot.saleDate,orderId:Ot.id}));L(At),Ve(!1)},Ge=>{console.error("Error fetching sales:",Ge),O("Error al cargar ventas"),Ve(!1)}),ze=setInterval(()=>{N(Ge=>Ge.map(pt=>{const At=new Date,Ot=new Date(pt.endDate).getTime()-new Date(pt.startDate).getTime(),mt=At.getTime()-new Date(pt.startDate).getTime(),Is=new Date(pt.endDate).getTime()-At.getTime(),Kt=Math.max(1,Math.ceil(Ot/(1e3*60*60*24))),Us=Math.max(0,Math.ceil(Is/(1e3*60*60*24))),ps=Math.ceil(mt/(1e3*60*60*24)),$s=Kt>0?Math.min(100,ps/Kt*100):100;return{...pt,daysRemaining:Us,totalDays:Kt,timeElapsedPercentage:$s}}))},6e4);return()=>{je(),clearInterval(ze)}},[d]),v.useEffect(()=>{if(!i)return;const ae=B(I,"providerBalances",i),je=Ie(ae,ze=>{ze.exists()?Pe(ze.data().balance||0):(Kr(ae,{balance:0,provider:i,updatedAt:be()}),Pe(0)),Ve(!1)},ze=>{console.error("Error fetching provider balance:",ze),O("Error al cargar el saldo del proveedor"),Ve(!1)});return()=>je()},[i]);const x=async()=>{try{await Tc(q),F("/login")}catch(ae){console.error("Error al cerrar sesión:",ae),se("Error","Error al cerrar sesión")}},m=ae=>{const{name:je,value:ze,type:Ge,checked:pt}=ae.target;G(At=>({...At,[je]:Ge==="checkbox"?pt:ze}))},S=ae=>{const{name:je,value:ze}=ae.target;De(Ge=>({...Ge,[je]:ze}))},Z=(ae,je=!1)=>{const ze=ae.target.files[0];if(ze){if(ze.size>10485760){je?ee("La imagen no debe exceder los 10MB"):O("La imagen no debe exceder los 10MB");return}const pt=new FileReader;pt.onloadend=()=>{je?R(At=>({...At,image:pt.result})):G(At=>({...At,image:pt.result}))},pt.readAsDataURL(ze)}},V=ae=>{const je=parseInt(ae.target.value)||1,ze=K.accounts||[];if(je>ze.length){const Ge=[...ze];for(;Ge.length<je;)Ge.push({email:"",password:"",profile:"",pin:""});G({...K,stock:je,accounts:Ge})}else if(je<ze.length){const Ge=ze.slice(0,Math.max(je,1));G({...K,stock:je,accounts:Ge})}else G({...K,stock:je})},re=ae=>{const je=parseInt(ae.target.value)||1;let Ge=[...H.accounts||[]];if(je>Ge.length)for(;Ge.length<je;)Ge.push({email:"",password:"",profile:"",pin:""});else je<Ge.length&&(Ge=Ge.slice(0,Math.max(je,1)));R({...H,stock:je,accounts:Ge})},ce=(ae,je,ze)=>{const Ge=[...K.accounts];Ge[ae]={...Ge[ae],[je]:ze},G({...K,accounts:Ge})},ie=(ae,je,ze)=>{R(Ge=>({...Ge,accounts:Ge.accounts.map((pt,At)=>At===ae?{...pt,[je]:ze}:pt)}))},J=ae=>{const{name:je,value:ze}=ae.target;j(Ge=>({...Ge,accountDetails:{...Ge.accountDetails,[je]:ze}}))},fe=async()=>{if(O(""),!K.name||!K.price){se("Error","Por favor complete todos los campos obligatorios");return}if(K.renewal&&!K.renewalPrice){se("Error","Por favor ingrese el precio de renovación");return}if(K.status==="En stock"&&K.accounts.some(je=>!je.email||!je.password)){se("Error","Por favor complete todos los campos de las cuentas");return}try{const ae={...K,provider:i,providerId:d,providerPhone:K.status==="En stock"?K.providerPhone||"":K.providerPhone||"No especificado",createdAt:be(),availableAccounts:K.status==="En stock"?K.accounts.length:0},je=await En(X(I,"products"),ae);if(K.status==="En stock"){const ze=X(I,`products/${je.id}/accounts`);for(const Ge of K.accounts)await En(ze,{email:Ge.email,password:Ge.password,profile:Ge.profile||"",pin:Ge.pin||"",status:"available"})}G({image:"",category:"Netflix",accountType:"Premium",name:"",price:"",renewal:!1,renewalPrice:"",stock:1,duration:"",providerPhone:"",details:"",terms:"",status:"En stock",accounts:[{email:"",password:"",profile:"",pin:""}]}),a("inventario"),se("Éxito","Producto subido exitosamente!")}catch(ae){console.error("Error al subir el producto:",ae),se("Error",`Error al subir el producto: ${ae.message}`)}},de=async ae=>{ee("");try{const je=me(X(I,"sales"),we("providerId","==",d),we("productName","==",ae.name)),Ge=(await jt(je)).docs.filter(mt=>{var Is;return mt.data().status==="completed"&&((Is=mt.data().accountDetails)==null?void 0:Is.email)}).map(mt=>mt.data().accountDetails.email),pt=X(I,`products/${ae.id}/accounts`),Ot=(await jt(pt)).docs.filter(mt=>mt.data().status==="available").map(mt=>({email:mt.data().email||"",password:mt.data().password||"",profile:mt.data().profile||"",pin:mt.data().pin||""}));R({id:ae.id,name:ae.name||"",image:ae.image||"",category:ae.category||"Netflix",accountType:ae.accountType||"Premium",status:ae.status||"En stock",stock:Ot.length||ae.stock||1,price:ae.price||"",renewal:ae.renewal||!1,renewalPrice:ae.renewalPrice||"",duration:ae.duration||"",providerPhone:ae.providerPhone||"",details:ae.details||"",terms:ae.terms||"",providerId:ae.providerId||d,accounts:ae.status==="En stock"?Ot.length>0?Ot:Array(Math.max(ae.stock||1,1)).fill({email:"",password:"",profile:"",pin:""}):[]}),W(!0)}catch(je){console.error("Error al preparar edición del producto:",je),ee("Error al preparar edición del producto")}},Se=async()=>{var ae;if(ee(""),!H.name||!H.price){ee("Por favor complete todos los campos obligatorios");return}if(H.renewal&&!H.renewalPrice){ee("Por favor ingrese el precio de renovación");return}if(H.status==="En stock"&&H.accounts.some(ze=>!ze.email||!ze.password)){ee("Por favor complete todos los campos de las cuentas");return}try{const je=B(I,"products",H.id);if(await Kr(je,{...H,providerId:H.providerId||d,availableAccounts:H.status==="En stock"&&((ae=H.accounts)==null?void 0:ae.length)||0},{merge:!0}),H.status==="En stock"){const ze=X(I,`products/${H.id}/accounts`),Ge=await jt(ze);for(const pt of Ge.docs)await wu(pt.ref);for(const pt of H.accounts)await En(ze,{email:pt.email,password:pt.password,profile:pt.profile||"",pin:pt.pin||"",status:"available"})}W(!1),se("Éxito","Producto actualizado exitosamente!")}catch(je){console.error("Error al actualizar el producto:",je),ee("Error al actualizar el producto")}},Ce=async ae=>{try{await wu(B(I,"products",ae)),se("Éxito","Producto eliminado exitosamente!")}catch(je){console.error("Error al eliminar el producto:",je),se("Error","Error al eliminar el producto")}},oe=async ae=>{try{await wu(B(I,"sales",ae)),se("Éxito","Pedido eliminado exitosamente!")}catch(je){console.error("Error al eliminar el pedido:",je),se("Error","Error al eliminar el pedido")}},ue=async()=>{try{const ae=q.currentUser;if(ae){const je=B(I,"users",ae.uid);await Kr(je,{preferences:Me.preferences,...Me.password&&{password:Me.password}},{merge:!0}),se("Éxito","Configuración actualizada correctamente!")}}catch(ae){console.error("Error al actualizar la configuración:",ae),se("Error","Error al actualizar la configuración")}},ke=ae=>{T(""),j({...ae,accountDetails:{email:ae.accountDetails.email||"",password:ae.accountDetails.password||"",profile:ae.accountDetails.profile||"",pin:ae.accountDetails.pin||""}}),He(!0)},ve=async()=>{if(T(""),!n.accountDetails.email||!n.accountDetails.password){T("Por favor complete todos los campos obligatorios de la cuenta");return}try{const ae=B(I,"sales",n.id);await xs(ae,{accountDetails:n.accountDetails,updatedAt:be()}),He(!1),se("Éxito","Detalles de la cuenta actualizados exitosamente!")}catch(ae){console.error("Error al actualizar los detalles de la cuenta:",ae),T("Error al actualizar los detalles de la cuenta")}},Oe=async ae=>{try{const je=B(I,"sales",ae);await xs(je,{status:"completed",updatedAt:be()}),se("Éxito","Pedido activado exitosamente!")}catch(je){console.error("Error al activar el pedido:",je),se("Error","Error al activar el pedido")}},Le=ge?0:g.reduce((ae,je)=>ae+(je.amount||0),0),Zt=k.reduce((ae,je)=>ae+(parseInt(je.stock)||0),0),_s=()=>{if(_)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(z)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Je,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:z}),e.jsx("button",{onClick:()=>O(""),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(su,{className:"mr-2"})," Inventario"]}),e.jsx("p",{className:"text-3xl font-bold text-white",children:k.length}),e.jsx("p",{className:"text-gray-400",children:"Productos registrados"}),e.jsxs("p",{className:"text-gray-400",children:["Stock total: ",Zt]}),e.jsx("button",{onClick:()=>a("inventario"),className:"text-cyan-400 hover:underline text-sm mt-2",children:"Ver inventario"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Cs,{className:"mr-2"})," Ganancias"]}),ge?e.jsx("div",{className:"animate-pulse text-gray-400",children:"Cargando..."}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",Le.toFixed(2)]}),e.jsxs("p",{className:"text-gray-400",children:[g.length," ventas realizadas"]}),e.jsxs("p",{className:"text-gray-400",children:["Disponible: S/ ",Re.toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center",children:[e.jsx(Xe,{className:"mr-2"})," Mi Cuenta"]}),e.jsx("p",{className:"text-lg font-medium text-white",children:i}),e.jsx("p",{className:"text-sm text-gray-400 truncate",children:o}),e.jsx("p",{className:"text-xs mt-2 bg-cyan-900 text-cyan-400 py-1 px-2 rounded-full inline-block",children:he?"Administrador":"Proveedor"}),e.jsx("button",{onClick:()=>a("configuracion"),className:"text-cyan-400 hover:underline text-sm mt-2",children:"Editar perfil"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(et,{className:"mr-2"})," Pedidos recientes"]}),g.length===0?e.jsx("p",{className:"text-gray-400 py-2 text-center",children:"No hay pedidos recientes."}):g.slice(0,3).map((ae,je)=>e.jsx("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"w-2/3",children:[e.jsx("p",{className:"font-medium text-white truncate",children:ae.productName}),e.jsxs("p",{className:"text-sm text-gray-400 truncate",children:["Comprador: ",ae.buyer]})]}),e.jsxs("div",{className:"text-right w-1/3",children:[e.jsxs("p",{className:"font-medium text-white",children:["S/ ",(ae.amount||0).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-400",children:w(ae.saleDate)})]})]})},je)),g.length>3&&e.jsx("button",{onClick:()=>a("pedidos"),className:"w-full mt-3 text-center text-cyan-400 hover:underline text-sm",children:"Ver todos los pedidos"})]})]});case"inventario":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white flex items-center",children:[e.jsx(su,{className:"mr-2"})," Inventario"]}),e.jsxs("button",{onClick:()=>a("subirProducto"),className:"px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl flex items-center w-full md:w-auto justify-center transition-all duration-300",children:[e.jsx(Mw,{className:"mr-2"})," Nuevo Producto"]})]}),k.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Precio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:k.map(ae=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[ae.image&&e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:ae.image,alt:ae.name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate max-w-xs",children:ae.name}),e.jsx("div",{className:"text-xs text-gray-400",children:D(ae.category)})]})]})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:["S/ ",(parseFloat(ae.price)||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:ae.stock||0}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ae.status==="En stock"?"bg-green-900/80 text-green-400":ae.status==="A pedido"?"bg-yellow-900/80 text-yellow-400":"bg-red-900/80 text-red-400"}`,children:ae.status})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>de(ae),className:"text-cyan-400 hover:text-cyan-500 mr-3",title:"Editar",children:e.jsx(Rw,{})}),e.jsx("button",{onClick:()=>Ce(ae.id),className:"text-red-400 hover:text-red-500",title:"Eliminar",children:e.jsx(Ow,{})})]})]},ae.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(su,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No tienes productos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Agrega tu primer producto para comenzar"}),e.jsxs("button",{onClick:()=>a("subirProducto"),className:"mt-4 px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl flex items-center mx-auto transition-all duration-300",children:[e.jsx(Mw,{className:"mr-2"})," Agregar Producto"]})]})]});case"cuentas":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(Qh,{className:"mr-2"})," Cuentas Vendidas"]}),y.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Perfil"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha de Venta"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:y.map((ae,je)=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:ae.productName}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:ae.email}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:ae.profile||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:w(ae.saleDate)})]},je))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qh,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay cuentas vendidas"}),e.jsx("p",{className:"text-gray-400",children:"Las cuentas vendidas aparecerán aquí"})]})]});case"subirProducto":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-4xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Subir Nuevo Producto"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Imagen del producto"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600/50 border-dashed rounded-xl bg-gray-700/50 backdrop-blur-sm",children:K.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:K.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>G({...K,image:""}),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(bt,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-gray-800/50 rounded-xl font-medium text-cyan-400 hover:text-cyan-500 focus-within:outline-none",children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:ae=>Z(ae),accept:"image/*"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs("div",{className:"col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:K.name,onChange:m,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Categoría*"}),e.jsxs("select",{name:"category",value:K.category,onChange:m,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Tipo de cuenta*"}),e.jsxs("select",{name:"accountType",value:K.accountType,onChange:m,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Estado*"}),e.jsxs("select",{name:"status",value:K.status,onChange:m,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"}),e.jsx("option",{value:"Agotado",children:"Agotado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:K.status==="Agotado"?0:K.stock,onChange:V,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"0",required:!0,disabled:K.status==="Agotado"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:K.price,onChange:m,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"renewal",checked:K.renewal,onChange:m,className:"h-4 w-4 text-cyan-400 focus:ring-cyan-400 border-gray-600/50 rounded"}),e.jsx("label",{className:"ml-2 text-gray-300",children:"¿Tiene renovación?"})]})]}),K.renewal&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio de renovación (S/)*"}),e.jsx("input",{type:"number",name:"renewalPrice",value:K.renewalPrice,onChange:m,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:K.duration,onChange:m,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Teléfono de contacto ",K.status==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:K.providerPhone,onChange:m,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: +51 987654321",required:K.status==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:K.details,onChange:m,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:K.terms,onChange:m,rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Especifica los términos y condiciones de uso"})]}),K.status==="En stock"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cuentas asociadas*"}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:K.accounts.map((ae,je)=>e.jsxs("div",{className:"border border-gray-600/50 rounded-xl p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("h4",{className:"text-sm font-medium text-white mb-3",children:["Cuenta ",je+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:ae.email,onChange:ze=>ce(je,"email",ze.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Contraseña*"}),e.jsx("input",{type:"text",value:ae.password,onChange:ze=>ce(je,"password",ze.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:ae.profile,onChange:ze=>ce(je,"profile",ze.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"PIN (opcional)"}),e.jsx("input",{type:"text",value:ae.pin,onChange:ze=>ce(je,"pin",ze.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: 1234"})]})]})]},je))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>a("inventario"),className:"px-4 py-2 bg-gray-700/50 text-gray-300 rounded-xl hover:bg-gray-600/50 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:fe,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Subir Producto"})]})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(Cs,{className:"mr-2"})," Ganancias"]}),e.jsx("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 mb-6 border border-gray-600/50 shadow-lg",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-1",children:"Ganancias totales"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[g.length," ventas realizadas"]}),ge?e.jsx("p",{className:"text-sm text-gray-400",children:"Disponible: Cargando..."}):e.jsxs("p",{className:"text-sm text-gray-400",children:["Disponible: S/ ",(Re||0).toFixed(2)]})]}),e.jsxs("div",{className:"text-3xl font-bold text-white mt-2 md:mt-0",children:["S/ ",Le.toFixed(2)]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Categoría"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Comprador"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contacto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:g.map((ae,je)=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:ae.productName}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:D(ae.category)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-white",children:ae.buyer}),e.jsx("div",{className:"text-xs text-gray-400",children:ae.buyerEmail})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:ae.buyerPhone}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:w(ae.saleDate)}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:["S/ ",(ae.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/80 text-green-400",children:"Completado"})})]},je))})]})}),g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Cs,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay ventas registradas"}),e.jsx("p",{className:"text-gray-400",children:"Tus ventas aparecerán aquí."})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Mis pedidos"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:te,onChange:ae=>Y(ae.target.value)}),e.jsx(at,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),g.length>0?e.jsx("div",{className:"space-y-6",children:g.filter(ae=>(ae.productName||"").toLowerCase().includes(te.toLowerCase())||(ae.category||"").toLowerCase().includes(te.toLowerCase())).map(ae=>{const je=ae.status==="pending",ze=ae.status==="refunded",Ge=ae.daysRemaining||0,pt=ae.timeElapsedPercentage||0;let At="bg-green-400";pt>70&&pt<=90?At="bg-yellow-400":pt>90&&(At="bg-red-400");const Ot=ze?e.jsx(Je,{className:"text-red-400"}):je?e.jsx(Vt,{className:"text-yellow-400"}):e.jsx(Vc,{className:"text-green-400"}),mt=ae.buyerPhone?ae.buyerPhone.replace(/^\+/,"").replace(/\D/g,""):null,Is=encodeURIComponent(`Hola ${ae.buyer||"Cliente"}, 😊

Soy el proveedor de tu suscripción ${ae.productName||"Sin nombre"} (N° Pedido: ${ae.id||"No especificado"}). ¿En qué puedo ayudarte hoy? Por favor, indícame tu consulta o problema.

Atentamente, BlackStreaming`),Kt=encodeURIComponent(`Hola ${ae.buyer||"Cliente"}, 😊

Te informamos que tu suscripción ${ae.productName||"Sin nombre"} (N° Pedido: ${ae.id||"No especificado"}) vencerá en ${Ge} día${Ge===1?"":"s"}. Te recomendamos renovarla a tiempo.

Detalles:
- Fecha de vencimiento: ${w(ae.endDate)}
- Precio: S/ ${(ae.amount||0).toFixed(2)}

Si necesitas ayuda, contáctanos. ¡Gracias por tu preferencia!
Atentamente, BlackStreaming`);return e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[Ot,e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:ae.productName}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Categoría: ",D(ae.category)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["S/ ",(ae.amount||0).toFixed(2)]}),e.jsx("p",{className:`text-xs font-medium ${At.replace("bg-","text-")}`,children:je?"Pendiente de activación":`${Ge} día${Ge===1?"":"s"} restante${Ge===1?"":"s"}`})]})]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${At}`,style:{width:`${Math.min(pt,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[pt.toFixed(0),"% completado"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsx("h5",{className:"text-sm font-medium text-cyan-400 mb-3",children:"Información del Comprador"}),e.jsxs("p",{className:"text-gray-300 text-sm",children:["Comprador: ",ae.buyer]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Teléfono: ",ae.buyerPhone]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-2xl border border-gray-600/50",children:[e.jsx("h5",{className:"text-sm font-medium text-cyan-400 mb-3",children:"Detalles de la Cuenta"}),ae.accountDetails?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-gray-300",children:["Email: ",ae.accountDetails.email]}),e.jsxs("p",{className:"text-gray-400",children:["Contraseña: ",ae.accountDetails.password]}),e.jsxs("p",{className:"text-gray-400",children:["Perfil: ",ae.accountDetails.profile||"N/A"]}),e.jsxs("p",{className:"text-gray-400",children:["PIN: ",ae.accountDetails.pin||"N/A"]})]}):e.jsx("p",{className:"text-gray-400",children:"No disponible"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4",children:[e.jsxs("button",{onClick:()=>ke(ae),className:"flex-1 py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Editar cuenta",children:[e.jsx(Rw,{size:18})," Editar Cuenta"]}),ae.status==="pending"&&e.jsxs("button",{onClick:()=>Oe(ae.id),className:"flex-1 py-3 px-4 bg-green-600 hover:bg-green-700 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Activar pedido",children:[e.jsx(Vc,{size:18})," Activar Pedido"]}),mt&&e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:`https://wa.me/${mt}?text=${Is}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-3 px-4 bg-green-600 hover:bg-green-700 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Contactar cliente",children:[e.jsx(Yr,{size:18})," Contactar"]}),!ze&&Ge<=7&&e.jsxs("a",{href:`https://wa.me/${mt}?text=${Kt}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-3 px-4 bg-yellow-600 hover:bg-yellow-700 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Notificar vencimiento",children:[e.jsx(Bo,{size:18})," Notificar"]})]}),e.jsxs("button",{onClick:()=>oe(ae.id),className:"flex-1 py-3 px-4 bg-red-600 hover:bg-red-700 text-white rounded-xl flex items-center justify-center gap-2 transition-all duration-300",title:"Eliminar pedido",children:[e.jsx(Ow,{size:18})," Eliminar"]})]})]})]},ae.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(et,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay pedidos registrados"}),e.jsx("p",{className:"text-gray-400",children:"Tus pedidos aparecerán aquí"})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-4xl mx-auto border border-gray-600/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(zc,{className:"mr-2"})," Configuración"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:Me.email,disabled:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",value:Me.password,onChange:S,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Dejar en blanco para no cambiar"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Preferencias"}),e.jsx("textarea",{name:"preferences",value:Me.preferences,onChange:S,rows:"4",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Especifica tus preferencias o notas"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:ue,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Guardar Cambios"})})]})]});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white flex",children:[e.jsxs("div",{className:`${s?"translate-x-0":"-translate-x-full"} fixed md:static md:translate-x-0 inset-y-0 left-0 w-64 bg-gray-900/90 backdrop-blur-md z-40 transition-transform duration-300 md:w-64 border-r border-gray-700/50`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700/50",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{className:"md:hidden text-gray-400 hover:text-white",onClick:()=>t(!1),children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"p-4 space-y-2",children:[e.jsxs("button",{onClick:()=>{a("inicio"),t(!1)},className:`w-full flex items-center px-4 py-2 rounded-xl transition-all duration-300 ${r==="inicio"?"bg-cyan-500 text-white":"text-gray-300 hover:bg-gray-700/50 hover:text-white"}`,children:[e.jsx(Rm,{className:"mr-3"})," Inicio"]}),e.jsxs("button",{onClick:()=>{a("inventario"),t(!1)},className:`w-full flex items-center px-4 py-2 rounded-xl transition-all duration-300 ${r==="inventario"?"bg-cyan-500 text-white":"text-gray-300 hover:bg-gray-700/50 hover:text-white"}`,children:[e.jsx(su,{className:"mr-3"})," Inventario"]}),e.jsxs("button",{onClick:()=>{a("cuentas"),t(!1)},className:`w-full flex items-center px-4 py-2 rounded-xl transition-all duration-300 ${r==="cuentas"?"bg-cyan-500 text-white":"text-gray-300 hover:bg-gray-700/50 hover:text-white"}`,children:[e.jsx(Qh,{className:"mr-3"})," Cuentas Vendidas"]}),e.jsxs("button",{onClick:()=>{a("pedidos"),t(!1)},className:`w-full flex items-center px-4 py-2 rounded-xl transition-all duration-300 ${r==="pedidos"?"bg-cyan-500 text-white":"text-gray-300 hover:bg-gray-700/50 hover:text-white"}`,children:[e.jsx(et,{className:"mr-3"})," Pedidos"]}),e.jsxs("button",{onClick:()=>{a("ganancias"),t(!1)},className:`w-full flex items-center px-4 py-2 rounded-xl transition-all duration-300 ${r==="ganancias"?"bg-cyan-500 text-white":"text-gray-300 hover:bg-gray-700/50 hover:text-white"}`,children:[e.jsx(Cs,{className:"mr-3"})," Ganancias"]}),e.jsxs("button",{onClick:()=>{a("configuracion"),t(!1)},className:`w-full flex items-center px-4 py-2 rounded-xl transition-all duration-300 ${r==="configuracion"?"bg-cyan-500 text-white":"text-gray-300 hover:bg-gray-700/50 hover:text-white"}`,children:[e.jsx(zc,{className:"mr-3"})," Configuración"]}),e.jsxs("button",{onClick:x,className:"w-full flex items-center px-4 py-2 rounded-xl text-gray-300 hover:bg-gray-700/50 hover:text-white transition-all duration-300",children:[e.jsx(Ct,{className:"mr-3"})," Cerrar Sesión"]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("header",{className:"bg-gray-900/90 backdrop-blur-md p-4 flex justify-between items-center border-b border-gray-700/50",children:[e.jsx("button",{className:"md:hidden text-gray-400 hover:text-white",onClick:()=>t(!0),children:e.jsx(zt,{size:24})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h1",{className:"text-lg font-semibold text-white",children:"Panel de Proveedor"}),he&&e.jsx("span",{className:"text-xs bg-cyan-900 text-cyan-400 py-1 px-2 rounded-full",children:"Admin"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("p",{className:"text-sm text-gray-400 hidden sm:block",children:i}),e.jsx("div",{className:"h-8 w-8 rounded-full bg-cyan-500 flex items-center justify-center",children:e.jsx(Xe,{className:"text-white"})})]})]}),e.jsx("main",{className:"flex-1 p-4 sm:p-6 overflow-auto",children:_s()})]}),u&&H&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-4xl border border-gray-800/50 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Editar Producto"}),e.jsx("button",{onClick:()=>W(!1),className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(bt,{size:20})})]}),U&&e.jsx("div",{className:"mb-4 p-3 bg-red-900/50 text-red-400 rounded-xl",children:U}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Imagen del producto"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600/50 border-dashed rounded-xl bg-gray-700/50 backdrop-blur-sm",children:H.image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:H.image,alt:"Preview",className:"mx-auto h-48 w-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>R({...H,image:""}),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(bt,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxs("label",{htmlFor:"edit-file-upload",className:"relative cursor-pointer bg-gray-800/50 rounded-xl font-medium text-cyan-400 hover:text-cyan-500 focus-within:outline-none",children:[e.jsx("span",{children:"Subir una imagen"}),e.jsx("input",{id:"edit-file-upload",name:"edit-file-upload",type:"file",className:"sr-only",onChange:ae=>Z(ae,!0),accept:"image/*"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF hasta 10MB"})]})})]}),e.jsxs("div",{className:"col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre del producto*"}),e.jsx("input",{type:"text",name:"name",value:H.name,onChange:ae=>R({...H,name:ae.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: Netflix Premium 1 mes",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Categoría*"}),e.jsxs("select",{name:"category",value:H.category,onChange:ae=>R({...H,category:ae.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Netflix",children:"Netflix"}),e.jsx("option",{value:"Spotify",children:"Spotify"}),e.jsx("option",{value:"Disney",children:"Disney+"}),e.jsx("option",{value:"Max",children:"Max"}),e.jsx("option",{value:"Prime Video",children:"Prime Video"}),e.jsx("option",{value:"Vix",children:"Vix"}),e.jsx("option",{value:"Crunchyroll",children:"Crunchyroll"}),e.jsx("option",{value:"Canva",children:"Canva"}),e.jsx("option",{value:"ChatGPT",children:"ChatGPT"}),e.jsx("option",{value:"Redes Sociales",children:"Redes Sociales"}),e.jsx("option",{value:"Dgo",children:"DGO"}),e.jsx("option",{value:"Liga Max",children:"Liga Max"}),e.jsx("option",{value:"Movistar Play",children:"Movistar Play"}),e.jsx("option",{value:"Youtube",children:"YouTube"}),e.jsx("option",{value:"Deezer",children:"Deezer"}),e.jsx("option",{value:"Tidal",children:"Tidal"}),e.jsx("option",{value:"Vpn",children:"VPN"}),e.jsx("option",{value:"WinTv",children:"WinTV"}),e.jsx("option",{value:"Apple Music",children:"Apple Music"}),e.jsx("option",{value:"Apple Tv",children:"Apple TV"}),e.jsx("option",{value:"Iptv",children:"IPTV"}),e.jsx("option",{value:"Flujo Tv",children:"Flujo TV"}),e.jsx("option",{value:"Viki Rakuten",children:"Viki Rakuten"}),e.jsx("option",{value:"Pornhub",children:"Pornhub"}),e.jsx("option",{value:"Paramount",children:"Paramount"}),e.jsx("option",{value:"Licencias",children:"Licencias"}),e.jsx("option",{value:"Capcut",children:"Capcut"}),e.jsx("option",{value:"Duolingo",children:"Duolingo"}),e.jsx("option",{value:"BuscaPersonas",children:"BuscaPersonas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Tipo de cuenta*"}),e.jsxs("select",{name:"accountType",value:H.accountType,onChange:ae=>R({...H,accountType:ae.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Estado*"}),e.jsxs("select",{name:"status",value:H.status,onChange:ae=>R({...H,status:ae.target.value,stock:ae.target.value==="Agotado"?0:H.stock,accounts:ae.target.value==="En stock"?H.accounts.length?H.accounts:Array(H.stock||1).fill({email:"",password:"",profile:"",pin:""}):[]}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",children:[e.jsx("option",{value:"En stock",children:"En stock"}),e.jsx("option",{value:"A pedido",children:"A pedido"}),e.jsx("option",{value:"Agotado",children:"Agotado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Stock*"}),e.jsx("input",{type:"number",name:"stock",value:H.status==="Agotado"?0:H.stock,onChange:re,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"0",required:!0,disabled:H.status==="Agotado"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio (S/)*"}),e.jsx("input",{type:"number",name:"price",value:H.price,onChange:ae=>R({...H,price:ae.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 9.99",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"renewal",checked:H.renewal,onChange:ae=>R({...H,renewal:ae.target.checked}),className:"h-4 w-4 text-cyan-400 focus:ring-cyan-400 border-gray-600/50 rounded"}),e.jsx("label",{className:"ml-2 text-gray-300",children:"¿Tiene renovación?"})]})]}),H.renewal&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Precio de renovación (S/)*"}),e.jsx("input",{type:"number",name:"renewalPrice",value:H.renewalPrice,onChange:ae=>R({...H,renewalPrice:ae.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: 8.99",step:"0.01",min:"0",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Duración (días)"}),e.jsx("input",{type:"number",name:"duration",value:H.duration,onChange:ae=>R({...H,duration:ae.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Dejar vacío para ilimitado",min:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 mb-2",children:["Teléfono de contacto ",H.status==="A pedido"?"*":""]}),e.jsx("input",{type:"text",name:"providerPhone",value:H.providerPhone,onChange:ae=>R({...H,providerPhone:ae.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Ej: +51 987654321",required:H.status==="A pedido"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Detalles del producto"}),e.jsx("textarea",{name:"details",value:H.details,onChange:ae=>R({...H,details:ae.target.value}),rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Describe los detalles y características del producto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Términos y condiciones"}),e.jsx("textarea",{name:"terms",value:H.terms,onChange:ae=>R({...H,terms:ae.target.value}),rows:"3",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all placeholder-gray-500",placeholder:"Especifica los términos y condiciones de uso"})]}),H.status==="En stock"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cuentas asociadas*"}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Debe completar todas las cuentas según el stock indicado"}),e.jsx("div",{className:"space-y-4",children:H.accounts.map((ae,je)=>e.jsxs("div",{className:"border border-gray-600/50 rounded-xl p-4 bg-gray-700/50 backdrop-blur-sm",children:[e.jsxs("h4",{className:"text-sm font-medium text-white mb-3",children:["Cuenta ",je+1]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Correo electrónico*"}),e.jsx("input",{type:"email",value:ae.email,onChange:ze=>ie(je,"email",ze.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Contraseña*"}),e.jsx("input",{type:"text",value:ae.password,onChange:ze=>ie(je,"password",ze.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",value:ae.profile,onChange:ze=>ie(je,"profile",ze.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"PIN (opcional)"}),e.jsx("input",{type:"text",value:ae.pin,onChange:ze=>ie(je,"pin",ze.target.value),className:"w-full px-3 py-2 rounded-xl bg-gray-800/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm",placeholder:"Ej: 1234"})]})]})]},je))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-gray-700/50 text-gray-300 rounded-xl hover:bg-gray-600/50 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:Se,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Actualizar Producto"})]})]})]})})}),Qe&&n&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Editar Detalles de Cuenta"}),e.jsx("button",{onClick:()=>He(!1),className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(bt,{size:20})})]}),p&&e.jsx("div",{className:"mb-4 p-3 bg-red-900/50 text-red-400 rounded-xl",children:p}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico*"}),e.jsx("input",{type:"email",name:"email",value:n.accountDetails.email,onChange:J,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Contraseña*"}),e.jsx("input",{type:"text",name:"password",value:n.accountDetails.password,onChange:J,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Perfil (opcional)"}),e.jsx("input",{type:"text",name:"profile",value:n.accountDetails.profile,onChange:J,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",placeholder:"Ej: Perfil 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"PIN (opcional)"}),e.jsx("input",{type:"text",name:"pin",value:n.accountDetails.pin,onChange:J,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",placeholder:"Ej: 1234"})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>He(!1),className:"px-4 py-2 bg-gray-700/50 text-gray-300 rounded-xl hover:bg-gray-600/50 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{onClick:ve,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-xl transition-all duration-300",children:"Guardar Cambios"})]})]})]})})}),e.jsx(IF,{isOpen:$.isOpen,title:$.title,message:$.message,onClose:ne})]})},SF=({isOpen:s,message:t,title:r,onClose:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(bt,{size:20})})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})})]})})}):null,CF=({isOpen:s,user:t,onClose:r,onSave:a})=>{const[i,l]=v.useState((t==null?void 0:t.balance)||0),[o,c]=v.useState(""),d=h=>{if(h.preventDefault(),c(""),isNaN(i)||i<0){c("Por favor, ingrese un saldo válido (número no negativo).");return}a(t.id,parseFloat(i))};return s?e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-md rounded-2xl shadow-2xl w-full max-w-md border border-gray-800/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Editar Saldo de ",t.username]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-all duration-300",children:e.jsx(bt,{size:20})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nuevo Saldo (S/)"}),e.jsx("input",{type:"number",value:i,onChange:h=>l(h.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",min:"0",step:"0.01",required:!0}),o&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-all duration-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Guardar"})]})]})]})})}):null},EF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState("inicio"),[i,l]=v.useState(""),[o,c]=v.useState(""),[d,h]=v.useState(0),[g,N]=v.useState([]),[k,E]=v.useState([]),[y,L]=v.useState([]),[_,A]=v.useState([]),[z,O]=v.useState([]),[K,G]=v.useState([]),[H,R]=v.useState([]),[u,W]=v.useState([]),[U,ee]=v.useState(0),[te,Y]=v.useState({day:0,week:0,month:0,total:0}),[$,pe]=v.useState(!0),[Me,De]=v.useState({}),[he,ye]=v.useState(null),[ge,Ve]=v.useState(""),[Re,Pe]=v.useState({isOpen:!1,message:"",title:""}),[Qe,He]=v.useState({isOpen:!1,user:null}),[n,j]=v.useState(!1),[p,T]=v.useState({message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}}),F=Pt(),q=(oe,ue)=>{Pe({isOpen:!0,title:oe,message:ue})},se=()=>{Pe({isOpen:!1,message:"",title:""})},ne=oe=>{He({isOpen:!0,user:oe})},w=()=>{He({isOpen:!1,user:null})},D=async(oe,ue)=>{try{De(ve=>({...ve,[`balance_${oe}`]:!0}));const ke=B(I,"users",oe);await xs(ke,{balance:ue,updatedAt:be()}),q("Éxito","Saldo actualizado exitosamente"),w()}catch(ke){console.error("Error al actualizar saldo:",ke),q("Error",ke.message||"Error al actualizar el saldo")}finally{De(ke=>({...ke,[`balance_${oe}`]:!1}))}},P=async oe=>{oe.preventDefault();try{De(Le=>({...Le,notification:!0}));const{message:ue,roles:ke}=p;if(!ue.trim())throw new Error("El mensaje no puede estar vacío");const ve=Object.keys(ke).filter(Le=>ke[Le]);if(ve.length===0)throw new Error("Debe seleccionar al menos un rol");const Oe=B(I,"notifications","adminMessage");await Kr(Oe,{message:ue.trim(),roles:ve,updatedAt:be()}),T({message:"",roles:{user:!1,affiliate:!1,provider:!1,admin:!1}}),q("Éxito","Notificación enviada exitosamente")}catch(ue){console.error("Error al enviar notificación:",ue),q("Error",ue.message||"Error al enviar la notificación")}finally{De(ue=>({...ue,notification:!1}))}};v.useEffect(()=>{const oe=Dt(Ke,ue=>{!ue&&!n?F("/login"):ue&&(c(ue.email),x(ue.uid),pe(!1))});return()=>oe()},[F,n]);const x=async oe=>{try{const ue=B(I,"users",oe),ke=await st(ue);if(ke.exists()){const ve=ke.data();l(ve.username||ve.email.split("@")[0])}else ye("Usuario no encontrado en la base de datos")}catch(ue){console.error("Error al obtener el nombre de usuario:",ue),ye("Error al cargar datos del usuario")}},m=oe=>{const ke=oe*5,ve=ke*.25,Oe=ke*.05;Y({day:Oe,week:ve,month:ke,total:ke})};v.useEffect(()=>{(async()=>{try{const ae=await jt(X(I,"users")),je=ae.size,ze=ae.docs.map(It=>({id:It.id,...It.data()}));h(je),N(ze.slice(-5)),E(ze),m(je);const Ge=me(X(I,"pendingRegistrations"),we("status","==","pending")),pt=await jt(Ge);L(pt.docs.map(It=>({id:It.id,...It.data()})));const At=me(X(I,"pendingTopUps"),we("status","==","pendiente")),Ot=await jt(At);A(Ot.docs.map(It=>({id:It.id,...It.data()})));const mt=me(X(I,"withdrawals"),we("status","==","pending")),Is=await jt(mt);O(Is.docs.map(It=>({id:It.id,...It.data()})));const Kt=await jt(X(I,"topUpsHistory"));G(Kt.docs.map(It=>({id:It.id,...It.data()})));const Us=await jt(X(I,"withdrawalsHistory"));R(Us.docs.map(It=>({id:It.id,...It.data()})));const $s=(await jt(X(I,"sales"))).docs.map(It=>({id:It.id,...It.data()}));W($s);const Ht=$s.reduce((It,Ws)=>It+(Ws.price||0),0);ee(Ht)}catch(ae){console.error("Error al obtener datos:",ae),ye("Error al cargar datos")}})();const ue=Ie(X(I,"users"),ae=>{const je=ae.size,ze=ae.docs.map(Ge=>({id:Ge.id,...Ge.data()}));h(je),N(ze.slice(-5)),E(ze),m(je)}),ke=Ie(me(X(I,"pendingRegistrations"),we("status","==","pending")),ae=>{L(ae.docs.map(je=>({id:je.id,...je.data()})))}),ve=Ie(me(X(I,"pendingTopUps"),we("status","==","pendiente")),ae=>{A(ae.docs.map(je=>({id:je.id,...je.data()})))}),Oe=Ie(me(X(I,"withdrawals"),we("status","==","pending")),ae=>{O(ae.docs.map(je=>({id:je.id,...je.data()})))}),Le=Ie(X(I,"topUpsHistory"),ae=>{G(ae.docs.map(je=>({id:je.id,...je.data()})))}),Zt=Ie(X(I,"withdrawalsHistory"),ae=>{R(ae.docs.map(je=>({id:je.id,...je.data()})))}),_s=Ie(X(I,"sales"),ae=>{const je=ae.docs.map(Ge=>({id:Ge.id,...Ge.data()}));W(je);const ze=je.reduce((Ge,pt)=>Ge+(pt.price||0),0);ee(ze)});return()=>{ue(),ke(),ve(),Oe(),Le(),Zt(),_s()}},[]);const S=async oe=>{try{De(Oe=>({...Oe,[oe]:!0}));const ue=B(I,"withdrawals",oe),ke=z.find(Oe=>Oe.id===oe);if(!(ke!=null&&ke.providerId))throw new Error("Proveedor no encontrado para el retiro");await xs(ue,{status:"approved",updatedAt:be()});const ve=B(I,"users",ke.providerId);await xs(ve,{balance:it(-ke.amount||0)}),await Kr(B(I,"withdrawalsHistory",oe),{...ke,status:"approved",updatedAt:be()}),ye(null),q("Éxito","Retiro aprobado exitosamente")}catch(ue){console.error("Error al aprobar retiro:",ue),ye(ue.message||"Error al aprobar el retiro"),q("Error",ue.message||"Error al aprobar el retiro")}finally{De(ue=>({...ue,[oe]:!1}))}},Z=async oe=>{try{De(ve=>({...ve,[oe]:!0}));const ue=B(I,"withdrawals",oe);await xs(ue,{status:"denied",updatedAt:be()});const ke=z.find(ve=>ve.id===oe);await Kr(B(I,"withdrawalsHistory",oe),{...ke,status:"denied",updatedAt:be()}),ye(null),q("Éxito","Retiro rechazado exitosamente")}catch(ue){console.error("Error al rechazar retiro:",ue),ye(ue.message||"Error al rechazar el retiro"),q("Error",ue.message||"Error al rechazar el retiro")}finally{De(ue=>({...ue,[oe]:!1}))}},V=async oe=>{try{De(Oe=>({...Oe,[oe]:!0}));const ue=B(I,"pendingTopUps",oe),ke=_.find(Oe=>Oe.id===oe);if(!(ke!=null&&ke.userId))throw new Error("Usuario no encontrado para la recarga");await xs(ue,{status:"aprobado",updatedAt:be()});const ve=B(I,"users",ke.userId);await xs(ve,{balance:it(ke.amount||0)}),await Kr(B(I,"topUpsHistory",oe),{...ke,status:"aprobado",updatedAt:be()}),ye(null),q("Éxito","Recarga aprobada exitosamente")}catch(ue){console.error("Error al aprobar recarga:",ue),ye(ue.message||"Error al aprobar la recarga"),q("Error",ue.message||"Error al aprobar la recarga")}finally{De(ue=>({...ue,[oe]:!1}))}},re=async oe=>{try{De(ve=>({...ve,[oe]:!0}));const ue=B(I,"pendingTopUps",oe);await xs(ue,{status:"rechazado",updatedAt:be()});const ke=_.find(ve=>ve.id===oe);await Kr(B(I,"topUpsHistory",oe),{...ke,status:"rechazado",updatedAt:be()}),ye(null),q("Éxito","Recarga rechazada exitosamente")}catch(ue){console.error("Error al rechazar recarga:",ue),ye(ue.message||"Error al rechazar la recarga"),q("Error",ue.message||"Error al rechazar la recarga")}finally{De(ue=>({...ue,[oe]:!1}))}},ce=async oe=>{try{De(Zt=>({...Zt,[oe]:!0})),j(!0);const ue=B(I,"pendingRegistrations",oe),ke=y.find(Zt=>Zt.id===oe);if(!ke)throw new Error("Solicitud no encontrada");if((await QM(Ke,ke.email)).length>0)throw new Error("El correo ya está registrado");const Le=(await a3(Ke,ke.email,ke.password)).user;await Kr(B(I,"users",Le.uid),{username:ke.username,email:ke.email,phone:ke.phone||null,role:ke.role||"usuario",balance:0,referrerCode:ke.referrerCode||null,createdAt:be()}),await xs(ue,{status:"approved",updatedAt:be()}),await Tc(Ke),ye(null),q("Éxito","Solicitud de registro aprobada exitosamente")}catch(ue){console.error("Error al aceptar solicitud:",ue),ye(ue.message||"Error al aceptar la solicitud de registro"),q("Error",ue.message||"Error al aceptar la solicitud de registro")}finally{De(ue=>({...ue,[oe]:!1})),j(!1)}},ie=async oe=>{try{De(ke=>({...ke,[oe]:!0}));const ue=B(I,"pendingRegistrations",oe);await xs(ue,{status:"denied",updatedAt:be()}),ye(null),q("Éxito","Solicitud de registro rechazada exitosamente")}catch(ue){console.error("Error al rechazar solicitud:",ue),ye(ue.message||"Error al rechazar la solicitud de registro"),q("Error",ue.message||"Error al rechazar la solicitud de registro")}finally{De(ue=>({...ue,[oe]:!1}))}},J=async()=>{try{await Tc(Ke),F("/")}catch(oe){console.error("Error al cerrar sesión:",oe),ye(oe.message||"Error al cerrar sesión"),q("Error",oe.message||"Error al cerrar sesión")}},fe=async oe=>{oe.preventDefault();try{De(Oe=>({...Oe,config:!0}));const ue=Ke.currentUser;if(!ue)throw new Error("Usuario no autenticado");const ke=B(I,"users",ue.uid);await xs(ke,{username:i,updatedAt:be()});const ve=oe.target.password.value;if(ve){if(ve.length<6)throw new Error("La contraseña debe tener al menos 6 caracteres");await Wg(ue,ve)}ye(null),q("Éxito","Cambios guardados exitosamente")}catch(ue){console.error("Error al guardar cambios:",ue),ye(ue.message||"Error al guardar cambios"),q("Error",ue.message||"Error al guardar cambios")}finally{De(ue=>({...ue,config:!1}))}},de=oe=>{if(!oe)return"No especificada";try{const ue=oe.toDate?oe.toDate():new Date(oe);return isNaN(ue.getTime())?"Fecha inválida":ue.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},Se=oe=>{if(oe.status==="pending")return"Pendiente";if(!oe.expirationDate)return"Activo";const ue=new Date,ke=oe.expirationDate.toDate?oe.expirationDate.toDate():new Date(oe.expirationDate);return ue>ke?"Expirado":"Activo"},Ce=()=>{if($)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"})});if(he)return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Je,{className:"mx-auto text-4xl text-red-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:he}),e.jsx("button",{onClick:()=>ye(null),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Aceptar"})]});switch(r){case"inicio":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:["Bienvenido, ",e.jsx("span",{className:"text-cyan-400",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:i})]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(Yr,{className:"mr-2 text-cyan-400"}),e.jsx("span",{children:o})]})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Ganancias del mes"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",te.month.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"(5 soles por cada usuario)"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/50 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"Usuarios registrados"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:d}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Total Gananacias: S/ ",te.total.toFixed(2)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Últimos usuarios"}),g.length>0?g.map(oe=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:oe.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-cyan-900/80 text-cyan-400",children:oe.role||"usuario"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:oe.email})]},oe.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay usuarios registrados"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Solicitudes pendientes"}),y.length>0?y.slice(0,3).map(oe=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:oe.username||"Sin nombre"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-900/80 text-purple-400",children:oe.role||"usuario"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:oe.email})]},oe.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay solicitudes pendientes"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Retiros pendientes"}),z.length>0?z.slice(0,3).map(oe=>e.jsxs("div",{className:"border-b border-gray-600/50 py-3 last:border-0 hover:bg-gray-600/50 transition-all duration-300 rounded-xl px-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium text-white",children:oe.provider||"Sin proveedor"}),e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-yellow-900/80 text-yellow-400",children:["S/ ",(oe.amount||0).toFixed(2)]})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Método: ",oe.method||"No especificado"]})]},oe.id)):e.jsx("p",{className:"text-gray-400 py-2",children:"No hay retiros pendientes"})]})]})]});case"notificaciones":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Enviar Notificación"}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Mensaje de la Notificación"}),e.jsx("textarea",{value:p.message,onChange:oe=>T({...p,message:oe.target.value}),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all resize-y",rows:"5",placeholder:"Escribe el mensaje para los usuarios...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Enviar a los siguientes roles"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["user","affiliate","provider","admin"].map(oe=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:p.roles[oe],onChange:ue=>T({...p,roles:{...p.roles,[oe]:ue.target.checked}}),className:"h-4 w-4 text-cyan-400 focus:ring-cyan-400 border-gray-600 rounded"}),e.jsx("span",{className:"text-gray-300 capitalize",children:oe})]},oe))})]}),e.jsx("button",{type:"submit",disabled:Me.notification,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium transition-all duration-300 disabled:bg-cyan-800",children:Me.notification?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Enviar Notificación"})]})]});case"usuarios":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Solicitudes de registro"}),y.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Rol"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:y.map(oe=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:oe.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:oe.email}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-cyan-900/80 text-cyan-400",children:oe.role||"usuario"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ce(oe.id),disabled:Me[oe.id],className:"p-2 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 disabled:bg-green-800",title:"Aceptar",children:Me[oe.id]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(Gh,{size:16})}),e.jsx("button",{onClick:()=>ie(oe.id),disabled:Me[oe.id],className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-all duration-300 disabled:bg-red-800",title:"Rechazar",children:Me[oe.id]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(bt,{size:16})})]})})]},oe.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ec,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay solicitudes de registro pendientes"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Todos los usuarios (",d,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar usuarios...",className:"px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all text-sm placeholder-gray-500",value:ge,onChange:oe=>Ve(oe.target.value)}),e.jsx(Gp,{className:"absolute right-3 top-2.5 text-gray-400"})]})]}),k.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Rol"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Saldo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:k.filter(oe=>(oe.username||"").toLowerCase().includes(ge.toLowerCase())||(oe.email||"").toLowerCase().includes(ge.toLowerCase())).map(oe=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:oe.username||"Sin nombre"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:oe.email}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-cyan-900/80 text-cyan-400",children:oe.role||"usuario"})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(oe.balance||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>ne(oe),disabled:Me[`balance_${oe.id}`],className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-300 disabled:bg-blue-800",title:"Editar Saldo",children:Me[`balance_${oe.id}`]?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(Ty,{size:16})})})]},oe.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ec,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay usuarios registrados"})]})]})]});case"recargas":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Recargas pendientes"}),_.length>0?e.jsx("div",{className:"space-y-4",children:_.map(oe=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-cyan-900/80 rounded-full flex items-center justify-center text-cyan-400",children:e.jsx(Cs,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:oe.username||"Sin nombre"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Solicitado: ",de(oe.requestedAt)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-medium text-white",children:["S/ ",(oe.amount||0).toFixed(2)]})})]}),e.jsx("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>V(oe.id),disabled:Me[oe.id],className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-green-800 transition-all duration-300",children:Me[oe.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(Gh,{size:18})," Aprobar Recarga"]})}),e.jsx("button",{onClick:()=>re(oe.id),disabled:Me[oe.id],className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-red-800 transition-all duration-300",children:Me[oe.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(bt,{size:18})," Rechazar Recarga"]})})]})})]},oe.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Cs,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay recargas pendientes"}),e.jsx("p",{className:"text-gray-400",children:"Todas las solicitudes han sido procesadas"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de recargas"}),K.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:K.map(oe=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:oe.username||"Sin nombre"}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(oe.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${oe.status==="aprobado"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:oe.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:de(oe.updatedAt)})]},oe.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Cs,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay historial de recargas"})]})]})]});case"retiros":return e.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Solicitudes de retiro"}),z.length>0?e.jsx("div",{className:"space-y-4",children:z.map(oe=>e.jsxs("div",{className:"border border-gray-600/50 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm px-4 py-3 border-b border-gray-600/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-900/80 rounded-full flex items-center justify-center text-yellow-400",children:e.jsx(Cs,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:oe.provider||"Sin proveedor"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Email: ",oe.providerEmail||"No disponible"]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Solicitado: ",de(oe.createdAt)]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Método: ",oe.method||"No especificado"]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Cuenta: ",oe.account||"No especificada"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-medium text-white",children:["S/ ",(oe.amount||0).toFixed(2)]})})]}),e.jsx("div",{className:"p-4 bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>S(oe.id),disabled:Me[oe.id],className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-green-800 transition-all duration-300",children:Me[oe.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(Gh,{size:18})," Aprobar Retiro"]})}),e.jsx("button",{onClick:()=>Z(oe.id),disabled:Me[oe.id],className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 disabled:bg-red-800 transition-all duration-300",children:Me[oe.id]?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(bt,{size:18})," Rechazar Retiro"]})})]})})]},oe.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Cs,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"No hay retiros pendientes"}),e.jsx("p",{className:"text-gray-400",children:"Todas las solicitudes han sido procesadas"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de retiros"}),H.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Proveedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Método"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:H.map(oe=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:oe.provider||"Sin proveedor"}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(oe.amount||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${oe.status==="approved"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:oe.status})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:de(oe.updatedAt)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:oe.method||"No especificado"})]},oe.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Cs,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay historial de retiros"})]})]})]});case"pedidos":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Ventas General"}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center mb-6 border border-gray-600/50",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Total Ventas"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",U.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"Suma de todos los pedidos realizados"})]}),e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"Historial de Pedidos"}),u.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-700/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Nombre del Producto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Precio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Proveedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usuario Comprador"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fecha y Hora de Compra"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Detalles de la Cuenta"})]})}),e.jsx("tbody",{className:"bg-gray-800/50 divide-y divide-gray-600/50",children:u.map(oe=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:oe.productName||"Sin nombre"}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-white",children:["S/ ",(oe.price||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:oe.provider||"Sin proveedor"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:oe.customerName||"Sin usuario"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:de(oe.purchaseDate)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Se(oe)==="Pendiente"?"bg-yellow-900/80 text-yellow-400":Se(oe)==="Activo"?"bg-green-900/80 text-green-400":"bg-red-900/80 text-red-400"}`,children:Se(oe)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-300",children:oe.accountDetails?`Email: ${oe.accountDetails.email||"N/A"}, Contraseña: ${oe.accountDetails.password||"N/A"}, Perfil: ${oe.accountDetails.profile||"N/A"}, PIN: ${oe.accountDetails.pin||"No especificado"}`:"N/A"})]},oe.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(et,{className:"mx-auto text-4xl text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-300",children:"No hay pedidos registrados"})]})]});case"ganancias":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-6xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Reporte de ganancias"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias hoy"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",te.day.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"(5 soles por usuario)"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias esta semana"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",te.week.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"(25% del total de usuarios)"})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-6 text-center border border-gray-600/50 shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Ganancias este mes"}),e.jsxs("p",{className:"text-3xl font-bold text-white",children:["S/ ",te.month.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"(5 soles por cada usuario)"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-600/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Resumen de ganancias"}),e.jsxs("span",{className:"px-3 py-1 bg-cyan-900/80 text-cyan-400 rounded-full text-sm",children:["Total: S/ ",te.total.toFixed(2)]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600/50",children:[e.jsx("thead",{className:"bg-gray-600/50 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Concepto"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Cálculo"})]})}),e.jsxs("tbody",{className:"bg-gray-700/50 divide-y divide-gray-600/50",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-300",children:"Ganancias por usuario"}),e.jsx("td",{className:"px-4 py-3 text-white",children:"S/ 5.00"}),e.jsx("td",{className:"px-4 py-3 text-gray-400",children:"Fijo por cada usuario registrado"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-300",children:"Total usuarios"}),e.jsx("td",{className:"px-4 py-3 text-white",children:d}),e.jsx("td",{className:"px-4 py-3 text-gray-400",children:"Usuarios activos en el sistema"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-300",children:"Ganancias totales"}),e.jsxs("td",{className:"px-4 py-3 text-white",children:["S/ ",te.total.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-gray-400",children:[d," usuarios × S/ 5.00"]})]})]})]})})]})]});case"configuracion":return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Configuración de cuenta"}),e.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nombre de usuario"}),e.jsx("input",{type:"text",value:i,onChange:oe=>l(oe.target.value),className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:o,readOnly:!0,className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-gray-400 border border-gray-600/50 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Nueva contraseña (opcional)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Nueva contraseña",className:"w-full px-4 py-2 rounded-xl bg-gray-700/50 text-white border border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all"})]}),e.jsx("button",{type:"submit",disabled:Me.config,className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-medium mt-4 transition-all duration-300 disabled:bg-cyan-800",children:Me.config?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent mx-auto"}):"Guardar cambios"})]}),e.jsx("div",{className:"mt-8 border-t border-gray-600/50 pt-6",children:e.jsxs("button",{onClick:J,className:"flex items-center justify-center gap-2 w-full py-3 px-4 bg-red-900/80 hover:bg-red-800 text-white rounded-xl font-medium transition-all duration-300",children:[e.jsx(Ct,{})," Cerrar sesión"]})})]});default:return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-xl text-center max-w-2xl mx-auto border border-gray-700/50",children:[e.jsx(Je,{className:"mx-auto text-4xl text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sección no encontrada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"La sección que estás buscando no existe o no está disponible."}),e.jsx("button",{onClick:()=>a("inicio"),className:"px-4 py-2 bg-cyan-500 text-white rounded-xl hover:bg-cyan-600 transition-all duration-300",children:"Volver al inicio"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-blue-950 text-gray-200",children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!s),className:"p-2 rounded-full bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 transition-all duration-300 border border-gray-700/50",children:e.jsx(zt,{className:"text-xl"})})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 transform ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-40 w-64 bg-gray-900/90 backdrop-blur-md border-r border-gray-800/50 overflow-y-auto`,children:e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-cyan-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700/50 transition-all duration-300",children:e.jsx(bt,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-8 p-3 bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold",children:i.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text white",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:"Administrador"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"inicio",label:"Inicio",icon:Rm},{id:"notificaciones",label:"Notificaciones",icon:Bo},{id:"usuarios",label:"Usuarios",icon:ec},{id:"recargas",label:"Recargas",icon:Cs},{id:"retiros",label:"Retiros",icon:Cs},{id:"pedidos",label:"Pedidos",icon:et},{id:"ganancias",label:"Ganancias",icon:z0},{id:"configuracion",label:"Configuración",icon:zc}].map(oe=>e.jsxs("button",{onClick:()=>{a(oe.id),t(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 ${r===oe.id?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"text-gray-300 hover:bg-gray-800/50 hover:text-cyan-400"}`,children:[e.jsx(oe.icon,{className:"text-lg"}),e.jsx("span",{children:oe.label})]},oe.id))}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("button",{onClick:J,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-900/20 rounded-xl transition-all duration-300 border border-red-900/50",children:[e.jsx(Ct,{className:"text-lg"}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})}),e.jsx("main",{className:"md:ml-64 p-4 sm:p-6 min-h-screen",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:Ce()})}),e.jsx(SF,{isOpen:Re.isOpen,title:Re.title,message:Re.message,onClose:se}),e.jsx(CF,{isOpen:Qe.isOpen,user:Qe.user,onClose:w,onSave:D})]})},TF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-yellow-400",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-yellow-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Netflix")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,netflix:P.length}))},w=>{E("Error al cargar productos de Netflix"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"netflix_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"netflix"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"netflix"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Netflix`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-red-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Netflix...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-red-400 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-red-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-red-400",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-600/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center endangered justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Netflix"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus series y películas favoritas con nuestras cuentas premium de Netflix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-red-400 hover:text-red-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,0,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-red-400 bg-red-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-red-400",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-red-400",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-red-400",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-red-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-red-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-red-500 via-red-600 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-red-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-400 focus:border-red-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-400 bg-gray-700 border-gray-600 rounded focus:ring-red-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-red-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-red-400 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},_F=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-blue-400",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-blue-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Disney")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,disney:P.length}))},w=>{E("Error al cargar productos de Disney"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"disney_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"disney"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"disney"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Disney`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-blue-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Disney+...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-blue-400 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-blue-400",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616469829935-3e3dd2f5a4a4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Disney+"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tus películas y series favoritas de Disney, Pixar, Marvel, Star Wars y más con nuestras cuentas premium de Disney+"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-400 hover:text-blue-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-blue-400 bg-blue-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-blue-400",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-blue-400",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-blue-400",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-blue-400 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-blue-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-400 bg-gray-700 border-gray-600 rounded focus:ring-blue-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-blue-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-400 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},DF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-purple-400",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-purple-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Max")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,max:P.length}))},w=>{E("Error al cargar productos de Max"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"max_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"max"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"max"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Max`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-purple-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-purple-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-purple-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-purple-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Max...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-purple-400 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-purple-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-purple-400",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-purple-600/80 hover:bg-purple-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-purple-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-purple-500 text-white hover:bg-purple-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-purple-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-purple-600/30 text-white border border-purple-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1598899134739-5b0b7a14ef9d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Max"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de series y películas exclusivas, desde dramas épicos hasta blockbusters, con nuestras cuentas premium de Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-purple-400 hover:text-purple-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(128,0,128,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-purple-400 bg-purple-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-purple-400",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-purple-400",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-purple-400",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-purple-400 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-purple-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-purple-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-purple-500 via-purple-600 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-purple-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-purple-400 bg-gray-700 border-gray-600 rounded focus:ring-purple-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-purple-400 hover:text-purple-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-purple-400 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-purple-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-purple-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-purple-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-purple-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all",children:"Aceptar"})})]})})]})},AF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-green-400",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-green-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Spotify")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,spotify:P.length}))},w=>{E("Error al cargar productos de Spotify"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"spotify_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"spotify"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"spotify"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Spotify`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Spotify...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-green-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-green-400",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1513828583688-c52646db42da?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Spotify"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de tu música y podcasts favoritos sin interrupciones con nuestras cuentas premium de Spotify"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,255,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-400 bg-green-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-green-400",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-green-400",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-green-400",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-green-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-green-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-green-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-400 bg-gray-700 border-gray-600 rounded focus:ring-green-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-green-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-green-400 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},RF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Prime Video")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,primevideo:P.length}))},w=>{E("Error al cargar productos de Prime Video"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"primevideo_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"primevideo"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"primevideo"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Prime Video`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Prime Video...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616531770192-6eaea74c2456?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Prime Video"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de películas, series originales y contenido exclusivo con nuestras cuentas premium de Prime Video"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-500 hover:text-blue-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-blue-500 bg-blue-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-blue-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-blue-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-blue-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-blue-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-blue-500 hover:text-blue-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},MF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-red-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-red-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Vix")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,vix:P.length}))},w=>{E("Error al cargar productos de Vix"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"vix_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"vix"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vix"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Vix`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Vix...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-red-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-red-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-600/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-0f1a4a73a3a9?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Vix"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de telenovelas, películas y series en español con nuestras cuentas premium de Vix"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-red-500 hover:text-red-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,0,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-red-500 bg-red-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-red-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-red-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-red-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-red-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-red-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-red-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-red-500 via-red-600 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-gray-700 border-gray-600 rounded focus:ring-red-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-red-500 hover:text-red-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},OF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-teal-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-teal-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Canva")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,canva:P.length}))},w=>{E("Error al cargar productos de Canva"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"canva_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"canva"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"canva"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Canva`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-teal-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-teal-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-teal-500 text-white rounded-full hover:bg-teal-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-teal-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Canva...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-teal-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-teal-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-teal-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-teal-600/80 hover:bg-teal-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-teal-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-teal-500 text-white hover:bg-teal-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-teal-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-teal-600/30 text-white border border-teal-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-teal-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-4b5f9f2972d9?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Canva"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Crea diseños profesionales con acceso a todas las herramientas y plantillas de Canva Pro"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-teal-500 hover:text-teal-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(13,148,136,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-teal-500 bg-teal-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-teal-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-teal-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-teal-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-teal-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-teal-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-teal-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-teal-500 via-teal-600 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-teal-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-teal-500 bg-gray-700 border-gray-600 rounded focus:ring-teal-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-teal-500 hover:text-teal-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-teal-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-teal-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-teal-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-teal-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-teal-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-teal-500 text-white rounded-md hover:bg-teal-600 transition-all",children:"Aceptar"})})]})})]})},LF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-green-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-green-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","ChatGPT")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,chatgpt:P.length}))},w=>{E("Error al cargar productos de ChatGPT"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"chatgpt_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"chatgpt"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"chatgpt"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=ChatGPT`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en ChatGPT...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-green-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-green-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-green-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1677442136019-2d7430f771bb?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de ChatGPT"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a las funciones avanzadas de ChatGPT Plus para conversaciones más inteligentes y productivas"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-500 hover:text-green-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(13,148,136,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-500 bg-green-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-green-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-green-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-green-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-green-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-green-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-lime-500 hover:from-green-600 hover:to-lime-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-green-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-500 bg-gray-700 border-gray-600 rounded focus:ring-green-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-green-500 hover:text-green-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-green-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},VF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-orange-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-orange-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Crunchyroll")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,crunchyroll:P.length}))},w=>{E("Error al cargar productos de Crunchyroll"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"crunchyroll_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"crunchyroll"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"crunchyroll"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Crunchyroll`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-orange-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-orange-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-orange-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-orange-500 text-white rounded-full hover:bg-orange-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-orange-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Crunchyroll...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-orange-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-orange-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-orange-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-orange-600/80 hover:bg-orange-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-orange-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-orange-500 text-white hover:bg-orange-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-orange-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-orange-600/30 text-white border border-orange-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1618336753974-8d9f3044f8b6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Crunchyroll"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de anime, manga y series asiáticas sin anuncios con nuestras cuentas premium de Crunchyroll"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-orange-500 hover:text-orange-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,165,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-orange-500 bg-orange-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-orange-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-orange-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-orange-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-orange-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-orange-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-orange-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-orange-500 via-orange-600 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-orange-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-orange-500 bg-gray-700 border-gray-600 rounded focus:ring-orange-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-orange-500 hover:text-orange-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-orange-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-orange-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-orange-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-orange-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-orange-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-all",children:"Aceptar"})})]})})]})},zF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-pink-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-pink-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Redes Sociales")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,redessociales:P.length}))},w=>{E("Error al cargar productos de Redes Sociales"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"redessociales_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"redessociales"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"redessociales"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Redes Sociales`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-pink-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-pink-500 text-white rounded-full hover:bg-pink-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-pink-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Redes Sociales...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-pink-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-pink-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-pink-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-pink-600/80 hover:bg-pink-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-pink-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-pink-500 text-white hover:bg-pink-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-pink-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-pink-600/30 text-white border border-pink-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-7d873e6e8b58?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Redes Sociales"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de funciones exclusivas en tus plataformas favoritas de redes sociales"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-pink-500 hover:text-pink-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(244,114,182,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-pink-500 bg-pink-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-pink-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-pink-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-pink-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-pink-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-pink-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-pink-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-pink-500 via-pink-600 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-pink-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-pink-500 bg-gray-700 border-gray-600 rounded focus:ring-pink-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-pink-500 hover:text-pink-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-pink-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-pink-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-pink-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-pink-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-pink-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Aceptar"})})]})})]})},BF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-green-400",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-green-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Apple Music")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,applemusic:P.length}))},w=>{E("Error al cargar productos de Apple Music"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[productId].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"applemusic_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"applemusic"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"applemusic"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Apple Music`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple Music...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-green-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-green-400",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514327605112-b887c0e61c0a?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Apple Music Premium"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de música sin límites con nuestras suscripciones a Apple Music"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,255,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-400 bg-green-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-green-400",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-green-400",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-green-400",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-green-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-green-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-green-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-400 bg-gray-700 border-gray-600 rounded focus:ring-green-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-green-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-green-400 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},FF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-gray-200",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-gray-200",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-600",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Apple Tv")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,appletv:P.length}))},w=>{E("Error al cargar productos de AppleTV"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"appletv_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"appletv"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"appletv"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=AppleTV`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-200 text-gray-900 flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-gray-200 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-gray-200 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gray-200 text-gray-900 rounded-full hover:bg-gray-300 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-200 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Apple TV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-gray-200 focus:border-gray-200 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-gray-200 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-gray-200"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-gray-200",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-gray-200/80 text-gray-900 hover:bg-gray-300 transition-all text-sm",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-gray-300 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-gray-200 text-gray-900 hover:bg-gray-300 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-200",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-gray-200/30 text-white border border-gray-200/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-200"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-0f1a91f70d79?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Apple TV+: Streaming Exclusivo"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de series y películas originales de Apple TV+ en cualquier dispositivo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-gray-200 hover:text-gray-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,255,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-gray-200 bg-gray-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-gray-200",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-gray-200",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-gray-200",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-gray-200 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-gray-200",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-gray-200",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-gray-200 via-gray-300 to-white/80 text-gray-900 hover:from-gray-300 hover:to-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-gray-200"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-gray-200 focus:border-gray-200 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-gray-200 focus:border-gray-200 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-gray-200 bg-gray-700 border-gray-600 rounded focus:ring-gray-200"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-gray-200 hover:text-gray-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-gray-200 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-gray-200 text-gray-900 rounded-md hover:bg-gray-300 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-gray-200"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-gray-200"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-gray-200 text-gray-900 rounded-md hover:bg-gray-300 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-gray-200"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-gray-200"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-gray-200 text-gray-900 rounded-md hover:bg-gray-300 transition-all",children:"Aceptar"})})]})})]})},UF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-blue-700",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-blue-700",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Iptv")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,iptv:P.length}))},w=>{E("Error al cargar productos de IPTV"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"iptv_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"iptv"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"iptv"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Iptv`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-700 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-blue-700 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-700 text-white rounded-full hover:bg-blue-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-700 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en IPTV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-700 focus:border-blue-700 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-blue-700 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-700"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-blue-700",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-700/80 hover:bg-blue-800 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-700 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-700 text-white hover:bg-blue-800 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-700",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-700/30 text-white border border-blue-700/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-700/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"IPTV Premium"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de una amplia variedad de canales con nuestras suscripciones a IPTV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-700 hover:text-blue-600 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-blue-700 bg-blue-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-blue-700",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-blue-700",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-blue-700",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-blue-700 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-700",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-700",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-700 via-blue-800 to-cyan-700 hover:from-blue-800 hover:to-cyan-800 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-blue-700"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-700 focus:border-blue-700 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-700 focus:border-blue-700 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-700 bg-gray-700 border-gray-600 rounded focus:ring-blue-700"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-blue-700 hover:text-blue-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-700 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-700"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-700"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-700"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-700"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-all",children:"Aceptar"})})]})})]})},$F=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-red-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-red-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-600",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Flujo Tv")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,flujotv:P.length}))},w=>{E("Error al cargar productos de FlujoTV"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"flujotv_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"flujotv"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"flujotv"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=FlujoTV`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-200 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en FlujoTV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-red-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-red-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-red-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-200",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-200"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-500/30 text-white border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-red-500/20 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1554050855-c84a7f9e3b7b?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"FlujoTV: Entretenimiento Sin Límites"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Canales en vivo, películas, series y deportes en alta definición para toda la familia"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-gray-200 hover:text-red-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,255,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-gray-200 bg-gray-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-red-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-red-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-red-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-gray-200 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-red-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-red-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-red-500 via-red-600 to-red-700 text-white hover:from-red-600 hover:to-red-800":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-red-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-500 bg-gray-700 border-gray-600 rounded focus:ring-red-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-red-500 hover:text-red-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-all",children:"Aceptar"})})]})})]})},WF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-pink-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-pink-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Viki Rakuten")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,vikirakuten:P.length}))},w=>{E("Error al cargar productos de Viki Rakuten"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"vikirakuten_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"vikirakuten"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vikirakuten"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Viki Rakuten`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-pink-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-pink-500 text-white rounded-full hover:bg-pink-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-pink-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Viki Rakuten...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-pink-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-pink-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-pink-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-pink-500/80 hover:bg-pink-600 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-pink-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-pink-500 text-white hover:bg-pink-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-pink-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-pink-500/30 text-white border border-pink-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1536440136628-0f1a1181fb95?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Viki Rakuten"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de los mejores dramas asiáticos con nuestras suscripciones a Viki Rakuten"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-pink-500 hover:text-pink-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-pink-500 bg-pink-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-pink-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-pink-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-pink-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-pink-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-pink-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-pink-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-pink-500 via-pink-600 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-pink-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-pink-500 bg-gray-700 border-gray-600 rounded focus:ring-pink-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-pink-500 hover:text-pink-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-pink-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-pink-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-pink-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-pink-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-pink-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-all",children:"Aceptar"})})]})})]})},qF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-red-700",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-red-700",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Pornhub")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,pornhub:P.length}))},w=>{E("Error al cargar productos de Pornhub"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"pornhub_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"pornhub"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"pornhub"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Pornhub`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-red-700 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-red-700 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-700 text-white rounded-full hover:bg-red-800 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-700 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Pornhub...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-700 focus:border-red-700 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-red-700 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-red-700"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-red-700",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-700/80 hover:bg-red-800 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-700 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-red-700 text-white hover:bg-red-800 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-700",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-700/30 text-white border border-red-700/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-700/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310766-78a391814432?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Pornhub"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a contenido premium con nuestras suscripciones a Pornhub"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-red-700 hover:text-red-600 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-red-700 bg-red-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-red-700",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-red-700",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-red-700",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-red-700 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-red-700",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-red-700",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-red-700 via-red-800 to-rose-700 hover:from-red-800 hover:to-rose-800 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-red-700"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-700 focus:border-red-700 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-700 focus:border-red-700 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-700 bg-gray-700 border-gray-600 rounded focus:ring-red-700"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-red-700 hover:text-red-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-red-700 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-700"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-700"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-700"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-700"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-all",children:"Aceptar"})})]})})]})},HF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-600",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Paramount")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,paramount:P.length}))},w=>{E("Error al cargar productos de Paramount"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"paramount_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"paramount"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"paramount"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Paramount`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-200 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Paramount+...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-200",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-200"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-500/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-500/20 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1485846234645-a62644f84728?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Paramount+: Cine y Series"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de películas, series y contenido exclusivo de Paramount, CBS, MTV y más"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-gray-200 hover:text-blue-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,255,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-gray-200 bg-gray-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-blue-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-blue-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-blue-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-gray-200 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 text-white hover:from-blue-600 hover:to-blue-800":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-blue-500 hover:text-blue-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Nota: Paramount+ ofrece contenido de marcas como CBS, MTV, Nickelodeon y más. Asegúrate de cumplir con las políticas de uso del servicio."})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."}),e.jsx("li",{children:"Paramount+ incluye contenido de diversas marcas como CBS, MTV, y Nickelodeon. Asegúrate de cumplir con las políticas de uso del servicio."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},GF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-600",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Licencias")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,licencias:P.length}))},w=>{E("Error al cargar productos de Licencias"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"licencias_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"licencias"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"licencias"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Licencias`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-200 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Licencias...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-200",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-200"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-500/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-500/20 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Licencias de Software"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Accede a licencias de software confiables y originales para tus necesidades"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Licencias Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-gray-200 hover:text-blue-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,255,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-gray-200 bg-gray-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-blue-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-blue-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-blue-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-gray-200 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 text-white hover:from-blue-600 hover:to-blue-800":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-blue-500 hover:text-blue-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Nota: Asegúrate de cumplir con las políticas de uso de las licencias adquiridas."})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."}),e.jsx("li",{children:"Las licencias adquiridas deben usarse conforme a las políticas del proveedor del software."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},QF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-green-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-green-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Capcut")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,capcut:P.length}))},w=>{E("Error al cargar productos de Capcut"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"capcut_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"capcut"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"capcut"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Capcut`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Capcut...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-green-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-green-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-green-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-500/80 hover:bg-green-600 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-500/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1616530940355-351fabd68c34?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Capcut"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Edita videos como profesional con nuestras suscripciones a Capcut"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-500 hover:text-green-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-500 bg-green-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-green-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-green-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-green-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-green-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-green-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-green-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-500 bg-gray-700 border-gray-600 rounded focus:ring-green-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-green-500 hover:text-green-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},KF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-green-400",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-green-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Duolingo")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,duolingo:P.length}))},w=>{E("Error al cargar productos de Duolingo"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"duolingo_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"duolingo"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"duolingo"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Duolingo`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-400 text-white rounded-full hover:bg-green-500 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Duolingo...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-green-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-green-400",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-400/80 hover:bg-green-500 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-green-400 text-white hover:bg-green-500 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-400/30 text-white border border-green-400/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-400/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-479437144403?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Duolingo"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Aprende idiomas de forma divertida con nuestras suscripciones a Duolingo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,0,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-400 bg-green-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-green-400",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-green-400",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-green-400",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-green-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-green-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-green-400 via-green-500 to-emerald-500 hover:from-green-500 hover:to-emerald-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-green-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-400 bg-gray-700 border-gray-600 rounded focus:ring-green-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-green-400 hover:text-green-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-green-400 text-white rounded-md hover:bg-green-500 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-green-400 text-white rounded-md hover:bg-green-500 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-green-400 text-white rounded-md hover:bg-green-500 transition-all",children:"Aceptar"})})]})})]})},YF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Dgo")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,dgo:P.length}))},w=>{E("Error al cargar productos de Dgo"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"dgo_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"dgo"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"dgo"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Dgo`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Dgo...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522202176988-66273c2b6e3c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Dgo"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de streaming de alta calidad con Dgo"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-500 hover:text-blue-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(59,130,246,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-blue-500 bg-blue-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-blue-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-blue-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-blue-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-blue-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-blue-500 hover:text-blue-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},XF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligaMax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-green-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-green-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Liga Max")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,ligaMax:P.length}))},w=>{E("Error al cargar productos de Liga Max"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"ligaMax_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"ligaMax"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"ligaMax"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Liga Max`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Liga Max...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-green-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-green-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-green-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligaMax",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligaMax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1557672172-298e090bd0f1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Liga Max"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de deportes en vivo con Liga Max"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-500 hover:text-green-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(34,197,94,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-500 bg-green-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-green-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-green-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-green-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-green-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-green-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-green-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-500 bg-gray-700 border-gray-600 rounded focus:ring-green-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-green-500 hover:text-green-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-green-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},JF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarPlay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Movistar Play")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,movistarPlay:P.length}))},w=>{E("Error al cargar productos de Movistar Play"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"movistarPlay_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"movistarPlay"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"movistarPlay"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Movistar Play`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Movistar Play...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-600/80 hover:bg-blue-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarPlay",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-600/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarPlay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522778119026-d4747c2b3b72?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Movistar Play"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de películas, series y TV en vivo con Movistar Play"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-500 hover:text-blue-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(59,130,246,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-blue-500 bg-blue-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-blue-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-blue-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-blue-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-blue-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-blue-500 hover:text-blue-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},ZF=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-red-600",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-red-600",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Youtube")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,youtube:P.length}))},w=>{E("Error al cargar productos de YouTube"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"youtube_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"youtube"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"youtube"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Youtube`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-red-600 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-red-600 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-red-600 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en YouTube...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-red-600 focus:border-red-600 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-red-600 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-red-600"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-red-600",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-red-600/80 hover:bg-red-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-red-600 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-red-600 text-white hover:bg-red-700 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-red-600",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-red-600/30 text-white border border-red-600/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-600/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1611162617210-7d673bf0f crawl&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de YouTube"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de videos sin anuncios y contenido exclusivo con YouTube Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-red-600 hover:text-red-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(239,68,68,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-red-600 bg-red-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-red-600",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-red-600",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-red-600",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-red-600 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-red-600",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-red-600",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-red-600 via-red-700 to-pink-600 hover:from-red-700 hover:to-pink-700 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-red-600"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-600 focus:border-red-600 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-red-600 focus:border-red-600 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-red-600 bg-gray-700 border-gray-600 rounded focus:ring-red-600"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-red-600 hover:text-red-500 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-red-600 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-600"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-600"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-red-600"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-red-600"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-all",children:"Aceptar"})})]})})]})},eU=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-purple-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-purple-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Deezer")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,deezer:P.length}))},w=>{E("Error al cargar productos de Deezer"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"deezer_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"deezer"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"deezer"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Deezer`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-purple-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-purple-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-purple-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-purple-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Deezer...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-purple-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-purple-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-purple-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-purple-500/80 hover:bg-purple-600 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-purple-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-purple-500 text-white hover:bg-purple-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-purple-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-purple-500/30 text-white border border-purple-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Deezer"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Escucha música sin anuncios y disfruta de alta calidad con Deezer Premium"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-purple-500 hover:text-purple-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(139,92,246,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-purple-500 bg-purple-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-purple-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-purple-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-purple-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-purple-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-purple-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-purple-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-purple-500 via-purple-600 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-purple-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-purple-500 bg-gray-700 border-gray-600 rounded focus:ring-purple-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-purple-500 hover:text-purple-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-purple-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-purple-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-purple-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-purple-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-purple-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-all",children:"Aceptar"})})]})})]})},tU=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-green-400",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-green-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Tidal")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,tidal:P.length}))},w=>{E("Error al cargar productos de Tidal"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"tidal_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:selected.NodesRenewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"tidal"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"tidal"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Tidal`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md attorno-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Tidal...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-green-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-green-400",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Cuentas Premium de Tidal"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de música en alta fidelidad y contenido exclusivo con nuestras cuentas premium de Tidal"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,255,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-400 bg-green-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-green-400",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-green-400",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-green-400",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-green-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-green-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-green-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-400 bg-gray-700 border-gray-600 rounded focus:ring-green-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-green-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-green-400 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},sU=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-green-400",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-green-400",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","Vpn")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,vpn:P.length}))},w=>{E("Error al cargar productos de VPN"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"vpn_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","Youtube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"vpn"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"vpn"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Vpn`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-green-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-red-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-green-400 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-green-400 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en VPN...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-green-400 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-green-400"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-green-400",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-green-600/80 hover:bg-green-700 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-green-400 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-green-400",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-400"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-400"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-gray-400"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-400"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Youtube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-green-600/30 text-white border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-orange-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321310762-4794370e6a50?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Servicios VPN Premium"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Navega de forma segura y privada con nuestros servicios VPN de alta calidad"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-green-400 hover:text-green-300 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(0,255,0,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-green-400 bg-green-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-green-400",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-green-400",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-green-400",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-green-400",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-green-400",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-green-500 via-green-600 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-green-400"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-green-400 bg-gray-700 border-gray-600 rounded focus:ring-green-400"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-green-400 hover:text-blue-300 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-green-400 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-green-400"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-green-400"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all",children:"Aceptar"})})]})})]})},rU=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-400",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","WinTv")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,wintv:P.length}))},w=>{E("Error al cargar productos de WinTV"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"wintv_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"wintv"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"wintv"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=WinTv`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-blue-500 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en WinTV...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-500/80 hover:bg-blue-600 transition-all text-sm text-white",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-blue-500",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-500/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-700"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-700"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-400"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"WinTV: Televisión Digital Premium"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Disfruta de más de 40 canales en vivo, grabaciones y contenido exclusivo con WinTV"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Planes Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-blue-500 hover:text-blue-400 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(59,130,246,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-blue-500 bg-blue-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-blue-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-blue-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-blue-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-blue-500 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-blue-500 hover:text-blue-400 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})},aU=()=>{const[s,t]=v.useState(!1),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(null),[d,h]=v.useState(0),[g,N]=v.useState(!0),[k,E]=v.useState(null),[y,L]=v.useState(null),[_,A]=v.useState(null),[z,O]=v.useState(!1),[K,G]=v.useState(!1),[H,R]=v.useState(null),[u,W]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0,dgo:0,ligamax:0,movistarplay:0,youtube:0,deezer:0,tidal:0,vpn:0,wintv:0,applemusic:0,appletv:0,iptv:0,flujotv:0,vikirakuten:0,pornhub:0,paramount:0,licencias:0,capcut:0,duolingo:0,buscapersonas:0}),[U,ee]=v.useState(""),[te,Y]=v.useState({}),$=Pt(),pe=n=>{const j=Number(n);return isNaN(j)?"0.00":j.toFixed(2)},Me=n=>{const j=Math.floor(n),p=n%1>=.5,T=5-j-(p?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(j)].map((F,q)=>e.jsx(Fe,{className:"text-blue-500",size:16,fill:"currentColor"},`full-${q}`)),p&&e.jsx(Fe,{className:"text-blue-500",size:16,fill:"url(#half-gradient)",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})}),[...Array(T)].map((F,q)=>e.jsx(Fe,{className:"text-gray-600",size:16},`empty-${q}`))]})};v.useEffect(()=>{const n=Dt(Ke,async j=>{if(j)try{const p=await st(B(I,"users",j.uid));if(p.exists()){const T=p.data();c({id:j.uid,name:T.username||"Usuario",email:j.email,orders:T.orders||[],role:T.role||"user",phone:T.phone||""}),h(Number(T.balance)||0)}else E("Usuario no encontrado en la base de datos"),console.error("Usuario no encontrado en la base de datos")}catch(p){E("Error al cargar datos del usuario"),console.error(p)}else c(null),h(0);N(!1)});return()=>n()},[]),v.useEffect(()=>{const n=me(X(I,"products"),we("category","==","BuscaPersonas")),j=Ie(n,async w=>{const D=w.docs.map(x=>{const m=x.data();return{id:x.id,...m,price:Number(m.price)||0,stock:Number(m.stock||m.available||0),accountDetails:m.email||m.details||"Detalles no disponibles",terms:m.terms||"Términos del proveedor",provider:m.provider||"Proveedor no especificado",providerId:m.providerId||"",providerPhone:m.providerPhone||"",acceptsOrders:m.status==="A pedido",duration:m.duration||"1 mes",accountType:m.accountType||"No especificado",status:m.status||"En stock",image:m.image||"https://via.placeholder.com/300",renewal:m.renewal||!1,renewalPrice:Number(m.renewalPrice)||Number(m.price)*.9}}),P=await Promise.all(D.map(async x=>{let m={provider:x.provider,providerPhone:x.providerPhone};if(!x.provider||x.provider==="Proveedor no especificado")try{if(x.providerId){const S=await st(B(I,"users",x.providerId));S.exists()&&(m={provider:S.data().username||S.data().email||x.provider,providerPhone:S.data().phoneNumber||x.providerPhone})}}catch(S){console.error("Error al cargar datos del proveedor:",S)}return{...x,...m}}));a(P),W(x=>({...x,buscapersonas:P.length}))},w=>{E("Error al cargar productos de Busca Personas"),console.error(w)}),p=me(X(I,"ratings")),T=Ie(p,w=>{const D={};w.docs.forEach(x=>{const m=x.data(),S=m.providerId;D[S]||(D[S]=[]),D[S].push(Number(m.rating)||0)});const P={};Object.keys(D).forEach(x=>{const m=D[x],S=m.length?m.reduce((Z,V)=>Z+V,0)/m.length:1;P[x]=Math.min(Math.max(S,1),5)}),Y(P)},w=>{console.error("Error al cargar calificaciones de proveedores:",w)}),F=me(X(I,"buscapersonas_accounts"),we("status","==","available")),q=Ie(F,w=>{const D=w.docs.map(P=>({id:P.id,...P.data(),productId:P.data().productId||"",providerId:P.data().providerId||""}));l(D)},w=>{console.error("Error al cargar cuentas:",w)}),ne=["Netflix","Spotify","Disney","Max","Prime Video","Vix","Crunchyroll","Canva","ChatGPT","Redes Sociales","Dgo","Liga Max","Movistar Play","YouTube","Deezer","Tidal","Vpn","Win Tv","Apple Music","Apple Tv","Iptv","Flujo Tv","Viki Rakuten","Pornhub","Paramount","Licencias","Capcut","Duolingo","Busca Personas"].map(w=>{const D=w.toLowerCase().replace(/\s+/g,""),P=me(X(I,"products"),we("category","==",w));return Ie(P,x=>{W(m=>({...m,[D]:x.docs.length}))},x=>{console.error(`Error al cargar productos de ${w}:`,x)})});return()=>{j(),T(),q(),ne.forEach(w=>w())}},[]);const De=n=>{if(!o){R({message:"Por favor, inicia sesión para realizar una compra.",onClose:()=>$("/login")});return}if(d<n.price){R({message:"Saldo insuficiente para realizar esta compra."});return}if(!n.providerId||n.providerId===""){R({message:"Este producto no tiene un proveedor asociado. Contacta al administrador."});return}L({product:n,customerName:o.name,phoneNumber:""})},he=async()=>{if(!document.getElementById("termsCheck").checked){E("Debes aceptar los términos y condiciones");return}if(!/^\d{9}$/.test(y.phoneNumber)){E("El número de WhatsApp debe tener 9 dígitos");return}try{N(!0);const n=y.product;if(!n.providerId||n.providerId==="")throw new Error("El producto no tiene un proveedor asociado");let j=null;n.status==="En stock"?j=await ot(I,async p=>{const T=B(I,"products",n.id),F=await p.get(T);if(!F.exists())throw new Error("Producto no encontrado");const q=F.data();if(q.availableAccounts<=0&&q.stock<=0)throw new Error("No hay cuentas disponibles para este producto");const se=X(I,`products/${n.id}/accounts`),ne=me(se,we("status","==","available"),Ft(1)),w=await jt(ne);if(w.empty)throw new Error("No hay cuentas disponibles en la subcolección");const D=w.docs[0],P=D.ref,x=D.data(),m=B(I,"users",o.id),S=await p.get(m);if(!S.exists())throw new Error("Usuario no encontrado");const Z=B(I,"users",n.providerId),V=await p.get(Z);if(!V.exists())throw new Error("Proveedor no encontrado");const re=B(I,"providerBalances",n.providerId),ce=await p.get(re);let ie=0;ce.exists()?ie=parseFloat(ce.data().balance)||0:p.set(re,{balance:0,provider:n.providerId,updatedAt:be()});let J=n.providerPhone||"";J||(J=V.data().phoneNumber||""),p.update(P,{status:"unavailable",assignedTo:o.id,assignedAt:new Date().toISOString()}),p.update(T,{availableAccounts:it(-1),stock:it(-1)});const de=(Number(S.data().balance)||0)-n.price;if(de<0)throw new Error("Saldo insuficiente");const Se=S.data().orders||[],Ce={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,status:"active",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},terms:n.terms,type:"buscapersonas"};p.update(m,{balance:de,orders:[...Se,Ce]});const ue=(Number(V.data().balance)||0)+n.price,ke=V.data().sales||[],ve={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:J,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleDate:new Date().toISOString(),status:"completed",terms:n.terms};p.update(Z,{balance:ue,sales:[...ke,ve]});const Oe=ie+n.price;p.set(re,{balance:Oe,provider:n.providerId,updatedAt:be()},{merge:!0});const Le=B(X(I,"sales"));return p.set(Le,{...Ce,provider:n.provider,providerId:n.providerId,providerPhone:J,saleDate:new Date().toISOString(),status:"completed",accountDetails:{email:x.email||"No proporcionado",password:x.password||"No proporcionado",profile:x.profile||"No proporcionado"},saleId:ve.saleId,terms:n.terms}),x}):await ot(I,async p=>{const T=B(I,"users",o.id),F=await p.get(T);if(!F.exists())throw new Error("Usuario no encontrado");const q=B(I,"users",n.providerId),se=await p.get(q);if(!se.exists())throw new Error("Proveedor no encontrado");const ne=B(I,"providerBalances",n.providerId),w=await p.get(ne);let D=0;w.exists()?D=parseFloat(w.data().balance)||0:p.set(ne,{balance:0,provider:n.providerId,updatedAt:be()});let P=n.providerPhone||"";P||(P=se.data().phoneNumber||"");const m=(Number(F.data().balance)||0)-n.price;if(m<0)throw new Error("Saldo insuficiente");const S=F.data().orders||[],Z={productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,status:"pending",customerName:y.customerName,customerId:o.id,phoneNumber:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,createdAt:new Date().toISOString(),accountDetails:null,terms:n.terms,type:"buscapersonas"};p.update(T,{balance:m,orders:[...S,Z]});const re=(Number(se.data().balance)||0)+n.price,ce=se.data().sales||[],ie={saleId:B(X(I,"sales")).id,productId:n.id,productName:n.name,price:n.price,renewalPrice:n.renewalPrice,provider:n.provider,providerId:n.providerId,providerPhone:P,customerId:o.id,customerName:y.customerName,customerPhone:y.phoneNumber,buyerName:o.name,buyerId:o.id,buyerPhone:o.phone,accountDetails:null,saleDate:new Date().toISOString(),status:"pending",terms:n.terms};p.update(q,{balance:re,sales:[...ce,ie]});const J=D+n.price;p.set(ne,{balance:J,provider:n.providerId,updatedAt:be()},{merge:!0});const fe=B(X(I,"sales"));p.set(fe,{...Z,provider:n.provider,providerId:n.providerId,providerPhone:P,saleDate:new Date().toISOString(),status:"pending",saleId:ie.saleId,terms:n.terms})}),h(p=>p-n.price),c(p=>({...p,orders:[...p.orders,{...y,status:n.status==="En stock"?"active":"pending",createdAt:new Date().toISOString(),accountDetails:n.status==="En stock"?{email:(j==null?void 0:j.email)||"No proporcionado",password:(j==null?void 0:j.password)||"No proporcionado",profile:(j==null?void 0:j.profile)||"No proporcionado"}:null}]})),L(null),R({message:n.status==="En stock"?"¡Compra realizada con éxito! El proveedor se contactará contigo con los detalles de acceso.":"¡Pedido realizado con éxito! El proveedor se contactará contigo para coordinar los detalles."})}catch(n){E(n.message||"Error al procesar la compra"),console.error("Error en la compra:",n)}finally{N(!1)}},ye=n=>{A({name:n.name,accountDetails:n.accountDetails,provider:n.provider,terms:n.terms,accountType:n.accountType})},ge=n=>{A({name:n.name,terms:n.terms,provider:n.provider,accountType:n.accountType}),O(!0)},Ve=()=>{if(!o){$("/login");return}(o==null?void 0:o.role)==="user"?$("/dashboard/user"):(o==null?void 0:o.role)==="affiliate"?$("/dashboard/affiliate"):(o==null?void 0:o.role)==="provider"?$("/dashboard/provider"):(o==null?void 0:o.role)==="admin"&&$("/dashboard/admin")},Re=n=>{n.preventDefault(),U.trim()&&$(`/search?q=${encodeURIComponent(U)}&category=Busca Personas`)},Pe=r.filter(n=>n.name.toLowerCase().includes(U.toLowerCase())),Qe=n=>n.status==="A pedido"?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-yellow-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"A pedido"})}):Number(n.stock)>0?e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-blue-500 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsxs("span",{className:"text-xs font-bold uppercase tracking-tight",children:["Stock: ",n.stock]})}):e.jsx("div",{className:"absolute top-0 left-0 w-24 h-8 bg-gray-600 text-white flex items-center justify-center transform -rotate-45 -translate-x-6 translate-y-3 shadow-md rounded-br-lg",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-tight",children:"Agotado"})}),He=n=>{if(!n||typeof n!="string")return"30 días";const j=n.match(/(\d+)\s*(mes|meses)/i);if(j)return`${parseInt(j[1],10)*30} días`;const p=n.match(/(\d+)\s*(día|días|dia|dias)/i);if(p)return`${parseInt(p[1],10)} días`;const T=n.match(/(\d+)/);return T?`${parseInt(T[1],10)} días`:"30 días"};return g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200",children:[e.jsx(dt,{className:"animate-spin text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Cargando..."})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-900 to-black p-4",children:[e.jsx(Je,{className:"text-5xl text-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-300 mb-6 text-center max-w-md",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all shadow-lg",children:"Recargar"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-gray-200 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800/50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t(!s),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all md:hidden",children:e.jsx(zt,{size:24})}),e.jsxs(b,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-10 w-auto"}),e.jsx("span",{className:"text-xl font-semibold text-gray-200 hidden sm:block",children:"BlackStreaming"})]})]}),e.jsxs("div",{className:"flex items-center relative w-full sm:w-auto sm:max-w-xs md:max-w-md mt-3 sm:mt-0 order-3 sm:order-2 sm:mx-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar en Busca Personas...",className:"w-full px-4 py-2 rounded-full bg-gray-800/50 text-gray-200 border border-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-500",value:U,onChange:n=>ee(n.target.value)}),e.jsx("button",{onClick:Re,className:"absolute right-3 text-gray-400 hover:text-blue-500 transition-all",children:e.jsx(at,{size:20})})]}),e.jsx("div",{className:"flex items-center space-x-2 order-2 sm:order-3",children:o?e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden sm:flex items-center",children:[e.jsx(Xe,{className:"mr-2 text-blue-500"})," ",o.name]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-200 bg-gray-800/50 px-3 py-1 rounded-full",children:["S/ ",d.toFixed(2)]}),e.jsx("button",{onClick:Ve,className:"p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-all",title:"Dashboard",children:e.jsx(Xe,{className:"text-blue-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),$("/")},className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:[e.jsx(Ct,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$("/login"),className:"px-4 py-2 text-sm text-gray-200 hover:text-blue-500 transition-all",children:"Ingresar"}),e.jsx("button",{onClick:()=>$("/register"),className:"px-4 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all text-sm",children:"Registrarse"})]})})]})}),e.jsxs("div",{className:"flex flex-1 relative",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm text-white shadow-2xl transform ${s?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 md:static md:z-40 md:translate-x-0 border-r border-gray-800/50`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:hidden",children:[e.jsx("span",{className:"text-xl font-semibold text-gray-200",children:"BlackStreaming"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-200 hover:bg-gray-700/50 p-2 rounded-full transition-all",children:e.jsx(bt,{size:24})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsxs(b,{to:"/netflix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-red-400"}),e.jsx("span",{children:"Netflix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.netflix})]}),e.jsxs(b,{to:"/spotify",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-green-400"}),e.jsx("span",{children:"Spotify"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.spotify})]}),e.jsxs(b,{to:"/disney",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-400"}),e.jsx("span",{children:"Disney+"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.disney})]}),e.jsxs(b,{to:"/max",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-purple-400"}),e.jsx("span",{children:"Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.max})]}),e.jsxs(b,{to:"/primevideo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-blue-500"}),e.jsx("span",{children:"Prime Video"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.primevideo})]}),e.jsxs(b,{to:"/vix",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-400"}),e.jsx("span",{children:"Vix"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vix})]}),e.jsxs(b,{to:"/crunchyroll",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-orange-500"}),e.jsx("span",{children:"Crunchyroll"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.crunchyroll})]}),e.jsxs(b,{to:"/canva",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-teal-500"}),e.jsx("span",{children:"Canva"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.canva})]}),e.jsxs(b,{to:"/chatgpt",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"text-green-500"}),e.jsx("span",{children:"ChatGPT"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.chatgpt})]}),e.jsxs(b,{to:"/redessociales",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-pink-500"}),e.jsx("span",{children:"Redes Sociales"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.redessociales})]}),e.jsxs(b,{to:"/dgo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-600"}),e.jsx("span",{children:"Dgo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.dgo})]}),e.jsxs(b,{to:"/ligamax",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"text-green-600"}),e.jsx("span",{children:"Liga Max"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.ligamax})]}),e.jsxs(b,{to:"/movistarplay",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Movistar Play"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.movistarplay})]}),e.jsxs(b,{to:"/youtube",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"YouTube"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.youtube})]}),e.jsxs(b,{to:"/deezer",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-purple-500"}),e.jsx("span",{children:"Deezer"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.deezer})]}),e.jsxs(b,{to:"/tidal",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-black"}),e.jsx("span",{children:"Tidal"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.tidal})]}),e.jsxs(b,{to:"/vpn",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-gray-500"}),e.jsx("span",{children:"Vpn"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vpn})]}),e.jsxs(b,{to:"/wintv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-500"}),e.jsx("span",{children:"Win Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.wintv})]}),e.jsxs(b,{to:"/applemusic",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"text-gray-600"}),e.jsx("span",{children:"Apple Music"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.applemusic})]}),e.jsxs(b,{to:"/appletv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-gray-200"}),e.jsx("span",{children:"Apple Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.appletv})]}),e.jsxs(b,{to:"/iptv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-blue-700"}),e.jsx("span",{children:"Iptv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.iptv})]}),e.jsxs(b,{to:"/flujotv",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"text-red-500"}),e.jsx("span",{children:"Flujo Tv"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.flujotv})]}),e.jsxs(b,{to:"/vikirakuten",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-pink-500"}),e.jsx("span",{children:"Viki Rakuten"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.vikirakuten})]}),e.jsxs(b,{to:"/pornhub",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"text-red-600"}),e.jsx("span",{children:"Pornhub"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.pornhub})]}),e.jsxs(b,{to:"/paramount",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"text-blue-500"}),e.jsx("span",{children:"Paramount"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.paramount})]}),e.jsxs(b,{to:"/licencias",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"text-gray-500"}),e.jsx("span",{children:"Licencias"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.licencias})]}),e.jsxs(b,{to:"/capcut",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"text-green-500"}),e.jsx("span",{children:"Capcut"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.capcut})]}),e.jsxs(b,{to:"/duolingo",className:"flex items-center justify-between px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"text-green-400"}),e.jsx("span",{children:"Duolingo"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.duolingo})]}),e.jsxs(b,{to:"/buscapersonas",className:"flex items-center justify-between px-4 py-3 rounded-xl bg-blue-500/30 text-white border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"text-yellow-400"}),e.jsx("span",{children:"Busca Personas"})]}),e.jsx("span",{className:"bg-gray-800/50 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:u.buscapersonas})]})]}),o&&e.jsx("div",{className:"p-4 border-t border-gray-800/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-500/20 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-white font-bold text-lg",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Saldo: S/ ",d.toFixed(2)]})]})]})})]})}),e.jsxs("main",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 md:pt-4 md:ml-64 min-h-screen overflow-x-hidden",children:[e.jsxs("section",{className:"relative h-48 sm:h-56 md:h-64 bg-cover bg-center flex items-center justify-center overflow-hidden rounded-2xl shadow-lg mb-8",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321497487-e288fb19713f?w=1350&q=80')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 to-black/50"}),e.jsxs("div",{className:"relative z-10 text-center px-4",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 drop-shadow-lg",children:"Busca Personas"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 max-w-2xl mx-auto drop-shadow-md",children:"Encuentra información confiable sobre personas de manera rápida y segura"})]})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Servicios de Búsqueda Disponibles"}),e.jsx("button",{onClick:()=>G(!0),className:"text-sm sm:text-base text-gray-200 hover:text-blue-500 transition-all underline underline-offset-4",children:"Términos Generales"})]}),Pe.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-300 text-lg sm:text-xl",children:"No se encontraron productos que coincidan con tu búsqueda"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:Pe.map(n=>e.jsxs("div",{className:"relative group bg-gradient-to-br from-zinc-900/70 to-gray-950/80 rounded-2xl overflow-hidden border border-gray-700/50 shadow-xl hover:shadow-2xl transition-shadow duration-300",style:{boxShadow:"0 2px 10px 0 rgba(0,0,0,0.20), 0 1.5px 8px 0 rgba(255,255,255,0.05)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",border:"1.5px solid rgba(255,255,255,0.065)"},children:[e.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover object-center scale-105 group-hover:scale-110 transition-transform duration-500",style:{filter:"brightness(0.95)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950/80 via-gray-900/20 to-transparent"}),Qe(n)]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"uppercase font-bold tracking-wide text-xs text-gray-200 bg-gray-900/20 px-2 py-0.5 rounded-md",children:n.accountType}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Vt,{className:"text-blue-500",size:13}),He(n.duration)]})]}),e.jsx("h3",{className:"font-extrabold text-lg text-white mb-2 truncate leading-tight drop-shadow",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[Me(te[n.providerId]||1),e.jsx("span",{className:"ml-1 text-gray-400 text-xs",children:(te[n.providerId]||1).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-300 gap-1",children:[e.jsx(qt,{className:"text-blue-500",size:13}),n.provider]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 gap-1",children:[e.jsx($t,{className:"text-blue-500",size:13}),n.status]})]}),e.jsx("div",{className:"flex items-center mb-2",children:n.renewal?e.jsxs("span",{className:"text-gray-200 text-xs font-medium",children:["Renovación S/ ",pe(n.renewalPrice)]}):e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Sin renovación"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("span",{className:"text-white font-bold text-xl tracking-tight drop-shadow",children:["S/ ",pe(n.price)]})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>ye(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx($e,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{onClick:()=>ge(n),className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-3 rounded-lg bg-gray-800/60 hover:bg-gray-700/70 text-gray-100 transition-all border border-gray-700/40 text-xs font-medium shadow-inner focus:outline-none",style:{backdropFilter:"blur(2px)"},children:[e.jsx(Te,{className:"text-blue-500",size:14}),e.jsx("span",{children:"Términos"})]})]}),e.jsxs("button",{onClick:()=>De(n),className:`w-full py-2 px-3 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 shadow-lg transition-all duration-200
                            ${Number(n.stock)>0||n.status==="A pedido"?"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 text-white hover:from-blue-600 hover:to-blue-800":"bg-gray-700 text-gray-400 cursor-not-allowed"}
                          `,disabled:Number(n.stock)<=0&&n.status!=="A pedido",children:[e.jsx(et,{size:16}),n.status==="A pedido"?"Pedir Ahora":"Comprar"]})]})]})]},n.id))})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(et,{className:"mr-2 text-blue-500"})," Confirmar Compra"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Estás a punto de comprar"," ",e.jsx("span",{className:"font-semibold text-white",children:y.product.name})," ","por"," ",e.jsxs("span",{className:"font-semibold text-white",children:["S/ ",pe(y.product.price)]}),"."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:y.customerName,onChange:n=>L({...y,customerName:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Número de WhatsApp"}),e.jsx("input",{type:"text",value:y.phoneNumber,onChange:n=>L({...y,phoneNumber:n.target.value}),className:"w-full px-4 py-2 rounded-md bg-gray-700/50 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"9 dígitos (sin código de país)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"termsCheck",className:"h-4 w-4 text-blue-500 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheck",className:"ml-2 text-sm text-gray-300",children:["Acepto los"," ",e.jsx("button",{onClick:()=>ge(y.product),className:"text-blue-500 hover:text-blue-600 underline underline-offset-2",children:"términos y condiciones"})]})]}),k&&e.jsxs("p",{className:"text-blue-500 text-sm flex items-center",children:[e.jsx(Je,{className:"mr-2"})," ",k]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cancelar"}),e.jsx("button",{onClick:he,disabled:g,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"animate-spin mr-2"})," Procesando..."]}):"Confirmar"})]})]})}),_&&!z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Detalles del Producto"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Nombre:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Tipo de Cuenta:"})," ",_.accountType]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Detalles:"})," ",_.accountDetails]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),_&&z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos y Condiciones"]}),e.jsxs("div",{className:"space-y-3 text-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Producto:"})," ",_.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Proveedor:"})," ",_.provider]}),e.jsxs("p",{className:"whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold text-white",children:"Términos:"})," ",_.terms]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Nota: El uso de los servicios de búsqueda de personas debe cumplir con las leyes de privacidad y regulaciones locales."})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),A(null)},className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"}),y&&e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Volver a Compra"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Te,{className:"mr-2 text-blue-500"})," Términos Generales"]}),e.jsxs("div",{className:"text-gray-300 space-y-3",children:[e.jsx("p",{children:"Al realizar una compra en BlackStreaming, aceptas los siguientes términos generales:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Las cuentas son proporcionadas por proveedores externos y su disponibilidad puede variar."}),e.jsx("li",{children:"No nos hacemos responsables por el uso indebido de las cuentas por parte del usuario."}),e.jsx("li",{children:'Los tiempos de entrega para pedidos "A pedido" dependen del proveedor y pueden tomar hasta 48 horas.'}),e.jsx("li",{children:"Las renovaciones automáticas están sujetas a la disponibilidad del proveedor y pueden variar en precio."}),e.jsx("li",{children:"No se aceptan reembolsos una vez que la cuenta ha sido entregada y activada."}),e.jsx("li",{children:"Los servicios de búsqueda de personas deben usarse de manera ética y cumplir con las leyes de privacidad aplicables."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-700/50 text-white rounded-md hover:bg-gray-600/50 transition-all",children:"Cerrar"})})]})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-800/90 rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-md border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 flex items-center",children:[e.jsx($e,{className:"mr-2 text-blue-500"})," Notificación"]}),e.jsx("p",{className:"text-gray-300 mb-6",children:H.message}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{H.onClose&&H.onClose(),R(null)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-all",children:"Aceptar"})})]})})]})};v.memo(()=>{const[s,t]=v.useState(null),[r,a]=v.useState(0),[i,l]=v.useState(!0),[o,c]=v.useState(null),[d,h]=v.useState(!1),[g,N]=v.useState({netflix:0,spotify:0,disney:0,max:0,primevideo:0,vix:0,crunchyroll:0,canva:0,chatgpt:0,redessociales:0}),[k,E]=v.useState(""),y=Pt();v.useEffect(()=>{const A=Dt(Ke,async z=>{if(z)try{const O=await st(B(I,"users",z.uid));if(O.exists()){const K=O.data();t({id:z.uid,name:K.username||"Usuario",email:z.email,orders:K.orders||[],role:K.role||"user"}),a(Number(K.balance)||0)}else c("Usuario no encontrado"),console.error("Usuario no encontrado en la base de datos")}catch(O){c("Error al cargar datos"),console.error(O)}else t(null),a(0);l(!1)});return()=>A()},[]),v.useEffect(()=>{const z=[{name:"Netflix",key:"netflix"},{name:"Spotify",key:"spotify"},{name:"Disney",key:"disney"},{name:"Max",key:"max"},{name:"Prime Video",key:"primevideo"},{name:"Vix",key:"vix"},{name:"Crunchyroll",key:"crunchyroll"},{name:"Canva",key:"canva"},{name:"ChatGPT",key:"chatgpt"},{name:"Redes Sociales",key:"redessociales"}].map(({name:O,key:K})=>{const G=me(X(I,"products"),we("category","==",O));return Ie(G,H=>{N(R=>({...R,[K]:H.docs.length}))},H=>console.error(`Error loading ${O}:`,H))});return()=>z.forEach(O=>O())},[]);const L=()=>{if(!s)return y("/login");y({user:"/dashboard/user",affiliate:"/dashboard/affiliate",provider:"/dashboard/provider",admin:"/dashboard/admin"}[s.role]||"/dashboard/user")},_=A=>{A.preventDefault(),k.trim()&&y(`/search?q=${encodeURIComponent(k)}`)};return i?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:[e.jsx(Kh,{className:"animate-spin text-4xl text-cyan-500"}),e.jsx("span",{className:"ml-2 text-white",children:"Cargando..."})]}):o?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 p-4",children:[e.jsx(Kh,{className:"text-5xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl text-white mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-400 mb-6",children:o}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Reintentar"})]}):e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-800/80 backdrop-blur-sm",children:e.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(b,{to:"/",className:"flex items-center gap-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-8"}),e.jsx("span",{className:"text-lg font-bold text-cyan-500 hidden sm:block",children:"BlackStreaming"})]})}),e.jsx("form",{onSubmit:_,className:"flex-1 max-w-md mx-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full py-2 px-4 rounded-lg bg-gray-700 text-white border border-gray-600 focus:ring-2 focus:ring-cyan-500 focus:border-transparent",value:k,onChange:A=>E(A.target.value)}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-cyan-500",children:e.jsx(at,{size:20})})]})}),e.jsx("div",{className:"flex items-center gap-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:block text-sm text-gray-300",children:s.name}),e.jsxs("span",{className:"px-3 py-1 bg-gray-700 rounded-lg text-sm",children:["S/ ",r.toFixed(2)]}),e.jsx("button",{onClick:L,className:"p-2 hover:bg-gray-700 rounded-lg",title:"Dashboard",children:e.jsx(Xe,{className:"text-cyan-500",size:20})}),e.jsxs("button",{onClick:()=>{Ke.signOut(),y("/")},className:"flex items-center gap-1 px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:[e.jsx(Ct,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>y("/login"),className:"px-3 py-2 text-sm hover:text-cyan-500",children:"Ingresar"}),e.jsx("button",{onClick:()=>y("/register"),className:"px-3 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 text-sm",children:"Registrarse"})]})})]})}),e.jsx("main",{className:"flex-1 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-lg text-center",children:[e.jsx("div",{className:"p-4 bg-gray-800 rounded-full inline-flex mb-6",children:e.jsx(Kh,{className:"text-4xl text-cyan-500"})}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"En Mantenimiento"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Estamos mejorando nuestra plataforma para ti."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-300 mb-6",children:[e.jsx(Vt,{className:"text-yellow-500"}),e.jsx("span",{children:"Volveremos pronto."})]}),e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"¿Qué estamos haciendo?"}),e.jsxs("ul",{className:"text-left space-y-2 text-gray-300",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Corrección de errores en el sistema de pedidos"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Solución de fallos en el retiro de dinero"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Arreglo de errores al pasar del sistema al pedido"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Actualización del dashboard del proveedor"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Actualización del dashboard del usuario"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Refuerzo de la seguridad general del sitio"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-500",children:"•"}),"Mejora en la visualización y diseño"]})]}),e.jsx("button",{onClick:()=>h(!0),className:"mt-4 text-cyan-500 hover:text-cyan-400 underline",children:"Términos Generales"})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-800 rounded-lg max-w-lg w-full max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Términos y Condiciones"}),e.jsx("button",{onClick:()=>h(!1),className:"hover:text-gray-300",children:e.jsx(FiX,{size:24})})]}),e.jsx("div",{className:"space-y-4 text-gray-300",children:[{title:"Proceso de Compra",text:"El proveedor te contactará en 24 horas hábiles para los accesos."},{title:"Garantía",text:"7 días de garantía. El proveedor resolverá problemas o reembolsará."},{title:"Uso Responsable",text:"No nos responsabilizamos por suspensiones por mal uso."},{title:"Soporte",text:"Contacta al proveedor vía WhatsApp."},{title:"Renovaciones",text:"Solicita renovaciones manuales antes del fin del período."}].map(({title:A,text:z},O)=>e.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:A}),e.jsx("p",{children:z})]},O))}),e.jsx("button",{onClick:()=>h(!1),className:"w-full mt-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Cerrar"})]})})}),e.jsx("footer",{className:"bg-gray-800 py-6",children:e.jsxs("div",{className:"container mx-auto px-4 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:kt,alt:"BlackStreaming",className:"h-6"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-500",children:"BlackStreaming"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["© ",new Date().getFullYear()," BlackStreaming. Todos los derechos reservados."]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Desarrollado por Saiph"})]})})]})});const nU=v.createContext(),iU=({children:s})=>{const t=Gg(cd),[r,a]=v.useState(null),[i,l]=v.useState(!0);return v.useEffect(()=>{const o=Dt(t,c=>{a(c),l(!1)});return()=>o()},[]),e.jsx(nU.Provider,{value:{user:r,loading:i},children:!i&&s})},oU=()=>e.jsx(YE,{children:e.jsxs(e.Fragment,{children:[e.jsx(St,{path:"/",element:e.jsx(oF,{})}),e.jsx(St,{path:"/login",element:e.jsx(xF,{})}),e.jsx(St,{path:"/register",element:e.jsx(gF,{})}),e.jsx(St,{path:"/dashboard/user",element:e.jsx(jF,{})}),e.jsx(St,{path:"/dashboard/affiliate",element:e.jsx(kF,{})}),e.jsx(St,{path:"/dashboard/provider",element:e.jsx(PF,{})}),e.jsx(St,{path:"/dashboard/admin",element:e.jsx(EF,{})}),e.jsx(St,{path:"/netflix",element:e.jsx(TF,{})}),e.jsx(St,{path:"/disney",element:e.jsx(_F,{})}),e.jsx(St,{path:"/max",element:e.jsx(DF,{})}),e.jsx(St,{path:"/spotify",element:e.jsx(AF,{})}),e.jsx(St,{path:"/primevideo",element:e.jsx(RF,{})}),e.jsx(St,{path:"/vix",element:e.jsx(MF,{})}),e.jsx(St,{path:"/canva",element:e.jsx(OF,{})}),e.jsx(St,{path:"/chatgpt",element:e.jsx(LF,{})}),e.jsx(St,{path:"/crunchyroll",element:e.jsx(VF,{})}),e.jsx(St,{path:"/redessociales",element:e.jsx(zF,{})}),e.jsx(St,{path:"/applemusic",element:e.jsx(BF,{})}),e.jsx(St,{path:"/appletv",element:e.jsx(FF,{})}),e.jsx(St,{path:"/iptv",element:e.jsx(UF,{})}),e.jsx(St,{path:"/flujotv",element:e.jsx($F,{})}),e.jsx(St,{path:"/vikirakuten",element:e.jsx(WF,{})}),e.jsx(St,{path:"/pornhub",element:e.jsx(qF,{})}),e.jsx(St,{path:"/paramount",element:e.jsx(HF,{})}),e.jsx(St,{path:"/licencias",element:e.jsx(GF,{})}),e.jsx(St,{path:"/capcut",element:e.jsx(QF,{})}),e.jsx(St,{path:"/duolingo",element:e.jsx(KF,{})}),e.jsx(St,{path:"/dgo",element:e.jsx(YF,{})}),e.jsx(St,{path:"/ligamax",element:e.jsx(XF,{})}),e.jsx(St,{path:"/movistarplay",element:e.jsx(JF,{})}),e.jsx(St,{path:"/youtube",element:e.jsx(ZF,{})}),e.jsx(St,{path:"/deezer",element:e.jsx(eU,{})}),e.jsx(St,{path:"/tidal",element:e.jsx(tU,{})}),e.jsx(St,{path:"/vpn",element:e.jsx(sU,{})}),e.jsx(St,{path:"/wintv",element:e.jsx(rU,{})}),e.jsx(St,{path:"/buscapersonas",element:e.jsx(aU,{})})]})});Yh.createRoot(document.getElementById("root")).render(e.jsx(fn.StrictMode,{children:e.jsx(vT,{children:e.jsx(iU,{children:e.jsx(oU,{})})})}));
